{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"QQ Fight Helper","options":{"awareOfChrome":false,"check_for_updates":true,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://fight.pet.qq.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1594054404530},"enabled":false,"position":1,"uuid":"255ac46e-b22f-4f0f-84dd-ba588b31daef","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBRUSBGaWdodCBIZWxwZXIKLy8gQG5hbWVzcGFjZSAgICBodHRwczovL2lzY29udGUuY29tCi8vIEB2ZXJzaW9uICAgICAgMC4xCi8vIEBkZXNjcmlwdGlvbiAgUVEgRmlnaHQgSGVscGVyCi8vIEBhdXRob3IgICAgICAgQ29udGVNYW4KLy8gQHJlcXVpcmUgICAgICBodHRwOi8vY2RuLmJvb3Rjc3MuY29tL2pxdWVyeS8zLjIuMS9qcXVlcnkubWluLmpzCi8vIEBtYXRjaCAgICAgICAgKjovL2ZpZ2h0LnBldC5xcS5jb20vKgoKLy8gQGdyYW50IEdNX2FkZFN0eWxlCi8vIEBncmFudCBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgR01fZ2V0VmFsdWUKLy8gQGdyYW50IEdNX3NldENsaXBib2FyZAovLyBAZ3JhbnQgR01fbG9nCi8vIEBncmFudCBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgdW5zYWZlV2luZG93Ci8vIEBncmFudCB3aW5kb3cuY2xvc2UKLy8gQGdyYW50IHdpbmRvdy5mb2N1cwovLyA9PS9Vc2VyU2NyaXB0PT0KCihmdW5jdGlvbiAoKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgJCgnaGVhZCcpLmFwcGVuZCgiPHN0eWxlPi5oZWxwZXItY29udGFpbmVye3BhZGRpbmc6MjBweDsgYmFja2dyb3VuZDpncmV5OyBmb250LXNpemU6MTJweDsgY29sb3I6Z3JlZW47IHBvc2l0aW9uOmZpeGVkOyB0b3A6MTBweDsgbGVmdDoyMHB4OyBmbG9hdDpsZWZ0OyB3aWR0aDozMDBweDsgaGVpZ2h0OjkwJTsgYm9yZGVyOjFweCBzb2xpZCBibGFjazsgei1pbmRleDogOTk5OTk7fTwvc3R5bGU+Iik7CiAgICAkKCdoZWFkJykuYXBwZW5kKCI8c3R5bGU+LmhlbHBlci1jb250YWluZXIgPiAuaGVscGVyLXRpdGxle2ZvbnQtc2l6ZToyMHB4OyBjb2xvcjp3aGl0ZTsgd2lkdGg6MTAwJTt9PC9zdHlsZT4iKTsKICAgICQoJ2hlYWQnKS5hcHBlbmQoIjxzdHlsZT4uaGVscGVyLWNvbnRhaW5lciA+IC5pdGVte2ZvbnQtc2l6ZToxMnB4OyBjb2xvcjp3aGl0ZTsgd2lkdGg6MTAwJTsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgd2hpdGU7bWFyZ2luLXRvcDoxMHB4OyBwYWRkaW5nOjVweDt9PC9zdHlsZT4iKTsKICAgICQoJ2hlYWQnKS5hcHBlbmQoIjxzdHlsZT4uaGVscGVyLWNvbnRhaW5lciA+IC5pdGVtID4gLml0ZW0tdGl0bGUsLml0ZW0tYnV0dG9ue308L3N0eWxlPiIpOwogICAgJCgnaGVhZCcpLmFwcGVuZCgiPHN0eWxlPi5oZWxwZXItY29udGFpbmVyID4gLml0ZW0gPiAuaXRlbS1idXR0b257bWFyZ2luLWJvdHRvbTozcHg7fTwvc3R5bGU+Iik7CiAgICAkKCdoZWFkJykuYXBwZW5kKCI8c3R5bGU+LmhlbHBlci1jb250YWluZXIgPiAuaXRlbSA+IC5pdGVtLWJ1dHRvbiA+IGJ1dHRvbntwYWRkaW5nOjNweCA1cHg7fTwvc3R5bGU+Iik7CiAgICAkKCdoZWFkJykuYXBwZW5kKCI8c3R5bGU+LmhlbHBlci1jb250YWluZXIgPiAuaXRlbSA+IC5pdGVtLXRpdGxle308L3N0eWxlPiIpOwoKICAgIHZhciBtYWluX2h0bWwgPSAnPGRpdiBjbGFzcz0iaGVscGVyLWNvbnRhaW5lciI+JzsKICAgIG1haW5faHRtbCArPSAnPGRpdiBjbGFzcz0iaGVscGVyLXRpdGxlIj7lpKfkuZDmlpfliqnmiYs8L2Rpdj4nOwoKICAgIC8vIOavj+aXpeekvOWMhQogICAgbWFpbl9odG1sICs9ICc8ZGl2IGNsYXNzPSJpdGVtIj4nOwogICAgbWFpbl9odG1sICs9ICc8ZGl2IGNsYXNzPSJpdGVtLWJ1dHRvbiI+PGJ1dHRvbiBpZD0iYnRuLWRhaWx5Z2lmdC1sb2dpbiI+6I635Y+W44CQ5q+P5pel56S854mp44CRPC9idXR0b24+PC9kaXY+JzsKICAgIG1haW5faHRtbCArPSAnPGRpdiBjbGFzcz0iaXRlbS10aXRsZSBpdGVtLXRpdGxlLWRhaWx5Z2lmdC1sb2dpbiI+5b6F6K+35rGCPC9kaXY+JzsKICAgIG1haW5faHRtbCArPSAnPC9kaXY+JzsKCiAgICAvLyDmr4/ml6XkvKDlip/npLzljIUKICAgIG1haW5faHRtbCArPSAnPGRpdiBjbGFzcz0iaXRlbSI+JzsKICAgIG1haW5faHRtbCArPSAnPGRpdiBjbGFzcz0iaXRlbS1idXR0b24iPjxidXR0b24gaWQ9ImJ0bi1kYWlseWdpZnQtbWVyaWRpYW4iPuiOt+WPluOAkOavj+aXpeS8oOWKn+ekvOWMheOAkTwvYnV0dG9uPjwvZGl2Pic7CiAgICBtYWluX2h0bWwgKz0gJzxkaXYgY2xhc3M9Iml0ZW0tdGl0bGUgaXRlbS10aXRsZS1kYWlseWdpZnQtbWVyaWRpYW4iPuW+heivt+axgjwvZGl2Pic7CiAgICBtYWluX2h0bWwgKz0gJzwvZGl2Pic7CgogICAgbWFpbl9odG1sICs9ICc8L2Rpdj4nOwoKICAgICQoJ2JvZHkjZmlnaHRpbmRleCcpLmFwcGVuZChtYWluX2h0bWwpOwogICAgJCgnI2J0bi1kYWlseWdpZnQtbG9naW4nKS5jbGljayhmdW5jdGlvbigpIHsKICAgICAgICBnZXRfZGFpbHlnaWZ0X2xvZ2luKCk7CiAgICB9KQogICAgJCgnI2J0bi1kYWlseWdpZnQtbWVyaWRpYW4nKS5jbGljayhmdW5jdGlvbigpIHsKICAgICAgICBnZXRfZGFpbHlnaWZ0X21lcmlkaWFuKCk7CiAgICB9KQoKICAgIC8vIOivt+axguavj+aXpeekvOWMhQogICAgZnVuY3Rpb24gZ2V0X2RhaWx5Z2lmdF9sb2dpbigpIHsKICAgICAgICBjbWRCeU5hbWUoJ2RhaWx5Z2lmdF9sb2dpbmknKTsKICAgIH0KCiAgICAvLyDor7fmsYLmr4/ml6XkvKDlip/npLzljIUKICAgIGZ1bmN0aW9uIGdldF9kYWlseWdpZnRfbWVyaWRpYW4oKSB7CiAgICAgICAgY21kQnlOYW1lKCdkYWlseWdpZnRfbWVyaWRpYW4nKTsKICAgIH0KCiAgICAvKgogICAgKiDmiafooYzmjIfku6QKICAgICogY21kIOWRveS7pAogICAgKiBwYXJhbXMg5Y+C5pWwCiAgICAqIHJlZERvbSDnu5PmnpzmmL7npLogZG9tCiAgICAqLwogICAgZnVuY3Rpb24gZXhlY0NtZChjbWQsIHBhcmFtcywgcmVzRG9tKSB7CiAgICAgICAgbGV0IHVybCA9ICdodHRwczovL2ZpZ2h0LnBldC5xcS5jb20vY2dpLWJpbi9wZXRwaz8nOwogICAgICAgIHVybCArPSAnY21kPScrY21kOwogICAgICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMocGFyYW1zKTsKICAgICAgICBrZXlzLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAgICAgdXJsICs9ICcmJysgaXRlbSArICc9JyArIHBhcmFtc1tpdGVtXTsKICAgICAgICB9KQogICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgIm1ldGhvZCI6ICJHRVQiLAogICAgICAgICAgICAidXJsIjogdXJsLAogICAgICAgICAgICAiaGVhZGVycyI6IHsKICAgICAgICAgICAgICAgICJ1c2VyLWFnZW50IjogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83OS4wLjM5NDUuMTMwIFNhZmFyaS81MzcuMzYnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJvbmxvYWQiOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBKU09OLnBhcnNlKHJlc3VsdC5yZXNwb25zZSk7CiAgICAgICAgICAgICAgICAkKCcuaXRlbS10aXRsZS0nK3Jlc0RvbSkudGV4dChyZXMubXNnKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGNtZEJ5TmFtZShuYW1lKSB7CiAgICAgICAgY29uc3QgY21kRGV0YWlsID0gY21kc1tuYW1lXTsKICAgICAgICBleGVjQ21kKGNtZERldGFpbC5jbWQsIGNtZERldGFpbC5wYXJhbXMsIGNtZERldGFpbC5kb20pOwogICAgfQoKICAgIC8vIOS4pOS4quaVsOWtl+mXtOeahOmaj+acuuaVtOaVsAogICAgZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbiwgbWF4KSB7CiAgICAgICAgbWluID0gTWF0aC5jZWlsKG1pbik7CiAgICAgICAgbWF4ID0gTWF0aC5mbG9vcihtYXgpOwogICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47IC8v5LiN5ZCr5pyA5aSn5YC877yM5ZCr5pyA5bCP5YC8CiAgICB9CgogICAgdmFyIGxpc3QgPSBbCiAgICAgICAgJ2dldF9kYWlseWdpZnRfbG9naW4nLAogICAgICAgICdnZXRfZGFpbHlnaWZ0X21lcmlkaWFuJywKICAgIF07CgogICAgLy8g5ZG95Luk6ZuGCiAgICB2YXIgY21kcyA9IHsKICAgICAgICBkYWlseWdpZnRfbG9naW46IHsKICAgICAgICAgICAgY21kOiAnZGFpbHlnaWZ0JywKICAgICAgICAgICAgcGFyYW1zOiB7b3A6J2RyYXcnLCBrZXk6J2xvZ2luJ30sCiAgICAgICAgICAgIGRvbTogJ2RhaWx5Z2lmdC1sb2dpbicsCiAgICAgICAgICAgIGF1dG86IHRydWUsCiAgICAgICAgfSwKICAgICAgICBkYWlseWdpZnRfbWVyaWRpYW46IHsKICAgICAgICAgICAgY21kOiAnZGFpbHlnaWZ0JywKICAgICAgICAgICAgcGFyYW1zOiB7b3A6J2RyYXcnLCBrZXk6J21lcmlkaWFuJ30sCiAgICAgICAgICAgIGRvbTogJ2RhaWx5Z2lmdC1tZXJpZGlhbicsCiAgICAgICAgICAgIGF1dG86IHRydWUsCiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgY21kTmFtZXMgPSBPYmplY3Qua2V5cyhjbWRzKTsKCiAgICAvLyDoh6rliqjmiafooYzku7vliqEKICAgIGZvcihsZXQgaT0wOyBpIDwgY21kTmFtZXMubGVuZ3RoOyBpKyspewogICAgICAgIGNvbnN0IGNtZERldGFpbCA9IGNtZHNbY21kTmFtZXNbaV1dOwogICAgICAgIGlmKGNtZERldGFpbC5hdXRvKSB7CiAgICAgICAgICAgIGNvbnN0IHRpbWUgPSAxMDAwICogaTsKICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGltZTonLCB0aW1lKQogICAgICAgICAgICAgICAgZXhlY0NtZChjbWREZXRhaWwuY21kLCBjbWREZXRhaWwucGFyYW1zLCBjbWREZXRhaWwuZG9tKQogICAgICAgICAgICB9LCB0aW1lKTsKICAgICAgICB9CiAgICB9Cgp9KSgpOw==","requires":[{"meta":{"name":"jquery.min.js","url":"http://cdn.bootcss.com/jquery/3.2.1/jquery.min.js","ts":1603546892644,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2My4yLjEgfCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihhLGIpeyJ1c2Ugc3RyaWN0Ijsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIGIoYSl9OmIoYSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO3ZhciBjPVtdLGQ9YS5kb2N1bWVudCxlPU9iamVjdC5nZXRQcm90b3R5cGVPZixmPWMuc2xpY2UsZz1jLmNvbmNhdCxoPWMucHVzaCxpPWMuaW5kZXhPZixqPXt9LGs9ai50b1N0cmluZyxsPWouaGFzT3duUHJvcGVydHksbT1sLnRvU3RyaW5nLG49bS5jYWxsKE9iamVjdCksbz17fTtmdW5jdGlvbiBwKGEsYil7Yj1ifHxkO3ZhciBjPWIuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7Yy50ZXh0PWEsYi5oZWFkLmFwcGVuZENoaWxkKGMpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyl9dmFyIHE9IjMuMi4xIixyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyByLmZuLmluaXQoYSxiKX0scz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csdD0vXi1tcy0vLHU9Ly0oW2Etel0pL2csdj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O3IuZm49ci5wcm90b3R5cGU9e2pxdWVyeTpxLGNvbnN0cnVjdG9yOnIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBmLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9mLmNhbGwodGhpcyk6YTwwP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPXIubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxifSxlYWNoOmZ1bmN0aW9uKGEpe3JldHVybiByLmVhY2godGhpcyxhKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhyLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoYTwwP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmM8Yj9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCl9LHB1c2g6aCxzb3J0OmMuc29ydCxzcGxpY2U6Yy5zcGxpY2V9LHIuZXh0ZW5kPXIuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGc9YXJndW1lbnRzWzBdfHx7fSxoPTEsaT1hcmd1bWVudHMubGVuZ3RoLGo9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksIm9iamVjdCI9PXR5cGVvZiBnfHxyLmlzRnVuY3Rpb24oZyl8fChnPXt9KSxoPT09aSYmKGc9dGhpcyxoLS0pO2g8aTtoKyspaWYobnVsbCE9KGE9YXJndW1lbnRzW2hdKSlmb3IoYiBpbiBhKWM9Z1tiXSxkPWFbYl0sZyE9PWQmJihqJiZkJiYoci5pc1BsYWluT2JqZWN0KGQpfHwoZT1BcnJheS5pc0FycmF5KGQpKSk/KGU/KGU9ITEsZj1jJiZBcnJheS5pc0FycmF5KGMpP2M6W10pOmY9YyYmci5pc1BsYWluT2JqZWN0KGMpP2M6e30sZ1tiXT1yLmV4dGVuZChqLGYsZCkpOnZvaWQgMCE9PWQmJihnW2JdPWQpKTtyZXR1cm4gZ30sci5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKHErTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PXIudHlwZShhKX0saXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJmE9PT1hLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGEpe3ZhciBiPXIudHlwZShhKTtyZXR1cm4oIm51bWJlciI9PT1ifHwic3RyaW5nIj09PWIpJiYhaXNOYU4oYS1wYXJzZUZsb2F0KGEpKX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYixjO3JldHVybiEoIWF8fCJbb2JqZWN0IE9iamVjdF0iIT09ay5jYWxsKGEpKSYmKCEoYj1lKGEpKXx8KGM9bC5jYWxsKGIsImNvbnN0cnVjdG9yIikmJmIuY29uc3RydWN0b3IsImZ1bmN0aW9uIj09dHlwZW9mIGMmJm0uY2FsbChjKT09PW4pKX0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErIiI6Im9iamVjdCI9PXR5cGVvZiBhfHwiZnVuY3Rpb24iPT10eXBlb2YgYT9qW2suY2FsbChhKV18fCJvYmplY3QiOnR5cGVvZiBhfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGEpe3AoYSl9LGNhbWVsQ2FzZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHQsIm1zLSIpLnJlcGxhY2UodSx2KX0sZWFjaDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MDtpZih3KGEpKXtmb3IoYz1hLmxlbmd0aDtkPGM7ZCsrKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVha31lbHNlIGZvcihkIGluIGEpaWYoYi5jYWxsKGFbZF0sZCxhW2RdKT09PSExKWJyZWFrO3JldHVybiBhfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOihhKyIiKS5yZXBsYWNlKHMsIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxbXTtyZXR1cm4gbnVsbCE9YSYmKHcoT2JqZWN0KGEpKT9yLm1lcmdlKGMsInN0cmluZyI9PXR5cGVvZiBhP1thXTphKTpoLmNhbGwoYyxhKSksY30saW5BcnJheTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG51bGw9PWI/LTE6aS5jYWxsKGIsYSxjKX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO2Q8YztkKyspYVtlKytdPWJbZF07cmV0dXJuIGEubGVuZ3RoPWUsYX0sZ3JlcDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkLGU9W10sZj0wLGc9YS5sZW5ndGgsaD0hYztmPGc7ZisrKWQ9IWIoYVtmXSxmKSxkIT09aCYmZS5wdXNoKGFbZl0pO3JldHVybiBlfSxtYXA6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj0wLGg9W107aWYodyhhKSlmb3IoZD1hLmxlbmd0aDtmPGQ7ZisrKWU9YihhW2ZdLGYsYyksbnVsbCE9ZSYmaC5wdXNoKGUpO2Vsc2UgZm9yKGYgaW4gYSllPWIoYVtmXSxmLGMpLG51bGwhPWUmJmgucHVzaChlKTtyZXR1cm4gZy5hcHBseShbXSxoKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlO2lmKCJzdHJpbmciPT10eXBlb2YgYiYmKGM9YVtiXSxiPWEsYT1jKSxyLmlzRnVuY3Rpb24oYSkpcmV0dXJuIGQ9Zi5jYWxsKGFyZ3VtZW50cywyKSxlPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYnx8dGhpcyxkLmNvbmNhdChmLmNhbGwoYXJndW1lbnRzKSkpfSxlLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8ci5ndWlkKyssZX0sbm93OkRhdGUubm93LHN1cHBvcnQ6b30pLCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJihyLmZuW1N5bWJvbC5pdGVyYXRvcl09Y1tTeW1ib2wuaXRlcmF0b3JdKSxyLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7alsiW29iamVjdCAiK2IrIl0iXT1iLnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiB3KGEpe3ZhciBiPSEhYSYmImxlbmd0aCJpbiBhJiZhLmxlbmd0aCxjPXIudHlwZShhKTtyZXR1cm4iZnVuY3Rpb24iIT09YyYmIXIuaXNXaW5kb3coYSkmJigiYXJyYXkiPT09Y3x8MD09PWJ8fCJudW1iZXIiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYSl9dmFyIHg9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT0ic2l6emxlIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9aGEoKSx6PWhhKCksQT1oYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPXt9Lmhhc093blByb3BlcnR5LEQ9W10sRT1ELnBvcCxGPUQucHVzaCxHPUQucHVzaCxIPUQuc2xpY2UsST1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX0sSj0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLEs9IltcXHgyMFxcdFxcclxcblxcZl0iLEw9Iig/OlxcXFwufFtcXHctXXxbXlwwLVxceGEwXSkrIixNPSJcXFsiK0srIiooIitMKyIpKD86IitLKyIqKFsqXiR8IX5dPz0pIitLKyIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIrTCsiKSl8KSIrSysiKlxcXSIsTj0iOigiK0wrIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK00rIikqKXwuKilcXCl8KSIsTz1uZXcgUmVnRXhwKEsrIisiLCJnIiksUD1uZXcgUmVnRXhwKCJeIitLKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK0srIiskIiwiZyIpLFE9bmV3IFJlZ0V4cCgiXiIrSysiKiwiK0srIioiKSxSPW5ldyBSZWdFeHAoIl4iK0srIiooWz4rfl18IitLKyIpIitLKyIqIiksUz1uZXcgUmVnRXhwKCI9IitLKyIqKFteXFxdJ1wiXSo/KSIrSysiKlxcXSIsImciKSxUPW5ldyBSZWdFeHAoTiksVT1uZXcgUmVnRXhwKCJeIitMKyIkIiksVj17SUQ6bmV3IFJlZ0V4cCgiXiMoIitMKyIpIiksQ0xBU1M6bmV3IFJlZ0V4cCgiXlxcLigiK0wrIikiKSxUQUc6bmV3IFJlZ0V4cCgiXigiK0wrInxbKl0pIiksQVRUUjpuZXcgUmVnRXhwKCJeIitNKSxQU0VVRE86bmV3IFJlZ0V4cCgiXiIrTiksQ0hJTEQ6bmV3IFJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIitLKyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIitLKyIqKD86KFsrLV18KSIrSysiKihcXGQrKXwpKSIrSysiKlxcKXwpIiwiaSIpLGJvb2w6bmV3IFJlZ0V4cCgiXig/OiIrSisiKSQiLCJpIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoIl4iK0srIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrSysiKigoPzotXFxkKT9cXGQqKSIrSysiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sVz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFg9L15oXGQkL2ksWT0vXltee10rXHtccypcW25hdGl2ZSBcdy8sWj0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLCQ9L1srfl0vLF89bmV3IFJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IitLKyI/fCgiK0srIil8LikiLCJpZyIpLGFhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iMHgiK2ItNjU1MzY7cmV0dXJuIGQhPT1kfHxjP2I6ZDwwP1N0cmluZy5mcm9tQ2hhckNvZGUoZCs2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZShkPj4xMHw1NTI5NiwxMDIzJmR8NTYzMjApfSxiYT0vKFtcMC1ceDFmXHg3Zl18Xi0/XGQpfF4tJHxbXlwwLVx4MWZceDdmLVx1RkZGRlx3LV0vZyxjYT1mdW5jdGlvbihhLGIpe3JldHVybiBiPyJcMCI9PT1hPyJcdWZmZmQiOmEuc2xpY2UoMCwtMSkrIlxcIithLmNoYXJDb2RlQXQoYS5sZW5ndGgtMSkudG9TdHJpbmcoMTYpKyIgIjoiXFwiK2F9LGRhPWZ1bmN0aW9uKCl7bSgpfSxlYT10YShmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwJiYoImZvcm0iaW4gYXx8ImxhYmVsImluIGEpfSx7ZGlyOiJwYXJlbnROb2RlIixuZXh0OiJsZWdlbmQifSk7dHJ5e0cuYXBwbHkoRD1ILmNhbGwodi5jaGlsZE5vZGVzKSx2LmNoaWxkTm9kZXMpLERbdi5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZmEpe0c9e2FwcGx5OkQubGVuZ3RoP2Z1bmN0aW9uKGEsYil7Ri5hcHBseShhLEguY2FsbChiKSl9OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGgsZD0wO3doaWxlKGFbYysrXT1iW2QrK10pO2EubGVuZ3RoPWMtMX19fWZ1bmN0aW9uIGdhKGEsYixkLGUpe3ZhciBmLGgsaixrLGwsbyxyLHM9YiYmYi5vd25lckRvY3VtZW50LHc9Yj9iLm5vZGVUeXBlOjk7aWYoZD1kfHxbXSwic3RyaW5nIiE9dHlwZW9mIGF8fCFhfHwxIT09dyYmOSE9PXcmJjExIT09dylyZXR1cm4gZDtpZighZSYmKChiP2Iub3duZXJEb2N1bWVudHx8Yjp2KSE9PW4mJm0oYiksYj1ifHxuLHApKXtpZigxMSE9PXcmJihsPVouZXhlYyhhKSkpaWYoZj1sWzFdKXtpZig5PT09dyl7aWYoIShqPWIuZ2V0RWxlbWVudEJ5SWQoZikpKXJldHVybiBkO2lmKGouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNlIGlmKHMmJihqPXMuZ2V0RWxlbWVudEJ5SWQoZikpJiZ0KGIsaikmJmouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNle2lmKGxbMl0pcmV0dXJuIEcuYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKSxkO2lmKChmPWxbM10pJiZjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gRy5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShmKSksZH1pZihjLnFzYSYmIUFbYSsiICJdJiYoIXF8fCFxLnRlc3QoYSkpKXtpZigxIT09dylzPWIscj1hO2Vsc2UgaWYoIm9iamVjdCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpeyhrPWIuZ2V0QXR0cmlidXRlKCJpZCIpKT9rPWsucmVwbGFjZShiYSxjYSk6Yi5zZXRBdHRyaWJ1dGUoImlkIixrPXUpLG89ZyhhKSxoPW8ubGVuZ3RoO3doaWxlKGgtLSlvW2hdPSIjIitrKyIgIitzYShvW2hdKTtyPW8uam9pbigiLCIpLHM9JC50ZXN0KGEpJiZxYShiLnBhcmVudE5vZGUpfHxifWlmKHIpdHJ5e3JldHVybiBHLmFwcGx5KGQscy5xdWVyeVNlbGVjdG9yQWxsKHIpKSxkfWNhdGNoKHgpe31maW5hbGx5e2s9PT11JiZiLnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fXJldHVybiBpKGEucmVwbGFjZShQLCIkMSIpLGIsZCxlKX1mdW5jdGlvbiBoYSgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrIiAiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYysiICJdPWV9cmV0dXJuIGJ9ZnVuY3Rpb24gaWEoYSl7cmV0dXJuIGFbdV09ITAsYX1mdW5jdGlvbiBqYShhKXt2YXIgYj1uLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0Iik7dHJ5e3JldHVybiEhYShiKX1jYXRjaChjKXtyZXR1cm4hMX1maW5hbGx5e2IucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbH19ZnVuY3Rpb24ga2EoYSxiKXt2YXIgYz1hLnNwbGl0KCJ8IiksZT1jLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24gbGEoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiZhLnNvdXJjZUluZGV4LWIuc291cmNlSW5kZXg7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIG1hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PWMmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKCJpbnB1dCI9PT1jfHwiYnV0dG9uIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBvYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuImZvcm0iaW4gYj9iLnBhcmVudE5vZGUmJmIuZGlzYWJsZWQ9PT0hMT8ibGFiZWwiaW4gYj8ibGFiZWwiaW4gYi5wYXJlbnROb2RlP2IucGFyZW50Tm9kZS5kaXNhYmxlZD09PWE6Yi5kaXNhYmxlZD09PWE6Yi5pc0Rpc2FibGVkPT09YXx8Yi5pc0Rpc2FibGVkIT09IWEmJmVhKGIpPT09YTpiLmRpc2FibGVkPT09YToibGFiZWwiaW4gYiYmYi5kaXNhYmxlZD09PWF9fWZ1bmN0aW9uIHBhKGEpe3JldHVybiBpYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixpYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBhJiYidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1nYS5zdXBwb3J0PXt9LGY9Z2EuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiEhYiYmIkhUTUwiIT09Yi5ub2RlTmFtZX0sbT1nYS5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlLGc9YT9hLm93bmVyRG9jdW1lbnR8fGE6djtyZXR1cm4gZyE9PW4mJjk9PT1nLm5vZGVUeXBlJiZnLmRvY3VtZW50RWxlbWVudD8obj1nLG89bi5kb2N1bWVudEVsZW1lbnQscD0hZihuKSx2IT09biYmKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZGEsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixkYSkpLGMuYXR0cmlidXRlcz1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVkudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1qYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShfLGFhKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJpZCIpPT09Yn19LGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYz9bY106W119fSk6KGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShfLGFhKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUmJmEuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSxkLmZpbmQuSUQ9ZnVuY3Rpb24oYSxiKXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQmJnApe3ZhciBjLGQsZSxmPWIuZ2V0RWxlbWVudEJ5SWQoYSk7aWYoZil7aWYoYz1mLmdldEF0dHJpYnV0ZU5vZGUoImlkIiksYyYmYy52YWx1ZT09PWEpcmV0dXJuW2ZdO2U9Yi5nZXRFbGVtZW50c0J5TmFtZShhKSxkPTA7d2hpbGUoZj1lW2QrK10paWYoYz1mLmdldEF0dHJpYnV0ZU5vZGUoImlkIiksYyYmYy52YWx1ZT09PWEpcmV0dXJuW2ZdfXJldHVybltdfX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKCIqIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJnApcmV0dXJuIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKX0scj1bXSxxPVtdLChjLnFzYT1ZLnRlc3Qobi5xdWVyeVNlbGVjdG9yQWxsKSkmJihqYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD0iPGEgaWQ9JyIrdSsiJz48L2E+PHNlbGVjdCBpZD0nIit1KyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGEucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnEucHVzaCgiWypeJF09IitLKyIqKD86Jyd8XCJcIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHEucHVzaCgiXFxbIitLKyIqKD86dmFsdWV8IitKKyIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrdSsiLV0iKS5sZW5ndGh8fHEucHVzaCgifj0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxxLnB1c2goIjpjaGVja2VkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrdSsiKyoiKS5sZW5ndGh8fHEucHVzaCgiLiMuK1srfl0iKX0pLGphKGZ1bmN0aW9uKGEpe2EuaW5uZXJIVE1MPSI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD4iO3ZhciBiPW4uY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGEucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnEucHVzaCgibmFtZSIrSysiKlsqXiR8IX5dPz0iKSwyIT09YS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aCYmcS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpLG8uYXBwZW5kQ2hpbGQoYSkuZGlzYWJsZWQ9ITAsMiE9PWEucXVlcnlTZWxlY3RvckFsbCgiOmRpc2FibGVkIikubGVuZ3RoJiZxLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikscS5wdXNoKCIsLio6Iil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPVkudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmamEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSwiKiIpLHMuY2FsbChhLCJbcyE9JyddOngiKSxyLnB1c2goIiE9IixOKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKCJ8IikpLHI9ci5sZW5ndGgmJm5ldyBSZWdFeHAoci5qb2luKCJ8IikpLGI9WS50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8WS50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09bnx8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1ufHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0koayxhKS1JKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZT1hLnBhcmVudE5vZGUsZj1iLnBhcmVudE5vZGUsZz1bYV0saD1bYl07aWYoIWV8fCFmKXJldHVybiBhPT09bj8tMTpiPT09bj8xOmU/LTE6Zj8xOms/SShrLGEpLUkoayxiKTowO2lmKGU9PT1mKXJldHVybiBsYShhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSlnLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWgudW5zaGlmdChjKTt3aGlsZShnW2RdPT09aFtkXSlkKys7cmV0dXJuIGQ/bGEoZ1tkXSxoW2RdKTpnW2RdPT09dj8tMTpoW2RdPT09dj8xOjB9LG4pOm59LGdhLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZ2EoYSxudWxsLG51bGwsYil9LGdhLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShTLCI9JyQxJ10iKSxjLm1hdGNoZXNTZWxlY3RvciYmcCYmIUFbYisiICJdJiYoIXJ8fCFyLnRlc3QoYikpJiYoIXF8fCFxLnRlc3QoYikpKXRyeXt2YXIgZD1zLmNhbGwoYSxiKTtpZihkfHxjLmRpc2Nvbm5lY3RlZE1hdGNofHxhLmRvY3VtZW50JiYxMSE9PWEuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIGR9Y2F0Y2goZSl7fXJldHVybiBnYShiLG4sbnVsbCxbYV0pLmxlbmd0aD4wfSxnYS5jb250YWlucz1mdW5jdGlvbihhLGIpe3JldHVybihhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSx0KGEsYil9LGdhLmF0dHI9ZnVuY3Rpb24oYSxiKXsoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSk7dmFyIGU9ZC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sZj1lJiZDLmNhbGwoZC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/ZShhLGIsIXApOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09Zj9mOmMuYXR0cmlidXRlc3x8IXA/YS5nZXRBdHRyaWJ1dGUoYik6KGY9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZi5zcGVjaWZpZWQ/Zi52YWx1ZTpudWxsfSxnYS5lc2NhcGU9ZnVuY3Rpb24oYSl7cmV0dXJuKGErIiIpLnJlcGxhY2UoYmEsY2EpfSxnYS5lcnJvcj1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrYSl9LGdhLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZD1bXSxlPTAsZj0wO2lmKGw9IWMuZGV0ZWN0RHVwbGljYXRlcyxrPSFjLnNvcnRTdGFibGUmJmEuc2xpY2UoMCksYS5zb3J0KEIpLGwpe3doaWxlKGI9YVtmKytdKWI9PT1hW2ZdJiYoZT1kLnB1c2goZikpO3doaWxlKGUtLSlhLnNwbGljZShkW2VdLDEpfXJldHVybiBrPW51bGwsYX0sZT1nYS5nZXRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9IiIsZD0wLGY9YS5ub2RlVHlwZTtpZihmKXtpZigxPT09Znx8OT09PWZ8fDExPT09Zil7aWYoInN0cmluZyI9PXR5cGVvZiBhLnRleHRDb250ZW50KXJldHVybiBhLnRleHRDb250ZW50O2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyljKz1lKGEpfWVsc2UgaWYoMz09PWZ8fDQ9PT1mKXJldHVybiBhLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKGI9YVtkKytdKWMrPWUoYik7cmV0dXJuIGN9LGQ9Z2Euc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86aWEsbWF0Y2g6VixhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS5yZXBsYWNlKF8sYWEpLGFbM109KGFbM118fGFbNF18fGFbNV18fCIiKS5yZXBsYWNlKF8sYWEpLCJ+PSI9PT1hWzJdJiYoYVszXT0iICIrYVszXSsiICIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxnYS5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKigiZXZlbiI9PT1hWzNdfHwib2RkIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHwib2RkIj09PWFbM10pKTphWzNdJiZnYS5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gVi5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHwiIjpjJiZULnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoIikiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKF8sYWEpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09YT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yn19LENMQVNTOmZ1bmN0aW9uKGEpe3ZhciBiPXlbYSsiICJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKCIoXnwiK0srIikiK2ErIigiK0srInwkKSIpKSYmeShhLGZ1bmN0aW9uKGEpe3JldHVybiBiLnRlc3QoInN0cmluZyI9PXR5cGVvZiBhLmNsYXNzTmFtZSYmYS5jbGFzc05hbWV8fCJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGUmJmEuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlPWdhLmF0dHIoZCxhKTtyZXR1cm4gbnVsbD09ZT8iIT0iPT09YjohYnx8KGUrPSIiLCI9Ij09PWI/ZT09PWM6IiE9Ij09PWI/ZSE9PWM6Il49Ij09PWI/YyYmMD09PWUuaW5kZXhPZihjKToiKj0iPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6IiQ9Ij09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09Yzoifj0iPT09Yj8oIiAiK2UucmVwbGFjZShPLCIgIikrIiAiKS5pbmRleE9mKGMpPi0xOiJ8PSI9PT1iJiYoZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrIi0iKSl9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJudGgiIT09YS5zbGljZSgwLDMpLGc9Imxhc3QiIT09YS5zbGljZSgtNCksaD0ib2YtdHlwZSI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoLHQ9ITE7aWYocSl7aWYoZil7d2hpbGUocCl7bT1iO3doaWxlKG09bVtwXSlpZihoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxnYS5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2lhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1JKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmlhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShQLCIkMSIpKTtyZXR1cm4gZFt1XT9pYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZ2EoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczppYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoXyxhYSksZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIFUudGVzdChhfHwiIil8fGdhLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2EpLGE9YS5yZXBsYWNlKF8sYWEpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7dmFyIGM7ZG8gaWYoYz1wP2IubGFuZzpiLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8Yi5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYSsiLSIpO3doaWxlKChiPWIucGFyZW50Tm9kZSkmJjE9PT1iLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGM9YS5sb2NhdGlvbiYmYS5sb2NhdGlvbi5oYXNoO3JldHVybiBjJiZjLnNsaWNlKDEpPT09Yi5pZH0scm9vdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW99LGZvY3VzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bi5hY3RpdmVFbGVtZW50JiYoIW4uaGFzRm9jdXN8fG4uaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LGVuYWJsZWQ6b2EoITEpLGRpc2FibGVkOm9hKCEwKSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFgudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFcudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6cGEoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OnBhKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpwYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuW2M8MD9jK2I6Y119KSxldmVuOnBhKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7YzxiO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOnBhKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7YzxiO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6cGEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1jPDA/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpwYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWM8MD9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bWEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bmEoYik7ZnVuY3Rpb24gcmEoKXt9cmEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyByYSxnPWdhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1RLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1SLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFAsIiAiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1WW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/Z2EuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBzYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9IiI7YjxjO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHRhKGEsYixjKXt2YXIgZD1iLmRpcixlPWIubmV4dCxmPWV8fGQsZz1jJiYicGFyZW50Tm9kZSI9PT1mLGg9eCsrO3JldHVybiBiLmZpcnN0P2Z1bmN0aW9uKGIsYyxlKXt3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGcpcmV0dXJuIGEoYixjLGUpO3JldHVybiExfTpmdW5jdGlvbihiLGMsaSl7dmFyIGosayxsLG09W3csaF07aWYoaSl7d2hpbGUoYj1iW2RdKWlmKCgxPT09Yi5ub2RlVHlwZXx8ZykmJmEoYixjLGkpKXJldHVybiEwfWVsc2Ugd2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxnKWlmKGw9Ylt1XXx8KGJbdV09e30pLGs9bFtiLnVuaXF1ZUlEXXx8KGxbYi51bmlxdWVJRF09e30pLGUmJmU9PT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpYj1iW2RdfHxiO2Vsc2V7aWYoKGo9a1tmXSkmJmpbMF09PT13JiZqWzFdPT09aClyZXR1cm4gbVsyXT1qWzJdO2lmKGtbZl09bSxtWzJdPWEoYixjLGkpKXJldHVybiEwfXJldHVybiExfX1mdW5jdGlvbiB1YShhKXtyZXR1cm4gYS5sZW5ndGg+MT9mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5sZW5ndGg7d2hpbGUoZS0tKWlmKCFhW2VdKGIsYyxkKSlyZXR1cm4hMTtyZXR1cm4hMH06YVswXX1mdW5jdGlvbiB2YShhLGIsYyl7Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtkPGU7ZCsrKWdhKGEsYltkXSxjKTtyZXR1cm4gY31mdW5jdGlvbiB3YShhLGIsYyxkLGUpe2Zvcih2YXIgZixnPVtdLGg9MCxpPWEubGVuZ3RoLGo9bnVsbCE9YjtoPGk7aCsrKShmPWFbaF0pJiYoYyYmIWMoZixkLGUpfHwoZy5wdXNoKGYpLGomJmIucHVzaChoKSkpO3JldHVybiBnfWZ1bmN0aW9uIHhhKGEsYixjLGQsZSxmKXtyZXR1cm4gZCYmIWRbdV0mJihkPXhhKGQpKSxlJiYhZVt1XSYmKGU9eGEoZSxmKSksaWEoZnVuY3Rpb24oZixnLGgsaSl7dmFyIGosayxsLG09W10sbj1bXSxvPWcubGVuZ3RoLHA9Znx8dmEoYnx8IioiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6d2EocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXdhKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9JKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj13YShyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6Ry5hcHBseShnLHIpfSl9ZnVuY3Rpb24geWEoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGg9Z3x8ZC5yZWxhdGl2ZVsiICJdLGk9Zz8xOjAsaz10YShmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9LGgsITApLGw9dGEoZnVuY3Rpb24oYSl7cmV0dXJuIEkoYixhKT4tMX0saCwhMCksbT1bZnVuY3Rpb24oYSxjLGQpe3ZhciBlPSFnJiYoZHx8YyE9PWopfHwoKGI9Yykubm9kZVR5cGU/ayhhLGMsZCk6bChhLGMsZCkpO3JldHVybiBiPW51bGwsZX1dO2k8ZjtpKyspaWYoYz1kLnJlbGF0aXZlW2FbaV0udHlwZV0pbT1bdGEodWEobSksYyldO2Vsc2V7aWYoYz1kLmZpbHRlclthW2ldLnR5cGVdLmFwcGx5KG51bGwsYVtpXS5tYXRjaGVzKSxjW3VdKXtmb3IoZT0rK2k7ZTxmO2UrKylpZihkLnJlbGF0aXZlW2FbZV0udHlwZV0pYnJlYWs7cmV0dXJuIHhhKGk+MSYmdWEobSksaT4xJiZzYShhLnNsaWNlKDAsaS0xKS5jb25jYXQoe3ZhbHVlOiIgIj09PWFbaS0yXS50eXBlPyIqIjoiIn0pKS5yZXBsYWNlKFAsIiQxIiksYyxpPGUmJnlhKGEuc2xpY2UoaSxlKSksZTxmJiZ5YShhPWEuc2xpY2UoZSkpLGU8ZiYmc2EoYSkpfW0ucHVzaChjKX1yZXR1cm4gdWEobSl9ZnVuY3Rpb24gemEoYSxiKXt2YXIgYz1iLmxlbmd0aD4wLGU9YS5sZW5ndGg+MCxmPWZ1bmN0aW9uKGYsZyxoLGksayl7dmFyIGwsbyxxLHI9MCxzPSIwIix0PWYmJltdLHU9W10sdj1qLHg9Znx8ZSYmZC5maW5kLlRBRygiKiIsaykseT13Kz1udWxsPT12PzE6TWF0aC5yYW5kb20oKXx8LjEsej14Lmxlbmd0aDtmb3IoayYmKGo9Zz09PW58fGd8fGspO3MhPT16JiZudWxsIT0obD14W3NdKTtzKyspe2lmKGUmJmwpe289MCxnfHxsLm93bmVyRG9jdW1lbnQ9PT1ufHwobShsKSxoPSFwKTt3aGlsZShxPWFbbysrXSlpZihxKGwsZ3x8bixoKSl7aS5wdXNoKGwpO2JyZWFrfWsmJih3PXkpfWMmJigobD0hcSYmbCkmJnItLSxmJiZ0LnB1c2gobCkpfWlmKHIrPXMsYyYmcyE9PXIpe289MDt3aGlsZShxPWJbbysrXSlxKHQsdSxnLGgpO2lmKGYpe2lmKHI+MCl3aGlsZShzLS0pdFtzXXx8dVtzXXx8KHVbc109RS5jYWxsKGkpKTt1PXdhKHUpfUcuYXBwbHkoaSx1KSxrJiYhZiYmdS5sZW5ndGg+MCYmcitiLmxlbmd0aD4xJiZnYS51bmlxdWVTb3J0KGkpfXJldHVybiBrJiYodz15LGo9diksdH07cmV0dXJuIGM/aWEoZik6Zn1yZXR1cm4gaD1nYS5jb21waWxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPVtdLGY9QVthKyIgIl07aWYoIWYpe2J8fChiPWcoYSkpLGM9Yi5sZW5ndGg7d2hpbGUoYy0tKWY9eWEoYltjXSksZlt1XT9kLnB1c2goZik6ZS5wdXNoKGYpO2Y9QShhLHphKGUsZCkpLGYuc2VsZWN0b3I9YX1yZXR1cm4gZn0saT1nYS5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGYsaSxqLGssbCxtPSJmdW5jdGlvbiI9PXR5cGVvZiBhJiZhLG49IWUmJmcoYT1tLnNlbGVjdG9yfHxhKTtpZihjPWN8fFtdLDE9PT1uLmxlbmd0aCl7aWYoaT1uWzBdPW5bMF0uc2xpY2UoMCksaS5sZW5ndGg+MiYmIklEIj09PShqPWlbMF0pLnR5cGUmJjk9PT1iLm5vZGVUeXBlJiZwJiZkLnJlbGF0aXZlW2lbMV0udHlwZV0pe2lmKGI9KGQuZmluZC5JRChqLm1hdGNoZXNbMF0ucmVwbGFjZShfLGFhKSxiKXx8W10pWzBdLCFiKXJldHVybiBjO20mJihiPWIucGFyZW50Tm9kZSksYT1hLnNsaWNlKGkuc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWY9Vi5uZWVkc0NvbnRleHQudGVzdChhKT8wOmkubGVuZ3RoO3doaWxlKGYtLSl7aWYoaj1pW2ZdLGQucmVsYXRpdmVbaz1qLnR5cGVdKWJyZWFrO2lmKChsPWQuZmluZFtrXSkmJihlPWwoai5tYXRjaGVzWzBdLnJlcGxhY2UoXyxhYSksJC50ZXN0KGlbMF0udHlwZSkmJnFhKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoaS5zcGxpY2UoZiwxKSxhPWUubGVuZ3RoJiZzYShpKSwhYSlyZXR1cm4gRy5hcHBseShjLGUpLGM7YnJlYWt9fX1yZXR1cm4obXx8aChhLG4pKShlLGIsIXAsYywhYnx8JC50ZXN0KGEpJiZxYShiLnBhcmVudE5vZGUpfHxiKSxjfSxjLnNvcnRTdGFibGU9dS5zcGxpdCgiIikuc29ydChCKS5qb2luKCIiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9amEoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0IikpfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8a2EoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGEsYixjKXtpZighYylyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoYiwidHlwZSI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8aW5wdXQvPiIsYS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSwiIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIil9KXx8a2EoInZhbHVlIixmdW5jdGlvbihhLGIsYyl7aWYoIWMmJiJpbnB1dCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuIGEuZGVmYXVsdFZhbHVlfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWEuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fGthKEosZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKCFjKXJldHVybiBhW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGdhfShhKTtyLmZpbmQ9eCxyLmV4cHI9eC5zZWxlY3RvcnMsci5leHByWyI6Il09ci5leHByLnBzZXVkb3Msci51bmlxdWVTb3J0PXIudW5pcXVlPXgudW5pcXVlU29ydCxyLnRleHQ9eC5nZXRUZXh0LHIuaXNYTUxEb2M9eC5pc1hNTCxyLmNvbnRhaW5zPXguY29udGFpbnMsci5lc2NhcGVTZWxlY3Rvcj14LmVzY2FwZTt2YXIgeT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT12b2lkIDAhPT1jO3doaWxlKChhPWFbYl0pJiY5IT09YS5ub2RlVHlwZSlpZigxPT09YS5ub2RlVHlwZSl7aWYoZSYmcihhKS5pcyhjKSlicmVhaztkLnB1c2goYSl9cmV0dXJuIGR9LHo9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9LEE9ci5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBCKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKX12YXIgQz0vXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaSxEPS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24gRShhLGIsYyl7cmV0dXJuIHIuaXNGdW5jdGlvbihiKT9yLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTpiLm5vZGVUeXBlP3IuZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09YiE9PWN9KToic3RyaW5nIiE9dHlwZW9mIGI/ci5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGkuY2FsbChiLGEpPi0xIT09Y30pOkQudGVzdChiKT9yLmZpbHRlcihiLGEsYyk6KGI9ci5maWx0ZXIoYixhKSxyLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gaS5jYWxsKGIsYSk+LTEhPT1jJiYxPT09YS5ub2RlVHlwZX0pKX1yLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9Ijpub3QoIithKyIpIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9yLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOnIuZmluZC5tYXRjaGVzKGEsci5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxyLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcy5sZW5ndGgsZT10aGlzO2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2socihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2I8ZDtiKyspaWYoci5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihjPXRoaXMucHVzaFN0YWNrKFtdKSxiPTA7YjxkO2IrKylyLmZpbmQoYSxlW2JdLGMpO3JldHVybiBkPjE/ci51bmlxdWVTb3J0KGMpOmN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soRSh0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soRSh0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEhRSh0aGlzLCJzdHJpbmciPT10eXBlb2YgYSYmQS50ZXN0KGEpP3IoYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgRixHPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKykpJC8sSD1yLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxGLCJzdHJpbmciPT10eXBlb2YgYSl7aWYoZT0iPCI9PT1hWzBdJiYiPiI9PT1hW2EubGVuZ3RoLTFdJiZhLmxlbmd0aD49Mz9bbnVsbCxhLG51bGxdOkcuZXhlYyhhKSwhZXx8IWVbMV0mJmIpcmV0dXJuIWJ8fGIuanF1ZXJ5PyhifHxjKS5maW5kKGEpOnRoaXMuY29uc3RydWN0b3IoYikuZmluZChhKTtpZihlWzFdKXtpZihiPWIgaW5zdGFuY2VvZiByP2JbMF06YixyLm1lcmdlKHRoaXMsci5wYXJzZUhUTUwoZVsxXSxiJiZiLm5vZGVUeXBlP2Iub3duZXJEb2N1bWVudHx8YjpkLCEwKSksQy50ZXN0KGVbMV0pJiZyLmlzUGxhaW5PYmplY3QoYikpZm9yKGUgaW4gYilyLmlzRnVuY3Rpb24odGhpc1tlXSk/dGhpc1tlXShiW2VdKTp0aGlzLmF0dHIoZSxiW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4gZj1kLmdldEVsZW1lbnRCeUlkKGVbMl0pLGYmJih0aGlzWzBdPWYsdGhpcy5sZW5ndGg9MSksdGhpc31yZXR1cm4gYS5ub2RlVHlwZT8odGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6ci5pc0Z1bmN0aW9uKGEpP3ZvaWQgMCE9PWMucmVhZHk/Yy5yZWFkeShhKTphKHIpOnIubWFrZUFycmF5KGEsdGhpcyl9O0gucHJvdG90eXBlPXIuZm4sRj1yKGQpO3ZhciBJPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEo9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07ci5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYj1yKGEsdGhpcyksYz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGM7YSsrKWlmKHIuY29udGFpbnModGhpcyxiW2FdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPSJzdHJpbmciIT10eXBlb2YgYSYmcihhKTtpZighQS50ZXN0KGEpKWZvcig7ZDxlO2QrKylmb3IoYz10aGlzW2RdO2MmJmMhPT1iO2M9Yy5wYXJlbnROb2RlKWlmKGMubm9kZVR5cGU8MTEmJihnP2cuaW5kZXgoYyk+LTE6MT09PWMubm9kZVR5cGUmJnIuZmluZC5tYXRjaGVzU2VsZWN0b3IoYyxhKSkpe2YucHVzaChjKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2soZi5sZW5ndGg+MT9yLnVuaXF1ZVNvcnQoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhPyJzdHJpbmciPT10eXBlb2YgYT9pLmNhbGwocihhKSx0aGlzWzBdKTppLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHIudW5pcXVlU29ydChyLm1lcmdlKHRoaXMuZ2V0KCkscihhLGIpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFkZChudWxsPT1hP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGEpKX19KTtmdW5jdGlvbiBLKGEsYil7d2hpbGUoKGE9YVtiXSkmJjEhPT1hLm5vZGVUeXBlKTtyZXR1cm4gYX1yLmVhY2goe3BhcmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJjExIT09Yi5ub2RlVHlwZT9iOm51bGx9LHBhcmVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSwicGFyZW50Tm9kZSIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB5KGEsInBhcmVudE5vZGUiLGMpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBLKGEsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oYSl7cmV0dXJuIEsoYSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4geShhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4geShhLCJuZXh0U2libGluZyIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHkoYSwicHJldmlvdXNTaWJsaW5nIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHooKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiB6KGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBCKGEsImlmcmFtZSIpP2EuY29udGVudERvY3VtZW50OihCKGEsInRlbXBsYXRlIikmJihhPWEuY29udGVudHx8YSksci5tZXJnZShbXSxhLmNoaWxkTm9kZXMpKX19LGZ1bmN0aW9uKGEsYil7ci5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPXIubWFwKHRoaXMsYixjKTtyZXR1cm4iVW50aWwiIT09YS5zbGljZSgtNSkmJihkPWMpLGQmJiJzdHJpbmciPT10eXBlb2YgZCYmKGU9ci5maWx0ZXIoZCxlKSksdGhpcy5sZW5ndGg+MSYmKEpbYV18fHIudW5pcXVlU29ydChlKSxJLnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgTD0vW15ceDIwXHRcclxuXGZdKy9nO2Z1bmN0aW9uIE0oYSl7dmFyIGI9e307cmV0dXJuIHIuZWFjaChhLm1hdGNoKEwpfHxbXSxmdW5jdGlvbihhLGMpe2JbY109ITB9KSxifXIuQ2FsbGJhY2tzPWZ1bmN0aW9uKGEpe2E9InN0cmluZyI9PXR5cGVvZiBhP00oYSk6ci5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZj1bXSxnPVtdLGg9LTEsaT1mdW5jdGlvbigpe2ZvcihlPWV8fGEub25jZSxkPWI9ITA7Zy5sZW5ndGg7aD0tMSl7Yz1nLnNoaWZ0KCk7d2hpbGUoKytoPGYubGVuZ3RoKWZbaF0uYXBwbHkoY1swXSxjWzFdKT09PSExJiZhLnN0b3BPbkZhbHNlJiYoaD1mLmxlbmd0aCxjPSExKX1hLm1lbW9yeXx8KGM9ITEpLGI9ITEsZSYmKGY9Yz9bXToiIil9LGo9e2FkZDpmdW5jdGlvbigpe3JldHVybiBmJiYoYyYmIWImJihoPWYubGVuZ3RoLTEsZy5wdXNoKGMpKSxmdW5jdGlvbiBkKGIpe3IuZWFjaChiLGZ1bmN0aW9uKGIsYyl7ci5pc0Z1bmN0aW9uKGMpP2EudW5pcXVlJiZqLmhhcyhjKXx8Zi5wdXNoKGMpOmMmJmMubGVuZ3RoJiYic3RyaW5nIiE9PXIudHlwZShjKSYmZChjKX0pfShhcmd1bWVudHMpLGMmJiFiJiZpKCkpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiByLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGEsYil7dmFyIGM7d2hpbGUoKGM9ci5pbkFycmF5KGIsZixjKSk+LTEpZi5zcGxpY2UoYywxKSxjPD1oJiZoLS19KSx0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/ci5pbkFycmF5KGEsZik+LTE6Zi5sZW5ndGg+MH0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gZiYmKGY9W10pLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gZT1nPVtdLGY9Yz0iIix0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFmfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGU9Zz1bXSxjfHxifHwoZj1jPSIiKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfTtmdW5jdGlvbiBOKGEpe3JldHVybiBhfWZ1bmN0aW9uIE8oYSl7dGhyb3cgYX1mdW5jdGlvbiBQKGEsYixjLGQpe3ZhciBlO3RyeXthJiZyLmlzRnVuY3Rpb24oZT1hLnByb21pc2UpP2UuY2FsbChhKS5kb25lKGIpLmZhaWwoYyk6YSYmci5pc0Z1bmN0aW9uKGU9YS50aGVuKT9lLmNhbGwoYSxiLGMpOmIuYXBwbHkodm9pZCAwLFthXS5zbGljZShkKSl9Y2F0Y2goYSl7Yy5hcHBseSh2b2lkIDAsW2FdKX19ci5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGIpe3ZhciBjPVtbIm5vdGlmeSIsInByb2dyZXNzIixyLkNhbGxiYWNrcygibWVtb3J5Iiksci5DYWxsYmFja3MoIm1lbW9yeSIpLDJdLFsicmVzb2x2ZSIsImRvbmUiLHIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLDAsInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixyLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxyLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxkPSJwZW5kaW5nIixlPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBkfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZi5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LCJjYXRjaCI6ZnVuY3Rpb24oYSl7cmV0dXJuIGUudGhlbihudWxsLGEpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiByLkRlZmVycmVkKGZ1bmN0aW9uKGIpe3IuZWFjaChjLGZ1bmN0aW9uKGMsZCl7dmFyIGU9ci5pc0Z1bmN0aW9uKGFbZFs0XV0pJiZhW2RbNF1dO2ZbZFsxXV0oZnVuY3Rpb24oKXt2YXIgYT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZyLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhiLm5vdGlmeSkuZG9uZShiLnJlc29sdmUpLmZhaWwoYi5yZWplY3QpOmJbZFswXSsiV2l0aCJdKHRoaXMsZT9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSx0aGVuOmZ1bmN0aW9uKGIsZCxlKXt2YXIgZj0wO2Z1bmN0aW9uIGcoYixjLGQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxpPWFyZ3VtZW50cyxqPWZ1bmN0aW9uKCl7dmFyIGEsajtpZighKGI8Zikpe2lmKGE9ZC5hcHBseShoLGkpLGE9PT1jLnByb21pc2UoKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGVuYWJsZSBzZWxmLXJlc29sdXRpb24iKTtqPWEmJigib2JqZWN0Ij09dHlwZW9mIGF8fCJmdW5jdGlvbiI9PXR5cGVvZiBhKSYmYS50aGVuLHIuaXNGdW5jdGlvbihqKT9lP2ouY2FsbChhLGcoZixjLE4sZSksZyhmLGMsTyxlKSk6KGYrKyxqLmNhbGwoYSxnKGYsYyxOLGUpLGcoZixjLE8sZSksZyhmLGMsTixjLm5vdGlmeVdpdGgpKSk6KGQhPT1OJiYoaD12b2lkIDAsaT1bYV0pLChlfHxjLnJlc29sdmVXaXRoKShoLGkpKX19LGs9ZT9qOmZ1bmN0aW9uKCl7dHJ5e2ooKX1jYXRjaChhKXtyLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2smJnIuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhhLGsuc3RhY2tUcmFjZSksYisxPj1mJiYoZCE9PU8mJihoPXZvaWQgMCxpPVthXSksYy5yZWplY3RXaXRoKGgsaSkpfX07Yj9rKCk6KHIuRGVmZXJyZWQuZ2V0U3RhY2tIb29rJiYoay5zdGFja1RyYWNlPXIuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCkpLGEuc2V0VGltZW91dChrKSl9fXJldHVybiByLkRlZmVycmVkKGZ1bmN0aW9uKGEpe2NbMF1bM10uYWRkKGcoMCxhLHIuaXNGdW5jdGlvbihlKT9lOk4sYS5ub3RpZnlXaXRoKSksY1sxXVszXS5hZGQoZygwLGEsci5pc0Z1bmN0aW9uKGIpP2I6TikpLGNbMl1bM10uYWRkKGcoMCxhLHIuaXNGdW5jdGlvbihkKT9kOk8pKX0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT9yLmV4dGVuZChhLGUpOmV9fSxmPXt9O3JldHVybiByLmVhY2goYyxmdW5jdGlvbihhLGIpe3ZhciBnPWJbMl0saD1iWzVdO2VbYlsxXV09Zy5hZGQsaCYmZy5hZGQoZnVuY3Rpb24oKXtkPWh9LGNbMy1hXVsyXS5kaXNhYmxlLGNbMF1bMl0ubG9jayksZy5hZGQoYlszXS5maXJlKSxmW2JbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGZbYlswXSsiV2l0aCJdKHRoaXM9PT1mP3ZvaWQgMDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZltiWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGUucHJvbWlzZShmKSxiJiZiLmNhbGwoZixmKSxmfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPWFyZ3VtZW50cy5sZW5ndGgsYz1iLGQ9QXJyYXkoYyksZT1mLmNhbGwoYXJndW1lbnRzKSxnPXIuRGVmZXJyZWQoKSxoPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXtkW2FdPXRoaXMsZVthXT1hcmd1bWVudHMubGVuZ3RoPjE/Zi5jYWxsKGFyZ3VtZW50cyk6YywtLWJ8fGcucmVzb2x2ZVdpdGgoZCxlKX19O2lmKGI8PTEmJihQKGEsZy5kb25lKGgoYykpLnJlc29sdmUsZy5yZWplY3QsIWIpLCJwZW5kaW5nIj09PWcuc3RhdGUoKXx8ci5pc0Z1bmN0aW9uKGVbY10mJmVbY10udGhlbikpKXJldHVybiBnLnRoZW4oKTt3aGlsZShjLS0pUChlW2NdLGgoYyksZy5yZWplY3QpO3JldHVybiBnLnByb21pc2UoKX19KTt2YXIgUT0vXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLztyLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2s9ZnVuY3Rpb24oYixjKXthLmNvbnNvbGUmJmEuY29uc29sZS53YXJuJiZiJiZRLnRlc3QoYi5uYW1lKSYmYS5jb25zb2xlLndhcm4oImpRdWVyeS5EZWZlcnJlZCBleGNlcHRpb246ICIrYi5tZXNzYWdlLGIuc3RhY2ssYyl9LHIucmVhZHlFeGNlcHRpb249ZnVuY3Rpb24oYil7YS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgYn0pfTt2YXIgUj1yLkRlZmVycmVkKCk7ci5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gUi50aGVuKGEpWyJjYXRjaCJdKGZ1bmN0aW9uKGEpe3IucmVhZHlFeGNlcHRpb24oYSl9KSx0aGlzfSxyLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tci5yZWFkeVdhaXQ6ci5pc1JlYWR5KXx8KHIuaXNSZWFkeT0hMCxhIT09ITAmJi0tci5yZWFkeVdhaXQ+MHx8Ui5yZXNvbHZlV2l0aChkLFtyXSkpfX0pLHIucmVhZHkudGhlbj1SLnRoZW47ZnVuY3Rpb24gUygpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsUyksCmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsUyksci5yZWFkeSgpfSJjb21wbGV0ZSI9PT1kLnJlYWR5U3RhdGV8fCJsb2FkaW5nIiE9PWQucmVhZHlTdGF0ZSYmIWQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsP2Euc2V0VGltZW91dChyLnJlYWR5KTooZC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixTKSxhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLFMpKTt2YXIgVD1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD0wLGk9YS5sZW5ndGgsaj1udWxsPT1jO2lmKCJvYmplY3QiPT09ci50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpVChhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxyLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwocihhKSxjKX0pKSxiKSlmb3IoO2g8aTtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfSxVPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gVigpe3RoaXMuZXhwYW5kbz1yLmV4cGFuZG8rVi51aWQrK31WLnVpZD0xLFYucHJvdG90eXBlPXtjYWNoZTpmdW5jdGlvbihhKXt2YXIgYj1hW3RoaXMuZXhwYW5kb107cmV0dXJuIGJ8fChiPXt9LFUoYSkmJihhLm5vZGVUeXBlP2FbdGhpcy5leHBhbmRvXT1iOk9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLHRoaXMuZXhwYW5kbyx7dmFsdWU6Yixjb25maWd1cmFibGU6ITB9KSkpLGJ9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmNhY2hlKGEpO2lmKCJzdHJpbmciPT10eXBlb2YgYillW3IuY2FtZWxDYXNlKGIpXT1jO2Vsc2UgZm9yKGQgaW4gYillW3IuY2FtZWxDYXNlKGQpXT1iW2RdO3JldHVybiBlfSxnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwPT09Yj90aGlzLmNhY2hlKGEpOmFbdGhpcy5leHBhbmRvXSYmYVt0aGlzLmV4cGFuZG9dW3IuY2FtZWxDYXNlKGIpXX0sYWNjZXNzOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmInN0cmluZyI9PXR5cGVvZiBiJiZ2b2lkIDA9PT1jP3RoaXMuZ2V0KGEsYik6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9YVt0aGlzLmV4cGFuZG9dO2lmKHZvaWQgMCE9PWQpe2lmKHZvaWQgMCE9PWIpe0FycmF5LmlzQXJyYXkoYik/Yj1iLm1hcChyLmNhbWVsQ2FzZSk6KGI9ci5jYW1lbENhc2UoYiksYj1iIGluIGQ/W2JdOmIubWF0Y2goTCl8fFtdKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlkZWxldGUgZFtiW2NdXX0odm9pZCAwPT09Ynx8ci5pc0VtcHR5T2JqZWN0KGQpKSYmKGEubm9kZVR5cGU/YVt0aGlzLmV4cGFuZG9dPXZvaWQgMDpkZWxldGUgYVt0aGlzLmV4cGFuZG9dKX19LGhhc0RhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9YVt0aGlzLmV4cGFuZG9dO3JldHVybiB2b2lkIDAhPT1iJiYhci5pc0VtcHR5T2JqZWN0KGIpfX07dmFyIFc9bmV3IFYsWD1uZXcgVixZPS9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sWj0vW0EtWl0vZztmdW5jdGlvbiAkKGEpe3JldHVybiJ0cnVlIj09PWF8fCJmYWxzZSIhPT1hJiYoIm51bGwiPT09YT9udWxsOmE9PT0rYSsiIj8rYTpZLnRlc3QoYSk/SlNPTi5wYXJzZShhKTphKX1mdW5jdGlvbiBfKGEsYixjKXt2YXIgZDtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSlpZihkPSJkYXRhLSIrYi5yZXBsYWNlKFosIi0kJiIpLnRvTG93ZXJDYXNlKCksYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSQoYyl9Y2F0Y2goZSl7fVguc2V0KGEsYixjKX1lbHNlIGM9dm9pZCAwO3JldHVybiBjfXIuZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBYLmhhc0RhdGEoYSl8fFcuaGFzRGF0YShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFguYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe1gucmVtb3ZlKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gVy5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe1cucmVtb3ZlKGEsYil9fSksci5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1YLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIVcuZ2V0KGYsImhhc0RhdGFBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPXIuY2FtZWxDYXNlKGQuc2xpY2UoNSkpLF8oZixkLGVbZF0pKSk7Vy5zZXQoZiwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIGV9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe1guc2V0KHRoaXMsYSl9KTpUKHRoaXMsZnVuY3Rpb24oYil7dmFyIGM7aWYoZiYmdm9pZCAwPT09Yil7aWYoYz1YLmdldChmLGEpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoYz1fKGYsYSksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIHRoaXMuZWFjaChmdW5jdGlvbigpe1guc2V0KHRoaXMsYSxiKX0pfSxudWxsLGIsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtYLnJlbW92ZSh0aGlzLGEpfSl9fSksci5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtpZihhKXJldHVybiBiPShifHwiZngiKSsicXVldWUiLGQ9Vy5nZXQoYSxiKSxjJiYoIWR8fEFycmF5LmlzQXJyYXkoYyk/ZD1XLmFjY2VzcyhhLGIsci5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W119LGRlcXVldWU6ZnVuY3Rpb24oYSxiKXtiPWJ8fCJmeCI7dmFyIGM9ci5xdWV1ZShhLGIpLGQ9Yy5sZW5ndGgsZT1jLnNoaWZ0KCksZj1yLl9xdWV1ZUhvb2tzKGEsYiksZz1mdW5jdGlvbigpe3IuZGVxdWV1ZShhLGIpfTsiaW5wcm9ncmVzcyI9PT1lJiYoZT1jLnNoaWZ0KCksZC0tKSxlJiYoImZ4Ij09PWImJmMudW5zaGlmdCgiaW5wcm9ncmVzcyIpLGRlbGV0ZSBmLnN0b3AsZS5jYWxsKGEsZyxmKSksIWQmJmYmJmYuZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihhLGIpe3ZhciBjPWIrInF1ZXVlSG9va3MiO3JldHVybiBXLmdldChhLGMpfHxXLmFjY2VzcyhhLGMse2VtcHR5OnIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe1cucmVtb3ZlKGEsW2IrInF1ZXVlIixjXSl9KX0pfX0pLHIuZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPTI7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBhJiYoYj1hLGE9ImZ4IixjLS0pLGFyZ3VtZW50cy5sZW5ndGg8Yz9yLnF1ZXVlKHRoaXNbMF0sYSk6dm9pZCAwPT09Yj90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPXIucXVldWUodGhpcyxhLGIpO3IuX3F1ZXVlSG9va3ModGhpcyxhKSwiZngiPT09YSYmImlucHJvZ3Jlc3MiIT09Y1swXSYmci5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ci5kZXF1ZXVlKHRoaXMsYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MSxlPXIuRGVmZXJyZWQoKSxmPXRoaXMsZz10aGlzLmxlbmd0aCxoPWZ1bmN0aW9uKCl7LS1kfHxlLnJlc29sdmVXaXRoKGYsW2ZdKX07InN0cmluZyIhPXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxhPWF8fCJmeCI7d2hpbGUoZy0tKWM9Vy5nZXQoZltnXSxhKyJxdWV1ZUhvb2tzIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSk7dmFyIGFhPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLGJhPW5ldyBSZWdFeHAoIl4oPzooWystXSk9fCkoIithYSsiKShbYS16JV0qKSQiLCJpIiksY2E9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxkYT1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsIm5vbmUiPT09YS5zdHlsZS5kaXNwbGF5fHwiIj09PWEuc3R5bGUuZGlzcGxheSYmci5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSkmJiJub25lIj09PXIuY3NzKGEsImRpc3BsYXkiKX0sZWE9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnPXt9O2ZvcihmIGluIGIpZ1tmXT1hLnN0eWxlW2ZdLGEuc3R5bGVbZl09YltmXTtlPWMuYXBwbHkoYSxkfHxbXSk7Zm9yKGYgaW4gYilhLnN0eWxlW2ZdPWdbZl07cmV0dXJuIGV9O2Z1bmN0aW9uIGZhKGEsYixjLGQpe3ZhciBlLGY9MSxnPTIwLGg9ZD9mdW5jdGlvbigpe3JldHVybiBkLmN1cigpfTpmdW5jdGlvbigpe3JldHVybiByLmNzcyhhLGIsIiIpfSxpPWgoKSxqPWMmJmNbM118fChyLmNzc051bWJlcltiXT8iIjoicHgiKSxrPShyLmNzc051bWJlcltiXXx8InB4IiE9PWomJitpKSYmYmEuZXhlYyhyLmNzcyhhLGIpKTtpZihrJiZrWzNdIT09ail7aj1qfHxrWzNdLGM9Y3x8W10saz0raXx8MTtkbyBmPWZ8fCIuNSIsay89ZixyLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBnYT17fTtmdW5jdGlvbiBoYShhKXt2YXIgYixjPWEub3duZXJEb2N1bWVudCxkPWEubm9kZU5hbWUsZT1nYVtkXTtyZXR1cm4gZT9lOihiPWMuYm9keS5hcHBlbmRDaGlsZChjLmNyZWF0ZUVsZW1lbnQoZCkpLGU9ci5jc3MoYiwiZGlzcGxheSIpLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSwibm9uZSI9PT1lJiYoZT0iYmxvY2siKSxnYVtkXT1lLGUpfWZ1bmN0aW9uIGlhKGEsYil7Zm9yKHZhciBjLGQsZT1bXSxmPTAsZz1hLmxlbmd0aDtmPGc7ZisrKWQ9YVtmXSxkLnN0eWxlJiYoYz1kLnN0eWxlLmRpc3BsYXksYj8oIm5vbmUiPT09YyYmKGVbZl09Vy5nZXQoZCwiZGlzcGxheSIpfHxudWxsLGVbZl18fChkLnN0eWxlLmRpc3BsYXk9IiIpKSwiIj09PWQuc3R5bGUuZGlzcGxheSYmZGEoZCkmJihlW2ZdPWhhKGQpKSk6Im5vbmUiIT09YyYmKGVbZl09Im5vbmUiLFcuc2V0KGQsImRpc3BsYXkiLGMpKSk7Zm9yKGY9MDtmPGc7ZisrKW51bGwhPWVbZl0mJihhW2ZdLnN0eWxlLmRpc3BsYXk9ZVtmXSk7cmV0dXJuIGF9ci5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gaWEodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gaWEodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGEodGhpcyk/cih0aGlzKS5zaG93KCk6cih0aGlzKS5oaWRlKCl9KX19KTt2YXIgamE9L14oPzpjaGVja2JveHxyYWRpbykkL2ksa2E9LzwoW2Etel1bXlwvXDA+XHgyMFx0XHJcblxmXSspL2ksbGE9L14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLG1hPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07bWEub3B0Z3JvdXA9bWEub3B0aW9uLG1hLnRib2R5PW1hLnRmb290PW1hLmNvbGdyb3VwPW1hLmNhcHRpb249bWEudGhlYWQsbWEudGg9bWEudGQ7ZnVuY3Rpb24gbmEoYSxiKXt2YXIgYztyZXR1cm4gYz0idW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHwiKiIpOltdLHZvaWQgMD09PWJ8fGImJkIoYSxiKT9yLm1lcmdlKFthXSxjKTpjfWZ1bmN0aW9uIG9hKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKVcuc2V0KGFbY10sImdsb2JhbEV2YWwiLCFifHxXLmdldChiW2NdLCJnbG9iYWxFdmFsIikpfXZhciBwYT0vPHwmIz9cdys7LztmdW5jdGlvbiBxYShhLGIsYyxkLGUpe2Zvcih2YXIgZixnLGgsaSxqLGssbD1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxtPVtdLG49MCxvPWEubGVuZ3RoO248bztuKyspaWYoZj1hW25dLGZ8fDA9PT1mKWlmKCJvYmplY3QiPT09ci50eXBlKGYpKXIubWVyZ2UobSxmLm5vZGVUeXBlP1tmXTpmKTtlbHNlIGlmKHBhLnRlc3QoZikpe2c9Z3x8bC5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxoPShrYS5leGVjKGYpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLGk9bWFbaF18fG1hLl9kZWZhdWx0LGcuaW5uZXJIVE1MPWlbMV0rci5odG1sUHJlZmlsdGVyKGYpK2lbMl0saz1pWzBdO3doaWxlKGstLSlnPWcubGFzdENoaWxkO3IubWVyZ2UobSxnLmNoaWxkTm9kZXMpLGc9bC5maXJzdENoaWxkLGcudGV4dENvbnRlbnQ9IiJ9ZWxzZSBtLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShmKSk7bC50ZXh0Q29udGVudD0iIixuPTA7d2hpbGUoZj1tW24rK10paWYoZCYmci5pbkFycmF5KGYsZCk+LTEpZSYmZS5wdXNoKGYpO2Vsc2UgaWYoaj1yLmNvbnRhaW5zKGYub3duZXJEb2N1bWVudCxmKSxnPW5hKGwuYXBwZW5kQ2hpbGQoZiksInNjcmlwdCIpLGomJm9hKGcpLGMpe2s9MDt3aGlsZShmPWdbaysrXSlsYS50ZXN0KGYudHlwZXx8IiIpJiZjLnB1c2goZil9cmV0dXJuIGx9IWZ1bmN0aW9uKCl7dmFyIGE9ZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYj1hLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpLGM9ZC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Muc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSxjLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSxjLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxiLmFwcGVuZENoaWxkKGMpLG8uY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxiLmlubmVySFRNTD0iPHRleHRhcmVhPng8L3RleHRhcmVhPiIsby5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlfSgpO3ZhciByYT1kLmRvY3VtZW50RWxlbWVudCxzYT0vXmtleS8sdGE9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLHVhPS9eKFteLl0qKSg/OlwuKC4rKXwpLztmdW5jdGlvbiB2YSgpe3JldHVybiEwfWZ1bmN0aW9uIHdhKCl7cmV0dXJuITF9ZnVuY3Rpb24geGEoKXt0cnl7cmV0dXJuIGQuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fWZ1bmN0aW9uIHlhKGEsYixjLGQsZSxmKXt2YXIgZyxoO2lmKCJvYmplY3QiPT10eXBlb2YgYil7InN0cmluZyIhPXR5cGVvZiBjJiYoZD1kfHxjLGM9dm9pZCAwKTtmb3IoaCBpbiBiKXlhKGEsaCxjLGQsYltoXSxmKTtyZXR1cm4gYX1pZihudWxsPT1kJiZudWxsPT1lPyhlPWMsZD1jPXZvaWQgMCk6bnVsbD09ZSYmKCJzdHJpbmciPT10eXBlb2YgYz8oZT1kLGQ9dm9pZCAwKTooZT1kLGQ9YyxjPXZvaWQgMCkpLGU9PT0hMSllPXdhO2Vsc2UgaWYoIWUpcmV0dXJuIGE7cmV0dXJuIDE9PT1mJiYoZz1lLGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHIoKS5vZmYoYSksZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuZ3VpZD1nLmd1aWR8fChnLmd1aWQ9ci5ndWlkKyspKSxhLmVhY2goZnVuY3Rpb24oKXtyLmV2ZW50LmFkZCh0aGlzLGIsZSxkLGMpfSl9ci5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbixvLHAscT1XLmdldChhKTtpZihxKXtjLmhhbmRsZXImJihmPWMsYz1mLmhhbmRsZXIsZT1mLnNlbGVjdG9yKSxlJiZyLmZpbmQubWF0Y2hlc1NlbGVjdG9yKHJhLGUpLGMuZ3VpZHx8KGMuZ3VpZD1yLmd1aWQrKyksKGk9cS5ldmVudHMpfHwoaT1xLmV2ZW50cz17fSksKGc9cS5oYW5kbGUpfHwoZz1xLmhhbmRsZT1mdW5jdGlvbihiKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIHImJnIuZXZlbnQudHJpZ2dlcmVkIT09Yi50eXBlP3IuZXZlbnQuZGlzcGF0Y2guYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgMH0pLGI9KGJ8fCIiKS5tYXRjaChMKXx8WyIiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPXVhLmV4ZWMoYltqXSl8fFtdLG49cD1oWzFdLG89KGhbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxuJiYobD1yLmV2ZW50LnNwZWNpYWxbbl18fHt9LG49KGU/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG4sbD1yLmV2ZW50LnNwZWNpYWxbbl18fHt9LGs9ci5leHRlbmQoe3R5cGU6bixvcmlnVHlwZTpwLGRhdGE6ZCxoYW5kbGVyOmMsZ3VpZDpjLmd1aWQsc2VsZWN0b3I6ZSxuZWVkc0NvbnRleHQ6ZSYmci5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGUpLG5hbWVzcGFjZTpvLmpvaW4oIi4iKX0sZiksKG09aVtuXSl8fChtPWlbbl09W10sbS5kZWxlZ2F0ZUNvdW50PTAsbC5zZXR1cCYmbC5zZXR1cC5jYWxsKGEsZCxvLGcpIT09ITF8fGEuYWRkRXZlbnRMaXN0ZW5lciYmYS5hZGRFdmVudExpc3RlbmVyKG4sZykpLGwuYWRkJiYobC5hZGQuY2FsbChhLGspLGsuaGFuZGxlci5ndWlkfHwoay5oYW5kbGVyLmd1aWQ9Yy5ndWlkKSksZT9tLnNwbGljZShtLmRlbGVnYXRlQ291bnQrKywwLGspOm0ucHVzaChrKSxyLmV2ZW50Lmdsb2JhbFtuXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG4sbyxwLHE9Vy5oYXNEYXRhKGEpJiZXLmdldChhKTtpZihxJiYoaT1xLmV2ZW50cykpe2I9KGJ8fCIiKS5tYXRjaChMKXx8WyIiXSxqPWIubGVuZ3RoO3doaWxlKGotLSlpZihoPXVhLmV4ZWMoYltqXSl8fFtdLG49cD1oWzFdLG89KGhbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxuKXtsPXIuZXZlbnQuc3BlY2lhbFtuXXx8e30sbj0oZD9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8bixtPWlbbl18fFtdLGg9aFsyXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIrby5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKSxnPWY9bS5sZW5ndGg7d2hpbGUoZi0tKWs9bVtmXSwhZSYmcCE9PWsub3JpZ1R5cGV8fGMmJmMuZ3VpZCE9PWsuZ3VpZHx8aCYmIWgudGVzdChrLm5hbWVzcGFjZSl8fGQmJmQhPT1rLnNlbGVjdG9yJiYoIioqIiE9PWR8fCFrLnNlbGVjdG9yKXx8KG0uc3BsaWNlKGYsMSksay5zZWxlY3RvciYmbS5kZWxlZ2F0ZUNvdW50LS0sbC5yZW1vdmUmJmwucmVtb3ZlLmNhbGwoYSxrKSk7ZyYmIW0ubGVuZ3RoJiYobC50ZWFyZG93biYmbC50ZWFyZG93bi5jYWxsKGEsbyxxLmhhbmRsZSkhPT0hMXx8ci5yZW1vdmVFdmVudChhLG4scS5oYW5kbGUpLGRlbGV0ZSBpW25dKX1lbHNlIGZvcihuIGluIGkpci5ldmVudC5yZW1vdmUoYSxuK2Jbal0sYyxkLCEwKTtyLmlzRW1wdHlPYmplY3QoaSkmJlcucmVtb3ZlKGEsImhhbmRsZSBldmVudHMiKX19LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZhciBiPXIuZXZlbnQuZml4KGEpLGMsZCxlLGYsZyxoLGk9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLGo9KFcuZ2V0KHRoaXMsImV2ZW50cyIpfHx7fSlbYi50eXBlXXx8W10saz1yLmV2ZW50LnNwZWNpYWxbYi50eXBlXXx8e307Zm9yKGlbMF09YixjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKylpW2NdPWFyZ3VtZW50c1tjXTtpZihiLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGIpIT09ITEpe2g9ci5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYixqKSxjPTA7d2hpbGUoKGY9aFtjKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7Yi5jdXJyZW50VGFyZ2V0PWYuZWxlbSxkPTA7d2hpbGUoKGc9Zi5oYW5kbGVyc1tkKytdKSYmIWIuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSliLnJuYW1lc3BhY2UmJiFiLnJuYW1lc3BhY2UudGVzdChnLm5hbWVzcGFjZSl8fChiLmhhbmRsZU9iaj1nLGIuZGF0YT1nLmRhdGEsZT0oKHIuZXZlbnQuc3BlY2lhbFtnLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Zy5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09ZSYmKGIucmVzdWx0PWUpPT09ITEmJihiLnByZXZlbnREZWZhdWx0KCksYi5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGIpLGIucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnLGg9W10saT1iLmRlbGVnYXRlQ291bnQsaj1hLnRhcmdldDtpZihpJiZqLm5vZGVUeXBlJiYhKCJjbGljayI9PT1hLnR5cGUmJmEuYnV0dG9uPj0xKSlmb3IoO2ohPT10aGlzO2o9ai5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1qLm5vZGVUeXBlJiYoImNsaWNrIiE9PWEudHlwZXx8ai5kaXNhYmxlZCE9PSEwKSl7Zm9yKGY9W10sZz17fSxjPTA7YzxpO2MrKylkPWJbY10sZT1kLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1nW2VdJiYoZ1tlXT1kLm5lZWRzQ29udGV4dD9yKGUsdGhpcykuaW5kZXgoaik+LTE6ci5maW5kKGUsdGhpcyxudWxsLFtqXSkubGVuZ3RoKSxnW2VdJiZmLnB1c2goZCk7Zi5sZW5ndGgmJmgucHVzaCh7ZWxlbTpqLGhhbmRsZXJzOmZ9KX1yZXR1cm4gaj10aGlzLGk8Yi5sZW5ndGgmJmgucHVzaCh7ZWxlbTpqLGhhbmRsZXJzOmIuc2xpY2UoaSl9KSxofSxhZGRQcm9wOmZ1bmN0aW9uKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIuRXZlbnQucHJvdG90eXBlLGEse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDpyLmlzRnVuY3Rpb24oYik/ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIGIodGhpcy5vcmlnaW5hbEV2ZW50KX06ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFthXX0sc2V0OmZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGEse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmJ9KX19KX0sZml4OmZ1bmN0aW9uKGEpe3JldHVybiBhW3IuZXhwYW5kb10/YTpuZXcgci5FdmVudChhKX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcyE9PXhhKCkmJnRoaXMuZm9jdXMpcmV0dXJuIHRoaXMuZm9jdXMoKSwhMX0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXM9PT14YSgpJiZ0aGlzLmJsdXIpcmV0dXJuIHRoaXMuYmx1cigpLCExfSxkZWxlZ2F0ZVR5cGU6ImZvY3Vzb3V0In0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZigiY2hlY2tib3giPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZCKHRoaXMsImlucHV0IikpcmV0dXJuIHRoaXMuY2xpY2soKSwhMX0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEIoYS50YXJnZXQsImEiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEucmVzdWx0JiZhLm9yaWdpbmFsRXZlbnQmJihhLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9YS5yZXN1bHQpfX19fSxyLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMpfSxyLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiByLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEucmV0dXJuVmFsdWU9PT0hMT92YTp3YSx0aGlzLnRhcmdldD1hLnRhcmdldCYmMz09PWEudGFyZ2V0Lm5vZGVUeXBlP2EudGFyZ2V0LnBhcmVudE5vZGU6YS50YXJnZXQsdGhpcy5jdXJyZW50VGFyZ2V0PWEuY3VycmVudFRhcmdldCx0aGlzLnJlbGF0ZWRUYXJnZXQ9YS5yZWxhdGVkVGFyZ2V0KTp0aGlzLnR5cGU9YSxiJiZyLmV4dGVuZCh0aGlzLGIpLHRoaXMudGltZVN0YW1wPWEmJmEudGltZVN0YW1wfHxyLm5vdygpLHZvaWQodGhpc1tyLmV4cGFuZG9dPSEwKSk6bmV3IHIuRXZlbnQoYSxiKX0sci5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnIuRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOndhLGlzUHJvcGFnYXRpb25TdG9wcGVkOndhLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOndhLGlzU2ltdWxhdGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPXZhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPXZhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD12YSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sci5lYWNoKHthbHRLZXk6ITAsYnViYmxlczohMCxjYW5jZWxhYmxlOiEwLGNoYW5nZWRUb3VjaGVzOiEwLGN0cmxLZXk6ITAsZGV0YWlsOiEwLGV2ZW50UGhhc2U6ITAsbWV0YUtleTohMCxwYWdlWDohMCxwYWdlWTohMCxzaGlmdEtleTohMCx2aWV3OiEwLCJjaGFyIjohMCxjaGFyQ29kZTohMCxrZXk6ITAsa2V5Q29kZTohMCxidXR0b246ITAsYnV0dG9uczohMCxjbGllbnRYOiEwLGNsaWVudFk6ITAsb2Zmc2V0WDohMCxvZmZzZXRZOiEwLHBvaW50ZXJJZDohMCxwb2ludGVyVHlwZTohMCxzY3JlZW5YOiEwLHNjcmVlblk6ITAsdGFyZ2V0VG91Y2hlczohMCx0b0VsZW1lbnQ6ITAsdG91Y2hlczohMCx3aGljaDpmdW5jdGlvbihhKXt2YXIgYj1hLmJ1dHRvbjtyZXR1cm4gbnVsbD09YS53aGljaCYmc2EudGVzdChhLnR5cGUpP251bGwhPWEuY2hhckNvZGU/YS5jaGFyQ29kZTphLmtleUNvZGU6IWEud2hpY2gmJnZvaWQgMCE9PWImJnRhLnRlc3QoYS50eXBlKT8xJmI/MToyJmI/Mzo0JmI/MjowOmEud2hpY2h9fSxyLmV2ZW50LmFkZFByb3ApLHIuZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtyLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fHIuY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLHIuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4geWEodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB5YSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixyKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIhPT0hMSYmImZ1bmN0aW9uIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9d2EpLHRoaXMuZWFjaChmdW5jdGlvbigpe3IuZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9fSk7dmFyIHphPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFthLXpdW15cL1wwPlx4MjBcdFxyXG5cZl0qKVtePl0qKVwvPi9naSxBYT0vPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSxCYT0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxDYT0vXnRydWVcLyguKikvLERhPS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZztmdW5jdGlvbiBFYShhLGIpe3JldHVybiBCKGEsInRhYmxlIikmJkIoMTEhPT1iLm5vZGVUeXBlP2I6Yi5maXJzdENoaWxkLCJ0ciIpP3IoIj50Ym9keSIsYSlbMF18fGE6YX1mdW5jdGlvbiBGYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09YS5nZXRBdHRyaWJ1dGUoInR5cGUiKSkrIi8iK2EudHlwZSxhfWZ1bmN0aW9uIEdhKGEpe3ZhciBiPUNhLmV4ZWMoYS50eXBlKTtyZXR1cm4gYj9hLnR5cGU9YlsxXTphLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpLGF9ZnVuY3Rpb24gSGEoYSxiKXt2YXIgYyxkLGUsZixnLGgsaSxqO2lmKDE9PT1iLm5vZGVUeXBlKXtpZihXLmhhc0RhdGEoYSkmJihmPVcuYWNjZXNzKGEpLGc9Vy5zZXQoYixmKSxqPWYuZXZlbnRzKSl7ZGVsZXRlIGcuaGFuZGxlLGcuZXZlbnRzPXt9O2ZvcihlIGluIGopZm9yKGM9MCxkPWpbZV0ubGVuZ3RoO2M8ZDtjKyspci5ldmVudC5hZGQoYixlLGpbZV1bY10pfVguaGFzRGF0YShhKSYmKGg9WC5hY2Nlc3MoYSksaT1yLmV4dGVuZCh7fSxoKSxYLnNldChiLGkpKX19ZnVuY3Rpb24gSWEoYSxiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ImlucHV0Ij09PWMmJmphLnRlc3QoYS50eXBlKT9iLmNoZWNrZWQ9YS5jaGVja2VkOiJpbnB1dCIhPT1jJiYidGV4dGFyZWEiIT09Y3x8KGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX1mdW5jdGlvbiBKYShhLGIsYyxkKXtiPWcuYXBwbHkoW10sYik7dmFyIGUsZixoLGksaixrLGw9MCxtPWEubGVuZ3RoLG49bS0xLHE9YlswXSxzPXIuaXNGdW5jdGlvbihxKTtpZihzfHxtPjEmJiJzdHJpbmciPT10eXBlb2YgcSYmIW8uY2hlY2tDbG9uZSYmQmEudGVzdChxKSlyZXR1cm4gYS5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBmPWEuZXEoZSk7cyYmKGJbMF09cS5jYWxsKHRoaXMsZSxmLmh0bWwoKSkpLEphKGYsYixjLGQpfSk7aWYobSYmKGU9cWEoYixhWzBdLm93bmVyRG9jdW1lbnQsITEsYSxkKSxmPWUuZmlyc3RDaGlsZCwxPT09ZS5jaGlsZE5vZGVzLmxlbmd0aCYmKGU9ZiksZnx8ZCkpe2ZvcihoPXIubWFwKG5hKGUsInNjcmlwdCIpLEZhKSxpPWgubGVuZ3RoO2w8bTtsKyspaj1lLGwhPT1uJiYoaj1yLmNsb25lKGosITAsITApLGkmJnIubWVyZ2UoaCxuYShqLCJzY3JpcHQiKSkpLGMuY2FsbChhW2xdLGosbCk7aWYoaSlmb3Ioaz1oW2gubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsci5tYXAoaCxHYSksbD0wO2w8aTtsKyspaj1oW2xdLGxhLnRlc3Qoai50eXBlfHwiIikmJiFXLmFjY2VzcyhqLCJnbG9iYWxFdmFsIikmJnIuY29udGFpbnMoayxqKSYmKGouc3JjP3IuX2V2YWxVcmwmJnIuX2V2YWxVcmwoai5zcmMpOnAoai50ZXh0Q29udGVudC5yZXBsYWNlKERhLCIiKSxrKSl9cmV0dXJuIGF9ZnVuY3Rpb24gS2EoYSxiLGMpe2Zvcih2YXIgZCxlPWI/ci5maWx0ZXIoYixhKTphLGY9MDtudWxsIT0oZD1lW2ZdKTtmKyspY3x8MSE9PWQubm9kZVR5cGV8fHIuY2xlYW5EYXRhKG5hKGQpKSxkLnBhcmVudE5vZGUmJihjJiZyLmNvbnRhaW5zKGQub3duZXJEb2N1bWVudCxkKSYmb2EobmEoZCwic2NyaXB0IikpLGQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSk7cmV0dXJuIGF9ci5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSh6YSwiPCQxPjwvJDI+Iil9LGNsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPXIuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEoby5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8ci5pc1hNTERvYyhhKSkpZm9yKGc9bmEoaCksZj1uYShhKSxkPTAsZT1mLmxlbmd0aDtkPGU7ZCsrKUlhKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fG5hKGEpLGc9Z3x8bmEoaCksZD0wLGU9Zi5sZW5ndGg7ZDxlO2QrKylIYShmW2RdLGdbZF0pO2Vsc2UgSGEoYSxoKTtyZXR1cm4gZz1uYShoLCJzY3JpcHQiKSxnLmxlbmd0aD4wJiZvYShnLCFpJiZuYShhLCJzY3JpcHQiKSksaH0sY2xlYW5EYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQsZT1yLmV2ZW50LnNwZWNpYWwsZj0wO3ZvaWQgMCE9PShjPWFbZl0pO2YrKylpZihVKGMpKXtpZihiPWNbVy5leHBhbmRvXSl7aWYoYi5ldmVudHMpZm9yKGQgaW4gYi5ldmVudHMpZVtkXT9yLmV2ZW50LnJlbW92ZShjLGQpOnIucmVtb3ZlRXZlbnQoYyxkLGIuaGFuZGxlKTtjW1cuZXhwYW5kb109dm9pZCAwfWNbWC5leHBhbmRvXSYmKGNbWC5leHBhbmRvXT12b2lkIDApfX19KSxyLmZuLmV4dGVuZCh7ZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiBLYSh0aGlzLGEsITApfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIEthKHRoaXMsYSl9LHRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFQodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9yLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8KHRoaXMudGV4dENvbnRlbnQ9YSl9KX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSmEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPUVhKHRoaXMsYSk7Yi5hcHBlbmRDaGlsZChhKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9RWEodGhpcyxhKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX0pfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7bnVsbCE9KGE9dGhpc1tiXSk7YisrKTE9PT1hLm5vZGVUeXBlJiYoci5jbGVhbkRhdGEobmEoYSwhMSkpLGEudGV4dENvbnRlbnQ9IiIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPW51bGwhPWEmJmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiByLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmIUFhLnRlc3QoYSkmJiFtYVsoa2EuZXhlYyhhKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9ci5odG1sUHJlZmlsdGVyKGEpO3RyeXtmb3IoO2M8ZDtjKyspYj10aGlzW2NdfHx7fSwxPT09Yi5ub2RlVHlwZSYmKHIuY2xlYW5EYXRhKG5hKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIEphKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMucGFyZW50Tm9kZTtyLmluQXJyYXkodGhpcyxhKTwwJiYoci5jbGVhbkRhdGEobmEodGhpcykpLGMmJmMucmVwbGFjZUNoaWxkKGIsdGhpcykpfSxhKX19KSxyLmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihhLGIpe3IuZm5bYV09ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQ9W10sZT1yKGEpLGY9ZS5sZW5ndGgtMSxnPTA7Zzw9ZjtnKyspYz1nPT09Zj90aGlzOnRoaXMuY2xvbmUoITApLHIoZVtnXSlbYl0oYyksaC5hcHBseShkLGMuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhkKX19KTt2YXIgTGE9L15tYXJnaW4vLE1hPW5ldyBSZWdFeHAoIl4oIithYSsiKSg/IXB4KVthLXolXSskIiwiaSIpLE5hPWZ1bmN0aW9uKGIpe3ZhciBjPWIub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm4gYyYmYy5vcGVuZXJ8fChjPWEpLGMuZ2V0Q29tcHV0ZWRTdHlsZShiKX07IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYigpe2lmKGkpe2kuc3R5bGUuY3NzVGV4dD0iYm94LXNpemluZzpib3JkZXItYm94O3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7bWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt0b3A6MSU7d2lkdGg6NTAlIixpLmlubmVySFRNTD0iIixyYS5hcHBlbmRDaGlsZChoKTt2YXIgYj1hLmdldENvbXB1dGVkU3R5bGUoaSk7Yz0iMSUiIT09Yi50b3AsZz0iMnB4Ij09PWIubWFyZ2luTGVmdCxlPSI0cHgiPT09Yi53aWR0aCxpLnN0eWxlLm1hcmdpblJpZ2h0PSI1MCUiLGY9IjRweCI9PT1iLm1hcmdpblJpZ2h0LHJhLnJlbW92ZUNoaWxkKGgpLGk9bnVsbH19dmFyIGMsZSxmLGcsaD1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpLnN0eWxlJiYoaS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGkuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIixvLmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09aS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxoLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7cGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixoLmFwcGVuZENoaWxkKGkpLHIuZXh0ZW5kKG8se3BpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGN9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGIoKSxlfSxwaXhlbE1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIGIoKSxmfSxyZWxpYWJsZU1hcmdpbkxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGd9fSkpfSgpO2Z1bmN0aW9uIE9hKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8TmEoYSksYyYmKGc9Yy5nZXRQcm9wZXJ0eVZhbHVlKGIpfHxjW2JdLCIiIT09Z3x8ci5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPXIuc3R5bGUoYSxiKSksIW8ucGl4ZWxNYXJnaW5SaWdodCgpJiZNYS50ZXN0KGcpJiZMYS50ZXN0KGIpJiYoZD1oLndpZHRoLGU9aC5taW5XaWR0aCxmPWgubWF4V2lkdGgsaC5taW5XaWR0aD1oLm1heFdpZHRoPWgud2lkdGg9ZyxnPWMud2lkdGgsaC53aWR0aD1kLGgubWluV2lkdGg9ZSxoLm1heFdpZHRoPWYpKSx2b2lkIDAhPT1nP2crIiI6Z31mdW5jdGlvbiBQYShhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX12YXIgUWE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFJhPS9eLS0vLFNhPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxUYT17bGV0dGVyU3BhY2luZzoiMCIsZm9udFdlaWdodDoiNDAwIn0sVWE9WyJXZWJraXQiLCJNb3oiLCJtcyJdLFZhPWQuY3JlYXRlRWxlbWVudCgiZGl2Iikuc3R5bGU7ZnVuY3Rpb24gV2EoYSl7aWYoYSBpbiBWYSlyZXR1cm4gYTt2YXIgYj1hWzBdLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPVVhLmxlbmd0aDt3aGlsZShjLS0paWYoYT1VYVtjXStiLGEgaW4gVmEpcmV0dXJuIGF9ZnVuY3Rpb24gWGEoYSl7dmFyIGI9ci5jc3NQcm9wc1thXTtyZXR1cm4gYnx8KGI9ci5jc3NQcm9wc1thXT1XYShhKXx8YSksYn1mdW5jdGlvbiBZYShhLGIsYyl7dmFyIGQ9YmEuZXhlYyhiKTtyZXR1cm4gZD9NYXRoLm1heCgwLGRbMl0tKGN8fDApKSsoZFszXXx8InB4Iik6Yn1mdW5jdGlvbiBaYShhLGIsYyxkLGUpe3ZhciBmLGc9MDtmb3IoZj1jPT09KGQ/ImJvcmRlciI6ImNvbnRlbnQiKT80OiJ3aWR0aCI9PT1iPzE6MDtmPDQ7Zis9MikibWFyZ2luIj09PWMmJihnKz1yLmNzcyhhLGMrY2FbZl0sITAsZSkpLGQ/KCJjb250ZW50Ij09PWMmJihnLT1yLmNzcyhhLCJwYWRkaW5nIitjYVtmXSwhMCxlKSksIm1hcmdpbiIhPT1jJiYoZy09ci5jc3MoYSwiYm9yZGVyIitjYVtmXSsiV2lkdGgiLCEwLGUpKSk6KGcrPXIuY3NzKGEsInBhZGRpbmciK2NhW2ZdLCEwLGUpLCJwYWRkaW5nIiE9PWMmJihnKz1yLmNzcyhhLCJib3JkZXIiK2NhW2ZdKyJXaWR0aCIsITAsZSkpKTtyZXR1cm4gZ31mdW5jdGlvbiAkYShhLGIsYyl7dmFyIGQsZT1OYShhKSxmPU9hKGEsYixlKSxnPSJib3JkZXItYm94Ij09PXIuY3NzKGEsImJveFNpemluZyIsITEsZSk7cmV0dXJuIE1hLnRlc3QoZik/ZjooZD1nJiYoby5ib3hTaXppbmdSZWxpYWJsZSgpfHxmPT09YS5zdHlsZVtiXSksImF1dG8iPT09ZiYmKGY9YVsib2Zmc2V0IitiWzBdLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKV0pLGY9cGFyc2VGbG9hdChmKXx8MCxmK1phKGEsYixjfHwoZz8iYm9yZGVyIjoiY29udGVudCIpLGQsZSkrInB4Iil9ci5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz1PYShhLCJvcGFjaXR5Iik7cmV0dXJuIiI9PT1jPyIxIjpjfX19fSxjc3NOdW1iZXI6e2FuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiEwLGNvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnsiZmxvYXQiOiJjc3NGbG9hdCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEmJjMhPT1hLm5vZGVUeXBlJiY4IT09YS5ub2RlVHlwZSYmYS5zdHlsZSl7dmFyIGUsZixnLGg9ci5jYW1lbENhc2UoYiksaT1SYS50ZXN0KGIpLGo9YS5zdHlsZTtyZXR1cm4gaXx8KGI9WGEoaCkpLGc9ci5jc3NIb29rc1tiXXx8ci5jc3NIb29rc1toXSx2b2lkIDA9PT1jP2cmJiJnZXQiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTpqW2JdOihmPXR5cGVvZiBjLCJzdHJpbmciPT09ZiYmKGU9YmEuZXhlYyhjKSkmJmVbMV0mJihjPWZhKGEsYixlKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiPT09ZiYmKGMrPWUmJmVbM118fChyLmNzc051bWJlcltoXT8iIjoicHgiKSksby5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaltiXT0iaW5oZXJpdCIpLGcmJiJzZXQiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGk/ai5zZXRQcm9wZXJ0eShiLGMpOmpbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9ci5jYW1lbENhc2UoYiksaT1SYS50ZXN0KGIpO3JldHVybiBpfHwoYj1YYShoKSksZz1yLmNzc0hvb2tzW2JdfHxyLmNzc0hvb2tzW2hdLGcmJiJnZXQiaW4gZyYmKGU9Zy5nZXQoYSwhMCxjKSksdm9pZCAwPT09ZSYmKGU9T2EoYSxiLGQpKSwibm9ybWFsIj09PWUmJmIgaW4gVGEmJihlPVRhW2JdKSwiIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fGlzRmluaXRlKGYpP2Z8fDA6ZSk6ZX19KSxyLmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGEsYil7ci5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtpZihjKXJldHVybiFRYS50ZXN0KHIuY3NzKGEsImRpc3BsYXkiKSl8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgmJmEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg/JGEoYSxiLGQpOmVhKGEsU2EsZnVuY3Rpb24oKXtyZXR1cm4gJGEoYSxiLGQpfSl9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGUsZj1kJiZOYShhKSxnPWQmJlphKGEsYixkLCJib3JkZXItYm94Ij09PXIuY3NzKGEsImJveFNpemluZyIsITEsZiksZik7cmV0dXJuIGcmJihlPWJhLmV4ZWMoYykpJiYicHgiIT09KGVbM118fCJweCIpJiYoYS5zdHlsZVtiXT1jLGM9ci5jc3MoYSxiKSksWWEoYSxjLGcpfX19KSxyLmNzc0hvb2tzLm1hcmdpbkxlZnQ9UGEoby5yZWxpYWJsZU1hcmdpbkxlZnQsZnVuY3Rpb24oYSxiKXtpZihiKXJldHVybihwYXJzZUZsb2F0KE9hKGEsIm1hcmdpbkxlZnQiKSl8fGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdC1lYShhLHttYXJnaW5MZWZ0OjB9LGZ1bmN0aW9uKCl7cmV0dXJuIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdH0pKSsicHgifSksci5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oYSxiKXtyLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9InN0cmluZyI9PXR5cGVvZiBjP2Muc3BsaXQoIiAiKTpbY107ZDw0O2QrKyllW2ErY2FbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sTGEudGVzdChhKXx8KHIuY3NzSG9va3NbYStiXS5zZXQ9WWEpfSksci5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKGQ9TmEoYSksZT1iLmxlbmd0aDtnPGU7ZysrKWZbYltnXV09ci5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP3Iuc3R5bGUoYSxiLGMpOnIuY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfX0pO2Z1bmN0aW9uIF9hKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBfYS5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfXIuVHdlZW49X2EsX2EucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpfYSxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxyLmVhc2luZy5fZGVmYXVsdCx0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KHIuY3NzTnVtYmVyW2NdPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1fYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6X2EucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiLGM9X2EucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz1iPXIuZWFzaW5nW3RoaXMuZWFzaW5nXShhLHRoaXMub3B0aW9ucy5kdXJhdGlvbiphLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPWI9YSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqYit0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxjJiZjLnNldD9jLnNldCh0aGlzKTpfYS5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxfYS5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9X2EucHJvdG90eXBlLF9hLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gMSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbCE9YS5lbGVtW2EucHJvcF0mJm51bGw9PWEuZWxlbS5zdHlsZVthLnByb3BdP2EuZWxlbVthLnByb3BdOihiPXIuY3NzKGEuZWxlbSxhLnByb3AsIiIpLGImJiJhdXRvIiE9PWI/YjowKX0sc2V0OmZ1bmN0aW9uKGEpe3IuZnguc3RlcFthLnByb3BdP3IuZnguc3RlcFthLnByb3BdKGEpOjEhPT1hLmVsZW0ubm9kZVR5cGV8fG51bGw9PWEuZWxlbS5zdHlsZVtyLmNzc1Byb3BzW2EucHJvcF1dJiYhci5jc3NIb29rc1thLnByb3BdP2EuZWxlbVthLnByb3BdPWEubm93OnIuc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpfX19LF9hLnByb3BIb29rcy5zY3JvbGxUb3A9X2EucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sci5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfSxfZGVmYXVsdDoic3dpbmcifSxyLmZ4PV9hLnByb3RvdHlwZS5pbml0LHIuZnguc3RlcD17fTt2YXIgYWIsYmIsY2I9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLGRiPS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gZWIoKXtiYiYmKGQuaGlkZGVuPT09ITEmJmEucmVxdWVzdEFuaW1hdGlvbkZyYW1lP2EucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGViKTphLnNldFRpbWVvdXQoZWIsci5meC5pbnRlcnZhbCksci5meC50aWNrKCkpfWZ1bmN0aW9uIGZiKCl7cmV0dXJuIGEuc2V0VGltZW91dChmdW5jdGlvbigpe2FiPXZvaWQgMH0pLGFiPXIubm93KCl9ZnVuY3Rpb24gZ2IoYSxiKXt2YXIgYyxkPTAsZT17aGVpZ2h0OmF9O2ZvcihiPWI/MTowO2Q8NDtkKz0yLWIpYz1jYVtkXSxlWyJtYXJnaW4iK2NdPWVbInBhZGRpbmciK2NdPWE7cmV0dXJuIGImJihlLm9wYWNpdHk9ZS53aWR0aD1hKSxlfWZ1bmN0aW9uIGhiKGEsYixjKXtmb3IodmFyIGQsZT0oa2IudHdlZW5lcnNbYl18fFtdKS5jb25jYXQoa2IudHdlZW5lcnNbIioiXSksZj0wLGc9ZS5sZW5ndGg7ZjxnO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gaWIoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbD0id2lkdGgiaW4gYnx8ImhlaWdodCJpbiBiLG09dGhpcyxuPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJmRhKGEpLHE9Vy5nZXQoYSwiZnhzaG93Iik7Yy5xdWV1ZXx8KGc9ci5fcXVldWVIb29rcyhhLCJmeCIpLG51bGw9PWcudW5xdWV1ZWQmJihnLnVucXVldWVkPTAsaD1nLmVtcHR5LmZpcmUsZy5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7Zy51bnF1ZXVlZHx8aCgpfSksZy51bnF1ZXVlZCsrLG0uYWx3YXlzKGZ1bmN0aW9uKCl7bS5hbHdheXMoZnVuY3Rpb24oKXtnLnVucXVldWVkLS0sci5xdWV1ZShhLCJmeCIpLmxlbmd0aHx8Zy5lbXB0eS5maXJlKCl9KX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxjYi50ZXN0KGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fCJ0b2dnbGUiPT09ZSxlPT09KHA/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWV8fCFxfHx2b2lkIDA9PT1xW2RdKWNvbnRpbnVlO3A9ITB9bltkXT1xJiZxW2RdfHxyLnN0eWxlKGEsZCl9aWYoaT0hci5pc0VtcHR5T2JqZWN0KGIpLGl8fCFyLmlzRW1wdHlPYmplY3Qobikpe2wmJjE9PT1hLm5vZGVUeXBlJiYoYy5vdmVyZmxvdz1bby5vdmVyZmxvdyxvLm92ZXJmbG93WCxvLm92ZXJmbG93WV0saj1xJiZxLmRpc3BsYXksbnVsbD09aiYmKGo9Vy5nZXQoYSwiZGlzcGxheSIpKSxrPXIuY3NzKGEsImRpc3BsYXkiKSwibm9uZSI9PT1rJiYoaj9rPWo6KGlhKFthXSwhMCksaj1hLnN0eWxlLmRpc3BsYXl8fGosaz1yLmNzcyhhLCJkaXNwbGF5IiksaWEoW2FdKSkpLCgiaW5saW5lIj09PWt8fCJpbmxpbmUtYmxvY2siPT09ayYmbnVsbCE9aikmJiJub25lIj09PXIuY3NzKGEsImZsb2F0IikmJihpfHwobS5kb25lKGZ1bmN0aW9uKCl7by5kaXNwbGF5PWp9KSxudWxsPT1qJiYoaz1vLmRpc3BsYXksaj0ibm9uZSI9PT1rPyIiOmspKSxvLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxjLm92ZXJmbG93JiYoby5vdmVyZmxvdz0iaGlkZGVuIixtLmFsd2F5cyhmdW5jdGlvbigpe28ub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxvLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLG8ub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSksaT0hMTtmb3IoZCBpbiBuKWl8fChxPyJoaWRkZW4iaW4gcSYmKHA9cS5oaWRkZW4pOnE9Vy5hY2Nlc3MoYSwiZnhzaG93Iix7ZGlzcGxheTpqfSksZiYmKHEuaGlkZGVuPSFwKSxwJiZpYShbYV0sITApLG0uZG9uZShmdW5jdGlvbigpe3B8fGlhKFthXSksVy5yZW1vdmUoYSwiZnhzaG93Iik7Zm9yKGQgaW4gbilyLnN0eWxlKGEsZCxuW2RdKX0pKSxpPWhiKHA/cVtkXTowLGQsbSksZCBpbiBxfHwocVtkXT1pLnN0YXJ0LHAmJihpLmVuZD1pLnN0YXJ0LGkuc3RhcnQ9MCkpfX1mdW5jdGlvbiBqYihhLGIpe3ZhciBjLGQsZSxmLGc7Zm9yKGMgaW4gYSlpZihkPXIuY2FtZWxDYXNlKGMpLGU9YltkXSxmPWFbY10sQXJyYXkuaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9ci5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBrYihhLGIsYyl7dmFyIGQsZSxmPTAsZz1rYi5wcmVmaWx0ZXJzLmxlbmd0aCxoPXIuRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPWFifHxmYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtnPGk7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksZjwxJiZpP2M6KGl8fGgubm90aWZ5V2l0aChhLFtqLDEsMF0pLGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpyLmV4dGVuZCh7fSxiKSxvcHRzOnIuZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpyLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOmFifHxmYigpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9ci5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtjPGQ7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihqYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtmPGc7ZisrKWlmKGQ9a2IucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIHIuaXNGdW5jdGlvbihkLnN0b3ApJiYoci5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPXIucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiByLm1hcChrLGhiLGopLHIuaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLGoucHJvZ3Jlc3Moai5vcHRzLnByb2dyZXNzKS5kb25lKGoub3B0cy5kb25lLGoub3B0cy5jb21wbGV0ZSkuZmFpbChqLm9wdHMuZmFpbCkuYWx3YXlzKGoub3B0cy5hbHdheXMpLHIuZngudGltZXIoci5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksan1yLkFuaW1hdGlvbj1yLmV4dGVuZChrYix7dHdlZW5lcnM6eyIqIjpbZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZVR3ZWVuKGEsYik7cmV0dXJuIGZhKGMuZWxlbSxhLGJhLmV4ZWMoYiksYyksY31dfSx0d2VlbmVyOmZ1bmN0aW9uKGEsYil7ci5pc0Z1bmN0aW9uKGEpPyhiPWEsYT1bIioiXSk6YT1hLm1hdGNoKEwpO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWM9YVtkXSxrYi50d2VlbmVyc1tjXT1rYi50d2VlbmVyc1tjXXx8W10sa2IudHdlZW5lcnNbY10udW5zaGlmdChiKX0scHJlZmlsdGVyczpbaWJdLHByZWZpbHRlcjpmdW5jdGlvbihhLGIpe2I/a2IucHJlZmlsdGVycy51bnNoaWZ0KGEpOmtiLnByZWZpbHRlcnMucHVzaChhKX19KSxyLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiYib2JqZWN0Ij09dHlwZW9mIGE/ci5leHRlbmQoe30sYSk6e2NvbXBsZXRlOmN8fCFjJiZifHxyLmlzRnVuY3Rpb24oYSkmJmEsZHVyYXRpb246YSxlYXNpbmc6YyYmYnx8YiYmIXIuaXNGdW5jdGlvbihiKSYmYn07cmV0dXJuIHIuZngub2ZmP2QuZHVyYXRpb249MDoibnVtYmVyIiE9dHlwZW9mIGQuZHVyYXRpb24mJihkLmR1cmF0aW9uIGluIHIuZnguc3BlZWRzP2QuZHVyYXRpb249ci5meC5zcGVlZHNbZC5kdXJhdGlvbl06ZC5kdXJhdGlvbj1yLmZ4LnNwZWVkcy5fZGVmYXVsdCksbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtyLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJnIuZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxyLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihkYSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ci5pc0VtcHR5T2JqZWN0KGEpLGY9ci5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPWtiKHRoaXMsci5leHRlbmQoe30sYSksZik7KGV8fFcuZ2V0KHRoaXMsImZpbmlzaCIpKSYmYi5zdG9wKCEwKX07cmV0dXJuIGcuZmluaXNoPWcsZXx8Zi5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGYucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RvcDtkZWxldGUgYS5zdG9wLGIoYyl9O3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGM9YixiPWEsYT12b2lkIDApLGImJmEhPT0hMSYmdGhpcy5xdWV1ZShhfHwiZngiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj0hMCxlPW51bGwhPWEmJmErInF1ZXVlSG9va3MiLGY9ci50aW1lcnMsZz1XLmdldCh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZkYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyFiJiZjfHxyLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1XLmdldCh0aGlzKSxkPWNbYSsicXVldWUiXSxlPWNbYSsicXVldWVIb29rcyJdLGY9ci50aW1lcnMsZz1kP2QubGVuZ3RoOjA7Zm9yKGMuZmluaXNoPSEwLHIucXVldWUodGhpcyxhLFtdKSxlJiZlLnN0b3AmJmUuc3RvcC5jYWxsKHRoaXMsITApLGI9Zi5sZW5ndGg7Yi0tOylmW2JdLmVsZW09PT10aGlzJiZmW2JdLnF1ZXVlPT09YSYmKGZbYl0uYW5pbS5zdG9wKCEwKSxmLnNwbGljZShiLDEpKTtmb3IoYj0wO2I8ZztiKyspZFtiXSYmZFtiXS5maW5pc2gmJmRbYl0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIGMuZmluaXNofSl9fSksci5lYWNoKFsidG9nZ2xlIiwic2hvdyIsImhpZGUiXSxmdW5jdGlvbihhLGIpe3ZhciBjPXIuZm5bYl07ci5mbltiXT1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIG51bGw9PWF8fCJib29sZWFuIj09dHlwZW9mIGE/Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKGdiKGIsITApLGEsZCxlKX19KSxyLmVhY2goe3NsaWRlRG93bjpnYigic2hvdyIpLHNsaWRlVXA6Z2IoImhpZGUiKSxzbGlkZVRvZ2dsZTpnYigidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihhLGIpe3IuZm5bYV09ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLmFuaW1hdGUoYixhLGMsZCl9fSksci50aW1lcnM9W10sci5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGEsYj0wLGM9ci50aW1lcnM7Zm9yKGFiPXIubm93KCk7YjxjLmxlbmd0aDtiKyspYT1jW2JdLGEoKXx8Y1tiXSE9PWF8fGMuc3BsaWNlKGItLSwxKTtjLmxlbmd0aHx8ci5meC5zdG9wKCksYWI9dm9pZCAwfSxyLmZ4LnRpbWVyPWZ1bmN0aW9uKGEpe3IudGltZXJzLnB1c2goYSksci5meC5zdGFydCgpfSxyLmZ4LmludGVydmFsPTEzLHIuZnguc3RhcnQ9ZnVuY3Rpb24oKXtiYnx8KGJiPSEwLGViKCkpfSxyLmZ4LnN0b3A9ZnVuY3Rpb24oKXtiYj1udWxsfSxyLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxyLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9ci5meD9yLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8ImZ4Iix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYT1kLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYj1kLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGM9Yi5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTthLnR5cGU9ImNoZWNrYm94IixvLmNoZWNrT249IiIhPT1hLnZhbHVlLG8ub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxhPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxhLnZhbHVlPSJ0IixhLnR5cGU9InJhZGlvIixvLnJhZGlvVmFsdWU9InQiPT09YS52YWx1ZX0oKTt2YXIgbGIsbWI9ci5leHByLmF0dHJIYW5kbGU7ci5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVCh0aGlzLHIuYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ci5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxyLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIGEuZ2V0QXR0cmlidXRlP3IucHJvcChhLGIsYyk6KDE9PT1mJiZyLmlzWE1MRG9jKGEpfHwoZT1yLmF0dHJIb29rc1tiLnRvTG93ZXJDYXNlKCldfHwoci5leHByLm1hdGNoLmJvb2wudGVzdChiKT9sYjp2b2lkIDApKSx2b2lkIDAhPT1jP251bGw9PT1jP3ZvaWQgci5yZW1vdmVBdHRyKGEsYik6ZSYmInNldCJpbiBlJiZ2b2lkIDAhPT0oZD1lLnNldChhLGMsYikpP2Q6KGEuc2V0QXR0cmlidXRlKGIsYysiIiksYyk6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDooZD1yLmZpbmQuYXR0cihhLGIpLApudWxsPT1kP3ZvaWQgMDpkKSl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoIW8ucmFkaW9WYWx1ZSYmInJhZGlvIj09PWImJkIoYSwiaW5wdXQiKSl7dmFyIGM9YS52YWx1ZTtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoInR5cGUiLGIpLGMmJihhLnZhbHVlPWMpLGJ9fX19LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTAsZT1iJiZiLm1hdGNoKEwpO2lmKGUmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZVtkKytdKWEucmVtb3ZlQXR0cmlidXRlKGMpfX0pLGxiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/ci5yZW1vdmVBdHRyKGEsYyk6YS5zZXRBdHRyaWJ1dGUoYyxjKSxjfX0sci5lYWNoKHIuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGEsYil7dmFyIGM9bWJbYl18fHIuZmluZC5hdHRyO21iW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmLGc9Yi50b0xvd2VyQ2FzZSgpO3JldHVybiBkfHwoZj1tYltnXSxtYltnXT1lLGU9bnVsbCE9YyhhLGIsZCk/ZzpudWxsLG1iW2ddPWYpLGV9fSk7dmFyIG5iPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksb2I9L14oPzphfGFyZWEpJC9pO3IuZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFQodGhpcyxyLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW3IucHJvcEZpeFthXXx8YV19KX19KSxyLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gMT09PWYmJnIuaXNYTUxEb2MoYSl8fChiPXIucHJvcEZpeFtiXXx8YixlPXIucHJvcEhvb2tzW2JdKSx2b2lkIDAhPT1jP2UmJiJzZXQiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOmFbYl09YzplJiYiZ2V0ImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOmFbYl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXt2YXIgYj1yLmZpbmQuYXR0cihhLCJ0YWJpbmRleCIpO3JldHVybiBiP3BhcnNlSW50KGIsMTApOm5iLnRlc3QoYS5ub2RlTmFtZSl8fG9iLnRlc3QoYS5ub2RlTmFtZSkmJmEuaHJlZj8wOi0xfX19LHByb3BGaXg6eyJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUifX0pLG8ub3B0U2VsZWN0ZWR8fChyLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfSxzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO2ImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCl9fSksci5lYWNoKFsidGFiSW5kZXgiLCJyZWFkT25seSIsIm1heExlbmd0aCIsImNlbGxTcGFjaW5nIiwiY2VsbFBhZGRpbmciLCJyb3dTcGFuIiwiY29sU3BhbiIsInVzZU1hcCIsImZyYW1lQm9yZGVyIiwiY29udGVudEVkaXRhYmxlIl0sZnVuY3Rpb24oKXtyLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSk7ZnVuY3Rpb24gcGIoYSl7dmFyIGI9YS5tYXRjaChMKXx8W107cmV0dXJuIGIuam9pbigiICIpfWZ1bmN0aW9uIHFiKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIifXIuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYoci5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7cih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLHFiKHRoaXMpKSl9KTtpZigic3RyaW5nIj09dHlwZW9mIGEmJmEpe2I9YS5tYXRjaChMKXx8W107d2hpbGUoYz10aGlzW2krK10paWYoZT1xYihjKSxkPTE9PT1jLm5vZGVUeXBlJiYiICIrcGIoZSkrIiAiKXtnPTA7d2hpbGUoZj1iW2crK10pZC5pbmRleE9mKCIgIitmKyIgIik8MCYmKGQrPWYrIiAiKTtoPXBiKGQpLGUhPT1oJiZjLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGgpfX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaT0wO2lmKHIuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3IodGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYixxYih0aGlzKSkpfSk7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuYXR0cigiY2xhc3MiLCIiKTtpZigic3RyaW5nIj09dHlwZW9mIGEmJmEpe2I9YS5tYXRjaChMKXx8W107d2hpbGUoYz10aGlzW2krK10paWYoZT1xYihjKSxkPTE9PT1jLm5vZGVUeXBlJiYiICIrcGIoZSkrIiAiKXtnPTA7d2hpbGUoZj1iW2crK10pd2hpbGUoZC5pbmRleE9mKCIgIitmKyIgIik+LTEpZD1kLnJlcGxhY2UoIiAiK2YrIiAiLCIgIik7aD1wYihkKSxlIT09aCYmYy5zZXRBdHRyaWJ1dGUoImNsYXNzIixoKX19cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dHlwZW9mIGE7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgYiYmInN0cmluZyI9PT1jP2I/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpOnIuaXNGdW5jdGlvbihhKT90aGlzLmVhY2goZnVuY3Rpb24oYyl7cih0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLHFiKHRoaXMpLGIpLGIpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsZCxlLGY7aWYoInN0cmluZyI9PT1jKXtkPTAsZT1yKHRoaXMpLGY9YS5tYXRjaChMKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZSB2b2lkIDAhPT1hJiYiYm9vbGVhbiIhPT1jfHwoYj1xYih0aGlzKSxiJiZXLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIixiKSx0aGlzLnNldEF0dHJpYnV0ZSYmdGhpcy5zZXRBdHRyaWJ1dGUoImNsYXNzIixifHxhPT09ITE/IiI6Vy5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD0wO2I9IiAiK2ErIiAiO3doaWxlKGM9dGhpc1tkKytdKWlmKDE9PT1jLm5vZGVUeXBlJiYoIiAiK3BiKHFiKGMpKSsiICIpLmluZGV4T2YoYik+LTEpcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIHJiPS9cci9nO3IuZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1yLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMscih0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9IiI6Im51bWJlciI9PXR5cGVvZiBlP2UrPSIiOkFycmF5LmlzQXJyYXkoZSkmJihlPXIubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/IiI6YSsiIn0pKSxiPXIudmFsSG9va3NbdGhpcy50eXBlXXx8ci52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJzZXQiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT1lKSl9KTtpZihlKXJldHVybiBiPXIudmFsSG9va3NbZS50eXBlXXx8ci52YWxIb29rc1tlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJnZXQiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSwidmFsdWUiKSk/YzooYz1lLnZhbHVlLCJzdHJpbmciPT10eXBlb2YgYz9jLnJlcGxhY2UocmIsIiIpOm51bGw9PWM/IiI6Yyl9fX0pLHIuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9ci5maW5kLmF0dHIoYSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9Yj9iOnBiKHIudGV4dChhKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT1hLm9wdGlvbnMsZj1hLnNlbGVjdGVkSW5kZXgsZz0ic2VsZWN0LW9uZSI9PT1hLnR5cGUsaD1nP251bGw6W10saT1nP2YrMTplLmxlbmd0aDtmb3IoZD1mPDA/aTpnP2Y6MDtkPGk7ZCsrKWlmKGM9ZVtkXSwoYy5zZWxlY3RlZHx8ZD09PWYpJiYhYy5kaXNhYmxlZCYmKCFjLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFCKGMucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKGI9cihjKS52YWwoKSxnKXJldHVybiBiO2gucHVzaChiKX1yZXR1cm4gaH0sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPWEub3B0aW9ucyxmPXIubWFrZUFycmF5KGIpLGc9ZS5sZW5ndGg7d2hpbGUoZy0tKWQ9ZVtnXSwoZC5zZWxlY3RlZD1yLmluQXJyYXkoci52YWxIb29rcy5vcHRpb24uZ2V0KGQpLGYpPi0xKSYmKGM9ITApO3JldHVybiBjfHwoYS5zZWxlY3RlZEluZGV4PS0xKSxmfX19fSksci5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7ci52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7aWYoQXJyYXkuaXNBcnJheShiKSlyZXR1cm4gYS5jaGVja2VkPXIuaW5BcnJheShyKGEpLnZhbCgpLGIpPi0xfX0sby5jaGVja09ufHwoci52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmEudmFsdWV9KX0pO3ZhciBzYj0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC87ci5leHRlbmQoci5ldmVudCx7dHJpZ2dlcjpmdW5jdGlvbihiLGMsZSxmKXt2YXIgZyxoLGksaixrLG0sbixvPVtlfHxkXSxwPWwuY2FsbChiLCJ0eXBlIik/Yi50eXBlOmIscT1sLmNhbGwoYiwibmFtZXNwYWNlIik/Yi5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtpZihoPWk9ZT1lfHxkLDMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmIXNiLnRlc3QocCtyLmV2ZW50LnRyaWdnZXJlZCkmJihwLmluZGV4T2YoIi4iKT4tMSYmKHE9cC5zcGxpdCgiLiIpLHA9cS5zaGlmdCgpLHEuc29ydCgpKSxrPXAuaW5kZXhPZigiOiIpPDAmJiJvbiIrcCxiPWJbci5leHBhbmRvXT9iOm5ldyByLkV2ZW50KHAsIm9iamVjdCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1mPzI6MyxiLm5hbWVzcGFjZT1xLmpvaW4oIi4iKSxiLnJuYW1lc3BhY2U9Yi5uYW1lc3BhY2U/bmV3IFJlZ0V4cCgiKF58XFwuKSIrcS5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLGIucmVzdWx0PXZvaWQgMCxiLnRhcmdldHx8KGIudGFyZ2V0PWUpLGM9bnVsbD09Yz9bYl06ci5tYWtlQXJyYXkoYyxbYl0pLG49ci5ldmVudC5zcGVjaWFsW3BdfHx7fSxmfHwhbi50cmlnZ2VyfHxuLnRyaWdnZXIuYXBwbHkoZSxjKSE9PSExKSl7aWYoIWYmJiFuLm5vQnViYmxlJiYhci5pc1dpbmRvdyhlKSl7Zm9yKGo9bi5kZWxlZ2F0ZVR5cGV8fHAsc2IudGVzdChqK3ApfHwoaD1oLnBhcmVudE5vZGUpO2g7aD1oLnBhcmVudE5vZGUpby5wdXNoKGgpLGk9aDtpPT09KGUub3duZXJEb2N1bWVudHx8ZCkmJm8ucHVzaChpLmRlZmF1bHRWaWV3fHxpLnBhcmVudFdpbmRvd3x8YSl9Zz0wO3doaWxlKChoPW9bZysrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYi50eXBlPWc+MT9qOm4uYmluZFR5cGV8fHAsbT0oVy5nZXQoaCwiZXZlbnRzIil8fHt9KVtiLnR5cGVdJiZXLmdldChoLCJoYW5kbGUiKSxtJiZtLmFwcGx5KGgsYyksbT1rJiZoW2tdLG0mJm0uYXBwbHkmJlUoaCkmJihiLnJlc3VsdD1tLmFwcGx5KGgsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXAsZnx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8bi5fZGVmYXVsdCYmbi5fZGVmYXVsdC5hcHBseShvLnBvcCgpLGMpIT09ITF8fCFVKGUpfHxrJiZyLmlzRnVuY3Rpb24oZVtwXSkmJiFyLmlzV2luZG93KGUpJiYoaT1lW2tdLGkmJihlW2tdPW51bGwpLHIuZXZlbnQudHJpZ2dlcmVkPXAsZVtwXSgpLHIuZXZlbnQudHJpZ2dlcmVkPXZvaWQgMCxpJiYoZVtrXT1pKSksYi5yZXN1bHR9fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ci5leHRlbmQobmV3IHIuRXZlbnQsYyx7dHlwZTphLGlzU2ltdWxhdGVkOiEwfSk7ci5ldmVudC50cmlnZ2VyKGQsbnVsbCxiKX19KSxyLmZuLmV4dGVuZCh7dHJpZ2dlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtyLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpc1swXTtpZihjKXJldHVybiByLmV2ZW50LnRyaWdnZXIoYSxiLGMsITApfX0pLHIuZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IHJlc2l6ZSBzY3JvbGwgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe3IuZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLHIuZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX19KSxvLmZvY3VzaW49Im9uZm9jdXNpbiJpbiBhLG8uZm9jdXNpbnx8ci5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe3IuZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxyLmV2ZW50LmZpeChhKSl9O3IuZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1XLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLFcuYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9Vy5hY2Nlc3MoZCxiKS0xO2U/Vy5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxXLnJlbW92ZShkLGIpKX19fSk7dmFyIHRiPWEubG9jYXRpb24sdWI9ci5ub3coKSx2Yj0vXD8vO3IucGFyc2VYTUw9ZnVuY3Rpb24oYil7dmFyIGM7aWYoIWJ8fCJzdHJpbmciIT10eXBlb2YgYilyZXR1cm4gbnVsbDt0cnl7Yz0obmV3IGEuRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYiwidGV4dC94bWwiKX1jYXRjaChkKXtjPXZvaWQgMH1yZXR1cm4gYyYmIWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RofHxyLmVycm9yKCJJbnZhbGlkIFhNTDogIitiKSxjfTt2YXIgd2I9L1xbXF0kLyx4Yj0vXHI/XG4vZyx5Yj0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksemI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIEFiKGEsYixjLGQpe3ZhciBlO2lmKEFycmF5LmlzQXJyYXkoYikpci5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHx3Yi50ZXN0KGEpP2QoYSxlKTpBYihhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09ci50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpQWIoYSsiWyIrZSsiXSIsYltlXSxjLGQpfXIucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1yLmlzRnVuY3Rpb24oYik/YigpOmI7ZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpKyI9IitlbmNvZGVVUklDb21wb25lbnQobnVsbD09Yz8iIjpjKX07aWYoQXJyYXkuaXNBcnJheShhKXx8YS5qcXVlcnkmJiFyLmlzUGxhaW5PYmplY3QoYSkpci5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlBYihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIil9LHIuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gci5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXIucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBhP3IubWFrZUFycmF5KGEpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgYT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIXIodGhpcykuaXMoIjpkaXNhYmxlZCIpJiZ6Yi50ZXN0KHRoaXMubm9kZU5hbWUpJiYheWIudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IWphLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9cih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOkFycmF5LmlzQXJyYXkoYyk/ci5tYXAoYyxmdW5jdGlvbihhKXtyZXR1cm57bmFtZTpiLm5hbWUsdmFsdWU6YS5yZXBsYWNlKHhiLCJcclxuIil9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmMucmVwbGFjZSh4YiwiXHJcbiIpfX0pLmdldCgpfX0pO3ZhciBCYj0vJTIwL2csQ2I9LyMuKiQvLERiPS8oWz8mXSlfPVteJl0qLyxFYj0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLEZiPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLEdiPS9eKD86R0VUfEhFQUQpJC8sSGI9L15cL1wvLyxJYj17fSxKYj17fSxLYj0iKi8iLmNvbmNhdCgiKiIpLExiPWQuY3JlYXRlRWxlbWVudCgiYSIpO0xiLmhyZWY9dGIuaHJlZjtmdW5jdGlvbiBNYihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXsic3RyaW5nIiE9dHlwZW9mIGImJihjPWIsYj0iKiIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChMKXx8W107aWYoci5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKSIrIj09PWRbMF0/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gTmIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09SmI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxyLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBPYihhLGIpe3ZhciBjLGQsZT1yLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZyLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gUGIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihkKWZvcihlIGluIGgpaWYoaFtlXSYmaFtlXS50ZXN0KGQpKXtpLnVuc2hpZnQoZSk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGUgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tlKyIgIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31pZihmKXJldHVybiBmIT09aVswXSYmaS51bnNoaWZ0KGYpLGNbZl19ZnVuY3Rpb24gUWIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1yLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6dGIuaHJlZix0eXBlOiJHRVQiLGlzTG9jYWw6RmIudGVzdCh0Yi5wcm90b2NvbCksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjpLYix0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDovXGJ4bWxcYi8saHRtbDovXGJodG1sLyxqc29uOi9cYmpzb25cYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjpKU09OLnBhcnNlLCJ0ZXh0IHhtbCI6ci5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/T2IoT2IoYSxyLmFqYXhTZXR0aW5ncyksYik6T2Ioci5hamF4U2V0dGluZ3MsYSl9LGFqYXhQcmVmaWx0ZXI6TWIoSWIpLGFqYXhUcmFuc3BvcnQ6TWIoSmIpLGFqYXg6ZnVuY3Rpb24oYixjKXsib2JqZWN0Ij09dHlwZW9mIGImJihjPWIsYj12b2lkIDApLGM9Y3x8e307dmFyIGUsZixnLGgsaSxqLGssbCxtLG4sbz1yLmFqYXhTZXR1cCh7fSxjKSxwPW8uY29udGV4dHx8byxxPW8uY29udGV4dCYmKHAubm9kZVR5cGV8fHAuanF1ZXJ5KT9yKHApOnIuZXZlbnQscz1yLkRlZmVycmVkKCksdD1yLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSx1PW8uc3RhdHVzQ29kZXx8e30sdj17fSx3PXt9LHg9ImNhbmNlbGVkIix5PXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoayl7aWYoIWgpe2g9e307d2hpbGUoYj1FYi5leGVjKGcpKWhbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9aFthLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIGs/ZzpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGw9PWsmJihhPXdbYS50b0xvd2VyQ2FzZSgpXT13W2EudG9Mb3dlckNhc2UoKV18fGEsdlthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1rJiYoby5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoayl5LmFsd2F5cyhhW3kuc3RhdHVzXSk7ZWxzZSBmb3IoYiBpbiBhKXVbYl09W3VbYl0sYVtiXV07cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHg7cmV0dXJuIGUmJmUuYWJvcnQoYiksQSgwLGIpLHRoaXN9fTtpZihzLnByb21pc2UoeSksby51cmw9KChifHxvLnVybHx8dGIuaHJlZikrIiIpLnJlcGxhY2UoSGIsdGIucHJvdG9jb2wrIi8vIiksby50eXBlPWMubWV0aG9kfHxjLnR5cGV8fG8ubWV0aG9kfHxvLnR5cGUsby5kYXRhVHlwZXM9KG8uZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChMKXx8WyIiXSxudWxsPT1vLmNyb3NzRG9tYWluKXtqPWQuY3JlYXRlRWxlbWVudCgiYSIpO3RyeXtqLmhyZWY9by51cmwsai5ocmVmPWouaHJlZixvLmNyb3NzRG9tYWluPUxiLnByb3RvY29sKyIvLyIrTGIuaG9zdCE9ai5wcm90b2NvbCsiLy8iK2ouaG9zdH1jYXRjaCh6KXtvLmNyb3NzRG9tYWluPSEwfX1pZihvLmRhdGEmJm8ucHJvY2Vzc0RhdGEmJiJzdHJpbmciIT10eXBlb2Ygby5kYXRhJiYoby5kYXRhPXIucGFyYW0oby5kYXRhLG8udHJhZGl0aW9uYWwpKSxOYihJYixvLGMseSksaylyZXR1cm4geTtsPXIuZXZlbnQmJm8uZ2xvYmFsLGwmJjA9PT1yLmFjdGl2ZSsrJiZyLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLG8udHlwZT1vLnR5cGUudG9VcHBlckNhc2UoKSxvLmhhc0NvbnRlbnQ9IUdiLnRlc3Qoby50eXBlKSxmPW8udXJsLnJlcGxhY2UoQ2IsIiIpLG8uaGFzQ29udGVudD9vLmRhdGEmJm8ucHJvY2Vzc0RhdGEmJjA9PT0oby5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiYoby5kYXRhPW8uZGF0YS5yZXBsYWNlKEJiLCIrIikpOihuPW8udXJsLnNsaWNlKGYubGVuZ3RoKSxvLmRhdGEmJihmKz0odmIudGVzdChmKT8iJiI6Ij8iKStvLmRhdGEsZGVsZXRlIG8uZGF0YSksby5jYWNoZT09PSExJiYoZj1mLnJlcGxhY2UoRGIsIiQxIiksbj0odmIudGVzdChmKT8iJiI6Ij8iKSsiXz0iK3ViKysgK24pLG8udXJsPWYrbiksby5pZk1vZGlmaWVkJiYoci5sYXN0TW9kaWZpZWRbZl0mJnkuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLHIubGFzdE1vZGlmaWVkW2ZdKSxyLmV0YWdbZl0mJnkuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsci5ldGFnW2ZdKSksKG8uZGF0YSYmby5oYXNDb250ZW50JiZvLmNvbnRlbnRUeXBlIT09ITF8fGMuY29udGVudFR5cGUpJiZ5LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsby5jb250ZW50VHlwZSkseS5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLG8uZGF0YVR5cGVzWzBdJiZvLmFjY2VwdHNbby5kYXRhVHlwZXNbMF1dP28uYWNjZXB0c1tvLmRhdGFUeXBlc1swXV0rKCIqIiE9PW8uZGF0YVR5cGVzWzBdPyIsICIrS2IrIjsgcT0wLjAxIjoiIik6by5hY2NlcHRzWyIqIl0pO2ZvcihtIGluIG8uaGVhZGVycyl5LnNldFJlcXVlc3RIZWFkZXIobSxvLmhlYWRlcnNbbV0pO2lmKG8uYmVmb3JlU2VuZCYmKG8uYmVmb3JlU2VuZC5jYWxsKHAseSxvKT09PSExfHxrKSlyZXR1cm4geS5hYm9ydCgpO2lmKHg9ImFib3J0Iix0LmFkZChvLmNvbXBsZXRlKSx5LmRvbmUoby5zdWNjZXNzKSx5LmZhaWwoby5lcnJvciksZT1OYihKYixvLGMseSkpe2lmKHkucmVhZHlTdGF0ZT0xLGwmJnEudHJpZ2dlcigiYWpheFNlbmQiLFt5LG9dKSxrKXJldHVybiB5O28uYXN5bmMmJm8udGltZW91dD4wJiYoaT1hLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt5LmFib3J0KCJ0aW1lb3V0Iil9LG8udGltZW91dCkpO3RyeXtrPSExLGUuc2VuZCh2LEEpfWNhdGNoKHope2lmKGspdGhyb3cgejtBKC0xLHopfX1lbHNlIEEoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIEEoYixjLGQsaCl7dmFyIGosbSxuLHYsdyx4PWM7a3x8KGs9ITAsaSYmYS5jbGVhclRpbWVvdXQoaSksZT12b2lkIDAsZz1ofHwiIix5LnJlYWR5U3RhdGU9Yj4wPzQ6MCxqPWI+PTIwMCYmYjwzMDB8fDMwND09PWIsZCYmKHY9UGIobyx5LGQpKSx2PVFiKG8sdix5LGopLGo/KG8uaWZNb2RpZmllZCYmKHc9eS5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHcmJihyLmxhc3RNb2RpZmllZFtmXT13KSx3PXkuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx3JiYoci5ldGFnW2ZdPXcpKSwyMDQ9PT1ifHwiSEVBRCI9PT1vLnR5cGU/eD0ibm9jb250ZW50IjozMDQ9PT1iP3g9Im5vdG1vZGlmaWVkIjooeD12LnN0YXRlLG09di5kYXRhLG49di5lcnJvcixqPSFuKSk6KG49eCwhYiYmeHx8KHg9ImVycm9yIixiPDAmJihiPTApKSkseS5zdGF0dXM9Yix5LnN0YXR1c1RleHQ9KGN8fHgpKyIiLGo/cy5yZXNvbHZlV2l0aChwLFttLHgseV0pOnMucmVqZWN0V2l0aChwLFt5LHgsbl0pLHkuc3RhdHVzQ29kZSh1KSx1PXZvaWQgMCxsJiZxLnRyaWdnZXIoaj8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt5LG8saj9tOm5dKSx0LmZpcmVXaXRoKHAsW3kseF0pLGwmJihxLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3ksb10pLC0tci5hY3RpdmV8fHIuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB5fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gci5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHIuZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLHIuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe3JbYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIHIuaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLHIuYWpheChyLmV4dGVuZCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0sci5pc1BsYWluT2JqZWN0KGEpJiZhKSl9fSksci5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gci5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOiEwLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfSxyLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gdGhpc1swXSYmKHIuaXNGdW5jdGlvbihhKSYmKGE9YS5jYWxsKHRoaXNbMF0pKSxiPXIoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0RWxlbWVudENoaWxkKWE9YS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKSksdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiByLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3IodGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPXIodGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9ci5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7cih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnBhcmVudChhKS5ub3QoImJvZHkiKS5lYWNoKGZ1bmN0aW9uKCl7cih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSksdGhpc319KSxyLmV4cHIucHNldWRvcy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIXIuZXhwci5wc2V1ZG9zLnZpc2libGUoYSl9LHIuZXhwci5wc2V1ZG9zLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuISEoYS5vZmZzZXRXaWR0aHx8YS5vZmZzZXRIZWlnaHR8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpfSxyLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBhLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGIpe319O3ZhciBSYj17MDoyMDAsMTIyMzoyMDR9LFNiPXIuYWpheFNldHRpbmdzLnhocigpO28uY29ycz0hIVNiJiYid2l0aENyZWRlbnRpYWxzImluIFNiLG8uYWpheD1TYj0hIVNiLHIuYWpheFRyYW5zcG9ydChmdW5jdGlvbihiKXt2YXIgYyxkO2lmKG8uY29yc3x8U2ImJiFiLmNyb3NzRG9tYWluKXJldHVybntzZW5kOmZ1bmN0aW9uKGUsZil7dmFyIGcsaD1iLnhocigpO2lmKGgub3BlbihiLnR5cGUsYi51cmwsYi5hc3luYyxiLnVzZXJuYW1lLGIucGFzc3dvcmQpLGIueGhyRmllbGRzKWZvcihnIGluIGIueGhyRmllbGRzKWhbZ109Yi54aHJGaWVsZHNbZ107Yi5taW1lVHlwZSYmaC5vdmVycmlkZU1pbWVUeXBlJiZoLm92ZXJyaWRlTWltZVR5cGUoYi5taW1lVHlwZSksYi5jcm9zc0RvbWFpbnx8ZVsiWC1SZXF1ZXN0ZWQtV2l0aCJdfHwoZVsiWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCIpO2ZvcihnIGluIGUpaC5zZXRSZXF1ZXN0SGVhZGVyKGcsZVtnXSk7Yz1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtjJiYoYz1kPWgub25sb2FkPWgub25lcnJvcj1oLm9uYWJvcnQ9aC5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCwiYWJvcnQiPT09YT9oLmFib3J0KCk6ImVycm9yIj09PWE/Im51bWJlciIhPXR5cGVvZiBoLnN0YXR1cz9mKDAsImVycm9yIik6ZihoLnN0YXR1cyxoLnN0YXR1c1RleHQpOmYoUmJbaC5zdGF0dXNdfHxoLnN0YXR1cyxoLnN0YXR1c1RleHQsInRleHQiIT09KGgucmVzcG9uc2VUeXBlfHwidGV4dCIpfHwic3RyaW5nIiE9dHlwZW9mIGgucmVzcG9uc2VUZXh0P3tiaW5hcnk6aC5yZXNwb25zZX06e3RleHQ6aC5yZXNwb25zZVRleHR9LGguZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LGgub25sb2FkPWMoKSxkPWgub25lcnJvcj1jKCJlcnJvciIpLHZvaWQgMCE9PWgub25hYm9ydD9oLm9uYWJvcnQ9ZDpoLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1oLnJlYWR5U3RhdGUmJmEuc2V0VGltZW91dChmdW5jdGlvbigpe2MmJmQoKX0pfSxjPWMoImFib3J0Iik7dHJ5e2guc2VuZChiLmhhc0NvbnRlbnQmJmIuZGF0YXx8bnVsbCl9Y2F0Y2goaSl7aWYoYyl0aHJvdyBpfX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX0pLHIuYWpheFByZWZpbHRlcihmdW5jdGlvbihhKXthLmNyb3NzRG9tYWluJiYoYS5jb250ZW50cy5zY3JpcHQ9ITEpfSksci5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDoidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQifSxjb250ZW50czp7c2NyaXB0Oi9cYig/OmphdmF8ZWNtYSlzY3JpcHRcYi99LGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oYSl7cmV0dXJuIHIuZ2xvYmFsRXZhbChhKSxhfX19KSxyLmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9IkdFVCIpfSksci5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKGEpe2lmKGEuY3Jvc3NEb21haW4pe3ZhciBiLGM7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSxmKXtiPXIoIjxzY3JpcHQ+IikucHJvcCh7Y2hhcnNldDphLnNjcmlwdENoYXJzZXQsc3JjOmEudXJsfSkub24oImxvYWQgZXJyb3IiLGM9ZnVuY3Rpb24oYSl7Yi5yZW1vdmUoKSxjPW51bGwsYSYmZigiZXJyb3IiPT09YS50eXBlPzQwNDoyMDAsYS50eXBlKX0pLGQuaGVhZC5hcHBlbmRDaGlsZChiWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX19KTt2YXIgVGI9W10sVWI9Lyg9KVw/KD89JnwkKXxcP1w/LztyLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9VGIucG9wKCl8fHIuZXhwYW5kbysiXyIrdWIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLHIuYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKFViLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmVWIudGVzdChiLmRhdGEpJiYiZGF0YSIpO2lmKGh8fCJqc29ucCI9PT1iLmRhdGFUeXBlc1swXSlyZXR1cm4gZT1iLmpzb25wQ2FsbGJhY2s9ci5pc0Z1bmN0aW9uKGIuanNvbnBDYWxsYmFjayk/Yi5qc29ucENhbGxiYWNrKCk6Yi5qc29ucENhbGxiYWNrLGg/YltoXT1iW2hdLnJlcGxhY2UoVWIsIiQxIitlKTpiLmpzb25wIT09ITEmJihiLnVybCs9KHZiLnRlc3QoYi51cmwpPyImIjoiPyIpK2IuanNvbnArIj0iK2UpLGIuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBnfHxyLmVycm9yKGUrIiB3YXMgbm90IGNhbGxlZCIpLGdbMF19LGIuZGF0YVR5cGVzWzBdPSJqc29uIixmPWFbZV0sYVtlXT1mdW5jdGlvbigpe2c9YXJndW1lbnRzfSxkLmFsd2F5cyhmdW5jdGlvbigpe3ZvaWQgMD09PWY/cihhKS5yZW1vdmVQcm9wKGUpOmFbZV09ZixiW2VdJiYoYi5qc29ucENhbGxiYWNrPWMuanNvbnBDYWxsYmFjayxUYi5wdXNoKGUpKSxnJiZyLmlzRnVuY3Rpb24oZikmJmYoZ1swXSksZz1mPXZvaWQgMH0pLCJzY3JpcHQifSksby5jcmVhdGVIVE1MRG9jdW1lbnQ9ZnVuY3Rpb24oKXt2YXIgYT1kLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikuYm9keTtyZXR1cm4gYS5pbm5lckhUTUw9Ijxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+IiwyPT09YS5jaGlsZE5vZGVzLmxlbmd0aH0oKSxyLnBhcnNlSFRNTD1mdW5jdGlvbihhLGIsYyl7aWYoInN0cmluZyIhPXR5cGVvZiBhKXJldHVybltdOyJib29sZWFuIj09dHlwZW9mIGImJihjPWIsYj0hMSk7dmFyIGUsZixnO3JldHVybiBifHwoby5jcmVhdGVIVE1MRG9jdW1lbnQ/KGI9ZC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpLGU9Yi5jcmVhdGVFbGVtZW50KCJiYXNlIiksZS5ocmVmPWQubG9jYXRpb24uaHJlZixiLmhlYWQuYXBwZW5kQ2hpbGQoZSkpOmI9ZCksZj1DLmV4ZWMoYSksZz0hYyYmW10sZj9bYi5jcmVhdGVFbGVtZW50KGZbMV0pXTooZj1xYShbYV0sYixnKSxnJiZnLmxlbmd0aCYmcihnKS5yZW1vdmUoKSxyLm1lcmdlKFtdLGYuY2hpbGROb2RlcykpfSxyLmZuLmxvYWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoIiAiKTtyZXR1cm4gaD4tMSYmKGQ9cGIoYS5zbGljZShoKSksYT1hLnNsaWNlKDAsaCkpLHIuaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiYib2JqZWN0Ij09dHlwZW9mIGImJihlPSJQT1NUIiksZy5sZW5ndGg+MCYmci5hamF4KHt1cmw6YSx0eXBlOmV8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP3IoIjxkaXY+IikuYXBwZW5kKHIucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sci5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtyLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksci5leHByLnBzZXVkb3MuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHIuZ3JlcChyLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH0sci5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz1yLmNzcyhhLCJwb3NpdGlvbiIpLGw9cihhKSxtPXt9OyJzdGF0aWMiPT09ayYmKGEuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIiksaD1sLm9mZnNldCgpLGY9ci5jc3MoYSwidG9wIiksaT1yLmNzcyhhLCJsZWZ0Iiksaj0oImFic29sdXRlIj09PWt8fCJmaXhlZCI9PT1rKSYmKGYraSkuaW5kZXhPZigiYXV0byIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxyLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsci5leHRlbmQoe30saCkpKSxudWxsIT1iLnRvcCYmKG0udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG0ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLCJ1c2luZyJpbiBiP2IudXNpbmcuY2FsbChhLG0pOmwuY3NzKG0pfX0sci5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3Iub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQsZSxmPXRoaXNbMF07aWYoZilyZXR1cm4gZi5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD8oZD1mLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGI9Zi5vd25lckRvY3VtZW50LGM9Yi5kb2N1bWVudEVsZW1lbnQsZT1iLmRlZmF1bHRWaWV3LHt0b3A6ZC50b3ArZS5wYWdlWU9mZnNldC1jLmNsaWVudFRvcCxsZWZ0OmQubGVmdCtlLnBhZ2VYT2Zmc2V0LWMuY2xpZW50TGVmdH0pOnt0b3A6MCxsZWZ0OjB9fSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuImZpeGVkIj09PXIuY3NzKGMsInBvc2l0aW9uIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLEIoYVswXSwiaHRtbCIpfHwoZD1hLm9mZnNldCgpKSxkPXt0b3A6ZC50b3Arci5jc3MoYVswXSwiYm9yZGVyVG9wV2lkdGgiLCEwKSxsZWZ0OmQubGVmdCtyLmNzcyhhWzBdLCJib3JkZXJMZWZ0V2lkdGgiLCEwKX0pLHt0b3A6Yi50b3AtZC50b3Atci5jc3MoYywibWFyZ2luVG9wIiwhMCksbGVmdDpiLmxlZnQtZC5sZWZ0LXIuY3NzKGMsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShhJiYic3RhdGljIj09PXIuY3NzKGEsInBvc2l0aW9uIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8cmF9KX19KSxyLmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24oYSxiKXt2YXIgYz0icGFnZVlPZmZzZXQiPT09YjtyLmZuW2FdPWZ1bmN0aW9uKGQpe3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYSxkLGUpe3ZhciBmO3JldHVybiByLmlzV2luZG93KGEpP2Y9YTo5PT09YS5ub2RlVHlwZSYmKGY9YS5kZWZhdWx0Vmlldyksdm9pZCAwPT09ZT9mP2ZbYl06YVtkXTp2b2lkKGY/Zi5zY3JvbGxUbyhjP2YucGFnZVhPZmZzZXQ6ZSxjP2U6Zi5wYWdlWU9mZnNldCk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgpfX0pLHIuZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihhLGIpe3IuY3NzSG9va3NbYl09UGEoby5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGEsYyl7aWYoYylyZXR1cm4gYz1PYShhLGIpLE1hLnRlc3QoYyk/cihhKS5wb3NpdGlvbigpW2JdKyJweCI6Y30pfSksci5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oYSxiKXtyLmVhY2goe3BhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7ci5mbltkXT1mdW5jdGlvbihlLGYpe3ZhciBnPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBlKSxoPWN8fChlPT09ITB8fGY9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIFQodGhpcyxmdW5jdGlvbihiLGMsZSl7dmFyIGY7cmV0dXJuIHIuaXNXaW5kb3coYik/MD09PWQuaW5kZXhPZigib3V0ZXIiKT9iWyJpbm5lciIrYV06Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGY9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGZbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGZbIm9mZnNldCIrYV0sZlsiY2xpZW50IithXSkpOnZvaWQgMD09PWU/ci5jc3MoYixjLGgpOnIuc3R5bGUoYixjLGUsaCl9LGIsZz9lOnZvaWQgMCxnKX19KX0pLHIuZm4uZXh0ZW5kKHtiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLCIqKiIpOnRoaXMub2ZmKGIsYXx8IioqIixjKX19KSxyLmhvbGRSZWFkeT1mdW5jdGlvbihhKXthP3IucmVhZHlXYWl0Kys6ci5yZWFkeSghMCl9LHIuaXNBcnJheT1BcnJheS5pc0FycmF5LHIucGFyc2VKU09OPUpTT04ucGFyc2Usci5ub2RlTmFtZT1CLCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiByfSk7dmFyIFZiPWEualF1ZXJ5LFdiPWEuJDtyZXR1cm4gci5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1yJiYoYS4kPVdiKSxiJiZhLmpRdWVyeT09PXImJihhLmpRdWVyeT1WYikscn0sYnx8KGEualF1ZXJ5PWEuJD1yKSxyfSk7Cg=="}]},{"name":"Yet Another Weibo Filter","options":{"awareOfChrome":true,"check_for_updates":true,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_prototypes":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["miaopai.com","sina.cn","sina.com.cn","sinaimg.cn","sinajs.cn","t.cn","weibo.com"],"orig_excludes":["*://weibo.com/a/bind/*","*://account.weibo.com/*","*://kefu.weibo.com/*","*://photo.weibo.com/*","*://security.weibo.com/*","*://verified.weibo.com/*","*://vip.weibo.com/*","*://open.weibo.com/*","*://passport.weibo.com/*"],"orig_includes":["*://weibo.com/*","*://*.weibo.com/*","*://t.cn/*"],"orig_matches":["*://*.weibo.com/*","*://t.cn/*"],"orig_noframes":true,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"local::globalConfig":"s{\"short_url_wo_confirm\":false}","local::user1897686351Config":"s{\"script_update_whatsnew.last\":90,\"clean_follow_recommend\":false,\"clean_middle_member_tip\":true,\"clean_middle_feed_recommend\":true,\"clean_middle_recommended_topic\":true,\"clean_nav_tv\":true,\"clean_nav_game\":true,\"clean_nav_hot_search\":true,\"clean_nav_new\":true,\"clean_right_ranks\":true,\"clean_right_recom_group_user\":true,\"clean_right_hongbao_rank\":true,\"clean_right_member\":true,\"clean_feed_recommend\":true,\"clean_feed_promote_other\":true,\"clean_other_ads\":true,\"clean_other_music\":true,\"clean_other_related_video\":false,\"clean_other_related_article\":true,\"clean_other_im_news\":true,\"clean_icons_taobao\":false,\"clean_right_notice\":true,\"filter_my_original\":true,\"filter_mention_me\":true,\"filter_ad_feed\":true,\"layout_nav_hide_name\":false,\"layout_nav_hide_name.act\":\"hidden\",\"layout_side_merge\":true,\"layout_right_move\":false,\"font_family.chinese\":\"-\",\"font_family\":false,\"layout_avatar_shape\":true,\"layout_avatar_shape.shape\":\"circle\",\"feed_author_content_nowrap\":false,\"filter_follow_check\":true,\"layout_side_position\":true,\"filter_profile_show_all\":true,\"filter_homepage_auto_load\":false,\"clean_icons_others\":false,\"clean_right_att_feed\":true,\"clean_left_tv\":true,\"clean_left_hot\":true,\"clean_right_hot_topic\":true,\"layout_nav_dark\":false,\"layout_theme_color\":true,\"filter_fans_top\":true,\"filter_user_like\":true,\"filter_paid\":true,\"layout_nav_auto_hide\":false,\"layout_theme_color.transparency2\":0,\"layout_theme_color.transparency1\":100,\"layout_theme_apply.skin\":\"skinvip711\",\"layout_theme_apply\":false,\"filter_homepage_newest_feeds\":true,\"filter_homepage_single_group\":false,\"filter_homepage_multi_group\":false,\"view_edit_info\":true,\"layout_left_messages\":true,\"layout_left_messages.like\":true,\"layout_left_messages.dm\":true,\"layout_side_show_all_groups\":true,\"custom_css.css\":\"body, .S_page {\\nbackground-color:#ffffff !important;\\n}\\n#skin_cover_s {\\nbackground-image: none !important;\\nbackground-color:grey;\\n}\\n#v6_pl_content_setskin > div > a {\\ndisplay: none;\\n}\\n.WB_miniblog {\\nbackground: none !important;\\n}\",\"filter_follow_check.frequency\":86400000,\"uncheck_follow_presenter\":true,\"show_article_without_follow\":true,\"filter_homepage_desktop_notify\":false,\"filter_manually_hide\":false,\"pause_filter\":false,\"filter_original_discover\":false,\"filter_original_follower\":false,\"filter_my_feed\":true,\"filter_weibo_product\":false,\"filter_tb_tm_feed\":false,\"filter_weibo_pay\":true,\"filter_fake_weibo\":true,\"filter_deleted_forward\":true,\"filter_comment_and_forward\":true,\"filter_vote\":false,\"filter_red_pack\":false,\"filter_image_tag\":false,\"filter_koi_forward\":false,\"filter_app_item\":true,\"filter_wenda\":false,\"filter_wenwo_dr\":true,\"filter_yizhibo\":true,\"filter_multiple_topics_feed\":false,\"filter_Place\":false,\"filter_Movie\":false,\"filter_Book\":false,\"filter_Topic\":false,\"filter_Music\":false,\"filter_Stock\":false,\"flooding_author\":false,\"flooding_forward\":false,\"comment_layout_by_time\":false,\"comment_layout_hide_sub\":false,\"filter_comment_show_my\":false,\"filter_comment_face_count\":false,\"filter_comment_face_type\":false,\"filter_comment_wo_content\":false,\"filter_comment_with_forward\":false,\"clean_icons_level\":false,\"clean_icons_member\":false,\"clean_icons_approve\":false,\"clean_icons_approve_co\":false,\"clean_icons_approve_dead\":false,\"clean_icons_bigfun\":false,\"clean_icons_club\":false,\"clean_icons_v_girl\":false,\"clean_icons_supervisor\":false,\"clean_icons_cheng\":false,\"clean_icons_gongyi\":false,\"clean_icons_zongyika\":false,\"clean_follow_single\":false,\"clean_follow_at_me\":false,\"clean_follow_discover\":false,\"clean_follow_whisper\":false,\"clean_follow_video\":false,\"clean_nav_logo_img\":false,\"clean_nav_main\":false,\"clean_nav_hot\":false,\"clean_nav_notice_new\":false,\"clean_left_level\":false,\"clean_left_home\":false,\"clean_left_fav\":false,\"clean_left_like\":false,\"clean_left_new_feed\":false,\"clean_left_friends\":false,\"clean_left_group_to_me\":false,\"clean_left_special\":false,\"clean_left_whisper\":false,\"clean_left_v_plus\":false,\"clean_left_new\":false,\"clean_left_news\":false,\"clean_left_count\":false,\"clean_right_info\":false,\"clean_right_interest\":false,\"clean_right_groups\":false,\"clean_feed_feed_outer_tip\":false,\"clean_feed_feed_tip\":false,\"clean_feed_group_tip\":false,\"clean_feed_vip_background\":false,\"clean_feed_last_pic\":false,\"clean_feed_pic_tag\":false,\"clean_feed_son_title\":false,\"clean_feed_card\":false,\"clean_feed_article_pay\":false,\"clean_feed_tag\":false,\"clean_feed_related_link\":false,\"clean_feed_source\":false,\"clean_feed_pop\":false,\"clean_feed_like\":false,\"clean_feed_like_comment\":false,\"clean_feed_like_attitude\":false,\"clean_feed_forward\":false,\"clean_feed_favorite\":false,\"clean_feed_report\":false,\"clean_feed_use_card_background\":false,\"clean_profile_move_things\":false,\"clean_profile_cover\":false,\"clean_profile_bg_img\":false,\"clean_profile_badge_icon\":false,\"clean_profile_verify\":false,\"clean_profile_edit_person_info\":false,\"clean_profile_stats\":false,\"clean_profile_my_data\":false,\"clean_profile_suggest_user\":false,\"clean_profile_group\":false,\"clean_profile_relation\":false,\"clean_profile_album\":false,\"clean_profile_hot_topic\":false,\"clean_profile_hot_weibo\":false,\"clean_profile_recommend_feed\":false,\"clean_profile_user_list\":false,\"clean_profile_hongbao\":false,\"clean_profile_wenwo_dr\":false,\"clean_profile_timeline\":false,\"clean_message_help\":false,\"clean_message_feedback\":false,\"clean_other_template\":false,\"clean_other_home_tip\":false,\"clean_other_footer\":false,\"clean_other_im\":false,\"clean_other_back_top\":false,\"clean_other_tip\":false,\"clean_other_related_feeds\":true,\"clean_other_send_weibo\":false,\"layout_nav_classical\":false,\"layout_left_messages.msgbox\":false,\"layout_left_messages.group\":false,\"layout_left_messages.dmsub\":true,\"layout_side_merge.side\":\"left\",\"layout_side_position.side\":\"left\",\"layout_left_move\":true,\"layout_other_move\":true,\"chat_page_disable_unload_prompt\":false,\"layout_fast_face\":false,\"layout_locale_timezone\":false,\"feed_absolute_time\":true,\"layout_theme_color.color1\":\"#f6f6f6\",\"layout_theme_color.color2\":\"#ffffff\",\"layout_theme_color.color3\":\"#ffffff\",\"layout_theme_color.transparency3\":30,\"custom_css\":true,\"feed_no_space\":false,\"feed_source_at_bottom\":false,\"feed_small_image\":false,\"feed_increase_width\":true,\"feed_button_order\":false,\"feed_button_order_comment\":false,\"feed_font_size\":false,\"feed_long_expand\":true,\"feed_content_line_break\":false,\"feed_link_use_url\":false,\"feed_unicode_emoji\":false,\"show_vote_result\":false,\"feed_no_custom_source\":false,\"view_article_inline\":true,\"feed_view_original\":false,\"feed_view_original.open\":\"page\",\"feed_download_image\":false,\"feed_download_image.name\":\"index\",\"image_preview_all\":true,\"feed_no_animated_image\":false,\"feed_built_in_video_player\":true,\"feed_disable_tag_dialog\":false,\"feed_low_reading_warn\":false,\"feed_only_mode\":false,\"script_import_export\":false,\"script_update_whatsnew\":true,\"feed_built_in_video_player.volume\":100,\"feed_built_in_video_player.memorize\":true,\"feed_built_in_video_player.quality\":\"best\",\"script_enable_debug\":false,\"script_debug_regex\":false,\"filter_content_text_show.items\":[],\"filter_content_regex_show.items\":[],\"filter_author_id_show.items\":[],\"filter_author_forward_id_show.items\":[],\"filter_original_id_show.items\":[],\"filter_mention_name_show.items\":[],\"filter_topic_text_show.items\":[],\"filter_source_text_show.items\":[],\"filter_content_text_hide.items\":[],\"filter_content_regex_hide.items\":[],\"filter_author_id_hide.items\":[],\"filter_author_forward_id_hide.items\":[],\"filter_original_id_hide.items\":[],\"filter_mention_name_hide.items\":[],\"filter_topic_text_hide.items\":[],\"filter_source_text_hide.items\":[],\"filter_content_text_fold.items\":[],\"filter_content_regex_fold.items\":[],\"filter_author_id_fold.items\":[],\"filter_author_forward_id_fold.items\":[],\"filter_original_id_fold.items\":[],\"filter_mention_name_fold.items\":[],\"filter_topic_text_fold.items\":[],\"filter_source_text_fold.items\":[],\"filter_comment_text_show.items\":[],\"filter_comment_regex_show.items\":[],\"filter_comment_name_show.items\":[],\"filter_comment_text_hide.items\":[],\"filter_comment_regex_hide.items\":[],\"filter_comment_name_hide.items\":[],\"hide_hot_topic_large_read\":false,\"hide_hot_topic_large_read.quota\":20,\"filter_fast_forward\":false,\"clean_follow_fast_forward\":false,\"link_with_face\":false,\"link_with_face.clean\":false,\"link_with_face.link\":false,\"feed_long_expand.count\":750,\"feed_long_expand.br\":30,\"script_update_whatsnew.lastWeibo\":7,\"filter_weibo_product_like\":false,\"feed_render\":true,\"nav_use_link\":false,\"side_left_use_link\":false,\"feed_link_new_tab.author\":true,\"feed_link_new_tab.mention\":true,\"feed_link_new_tab.topic\":true,\"feed_link_new_tab.picture\":true,\"feed_link_new_tab.detail\":true,\"feed_link_new_tab.comments\":true,\"feed_link_new_tab\":true,\"filter_homepage_multi_group.count\":50,\"filter_homepage_multi_group.more\":\"clear\",\"filter_homepage_multi_group.unread\":false,\"filter_homepage_multi_group.groups\":[],\"filter_homepage_desktop_notify.whitelist\":false,\"filter_homepage_single_group.group\":\"100051897686351\",\"filter_original_follower.count\":10,\"filter_original_follower.account\":[],\"filter_yizhibo.type\":\"all\",\"filter_multiple_topics_feed.num\":5,\"flooding_author.number\":5,\"flooding_author.action\":\"hide\",\"flooding_author.group\":false,\"flooding_forward.number\":3,\"flooding_forward.action\":\"hide\",\"filter_comment_face_count.count\":8,\"filter_comment_face_type.count\":4,\"font_family.west\":\"Times\",\"feed_small_image.repost\":false,\"feed_increase_width.width\":700,\"feed_button_order.0\":\"pop\",\"feed_button_order.1\":\"favorite\",\"feed_button_order.2\":\"forward\",\"feed_button_order.3\":\"comment\",\"feed_button_order.4\":\"like\",\"feed_button_order_comment.0\":\"report\",\"feed_button_order_comment.1\":\"delete\",\"feed_button_order_comment.2\":\"conversition\",\"feed_button_order_comment.3\":\"reply\",\"feed_button_order_comment.4\":\"like\",\"feed_font_size.ratio\":\"120\",\"feed_content_line_break.text\":\"\",\"feed_view_original.direct\":false,\"feed_download_image.direct\":false,\"image_preview_all.count\":\"3x3\",\"image_preview_all.more\":\"text\",\"feed_low_reading_warn.count\":100,\"feed_only_mode.width\":600,\"feed_only_mode.key\":119,\"feed_only_mode.button\":false,\"clean_feed_fast_repost\":false,\"layout_nav_hide_avatar\":false,\"layout_left_liked\":false,\"feed_link_new_tab.card\":true,\"layout_left_liked.like\":false}","local::user1897686351Follow":"s{\"fetchData\":{\"timestamp\":1615206850172,\"weiboVersion\":7},\"lastList\":{\"timestamp\":1615206850171,\"list\":[{\"id\":\"user-6279793937\",\"type\":\"user\",\"user\":\"6279793937\",\"url\":\"https://weibo.com/arknights\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.756.756.180/006QZngZly8gdj05mufr9j30l00l0dq4.jpg?KID=imgbed,tva&Expires=1615217599&ssig=2mYeFrmqcB\",\"name\":\"Arknights\",\"description\":\"@Arknights\"},{\"id\":\"user-2615417307\",\"type\":\"user\",\"user\":\"2615417307\",\"url\":\"https://weibo.com/phoenixnewmedia\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.3.160.160.180/9be419dbly1gdi6iyhm89j204g04mwed.jpg?KID=imgbed,tva&Expires=1615217599&ssig=Jnc%2BbOVDcS\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2113392497\",\"type\":\"user\",\"user\":\"2113392497\",\"url\":\"https://weibo.com/retros\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.694.694.180/7df7cf71jw8erunjk0aydj20ja0ja75i.jpg?KID=imgbed,tva&Expires=1615217599&ssig=JJsO2Dgy2t\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1195031270\",\"type\":\"user\",\"user\":\"1195031270\",\"url\":\"https://weibo.com/zhyj\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.180/001iSedUly8gn36v39jkgj60u00u0gng02.jpg?KID=imgbed,tva&Expires=1615217599&ssig=pJkgCr2QUV\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5024034489\",\"type\":\"user\",\"user\":\"5024034489\",\"url\":\"https://weibo.com/situgezi\",\"avatar\":\"https://tva1.sinaimg.cn/crop.3.273.682.682.180/005u0kSljw8fcz9eg95dlj30j60y5n12.jpg?KID=imgbed,tva&Expires=1615217599&ssig=HZw23yXkrW\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1273204392\",\"type\":\"user\",\"user\":\"1273204392\",\"url\":\"https://weibo.com/mumakingdom\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.180/4be38ea8ly8gh6x3ros25j20u00u00wd.jpg?KID=imgbed,tva&Expires=1615217599&ssig=kQxvUUkfjE\",\"name\":\"Muma-\",\"description\":\"@Muma-\"},{\"id\":\"user-2610429597\",\"type\":\"user\",\"user\":\"2610429597\",\"url\":\"https://weibo.com/u/2610429597\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.166.0.717.717.180/9b97fe9dly8gchm5l1vcfj20u00zw76e.jpg?KID=imgbed,tva&Expires=1615217599&ssig=aeB4Xb0Ywd\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1876156855\",\"type\":\"user\",\"user\":\"1876156855\",\"url\":\"https://weibo.com/nvliu66\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.180/6fd3e1b7ly8g663789javj20u00u076a.jpg?KID=imgbed,tva&Expires=1615217599&ssig=XYrIEHHgnz\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1882579600\",\"type\":\"user\",\"user\":\"1882579600\",\"url\":\"https://weibo.com/pongba\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.316.316.180/7035e290ly8fyzy1tlcg5j208v08s0t3.jpg?KID=imgbed,tva&Expires=1615217599&ssig=aHHF%2BEL0r6\",\"name\":\"pongba\",\"description\":\"@pongba\"},{\"id\":\"user-3183412640\",\"type\":\"user\",\"user\":\"3183412640\",\"url\":\"https://weibo.com/ParisSaintGermainFC\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.828.828.180/bdbf05a0ly8gn8brq8ovuj20n00n0q4f.jpg?KID=imgbed,tva&Expires=1615217599&ssig=LWiTKQZUEj\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-6396634787\",\"type\":\"user\",\"user\":\"6396634787\",\"url\":\"https://weibo.com/u/6396634787\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.996.996.180/006YTCUPly8gdi6o7b67wj30ro0rowfe.jpg?KID=imgbed,tva&Expires=1615217599&ssig=B5VAdvlHSN\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3306934123\",\"type\":\"user\",\"user\":\"3306934123\",\"url\":\"https://weibo.com/anotherhome\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.512.512.180/c51bcf6bly8fidanigrmij20e80e8mxd.jpg?KID=imgbed,tva&Expires=1615217599&ssig=FM5i4TWvCg\",\"name\":\"DIYgod\",\"description\":\"@DIYgod\"},{\"id\":\"user-5270289369\",\"type\":\"user\",\"user\":\"5270289369\",\"url\":\"https://weibo.com/forestapp\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.175.175.180/005KFB1fly8gafz2ube5bj304v04vdfo.jpg?KID=imgbed,tva&Expires=1615217599&ssig=SpEPbYAyos\",\"name\":\"ForestApp\",\"description\":\"@ForestApp\"},{\"id\":\"user-2267155115\",\"type\":\"user\",\"user\":\"2267155115\",\"url\":\"https://weibo.com/236601678\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.512.512.180/87220aably8g2cnkh4c5wj20e80e8aac.jpg?KID=imgbed,tva&Expires=1615217599&ssig=HAmFd84gx1\",\"name\":\"Larry_Dev\",\"description\":\"@Larry_Dev\"},{\"id\":\"user-6448460373\",\"type\":\"user\",\"user\":\"6448460373\",\"url\":\"https://weibo.com/afyuque\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.401.61.583.583.180/0072p57nly8gi32fy4v8hj30vu0hx0wl.jpg?KID=imgbed,tva&Expires=1615217599&ssig=AJiykihp0x\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5396590503\",\"type\":\"user\",\"user\":\"5396590503\",\"url\":\"https://weibo.com/u/5396590503\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.512.512.180/005TdxIjly8gkmtxbrkv0j30e80e8q3i.jpg?KID=imgbed,tva&Expires=1615217599&ssig=mXXCqqJkfN\",\"name\":\"lqscrisp\",\"description\":\"@lqscrisp\"},{\"id\":\"user-6907244758\",\"type\":\"user\",\"user\":\"6907244758\",\"url\":\"https://weibo.com/u/6907244758\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.180/007xs5Twly8gfpynknzm4j30u00u0wgx.jpg?KID=imgbed,tva&Expires=1615217599&ssig=IgKxQXF6TD\",\"name\":\"TTTianII\",\"description\":\"@TTTianII\"},{\"id\":\"user-1890196401\",\"type\":\"user\",\"user\":\"1890196401\",\"url\":\"https://weibo.com/mikuya1031\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.180/70aa1bb1ly8gmnirb9bcjj20u00u0whk.jpg?KID=imgbed,tva&Expires=1615217599&ssig=FMn7j%2FAFgA\",\"name\":\"2\",\"description\":\"@2\"},{\"id\":\"user-5903137559\",\"type\":\"user\",\"user\":\"5903137559\",\"url\":\"https://weibo.com/u/5903137559\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1002.1002.180/006ruXK7ly8gfqtogyyt2j30ru0ruq57.jpg?KID=imgbed,tva&Expires=1615217599&ssig=WQ7pSwk9c0\",\"name\":\"-knight\",\"description\":\"@-knight\"},{\"id\":\"user-6087949803\",\"type\":\"user\",\"user\":\"6087949803\",\"url\":\"https://weibo.com/u/6087949803\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.180/006E0pQLly8fm4sb0807jj30e80e8dhk.jpg?KID=imgbed,tva&Expires=1615217599&ssig=RyzZTGvv43\",\"name\":\"PriceTag\",\"description\":\"@PriceTag\"},{\"id\":\"user-1774390367\",\"type\":\"user\",\"user\":\"1774390367\",\"url\":\"https://weibo.com/575203337\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.179.179.180/69c30c5fjw1f4o1v79a4mj20500503yn.jpg?KID=imgbed,tva&Expires=1615217604&ssig=h1SRWlyC43\",\"name\":\"Naituw\",\"description\":\"@Naituw\"},{\"id\":\"user-3980096715\",\"type\":\"user\",\"user\":\"3980096715\",\"url\":\"https://weibo.com/u/3980096715\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.180/ed3b74cbly8gln1dxibgkj20u00u075o.jpg?KID=imgbed,tva&Expires=1615217604&ssig=r%2FVzraMqUs\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1044980795\",\"type\":\"user\",\"user\":\"1044980795\",\"url\":\"https://weibo.com/yingshijufeng\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.180.180.180/3e49243bly8g7ujwp1de9j2050050dft.jpg?KID=imgbed,tva&Expires=1615217604&ssig=kSD%2FnCQUkj\",\"name\":\"MediaStorm\",\"description\":\"@MediaStorm\"},{\"id\":\"user-7335367665\",\"type\":\"user\",\"user\":\"7335367665\",\"url\":\"https://weibo.com/u/7335367665\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.238.0.1044.1044.180/0080qsdHly8g8uewf9yeaj31400u0x06.jpg?KID=imgbed,tva&Expires=1615217604&ssig=0mZQ68pjlT\",\"name\":\"_RyuichiSakamoto\",\"description\":\"@_RyuichiSakamoto\"},{\"id\":\"user-1581166031\",\"type\":\"user\",\"user\":\"1581166031\",\"url\":\"https://weibo.com/guanhongyue\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.180/5e3eadcfjw1eaek0zh0arj2050050wem.jpg?KID=imgbed,tva&Expires=1615217604&ssig=cWQcOqyund\",\"name\":\"exe\",\"description\":\"@exe\"},{\"id\":\"user-1244419177\",\"type\":\"user\",\"user\":\"1244419177\",\"url\":\"https://weibo.com/wenmuye\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.180.180.180/4a2c5469jw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1615217604&ssig=DbFC0Hkitu\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1263362863\",\"type\":\"user\",\"user\":\"1263362863\",\"url\":\"https://weibo.com/zhangxinxu\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.180.180.180/4b4d632fjw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1615217604&ssig=%2FAUxsROAx7\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1761511274\",\"type\":\"user\",\"user\":\"1761511274\",\"url\":\"https://weibo.com/arttechdesign\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.68.5.1274.1274.180/68fe876aly8fhrytk14ckj21kw11xwsw.jpg?KID=imgbed,tva&Expires=1615217604&ssig=ButL1am6ac\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3423485724\",\"type\":\"user\",\"user\":\"3423485724\",\"url\":\"https://weibo.com/u/3423485724\",\"avatar\":\"https://tva4.sinaimg.cn/crop.24.0.1194.1194.180/cc0e3f1cjw8f5y135wb83j20yi0x6mzp.jpg?KID=imgbed,tva&Expires=1615217604&ssig=n9uK%2BjoriX\",\"name\":\"coder\",\"description\":\"@coder\"},{\"id\":\"user-6293993963\",\"type\":\"user\",\"user\":\"6293993963\",\"url\":\"https://weibo.com/u/6293993963\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.180/006RWXlFly8gnyoyzj6vwj30u00u074x.jpg?KID=imgbed,tva&Expires=1615217604&ssig=wDOdzkgO6s\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2976620041\",\"type\":\"user\",\"user\":\"2976620041\",\"url\":\"https://weibo.com/guoheyue\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.750.750.180/b16b9e09ly8fzbrncdsntj20ku0kut9z.jpg?KID=imgbed,tva&Expires=1615217604&ssig=CwVGQeIxI4\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1237280853\",\"type\":\"user\",\"user\":\"1237280853\",\"url\":\"https://weibo.com/u/1237280853\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.223.223.180/49bf6855jw1f1t06vxewcj2068068q3b.jpg?KID=imgbed,tva&Expires=1615217604&ssig=2lBfF4yQxm\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1917318944\",\"type\":\"user\",\"user\":\"1917318944\",\"url\":\"https://weibo.com/u/1917318944\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.511.511.180/7247f720jw8esmg92i951j20e80e73ye.jpg?KID=imgbed,tva&Expires=1615217604&ssig=GsQ%2BIdThtZ\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1112829033\",\"type\":\"user\",\"user\":\"1112829033\",\"url\":\"https://weibo.com/vposy\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.100.100.180/42546c69ly8fz2ulipvjrj202s02sjrq.jpg?KID=imgbed,tva&Expires=1615217604&ssig=3UL%2F6geGcP\",\"name\":\"vposy\",\"description\":\"@vposy\"},{\"id\":\"user-2145291155\",\"type\":\"user\",\"user\":\"2145291155\",\"url\":\"https://weibo.com/mayun\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.180/7fde8b93ly1gdj58wai4hj20u00u0hdt.jpg?KID=imgbed,tva&Expires=1615217604&ssig=vJT9DC8eoI\",\"name\":\"-\",\"description\":\"@-\"},{\"id\":\"user-1170999921\",\"type\":\"user\",\"user\":\"1170999921\",\"url\":\"https://weibo.com/laruence\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.180.180.180/45cc0a71jw1eiellpvi0ij20500503yn.jpg?KID=imgbed,tva&Expires=1615217604&ssig=1TDCw9C%2F5%2F\",\"name\":\"Laruence\",\"description\":\"@Laruence\"},{\"id\":\"user-3319419782\",\"type\":\"user\",\"user\":\"3319419782\",\"url\":\"https://weibo.com/u/3319419782\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.996.996.180/c5da5386ly8gbqtgfri35j20ro0rotaj.jpg?KID=imgbed,tva&Expires=1615217604&ssig=mdfuuKAUn%2F\",\"name\":\"litang0908\",\"description\":\"@litang0908\"},{\"id\":\"user-2320711045\",\"type\":\"user\",\"user\":\"2320711045\",\"url\":\"https://weibo.com/wboard\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.829.829.180/8a533d85ly8gdgvsxq7ebj20n10n1dgu.jpg?KID=imgbed,tva&Expires=1615217604&ssig=V6xp1YDTpv\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-6543396571\",\"type\":\"user\",\"user\":\"6543396571\",\"url\":\"https://weibo.com/u/6543396571\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.144.144.180/0078Pqmnly8ftnb3iqnr0j3040040t8m.jpg?KID=imgbed,tva&Expires=1615217604&ssig=jUzJqneg83\",\"name\":\"App\",\"description\":\"@App\"},{\"id\":\"user-1917884865\",\"type\":\"user\",\"user\":\"1917884865\",\"url\":\"https://weibo.com/u/1917884865\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.26.574.574.180/725099c1jw8fdd7kd9sr4j20h30m80ui.jpg?KID=imgbed,tva&Expires=1615217610&ssig=WDoE1LM5%2Fd\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1072494141\",\"type\":\"user\",\"user\":\"1072494141\",\"url\":\"https://weibo.com/hantianfeng\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.180/3fecf63dly8ftkvl98cjdj20e80e8t93.jpg?KID=imgbed,tva&Expires=1615217610&ssig=xgMrSr50U%2B\",\"name\":\"-Rango\",\"description\":\"@-Rango\"},{\"id\":\"user-3220313942\",\"type\":\"user\",\"user\":\"3220313942\",\"url\":\"https://weibo.com/u/3220313942\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.834.834.180/bff21756ly1g9val5m37tj20n60n6q36.jpg?KID=imgbed,tva&Expires=1615217610&ssig=mWXXv%2BRuMl\",\"name\":\"JetBrains\",\"description\":\"@JetBrains\"},{\"id\":\"user-1727524721\",\"type\":\"user\",\"user\":\"1727524721\",\"url\":\"https://weibo.com/terryxiang\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.37.18.1045.1045.180/66f7ef71ly8fwmyvcj7afj20v40v4h7y.jpg?KID=imgbed,tva&Expires=1615217610&ssig=OdLviZtTZV\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3517024237\",\"type\":\"user\",\"user\":\"3517024237\",\"url\":\"https://weibo.com/midnighttalks\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.165.186.738.738.180/d1a187edly8fs1ey4x336j20u00u0wiq.jpg?KID=imgbed,tva&Expires=1615217610&ssig=KrjwmITx1W\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2031429505\",\"type\":\"user\",\"user\":\"2031429505\",\"url\":\"https://weibo.com/samans\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.180/79152781ly8gj6czc78k1j20u00u00yg.jpg?KID=imgbed,tva&Expires=1615217610&ssig=NU3sUmzpKe\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1914010467\",\"type\":\"user\",\"user\":\"1914010467\",\"url\":\"https://weibo.com/sspaime\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.1239.1239.180/72157b63jw8f6bxfg3yixj20yf0yf75t.jpg?KID=imgbed,tva&Expires=1615217610&ssig=ZnfYU6W9B7\",\"name\":\"sspai\",\"description\":\"@sspai\"},{\"id\":\"user-1229068373\",\"type\":\"user\",\"user\":\"1229068373\",\"url\":\"https://weibo.com/limboman\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.180.180.180/49421855jw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1615217610&ssig=li8ldWmGWk\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1831034903\",\"type\":\"user\",\"user\":\"1831034903\",\"url\":\"https://weibo.com/335665353\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.180/6d236017ly8ggfpn2ixrej20u00u0761.jpg?KID=imgbed,tva&Expires=1615217610&ssig=7QZQbVWK0G\",\"name\":\"Jeannels\",\"description\":\"@Jeannels\"},{\"id\":\"user-1559526423\",\"type\":\"user\",\"user\":\"1559526423\",\"url\":\"https://weibo.com/gfy080504\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.396.90.990.990.180/5cf47c17ly8frdpnzzywaj21900u0gzi.jpg?KID=imgbed,tva&Expires=1615217610&ssig=AeGuk6z7kM\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5498125999\",\"type\":\"user\",\"user\":\"5498125999\",\"url\":\"https://weibo.com/jikenow\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.921.921.180/00605zJBly8gdla1ux8vrj30pl0plmxm.jpg?KID=imgbed,tva&Expires=1615217610&ssig=%2B6%2BSvso%2BjQ\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1752502537\",\"type\":\"user\",\"user\":\"1752502537\",\"url\":\"https://weibo.com/u/1752502537\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.751.751.180/68751109ly8fj0g7zpb88j20kv0kvmxq.jpg?KID=imgbed,tva&Expires=1615217610&ssig=F8H2vOwOh8\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1916825084\",\"type\":\"user\",\"user\":\"1916825084\",\"url\":\"https://weibo.com/vczh\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.159.159.180/72406dfcgw1ex52nh4deij204g04gdfv.jpg?KID=imgbed,tva&Expires=1615217610&ssig=R7hqAd%2FawI\",\"name\":\"GeniusVczh\",\"description\":\"@GeniusVczh\"},{\"id\":\"user-1401880315\",\"type\":\"user\",\"user\":\"1401880315\",\"url\":\"https://weibo.com/haoel\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.896.896.180/538efefbly8gnmuzb9oxpj20ow0owdi4.jpg?KID=imgbed,tva&Expires=1615217610&ssig=0CaLtsJUDS\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2964236717\",\"type\":\"user\",\"user\":\"2964236717\",\"url\":\"https://weibo.com/u/2964236717\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.512.512.180/b0aea9adjw8erymkbbzsyj20e80e8t8q.jpg?KID=imgbed,tva&Expires=1615217610&ssig=PQO5URgIXg\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1593134432\",\"type\":\"user\",\"user\":\"1593134432\",\"url\":\"https://weibo.com/kalasoo\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1242.1242.180/5ef54d60ly8fdhxoqz219j20yi0yitc9.jpg?KID=imgbed,tva&Expires=1615217610&ssig=kR%2FFOZyevE\",\"name\":\"kalasoo\",\"description\":\"@kalasoo\"},{\"id\":\"user-3965954138\",\"type\":\"user\",\"user\":\"3965954138\",\"url\":\"https://weibo.com/viosey\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.512.512.180/ec63a85aly8g8qimj99t9j20e80e8t9w.jpg?KID=imgbed,tva&Expires=1615217610&ssig=qOLXp7Zf%2FC\",\"name\":\"viosey\",\"description\":\"@viosey\"},{\"id\":\"user-2207519004\",\"type\":\"user\",\"user\":\"2207519004\",\"url\":\"https://weibo.com/u/2207519004\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1024.1024.180/8394111cly8g2hcpz9dcrj20sg0sgdmc.jpg?KID=imgbed,tva&Expires=1615217610&ssig=WbNQrT3vDZ\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5383066644\",\"type\":\"user\",\"user\":\"5383066644\",\"url\":\"https://weibo.com/xitucircle\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.12.14.448.448.180/005SiNxyly8g1nzah4zlbj30dc0dcdfz.jpg?KID=imgbed,tva&Expires=1615217610&ssig=rSP8RTIBiZ\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-6079196173\",\"type\":\"user\",\"user\":\"6079196173\",\"url\":\"https://weibo.com/u/6079196173\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.180/006DpGDbly8fygpgxzvblj30u00u0wfy.jpg?KID=imgbed,tva&Expires=1615217610&ssig=JCTOu0ALNk\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2163553891\",\"type\":\"user\",\"user\":\"2163553891\",\"url\":\"https://weibo.com/u/2163553891\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1000.1000.180/80f53663ly1gcx63hdsysj20rs0rsach.jpg?KID=imgbed,tva&Expires=1615217616&ssig=SqYVDFk1ej\",\"name\":\"BIE\",\"description\":\"@BIE\"},{\"id\":\"user-6079558227\",\"type\":\"user\",\"user\":\"6079558227\",\"url\":\"https://weibo.com/u/6079558227\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.801.801.180/006DrcOLly8fg0666cw7yj30m90m9myl.jpg?KID=imgbed,tva&Expires=1615217616&ssig=adyrZx2762\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1959394755\",\"type\":\"user\",\"user\":\"1959394755\",\"url\":\"https://weibo.com/genken\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.11.750.750.180/74c9fdc3ly8fjsuruxlj8j20ku0lhq4h.jpg?KID=imgbed,tva&Expires=1615217616&ssig=a6cl5d5nYf\",\"name\":\"-GK-GenKen\",\"description\":\"@-GK-GenKen\"},{\"id\":\"user-1404332602\",\"type\":\"user\",\"user\":\"1404332602\",\"url\":\"https://weibo.com/deinthoedore\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1125.1125.180/53b46a3aly8fo1c2180mlj20v90v9q54.jpg?KID=imgbed,tva&Expires=1615217616&ssig=16fkoU5klP\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-6004302211\",\"type\":\"user\",\"user\":\"6004302211\",\"url\":\"https://weibo.com/yincangcaidan\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.15.25.563.563.180/006ylri3gy1fdfllvzqzbj30gk0gkabi.jpg?KID=imgbed,tva&Expires=1615217616&ssig=NJ0hu4yuu9\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1261949681\",\"type\":\"user\",\"user\":\"1261949681\",\"url\":\"https://weibo.com/evanslwz\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.180/4b37d2f1ly8gab92h89nwj20u00u00us.jpg?KID=imgbed,tva&Expires=1615217616&ssig=MLlQPxp0PQ\",\"name\":\"csgo\",\"description\":\"@csgo\"},{\"id\":\"user-5822025738\",\"type\":\"user\",\"user\":\"5822025738\",\"url\":\"https://weibo.com/mayjlee517\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.180/006m0CQWly8g4ka5vumw3j30u00u0wgw.jpg?KID=imgbed,tva&Expires=1615217616&ssig=aW4EHFWtNT\",\"name\":\"MAYJ_LEE\",\"description\":\"@MAYJ_LEE\"},{\"id\":\"user-1805543441\",\"type\":\"user\",\"user\":\"1805543441\",\"url\":\"https://weibo.com/laixuefeng\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.180/6b9e6811ly8ggs468bhttj20u00u0djg.jpg?KID=imgbed,tva&Expires=1615217616&ssig=leoM7VmB4%2B\",\"name\":\"xf\",\"description\":\"@xf\"},{\"id\":\"user-1641970011\",\"type\":\"user\",\"user\":\"1641970011\",\"url\":\"https://weibo.com/23784148\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.180/61de795bjw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1615217616&ssig=ygl5XuXCrY\",\"name\":\"-Kenshin\",\"description\":\"@-Kenshin\"},{\"id\":\"user-5995015653\",\"type\":\"user\",\"user\":\"5995015653\",\"url\":\"https://weibo.com/WayneCSGO\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.512.512.180/006xItqRly8fn49gg3asdj30e80e8jrn.jpg?KID=imgbed,tva&Expires=1615217616&ssig=oRrsX6ZnAe\",\"name\":\"_\",\"description\":\"@_\"},{\"id\":\"user-5980136393\",\"type\":\"user\",\"user\":\"5980136393\",\"url\":\"https://weibo.com/CSGOPWRD\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.750.750.180/006wI2ENly8glbgbdhs1dj30ku0kut8y.jpg?KID=imgbed,tva&Expires=1615217616&ssig=j7UpAdTMfb\",\"name\":\"CSGO\",\"description\":\"@CSGO\"},{\"id\":\"user-6279635015\",\"type\":\"user\",\"user\":\"6279635015\",\"url\":\"https://weibo.com/u/6279635015\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.750.750.180/006QYHVJly8g0vj7tisefj30ku0ku0tl.jpg?KID=imgbed,tva&Expires=1615217616&ssig=jbQ%2FTXpqn2\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5996184614\",\"type\":\"user\",\"user\":\"5996184614\",\"url\":\"https://weibo.com/u/5996184614\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.896.896.180/006xNnx4ly8gdii7306ubj30ow0owgmi.jpg?KID=imgbed,tva&Expires=1615217616&ssig=Kb9LLbIUZD\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5245903632\",\"type\":\"user\",\"user\":\"5245903632\",\"url\":\"https://weibo.com/u/5245903632\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.227.227.568.568.180/005J1haUly8gdiyig2d7uj30sg0sgagp.jpg?KID=imgbed,tva&Expires=1615217616&ssig=TGU3ERXTCa\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3178113720\",\"type\":\"user\",\"user\":\"3178113720\",\"url\":\"https://weibo.com/save2wiz\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.100.100.180/bd6e2ab8jw8et9fikkp7ej202s02sq2r.jpg?KID=imgbed,tva&Expires=1615217616&ssig=SZEDJJJXXd\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5047450652\",\"type\":\"user\",\"user\":\"5047450652\",\"url\":\"https://weibo.com/kindlefere\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1104.1104.180/005vAAuoly8fhjq8uzvmuj30uo0uoa9x.jpg?KID=imgbed,tva&Expires=1615217616&ssig=lq2OIuMQSG\",\"name\":\"BookFere\",\"description\":\"@BookFere\"},{\"id\":\"user-1726544024\",\"type\":\"user\",\"user\":\"1726544024\",\"url\":\"https://weibo.com/dgtle\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.331.331.180/66e8f898ly8fiw18931q3j2097097gm4.jpg?KID=imgbed,tva&Expires=1615217616&ssig=gB3sNTtpb%2F\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5393939593\",\"type\":\"user\",\"user\":\"5393939593\",\"url\":\"https://weibo.com/cowlevel\",\"avatar\":\"https://tva3.sinaimg.cn/crop.56.61.483.483.180/005T2q5Hjw8ewuvpgikybj30go0got8y.jpg?KID=imgbed,tva&Expires=1615217616&ssig=Y0YZAslsnU\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1871103515\",\"type\":\"user\",\"user\":\"1871103515\",\"url\":\"https://weibo.com/game163\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1002.1002.180/6f86c61bly8gdi76yln2wj20ru0ruwgn.jpg?KID=imgbed,tva&Expires=1615217616&ssig=By0Lpi6JjZ\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3181222402\",\"type\":\"user\",\"user\":\"3181222402\",\"url\":\"https://weibo.com/u/3181222402\",\"avatar\":\"https://tva3.sinaimg.cn/crop.84.33.166.166.180/bd9d9a02gw1eydf2nt1a8j207q078wfc.jpg?KID=imgbed,tva&Expires=1615217616&ssig=Mn7FtuRXql\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2166496631\",\"type\":\"user\",\"user\":\"2166496631\",\"url\":\"https://weibo.com/u/2166496631\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.180.180.180/81221d77jw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1615217621&ssig=dih88VJef3\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3748534967\",\"type\":\"user\",\"user\":\"3748534967\",\"url\":\"https://weibo.com/gaodiping\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.180/df6e1ab7ly8g4ss0d3o00j20e80e874u.jpg?KID=imgbed,tva&Expires=1615217621&ssig=KyxoUjKi8m\",\"name\":\"Gogoing__\",\"description\":\"@Gogoing__\"},{\"id\":\"user-1616826550\",\"type\":\"user\",\"user\":\"1616826550\",\"url\":\"https://weibo.com/yinle007\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.180/605ed0b6ly8gnhfxvy8eij20u00u076c.jpg?KID=imgbed,tva&Expires=1615217621&ssig=3b4AL5NUdj\",\"name\":\"LoveLing\",\"description\":\"@LoveLing\"},{\"id\":\"user-2879470994\",\"type\":\"user\",\"user\":\"2879470994\",\"url\":\"https://weibo.com/u/2879470994\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.180/aba13d92ly8fxovvh29m1j20u00u0wgk.jpg?KID=imgbed,tva&Expires=1615217621&ssig=Y5K76tXTNt\",\"name\":\"WE_\",\"description\":\"@WE_\"},{\"id\":\"user-2377156730\",\"type\":\"user\",\"user\":\"2377156730\",\"url\":\"https://weibo.com/white55kai\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.180/8db0887aly8g1voac7npuj20u00u0q5x.jpg?KID=imgbed,tva&Expires=1615217621&ssig=pVpAIdO1a3\",\"name\":\"_55\",\"description\":\"@_55\"},{\"id\":\"user-5451013129\",\"type\":\"user\",\"user\":\"5451013129\",\"url\":\"https://weibo.com/u/5451013129\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.100.100.180/005WTTwBjw8enrduaotekj302s02s0sk.jpg?KID=imgbed,tva&Expires=1615217621&ssig=Kk7PYKoDvW\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2735327001\",\"type\":\"user\",\"user\":\"2735327001\",\"url\":\"https://weibo.com/minisafe\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.512.512.180/a309c719ly8gdk51d8fstj20e80e8mxd.jpg?KID=imgbed,tva&Expires=1615217621&ssig=OR9ijZ136Q\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2053772757\",\"type\":\"user\",\"user\":\"2053772757\",\"url\":\"https://weibo.com/runningcheese\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.512.512.180/7a6a15d5jw8fbbbi434iqj20e80e8aai.jpg?KID=imgbed,tva&Expires=1615217621&ssig=t16uA%2FFePj\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1920682763\",\"type\":\"user\",\"user\":\"1920682763\",\"url\":\"https://weibo.com/wiz2011\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.100.100.180/727b4b0bjw8eswp4bfuwqj202s02sq2r.jpg?KID=imgbed,tva&Expires=1615217621&ssig=tn%2BTPHRnoA\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1829347244\",\"type\":\"user\",\"user\":\"1829347244\",\"url\":\"https://weibo.com/xingzheim\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.2048.2048.180/6d099facly8fqms49iv6aj21kw1kwgwz.jpg?KID=imgbed,tva&Expires=1615217621&ssig=4c1LxuCdSI\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2953031917\",\"type\":\"user\",\"user\":\"2953031917\",\"url\":\"https://weibo.com/eventkf\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.360.360.180/b003b0edly8ges3gscewwj20a00a03yx.jpg?KID=imgbed,tva&Expires=1615217621&ssig=vF6k3xQCdz\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1893347753\",\"type\":\"user\",\"user\":\"1893347753\",\"url\":\"https://weibo.com/lexburner\",\"avatar\":\"https://tva1.sinaimg.cn/crop.117.5.893.893.180/70da31a9gw1en1ih5zgwcj215o1akjz7.jpg?KID=imgbed,tva&Expires=1615217621&ssig=1w9rBhwipp\",\"name\":\"LexBurner\",\"description\":\"@LexBurner\"},{\"id\":\"user-1771123430\",\"type\":\"user\",\"user\":\"1771123430\",\"url\":\"https://weibo.com/doubanfilm\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.2044.2044.180/699132e6jw1el9q06jcxej21kw1kw7cb.jpg?KID=imgbed,tva&Expires=1615217621&ssig=wM749%2BUZ2F\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1640663757\",\"type\":\"user\",\"user\":\"1640663757\",\"url\":\"https://weibo.com/douban\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.180/61ca8acdjw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1615217621&ssig=W0IsLu1ppG\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3812984956\",\"type\":\"user\",\"user\":\"3812984956\",\"url\":\"https://weibo.com/doubandongxi\",\"avatar\":\"https://tva4.sinaimg.cn/crop.42.53.136.136.180/e345887cjw1e90wwcdn3qj206y06yjrd.jpg?KID=imgbed,tva&Expires=1615217621&ssig=06vasljhKI\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3021514657\",\"type\":\"user\",\"user\":\"3021514657\",\"url\":\"https://weibo.com/xiaomihongmi\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.180/003itXZnly8gnss9h96nkj60u00u0ka702.jpg?KID=imgbed,tva&Expires=1615217621&ssig=WcMQDyuM1b\",\"name\":\"Redmi\",\"description\":\"@Redmi\"},{\"id\":\"user-1771925961\",\"type\":\"user\",\"user\":\"1771925961\",\"url\":\"https://weibo.com/xiaomikeji\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1002.1002.180/699d71c9ly8gdi5v45y5qj20ru0ru0sx.jpg?KID=imgbed,tva&Expires=1615217621&ssig=oiMNtDMOIx\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5492774960\",\"type\":\"user\",\"user\":\"5492774960\",\"url\":\"https://weibo.com/u/5492774960\",\"avatar\":\"https://tva4.sinaimg.cn/crop.44.0.100.100.180/005ZJ7Gwjw8ezwxxlu1o0j30500343yg.jpg?KID=imgbed,tva&Expires=1615217621&ssig=M9OC1luPBz\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5874291723\",\"type\":\"user\",\"user\":\"5874291723\",\"url\":\"https://weibo.com/RNGROYAL\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1002.1002.180/006pxVCHly8gbdrznl34kj30ru0ru0tc.jpg?KID=imgbed,tva&Expires=1615217621&ssig=hOsla66knG\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5498972025\",\"type\":\"user\",\"user\":\"5498972025\",\"url\":\"https://weibo.com/SHroyalClub\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.828.828.180/006097Pbly8gdi6g07febj30n00n0dgc.jpg?KID=imgbed,tva&Expires=1615217621&ssig=kP306bVvAI\",\"name\":\"RNG\",\"description\":\"@RNG\"},{\"id\":\"user-1251000504\",\"type\":\"user\",\"user\":\"1251000504\",\"url\":\"https://weibo.com/vae\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.180/4a90c0b8ly8gan3rhugsjj20u00u0jtk.jpg?KID=imgbed,tva&Expires=1615217627&ssig=Wxr8NUCDFW\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1140554177\",\"type\":\"user\",\"user\":\"1140554177\",\"url\":\"https://weibo.com/u/1140554177\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.828.828.180/43fb79c1ly8gdj4norb7pj20n00n0wh6.jpg?KID=imgbed,tva&Expires=1615217627&ssig=kIaM3e2KWy\",\"name\":\"Misaya\",\"description\":\"@Misaya\"},{\"id\":\"user-1558597584\",\"type\":\"user\",\"user\":\"1558597584\",\"url\":\"https://weibo.com/tftwawa\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.180/5ce64fd0ly8gbrwnzxby6j20u00u0whe.jpg?KID=imgbed,tva&Expires=1615217627&ssig=zE2dmhev0n\",\"name\":\"GwAwa\",\"description\":\"@GwAwa\"},{\"id\":\"user-5235726837\",\"type\":\"user\",\"user\":\"5235726837\",\"url\":\"https://weibo.com/edgteam\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1000.1000.180/005IkzJ3ly8glmoa4uezjj30rs0rs765.jpg?KID=imgbed,tva&Expires=1615217627&ssig=sccdzzWbLo\",\"name\":\"EDG\",\"description\":\"@EDG\"},{\"id\":\"user-2099708877\",\"type\":\"user\",\"user\":\"2099708877\",\"url\":\"https://weibo.com/igaming\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.5.0.676.676.180/002i6acdly8glmosrzhkjj60j60j674w02.jpg?KID=imgbed,tva&Expires=1615217627&ssig=iuurwOcXYB\",\"name\":\"iG\",\"description\":\"@iG\"},{\"id\":\"user-2180551362\",\"type\":\"user\",\"user\":\"2180551362\",\"url\":\"https://weibo.com/208882127\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.180/81f892c2ly8gdilxuq8ngj20u00u0mzp.jpg?KID=imgbed,tva&Expires=1615217627&ssig=IYy5ZlKWPI\",\"name\":\"Mark\",\"description\":\"@Mark\"},{\"id\":\"user-5206808819\",\"type\":\"user\",\"user\":\"5206808819\",\"url\":\"https://weibo.com/u/5206808819\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.99.99.180/005GnePpjw8emoahan1xlj302s02rdfn.jpg?KID=imgbed,tva&Expires=1615217627&ssig=Lq5sR22blZ\",\"name\":\"illuSioN\",\"description\":\"@illuSioN\"},{\"id\":\"user-5220650532\",\"type\":\"user\",\"user\":\"5220650532\",\"url\":\"https://weibo.com/haoawesome\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.104.609.609.180/005HjjGQly8fm6uiu3spaj30gx0jtwep.jpg?KID=imgbed,tva&Expires=1615217627&ssig=yhxSm0usaT\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2155378037\",\"type\":\"user\",\"user\":\"2155378037\",\"url\":\"https://weibo.com/acgtsdm\",\"avatar\":\"https://tva2.sinaimg.cn/crop.1.59.709.709.180/80787575gw1eb5khmioyij20js0me43o.jpg?KID=imgbed,tva&Expires=1615217627&ssig=wnKNBnAy3s\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5643342246\",\"type\":\"user\",\"user\":\"5643342246\",\"url\":\"https://weibo.com/u/5643342246\",\"avatar\":\"https://tva1.sinaimg.cn/crop.86.14.199.199.180/0069UT78gw1etm3dimq7zj309806474k.jpg?KID=imgbed,tva&Expires=1615217627&ssig=vvzOmXSPWO\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3901429666\",\"type\":\"user\",\"user\":\"3901429666\",\"url\":\"https://weibo.com/amogood\",\"avatar\":\"https://tva4.sinaimg.cn/crop.3.3.196.196.180/e88b17a2jw8epkezc10apj205k05k3yc.jpg?KID=imgbed,tva&Expires=1615217627&ssig=PA7WOLDu42\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3931632264\",\"type\":\"user\",\"user\":\"3931632264\",\"url\":\"https://weibo.com/u/3931632264\",\"avatar\":\"https://tva3.sinaimg.cn/crop.29.1.653.653.180/ea57f288gw1euh3pdp12oj20j60i8adh.jpg?KID=imgbed,tva&Expires=1615217627&ssig=P7FoFzUg7r\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5475378260\",\"type\":\"user\",\"user\":\"5475378260\",\"url\":\"https://weibo.com/riotchina\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.166.81.416.416.180/005Yy80Aly8gn3haokw2nj30ku0g40ss.jpg?KID=imgbed,tva&Expires=1615217627&ssig=bvVxNaIG6Y\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1663559265\",\"type\":\"user\",\"user\":\"1663559265\",\"url\":\"https://weibo.com/sdtvdabing\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.180/6327e661ly8ghg24kh0nsj20u00u0q52.jpg?KID=imgbed,tva&Expires=1615217627&ssig=Vifa0EDfyn\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2166787813\",\"type\":\"user\",\"user\":\"2166787813\",\"url\":\"https://weibo.com/u/2166787813\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.180/002mDCuxly8gndjoigm17j60u00u0mz202.jpg?KID=imgbed,tva&Expires=1615217627&ssig=jBUkEOIyS4\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1766610575\",\"type\":\"user\",\"user\":\"1766610575\",\"url\":\"https://weibo.com/duchangtuanparty\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.31.6.715.715.180/001Vyw6Xly8gkrzd0row7j60m80m8mxf02.jpg?KID=imgbed,tva&Expires=1615217627&ssig=LnKqu0Y0u2\",\"name\":\"ONE\",\"description\":\"@ONE\"},{\"id\":\"user-5620226721\",\"type\":\"user\",\"user\":\"5620226721\",\"url\":\"https://weibo.com/u/5620226721\",\"avatar\":\"https://tva4.sinaimg.cn/crop.73.0.926.926.180/0068lTI5jw8f1ktmwspnuj30rs0pqto2.jpg?KID=imgbed,tva&Expires=1615217627&ssig=2V3nkHdh9f\",\"name\":\"-\",\"description\":\"@-\"},{\"id\":\"user-2540774152\",\"type\":\"user\",\"user\":\"2540774152\",\"url\":\"https://weibo.com/573270077\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.512.512.180/97712308ly8gdi9veta10j20e80e8q38.jpg?KID=imgbed,tva&Expires=1615217627&ssig=SBLG9Va2iJ\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1197362373\",\"type\":\"user\",\"user\":\"1197362373\",\"url\":\"https://weibo.com/zhangjiajia\",\"avatar\":\"https://tva2.sinaimg.cn/crop.11.21.304.304.180/475e4cc5gw1e9v75ejvx0j208w09d0td.jpg?KID=imgbed,tva&Expires=1615217627&ssig=gj%2BIPL3q2a\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1992769421\",\"type\":\"user\",\"user\":\"1992769421\",\"url\":\"https://weibo.com/315720000\",\"avatar\":\"https://tva3.sinaimg.cn/crop.664.0.356.356.180/76c73f8djw1em2x2862h5j20xc0lldjd.jpg?KID=imgbed,tva&Expires=1615217627&ssig=Vj7gG%2FFedv\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5308047167\",\"type\":\"user\",\"user\":\"5308047167\",\"url\":\"https://weibo.com/fcjingqi\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1002.1002.180/005Ne1xZly8g97s8m3qbuj30ru0rumzj.jpg?KID=imgbed,tva&Expires=1615217632&ssig=HRXJEkgm2T\",\"name\":\"Atlas_GT\",\"description\":\"@Atlas_GT\"},{\"id\":\"user-1823348853\",\"type\":\"user\",\"user\":\"1823348853\",\"url\":\"https://weibo.com/smzdm\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.105.102.813.813.180/6cae1875ly8gdi6km8htlj20sg0sgtlg.jpg?KID=imgbed,tva&Expires=1615217632&ssig=AxvLe7h4rs\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2376806542\",\"type\":\"user\",\"user\":\"2376806542\",\"url\":\"https://weibo.com/mobileqzone\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.180/8dab308ely8gdi7c3clw4j20u00u0aaw.jpg?KID=imgbed,tva&Expires=1615217632&ssig=USQx8Mcy4U\",\"name\":\"QQ\",\"description\":\"@QQ\"},{\"id\":\"user-5225999165\",\"type\":\"user\",\"user\":\"5225999165\",\"url\":\"https://weibo.com/u/5225999165\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.512.512.180/005HFL77ly8fnpgww0ml2j30e80e874j.jpg?KID=imgbed,tva&Expires=1615217632&ssig=oC2q2UOn%2Fh\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3109939781\",\"type\":\"user\",\"user\":\"3109939781\",\"url\":\"https://weibo.com/523461921\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.512.512.180/b95dea45ly8gdinjp6ofkj20e80e8t8z.jpg?KID=imgbed,tva&Expires=1615217632&ssig=DMUqwT4W%2B6\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1559236912\",\"type\":\"user\",\"user\":\"1559236912\",\"url\":\"https://weibo.com/81980085\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.76.84.1835.1835.180/5cf01130ly8fi7q7st65kj21k21k74fq.jpg?KID=imgbed,tva&Expires=1615217632&ssig=w4z4VhqvEn\",\"name\":\"silver\",\"description\":\"@silver\"},{\"id\":\"user-1928300393\",\"type\":\"user\",\"user\":\"1928300393\",\"url\":\"https://weibo.com/575447785\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.512.512.180/0026uX1fly8glaph56dpej60e80e8q3h02.jpg?KID=imgbed,tva&Expires=1615217632&ssig=1AXvShRKdX\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1881941252\",\"type\":\"user\",\"user\":\"1881941252\",\"url\":\"https://weibo.com/linlis\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.180.180.180/702c2504jw8eo1wtiwf8ij205005174i.jpg?KID=imgbed,tva&Expires=1615217632&ssig=HtJO3vDVOq\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2855893887\",\"type\":\"user\",\"user\":\"2855893887\",\"url\":\"https://weibo.com/jianshuio\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.180/aa397b7fly8gfmz0gq9tkj20u00u03zq.jpg?KID=imgbed,tva&Expires=1615217632&ssig=wZJaDD9y0o\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1936786305\",\"type\":\"user\",\"user\":\"1936786305\",\"url\":\"https://weibo.com/80cool\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.750.750.180/73710381jw8er7usgymvjj20ku0kuab9.jpg?KID=imgbed,tva&Expires=1615217632&ssig=%2FRaxgW5c2O\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2645996150\",\"type\":\"user\",\"user\":\"2645996150\",\"url\":\"https://weibo.com/nikawa\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.512.512.180/9db6b276ly8gdiorsloldj20e80e874q.jpg?KID=imgbed,tva&Expires=1615217632&ssig=r02R7vgVPd\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1682207150\",\"type\":\"user\",\"user\":\"1682207150\",\"url\":\"https://weibo.com/nfrb\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.180/644471aely8gdilqip43tj20u00u00ub.jpg?KID=imgbed,tva&Expires=1615217632&ssig=G6q%2BzTJYoL\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3708072513\",\"type\":\"user\",\"user\":\"3708072513\",\"url\":\"https://weibo.com/laofanqie\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.180/dd04b241ly8gdi761ha54j20e80e8gls.jpg?KID=imgbed,tva&Expires=1615217632&ssig=JP4L1pn4wF\",\"name\":\"__\",\"description\":\"@__\"},{\"id\":\"user-2654755851\",\"type\":\"user\",\"user\":\"2654755851\",\"url\":\"https://weibo.com/zhengmianshangwoa\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.1080.1080.180/9e3c5c0bjw8emebzvdittj20u00u0q73.jpg?KID=imgbed,tva&Expires=1615217632&ssig=jdfmv9jDDB\",\"name\":\"Chimera\",\"description\":\"@Chimera\"},{\"id\":\"user-2463128032\",\"type\":\"user\",\"user\":\"2463128032\",\"url\":\"https://weibo.com/danaodaidaoke\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.828.828.180/92d059e0ly8gdhoxidw78j20n00n0jsc.jpg?KID=imgbed,tva&Expires=1615217632&ssig=p0TZll8lnl\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1658384301\",\"type\":\"user\",\"user\":\"1658384301\",\"url\":\"https://weibo.com/liaoxuefeng\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.1.635.635.180/62d8efadgw1ej30downrsj20hs0hq0ws.jpg?KID=imgbed,tva&Expires=1615217632&ssig=ZIhZCl9nKg\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2639709051\",\"type\":\"user\",\"user\":\"2639709051\",\"url\":\"https://weibo.com/u/2639709051\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.180/9d56c37bly8g2f3s7jeb4j20u00u00uw.jpg?KID=imgbed,tva&Expires=1615217632&ssig=oh5vbk8JTD\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1985393563\",\"type\":\"user\",\"user\":\"1985393563\",\"url\":\"https://weibo.com/cqy235\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.1040.1040.180/7656b39bjw8eo6zq52yluj20sw12w7ca.jpg?KID=imgbed,tva&Expires=1615217632&ssig=7AVJ%2BQYr5i\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3165283712\",\"type\":\"user\",\"user\":\"3165283712\",\"url\":\"https://weibo.com/u/3165283712\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.4.803.803.180/bcaa6580ly8fmzxf2qv27j20mb0mjtan.jpg?KID=imgbed,tva&Expires=1615217639&ssig=ODMWYabXb6\",\"name\":\"_\",\"description\":\"@_\"},{\"id\":\"user-1752543513\",\"type\":\"user\",\"user\":\"1752543513\",\"url\":\"https://weibo.com/turingbooks\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.1.177.177.180/6875b119jw1eaygru1s65j2050050t8o.jpg?KID=imgbed,tva&Expires=1615217639&ssig=J4c35eXjvT\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2426637320\",\"type\":\"user\",\"user\":\"2426637320\",\"url\":\"https://weibo.com/u/2426637320\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.180/90a38c08jw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1615217639&ssig=kFv1sd3TPi\",\"name\":\"XuanStudio\",\"description\":\"@XuanStudio\"},{\"id\":\"user-2718604160\",\"type\":\"user\",\"user\":\"2718604160\",\"url\":\"https://weibo.com/u/2718604160\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1024.1024.180/a20a9b80ly8gdisb9934cj20sg0sgq6j.jpg?KID=imgbed,tva&Expires=1615217639&ssig=nkGY46ziz2\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2796627290\",\"type\":\"user\",\"user\":\"2796627290\",\"url\":\"https://weibo.com/208181178\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.512.512.180/0033gmvMly8gidrv8rd6nj60e80e8aag02.jpg?KID=imgbed,tva&Expires=1615217639&ssig=ogATg6Xtlb\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1663148275\",\"type\":\"user\",\"user\":\"1663148275\",\"url\":\"https://weibo.com/cctvpinglun\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.42.117.634.634.180/6321a0f3ly1g4x2palamhj20m80m879e.jpg?KID=imgbed,tva&Expires=1615217639&ssig=4CEOlTgHl%2B\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2308331031\",\"type\":\"user\",\"user\":\"2308331031\",\"url\":\"https://weibo.com/maomao0416\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.996.996.180/89965617jw8fcygqs2rqcj20ro0rpacq.jpg?KID=imgbed,tva&Expires=1615217639&ssig=w87qF7QWjg\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1644225642\",\"type\":\"user\",\"user\":\"1644225642\",\"url\":\"https://weibo.com/geochannel\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.6.3.242.242.180/001Nh0cqly8gm3e4eo8e5j606y06y0sr02.jpg?KID=imgbed,tva&Expires=1615217639&ssig=VMXCa2LtJ%2F\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1710449573\",\"type\":\"user\",\"user\":\"1710449573\",\"url\":\"https://weibo.com/doublekill\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.224.200.292.292.180/65f363a5ly8gdimu7o0udj20r20hre81.jpg?KID=imgbed,tva&Expires=1615217639&ssig=cbpYIt7WHT\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1721030997\",\"type\":\"user\",\"user\":\"1721030997\",\"url\":\"https://weibo.com/163music\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.180.180.180/6694d955ly8gdivcjdq3cj20500503yc.jpg?KID=imgbed,tva&Expires=1615217639&ssig=xed5GueDFJ\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1671959152\",\"type\":\"user\",\"user\":\"1671959152\",\"url\":\"https://weibo.com/hawkao\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.512.512.180/63a81270ly8fqz93ik0wtj20e80e8mxp.jpg?KID=imgbed,tva&Expires=1615217639&ssig=7z7WpIoy8u\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2432930125\",\"type\":\"user\",\"user\":\"2432930125\",\"url\":\"https://weibo.com/beatstage\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.180/9103914djw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1615217639&ssig=yusvPOYERZ\",\"name\":\"BeatStage\",\"description\":\"@BeatStage\"},{\"id\":\"user-2787800541\",\"type\":\"user\",\"user\":\"2787800541\",\"url\":\"https://weibo.com/masaharufukuyama\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.650.650.180/0032FkgRly8gna93ctt58j60i20i2wkf02.jpg?KID=imgbed,tva&Expires=1615217639&ssig=hYD%2Bl4tZgX\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1228486722\",\"type\":\"user\",\"user\":\"1228486722\",\"url\":\"https://weibo.com/wangluodan\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.512.512.180/49393842jw8ehsdsusnlqj20e80e8mxq.jpg?KID=imgbed,tva&Expires=1615217639&ssig=8Q50FDJguV\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1750157883\",\"type\":\"user\",\"user\":\"1750157883\",\"url\":\"https://weibo.com/u/1750157883\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.500.500.180/001Uru0Xly8gnu8z4qeyoj60dw0dwn5a02.jpg?KID=imgbed,tva&Expires=1615217639&ssig=PudgfzXKLX\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1744188571\",\"type\":\"user\",\"user\":\"1744188571\",\"url\":\"https://weibo.com/u/1744188571\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.180/001U2r7Jly8gk5fjij0cgj60e80e8dga02.jpg?KID=imgbed,tva&Expires=1615217639&ssig=x7zn5RgrJC\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1217261134\",\"type\":\"user\",\"user\":\"1217261134\",\"url\":\"https://weibo.com/qijinnian105\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.180/488dee4ejw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1615217639&ssig=9dEfXptutW\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1299532580\",\"type\":\"user\",\"user\":\"1299532580\",\"url\":\"https://weibo.com/zhudeyongblog\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.180/4d754b24ly8fzfsy4vqxmj20u00u0wfw.jpg?KID=imgbed,tva&Expires=1615217639&ssig=5UaegKVnr4\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1237869662\",\"type\":\"user\",\"user\":\"1237869662\",\"url\":\"https://weibo.com/npss\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.512.512.180/49c8645ejw8ej7q92t8ruj20e80e8q3x.jpg?KID=imgbed,tva&Expires=1615217639&ssig=zntHnRBxNL\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1266321801\",\"type\":\"user\",\"user\":\"1266321801\",\"url\":\"https://weibo.com/yaochen\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.180/001nHm9bly8gmxpxotgezj60u00u0gno02.jpg?KID=imgbed,tva&Expires=1615217639&ssig=O52xTcewof\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1686532492\",\"type\":\"user\",\"user\":\"1686532492\",\"url\":\"https://weibo.com/sabeining\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.27.320.320.180/6486718cjw8eb3mbhf2kij208w0aemy8.jpg?KID=imgbed,tva&Expires=1615217644&ssig=LT186nDMJN\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1362607654\",\"type\":\"user\",\"user\":\"1362607654\",\"url\":\"https://weibo.com/huangjianxiang\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.180/001udmuOly8glagktohzqj60u00u0ta102.jpg?KID=imgbed,tva&Expires=1615217644&ssig=1xmPENEFWp\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1671342103\",\"type\":\"user\",\"user\":\"1671342103\",\"url\":\"https://weibo.com/zhangquanling\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.180/639ea817ly8gbq9g5dcb7j20u00u0wgq.jpg?KID=imgbed,tva&Expires=1615217644&ssig=GegkbPpRlB\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1282005885\",\"type\":\"user\",\"user\":\"1282005885\",\"url\":\"https://weibo.com/caikangyong\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.180/001oLaihly8gjvyiskd7ej60u00u0n0402.jpg?KID=imgbed,tva&Expires=1615217644&ssig=jxspQ8%2FIpi\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1644492510\",\"type\":\"user\",\"user\":\"1644492510\",\"url\":\"https://weibo.com/jsbcmf\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1068.1068.180/001Ni7CKly8gn0dzivpyyj60to0tp0wj02.jpg?KID=imgbed,tva&Expires=1615217644&ssig=oiYXpbj%2FJN\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1704116960\",\"type\":\"user\",\"user\":\"1704116960\",\"url\":\"https://weibo.com/dees\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.8.496.496.180/6592c2e0ly8fhbk7rbw3lj20ds0e874p.jpg?KID=imgbed,tva&Expires=1615217644&ssig=PstuQB64lP\",\"name\":\"S\",\"description\":\"@S\"},{\"id\":\"user-2561277565\",\"type\":\"user\",\"user\":\"2561277565\",\"url\":\"https://weibo.com/aibizhi\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.179.179.180/98a9fe7djw1e6s6ubk6z0j20500503yl.jpg?KID=imgbed,tva&Expires=1615217644&ssig=ks2JDlej8m\",\"name\":\"HD\",\"description\":\"@HD\"},{\"id\":\"user-2004287405\",\"type\":\"user\",\"user\":\"2004287405\",\"url\":\"https://weibo.com/58357\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.13.52.426.426.180/7776ffadly8gdl0mvwkfaj20dw0dwq31.jpg?KID=imgbed,tva&Expires=1615217644&ssig=5%2B%2B8jGFJN2\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1195230310\",\"type\":\"user\",\"user\":\"1195230310\",\"url\":\"https://weibo.com/hejiong\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.1242.1242.180/473dc466jw8eu6bjj0bp1j20yi0yi0z6.jpg?KID=imgbed,tva&Expires=1615217644&ssig=k7GrJjrgJ5\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1191258123\",\"type\":\"user\",\"user\":\"1191258123\",\"url\":\"https://weibo.com/hanhan\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.1242.1242.180/4701280bjw8eumhllkj3jj20yi0yiq75.jpg?KID=imgbed,tva&Expires=1615217644&ssig=6OBcPlg8kR\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1188552450\",\"type\":\"user\",\"user\":\"1188552450\",\"url\":\"https://weibo.com/guojingming\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.180/46d7df02ly8gdivkh8j1fj20e80e8wf1.jpg?KID=imgbed,tva&Expires=1615217644&ssig=zhpAZesxEJ\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1197161814\",\"type\":\"user\",\"user\":\"1197161814\",\"url\":\"https://weibo.com/kaifulee\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.5.0.739.739.180/475b3d56ly8fma9ef0hdgj20ku0kjaaz.jpg?KID=imgbed,tva&Expires=1615217644&ssig=bV6BtrFcPY\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1876912393\",\"type\":\"user\",\"user\":\"1876912393\",\"url\":\"https://weibo.com/u/1876912393\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.640.640.180/6fdf6909jw8eo3g8p8zn7j20hs0hsgmm.jpg?KID=imgbed,tva&Expires=1615217644&ssig=9Hf8%2FsBiOF\",\"name\":\"--\",\"description\":\"@--\"},{\"id\":\"user-2266812804\",\"type\":\"user\",\"user\":\"2266812804\",\"url\":\"https://weibo.com/u/2266812804\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.127.127.180/871cd184gy1fgnjr7cz09j203k03kmx4.jpg?KID=imgbed,tva&Expires=1615217644&ssig=8IL83JhHGG\",\"name\":\"XpeaceH\",\"description\":\"@XpeaceH\"},{\"id\":\"user-2585971834\",\"type\":\"user\",\"user\":\"2585971834\",\"url\":\"https://weibo.com/u/2585971834\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.695.695.180/9a22cc7aly1fw2vbkjhrsj20jb0jbwgp.jpg?KID=imgbed,tva&Expires=1615217644&ssig=8vzR%2FsI4SB\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2079776363\",\"type\":\"user\",\"user\":\"2079776363\",\"url\":\"https://weibo.com/lyfgaga\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.512.512.180/7bf6de6bly8gf867qb8flj20e80e8gmj.jpg?KID=imgbed,tva&Expires=1615217644&ssig=1gcYrb878e\",\"name\":\"_\",\"description\":\"@_\"},{\"id\":\"user-1938139103\",\"type\":\"user\",\"user\":\"1938139103\",\"url\":\"https://weibo.com/songnien\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.512.512.180/7385a7dfly8g17i57l0vvj20e80e8aai.jpg?KID=imgbed,tva&Expires=1615217650&ssig=k0VrVbg4EU\",\"name\":\"-\",\"description\":\"@-\"}]},\"lastChange\":{\"timestamp\":1615206850171,\"add\":[],\"lost\":[{\"id\":\"user-1644461042\",\"type\":\"user\",\"user\":\"1644461042\",\"url\":\"https://weibo.com/guangxianliuyan\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.180/62047bf2ly8gduibljgqgj20e80e8jrt.jpg?KID=imgbed,tva&Expires=1614715813&ssig=HsiWXTi2%2Fq\",\"name\":\"\",\"description\":\"@\"}],\"rename\":[]}}","local::user1897686351Hide":"s{\"hideList\":[]}","local::user3655689037Config":"s{\"filter_follow_check\":false,\"filter_follow_check.frequency\":259200000,\"uncheck_follow_presenter\":true,\"show_article_without_follow\":true,\"filter_homepage_newest_feeds\":false,\"filter_homepage_single_group\":false,\"filter_homepage_multi_group\":false,\"filter_homepage_auto_load\":false,\"filter_homepage_desktop_notify\":false,\"filter_profile_show_all\":false,\"filter_manually_hide\":false,\"pause_filter\":false,\"filter_original_discover\":false,\"filter_original_follower\":false,\"filter_my_feed\":true,\"filter_my_original\":false,\"filter_mention_me\":false,\"filter_ad_feed\":false,\"filter_fans_top\":false,\"filter_weibo_product\":false,\"filter_tb_tm_feed\":false,\"filter_weibo_pay\":false,\"filter_user_like\":false,\"filter_fake_weibo\":false,\"filter_deleted_forward\":false,\"filter_comment_and_forward\":false,\"filter_vote\":false,\"filter_red_pack\":false,\"filter_image_tag\":false,\"filter_koi_forward\":false,\"filter_app_item\":false,\"filter_wenda\":false,\"filter_wenwo_dr\":false,\"filter_yizhibo\":false,\"filter_paid\":false,\"filter_multiple_topics_feed\":false,\"filter_Place\":false,\"filter_Movie\":false,\"filter_Book\":false,\"filter_Topic\":false,\"filter_Music\":false,\"filter_Stock\":false,\"flooding_author\":false,\"flooding_forward\":false,\"comment_layout_by_time\":false,\"comment_layout_hide_sub\":false,\"filter_comment_show_my\":false,\"filter_comment_face_count\":false,\"filter_comment_face_type\":false,\"filter_comment_wo_content\":false,\"filter_comment_with_forward\":false,\"clean_icons_level\":false,\"clean_icons_member\":false,\"clean_icons_approve\":false,\"clean_icons_approve_co\":false,\"clean_icons_approve_dead\":false,\"clean_icons_bigfun\":false,\"clean_icons_club\":false,\"clean_icons_v_girl\":false,\"clean_icons_supervisor\":false,\"clean_icons_taobao\":false,\"clean_icons_cheng\":false,\"clean_icons_gongyi\":false,\"clean_icons_zongyika\":false,\"clean_icons_others\":false,\"clean_follow_single\":false,\"clean_follow_at_me\":false,\"clean_follow_discover\":false,\"clean_follow_whisper\":false,\"clean_follow_video\":false,\"clean_follow_recommend\":false,\"clean_nav_logo_img\":false,\"clean_nav_main\":false,\"clean_nav_tv\":false,\"clean_nav_hot\":false,\"clean_nav_game\":false,\"clean_nav_hot_search\":false,\"clean_nav_notice_new\":false,\"clean_nav_new\":false,\"clean_left_level\":false,\"clean_left_home\":false,\"clean_left_fav\":false,\"clean_left_like\":false,\"clean_left_hot\":false,\"clean_left_tv\":false,\"clean_left_new_feed\":false,\"clean_left_friends\":false,\"clean_left_group_to_me\":false,\"clean_left_special\":false,\"clean_left_whisper\":false,\"clean_left_v_plus\":false,\"clean_left_new\":false,\"clean_left_news\":false,\"clean_left_count\":false,\"clean_middle_recommended_topic\":false,\"clean_middle_feed_recommend\":false,\"clean_middle_member_tip\":false,\"clean_right_info\":false,\"clean_right_ranks\":false,\"clean_right_hot_topic\":false,\"clean_right_interest\":false,\"clean_right_member\":false,\"clean_right_groups\":false,\"clean_right_recom_group_user\":false,\"clean_right_hongbao_rank\":false,\"clean_right_att_feed\":false,\"clean_right_notice\":false,\"clean_feed_recommend\":false,\"clean_feed_feed_outer_tip\":false,\"clean_feed_feed_tip\":false,\"clean_feed_group_tip\":false,\"clean_feed_vip_background\":false,\"clean_feed_last_pic\":false,\"clean_feed_pic_tag\":false,\"clean_feed_son_title\":false,\"clean_feed_card\":false,\"clean_feed_article_pay\":false,\"clean_feed_tag\":false,\"clean_feed_related_link\":false,\"clean_feed_source\":false,\"clean_feed_pop\":false,\"clean_feed_like\":false,\"clean_feed_like_comment\":false,\"clean_feed_like_attitude\":false,\"clean_feed_forward\":false,\"clean_feed_favorite\":false,\"clean_feed_promote_other\":false,\"clean_feed_report\":false,\"clean_feed_use_card_background\":false,\"clean_profile_move_things\":false,\"clean_profile_cover\":false,\"clean_profile_bg_img\":false,\"clean_profile_badge_icon\":false,\"clean_profile_verify\":false,\"clean_profile_edit_person_info\":false,\"clean_profile_stats\":false,\"clean_profile_my_data\":false,\"clean_profile_suggest_user\":false,\"clean_profile_group\":false,\"clean_profile_relation\":false,\"clean_profile_album\":false,\"clean_profile_hot_topic\":false,\"clean_profile_hot_weibo\":false,\"clean_profile_recommend_feed\":false,\"clean_profile_user_list\":false,\"clean_profile_hongbao\":false,\"clean_profile_wenwo_dr\":false,\"clean_profile_timeline\":false,\"clean_message_help\":false,\"clean_message_feedback\":false,\"clean_other_ads\":false,\"clean_other_music\":false,\"clean_other_template\":false,\"clean_other_home_tip\":false,\"clean_other_footer\":false,\"clean_other_im\":false,\"clean_other_im_news\":false,\"clean_other_back_top\":false,\"clean_other_tip\":false,\"clean_other_related_feeds\":false,\"clean_other_related_video\":false,\"clean_other_related_article\":false,\"clean_other_send_weibo\":false,\"layout_nav_auto_hide\":false,\"layout_nav_classical\":false,\"layout_nav_hide_name\":false,\"layout_left_messages\":false,\"layout_side_merge\":false,\"layout_side_position\":false,\"layout_side_show_all_groups\":false,\"layout_left_move\":true,\"layout_right_move\":true,\"layout_other_move\":true,\"chat_page_disable_unload_prompt\":false,\"font_family\":false,\"layout_avatar_shape\":false,\"layout_fast_face\":false,\"layout_locale_timezone\":false,\"feed_absolute_time\":false,\"layout_theme_apply\":false,\"layout_nav_dark\":false,\"layout_theme_color\":false,\"custom_css\":true,\"custom_css.css\":\"\",\"feed_no_space\":false,\"feed_source_at_bottom\":false,\"feed_author_content_nowrap\":false,\"feed_small_image\":false,\"feed_increase_width\":false,\"feed_button_order\":false,\"feed_button_order_comment\":false,\"feed_font_size\":false,\"feed_long_expand\":false,\"feed_content_line_break\":false,\"feed_link_use_url\":false,\"feed_unicode_emoji\":false,\"show_vote_result\":false,\"feed_no_custom_source\":false,\"view_edit_info\":false,\"view_article_inline\":false,\"feed_view_original\":false,\"feed_view_original.open\":\"page\",\"feed_download_image\":false,\"feed_download_image.name\":\"index\",\"image_preview_all\":false,\"feed_no_animated_image\":false,\"feed_built_in_video_player\":false,\"feed_disable_tag_dialog\":false,\"feed_low_reading_warn\":false,\"feed_only_mode\":false,\"script_import_export\":false,\"script_update_whatsnew\":true,\"script_update_whatsnew.last\":82,\"script_enable_debug\":false,\"script_debug_regex\":false,\"hide_hot_topic_large_read\":false,\"hide_hot_topic_large_read.quota\":20,\"filter_fast_forward\":false,\"clean_follow_fast_forward\":false,\"link_with_face\":false,\"link_with_face.clean\":false,\"link_with_face.link\":false,\"feed_long_expand.count\":200,\"feed_long_expand.br\":30,\"script_update_whatsnew.lastWeibo\":6,\"filter_weibo_product_like\":false,\"nav_use_link\":false,\"side_left_use_link\":false,\"feed_render\":true,\"feed_link_new_tab.author\":true,\"feed_link_new_tab.mention\":true,\"feed_link_new_tab.topic\":true,\"feed_link_new_tab.picture\":true,\"feed_link_new_tab.detail\":true,\"feed_link_new_tab.comments\":true,\"feed_link_new_tab\":false,\"filter_comment_text_show.items\":[],\"filter_comment_regex_show.items\":[],\"filter_comment_name_show.items\":[],\"filter_comment_text_hide.items\":[],\"filter_comment_regex_hide.items\":[],\"filter_comment_name_hide.items\":[],\"filter_content_text_show.items\":[],\"filter_content_regex_show.items\":[],\"filter_author_id_show.items\":[],\"filter_original_id_show.items\":[],\"filter_mention_name_show.items\":[],\"filter_topic_text_show.items\":[],\"filter_source_text_show.items\":[],\"filter_content_text_hide.items\":[],\"filter_content_regex_hide.items\":[],\"filter_original_id_hide.items\":[],\"filter_mention_name_hide.items\":[],\"filter_topic_text_hide.items\":[],\"filter_source_text_hide.items\":[],\"filter_content_text_fold.items\":[],\"filter_content_regex_fold.items\":[],\"filter_original_id_fold.items\":[],\"filter_mention_name_fold.items\":[],\"filter_topic_text_fold.items\":[],\"filter_source_text_fold.items\":[],\"filter_author_forward_id_show.items\":[],\"filter_author_forward_id_hide.items\":[],\"filter_author_forward_id_fold.items\":[]}","local::user3655689037Follow":"s{\"fetchData\":{\"weiboVersion\":6},\"lastList\":null,\"lastChange\":null}","local::user3655689037Hide":"s{\"hideList\":[]}","sync::globalConfig":"s{}","sync::user1897686351Config":"s{\"script_update_whatsnew.last\":67,\"clean_follow_recommend\":false,\"clean_middle_member_tip\":true,\"clean_middle_feed_recommend\":true,\"clean_middle_recommended_topic\":true,\"clean_nav_tv\":true,\"clean_nav_game\":true,\"clean_nav_hot_search\":true,\"clean_nav_new\":true,\"clean_right_ranks\":true,\"clean_right_recom_group_user\":true,\"clean_right_hongbao_rank\":true,\"clean_right_member\":true,\"clean_feed_recommend\":true,\"clean_feed_promote_other\":true,\"clean_other_ads\":true,\"clean_other_music\":true,\"clean_other_related_video\":false,\"clean_other_related_article\":true,\"clean_other_im_news\":true,\"clean_icons_taobao\":false,\"clean_right_notice\":true,\"filter_my_original\":true,\"filter_mention_me\":true,\"filter_ad_feed\":true,\"layout_nav_hide_name\":true,\"layout_nav_hide_name.act\":\"hidden\",\"layout_side_merge\":true,\"layout_right_move\":false,\"font_family.chinese\":\"\",\"font_family\":false,\"layout_avatar_shape\":true,\"layout_avatar_shape.shape\":\"circle\",\"feed_author_content_nowrap\":false,\"filter_follow_check\":true,\"layout_side_position\":true,\"filter_profile_show_all\":true,\"filter_homepage_auto_load\":false,\"clean_icons_others\":false,\"clean_right_att_feed\":true,\"clean_left_tv\":true,\"clean_left_hot\":true,\"clean_right_hot_topic\":true,\"layout_nav_dark\":false,\"layout_theme_color\":true,\"filter_fans_top\":true,\"filter_user_like\":false,\"filter_paid\":true,\"layout_nav_auto_hide\":false,\"layout_theme_color.transparency2\":0,\"layout_theme_color.transparency1\":100,\"layout_theme_apply.skin\":\"skinvip711\",\"layout_theme_apply\":false,\"filter_homepage_newest_feeds\":true,\"filter_homepage_single_group\":false,\"filter_homepage_multi_group\":false,\"view_edit_info\":true,\"layout_left_messages\":true,\"layout_left_messages.like\":true,\"layout_left_messages.dm\":true,\"layout_side_show_all_groups\":true,\"custom_css.css\":\"body, .S_page {\\nbackground-color:#ffffff !important;\\n}\\n#skin_cover_s {\\nbackground-image: none !important;\\nbackground-color:grey;\\n}\\n#v6_pl_content_setskin > div > a {\\ndisplay: none;\\n}\\n.WB_miniblog {\\nbackground: none !important;\\n}\",\"filter_follow_check.frequency\":259200000,\"uncheck_follow_presenter\":true,\"show_article_without_follow\":true,\"filter_homepage_desktop_notify\":false,\"filter_manually_hide\":false,\"pause_filter\":false,\"filter_original_discover\":false,\"filter_original_follower\":false,\"filter_my_feed\":true,\"filter_weibo_product\":false,\"filter_tb_tm_feed\":false,\"filter_weibo_pay\":false,\"filter_fake_weibo\":false,\"filter_deleted_forward\":false,\"filter_comment_and_forward\":false,\"filter_vote\":false,\"filter_red_pack\":false,\"filter_image_tag\":false,\"filter_koi_forward\":false,\"filter_app_item\":false,\"filter_wenda\":false,\"filter_wenwo_dr\":false,\"filter_yizhibo\":false,\"filter_multiple_topics_feed\":false,\"filter_Place\":false,\"filter_Movie\":false,\"filter_Book\":false,\"filter_Topic\":false,\"filter_Music\":false,\"filter_Stock\":false,\"flooding_author\":false,\"flooding_forward\":false,\"comment_layout_by_time\":false,\"comment_layout_hide_sub\":false,\"filter_comment_show_my\":false,\"filter_comment_face_count\":false,\"filter_comment_face_type\":false,\"filter_comment_wo_content\":false,\"filter_comment_with_forward\":false,\"clean_icons_level\":false,\"clean_icons_member\":false,\"clean_icons_approve\":false,\"clean_icons_approve_co\":false,\"clean_icons_approve_dead\":false,\"clean_icons_bigfun\":false,\"clean_icons_club\":false,\"clean_icons_v_girl\":false,\"clean_icons_supervisor\":false,\"clean_icons_cheng\":false,\"clean_icons_gongyi\":false,\"clean_icons_zongyika\":false,\"clean_follow_single\":false,\"clean_follow_at_me\":false,\"clean_follow_discover\":false,\"clean_follow_whisper\":false,\"clean_follow_video\":false,\"clean_nav_logo_img\":false,\"clean_nav_main\":false,\"clean_nav_hot\":false,\"clean_nav_notice_new\":false,\"clean_left_level\":false,\"clean_left_home\":false,\"clean_left_fav\":false,\"clean_left_like\":false,\"clean_left_new_feed\":false,\"clean_left_friends\":false,\"clean_left_group_to_me\":false,\"clean_left_special\":false,\"clean_left_whisper\":false,\"clean_left_v_plus\":false,\"clean_left_new\":false,\"clean_left_news\":false,\"clean_left_count\":false,\"clean_right_info\":false,\"clean_right_interest\":false,\"clean_right_groups\":false,\"clean_feed_feed_outer_tip\":false,\"clean_feed_feed_tip\":false,\"clean_feed_group_tip\":false,\"clean_feed_vip_background\":false,\"clean_feed_last_pic\":false,\"clean_feed_pic_tag\":false,\"clean_feed_son_title\":false,\"clean_feed_card\":false,\"clean_feed_article_pay\":false,\"clean_feed_tag\":false,\"clean_feed_related_link\":false,\"clean_feed_source\":false,\"clean_feed_pop\":false,\"clean_feed_like\":false,\"clean_feed_like_comment\":false,\"clean_feed_like_attitude\":false,\"clean_feed_forward\":false,\"clean_feed_favorite\":false,\"clean_feed_report\":false,\"clean_feed_use_card_background\":false,\"clean_profile_move_things\":false,\"clean_profile_cover\":false,\"clean_profile_bg_img\":false,\"clean_profile_badge_icon\":false,\"clean_profile_verify\":false,\"clean_profile_edit_person_info\":false,\"clean_profile_stats\":false,\"clean_profile_my_data\":false,\"clean_profile_suggest_user\":false,\"clean_profile_group\":false,\"clean_profile_relation\":false,\"clean_profile_album\":false,\"clean_profile_hot_topic\":false,\"clean_profile_hot_weibo\":false,\"clean_profile_recommend_feed\":false,\"clean_profile_user_list\":false,\"clean_profile_hongbao\":false,\"clean_profile_wenwo_dr\":false,\"clean_profile_timeline\":false,\"clean_message_help\":false,\"clean_message_feedback\":false,\"clean_other_template\":false,\"clean_other_home_tip\":false,\"clean_other_footer\":false,\"clean_other_im\":false,\"clean_other_back_top\":false,\"clean_other_tip\":false,\"clean_other_related_feeds\":false,\"clean_other_send_weibo\":false,\"layout_nav_classical\":false,\"layout_left_messages.msgbox\":false,\"layout_left_messages.group\":false,\"layout_left_messages.dmsub\":false,\"layout_side_merge.side\":\"left\",\"layout_side_position.side\":\"left\",\"layout_left_move\":true,\"layout_other_move\":true,\"chat_page_disable_unload_prompt\":false,\"layout_fast_face\":false,\"layout_locale_timezone\":false,\"feed_absolute_time\":true,\"layout_theme_color.color1\":\"#f6f6f6\",\"layout_theme_color.color2\":\"#ffffff\",\"layout_theme_color.color3\":\"#ffffff\",\"layout_theme_color.transparency3\":30,\"custom_css\":true,\"feed_no_space\":false,\"feed_source_at_bottom\":false,\"feed_small_image\":false,\"feed_increase_width\":false,\"feed_button_order\":false,\"feed_button_order_comment\":false,\"feed_font_size\":false,\"feed_long_expand\":false,\"feed_content_line_break\":false,\"feed_link_use_url\":false,\"feed_unicode_emoji\":false,\"show_vote_result\":false,\"feed_no_custom_source\":false,\"view_article_inline\":false,\"feed_view_original\":false,\"feed_view_original.open\":\"page\",\"feed_download_image\":false,\"feed_download_image.name\":\"index\",\"image_preview_all\":false,\"feed_no_animated_image\":false,\"feed_built_in_video_player\":false,\"feed_disable_tag_dialog\":false,\"feed_low_reading_warn\":false,\"feed_only_mode\":false,\"script_import_export\":false,\"script_update_whatsnew\":true,\"feed_built_in_video_player.volume\":100,\"feed_built_in_video_player.memorize\":false,\"feed_built_in_video_player.quality\":\"auto\",\"script_enable_debug\":false,\"script_debug_regex\":false,\"filter_content_text_show.items\":[],\"filter_content_regex_show.items\":[],\"filter_author_id_show.items\":[],\"filter_author_forward_id_show.items\":[],\"filter_original_id_show.items\":[],\"filter_mention_name_show.items\":[],\"filter_topic_text_show.items\":[],\"filter_source_text_show.items\":[],\"filter_content_text_hide.items\":[],\"filter_content_regex_hide.items\":[],\"filter_author_id_hide.items\":[],\"filter_author_forward_id_hide.items\":[],\"filter_original_id_hide.items\":[],\"filter_mention_name_hide.items\":[],\"filter_topic_text_hide.items\":[],\"filter_source_text_hide.items\":[],\"filter_content_text_fold.items\":[],\"filter_content_regex_fold.items\":[],\"filter_author_id_fold.items\":[],\"filter_author_forward_id_fold.items\":[],\"filter_original_id_fold.items\":[],\"filter_mention_name_fold.items\":[],\"filter_topic_text_fold.items\":[],\"filter_source_text_fold.items\":[],\"filter_comment_text_show.items\":[],\"filter_comment_regex_show.items\":[],\"filter_comment_name_show.items\":[],\"filter_comment_text_hide.items\":[],\"filter_comment_regex_hide.items\":[],\"filter_comment_name_hide.items\":[],\"hide_hot_topic_large_read\":false,\"hide_hot_topic_large_read.quota\":20,\"filter_fast_forward\":false,\"clean_follow_fast_forward\":false,\"link_with_face\":false,\"link_with_face.clean\":false,\"link_with_face.link\":false}","sync::user1897686351Follow":"s{\"fetchData\":{\"timestamp\":1594455734463},\"lastList\":{\"timestamp\":1594455734462,\"list\":[{\"id\":\"user-5270289369\",\"type\":\"user\",\"user\":\"5270289369\",\"url\":\"https://weibo.com/u/5270289369\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.175.175.50/005KFB1fly8gafz2ube5bj304v04vdfo.jpg?KID=imgbed,tva&Expires=1594466470&ssig=1Yii68F%2FPg\",\"name\":\"ForestApp\",\"description\":\"@ForestApp\"},{\"id\":\"user-7403631551\",\"type\":\"user\",\"user\":\"7403631551\",\"url\":\"https://weibo.com/u/7403631551\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1010.1010.50/00852SM7ly8gdwu5s1fvcj30s20s240i.jpg?KID=imgbed,tva&Expires=1594466470&ssig=o3vjGSxELo\",\"name\":\"VALORANT\",\"description\":\"@VALORANT\"},{\"id\":\"user-5379607996\",\"type\":\"user\",\"user\":\"5379607996\",\"url\":\"https://weibo.com/u/5379607996\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.50/005S4hMUly8gfhfxjn4z0j30u00u0jtt.jpg?KID=imgbed,tva&Expires=1594466470&ssig=5WtKjGItJi\",\"name\":\"VALORANT_China\",\"description\":\"@VALORANT_China\"},{\"id\":\"user-7409454275\",\"type\":\"user\",\"user\":\"7409454275\",\"url\":\"https://weibo.com/u/7409454275\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.888.888.50/0085rjx1ly8gdilxj3g68j30oo0oomyj.jpg?KID=imgbed,tva&Expires=1594466470&ssig=19vwiFqcpy\",\"name\":\"VALORANT\",\"description\":\"@VALORANT\"},{\"id\":\"user-2267155115\",\"type\":\"user\",\"user\":\"2267155115\",\"url\":\"https://weibo.com/u/2267155115\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.512.512.50/87220aably8g2cnkh4c5wj20e80e8aac.jpg?KID=imgbed,tva&Expires=1594466470&ssig=qKRmnlPcFL\",\"name\":\"Larry_Dev\",\"description\":\"@Larry_Dev\"},{\"id\":\"user-6448460373\",\"type\":\"user\",\"user\":\"6448460373\",\"url\":\"https://weibo.com/u/6448460373\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.50/0072p57nly8gdk095a3tej30u00u0mxv.jpg?KID=imgbed,tva&Expires=1594466470&ssig=iTyH7nNHSh\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5396590503\",\"type\":\"user\",\"user\":\"5396590503\",\"url\":\"https://weibo.com/u/5396590503\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.512.512.50/005TdxIjly8g9ahnobw51j30e80e8wf4.jpg?KID=imgbed,tva&Expires=1594466470&ssig=1stQVy6yrM\",\"name\":\"lqscrisp\",\"description\":\"@lqscrisp\"},{\"id\":\"user-6907244758\",\"type\":\"user\",\"user\":\"6907244758\",\"url\":\"https://weibo.com/u/6907244758\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.50/007xs5Twly8gfpynknzm4j30u00u0wgx.jpg?KID=imgbed,tva&Expires=1594466470&ssig=b5t3BbfMTJ\",\"name\":\"FPXTian9\",\"description\":\"@FPXTian9\"},{\"id\":\"user-1890196401\",\"type\":\"user\",\"user\":\"1890196401\",\"url\":\"https://weibo.com/u/1890196401\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.50/70aa1bb1ly8gecvweequmj20u00u0div.jpg?KID=imgbed,tva&Expires=1594466470&ssig=DfUUA0XK8x\",\"name\":\"2\",\"description\":\"@2\"},{\"id\":\"user-5903137559\",\"type\":\"user\",\"user\":\"5903137559\",\"url\":\"https://weibo.com/u/5903137559\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1002.1002.50/006ruXK7ly8gfqtogyyt2j30ru0ruq57.jpg?KID=imgbed,tva&Expires=1594466470&ssig=264SNW%2FbwV\",\"name\":\"-knight\",\"description\":\"@-knight\"},{\"id\":\"user-6087949803\",\"type\":\"user\",\"user\":\"6087949803\",\"url\":\"https://weibo.com/u/6087949803\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.50/006E0pQLly8fm4sb0807jj30e80e8dhk.jpg?KID=imgbed,tva&Expires=1594466470&ssig=hNuNP7argB\",\"name\":\"PriceTag\",\"description\":\"@PriceTag\"},{\"id\":\"user-1774390367\",\"type\":\"user\",\"user\":\"1774390367\",\"url\":\"https://weibo.com/u/1774390367\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.179.179.50/69c30c5fjw1f4o1v79a4mj20500503yn.jpg?KID=imgbed,tva&Expires=1594466470&ssig=mTvIMcOmoB\",\"name\":\"Naituw\",\"description\":\"@Naituw\"},{\"id\":\"user-3980096715\",\"type\":\"user\",\"user\":\"3980096715\",\"url\":\"https://weibo.com/u/3980096715\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.828.828.50/ed3b74cbly8gdntdxdy8kj20n00n0wf7.jpg?KID=imgbed,tva&Expires=1594466470&ssig=RmQiVy60HI\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1044980795\",\"type\":\"user\",\"user\":\"1044980795\",\"url\":\"https://weibo.com/u/1044980795\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.180.180.50/3e49243bly8g7ujwp1de9j2050050dft.jpg?KID=imgbed,tva&Expires=1594466470&ssig=j5UaXl2as%2B\",\"name\":\"MediaStorm\",\"description\":\"@MediaStorm\"},{\"id\":\"user-1840419053\",\"type\":\"user\",\"user\":\"1840419053\",\"url\":\"https://weibo.com/u/1840419053\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.996.996.50/6db290edly8g3msloo8u9j20ro0rognk.jpg?KID=imgbed,tva&Expires=1594466470&ssig=tMdSPYd%2FPa\",\"name\":\"Leo\",\"description\":\"@Leo\"},{\"id\":\"topic-\",\"type\":\"topic\",\"topic\":\"\",\"url\":\"https://weibo.com/k/\",\"avatar\":\"https://wx4.sinaimg.cn/thumb180/a50b0fd1ly9g5vj378h14j2050050t8r.jpg\",\"name\":\"##\",\"description\":\"##\"},{\"id\":\"user-7335367665\",\"type\":\"user\",\"user\":\"7335367665\",\"url\":\"https://weibo.com/u/7335367665\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.238.0.1044.1044.50/0080qsdHly8g8uewf9yeaj31400u0x06.jpg?KID=imgbed,tva&Expires=1594466470&ssig=UutzPn1OfG\",\"name\":\"_RyuichiSakamoto\",\"description\":\"@_RyuichiSakamoto\"},{\"id\":\"user-1581166031\",\"type\":\"user\",\"user\":\"1581166031\",\"url\":\"https://weibo.com/u/1581166031\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.50/5e3eadcfjw1eaek0zh0arj2050050wem.jpg?KID=imgbed,tva&Expires=1594466470&ssig=2yPS1%2FWvdv\",\"name\":\"exe\",\"description\":\"@exe\"},{\"id\":\"user-1244419177\",\"type\":\"user\",\"user\":\"1244419177\",\"url\":\"https://weibo.com/u/1244419177\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.180.180.50/4a2c5469jw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1594466470&ssig=fV2CRDDKp7\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1263362863\",\"type\":\"user\",\"user\":\"1263362863\",\"url\":\"https://weibo.com/u/1263362863\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.180.180.50/4b4d632fjw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1594466470&ssig=hUjUN2AVTX\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1761511274\",\"type\":\"user\",\"user\":\"1761511274\",\"url\":\"https://weibo.com/u/1761511274\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.68.5.1274.1274.50/68fe876aly8fhrytk14ckj21kw11xwsw.jpg?KID=imgbed,tva&Expires=1594466470&ssig=2qfSCRP5EZ\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3423485724\",\"type\":\"user\",\"user\":\"3423485724\",\"url\":\"https://weibo.com/u/3423485724\",\"avatar\":\"https://tva4.sinaimg.cn/crop.24.0.1194.1194.50/cc0e3f1cjw8f5y135wb83j20yi0x6mzp.jpg?KID=imgbed,tva&Expires=1594466470&ssig=Ugv87EVjzD\",\"name\":\"coder\",\"description\":\"@coder\"},{\"id\":\"user-6293993963\",\"type\":\"user\",\"user\":\"6293993963\",\"url\":\"https://weibo.com/u/6293993963\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.21.974.974.50/006RWXlFly8ggjfuk4k78j30r20s8my1.jpg?KID=imgbed,tva&Expires=1594466470&ssig=ndyGrXCh%2FV\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2976620041\",\"type\":\"user\",\"user\":\"2976620041\",\"url\":\"https://weibo.com/u/2976620041\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.750.750.50/b16b9e09ly8fzbrncdsntj20ku0kut9z.jpg?KID=imgbed,tva&Expires=1594466470&ssig=R0umlRWAsr\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1237280853\",\"type\":\"user\",\"user\":\"1237280853\",\"url\":\"https://weibo.com/u/1237280853\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.223.223.50/49bf6855jw1f1t06vxewcj2068068q3b.jpg?KID=imgbed,tva&Expires=1594466470&ssig=iMFAhyqjiO\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1917318944\",\"type\":\"user\",\"user\":\"1917318944\",\"url\":\"https://weibo.com/u/1917318944\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.511.511.50/7247f720jw8esmg92i951j20e80e73ye.jpg?KID=imgbed,tva&Expires=1594466470&ssig=zAcceuAB7E\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5606690513\",\"type\":\"user\",\"user\":\"5606690513\",\"url\":\"https://weibo.com/u/5606690513\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.100.100.50/0067r6k9jw8eva3zbhhknj302s02sglh.jpg?KID=imgbed,tva&Expires=1594466470&ssig=tS4vBKcn0U\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1112829033\",\"type\":\"user\",\"user\":\"1112829033\",\"url\":\"https://weibo.com/u/1112829033\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.100.100.50/42546c69ly8fz2ulipvjrj202s02sjrq.jpg?KID=imgbed,tva&Expires=1594466470&ssig=xow0mhLCBB\",\"name\":\"vposy\",\"description\":\"@vposy\"},{\"id\":\"user-2145291155\",\"type\":\"user\",\"user\":\"2145291155\",\"url\":\"https://weibo.com/u/2145291155\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.50/7fde8b93ly1gdj58wai4hj20u00u0hdt.jpg?KID=imgbed,tva&Expires=1594466470&ssig=9B6x2htkXV\",\"name\":\"-\",\"description\":\"@-\"},{\"id\":\"user-1170999921\",\"type\":\"user\",\"user\":\"1170999921\",\"url\":\"https://weibo.com/u/1170999921\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.180.180.50/45cc0a71jw1eiellpvi0ij20500503yn.jpg?KID=imgbed,tva&Expires=1594466479&ssig=nRUOKkIton\",\"name\":\"Laruence\",\"description\":\"@Laruence\"},{\"id\":\"user-3319419782\",\"type\":\"user\",\"user\":\"3319419782\",\"url\":\"https://weibo.com/u/3319419782\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.996.996.50/c5da5386ly8gbqtgfri35j20ro0rotaj.jpg?KID=imgbed,tva&Expires=1594466479&ssig=lhpL8wuPAg\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-6543396571\",\"type\":\"user\",\"user\":\"6543396571\",\"url\":\"https://weibo.com/u/6543396571\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.144.144.50/0078Pqmnly8ftnb3iqnr0j3040040t8m.jpg?KID=imgbed,tva&Expires=1594466479&ssig=w5oOSWd1VO\",\"name\":\"App\",\"description\":\"@App\"},{\"id\":\"user-2320711045\",\"type\":\"user\",\"user\":\"2320711045\",\"url\":\"https://weibo.com/u/2320711045\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.829.829.50/8a533d85ly8gdgvsxq7ebj20n10n1dgu.jpg?KID=imgbed,tva&Expires=1594466479&ssig=oPGtMJDY9x\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"unknown-/p/23126100007566500878688257?from=myfollow_all\",\"type\":\"unknown\",\"url\":\"/p/23126100007566500878688257?from=myfollow_all\",\"avatar\":\"https://wx2.sinaimg.cn/crop.3.0.2208.1242/006BDhPQly1fz0tpmuiusj31ph0yigpx.jpg\",\"description\":\"\",\"name\":\"\"},{\"id\":\"user-1917884865\",\"type\":\"user\",\"user\":\"1917884865\",\"url\":\"https://weibo.com/u/1917884865\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.26.574.574.50/725099c1jw8fdd7kd9sr4j20h30m80ui.jpg?KID=imgbed,tva&Expires=1594466479&ssig=GcsxX%2FnI4%2F\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1072494141\",\"type\":\"user\",\"user\":\"1072494141\",\"url\":\"https://weibo.com/u/1072494141\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.50/3fecf63dly8ftkvl98cjdj20e80e8t93.jpg?KID=imgbed,tva&Expires=1594466479&ssig=NzlS0vHzb8\",\"name\":\"-Rango\",\"description\":\"@-Rango\"},{\"id\":\"user-3220313942\",\"type\":\"user\",\"user\":\"3220313942\",\"url\":\"https://weibo.com/u/3220313942\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.834.834.50/bff21756ly1g9val5m37tj20n60n6q36.jpg?KID=imgbed,tva&Expires=1594466479&ssig=K0CFfu1hyQ\",\"name\":\"JetBrains\",\"description\":\"@JetBrains\"},{\"id\":\"user-6299431693\",\"type\":\"user\",\"user\":\"6299431693\",\"url\":\"https://weibo.com/u/6299431693\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1024.1024.50/006SjLWZly8gdi6nifi10j30sg0sg7wh.jpg?KID=imgbed,tva&Expires=1594466479&ssig=g2FBU6k8i%2B\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1674067880\",\"type\":\"user\",\"user\":\"1674067880\",\"url\":\"https://weibo.com/u/1674067880\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.506.506.50/63c83fa8ly8g6op0aytsdj20e80e8wew.jpg?KID=imgbed,tva&Expires=1594466479&ssig=GISNO7FKzi\",\"name\":\"cbvivi\",\"description\":\"@cbvivi\"},{\"id\":\"user-1727524721\",\"type\":\"user\",\"user\":\"1727524721\",\"url\":\"https://weibo.com/u/1727524721\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.37.18.1045.1045.50/66f7ef71ly8fwmyvcj7afj20v40v4h7y.jpg?KID=imgbed,tva&Expires=1594466479&ssig=fONlLJZM78\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3517024237\",\"type\":\"user\",\"user\":\"3517024237\",\"url\":\"https://weibo.com/u/3517024237\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.165.186.738.738.50/d1a187edly8fs1ey4x336j20u00u0wiq.jpg?KID=imgbed,tva&Expires=1594466479&ssig=MO9OmJjffh\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2411691632\",\"type\":\"user\",\"user\":\"2411691632\",\"url\":\"https://weibo.com/u/2411691632\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.638.638.50/8fbf7e70gw1f643jqlsrdj20hs0hsgms.jpg?KID=imgbed,tva&Expires=1594466479&ssig=P%2FzXbIQaqA\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2031429505\",\"type\":\"user\",\"user\":\"2031429505\",\"url\":\"https://weibo.com/u/2031429505\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.2013.2013.50/79152781jw1emw4mndlluj21k11k1wwh.jpg?KID=imgbed,tva&Expires=1594466479&ssig=fO3G8h0k29\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5810397138\",\"type\":\"user\",\"user\":\"5810397138\",\"url\":\"https://weibo.com/u/5810397138\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.956.956.50/006ldPISjw8f0ggfsy2zvj30qo0zkn67.jpg?KID=imgbed,tva&Expires=1594466479&ssig=P%2FEiRNUuwi\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1914010467\",\"type\":\"user\",\"user\":\"1914010467\",\"url\":\"https://weibo.com/u/1914010467\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.1239.1239.50/72157b63jw8f6bxfg3yixj20yf0yf75t.jpg?KID=imgbed,tva&Expires=1594466479&ssig=BoR%2B4AqXRt\",\"name\":\"sspai\",\"description\":\"@sspai\"},{\"id\":\"user-1229068373\",\"type\":\"user\",\"user\":\"1229068373\",\"url\":\"https://weibo.com/u/1229068373\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.180.180.50/49421855jw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1594466479&ssig=XzwcuJAGao\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1831034903\",\"type\":\"user\",\"user\":\"1831034903\",\"url\":\"https://weibo.com/u/1831034903\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.50/6d236017ly8ggfpn2ixrej20u00u0761.jpg?KID=imgbed,tva&Expires=1594466479&ssig=LoqPUbf82T\",\"name\":\"Jeannels\",\"description\":\"@Jeannels\"},{\"id\":\"topic-s8\",\"type\":\"topic\",\"topic\":\"s8\",\"url\":\"https://weibo.com/k/s8\",\"avatar\":\"https://wx2.sinaimg.cn/large/0067d1Rwly1fv3mf7qe7rj30u00u0nln.jpg\",\"name\":\"#s8#\",\"description\":\"#s8#\"},{\"id\":\"user-1559526423\",\"type\":\"user\",\"user\":\"1559526423\",\"url\":\"https://weibo.com/u/1559526423\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.396.90.990.990.50/5cf47c17ly8frdpnzzywaj21900u0gzi.jpg?KID=imgbed,tva&Expires=1594466479&ssig=OX2AEuvPVa\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5498125999\",\"type\":\"user\",\"user\":\"5498125999\",\"url\":\"https://weibo.com/u/5498125999\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.921.921.50/00605zJBly8gdla1ux8vrj30pl0plmxm.jpg?KID=imgbed,tva&Expires=1594466479&ssig=DA3mBruCbR\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1752502537\",\"type\":\"user\",\"user\":\"1752502537\",\"url\":\"https://weibo.com/u/1752502537\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.751.751.50/68751109ly8fj0g7zpb88j20kv0kvmxq.jpg?KID=imgbed,tva&Expires=1594466479&ssig=iO1Z31U97K\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-6405512836\",\"type\":\"user\",\"user\":\"6405512836\",\"url\":\"https://weibo.com/u/6405512836\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.828.828.50/006ZuSvaly8gdizaaj4tjj30n00n0taj.jpg?KID=imgbed,tva&Expires=1594466479&ssig=b8psVUehcR\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"topic-\",\"type\":\"topic\",\"topic\":\"\",\"url\":\"https://weibo.com/k/\",\"avatar\":\"https://wx1.sinaimg.cn/thumbnail/accf0452gy1gdi6ms7a23j20500500t3.jpg\",\"name\":\"##\",\"description\":\"##\"},{\"id\":\"user-1916825084\",\"type\":\"user\",\"user\":\"1916825084\",\"url\":\"https://weibo.com/u/1916825084\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.159.159.50/72406dfcgw1ex52nh4deij204g04gdfv.jpg?KID=imgbed,tva&Expires=1594466479&ssig=tUwE2FOJv7\",\"name\":\"GeniusVczh\",\"description\":\"@GeniusVczh\"},{\"id\":\"user-1401880315\",\"type\":\"user\",\"user\":\"1401880315\",\"url\":\"https://weibo.com/u/1401880315\",\"avatar\":\"https://tvax1.sinaimg.cn/default/images/default_avatar_male_50.gif?KID=imgbed,tva&Expires=1594466479&ssig=3GbuabTiAb\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2964236717\",\"type\":\"user\",\"user\":\"2964236717\",\"url\":\"https://weibo.com/u/2964236717\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.512.512.50/b0aea9adjw8erymkbbzsyj20e80e8t8q.jpg?KID=imgbed,tva&Expires=1594466479&ssig=Gk8w9VW%2BUe\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1593134432\",\"type\":\"user\",\"user\":\"1593134432\",\"url\":\"https://weibo.com/u/1593134432\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1242.1242.50/5ef54d60ly8fdhxoqz219j20yi0yitc9.jpg?KID=imgbed,tva&Expires=1594466479&ssig=ULj%2BRCEsRl\",\"name\":\"kalasoo\",\"description\":\"@kalasoo\"},{\"id\":\"user-1204889192\",\"type\":\"user\",\"user\":\"1204889192\",\"url\":\"https://weibo.com/u/1204889192\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.446.446.50/47d12668jw8et4m1hzfrqj20ce0fijs1.jpg?KID=imgbed,tva&Expires=1594466479&ssig=Ac9vykWlOJ\",\"name\":\"zhiqiang\",\"description\":\"@zhiqiang\"},{\"id\":\"user-3965954138\",\"type\":\"user\",\"user\":\"3965954138\",\"url\":\"https://weibo.com/u/3965954138\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.512.512.50/ec63a85aly8g8qimj99t9j20e80e8t9w.jpg?KID=imgbed,tva&Expires=1594466479&ssig=X4IAe8Nlcu\",\"name\":\"viosey\",\"description\":\"@viosey\"},{\"id\":\"user-2207519004\",\"type\":\"user\",\"user\":\"2207519004\",\"url\":\"https://weibo.com/u/2207519004\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1024.1024.50/8394111cly8g2hcpz9dcrj20sg0sgdmc.jpg?KID=imgbed,tva&Expires=1594466489&ssig=K46HUZ8qiF\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5383066644\",\"type\":\"user\",\"user\":\"5383066644\",\"url\":\"https://weibo.com/u/5383066644\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.12.14.448.448.50/005SiNxyly8g1nzah4zlbj30dc0dcdfz.jpg?KID=imgbed,tva&Expires=1594466489&ssig=5KAr%2FgMSQo\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-6079196173\",\"type\":\"user\",\"user\":\"6079196173\",\"url\":\"https://weibo.com/u/6079196173\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.50/006DpGDbly8fygpgxzvblj30u00u0wfy.jpg?KID=imgbed,tva&Expires=1594466489&ssig=5adhjz0tmU\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2163553891\",\"type\":\"user\",\"user\":\"2163553891\",\"url\":\"https://weibo.com/u/2163553891\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1000.1000.50/80f53663ly1gcx63hdsysj20rs0rsach.jpg?KID=imgbed,tva&Expires=1594466489&ssig=AcWP%2BbDRNY\",\"name\":\"BIE\",\"description\":\"@BIE\"},{\"id\":\"user-6079558227\",\"type\":\"user\",\"user\":\"6079558227\",\"url\":\"https://weibo.com/u/6079558227\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.801.801.50/006DrcOLly8fg0666cw7yj30m90m9myl.jpg?KID=imgbed,tva&Expires=1594466489&ssig=SHyVHFsT%2B%2B\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1959394755\",\"type\":\"user\",\"user\":\"1959394755\",\"url\":\"https://weibo.com/u/1959394755\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.11.750.750.50/74c9fdc3ly8fjsuruxlj8j20ku0lhq4h.jpg?KID=imgbed,tva&Expires=1594466489&ssig=Wb1eh6ZFN1\",\"name\":\"-GK-GenKen\",\"description\":\"@-GK-GenKen\"},{\"id\":\"user-1404332602\",\"type\":\"user\",\"user\":\"1404332602\",\"url\":\"https://weibo.com/u/1404332602\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1125.1125.50/53b46a3aly8fo1c2180mlj20v90v9q54.jpg?KID=imgbed,tva&Expires=1594466489&ssig=0%2BlV%2FIgvsi\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-6004302211\",\"type\":\"user\",\"user\":\"6004302211\",\"url\":\"https://weibo.com/u/6004302211\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.15.25.563.563.50/006ylri3gy1fdfllvzqzbj30gk0gkabi.jpg?KID=imgbed,tva&Expires=1594466489&ssig=LXhl4BjT1q\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1261949681\",\"type\":\"user\",\"user\":\"1261949681\",\"url\":\"https://weibo.com/u/1261949681\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.50/4b37d2f1ly8gab92h89nwj20u00u00us.jpg?KID=imgbed,tva&Expires=1594466489&ssig=OWrD%2FoeBmj\",\"name\":\"FS\",\"description\":\"@FS\"},{\"id\":\"user-5822025738\",\"type\":\"user\",\"user\":\"5822025738\",\"url\":\"https://weibo.com/u/5822025738\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.50/006m0CQWly8g4ka5vumw3j30u00u0wgw.jpg?KID=imgbed,tva&Expires=1594466489&ssig=V01FsrXXqQ\",\"name\":\"MAYJ_LEE\",\"description\":\"@MAYJ_LEE\"},{\"id\":\"user-1805543441\",\"type\":\"user\",\"user\":\"1805543441\",\"url\":\"https://weibo.com/u/1805543441\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.50/6b9e6811ly8ge72b646lnj20u00u042o.jpg?KID=imgbed,tva&Expires=1594466489&ssig=w0xMHgLQqv\",\"name\":\"xf\",\"description\":\"@xf\"},{\"id\":\"user-1641970011\",\"type\":\"user\",\"user\":\"1641970011\",\"url\":\"https://weibo.com/u/1641970011\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.50/61de795bjw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1594466489&ssig=GfdVMWRHe1\",\"name\":\"-Kenshin\",\"description\":\"@-Kenshin\"},{\"id\":\"user-5995015653\",\"type\":\"user\",\"user\":\"5995015653\",\"url\":\"https://weibo.com/u/5995015653\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.512.512.50/006xItqRly8fn49gg3asdj30e80e8jrn.jpg?KID=imgbed,tva&Expires=1594466489&ssig=vJoLHny6y3\",\"name\":\"_\",\"description\":\"@_\"},{\"id\":\"user-5980136393\",\"type\":\"user\",\"user\":\"5980136393\",\"url\":\"https://weibo.com/u/5980136393\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.129.123.840.840.50/006wI2ENly8gfctq4w2rtj30u00u075h.jpg?KID=imgbed,tva&Expires=1594466489&ssig=WZEOKLU1GX\",\"name\":\"CSGO\",\"description\":\"@CSGO\"},{\"id\":\"user-6279635015\",\"type\":\"user\",\"user\":\"6279635015\",\"url\":\"https://weibo.com/u/6279635015\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.750.750.50/006QYHVJly8g0vj7tisefj30ku0ku0tl.jpg?KID=imgbed,tva&Expires=1594466489&ssig=7L61ssYz5v\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5996184614\",\"type\":\"user\",\"user\":\"5996184614\",\"url\":\"https://weibo.com/u/5996184614\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.896.896.50/006xNnx4ly8gdii7306ubj30ow0owgmi.jpg?KID=imgbed,tva&Expires=1594466489&ssig=10OOQyGGiY\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5245903632\",\"type\":\"user\",\"user\":\"5245903632\",\"url\":\"https://weibo.com/u/5245903632\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.227.227.568.568.50/005J1haUly8gdiyig2d7uj30sg0sgagp.jpg?KID=imgbed,tva&Expires=1594466489&ssig=7ZK%2BtFsUkV\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3178113720\",\"type\":\"user\",\"user\":\"3178113720\",\"url\":\"https://weibo.com/u/3178113720\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.100.100.50/bd6e2ab8jw8et9fikkp7ej202s02sq2r.jpg?KID=imgbed,tva&Expires=1594466489&ssig=lI7g80fN8O\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5888006271\",\"type\":\"user\",\"user\":\"5888006271\",\"url\":\"https://weibo.com/u/5888006271\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.511.511.50/006qttp5ly8fk2omv98svj30e80e7jrm.jpg?KID=imgbed,tva&Expires=1594466489&ssig=fh67w2CE0f\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5047450652\",\"type\":\"user\",\"user\":\"5047450652\",\"url\":\"https://weibo.com/u/5047450652\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1104.1104.50/005vAAuoly8fhjq8uzvmuj30uo0uoa9x.jpg?KID=imgbed,tva&Expires=1594466489&ssig=Ad%2BbuX2mVN\",\"name\":\"BookFere\",\"description\":\"@BookFere\"},{\"id\":\"user-1726544024\",\"type\":\"user\",\"user\":\"1726544024\",\"url\":\"https://weibo.com/u/1726544024\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.331.331.50/66e8f898ly8fiw18931q3j2097097gm4.jpg?KID=imgbed,tva&Expires=1594466489&ssig=qmxoNx4sKw\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-6021573858\",\"type\":\"user\",\"user\":\"6021573858\",\"url\":\"https://weibo.com/u/6021573858\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.180.180.50/006zvUr0ly8gdip6j8vrsj3050050q30.jpg?KID=imgbed,tva&Expires=1594466489&ssig=8BHJBnx%2BIF\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5393939593\",\"type\":\"user\",\"user\":\"5393939593\",\"url\":\"https://weibo.com/u/5393939593\",\"avatar\":\"https://tva3.sinaimg.cn/crop.56.61.483.483.50/005T2q5Hjw8ewuvpgikybj30go0got8y.jpg?KID=imgbed,tva&Expires=1594466489&ssig=5IFfAveLYI\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1871103515\",\"type\":\"user\",\"user\":\"1871103515\",\"url\":\"https://weibo.com/u/1871103515\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1002.1002.50/6f86c61bly8gdi76yln2wj20ru0ruwgn.jpg?KID=imgbed,tva&Expires=1594466489&ssig=buudkOB24s\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5743923782\",\"type\":\"user\",\"user\":\"5743923782\",\"url\":\"https://weibo.com/u/5743923782\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.828.828.50/006gIUXYly8gditr8cy2pj30n00n0dgw.jpg?KID=imgbed,tva&Expires=1594466489&ssig=6v7B%2B3PBa2\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2715025067\",\"type\":\"user\",\"user\":\"2715025067\",\"url\":\"https://weibo.com/u/2715025067\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.360.360.50/a1d3feably8gditpuk6uxj20a00a0tdy.jpg?KID=imgbed,tva&Expires=1594466489&ssig=j6NHKqvfT6\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3181222402\",\"type\":\"user\",\"user\":\"3181222402\",\"url\":\"https://weibo.com/u/3181222402\",\"avatar\":\"https://tva3.sinaimg.cn/crop.84.33.166.166.50/bd9d9a02gw1eydf2nt1a8j207q078wfc.jpg?KID=imgbed,tva&Expires=1594466489&ssig=CF0T4CFEqY\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2166496631\",\"type\":\"user\",\"user\":\"2166496631\",\"url\":\"https://weibo.com/u/2166496631\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.180.180.50/81221d77jw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1594466489&ssig=MePaUAcAm%2B\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1835126047\",\"type\":\"user\",\"user\":\"1835126047\",\"url\":\"https://weibo.com/u/1835126047\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.512.512.50/6d61cd1fly8g63rob7t49j20e80e8jrw.jpg?KID=imgbed,tva&Expires=1594466489&ssig=wfKy4xKh%2FI\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5497993620\",\"type\":\"user\",\"user\":\"5497993620\",\"url\":\"https://weibo.com/u/5497993620\",\"avatar\":\"https://tva3.sinaimg.cn/crop.108.119.1809.1809.50/006051isjw8epnqskdyo0j31kw1kwq76.jpg?KID=imgbed,tva&Expires=1594466489&ssig=RmU1VZ69vD\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1895327843\",\"type\":\"user\",\"user\":\"1895327843\",\"url\":\"https://weibo.com/u/1895327843\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.996.996.50/70f86863ly8gdj6uaai8oj20ro0rowgr.jpg?KID=imgbed,tva&Expires=1594466497&ssig=udYh04FcJl\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1616826550\",\"type\":\"user\",\"user\":\"1616826550\",\"url\":\"https://weibo.com/u/1616826550\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1125.1125.50/605ed0b6ly8fwug5lyoxgj20v90v9taa.jpg?KID=imgbed,tva&Expires=1594466497&ssig=jTjlX53SLp\",\"name\":\"LoveLing\",\"description\":\"@LoveLing\"},{\"id\":\"user-3748534967\",\"type\":\"user\",\"user\":\"3748534967\",\"url\":\"https://weibo.com/u/3748534967\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.50/df6e1ab7ly8g4ss0d3o00j20e80e874u.jpg?KID=imgbed,tva&Expires=1594466497&ssig=qdcrODieNA\",\"name\":\"Gogoing__\",\"description\":\"@Gogoing__\"},{\"id\":\"user-2879470994\",\"type\":\"user\",\"user\":\"2879470994\",\"url\":\"https://weibo.com/u/2879470994\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.50/aba13d92ly8fxovvh29m1j20u00u0wgk.jpg?KID=imgbed,tva&Expires=1594466497&ssig=9dBTk0g20H\",\"name\":\"WE_\",\"description\":\"@WE_\"},{\"id\":\"user-2377156730\",\"type\":\"user\",\"user\":\"2377156730\",\"url\":\"https://weibo.com/u/2377156730\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.50/8db0887aly8g1voac7npuj20u00u0q5x.jpg?KID=imgbed,tva&Expires=1594466497&ssig=LcPGGQ1Oss\",\"name\":\"_55\",\"description\":\"@_55\"},{\"id\":\"user-5451013129\",\"type\":\"user\",\"user\":\"5451013129\",\"url\":\"https://weibo.com/u/5451013129\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.100.100.50/005WTTwBjw8enrduaotekj302s02s0sk.jpg?KID=imgbed,tva&Expires=1594466497&ssig=CTnW2bNAka\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2735327001\",\"type\":\"user\",\"user\":\"2735327001\",\"url\":\"https://weibo.com/u/2735327001\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.512.512.50/a309c719ly8gdk51d8fstj20e80e8mxd.jpg?KID=imgbed,tva&Expires=1594466497&ssig=b0K1muVQLT\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2274567792\",\"type\":\"user\",\"user\":\"2274567792\",\"url\":\"https://weibo.com/u/2274567792\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.180.180.50/87932670ly8gdi6tb2xb6j2050050gls.jpg?KID=imgbed,tva&Expires=1594466497&ssig=EawRKNfHaJ\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2053772757\",\"type\":\"user\",\"user\":\"2053772757\",\"url\":\"https://weibo.com/u/2053772757\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.512.512.50/7a6a15d5jw8fbbbi434iqj20e80e8aai.jpg?KID=imgbed,tva&Expires=1594466497&ssig=0P2TjskPob\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1920682763\",\"type\":\"user\",\"user\":\"1920682763\",\"url\":\"https://weibo.com/u/1920682763\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.100.100.50/727b4b0bjw8eswp4bfuwqj202s02sq2r.jpg?KID=imgbed,tva&Expires=1594466497&ssig=udED7IR25r\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1829347244\",\"type\":\"user\",\"user\":\"1829347244\",\"url\":\"https://weibo.com/u/1829347244\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.2048.2048.50/6d099facly8fqms49iv6aj21kw1kwgwz.jpg?KID=imgbed,tva&Expires=1594466497&ssig=Tuj8nSHMcO\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2953031917\",\"type\":\"user\",\"user\":\"2953031917\",\"url\":\"https://weibo.com/u/2953031917\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.360.360.50/b003b0edly8ges3gscewwj20a00a03yx.jpg?KID=imgbed,tva&Expires=1594466497&ssig=5k0tST1aYC\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1656627870\",\"type\":\"user\",\"user\":\"1656627870\",\"url\":\"https://weibo.com/u/1656627870\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.50/62be229ely8g3g87xp9x8j20u00u0401.jpg?KID=imgbed,tva&Expires=1594466497&ssig=RQjmQs6XLm\",\"name\":\"thomas\",\"description\":\"@thomas\"},{\"id\":\"user-1893347753\",\"type\":\"user\",\"user\":\"1893347753\",\"url\":\"https://weibo.com/u/1893347753\",\"avatar\":\"https://tva1.sinaimg.cn/crop.117.5.893.893.50/70da31a9gw1en1ih5zgwcj215o1akjz7.jpg?KID=imgbed,tva&Expires=1594466497&ssig=3cc5PBpSNq\",\"name\":\"LexBurner\",\"description\":\"@LexBurner\"},{\"id\":\"user-1771123430\",\"type\":\"user\",\"user\":\"1771123430\",\"url\":\"https://weibo.com/u/1771123430\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.2044.2044.50/699132e6jw1el9q06jcxej21kw1kw7cb.jpg?KID=imgbed,tva&Expires=1594466497&ssig=ZAQ%2BNQ8Kea\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1640663757\",\"type\":\"user\",\"user\":\"1640663757\",\"url\":\"https://weibo.com/u/1640663757\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.50/61ca8acdjw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1594466497&ssig=iOx3VW3YHy\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3812984956\",\"type\":\"user\",\"user\":\"3812984956\",\"url\":\"https://weibo.com/u/3812984956\",\"avatar\":\"https://tva4.sinaimg.cn/crop.42.53.136.136.50/e345887cjw1e90wwcdn3qj206y06yjrd.jpg?KID=imgbed,tva&Expires=1594466497&ssig=A7j7SHaBGp\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1892305742\",\"type\":\"user\",\"user\":\"1892305742\",\"url\":\"https://weibo.com/u/1892305742\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.50/70ca4b4ely8gebtu7v4tvj20u00u0adf.jpg?KID=imgbed,tva&Expires=1594466497&ssig=aasmioPiGd\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2328516855\",\"type\":\"user\",\"user\":\"2328516855\",\"url\":\"https://weibo.com/u/2328516855\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.996.996.50/8aca58f7ly8gdiljzydqqj20ro0rowih.jpg?KID=imgbed,tva&Expires=1594466497&ssig=F1atm2nhG6\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"stock-sh000001\",\"type\":\"stock\",\"stock\":\"sh000001\",\"url\":\"https://weibo.com/p/230677sh000001\",\"avatar\":\"https://ww1.sinaimg.cn/bmiddle/6055df12jw1exx542b0hgj2050050dfv.jpg\",\"name\":\"$ sh000001$\",\"description\":\"$ sh000001$\"},{\"id\":\"user-3021514657\",\"type\":\"user\",\"user\":\"3021514657\",\"url\":\"https://weibo.com/u/3021514657\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1002.1002.50/b418a7a1ly8gexiyqyq6oj20ru0rujsx.jpg?KID=imgbed,tva&Expires=1594466497&ssig=%2BcpvHG1DZ%2B\",\"name\":\"Redmi\",\"description\":\"@Redmi\"},{\"id\":\"user-1771925961\",\"type\":\"user\",\"user\":\"1771925961\",\"url\":\"https://weibo.com/u/1771925961\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1002.1002.50/699d71c9ly8gdi5v45y5qj20ru0ru0sx.jpg?KID=imgbed,tva&Expires=1594466497&ssig=ZpjWcloErs\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5492774960\",\"type\":\"user\",\"user\":\"5492774960\",\"url\":\"https://weibo.com/u/5492774960\",\"avatar\":\"https://tva4.sinaimg.cn/crop.44.0.100.100.50/005ZJ7Gwjw8ezwxxlu1o0j30500343yg.jpg?KID=imgbed,tva&Expires=1594466497&ssig=fm25%2BWkB8U\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2286908003\",\"type\":\"user\",\"user\":\"2286908003\",\"url\":\"https://weibo.com/u/2286908003\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.50/884f7263ly8gdi7ptm8y4j20u00u0myq.jpg?KID=imgbed,tva&Expires=1594466497&ssig=%2BRsnTEXcRo\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5874291723\",\"type\":\"user\",\"user\":\"5874291723\",\"url\":\"https://weibo.com/u/5874291723\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1002.1002.50/006pxVCHly8gbdrznl34kj30ru0ru0tc.jpg?KID=imgbed,tva&Expires=1594466497&ssig=P%2BVmzWYD1e\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5498972025\",\"type\":\"user\",\"user\":\"5498972025\",\"url\":\"https://weibo.com/u/5498972025\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.828.828.50/006097Pbly8gdi6g07febj30n00n0dgc.jpg?KID=imgbed,tva&Expires=1594466497&ssig=kQvtJaNVRI\",\"name\":\"RNG\",\"description\":\"@RNG\"},{\"id\":\"user-1251000504\",\"type\":\"user\",\"user\":\"1251000504\",\"url\":\"https://weibo.com/u/1251000504\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.50/4a90c0b8ly8gan3rhugsjj20u00u0jtk.jpg?KID=imgbed,tva&Expires=1594466497&ssig=aaSlRRvAQF\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1904769205\",\"type\":\"user\",\"user\":\"1904769205\",\"url\":\"https://weibo.com/u/1904769205\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.500.500.50/718878b5ly8gdit4dbyvyj20dw0dwdi1.jpg?KID=imgbed,tva&Expires=1594466497&ssig=f4wOBld90A\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1140554177\",\"type\":\"user\",\"user\":\"1140554177\",\"url\":\"https://weibo.com/u/1140554177\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.828.828.50/43fb79c1ly8gdj4norb7pj20n00n0wh6.jpg?KID=imgbed,tva&Expires=1594466497&ssig=Kzo1HPKJXi\",\"name\":\"Misaya\",\"description\":\"@Misaya\"},{\"id\":\"user-1558597584\",\"type\":\"user\",\"user\":\"1558597584\",\"url\":\"https://weibo.com/u/1558597584\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.50/5ce64fd0ly8gbrwnzxby6j20u00u0whe.jpg?KID=imgbed,tva&Expires=1594466497&ssig=QNb0dtNhVd\",\"name\":\"GwAwa\",\"description\":\"@GwAwa\"},{\"id\":\"user-5235726837\",\"type\":\"user\",\"user\":\"5235726837\",\"url\":\"https://weibo.com/u/5235726837\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1000.1000.50/005IkzJ3ly8gdi83mdob9j30rs0rsmze.jpg?KID=imgbed,tva&Expires=1594466506&ssig=MGB%2FLmlo2C\",\"name\":\"EDG\",\"description\":\"@EDG\"},{\"id\":\"user-2099708877\",\"type\":\"user\",\"user\":\"2099708877\",\"url\":\"https://weibo.com/u/2099708877\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.50/7d2703cdly8gdi772w7wqj20u00u0dhg.jpg?KID=imgbed,tva&Expires=1594466506&ssig=%2FE9yl%2BDrfi\",\"name\":\"iG\",\"description\":\"@iG\"},{\"id\":\"user-5108480945\",\"type\":\"user\",\"user\":\"5108480945\",\"url\":\"https://weibo.com/u/5108480945\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.50/005zIFfXly8gdjemo1964j30u00u0q4o.jpg?KID=imgbed,tva&Expires=1594466506&ssig=HoM%2FoB8yBL\",\"name\":\"ELLEMEN\",\"description\":\"@ELLEMEN\"},{\"id\":\"user-2180551362\",\"type\":\"user\",\"user\":\"2180551362\",\"url\":\"https://weibo.com/u/2180551362\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.50/81f892c2ly8gdilxuq8ngj20u00u0mzp.jpg?KID=imgbed,tva&Expires=1594466506&ssig=gXiHdoTaX6\",\"name\":\"Mark\",\"description\":\"@Mark\"},{\"id\":\"user-5206808819\",\"type\":\"user\",\"user\":\"5206808819\",\"url\":\"https://weibo.com/u/5206808819\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.99.99.50/005GnePpjw8emoahan1xlj302s02rdfn.jpg?KID=imgbed,tva&Expires=1594466506&ssig=V1IS3%2FKhH7\",\"name\":\"illuSioN\",\"description\":\"@illuSioN\"},{\"id\":\"user-5220650532\",\"type\":\"user\",\"user\":\"5220650532\",\"url\":\"https://weibo.com/u/5220650532\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.104.609.609.50/005HjjGQly8fm6uiu3spaj30gx0jtwep.jpg?KID=imgbed,tva&Expires=1594466506&ssig=LPoI0Qj1LO\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2155378037\",\"type\":\"user\",\"user\":\"2155378037\",\"url\":\"https://weibo.com/u/2155378037\",\"avatar\":\"https://tva2.sinaimg.cn/crop.1.59.709.709.50/80787575gw1eb5khmioyij20js0me43o.jpg?KID=imgbed,tva&Expires=1594466506&ssig=4COqsKXNVx\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5643342246\",\"type\":\"user\",\"user\":\"5643342246\",\"url\":\"https://weibo.com/u/5643342246\",\"avatar\":\"https://tva1.sinaimg.cn/crop.86.14.199.199.50/0069UT78gw1etm3dimq7zj309806474k.jpg?KID=imgbed,tva&Expires=1594466506&ssig=L9BGeFed%2Fx\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3901429666\",\"type\":\"user\",\"user\":\"3901429666\",\"url\":\"https://weibo.com/u/3901429666\",\"avatar\":\"https://tva4.sinaimg.cn/crop.3.3.196.196.50/e88b17a2jw8epkezc10apj205k05k3yc.jpg?KID=imgbed,tva&Expires=1594466506&ssig=cY%2FeJkFTks\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3931632264\",\"type\":\"user\",\"user\":\"3931632264\",\"url\":\"https://weibo.com/u/3931632264\",\"avatar\":\"https://tva3.sinaimg.cn/crop.29.1.653.653.50/ea57f288gw1euh3pdp12oj20j60i8adh.jpg?KID=imgbed,tva&Expires=1594466506&ssig=yPMwbWr8Yd\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5475378260\",\"type\":\"user\",\"user\":\"5475378260\",\"url\":\"https://weibo.com/u/5475378260\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.50/005Yy80Aly8gdipqp0iglj30u00u0755.jpg?KID=imgbed,tva&Expires=1594466506&ssig=U%2FC8XpDVLG\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1826792401\",\"type\":\"user\",\"user\":\"1826792401\",\"url\":\"https://weibo.com/u/1826792401\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.50/6ce2a3d1ly8g19koqcd5jj20u00u0n0k.jpg?KID=imgbed,tva&Expires=1594466506&ssig=VOjyKK3aQd\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1663559265\",\"type\":\"user\",\"user\":\"1663559265\",\"url\":\"https://weibo.com/u/1663559265\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.6.628.628.50/6327e661jw8e8vsfrledaj20hg0hst9w.jpg?KID=imgbed,tva&Expires=1594466506&ssig=C7idkKiKXn\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2166787813\",\"type\":\"user\",\"user\":\"2166787813\",\"url\":\"https://weibo.com/u/2166787813\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1242.1242.50/81268ee5ly8fmwrkl6ij3j20yi0yiabf.jpg?KID=imgbed,tva&Expires=1594466506&ssig=4gPP28e5b6\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1766610575\",\"type\":\"user\",\"user\":\"1766610575\",\"url\":\"https://weibo.com/u/1766610575\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.194.194.50/694c568fly8gabg0pn7uhj205e05e0sn.jpg?KID=imgbed,tva&Expires=1594466506&ssig=BitKWdBusq\",\"name\":\"ONE\",\"description\":\"@ONE\"},{\"id\":\"user-5620226721\",\"type\":\"user\",\"user\":\"5620226721\",\"url\":\"https://weibo.com/u/5620226721\",\"avatar\":\"https://tva4.sinaimg.cn/crop.73.0.926.926.50/0068lTI5jw8f1ktmwspnuj30rs0pqto2.jpg?KID=imgbed,tva&Expires=1594466506&ssig=qrUgmXal%2B%2F\",\"name\":\"-\",\"description\":\"@-\"},{\"id\":\"user-2540774152\",\"type\":\"user\",\"user\":\"2540774152\",\"url\":\"https://weibo.com/u/2540774152\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.512.512.50/97712308ly8gdi9veta10j20e80e8q38.jpg?KID=imgbed,tva&Expires=1594466506&ssig=ST%2FUGbGQR8\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1197362373\",\"type\":\"user\",\"user\":\"1197362373\",\"url\":\"https://weibo.com/u/1197362373\",\"avatar\":\"https://tva2.sinaimg.cn/crop.11.21.304.304.50/475e4cc5gw1e9v75ejvx0j208w09d0td.jpg?KID=imgbed,tva&Expires=1594466506&ssig=29iAZeSJcM\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3164835813\",\"type\":\"user\",\"user\":\"3164835813\",\"url\":\"https://weibo.com/u/3164835813\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.750.750.50/bca38fe5ly8gbzdtpzk4aj20ku0kuabd.jpg?KID=imgbed,tva&Expires=1594466506&ssig=Z%2B2QW2BNtD\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1663723820\",\"type\":\"user\",\"user\":\"1663723820\",\"url\":\"https://weibo.com/u/1663723820\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.18.0.398.398.50/632a692cly8gditxabhh3j20c30b20tp.jpg?KID=imgbed,tva&Expires=1594466506&ssig=L0A8k0uLeX\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1992769421\",\"type\":\"user\",\"user\":\"1992769421\",\"url\":\"https://weibo.com/u/1992769421\",\"avatar\":\"https://tva3.sinaimg.cn/crop.664.0.356.356.50/76c73f8djw1em2x2862h5j20xc0lldjd.jpg?KID=imgbed,tva&Expires=1594466506&ssig=9Zz5RUPnb0\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-5308047167\",\"type\":\"user\",\"user\":\"5308047167\",\"url\":\"https://weibo.com/u/5308047167\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1002.1002.50/005Ne1xZly8g97s8m3qbuj30ru0rumzj.jpg?KID=imgbed,tva&Expires=1594466506&ssig=9TPAnmCCgB\",\"name\":\"Atlas_GT\",\"description\":\"@Atlas_GT\"},{\"id\":\"user-1823348853\",\"type\":\"user\",\"user\":\"1823348853\",\"url\":\"https://weibo.com/u/1823348853\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.105.102.813.813.50/6cae1875ly8gdi6km8htlj20sg0sgtlg.jpg?KID=imgbed,tva&Expires=1594466506&ssig=CsUL7ws5hv\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2376806542\",\"type\":\"user\",\"user\":\"2376806542\",\"url\":\"https://weibo.com/u/2376806542\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.50/8dab308ely8gdi7c3clw4j20u00u0aaw.jpg?KID=imgbed,tva&Expires=1594466506&ssig=IdzQ9ddGT8\",\"name\":\"QQ\",\"description\":\"@QQ\"},{\"id\":\"user-5225999165\",\"type\":\"user\",\"user\":\"5225999165\",\"url\":\"https://weibo.com/u/5225999165\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.512.512.50/005HFL77ly8fnpgww0ml2j30e80e874j.jpg?KID=imgbed,tva&Expires=1594466506&ssig=UYlAMQfgyw\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3109939781\",\"type\":\"user\",\"user\":\"3109939781\",\"url\":\"https://weibo.com/u/3109939781\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.512.512.50/b95dea45ly8gdinjp6ofkj20e80e8t8z.jpg?KID=imgbed,tva&Expires=1594466506&ssig=czX3CDWUqs\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1263317424\",\"type\":\"user\",\"user\":\"1263317424\",\"url\":\"https://weibo.com/u/1263317424\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.467.467.50/4b4cb1b0ly8gbsuxd9mnqj20cz0goq4m.jpg?KID=imgbed,tva&Expires=1594466506&ssig=y%2F2D0EbdTT\",\"name\":\"Mack\",\"description\":\"@Mack\"},{\"id\":\"user-1559236912\",\"type\":\"user\",\"user\":\"1559236912\",\"url\":\"https://weibo.com/u/1559236912\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.76.84.1835.1835.50/5cf01130ly8fi7q7st65kj21k21k74fq.jpg?KID=imgbed,tva&Expires=1594466506&ssig=9FvnudSGwI\",\"name\":\"silver\",\"description\":\"@silver\"},{\"id\":\"user-1928300393\",\"type\":\"user\",\"user\":\"1928300393\",\"url\":\"https://weibo.com/u/1928300393\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.50/72ef8769ly8g2ewca2kwdj20u00u0gpf.jpg?KID=imgbed,tva&Expires=1594466506&ssig=G1AK0DUeYO\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1881941252\",\"type\":\"user\",\"user\":\"1881941252\",\"url\":\"https://weibo.com/u/1881941252\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.180.180.50/702c2504jw8eo1wtiwf8ij205005174i.jpg?KID=imgbed,tva&Expires=1594466515&ssig=x1wpiMXt2X\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2855893887\",\"type\":\"user\",\"user\":\"2855893887\",\"url\":\"https://weibo.com/u/2855893887\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.50/aa397b7fly8gfmz0gq9tkj20u00u03zq.jpg?KID=imgbed,tva&Expires=1594466515&ssig=54%2FCEnYvip\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2081296667\",\"type\":\"user\",\"user\":\"2081296667\",\"url\":\"https://weibo.com/u/2081296667\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.145.145.50/7c0e111bly8gdixnlez42j2046046mx8.jpg?KID=imgbed,tva&Expires=1594466515&ssig=Vj6r7yl8Xm\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1936786305\",\"type\":\"user\",\"user\":\"1936786305\",\"url\":\"https://weibo.com/u/1936786305\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.750.750.50/73710381jw8er7usgymvjj20ku0kuab9.jpg?KID=imgbed,tva&Expires=1594466515&ssig=qXglDIYIAK\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2645996150\",\"type\":\"user\",\"user\":\"2645996150\",\"url\":\"https://weibo.com/u/2645996150\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.512.512.50/9db6b276ly8gdiorsloldj20e80e874q.jpg?KID=imgbed,tva&Expires=1594466515&ssig=CdNRxSG8vm\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2259906485\",\"type\":\"user\",\"user\":\"2259906485\",\"url\":\"https://weibo.com/u/2259906485\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.50/86b36fb5ly8gdins6pb77j20u00u0ace.jpg?KID=imgbed,tva&Expires=1594466515&ssig=Smbb3E%2Fb0P\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2493678981\",\"type\":\"user\",\"user\":\"2493678981\",\"url\":\"https://weibo.com/u/2493678981\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.50/94a28585ly8g9ueameyn4j20u00u0tbd.jpg?KID=imgbed,tva&Expires=1594466515&ssig=PTLm5jhVCL\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1682207150\",\"type\":\"user\",\"user\":\"1682207150\",\"url\":\"https://weibo.com/u/1682207150\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.50/644471aely8gdilqip43tj20u00u00ub.jpg?KID=imgbed,tva&Expires=1594466515&ssig=ctKS5pO44B\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1684452940\",\"type\":\"user\",\"user\":\"1684452940\",\"url\":\"https://weibo.com/u/1684452940\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.828.828.50/6466b64cly8gdinb9luxlj20n00n0abm.jpg?KID=imgbed,tva&Expires=1594466515&ssig=PI1zhYZGOw\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1028361511\",\"type\":\"user\",\"user\":\"1028361511\",\"url\":\"https://weibo.com/u/1028361511\",\"avatar\":\"https://tva4.sinaimg.cn/crop.359.291.136.136.50/3d4b8d27jw1eu9trihs2yj20ns0fqn2f.jpg?KID=imgbed,tva&Expires=1594466515&ssig=ZYAePYnxYt\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3708072513\",\"type\":\"user\",\"user\":\"3708072513\",\"url\":\"https://weibo.com/u/3708072513\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.50/dd04b241ly8gdi761ha54j20e80e8gls.jpg?KID=imgbed,tva&Expires=1594466515&ssig=LKo5d6wPQi\",\"name\":\"__\",\"description\":\"@__\"},{\"id\":\"user-2654755851\",\"type\":\"user\",\"user\":\"2654755851\",\"url\":\"https://weibo.com/u/2654755851\",\"avatar\":\"https://tva4.sinaimg.cn/crop.0.0.1080.1080.50/9e3c5c0bjw8emebzvdittj20u00u0q73.jpg?KID=imgbed,tva&Expires=1594466515&ssig=IZoNM%2BWAh%2F\",\"name\":\"Chimera\",\"description\":\"@Chimera\"},{\"id\":\"user-2463128032\",\"type\":\"user\",\"user\":\"2463128032\",\"url\":\"https://weibo.com/u/2463128032\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.828.828.50/92d059e0ly8gdhoxidw78j20n00n0jsc.jpg?KID=imgbed,tva&Expires=1594466515&ssig=Sdrj9z%2F%2F6i\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1658384301\",\"type\":\"user\",\"user\":\"1658384301\",\"url\":\"https://weibo.com/u/1658384301\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.1.635.635.50/62d8efadgw1ej30downrsj20hs0hq0ws.jpg?KID=imgbed,tva&Expires=1594466515&ssig=T6p%2BlxMzSt\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2639709051\",\"type\":\"user\",\"user\":\"2639709051\",\"url\":\"https://weibo.com/u/2639709051\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.50/9d56c37bly8g2f3s7jeb4j20u00u00uw.jpg?KID=imgbed,tva&Expires=1594466515&ssig=SsF5KDnr6O\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1985393563\",\"type\":\"user\",\"user\":\"1985393563\",\"url\":\"https://weibo.com/u/1985393563\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.1040.1040.50/7656b39bjw8eo6zq52yluj20sw12w7ca.jpg?KID=imgbed,tva&Expires=1594466515&ssig=0Jv1qKxFP5\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-3165283712\",\"type\":\"user\",\"user\":\"3165283712\",\"url\":\"https://weibo.com/u/3165283712\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.4.803.803.50/bcaa6580ly8fmzxf2qv27j20mb0mjtan.jpg?KID=imgbed,tva&Expires=1594466515&ssig=RzX9Smr96T\",\"name\":\"_\",\"description\":\"@_ ()\"},{\"id\":\"user-1752543513\",\"type\":\"user\",\"user\":\"1752543513\",\"url\":\"https://weibo.com/u/1752543513\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.1.177.177.50/6875b119jw1eaygru1s65j2050050t8o.jpg?KID=imgbed,tva&Expires=1594466515&ssig=UXqTW7bJ45\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2426637320\",\"type\":\"user\",\"user\":\"2426637320\",\"url\":\"https://weibo.com/u/2426637320\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.50/90a38c08jw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1594466515&ssig=UgF%2BPEpAHV\",\"name\":\"XuanStudio\",\"description\":\"@XuanStudio\"},{\"id\":\"user-2718604160\",\"type\":\"user\",\"user\":\"2718604160\",\"url\":\"https://weibo.com/u/2718604160\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1024.1024.50/a20a9b80ly8gdisb9934cj20sg0sgq6j.jpg?KID=imgbed,tva&Expires=1594466515&ssig=I7R7gu%2F0xG\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2796627290\",\"type\":\"user\",\"user\":\"2796627290\",\"url\":\"https://weibo.com/u/2796627290\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.512.512.50/a6b1255aly8gb5dwwve90j20e80e8glu.jpg?KID=imgbed,tva&Expires=1594466515&ssig=%2Fti0m508%2F3\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1720084970\",\"type\":\"user\",\"user\":\"1720084970\",\"url\":\"https://weibo.com/u/1720084970\",\"avatar\":\"https://tva4.sinaimg.cn/crop.34.277.415.415.50/668669eagw1ejpwgpa321j20dm0j943p.jpg?KID=imgbed,tva&Expires=1594466515&ssig=ArsrBa7IFP\",\"name\":\"bot\",\"description\":\"@bot\"},{\"id\":\"user-1779744180\",\"type\":\"user\",\"user\":\"1779744180\",\"url\":\"https://weibo.com/u/1779744180\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.50/6a14bdb4jw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1594466515&ssig=0UEin0lVty\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1496814565\",\"type\":\"user\",\"user\":\"1496814565\",\"url\":\"https://weibo.com/u/1496814565\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.61.31.474.474.50/593793e5ly8gdi6sa5seej20gq0f50sm.jpg?KID=imgbed,tva&Expires=1594466515&ssig=WiL%2BaSvz9b\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1663148275\",\"type\":\"user\",\"user\":\"1663148275\",\"url\":\"https://weibo.com/u/1663148275\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.42.117.634.634.50/6321a0f3ly1g4x2palamhj20m80m879e.jpg?KID=imgbed,tva&Expires=1594466515&ssig=R8WscKDfWm\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2656274875\",\"type\":\"user\",\"user\":\"2656274875\",\"url\":\"https://weibo.com/u/2656274875\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.50/9e5389bbly8gdi6srn9zmj20e80e8mxj.jpg?KID=imgbed,tva&Expires=1594466515&ssig=3g5XPUI%2FkI\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1258256457\",\"type\":\"user\",\"user\":\"1258256457\",\"url\":\"https://weibo.com/u/1258256457\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.180.180.50/4aff7849jw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1594466515&ssig=ldWLqvK3Jj\",\"name\":\"Houson\",\"description\":\"@Houson\"},{\"id\":\"user-1779595382\",\"type\":\"user\",\"user\":\"1779595382\",\"url\":\"https://weibo.com/u/1779595382\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.149.149.50/6a127876jw8elz27x8btgj2045045dfw.jpg?KID=imgbed,tva&Expires=1594466515&ssig=JMBGAhcmLe\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2308331031\",\"type\":\"user\",\"user\":\"2308331031\",\"url\":\"https://weibo.com/u/2308331031\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.996.996.50/89965617jw8fcygqs2rqcj20ro0rpacq.jpg?KID=imgbed,tva&Expires=1594466515&ssig=F27Z%2Fiyk03\",\"name\":\"\",\"description\":\"@ ()\"},{\"id\":\"user-1644225642\",\"type\":\"user\",\"user\":\"1644225642\",\"url\":\"https://weibo.com/u/1644225642\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.178.178.50/6200e46aly1gdiktlx0r1j204z04zaa1.jpg?KID=imgbed,tva&Expires=1594466524&ssig=3w4SGpLEoK\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2036070420\",\"type\":\"user\",\"user\":\"2036070420\",\"url\":\"https://weibo.com/u/2036070420\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.50/795bf814ly8gdjedpjxjlj20u00u00tl.jpg?KID=imgbed,tva&Expires=1594466524&ssig=PaHBDn9BQK\",\"name\":\"SegmentFault\",\"description\":\"@SegmentFault\"},{\"id\":\"user-1748075785\",\"type\":\"user\",\"user\":\"1748075785\",\"url\":\"https://weibo.com/u/1748075785\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.1.0.179.179.50/68318509ly8gdiwu0re7tj2050050jra.jpg?KID=imgbed,tva&Expires=1594466524&ssig=WoZ5xpsGRL\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1710449573\",\"type\":\"user\",\"user\":\"1710449573\",\"url\":\"https://weibo.com/u/1710449573\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.224.200.292.292.50/65f363a5ly8gdimu7o0udj20r20hre81.jpg?KID=imgbed,tva&Expires=1594466524&ssig=g3ztKfeAzp\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1721030997\",\"type\":\"user\",\"user\":\"1721030997\",\"url\":\"https://weibo.com/u/1721030997\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.180.180.50/6694d955ly8gdivcjdq3cj20500503yc.jpg?KID=imgbed,tva&Expires=1594466524&ssig=Tuf8yl5rfz\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1079220264\",\"type\":\"user\",\"user\":\"1079220264\",\"url\":\"https://weibo.com/u/1079220264\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.50/40539828jw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1594466524&ssig=MTCGPP8dPc\",\"name\":\"Inory\",\"description\":\"@Inory\"},{\"id\":\"user-1671959152\",\"type\":\"user\",\"user\":\"1671959152\",\"url\":\"https://weibo.com/u/1671959152\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.512.512.50/63a81270ly8fqz93ik0wtj20e80e8mxp.jpg?KID=imgbed,tva&Expires=1594466524&ssig=PA7QkVyTdq\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2432930125\",\"type\":\"user\",\"user\":\"2432930125\",\"url\":\"https://weibo.com/u/2432930125\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.50/9103914djw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1594466524&ssig=hYYg0%2F6%2Fql\",\"name\":\"BeatStage\",\"description\":\"@BeatStage\"},{\"id\":\"user-2709577332\",\"type\":\"user\",\"user\":\"2709577332\",\"url\":\"https://weibo.com/u/2709577332\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.3.3.296.296.50/a180de74ly8gdmbbbrwfvj208c08cq4f.jpg?KID=imgbed,tva&Expires=1594466524&ssig=mxruepyNA%2F\",\"name\":\"Happy\",\"description\":\"@Happy\"},{\"id\":\"user-1886477075\",\"type\":\"user\",\"user\":\"1886477075\",\"url\":\"https://weibo.com/u/1886477075\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.1242.1242.50/70715b13jw8faxfhw9zevj20yi0yitac.jpg?KID=imgbed,tva&Expires=1594466524&ssig=gfu1OZI7fP\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2787800541\",\"type\":\"user\",\"user\":\"2787800541\",\"url\":\"https://weibo.com/u/2787800541\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.15.11.172.172.50/a62a75ddly8gcz9ryx9qqj205k05kt9d.jpg?KID=imgbed,tva&Expires=1594466524&ssig=Yu9NQvhxRM\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1228486722\",\"type\":\"user\",\"user\":\"1228486722\",\"url\":\"https://weibo.com/u/1228486722\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.512.512.50/49393842jw8ehsdsusnlqj20e80e8mxq.jpg?KID=imgbed,tva&Expires=1594466524&ssig=piWxA4lKIY\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1750157883\",\"type\":\"user\",\"user\":\"1750157883\",\"url\":\"https://weibo.com/u/1750157883\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.828.828.50/68514a3bly8gfrp5opgaoj20n00n0ta5.jpg?KID=imgbed,tva&Expires=1594466524&ssig=97%2BADYZ6lb\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1744188571\",\"type\":\"user\",\"user\":\"1744188571\",\"url\":\"https://weibo.com/u/1744188571\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1125.1125.50/67f6349bly8fob8ufcun7j20v90v90up.jpg?KID=imgbed,tva&Expires=1594466524&ssig=lYtUY%2Fidoe\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2423763501\",\"type\":\"user\",\"user\":\"2423763501\",\"url\":\"https://weibo.com/u/2423763501\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.50/9077b22dly8gdin9zso1yj20u00u0jta.jpg?KID=imgbed,tva&Expires=1594466524&ssig=swHOD7sml7\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1217261134\",\"type\":\"user\",\"user\":\"1217261134\",\"url\":\"https://weibo.com/u/1217261134\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.180.180.50/488dee4ejw1e8qgp5bmzyj2050050aa8.jpg?KID=imgbed,tva&Expires=1594466524&ssig=gf%2FB04tZYa\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1299532580\",\"type\":\"user\",\"user\":\"1299532580\",\"url\":\"https://weibo.com/u/1299532580\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.1080.1080.50/4d754b24ly8fzfsy4vqxmj20u00u0wfw.jpg?KID=imgbed,tva&Expires=1594466524&ssig=k4uzYTLPww\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1237869662\",\"type\":\"user\",\"user\":\"1237869662\",\"url\":\"https://weibo.com/u/1237869662\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.512.512.50/49c8645ejw8ej7q92t8ruj20e80e8q3x.jpg?KID=imgbed,tva&Expires=1594466524&ssig=JUpC2Isi36\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1266321801\",\"type\":\"user\",\"user\":\"1266321801\",\"url\":\"https://weibo.com/u/1266321801\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.512.512.50/4b7a8989ly8gdiraj3cg9j20e80e8mxn.jpg?KID=imgbed,tva&Expires=1594466524&ssig=mOJeO47qnA\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1686532492\",\"type\":\"user\",\"user\":\"1686532492\",\"url\":\"https://weibo.com/u/1686532492\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.27.320.320.50/6486718cjw8eb3mbhf2kij208w0aemy8.jpg?KID=imgbed,tva&Expires=1594466524&ssig=%2FoyXiKDfx9\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1362607654\",\"type\":\"user\",\"user\":\"1362607654\",\"url\":\"https://weibo.com/u/1362607654\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.50/5137be26ly8g3dk4u7dkhj20e80e8abr.jpg?KID=imgbed,tva&Expires=1594466524&ssig=wL35xpiODS\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1671342103\",\"type\":\"user\",\"user\":\"1671342103\",\"url\":\"https://weibo.com/u/1671342103\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.0.0.1080.1080.50/639ea817ly8gbq9g5dcb7j20u00u0wgq.jpg?KID=imgbed,tva&Expires=1594466524&ssig=6hPJQQMo%2B5\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1282005885\",\"type\":\"user\",\"user\":\"1282005885\",\"url\":\"https://weibo.com/u/1282005885\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.9.0.494.494.50/4c69db7dly8fxa26gcegcj20e80dqdg6.jpg?KID=imgbed,tva&Expires=1594466524&ssig=uMSqmU1uQJ\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1644492510\",\"type\":\"user\",\"user\":\"1644492510\",\"url\":\"https://weibo.com/u/1644492510\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.1080.1080.50/6204f6dely8gdelbsusxuj20u00u0tb4.jpg?KID=imgbed,tva&Expires=1594466524&ssig=3%2BrOlqyf7V\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1644461042\",\"type\":\"user\",\"user\":\"1644461042\",\"url\":\"https://weibo.com/u/1644461042\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.50/62047bf2ly8gduibljgqgj20e80e8jrt.jpg?KID=imgbed,tva&Expires=1594466524&ssig=KVRrSI%2Bbk4\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1704116960\",\"type\":\"user\",\"user\":\"1704116960\",\"url\":\"https://weibo.com/u/1704116960\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.8.496.496.50/6592c2e0ly8fhbk7rbw3lj20ds0e874p.jpg?KID=imgbed,tva&Expires=1594466524&ssig=V0RYCfpVV2\",\"name\":\"S\",\"description\":\"@S\"},{\"id\":\"user-2561277565\",\"type\":\"user\",\"user\":\"2561277565\",\"url\":\"https://weibo.com/u/2561277565\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.179.179.50/98a9fe7djw1e6s6ubk6z0j20500503yl.jpg?KID=imgbed,tva&Expires=1594466524&ssig=LDd7anM3gM\",\"name\":\"HD\",\"description\":\"@HD\"},{\"id\":\"user-1898587152\",\"type\":\"user\",\"user\":\"1898587152\",\"url\":\"https://weibo.com/u/1898587152\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.512.512.50/712a2410ly8gdi6nnzyurj20e80e8glp.jpg?KID=imgbed,tva&Expires=1594466524&ssig=PMXG12kNW8\",\"name\":\"IT\",\"description\":\"@IT\"},{\"id\":\"user-2004287405\",\"type\":\"user\",\"user\":\"2004287405\",\"url\":\"https://weibo.com/u/2004287405\",\"avatar\":\"https://tvax2.sinaimg.cn/crop.13.52.426.426.50/7776ffadly8gdl0mvwkfaj20dw0dwq31.jpg?KID=imgbed,tva&Expires=1594466524&ssig=q73b9VwC5W\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1195230310\",\"type\":\"user\",\"user\":\"1195230310\",\"url\":\"https://weibo.com/u/1195230310\",\"avatar\":\"https://tva1.sinaimg.cn/crop.0.0.1242.1242.50/473dc466jw8eu6bjj0bp1j20yi0yi0z6.jpg?KID=imgbed,tva&Expires=1594466524&ssig=G%2Flslb%2BuHW\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1191258123\",\"type\":\"user\",\"user\":\"1191258123\",\"url\":\"https://weibo.com/u/1191258123\",\"avatar\":\"https://tva2.sinaimg.cn/crop.0.0.1242.1242.50/4701280bjw8eumhllkj3jj20yi0yiq75.jpg?KID=imgbed,tva&Expires=1594466533&ssig=d9s%2BcSZDIB\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1188552450\",\"type\":\"user\",\"user\":\"1188552450\",\"url\":\"https://weibo.com/u/1188552450\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.512.512.50/46d7df02ly8gdivkh8j1fj20e80e8wf1.jpg?KID=imgbed,tva&Expires=1594466533&ssig=%2BYcgypycya\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1816011541\",\"type\":\"user\",\"user\":\"1816011541\",\"url\":\"https://weibo.com/u/1816011541\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.1.764.764.50/6c3e2315jw1f72lyyhmwpj20sg0lctcc.jpg?KID=imgbed,tva&Expires=1594466533&ssig=Z2MpXFhgcL\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1197161814\",\"type\":\"user\",\"user\":\"1197161814\",\"url\":\"https://weibo.com/u/1197161814\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.5.0.739.739.50/475b3d56ly8fma9ef0hdgj20ku0kjaaz.jpg?KID=imgbed,tva&Expires=1594466533&ssig=RFRbX84vd%2F\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1642635773\",\"type\":\"user\",\"user\":\"1642635773\",\"url\":\"https://weibo.com/u/1642635773\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.333.333.50/61e8a1fdly8ge6ztj8wq5j209909940y.jpg?KID=imgbed,tva&Expires=1594466533&ssig=9lj7bjTyyT\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1252373132\",\"type\":\"user\",\"user\":\"1252373132\",\"url\":\"https://weibo.com/u/1252373132\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.1080.1080.50/4aa5b28cly8gg5wn12o5jj20u00u0tbx.jpg?KID=imgbed,tva&Expires=1594466533&ssig=86grSe5ekI\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-1876912393\",\"type\":\"user\",\"user\":\"1876912393\",\"url\":\"https://weibo.com/u/1876912393\",\"avatar\":\"https://tva3.sinaimg.cn/crop.0.0.640.640.50/6fdf6909jw8eo3g8p8zn7j20hs0hsgmm.jpg?KID=imgbed,tva&Expires=1594466533&ssig=LR4%2B3zcnJL\",\"name\":\"--\",\"description\":\"@--\"},{\"id\":\"user-2266812804\",\"type\":\"user\",\"user\":\"2266812804\",\"url\":\"https://weibo.com/u/2266812804\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.127.127.50/871cd184gy1fgnjr7cz09j203k03kmx4.jpg?KID=imgbed,tva&Expires=1594466533&ssig=fSYNqJQ09F\",\"name\":\"XpeaceH\",\"description\":\"@XpeaceH\"},{\"id\":\"user-2585971834\",\"type\":\"user\",\"user\":\"2585971834\",\"url\":\"https://weibo.com/u/2585971834\",\"avatar\":\"https://tvax4.sinaimg.cn/crop.0.0.695.695.50/9a22cc7aly1fw2vbkjhrsj20jb0jbwgp.jpg?KID=imgbed,tva&Expires=1594466533&ssig=ouS6qKLLdN\",\"name\":\"\",\"description\":\"@\"},{\"id\":\"user-2079776363\",\"type\":\"user\",\"user\":\"2079776363\",\"url\":\"https://weibo.com/u/2079776363\",\"avatar\":\"https://tvax3.sinaimg.cn/crop.0.0.512.512.50/7bf6de6bly8gf867qb8flj20e80e8gmj.jpg?KID=imgbed,tva&Expires=1594466533&ssig=GaXdXHuZFT\",\"name\":\"_\",\"description\":\"@_\"},{\"id\":\"user-1938139103\",\"type\":\"user\",\"user\":\"1938139103\",\"url\":\"https://weibo.com/u/1938139103\",\"avatar\":\"https://tvax1.sinaimg.cn/crop.0.0.512.512.50/7385a7dfly8g17i57l0vvj20e80e8aai.jpg?KID=imgbed,tva&Expires=1594466533&ssig=TdKoRMLbZx\",\"name\":\"-\",\"description\":\"@-\"}]},\"lastChange\":null}","sync::user1897686351Hide":"s{\"hideList\":[]}","sync::user3655689037Config":"s{\"filter_follow_check\":false,\"filter_follow_check.frequency\":259200000,\"uncheck_follow_presenter\":true,\"show_article_without_follow\":true,\"filter_homepage_newest_feeds\":false,\"filter_homepage_single_group\":false,\"filter_homepage_multi_group\":false,\"filter_homepage_auto_load\":false,\"filter_homepage_desktop_notify\":false,\"filter_profile_show_all\":false,\"filter_manually_hide\":false,\"pause_filter\":false,\"filter_original_discover\":false,\"filter_original_follower\":false,\"filter_my_feed\":true,\"filter_my_original\":false,\"filter_mention_me\":false,\"filter_ad_feed\":false,\"filter_fans_top\":false,\"filter_weibo_product\":false,\"filter_tb_tm_feed\":false,\"filter_weibo_pay\":false,\"filter_user_like\":false,\"filter_fake_weibo\":false,\"filter_deleted_forward\":false,\"filter_comment_and_forward\":false,\"filter_vote\":false,\"filter_red_pack\":false,\"filter_image_tag\":false,\"filter_koi_forward\":false,\"filter_app_item\":false,\"filter_wenda\":false,\"filter_wenwo_dr\":false,\"filter_yizhibo\":false,\"filter_paid\":false,\"filter_multiple_topics_feed\":false,\"filter_Place\":false,\"filter_Movie\":false,\"filter_Book\":false,\"filter_Topic\":false,\"filter_Music\":false,\"filter_Stock\":false,\"flooding_author\":false,\"flooding_forward\":false,\"comment_layout_by_time\":false,\"comment_layout_hide_sub\":false,\"filter_comment_show_my\":false,\"filter_comment_face_count\":false,\"filter_comment_face_type\":false,\"filter_comment_wo_content\":false,\"filter_comment_with_forward\":false,\"clean_icons_level\":false,\"clean_icons_member\":false,\"clean_icons_approve\":false,\"clean_icons_approve_co\":false,\"clean_icons_approve_dead\":false,\"clean_icons_bigfun\":false,\"clean_icons_club\":false,\"clean_icons_v_girl\":false,\"clean_icons_supervisor\":false,\"clean_icons_taobao\":false,\"clean_icons_cheng\":false,\"clean_icons_gongyi\":false,\"clean_icons_zongyika\":false,\"clean_icons_others\":false,\"clean_follow_single\":false,\"clean_follow_at_me\":false,\"clean_follow_discover\":false,\"clean_follow_whisper\":false,\"clean_follow_video\":false,\"clean_follow_recommend\":false,\"clean_nav_logo_img\":false,\"clean_nav_main\":false,\"clean_nav_tv\":false,\"clean_nav_hot\":false,\"clean_nav_game\":false,\"clean_nav_hot_search\":false,\"clean_nav_notice_new\":false,\"clean_nav_new\":false,\"clean_left_level\":false,\"clean_left_home\":false,\"clean_left_fav\":false,\"clean_left_like\":false,\"clean_left_hot\":false,\"clean_left_tv\":false,\"clean_left_new_feed\":false,\"clean_left_friends\":false,\"clean_left_group_to_me\":false,\"clean_left_special\":false,\"clean_left_whisper\":false,\"clean_left_v_plus\":false,\"clean_left_new\":false,\"clean_left_news\":false,\"clean_left_count\":false,\"clean_middle_recommended_topic\":false,\"clean_middle_feed_recommend\":false,\"clean_middle_member_tip\":false,\"clean_right_info\":false,\"clean_right_ranks\":false,\"clean_right_hot_topic\":false,\"clean_right_interest\":false,\"clean_right_member\":false,\"clean_right_groups\":false,\"clean_right_recom_group_user\":false,\"clean_right_hongbao_rank\":false,\"clean_right_att_feed\":false,\"clean_right_notice\":false,\"clean_feed_recommend\":false,\"clean_feed_feed_outer_tip\":false,\"clean_feed_feed_tip\":false,\"clean_feed_group_tip\":false,\"clean_feed_vip_background\":false,\"clean_feed_last_pic\":false,\"clean_feed_pic_tag\":false,\"clean_feed_son_title\":false,\"clean_feed_card\":false,\"clean_feed_article_pay\":false,\"clean_feed_tag\":false,\"clean_feed_related_link\":false,\"clean_feed_source\":false,\"clean_feed_pop\":false,\"clean_feed_like\":false,\"clean_feed_like_comment\":false,\"clean_feed_like_attitude\":false,\"clean_feed_forward\":false,\"clean_feed_favorite\":false,\"clean_feed_promote_other\":false,\"clean_feed_report\":false,\"clean_feed_use_card_background\":false,\"clean_profile_move_things\":false,\"clean_profile_cover\":false,\"clean_profile_bg_img\":false,\"clean_profile_badge_icon\":false,\"clean_profile_verify\":false,\"clean_profile_edit_person_info\":false,\"clean_profile_stats\":false,\"clean_profile_my_data\":false,\"clean_profile_suggest_user\":false,\"clean_profile_group\":false,\"clean_profile_relation\":false,\"clean_profile_album\":false,\"clean_profile_hot_topic\":false,\"clean_profile_hot_weibo\":false,\"clean_profile_recommend_feed\":false,\"clean_profile_user_list\":false,\"clean_profile_hongbao\":false,\"clean_profile_wenwo_dr\":false,\"clean_profile_timeline\":false,\"clean_message_help\":false,\"clean_message_feedback\":false,\"clean_other_ads\":false,\"clean_other_music\":false,\"clean_other_template\":false,\"clean_other_home_tip\":false,\"clean_other_footer\":false,\"clean_other_im\":false,\"clean_other_im_news\":false,\"clean_other_back_top\":false,\"clean_other_tip\":false,\"clean_other_related_feeds\":false,\"clean_other_related_video\":false,\"clean_other_related_article\":false,\"clean_other_send_weibo\":false,\"layout_nav_auto_hide\":false,\"layout_nav_classical\":false,\"layout_nav_hide_name\":false,\"layout_left_messages\":false,\"layout_side_merge\":false,\"layout_side_position\":false,\"layout_side_show_all_groups\":false,\"layout_left_move\":true,\"layout_right_move\":true,\"layout_other_move\":true,\"chat_page_disable_unload_prompt\":false,\"font_family\":false,\"layout_avatar_shape\":false,\"layout_fast_face\":false,\"layout_locale_timezone\":false,\"feed_absolute_time\":false,\"layout_theme_apply\":false,\"layout_nav_dark\":false,\"layout_theme_color\":false,\"custom_css\":true,\"custom_css.css\":\"\",\"feed_no_space\":false,\"feed_source_at_bottom\":false,\"feed_author_content_nowrap\":false,\"feed_small_image\":false,\"feed_increase_width\":false,\"feed_button_order\":false,\"feed_button_order_comment\":false,\"feed_font_size\":false,\"feed_long_expand\":false,\"feed_content_line_break\":false,\"feed_link_use_url\":false,\"feed_unicode_emoji\":false,\"show_vote_result\":false,\"feed_no_custom_source\":false,\"view_edit_info\":false,\"view_article_inline\":false,\"feed_view_original\":false,\"feed_view_original.open\":\"page\",\"feed_download_image\":false,\"feed_download_image.name\":\"index\",\"image_preview_all\":false,\"feed_no_animated_image\":false,\"feed_built_in_video_player\":false,\"feed_disable_tag_dialog\":false,\"feed_low_reading_warn\":false,\"feed_only_mode\":false,\"script_import_export\":false,\"script_update_whatsnew\":true,\"script_update_whatsnew.last\":65,\"script_enable_debug\":false,\"script_debug_regex\":false,\"hide_hot_topic_large_read\":false,\"hide_hot_topic_large_read.quota\":20}","sync::user3655689037Follow":"s{\"fetchData\":{},\"lastList\":null,\"lastChange\":null}","sync::user3655689037Hide":"s{}"},"ts":1615206850173},"enabled":true,"position":2,"file_url":"https://greasyfork.org/scripts/3249-yet-another-weibo-filter/code/Yet%20Another%20Weibo%20Filter.user.js","uuid":"20fb3ab1-efad-4498-97b5-505e8def3469","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgIFlldCBBbm90aGVyIFdlaWJvIEZpbHRlcgovLyBAbmFtZTp6aCAgICAgICAgICAg6I2v5pa5IChZQVdGKQovLyBAbmFtZTp6aC1DTiAgICAgICAg6I2v5pa5IChZQVdGKQovLyBAbmFtZTp6aC1ISyAgICAgICAg6Jel5pa5IChZQVdGKQovLyBAbmFtZTp6aC1UVyAgICAgICAg6Jel5pa5IChZQVdGKQovLyBAbmFtZTplbiAgICAgICAgICAgWWV0IEFub3RoZXIgV2VpYm8gRmlsdGVyIChZQVdGKQovLyBAZGVzY3JpcHRpb24gICAgICAgU2luYSBXZWlibyBmZWVkIGZpbHRlciBieSBrZXl3b3JkcywgYXV0aG9ycywgdG9waWNzLCBzb3VyY2UsIGV0Yy47IE1vZGlmeWluZyB3ZWJwYWdlIGxheW91dAovLyBAZGVzY3JpcHRpb246emggICAgWWV0IEFub3RoZXIgV2VpYm8gRmlsdGVyIChZQVdGKSDmlrDmtarlvq7ljZrmoLnmja7lhbPplK7or43jgIHkvZzogIXjgIHor53popjjgIHmnaXmupDnrYnov4fmu6Tlvq7ljZrvvJvkv67mlLnniYjpnaIKLy8gQGRlc2NyaXB0aW9uOnpoLUNOIFlldCBBbm90aGVyIFdlaWJvIEZpbHRlciAoWUFXRikg5paw5rWq5b6u5Y2a5qC55o2u5YWz6ZSu6K+N44CB5L2c6ICF44CB6K+d6aKY44CB5p2l5rqQ562J6L+H5ruk5b6u5Y2a77yb5L+u5pS554mI6Z2iCi8vIEBkZXNjcmlwdGlvbjp6aC1ISyBZZXQgQW5vdGhlciBXZWlibyBGaWx0ZXIgKFlBV0YpIOaWsOa1quW+ruWNmuagueaTmumXnOmNteipnuOAgeS9nOiAheOAgeipsemhjOOAgeS+hua6kOetieevqemBuOW+ruWNmu+8m+S/ruaUueeJiOmdogovLyBAZGVzY3JpcHRpb246emgtVFcgWWV0IEFub3RoZXIgV2VpYm8gRmlsdGVyIChZQVdGKSDmlrDmtarlvq7ljZrmoLnmk5rpl5zpjbXoqZ7jgIHkvZzogIXjgIHoqbHpoYzjgIHkvobmupDnrYnnr6npgbjlvq7ljZrvvJvkv67mlLnniYjpnaIKLy8gQGRlc2NyaXB0aW9uOmVuICAgIFNpbmEgV2VpYm8gZmVlZCBmaWx0ZXIgYnkga2V5d29yZHMsIGF1dGhvcnMsIHRvcGljcywgc291cmNlLCBldGMuOyBNb2RpZnlpbmcgd2VicGFnZSBsYXlvdXQKLy8gQG5hbWVzcGFjZSAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS90aWFuc2gKLy8gQHZlcnNpb24gICAgICAgICAgIDQuMC45MAovLyBAbWF0Y2ggICAgICAgICAgICAgKjovLyoud2VpYm8uY29tLyoKLy8gQG1hdGNoICAgICAgICAgICAgICo6Ly90LmNuLyoKLy8gQGluY2x1ZGUgICAgICAgICAgICo6Ly93ZWliby5jb20vKgovLyBAaW5jbHVkZSAgICAgICAgICAgKjovLyoud2VpYm8uY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAgICo6Ly90LmNuLyoKLy8gQGV4Y2x1ZGUgICAgICAgICAgICo6Ly93ZWliby5jb20vYS9iaW5kLyoKLy8gQGV4Y2x1ZGUgICAgICAgICAgICo6Ly9hY2NvdW50LndlaWJvLmNvbS8qCi8vIEBleGNsdWRlICAgICAgICAgICAqOi8va2VmdS53ZWliby5jb20vKgovLyBAZXhjbHVkZSAgICAgICAgICAgKjovL3Bob3RvLndlaWJvLmNvbS8qCi8vIEBleGNsdWRlICAgICAgICAgICAqOi8vc2VjdXJpdHkud2VpYm8uY29tLyoKLy8gQGV4Y2x1ZGUgICAgICAgICAgICo6Ly92ZXJpZmllZC53ZWliby5jb20vKgovLyBAZXhjbHVkZSAgICAgICAgICAgKjovL3ZpcC53ZWliby5jb20vKgovLyBAZXhjbHVkZSAgICAgICAgICAgKjovL29wZW4ud2VpYm8uY29tLyoKLy8gQGV4Y2x1ZGUgICAgICAgICAgICo6Ly9wYXNzcG9ydC53ZWliby5jb20vKgovLyBAbm9mcmFtZXMKLy8gQHJ1bi1hdCAgICAgICAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBncmFudCAgICAgICAgICAgICBHTS5pbmZvCi8vIEBncmFudCAgICAgICAgICAgICBHTS54bWxIdHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgICAgICAgR00uYWRkVmFsdWVDaGFuZ2VMaXN0ZW5lcgovLyBAZ3JhbnQgICAgICAgICAgICAgR00ubGlzdFZhbHVlcwovLyBAZ3JhbnQgICAgICAgICAgICAgR00uZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICAgICAgIEdNLnNldFZhbHVlCi8vIEBncmFudCAgICAgICAgICAgICBHTS5kZWxldGVWYWx1ZQovLyBAZ3JhbnQgICAgICAgICAgICAgR00ubm90aWZpY2F0aW9uCi8vIEBncmFudCAgICAgICAgICAgICBHTS5yZWdpc3Rlck1lbnVDb21tYW5kCi8vIEBncmFudCAgICAgICAgICAgICBHTV9pbmZvCi8vIEBncmFudCAgICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgICAgICAgR01fYWRkVmFsdWVDaGFuZ2VMaXN0ZW5lcgovLyBAZ3JhbnQgICAgICAgICAgICAgR01fbGlzdFZhbHVlcwovLyBAZ3JhbnQgICAgICAgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgICAgICBHTV9kZWxldGVWYWx1ZQovLyBAZ3JhbnQgICAgICAgICAgICAgR01fbm90aWZpY2F0aW9uCi8vIEBncmFudCAgICAgICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kCi8vIEBub2NvbXBhdAovLyBAY29ubmVjdCAgICAgICAgICAgbWlhb3BhaS5jb20KLy8gQGNvbm5lY3QgICAgICAgICAgIHNpbmEuY24KLy8gQGNvbm5lY3QgICAgICAgICAgIHNpbmEuY29tLmNuCi8vIEBjb25uZWN0ICAgICAgICAgICBzaW5haW1nLmNuCi8vIEBjb25uZWN0ICAgICAgICAgICBzaW5hanMuY24KLy8gQGNvbm5lY3QgICAgICAgICAgIHQuY24KLy8gQGNvbm5lY3QgICAgICAgICAgIHdlaWJvLmNvbQovLyBAaWNvbiAgICAgICAgICAgICAgZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFFZ0FBQUJJQ0FNQUFBQmlNME4xQUFBQUJHZEJUVUVBQUxHUEMveGhCUUFBQUFGelVrZENBSzdPSE9rQUFBQmRVRXhVUlV4cGNlbU5TZW1OU2VtTlNlbU5TZW1OU2VtTlNlbU5TZW1OU2VtTlNka3RPdW1OU2VtTlNlbU5TZW1OU2VtTlNlbU5TZGt0T3RrdE90a3RPdGt0T3RrdE90a3RPdGt0T3RrdE90a3RPdGt0T3RrdE90a3RPdW1OU2RrdE9zWm9BaFVBQUFBZGRGSk9Vd0Fna0lBUTRNQkFZUEJBMEtBd2NMQlEwQkJnSUhEZ2dEQ3c4SkRBVDJjNnBRQUFBaUZKUkVGVVdNUE5sOWx5d3lBTVJjTU9NUWE3U2RNVi8vOW5OazRucVJjSmhPdk9WSTkrT0piRTVVb2NEbjhWckJOUnAzc283WVdSR3pCV0pTQWEzbFp5Zk1MQ1ZiRjR5a1ZqeWUxSmhWQjJqNFMrVVIwRnBCTWhOQ3VERWlsY0tJSWNqWlNpM0tPMFc2Y0tVZ2hVVUhMNW5rdEhKcVc4RUd6NmZ5VG1yN2RXODJER0s4K01FYjdaU0FMWU5pSWtVMjB1TW9EdTR0cTlqS3JaWW5sU0FDUy96WVNCdm5mYi9IenRNMDV1STYxMUZqZk9tTmI5WGdNSXFTazAxcGhnRFRUUjJncUJtL2o0cmZKZHFVK0sybEhIV2Y3c3NKVE0rb3pGdk1TRzFpVlY5RmJtS0FmWEVqeERVQzZLUVR5RFo3S1dOYUFaeVJMYWJVaU9xQWozQkI4bExab1NXSnZBNTZMRVV1b3F0eTJCcVpMRFNoSm9kUXpacGRDYmE4eXRINTNIclhVdTc3SzlScXlydk5hVjVwdEZRR1J5L1g3OENRS3BRZGF5NnpFTTAramZYbDVYcEFqWE5tdVNYb0RHdUh5Y005dE9CL01oMERWZWNDY1RpSEJoME5BL1lmdTNSazRCQVMxSUNnSVpFbWpva1MzVjFZS0daK1FlVjRNdVR6dUJwaW41WDRGNnNFZE5QV2g0MUNiQjQrL0lvQ1AwYjE0blNCd1VZQjlSMWFBV2ZnSnBFb2lCcTRkYldDY0JOUG01UUVhN0lKM2F6OVl3V2F6RDBtcFJ6dnQ2NFpzdTZIRTVYbERRMi93UkViVzM2RUFlVzBlNUlzV1hkTXlCemhXZ2tBSDFOVTl5ZHFENVVXbER1S2xyWTJVenVkc01xQytPWUw1d0JBVDBlU3FsOUNoT3l4eG9UT3BVcW00VXBiNnJhOGpFNWJYaXVUTms0N1FYaUU3NkFuYWNJbEpmMVc1WkFBQUFBRWxGVGtTdVFtQ0MKLy8gQGF1dGhvciAgICAgICAgICAgIOeUsOeUnyBodHRwOi8vd2VpYm8uY29tL3RzaDkwCi8vIEBsaWNlbnNlICAgICAgICAgICBNUEwtMi4wCi8vIEBob21lcGFnZVVSTCAgICAgICBodHRwczovL3RpYW5zaC5naXRodWIuaW8veWF3Zi8KLy8gQHN1cHBvcnRVUkwgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS90aWFuc2gveWF3Zi9pc3N1ZXMKLy8gPT0vVXNlclNjcmlwdD09CgovKiEKICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpYwogKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzCiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uCiAqLwoKLy8jcmVnaW9uIGN1c3RvbSBpbXBsZW1lbnRhdGlvbiBHTTQgcG9seWZpbGwKLyogZ2xvYmFsIEdNICovCi8qIGdsb2JhbCBHTV9nZXRWYWx1ZSwgR01fc2V0VmFsdWUsIEdNX2xpc3RWYWx1ZXMsIEdNX2RlbGV0ZVZhbHVlIEdNX2FkZFZhbHVlQ2hhbmdlTGlzdGVuZXIgKi8KLyogZ2xvYmFsIEdNX2luZm8gR01feG1saHR0cFJlcXVlc3QsIEdNX25vdGlmaWNhdGlvbiwgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCAqLwo7IChmdW5jdGlvbiAoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKCiAgbGV0IGJhc2UgPSB7fTsKICB0cnkgewogICAgaWYgKHR5cGVvZiBHTSA9PT0gJ29iamVjdCcpIHsKICAgICAgYmFzZSA9IEdNOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICB9IGVsc2UgewogICAgICBHTSA9IGJhc2U7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIH0KICB9IGNhdGNoIChlKSB7IC8qIEdNIG5vdCByZWFkeSAqLyB9CgoKICBpZiAodHlwZW9mIGJhc2UuaW5mbyAhPT0gJ29iamVjdCcpIHsKICAgIHRyeSB7CiAgICAgIGJhc2UuaW5mbyA9IEdNX2luZm87CiAgICAgIGNvbnN0IHZlcnNpb24gPSBiYXNlLmluZm8uc2NyaXB0LnZlcnNpb247CiAgICAgIGNvbnN0IG51bWJlciA9IE51bWJlcih2ZXJzaW9uLnNwbGl0KCcuJylbMl0pOwogICAgICBpZiAoIW51bWJlcikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICB9IGNhdGNoIChpbmZvRXhjZXB0aW9uKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignR01faW5mbyBpcyBub3QgYXZhaWxhYmxlLicpOwogICAgfQogIH0KCiAgaWYgKHR5cGVvZiBiYXNlLmdldFZhbHVlICE9PSAnZnVuY3Rpb24nKSB7CiAgICBpZiAodHlwZW9mIEdNX2dldFZhbHVlICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignR01fZ2V0VmFsdWUgaXMgbm90IGF2YWlsYWJsZS4nKTsKICAgIH0KICAgIGJhc2UuZ2V0VmFsdWUgPSBhc3luYyBmdW5jdGlvbiBnZXRWYWx1ZShuYW1lLCBkZWZhdWx0VmFsdWUpIHsKICAgICAgcmV0dXJuIEdNX2dldFZhbHVlKG5hbWUsIGRlZmF1bHRWYWx1ZSk7CiAgICB9OwogIH0KCiAgaWYgKHR5cGVvZiBiYXNlLnNldFZhbHVlICE9PSAnZnVuY3Rpb24nKSB7CiAgICBpZiAodHlwZW9mIEdNX3NldFZhbHVlICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignR01fc2V0VmFsdWUgaXMgbm90IGF2YWlsYWJsZS4nKTsKICAgIH0KICAgIGJhc2Uuc2V0VmFsdWUgPSBhc3luYyBmdW5jdGlvbiBzZXRWYWx1ZShuYW1lLCB2YWx1ZSkgewogICAgICByZXR1cm4gR01fc2V0VmFsdWUobmFtZSwgdmFsdWUpOwogICAgfTsKICB9CgogIGlmICh0eXBlb2YgYmFzZS5saXN0VmFsdWVzICE9PSAnZnVuY3Rpb24nKSB7CiAgICBpZiAodHlwZW9mIEdNX2xpc3RWYWx1ZXMgIT09ICdmdW5jdGlvbicpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdHTV9saXN0VmFsdWVzIGlzIG5vdCBhdmFpbGFibGUuJyk7CiAgICB9CiAgICBiYXNlLmxpc3RWYWx1ZXMgPSBhc3luYyBmdW5jdGlvbiBsaXN0VmFsdWVzKCkgewogICAgICByZXR1cm4gR01fbGlzdFZhbHVlcygpOwogICAgfTsKICB9CgogIGlmICh0eXBlb2YgYmFzZS5kZWxldGVWYWx1ZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgaWYgKHR5cGVvZiBHTV9kZWxldGVWYWx1ZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dNX2RlbGV0ZVZhbHVlIGlzIG5vdCBhdmFpbGFibGUuJyk7CiAgICB9CiAgICBiYXNlLmRlbGV0ZVZhbHVlID0gYXN5bmMgZnVuY3Rpb24gZGVsZXRlVmFsdWUobmFtZSkgewogICAgICByZXR1cm4gR01fZGVsZXRlVmFsdWUobmFtZSk7CiAgICB9OwogIH0KCiAgaWYgKHR5cGVvZiBiYXNlLmFkZFZhbHVlQ2hhbmdlTGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHsKICAgIGlmICh0eXBlb2YgR01fYWRkVmFsdWVDaGFuZ2VMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBHTS5hZGRWYWx1ZUNoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gYWRkVmFsdWVDaGFuZ2VMaXN0ZW5lcihuYW1lLCBjYWxsYmFjaykgewogICAgICAgIEdNX2FkZFZhbHVlQ2hhbmdlTGlzdGVuZXIobmFtZSwgY2FsbGJhY2spOwogICAgICB9OwogICAgfQogIH0KCiAgaWYgKHR5cGVvZiBiYXNlLnhtbEh0dHBSZXF1ZXN0ICE9PSAnZnVuY3Rpb24nKSB7CiAgICBpZiAodHlwZW9mIEdNX3htbGh0dHBSZXF1ZXN0ICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignR01feG1saHR0cFJlcXVlc3QgaXMgbm90IGF2YWlsYWJsZS4nKTsKICAgIH0KICAgIEdNLnhtbEh0dHBSZXF1ZXN0ID0gZnVuY3Rpb24geG1sSHR0cFJlcXVlc3QoZGV0YWlscykgewogICAgICByZXR1cm4gR01feG1saHR0cFJlcXVlc3QoZGV0YWlscyk7CiAgICB9OwogIH0KCiAgaWYgKHR5cGVvZiBHTS5ub3RpZmljYXRpb24gIT09ICdmdW5jdGlvbicpIHsKICAgIGlmICh0eXBlb2YgR01fbm90aWZpY2F0aW9uID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIEdNLm5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uIG5vdGlmaWNhdGlvbihkZXRhaWxzLCBvbmRvbmUpIHsKICAgICAgICByZXR1cm4gR01fbm90aWZpY2F0aW9uKGRldGFpbHMsIG9uZG9uZSk7CiAgICAgIH07CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBOb3RpZmljYXRpb24gPT09ICdmdW5jdGlvbicpIHsKICAgICAgR00ubm90aWZpY2F0aW9uID0gZnVuY3Rpb24gbm90aWZpY2F0aW9uKGRldGFpbHMsIG9uZG9uZSkgewogICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oZGV0YWlscy50aXRsZSwgewogICAgICAgICAgYm9keTogZGV0YWlscy50ZXh0LAogICAgICAgICAgaWNvbjogZGV0YWlscy5pbWFnZSwKICAgICAgICB9KTsKICAgICAgICBpZiAoZGV0YWlscy5vbmNsaWNrKSB7CiAgICAgICAgICBub3RpZmljYXRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGRldGFpbHMub25jbGljaygpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmIChkZXRhaWxzLm9uZG9uZSkgewogICAgICAgICAgbm90aWZpY2F0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBkZXRhaWxzLm9uZG9uZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9OwogICAgfQogIH0KCiAgaWYgKHR5cGVvZiBHTS5yZWdpc3Rlck1lbnVDb21tYW5kICE9PSAnZnVuY3Rpb24nKSB7CiAgICBpZiAodHlwZW9mIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgR00ucmVnaXN0ZXJNZW51Q29tbWFuZCA9IGZ1bmN0aW9uIHJlZ2lzdGVyTWVudUNvbW1hbmQoY2FwdGlvbiwgY29tbWFuZEZ1bmMsIGFjY2Vzc0tleSkgewogICAgICAgIHJldHVybiBHTV9yZWdpc3Rlck1lbnVDb21tYW5kKGNhcHRpb24sIGNvbW1hbmRGdW5jLCBhY2Nlc3NLZXkpOwogICAgICB9OwogICAgfQogIH0KCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gY3VzdG9tIGltcGxlbWVudGF0aW9uIGludGVyZXN0cwovKioKICog5Z+65pys5LiK5rKh5pyJ55So5oi35Lya5a+55YW06Laj5o6o6I2Q5oSf5YW06LajCiAqIOiAjOS4lOWFtOi2o+aOqOiNkOS8muWcqOayoeacieaYjuehruaPkOekuueUqOaIt+eahOaDheWGteS4i+WFs+azqOS4gOaJuei0puWPtwogKiDnlKjmiLflnKjmk43kvZzml7bnlJroh7PkuI3kvJrooqvmj5DnpLrlsIbkvJrlhbPms6jotKblj7fvvIzku6Xlj4rkvJrlhbPms6jlk6rkupvotKblj7cKICog5Zug5q2k6L+Z5Liq6ISa5pys6K+V5Zu+5bGP6JS96K+l6aG16Z2i77yM5LiU5LiN5Lya5o+Q5L6b5Lu75L2V6K6+572uCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGlmIChbCiAgICAnaHR0cHM6Ly93ZWliby5jb20vbmd1aWRlLycsCiAgICAnaHR0cHM6Ly93d3cud2VpYm8uY29tL25ndWlkZS8nLAogIF0uc29tZShwcmVmaXggPT4gbG9jYXRpb24uaHJlZi5zdGFydHNXaXRoKHByZWZpeCkpKSB7CiAgICBsb2NhdGlvbi5ocmVmID0gJy9ob21lJzsKICAgIHRocm93IG5ldyBFcnJvcignWUFXRiB8IG5ndWlkZSBwYWdlIGZvdW5kLCBza2lwIGZvbGxvd2luZyBleGVjdXRpb25zJyk7CiAgfQoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBjdXN0b20gaW1wbGVtZW50YXRpb24gbm9mcmFtZXMKOyAoZnVuY3Rpb24gKCkgewogIC8vIOS4jeaYr+avj+S4queMtOWtkOmDveaUr+aMgSBub2ZyYW1lc++8jOaJgOS7pemineWkluajgOafpeS4gOS4iwogIGlmICh0b3AgIT09IHNlbGYpIHRocm93IG5ldyBFcnJvcignWUFXRiB8IE5vdCBpbiB0b3AgZnJhbWUsIHN0b3AuJyk7Cn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gcmVwbGFjZW1lbnQgb2YgeWFvZmFuZzovL2NvbW1vbi9nbG9iYWwvZW52LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgfHwge307CiAgY29uc3QgZW52ID0geWF3Zi5lbnYgPSB7fTsKCiAgZW52Lm5hbWUgPSAnVXNlclNjcmlwdCc7CgogIGNvbnN0IGNvbmZpZyA9IGVudi5jb25maWcgPSB7fTsKCiAgLy8gU1RLIOebuOWFs+aTjeS9nOaXoOazleaPkOS+m++8jOWboOS4uueMtOWtkOaXoOazleS/neivgSBkb2N1bWVudC1zdGFydAogIGNvbmZpZy5zdGtXcmFwU3VwcG9ydGVkID0gZmFsc2U7CiAgY29uZmlnLnN0a0luZm9TdXBwb3J0ZWQgPSBmYWxzZTsKICBjb25maWcuY29udGV4dE1lbnVTdXBwb3J0ZWQgPSBmYWxzZTsKICBjb25maWcucmVxdWVzdEJsb2NraW5nU3VwcG9ydGVkID0gZmFsc2U7CiAgY29uZmlnLmNoYXRJblBhZ2VTdXBwb3J0ZWQgPSBmYWxzZTsKCiAgY29uZmlnLmV4dGVybmFsTWVudVN1cHBvcnRlZCA9IEJvb2xlYW4oR00ucmVnaXN0ZXJNZW51Q29tbWFuZCk7CgogIGNvbmZpZy5jb25zb2xlUHJlZml4ID0gJ1lBV0YnOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiByZXBsYWNlbWVudCBvZiB5YW9mYW5nOi8vY29tbW9uL2Jyb3dzZXIvYnJvd3Nlci5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmIHx8IHt9OwogIGNvbnN0IGJyb3dzZXJJbmZvID0geWF3Zi5icm93c2VySW5mbyA9IHt9OwoKICBjb25zdCBicm93c2VyTmFtZSA9IFsnRmlyZWZveCcsICdDaHJvbWUnXS5maW5kKG5hbWUgPT4gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhuYW1lKSk7CiAgYnJvd3NlckluZm8ubmFtZSA9IGJyb3dzZXJOYW1lIHx8ICdVbmtub3duJzsKCiAgaWYgKGJyb3dzZXJOYW1lID09PSAnRmlyZWZveCcpIHsKICAgIHRyeSB7CiAgICAgIGJyb3dzZXJJbmZvLmZ1bGxWZXJzaW9uID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvRmlyZWZveFwvKFtcZC5dKykvKVsxXTsKICAgICAgYnJvd3NlckluZm8ubWFqb3JWZXJzaW9uID0gcGFyc2VJbnQoYnJvd3NlckluZm8uZnVsbFZlcnNpb24sIDEwKTsKICAgIH0gY2F0Y2ggKGZ4VWFFcnIpIHsgLyogaWdub3JlICovIH0KICB9CiAgaWYgKGJyb3dzZXJOYW1lID09PSAnQ2hyb21lJykgewogICAgdHJ5IHsKICAgICAgYnJvd3NlckluZm8uZnVsbFZlcnNpb24gPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbWVcLyhbXGQuXSspLylbMV07CiAgICAgIGJyb3dzZXJJbmZvLm1ham9yVmVyc2lvbiA9IHBhcnNlSW50KGJyb3dzZXJJbmZvLmZ1bGxWZXJzaW9uLCAxMCk7CiAgICB9IGNhdGNoIChDclVhRXJyKSB7IC8qIGlnbm9yZSAqLyB9CiAgfQoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29tbW9uL3V0aWwvZnVuY3Rvb2xzLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgfHwge307CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbCA9IHlhd2YudXRpbCB8fCB7fTsKICBjb25zdCBmdW5jdG9vbHMgPSB1dGlsLmZ1bmN0b29scyA9IHV0aWwuZnVuY3Rvb2xzIHx8IHt9OwoKICAvKioKICAgKiBAdGVtcGxhdGUgVAogICAqIEBwYXJhbSB7VCAmIEZ1bmN0aW9ufSBmCiAgICogQHJldHVybnMge1R9CiAgICovCiAgZnVuY3Rvb2xzLm9uY2UgPSBmdW5jdGlvbiAoZikgewogICAgbGV0IGV4ZWN1dGVkID0gZmFsc2UsIHZhbHVlID0gbnVsbDsKICAgIGNvbnN0IG5hbWUgPSBmLm5hbWUsIGxlbmd0aCA9IGYubGVuZ3RoOwogICAgY29uc3Qgd3JhcCA9IGZ1bmN0aW9uICguLi5hcmdzKSB7CiAgICAgIGlmIChleGVjdXRlZCkgcmV0dXJuIHZhbHVlOwogICAgICB2YWx1ZSA9IGYoLi4uYXJncyk7CiAgICAgIGYgPSBudWxsOwogICAgICBleGVjdXRlZCA9IHRydWU7CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod3JhcCwgJ25hbWUnLCB7IGdldDogKCkgPT4gbmFtZSB9KTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3cmFwLCAnbGVuZ3RoJywgeyBnZXQ6ICgpID0+IGxlbmd0aCB9KTsKICAgIHJldHVybiB3cmFwOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb21tb24vdXRpbC91cmxzLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgfHwge307CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbCA9IHlhd2YudXRpbCB8fCB7fTsKICBjb25zdCB1cmxzID0gdXRpbC51cmxzID0gdXRpbC51cmxzIHx8IHt9OwoKICAvKioKICAgKiBAcGFyYW0ge0Jsb2J9IGJsb2IKICAgKiBAcmV0dXJucyB7c3RyaW5nfQogICAqLwogIHVybHMuYmxvYlRvRGF0YVVybCA9IGZ1bmN0aW9uIChibG9iKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gewogICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCk7CiAgICAgIH0pOwogICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTsKICAgIH0pOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3V0aWwvcHJpb3JpdHkuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2YgPSB3aW5kb3cueWF3ZiB8fCB7fTsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsID0geWF3Zi51dGlsIHx8IHt9OwoKICB1dGlsLnByaW9yaXR5ID0gewogICAgRklSU1Q6IDEwMDAsCiAgICBISUdIOiA1MDAsCiAgICBCRUZPUkU6IDEwMCwKICAgIERFRkFVTFQ6IDAsCiAgICBBRlRFUjogLTEwMCwKICAgIExPVzogLTUwMCwKICAgIExBU1Q6IC0xMDAwLAogIH07CgoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC91dGlsL2RlYnVnLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgfHwge307CiAgY29uc3QgZW52ID0geWF3Zi5lbnY7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbCA9IHlhd2YudXRpbCB8fCB7fTsKCiAgY29uc3QgcHJlZml4ID0gZW52LmNvbmZpZy5jb25zb2xlUHJlZml4OwogIGNvbnN0IHBlbmRpbmcgPSBbXTsKICBjb25zdCBwZW5kaW5nT3V0cHV0ID0gKC4uLmFyZ3MpID0+IHsgcGVuZGluZy5wdXNoKGFyZ3MpOyB9OwogIGNvbnN0IG91dHB1dCA9IChtZXNzYWdlLCAuLi5hcmdzKSA9PiB7CiAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7CiAgICAgIGNvbnNvbGUubG9nKGAke3ByZWZpeH0gfCAke21lc3NhZ2V9YCwgLi4uYXJncyk7CiAgICB9IGVsc2UgaWYgKG1lc3NhZ2UgIT09IHZvaWQgMCkgewogICAgICBjb25zb2xlLmxvZyhgJHtwcmVmaXh9IHxgLCBtZXNzYWdlLCAuLi5hcmdzKTsKICAgIH0KICB9OwogIGNvbnN0IG5vb3AgPSAoKSA9PiB7IH07CgogIGxldCBkZWJ1ZyA9IHBlbmRpbmdPdXRwdXQ7CiAgbGV0IGRlYnVnRW5hYmxlZCA9IG51bGw7CgoKICAvKiogQHR5cGUge01hcDxGdW5jdGlvbiwgbnVtYmVyPn0gKi8KICBjb25zdCB0aW1lVXNhZ2UgPSBuZXcgTWFwKCk7CiAgLyoqCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYwogICAqLwogIHV0aWwucGVyZm9ybWFuY2UgPSBmdW5jdGlvbiAoZnVuYywgLi4uYXJncykgewogICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICBjb25zdCByZXN1bHQgPSBmdW5jKC4uLmFyZ3MpOwogICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lIC0gc3RhcnRUaW1lOwogICAgaWYgKGRlYnVnRW5hYmxlZCAhPT0gZmFsc2UpIHsKICAgICAgaWYgKCF0aW1lVXNhZ2UuaGFzKGZ1bmMpKSB0aW1lVXNhZ2Uuc2V0KGZ1bmMsIGR1cmF0aW9uKTsKICAgICAgZWxzZSB0aW1lVXNhZ2Uuc2V0KGZ1bmMsIHRpbWVVc2FnZS5nZXQoZnVuYykgKyBkdXJhdGlvbik7CiAgICAgIHNob3dQZXJmb3JtYW5jZSgpOwogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICBsZXQgc2hvd1BlcmZvcm1hbmNlUGVuZGluZyA9IG51bGw7CiAgY29uc3Qgc2hvd1BlcmZvcm1hbmNlID0gZnVuY3Rpb24gc2hvd1BlcmZvcm1hbmNlKCkgewogICAgaWYgKHNob3dQZXJmb3JtYW5jZVBlbmRpbmcgPT09IGZhbHNlKSB7CiAgICAgIHNob3dQZXJmb3JtYW5jZVBlbmRpbmcgPSB0cnVlOwogICAgfQogICAgaWYgKHNob3dQZXJmb3JtYW5jZVBlbmRpbmcpIHJldHVybjsKICAgIHNob3dQZXJmb3JtYW5jZVBlbmRpbmcgPSBmYWxzZTsKICAgIHV0aWwuZGVidWcoJ1BlcmZvcm1hbmNlIG1lYW5zdXJlOiAnLCB0aW1lVXNhZ2UpOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IHNob3dOZXh0ID0gc2hvd1BlcmZvcm1hbmNlUGVuZGluZyA9PT0gdHJ1ZTsKICAgICAgc2hvd1BlcmZvcm1hbmNlUGVuZGluZyA9IG51bGw7CiAgICAgIGlmIChzaG93TmV4dCkgc2hvd1BlcmZvcm1hbmNlKCk7CiAgICB9LCAxMGUzKTsKICB9OwoKICBjb25zdCBzZXRFbmFibGVkID0gZnVuY3Rpb24gKGVuYWJsZWQpIHsKICAgIGNvbnN0IG1lc3NhZ2VzID0gcGVuZGluZy5zcGxpY2UoMCk7CiAgICBkZWJ1Z0VuYWJsZWQgPSBlbmFibGVkOwogICAgaWYgKGVuYWJsZWQpIHsKICAgICAgbWVzc2FnZXMuZm9yRWFjaChhcmdzID0+IHsgb3V0cHV0KC4uLmFyZ3MpOyB9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICBkZWJ1ZyA9IG91dHB1dDsgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgfSBlbHNlIHsKICAgICAgdGltZVVzYWdlLmNsZWFyKCk7CiAgICAgIGRlYnVnID0gbm9vcDsKICAgIH0KICB9OwoKICB1dGlsLmRlYnVnID0gKC4uLmFyZ3MpID0+IGRlYnVnKC4uLmFyZ3MpOwogIHV0aWwuZGVidWcuc2V0RW5hYmxlZCA9IHNldEVuYWJsZWQ7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3V0aWwvaTE4bi5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmIHx8IHt9OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWwgPSB5YXdmLnV0aWwgfHwge307CgogIGxldCBsYW5ndWFnZSA9IHV0aWwubGFuZ3VhZ2UgPSBudWxsOwogIGNvbnN0IGkxOG4gPSBuZXcgUHJveHkoT2JqZWN0LmNyZWF0ZShudWxsKSwgewogICAgZ2V0OiAoc2VsZiwga2V5KSA9PiB7CiAgICAgIHJldHVybiAoc2VsZltrZXldIHx8IHt9KVtsYW5ndWFnZSB8fCAnY24nXSB8fCBudWxsOwogICAgfSwKICAgIHNldDogKHNlbGYsIGtleSwgdmFsdWUpID0+IHsKICAgICAgY29uc3QgZW50cnkgPSBzZWxmW2tleV0gPSB7fTsKICAgICAgZW50cnkuY24gPSB2YWx1ZS5jbjsKICAgICAgZW50cnkudHcgPSB2YWx1ZS50dyB8fCBlbnRyeS5jbjsKICAgICAgZW50cnkuaGsgPSB2YWx1ZS5oayB8fCBlbnRyeS50dzsKICAgICAgZW50cnkuZW4gPSB2YWx1ZS5lbiB8fCBlbnRyeS5jbjsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogIH0pOwoKICBpMThuLmxhbmd1YWdlID0gewogICAgZW46ICdlbicsCiAgICBjbjogJ2NuJywKICAgIGhrOiAnaGsnLAogICAgdHc6ICd0dycsCiAgfTsKICBpMThuLmxhbmd1YWdlQ29kZSA9IHsKICAgIGVuOiAnZW4nLAogICAgY246ICd6aC1DTicsCiAgICBoazogJ3poLUhLJywKICAgIHR3OiAnemgtVFcnLAogIH07CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1dGlsLCAnaTE4bicsIHsKICAgIGdldDogKCkgPT4gaTE4biwKICAgIHNldDogbGFuZyA9PiB7CiAgICAgIGNvbnN0IGxvd2VyID0gKCcnICsgbGFuZykudG9Mb3dlckNhc2UoKTsKICAgICAgaWYgKGxvd2VyID09PSAnemgtY24nKSBsYW5ndWFnZSA9ICdjbic7CiAgICAgIGVsc2UgaWYgKGxvd2VyID09PSAnemgtaGsnKSBsYW5ndWFnZSA9ICdoayc7CiAgICAgIGVsc2UgaWYgKGxvd2VyID09PSAnemgtdHcnKSBsYW5ndWFnZSA9ICd0dyc7CiAgICAgIGVsc2UgaWYgKGxvd2VyID09PSAnZW4nKSBsYW5ndWFnZSA9ICdlbic7CiAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOwogICAgICB1dGlsLmxhbmd1YWdlID0gbGFuZ3VhZ2U7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvdXRpbC9zdHJpbmdzLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWwgPSB5YXdmLnV0aWwgfHwge307CgogIGNvbnN0IHN0cmluZ3MgPSB1dGlsLnN0cmluZ3MgPSB7fTsKCiAgLyoqCiAgICog5bCG5b6u5Y2a5Lit5bim5pyJ4oCc5LiH4oCd5oiW4oCc5Lq/4oCd55qE5a2X5Liy6L2s5o2i5Li65pWw5a2XCiAgICog5b6u5Y2a55qE4oCc5LiH4oCd4oCc5Lq/4oCd5rKh5pyJ6ZKI5a+55LiN5ZCM6K+t6KiA5YGa5aSE55CG77yM57mB5L2T5a2X5ZKM6Iux5paH55So5oi35Lmf5Lya55yL5Yiw6L+Z5Lik5Liq5a2XCiAgICogQHBhcmFtIHtzdHJpbmd9IHN0cgogICAqIEByZXR1cm5zIHtudW1iZXJ9CiAgICovCiAgc3RyaW5ncy5wYXJzZWludCA9IHN0ciA9PiB7CiAgICByZXR1cm4gTnVtYmVyKHN0ci5yZXBsYWNlKCfkuIcnLCAnZTQnKS5yZXBsYWNlKCfkur8nLCAnZTgnKSk7CiAgfTsKCiAgLyoqCiAgICog55Sf5oiQ5LiA5Liq6ZqP5py65a2X56ym5LiyCiAgICogQHJldHVybnMge3N0cmluZ30KICAgKi8KICBzdHJpbmdzLnJhbmRLZXkgPSAoKSA9PiB7CiAgICBjb25zdCByYW5kID0gbmV3IFVpbnQ4QXJyYXkoNjQpOwogICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhyYW5kKTsKICAgIHJldHVybiBbLi4ucmFuZF0ubWFwKHZhbHVlID0+IHZhbHVlLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAwKSkuam9pbignJyk7CiAgfTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvdXRpbC9jc3MuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2YgPSB3aW5kb3cueWF3ZiB8fCB7fTsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsID0geWF3Zi51dGlsIHx8IHt9OwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzID0gdXRpbC5jc3MgfHwge307CgogIGNzcy5hZGQgPSBmdW5jdGlvbiAoY3NzKSB7CiAgICBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmJvZHkgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgc3R5bGUudGV4dENvbnRlbnQgPSBjc3M7CiAgICBsZXQgcmVtb3ZlZCA9IGZhbHNlOwogICAgbGV0IHJlYWR5ID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICBpZiAodGFyZ2V0KSB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgZWxzZSB7CiAgICAgIHJlYWR5ID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiBhZGRTdHlsZSgpIHsKICAgICAgICAgIGlmIChyZW1vdmVkKSB7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgICAgICAgIGlmICghdGFyZ2V0KSBzZXRUaW1lb3V0KGFkZFN0eWxlLCAxMCk7CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgfQogICAgICAgIH0sIDEwKTsKICAgICAgfSk7CiAgICB9CiAgICBjb25zdCByZW1vdmUgPSAoKSA9PiB7CiAgICAgIGlmICghc3R5bGUucGFyZW50Tm9kZSkgcmV0dXJuOwogICAgICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTsKICAgICAgcmVtb3ZlZCA9IHRydWU7CiAgICB9OwogICAgY29uc3QgYXBwZW5kID0gY3NzID0+IHsKICAgICAgc3R5bGUudGV4dENvbnRlbnQgKz0gJ1xuJyArIGNzczsKICAgIH07CiAgICByZXR1cm4geyBhcHBlbmQsIHJlbW92ZSwgcmVhZHkgfTsKICB9OwoKICBjb25zdCBzdHlsZSA9IGNzcy5hZGQoJycpOwogIGNzcy5hcHBlbmQgPSBmdW5jdGlvbiAoY3NzKSB7CiAgICBzdHlsZS5hcHBlbmQoJ1xuJyArIGNzcyk7CiAgfTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvdXRpbC9pbmplY3QuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2YgPSB3aW5kb3cueWF3ZiB8fCB7fTsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsID0geWF3Zi51dGlsIHx8IHt9OwoKICBjb25zdCBzdHJpbmdzID0gdXRpbC5zdHJpbmdzOwoKICBsZXQgaWRJbmRleCA9IDA7CiAgY29uc3QgaWQgPSB0eXBlID0+IGAke3R5cGV9XyR7KytpZEluZGV4fV8ke3N0cmluZ3MucmFuZEtleSgpfWA7CgogIGNvbnN0IGJhc2VLZXkgPSAnX3lhd2ZfJyArIHN0cmluZ3MucmFuZEtleSgpOwogIGNvbnN0IHJlcGx5S2V5ID0gYmFzZUtleSArICdfYWNrJzsKCiAgY2xhc3MgQ2FsbGJhY2sgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuaWQgPSBpZCgnY2FsbGJhY2snKTsKICAgIH0KICAgIGludm9rZSguLi5wYXJhbXMpIHsKICAgICAgY29uc3QgcmVzcCA9IG5ldyBDdXN0b21FdmVudChyZXBseUtleSwgewogICAgICAgIGRldGFpbDogSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnY2FsbGJhY2snLCBjYWxsYmFjazogdGhpcy5pZCwgcGFyYW1zIH0pLAogICAgICB9KTsKICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQocmVzcCk7CiAgICB9CiAgfTsKCiAgLyoqIEB0eXBlIHtNYXA8c3RyaW5nLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiBhbnk+fSAqLwogIGNvbnN0IGNhbGxiYWNrcyA9IG5ldyBNYXAoKTsKICBsZXQgZmlyc3RDYWxsID0gdHJ1ZTsKCiAgY29uc3QgaW5pdCA9IGZ1bmN0aW9uIChbYmFzZUtleSwgcmVwbHlLZXldKSB7CiAgICBsZXQgaW52b2tlSW5kZXggPSAwOwogICAgLyoqIEB0eXBlIHtNYXA8bnVtYmVyLCAodmFsdWU6IGFueSkgPT4gYW55Pn0gKi8KICAgIGNvbnN0IHJlc29sdmVyID0gbmV3IE1hcCgpOwogICAgLyoqIEB0eXBlIHtNYXA8c3RyaW5nLCBTZXQ8KCkgPT4gYW55Pj59ICovCiAgICBjb25zdCBjYWxsYmFja3MgPSBuZXcgTWFwKCk7CiAgICBjb25zdCBpbnZva2UgPSBmdW5jdGlvbiAoeyBtZXRob2Q6IGtleSB9KSB7CiAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbiAoLi4ucGFyYW1zKSB7CiAgICAgICAgY29uc3QgaWQgPSArK2ludm9rZUluZGV4OwogICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgcmVzb2x2ZXIuc2V0KGlkLCByZXNvbHZlKTsKICAgICAgICB9KTsKICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChiYXNlS2V5LCB7CiAgICAgICAgICBkZXRhaWw6IEpTT04uc3RyaW5naWZ5KHsgaWQsIG1ldGhvZDoga2V5LCBwYXJhbXMgfSksCiAgICAgICAgfSk7CiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH07CiAgICB9OwogICAgY29uc3QgY2FsbGJhY2sgPSBmdW5jdGlvbiAoeyBjYWxsYmFjazoga2V5IH0pIHsKICAgICAgY29uc3QgY29sbGVjdGlvbiA9IG5ldyBTZXQoKTsKICAgICAgY2FsbGJhY2tzLnNldChrZXksIGNvbGxlY3Rpb24pOwogICAgICByZXR1cm4gewogICAgICAgIGFkZENhbGxiYWNrOiBmdW5jdGlvbiAoZnVuYykgeyBjb2xsZWN0aW9uLmFkZChmdW5jKTsgfSwKICAgICAgICByZW1vdmVDYWxsYmFjazogZnVuY3Rpb24gKGZ1bmMpIHsgY29sbGVjdGlvbi5kZWxldGUoZnVuYyk7IH0sCiAgICAgIH07CiAgICB9OwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIocmVwbHlLZXksIGZ1bmN0aW9uIChldmVudCkgewogICAgICBjb25zdCBkZXRhaWwgPSBKU09OLnBhcnNlKGV2ZW50LmRldGFpbCk7CiAgICAgIGlmIChkZXRhaWwudHlwZSA9PT0gJ3Jlc3BvbnNlJykgewogICAgICAgIHJlc29sdmVyLmdldChkZXRhaWwuaWQpKGRldGFpbC5lcnJvciA/IFByb21pc2UucmVqZWN0KGRldGFpbC5lcnJvcikgOiBkZXRhaWwucmVzdWx0KTsKICAgICAgICByZXNvbHZlci5kZWxldGUoZGV0YWlsLmlkKTsKICAgICAgfSBlbHNlIGlmIChkZXRhaWwudHlwZSA9PT0gJ2NhbGxiYWNrJykgewogICAgICAgIEFycmF5LmZyb20oY2FsbGJhY2tzLmdldChkZXRhaWwuY2FsbGJhY2spIHx8IFtdKS5mb3JFYWNoKGZ1bmMgPT4gewogICAgICAgICAgdHJ5IHsgZnVuYyguLi5kZXRhaWwucGFyYW1zKTsgfSBjYXRjaCAoZSkgeyAvKiAqLyB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAgY29uc3QgcnVuID0gZnVuY3Rpb24gKGZ1bmMsIHBhcmFtcykgewogICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHBhcmFtcywgZnVuY3Rpb24gKGtleSwgdmFsKSB7CiAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnICYmIHZhbC5fdHlwZSA9PT0gJ21ldGhvZCcgJiYgdmFsLmludm9rZSA9PT0gYmFzZUtleSkgewogICAgICAgICAgcmV0dXJuIGludm9rZSh2YWwpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgJiYgdmFsLl90eXBlID09PSAnY2FsbGJhY2snICYmIHZhbC5pbnZva2UgPT09IGJhc2VLZXkpIHsKICAgICAgICAgIHJldHVybiBjYWxsYmFjayh2YWwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gdmFsOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBmdW5jKC4uLnBhcnNlZCk7CiAgICB9OwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgYmFzZUtleSwgewogICAgICBjb25maWd1cmFibGU6IGZhbHNlLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgd3JpdGFibGU6IGZhbHNlLAogICAgICB2YWx1ZTogcnVuLAogICAgfSk7CiAgfTsKCiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYmFzZUtleSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBjb25zdCBkZXRhaWwgPSBKU09OLnBhcnNlKGV2ZW50LmRldGFpbCk7CiAgICBjb25zdCB7IGlkLCBtZXRob2QsIHBhcmFtcyB9ID0gZGV0YWlsOwogICAgbGV0IHJlc3VsdCA9IG51bGwsIGVycm9yID0gbnVsbDsKICAgIHRyeSB7CiAgICAgIHJlc3VsdCA9IGNhbGxiYWNrcy5nZXQobWV0aG9kKSguLi5wYXJhbXMpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBlcnJvciA9IGU7CiAgICB9CiAgICBjb25zdCByZXNwID0gbmV3IEN1c3RvbUV2ZW50KGJhc2VLZXkgKyAnX2FjaycsIHsKICAgICAgZGV0YWlsOiBKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdyZXNwb25zZScsIGlkLCBlcnJvciwgcmVzdWx0IH0pLAogICAgfSk7CiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChyZXNwKTsKICB9KTsKCiAgY29uc3Qgc2VyaWFsaXplID0gZnVuY3Rpb24gKHBhcmFtKSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoSlNPTi5zdHJpbmdpZnkocGFyYW0sIGZ1bmN0aW9uIChrZXksIHZhbCkgewogICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGNvbnN0IGtleSA9IGlkKCdtZXRob2QnKTsKICAgICAgICBjYWxsYmFja3Muc2V0KGtleSwgdmFsKTsKICAgICAgICByZXR1cm4geyBfdHlwZTogJ21ldGhvZCcsIG1ldGhvZDoga2V5LCBpbnZva2U6IGJhc2VLZXkgfTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0JyAmJiB2YWwgaW5zdGFuY2VvZiBDYWxsYmFjaykgewogICAgICAgIGNvbnN0IGtleSA9IHZhbC5pZDsKICAgICAgICByZXR1cm4geyBfdHlwZTogJ2NhbGxiYWNrJywgY2FsbGJhY2s6IGtleSwgaW52b2tlOiBiYXNlS2V5IH07CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbDsKICAgIH0pKTsKICB9OwoKICB1dGlsLmluamVjdCA9IGZ1bmN0aW9uIChmdW5jLCAuLi5wYXJhbXMpIHsKICAgIGlmICh0eXBlb2YgZnVuYyAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7CiAgICBjb25zdCBzZXR1cFNjcmlwdCA9IGZpcnN0Q2FsbCA/IGAoJHtpbml0fSgke0pTT04uc3RyaW5naWZ5KFtiYXNlS2V5LCByZXBseUtleV0pfSkpO2AgOiAnJzsgZmlyc3RDYWxsID0gZmFsc2U7CiAgICBjb25zdCBleGVjdXRlU2NyaXB0ID0gc2V0dXBTY3JpcHQgKyBgd2luZG93WyR7SlNPTi5zdHJpbmdpZnkoYmFzZUtleSl9XSgke2Z1bmN9LCR7c2VyaWFsaXplKHBhcmFtcyl9KTtgOwogICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICBzY3JpcHQudGV4dENvbnRlbnQgPSBleGVjdXRlU2NyaXB0OwogICAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIHNjcmlwdC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHNjcmlwdCk7CiAgICAgIH0pOwogICAgICBpZiAodGFyZ2V0KSB0YXJnZXQuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKICAgICAgZWxzZSBzZXRUaW1lb3V0KGZ1bmN0aW9uIGluamVjdFNjcmlwdCgpIHsKICAgICAgICBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmJvZHkgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogICAgICAgIGlmICghdGFyZ2V0KSBzZXRUaW1lb3V0KGluamVjdFNjcmlwdCwgMTApOwogICAgICAgIGVsc2UgdGFyZ2V0LmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICAgIH0sIDEwKTsKICAgIH0pOwogIH07CiAgdXRpbC5pbmplY3QuQ2FsbGJhY2sgPSBDYWxsYmFjazsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvdXRpbC9rZXlib2FyZC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmIHx8IHt9OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWwgPSB5YXdmLnV0aWwgfHwge307CiAgY29uc3Qga2V5Ym9hcmQgPSB1dGlsLmtleWJvYXJkID0ge307CgogIGNvbnN0IENUUkwgPSAyICoqIDMyLCBTSElGVCA9IENUUkwgKiAyLCBBTFQgPSBTSElGVCAqIDIsIE1FVEEgPSBBTFQgKiAyLCBLRVkgPSBDVFJMIC0gMSwgTUFYID0gTUVUQSAqIDIgLSAxOwogIGNvbnN0IG5hbWVsaXN0ID0gJyMwOyMxOyMyO0NhbmNlbDsjNDsjNTtIZWxwOyM3O0JhY2tTcGFjZTtUQUI7IzEwOyMxMTtDbGVhcjtFbnRlcjtFbnRlclNwZWNpYWw7IzE1Ozs7O1BhdXNlO0NhcHNMb2NrO0thbmE7RWlzdTtKdW5qYTtGaW5hbDtIYW5qYTsjMjY7RXNjO0NvbnZlcnQ7Tm9uY29udmVydDtBY2NlcHQ7TW9kZUNoYW5nZTtTcGFjZTtQYWdlVXA7UGFnZURvd247RW5kO0hvbWU7TGVmdDtVcDtSaWdodDtEb3duO1NlbGVjdDtQcmludDtFeGVjdXRlO1ByaW50U2NyZWVuO0luc2VydDtEZWxldGU7IzQ3OzA7MTsyOzM7NDs1OzY7Nzs4Ozk7Q29sb247U2VtaWNvbG9uO0xlc3NUaGFuO0VxdWFscztHcmVhdGVyVGhhbjtRdWVzdGlvbk1hcms7QXQ7QTtCO0M7RDtFO0Y7RztIO0k7SjtLO0w7TTtOO087UDtRO1I7UztUO1U7VjtXO1g7WTtaO1dpbjsjOTI7Q29udGV4dE1lbnU7Izk0O1NsZWVwO051bVBhZDA7TnVtUGFkMTtOdW1QYWQyO051bVBhZDM7TnVtUGFkNDtOdW1QYWQ1O051bVBhZDY7TnVtUGFkNztOdW1QYWQ4O051bVBhZDk7TXVsdGlwbHk7QWRkO1NlcGFyYXRvcjtTdWJ0cmFjdDtEZWNpbWFsO0RpdmlkZTtGMTtGMjtGMztGNDtGNTtGNjtGNztGODtGOTtGMTA7RjExO0YxMjtGMTM7RjE0O0YxNTtGMTY7RjE3O0YxODtGMTk7RjIwO0YyMTtGMjI7RjIzO0YyNDsjMTM2OyMxMzc7IzEzODsjMTM5OyMxNDA7IzE0MTsjMTQyOyMxNDM7TnVtTG9jaztTY3JvbGxMb2NLO1dJTl9PRU1fRkpfSklTSE87V0lOX09FTV9GSl9NQVNTSE9VO1dJTl9PRU1fRkpfVE9VUk9LVTtXSU5fT0VNX0ZKX0xPWUE7V0lOX09FTV9GSl9ST1lBOyMxNTE7IzE1MjsjMTUzOyMxNTQ7IzE1NTsjMTU2OyMxNTc7IzE1ODsjMTU5O0NpcmN1bWZsZXg7RXhjbGFtYXRpb247RG91YmxlUXVvdGU7SGFzaDtEb2xsYXI7UGVyY2VudDtBbXBlcnNhbmQ7VW5kZXJzY29yZTtPcGVuUGFyZW47Q2xvc2VQYXJlbjtBc3RlcmlzaztQbHVzO1BpcGU7SHlwaGVuTWludXM7T3BlbkN1cmx5QnJhY2tldDtDbG9zZUN1cmx5QnJhY2tldDtUaWxkZTsjMTc3OyMxNzg7IzE3OTsjMTgwO1ZvbHVtZU11dGU7Vm9sdW1lRG93bjtWb2x1bWVVcDsjMTg0OyMxODU7IzE4NjsjMTg3O0NvbW1hOyMxODk7UGVyaW9kO1NsYXNoO0JhY2tRdW90ZTsjMTkzOyMxOTQ7IzE5NTsjMTk2OyMxOTc7IzE5ODsjMTk5OyMyMDA7IzIwMTsjMjAyOyMyMDM7IzIwNDsjMjA1OyMyMDY7IzIwNzsjMjA4OyMyMDk7IzIxMDsjMjExOyMyMTI7IzIxMzsjMjE0OyMyMTU7IzIxNjsjMjE3OyMyMTg7T3BlbkJyYWNrZXQ7QmFja1NsYXNoO0Nsb3NlQnJhY2tldDtRdW90ZTsjMjIzOztBbHRHcjsjMjI2O1dJTl9JQ09fSEVMUDtXSU5fSUNPXzAwOyMyMjk7V0lOX0lDT19DTEVBUjsjMjMxOyMyMzI7V0lOX09FTV9SRVNFVDtXSU5fT0VNX0pVTVA7V0lOX09FTV9QQTE7V0lOX09FTV9QQTI7V0lOX09FTV9QQTM7V0lOX09FTV9XU0NUUkw7V0lOX09FTV9DVVNFTDtXSU5fT0VNX0FUVE47V0lOX09FTV9GSU5JU0g7V0lOX09FTV9DT1BZO1dJTl9PRU1fQVVUTztXSU5fT0VNX0VOTFc7V0lOX09FTV9CQUNLVEFCO0F0dG47Q3JzZWw7RXhzZWw7RXJlb2Y7UGxheTtab29tOyMyNTI7UEExO1dJTl9PRU1fQ0xFQVI7IzI1NScuc3BsaXQoJzsnKTsKCiAgLy8g5LiA5Lqb5bi455So5bi46YePCiAga2V5Ym9hcmQuY29kZSA9IE9iamVjdC5hc3NpZ24oLi4ubmFtZWxpc3QubWFwKChuYW1lLCBpbmRleCkgPT4gKHsgW25hbWUudG9VcHBlckNhc2UoKV06IGluZGV4IH0pKSk7CiAga2V5Ym9hcmQuYWx0ZXIgPSB7IENUUkwsIFNISUZULCBBTFQsIE1FVEEsIEtFWSwgTUFYIH07CgogIC8vIOWvueS4gOS4quaMiemUruS6i+S7tuWBmue8luWPtwogIGtleWJvYXJkLmV2ZW50ID0gZnVuY3Rpb24gKGUpIHsKICAgIGlmICghZSB8fCAhZS5rZXlDb2RlKSByZXR1cm4gbnVsbDsKICAgIHJldHVybiAoZS5rZXlDb2RlID4+PiAwKSArCiAgICAgIGUuY3RybEtleSAqIENUUkwgKwogICAgICBlLnNoaWZ0S2V5ICogU0hJRlQgKwogICAgICBlLmFsdEtleSAqIEFMVCArCiAgICAgIGUubWV0YUtleSAqIE1FVEE7CiAgfTsKICAvLyDnu5nkuIDkuKrnvJblj7fvvIzovazmjaLkuLrplK7lkI0KICBrZXlib2FyZC5uYW1lID0gZnVuY3Rpb24gKG4pIHsKICAgIHJldHVybiBbCiAgICAgIG4gLyBDVFJMICYgMSA/ICdDdHJsJyA6ICcnLAogICAgICBuIC8gU0hJRlQgJiAxID8gJ1NoaWZ0JyA6ICcnLAogICAgICBuIC8gQUxUICYgMSA/ICdBbHQnIDogJycsCiAgICAgIG4gLyBNRVRBICYgMSA/ICdNZXRhJyA6ICcnLAogICAgICAobiA+Pj4gMCkgPCAyNTYgPyBuYW1lbGlzdFtuID4+PiAwXSA6IGAjJHtuID4+PiAwfWAsCiAgICBdLmZpbHRlcih4ID0+IHgpLmpvaW4oJy0nKS5yZXBsYWNlKC8tJC9nLCAnJyk7CiAgfTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvdXRpbC91aS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsID0geWF3Zi51dGlsIHx8IHt9OwoKICBjb25zdCBrZXlib2FyZCA9IHV0aWwua2V5Ym9hcmQ7CiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgdWkgPSB1dGlsLnVpID0gdXRpbC51aSB8fCB7fTsKCiAgaTE4bi5va0J1dHRvblRpdGxlID0gewogICAgY246ICfnoa7lrponLAogICAgdHc6ICfnorrlrponLAogICAgZW46ICdDb25maXJtJywKICB9OwogIGkxOG4uY2FuY2VsQnV0dG9uVGl0bGUgPSB7CiAgICBjbjogJ+WPlua2iCcsCiAgICB0dzogJ+WPlua2iCcsCiAgICBlbjogJ0NhbmNlbCcsCiAgfTsKICBpMThuLmNsb3NlQnV0dG9uVGl0bGUgPSB7CiAgICBjbjogJ+WFs+mXrScsCiAgICB0dzogJ+mXnOmWiScsCiAgICBlbjogJ0Nsb3NlJywKICB9OwoKICBjb25zdCBkaWFsb2dTdGFjayA9IFtdOwogIC8qKgogICAqIOaYvuekuuS4gOS4quWvueivneahhgogICAqIEBwYXJhbSB7eyBpZDogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCByZW5kZXI6IEZ1bmN0aW9uLCBidXR0b246IHsgW3R5cGU6IHN0cmluZ106IEZ1bmN0aW9uPyB9PywgYmFyOiBib29sZWFuPyB9fQogICAqLwogIHVpLmRpYWxvZyA9IGZ1bmN0aW9uICh7IGlkLCB0aXRsZSwgcmVuZGVyLCBidXR0b24sIGJhciB9KSB7CiAgICAvLyDliJ3lp4vljJYgRE9NCiAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGAKPGRpdiBjbGFzcz0iV19sYXllciB5YXdmLWRpYWxvZyI+CiAgPGRpdiB0YWJpbmRleD0iMCI+PC9kaXY+CiAgPGRpdiBjbGFzcz0iY29udGVudCIgbm9kZS10eXBlPSJhdXRvSGVpZ2h0Ij4KICAgIDxkaXYgY2xhc3M9IldfbGF5ZXJfdGl0bGUgeWF3Zi1kaWFsb2ctdGl0bGUiIG5vZGUtdHlwZT0idGl0bGUiPjwvZGl2PgogICAgPGRpdiBjbGFzcz0iV19sYXllcl9jbG9zZSI+PGEgY2xhc3M9IldfZmljb24gZmljb25fY2xvc2UgU19maWNvbiB5YXdmLWRpYWxvZy1jbG9zZSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyIgbm9kZS10eXBlPSJjbG9zZSI+WDwvYT48L2Rpdj4KICAgIDxkaXYgbm9kZS10eXBlPSJpbm5lciIgY2xhc3M9Inlhd2YtZGlhbG9nLWNvbnRlbnQiPjwvZGl2PgogICAgPGRpdiBjbGFzcz0iV19sYXllcl9idG4gU19iZzEgeWF3Zi1kaWFsb2ctYnV0dG9ucyI+CiAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiIGNsYXNzPSJXX2J0bl9hIGJ0bl8zNHB4IHlhd2YtZGlhbG9nLWJ1dHRvbi1vayIgbm9kZS10eXBlPSJvayIgYWN0aW9uLXR5cGU9Im9rIj48c3Bhbj48L3NwYW4+PC9hPgogICAgICA8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7IiBjbGFzcz0iV19idG5fYiBidG5fMzRweCB5YXdmLWRpYWxvZy1idXR0b24tY2FuY2VsIiBub2RlLXR5cGU9ImNhbmNlbCIgYWN0aW9uLXR5cGU9ImNhbmNlbCI+PHNwYW4+PC9zcGFuPjwvYT4KICAgIDwvZGl2PgogIDwvZGl2Pgo8L2Rpdj4KYDsKICAgIH0gZWxzZSB7CiAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGAKPGRpdiBjbGFzcz0id29vLWJveC1mbGV4IHdvby1ib3gtYWxpZ25DZW50ZXIgd29vLWJveC1qdXN0aWZ5Q2VudGVyIHdvby1tb2RhbC13cmFwIj4KICA8ZGl2IGNsYXNzPSJ3b28tbW9kYWwtbWFpbiB5YXdmLWRpYWxvZyI+CiAgICA8aSBjbGFzcz0id29vLWZvbnQgd29vLWZvbnQtLWNyb3NzIHlhd2YtZGlhbG9nLWNsb3NlIj48L2k+CiAgICA8ZGl2IGNsYXNzPSJ3b28tYm94LWZsZXggd29vLWJveC1jb2x1bW4gd29vLWJveC1hbGlnbkNlbnRlciB3b28tZGlhbG9nLW1haW4iIGFyaWEtbW9kYWw9InRydWUiIHRhYmluZGV4PSIwIiByb2xlPSJhbGVydGRpYWxvZyI+CiAgICAgIDxkaXYgY2xhc3M9Indvby1kaWFsb2ctdGl0bGUgeWF3Zi1kaWFsb2ctdGl0bGUiPjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJ3b28tZGlhbG9nLWJvZHkgeWF3Zi1kaWFsb2ctY29udGVudCI+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJ3b28tZGlhbG9nLWN0cmwgeWF3Zi1kaWFsb2ctYnV0dG9ucyI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0id29vLWJ1dHRvbi1tYWluIHdvby1idXR0b24tbGluZSB3b28tYnV0dG9uLXNlY29uZGFyeSB3b28tYnV0dG9uLW0gd29vLWJ1dHRvbi1yb3VuZCB3b28tZGlhbG9nLWJ0biB5YXdmLWRpYWxvZy1idXR0b24tY2FuY2VsIj48c3BhbiBjbGFzcz0id29vLWJ1dHRvbi13cmFwIj48c3BhbiBjbGFzcz0id29vLWJ1dHRvbi1jb250ZW50Ij48L3NwYW4+PC9zcGFuPjwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9Indvby1idXR0b24tbWFpbiB3b28tYnV0dG9uLWZsYXQgd29vLWJ1dHRvbi1wcmltYXJ5IHdvby1idXR0b24tbSB3b28tYnV0dG9uLXJvdW5kIHdvby1kaWFsb2ctYnRuIHlhd2YtZGlhbG9nLWJ1dHRvbi1vayI+PHNwYW4gY2xhc3M9Indvby1idXR0b24td3JhcCI+PHNwYW4gY2xhc3M9Indvby1idXR0b24tY29udGVudCI+PC9zcGFuPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICA8L2Rpdj4KICA8ZGl2IGNsYXNzPSJ3b28tbW9kYWwtbWFzayB5YXdmLWRpYWxvZy1tYXNrIj48L2Rpdj4KPC9kaXY+CmA7CiAgICB9CiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5pbXBvcnROb2RlKHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQsIHRydWUpOwogICAgY29uc3QgZGlhbG9nID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWRpYWxvZycpIHx8IGNvbnRhaW5lcjsKICAgIGRpYWxvZy5pZCA9IGlkOwogICAgY29uc3QgdGl0bGVOb2RlID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWRpYWxvZy10aXRsZScpOwogICAgY29uc3QgYnV0dG9uQ29sbGVjdGlvbk5vZGUgPSBkaWFsb2cucXVlcnlTZWxlY3RvcignLnlhd2YtZGlhbG9nLWJ1dHRvbnMnKTsKICAgIGNvbnN0IG9rQnV0dG9uID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWRpYWxvZy1idXR0b24tb2snKTsKICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCcueWF3Zi1kaWFsb2ctYnV0dG9uLWNhbmNlbCcpOwogICAgY29uc3QgY2xvc2VCdXR0b24gPSBkaWFsb2cucXVlcnlTZWxlY3RvcignLnlhd2YtZGlhbG9nLWNsb3NlJyk7CiAgICBjb25zdCBtYXNrID0geWF3Zi5XRUlCT19WRVJTSU9OID09PSA3ID8gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWRpYWxvZy1tYXNrJykgOiBudWxsOwogICAgY29uc3QgY29udGVudE5vZGUgPSBkaWFsb2cucXVlcnlTZWxlY3RvcignLnlhd2YtZGlhbG9nLWNvbnRlbnQnKTsKICAgIC8vIOWhq+WFpeWGheWuuQogICAgdGl0bGVOb2RlLnRleHRDb250ZW50ID0gdGl0bGU7CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA3KSB7CiAgICAgIHRpdGxlTm9kZS5jbGFzc0xpc3QuYWRkKCd3b28tZGlhbG9nLWJhcicpOwogICAgfQogICAgb2tCdXR0b24udGV4dENvbnRlbnQgPSBpMThuLm9rQnV0dG9uVGl0bGU7CiAgICBjYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSBpMThuLmNhbmNlbEJ1dHRvblRpdGxlOwogICAgY2xvc2VCdXR0b24udGl0bGUgPSBpMThuLmNsb3NlQnV0dG9uVGl0bGU7CiAgICByZW5kZXIoY29udGVudE5vZGUsIE9iamVjdC5hc3NpZ24oe30sIC4uLlsKICAgICAgeyBjbG9zZTogY2xvc2VCdXR0b24gfSwKICAgICAgYnV0dG9uICYmIGJ1dHRvbi5vayA/IHsgb2s6IG9rQnV0dG9uIH0gOiB7fSwKICAgICAgYnV0dG9uICYmIGJ1dHRvbi5jYW5jZWwgPyB7IGNhbmNlbDogY2FuY2VsQnV0dG9uIH0gOiB7fSwKICAgIF0pKTsKICAgIC8vIOWumuS9jeWvueivneahhueahOS9jee9rgogICAgY29uc3QgbGFzdFBvcyA9IHsgeDogMCwgeTogMCB9OwogICAgY29uc3Qgc2V0UG9zID0gZnVuY3Rpb24gKHsgeCwgeSB9KSB7CiAgICAgIGNvbnN0IGxlZnQgPSBNYXRoLm1pbihNYXRoLm1heCgwLCB4KSwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCAtIGRpYWxvZy5jbGllbnRXaWR0aCAtIDIpOwogICAgICBjb25zdCB0b3AgPSB5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYgPwogICAgICAgIE1hdGgubWluKE1hdGgubWF4KHdpbmRvdy5wYWdlWU9mZnNldCwgeSksIHdpbmRvdy5wYWdlWU9mZnNldCArIHdpbmRvdy5pbm5lckhlaWdodCAtIGRpYWxvZy5jbGllbnRIZWlnaHQgLSAyKSA6CiAgICAgICAgTWF0aC5taW4oTWF0aC5tYXgoMCwgeSksIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0IC0gZGlhbG9nLmNsaWVudEhlaWdodCAtIDIpOwogICAgICBpZiAobGVmdCArICdweCcgIT09IGRpYWxvZy5zdHlsZS5sZWZ0KSBkaWFsb2cuc3R5bGUubGVmdCA9IGxlZnQgKyAncHgnOwogICAgICBpZiAodG9wICsgJ3B4JyAhPT0gZGlhbG9nLnN0eWxlLnRvcCkgZGlhbG9nLnN0eWxlLnRvcCA9IHRvcCArICdweCc7CiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGxhc3RQb3MsIHsgeDogbGVmdCwgeTogdG9wIH0pOwogICAgfTsKICAgIC8vIOe9kemhtea7muWKqOaXtue7tOaMgeWcqOmhtemdouWGhQogICAgY29uc3QgcmVzZXRQb3MgPSAoKSA9PiB7IHNldFBvcyhsYXN0UG9zKTsgfTsKICAgIGNvbnN0IGRyYWdNb3ZlU3RhcnQgPSAoZnVuY3Rpb24gbW91c2VEcmFnKCkgewogICAgICBjb25zdCBtb3VzZVN0YXJ0ID0ge307CiAgICAgIC8vIOaLluaLveenu+WKqAogICAgICBjb25zdCBkcmFnTW92ZSA9IGV2ZW50ID0+IHsKICAgICAgICBzZXRQb3MoewogICAgICAgICAgeDogZXZlbnQuc2NyZWVuWCAtIG1vdXNlU3RhcnQueCwKICAgICAgICAgIHk6IGV2ZW50LnNjcmVlblkgLSBtb3VzZVN0YXJ0LnksCiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIC8vIOaLluaLvee7k+adnwogICAgICBjb25zdCBkcmFnTW92ZURvbmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZHJhZ01vdmUpOwogICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBkcmFnTW92ZURvbmUpOwogICAgICAgIGRpYWxvZy5jbGFzc0xpc3QucmVtb3ZlKCd5YXdmLWRyYWcnKTsKICAgICAgICBpZiAoZGlhbG9nLnJlbGVhc2VDYXB0dXJlKSB7IGRpYWxvZy5yZWxlYXNlQ2FwdHVyZSgpOyB9CiAgICAgIH07CiAgICAgIC8vIOW8gOWni+aLluaLvQogICAgICBjb25zdCBkcmFnTW92ZVN0YXJ0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBPYmplY3QuYXNzaWduKG1vdXNlU3RhcnQsIHsKICAgICAgICAgIHg6IGUuc2NyZWVuWCAtIGxhc3RQb3MueCwKICAgICAgICAgIHk6IGUuc2NyZWVuWSAtIGxhc3RQb3MueSwKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkcmFnTW92ZSk7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGRyYWdNb3ZlRG9uZSk7CiAgICAgICAgZGlhbG9nLmNsYXNzTGlzdC5hZGQoJ3lhd2YtZHJhZycpOwogICAgICB9OwogICAgICByZXR1cm4gZHJhZ01vdmVTdGFydDsKICAgIH0oKSk7CiAgICAvLyDmoIfpopjmoI/lj6/ku6Xmi5bmi70KICAgIGlmICh0aXRsZU5vZGUpIHsKICAgICAgdGl0bGVOb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGRyYWdNb3ZlU3RhcnQpOwogICAgfQogICAgLy8g6IOM5pmv6YGu572pCiAgICBjb25zdCBjb3ZlciA9IHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpIDogbnVsbDsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgY292ZXIuc2V0QXR0cmlidXRlKCdub2RlLXR5cGUnLCAnb3V0ZXInKTsKICAgICAgY292ZXIuY2xhc3NOYW1lID0gJ3lhd2YtZGlhbG9nLW91dGVyJzsKICAgIH0KICAgIC8vIOWTjeW6lOm8oOaghwogICAgaWYgKCFidXR0b24gfHwgIWJ1dHRvbi5vayAmJiAhYnV0dG9uLmNhbmNlbCkgewogICAgICBidXR0b25Db2xsZWN0aW9uTm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGJ1dHRvbkNvbGxlY3Rpb25Ob2RlKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChidXR0b24ub2spIG9rQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgIGlmICghZXZlbnQuaXNUcnVzdGVkKSByZXR1cm47CiAgICAgICAgYnV0dG9uLm9rKCk7CiAgICAgIH0pOwogICAgICBlbHNlIGJ1dHRvbkNvbGxlY3Rpb25Ob2RlLnJlbW92ZUNoaWxkKG9rQnV0dG9uKTsKICAgICAgaWYgKGJ1dHRvbi5jYW5jZWwpIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgIGJ1dHRvbi5jYW5jZWwoKTsKICAgICAgfSk7CiAgICAgIGVsc2UgYnV0dG9uQ29sbGVjdGlvbk5vZGUucmVtb3ZlQ2hpbGQoY2FuY2VsQnV0dG9uKTsKICAgIH0KICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAoYnV0dG9uICYmIGJ1dHRvbi5jbG9zZSB8fCBoaWRlKSgpOwogICAgfSk7CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA3KSB7CiAgICAgIG1hc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICAoYnV0dG9uICYmIGJ1dHRvbi5jbG9zZSB8fCBoaWRlKSgpOwogICAgICB9KTsKICAgIH0KICAgIC8vIOWTjeW6lOaMiemUrgogICAgY29uc3Qga2V5cyA9IGV2ZW50ID0+IHsKICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgaWYgKGRpYWxvZ1N0YWNrW2RpYWxvZ1N0YWNrLmxlbmd0aCAtIDFdICE9PSBkaWFsb2cpIHJldHVybjsKICAgICAgY29uc3QgY29kZSA9IGtleWJvYXJkLmV2ZW50KGV2ZW50KTsKICAgICAgaWYgKGNvZGUgPT09IGtleWJvYXJkLmNvZGUuRU5URVIgJiYgYnV0dG9uICYmIGJ1dHRvbi5vaykgYnV0dG9uLm9rKGV2ZW50KTsKICAgICAgZWxzZSBpZiAoY29kZSA9PT0ga2V5Ym9hcmQuY29kZS5FU0MpIHsKICAgICAgICAoYnV0dG9uICYmIChidXR0b24uY2FuY2VsIHx8IGJ1dHRvbi5jbG9zZSkgfHwgaGlkZSkoZXZlbnQpOwogICAgICB9IGVsc2UgcmV0dXJuOwogICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIH07CiAgICBjb25zdCBzdG9wS2V5cyA9IGV2ZW50ID0+IHsKICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9OwogICAgLy8g5YWz6Zet5a+56K+d5qGGCiAgICBjb25zdCBoaWRlID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSBkaWFsb2cuY2xhc3NMaXN0LmFkZCgnVUlfYW5pbWF0ZWQnLCAnVUlfc3BlZWRfZmFzdCcsICdVSV9hbmlfYm91bmNlT3V0Jyk7CiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBrZXlzKTsKICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgc3RvcEtleXMpOwogICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCByZXNldFBvcyk7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNldFBvcyk7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoY292ZXIpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgY29udGFpbmVyLnJlbW92ZSgpOyB9LCAyMDApOwogICAgICBkaWFsb2dTdGFjay5zcGxpY2UoZGlhbG9nU3RhY2suaW5kZXhPZihkaWFsb2cpLCAxKTsKICAgIH07CiAgICBjb25zdCByZXNldFBvc2l0aW9uID0gZnVuY3Rpb24gKHsgeCwgeSB9ID0ge30pIHsKICAgICAgaWYgKHggPT0gbnVsbCkgeCA9ICh3aW5kb3cuaW5uZXJXaWR0aCAtIGRpYWxvZy5jbGllbnRXaWR0aCkgLyAyOwogICAgICBpZiAoeSA9PSBudWxsKSB5ID0gKHdpbmRvdy5pbm5lckhlaWdodCAtIGRpYWxvZy5jbGllbnRIZWlnaHQpIC8gMjsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIHNldFBvcyh7IHgsIHk6IHkgKyB3aW5kb3cucGFnZVlPZmZzZXQgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0UG9zKHsgeCwgeSB9KTsKICAgICAgfQogICAgfTsKICAgIC8vIOaYvuekuuWvueivneahhgogICAgY29uc3Qgc2hvdyA9IGZ1bmN0aW9uICh7IHgsIHkgfSA9IHt9KSB7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY292ZXIpOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CiAgICAgIHJlc2V0UG9zaXRpb24oeyB4LCB5IH0pOwogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5cyk7CiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIHN0b3BLZXlzKTsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgcmVzZXRQb3MpOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzZXRQb3MpOwogICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGRpYWxvZy5jbGFzc0xpc3QucmVtb3ZlKCdVSV9hbmlfYm91bmNlT3V0Jyk7CiAgICAgICAgZGlhbG9nLmNsYXNzTGlzdC5hZGQoJ1VJX2FuaW1hdGVkJywgJ1VJX3NwZWVkX2Zhc3QnLCAnVUlfYW5pX2JvdW5jZUluJyk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkaWFsb2cuY2xhc3NMaXN0LnJlbW92ZSgnVUlfYW5pbWF0ZWQnLCAnVUlfc3BlZWRfZmFzdCcsICdVSV9hbmlfYm91bmNlSW4nKTsKICAgICAgICB9LCAyMDApOwogICAgICB9CiAgICAgIGRpYWxvZ1N0YWNrLnB1c2goZGlhbG9nKTsKICAgIH07CiAgICByZXR1cm4geyBoaWRlLCBzaG93LCByZXNldFBvc2l0aW9uLCBkb206IGRpYWxvZyB9OwogIH07CgogIGNvbnN0IHByZWRlZmluZWREaWFsb2cgPSAoYnV0dG9ucywgeyBpY29uOiBkZWZhdWx0SWNvbiB9KSA9PiB7CiAgICAvKioKICAgICAqIGljb24gcGFyYW0gaXMgZGVwcmVjYXRlZCBpbiB2NwogICAgICogQHBhcmFtIHt7IGlkOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcsIHRleHQ6IHN0cmluZywgaWNvbjogc3RyaW5nIH19CiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPz59CiAgICAgKi8KICAgIGNvbnN0IGlubmVyID0gKHsgaWQsIHRpdGxlLCB0ZXh0LCBpY29uID0gZGVmYXVsdEljb24gfSkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgIGNvbnN0IHJlbmRlciA9IGZ1bmN0aW9uIChkb20pIHsKICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7CiAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gYAo8ZGl2IGNsYXNzPSJsYXllcl9wb2ludCI+CiAgPGRsIGNsYXNzPSJwb2ludCBjbGVhcmZpeCI+CiAgICA8ZHQgbm9kZS10eXBlPSJpY29uIj48c3BhbiBjbGFzcz0iV19pY29uIHlhd2YtZGlhbG9nLWljb24iPjwvc3Bhbj48L2R0PgogICAgPGRkIG5vZGUtdHlwZT0idGV4dCI+PHAgY2xhc3M9IlNfdHh0MSB5YXdmLWRpYWxvZy10ZXh0Ij48L3A+PC9kZD4KICA8L2RsPgo8L2Rpdj4KYDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gYAo8ZGl2IGNsYXNzPSJ3b28tZGlhbG9nLW1lc3NhZ2UgeWF3Zi1kaWFsb2ctdGV4dCI+PC9kaXY+CmA7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5pbXBvcnROb2RlKHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQsIHRydWUpOwogICAgICAgIGNvbnN0IGljb25FbGVtZW50ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1kaWFsb2ctaWNvbicpOwogICAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICAgIGljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoYGljb25fJHtpY29ufUJgKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgdGV4dEVsZW1lbnQgPSB5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYgPyBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWRpYWxvZy10ZXh0JykgOiBjb250ZW50OwogICAgICAgIHRleHRFbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDsKICAgICAgICBkb20uYXBwZW5kQ2hpbGQoY29udGVudCk7CiAgICAgIH07CiAgICAgIGNvbnN0IHZhbHVlID0gcmVzdWx0ID0+ICgpID0+IHsKICAgICAgICBkaWFsb2cuaGlkZSgpOwogICAgICAgIHJlc29sdmUocmVzdWx0KTsKICAgICAgfTsKICAgICAgY29uc3QgYnV0dG9uID0gT2JqZWN0LmFzc2lnbih7CiAgICAgICAgY2xvc2U6IHZhbHVlKG51bGwpLAogICAgICB9LCAuLi5PYmplY3Qua2V5cyhidXR0b25zKS5tYXAoa2V5ID0+ICh7CiAgICAgICAgW2tleV06IHZhbHVlKGJ1dHRvbnNba2V5XSksCiAgICAgIH0pKSk7CiAgICAgIGNvbnN0IGRpYWxvZyA9IHVpLmRpYWxvZyh7IGlkLCB0aXRsZSwgcmVuZGVyLCBidXR0b24gfSk7CiAgICAgIGRpYWxvZy5zaG93KCk7CiAgICB9KTsKICAgIHJldHVybiBpbm5lcjsKICB9OwoKICB1aS5hbGVydCA9IHByZWRlZmluZWREaWFsb2coeyBvazogdHJ1ZSB9LCB7IGljb246ICdhc2snIH0pOwogIHVpLmNvbmZpcm0gPSBwcmVkZWZpbmVkRGlhbG9nKHsgb2s6IHRydWUsIGNhbmNlbDogZmFsc2UgfSwgeyBpY29uOiAncXVlc3Rpb24nIH0pOwoKICAvKioKICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBidWJibGVDb250ZW50CiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcmVmZXJlbmNlCiAgICovCiAgdWkuYnViYmxlID0gZnVuY3Rpb24gKGJ1YmJsZUNvbnRlbnQsIHJlZmVyZW5jZSkgewogICAgY29uc3QgYnViYmxlID0gKGZ1bmN0aW9uICgpIHsKICAgICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpOwogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gYAo8ZGl2IGNsYXNzPSJXX2xheWVyIFdfbGF5ZXJfcG9wIHlhd2YtYnViYmxlIj4KICA8ZGl2IGNsYXNzPSJjb250ZW50IGxheWVyX21pbmlfaW5mbyI+CiAgICA8ZGl2IGNsYXNzPSJtYWluX3R4dCB5YXdmLWJ1YmJsZS10ZXh0Ij48L2Rpdj4KICAgIDxkaXYgY2xhc3M9IldfbGF5ZXJfYXJyb3ciPjxzcGFuIGNsYXNzPSJXX2Fycm93X2JvciIgbm9kZS10eXBlPSJhcnJvdyI+PGkgY2xhc3M9IlNfbGluZTMiPjwvaT48ZW0gY2xhc3M9IlNfYmcyX2JyIj48L2VtPjwvc3Bhbj48ZGl2PjwvZGl2PjwvZGl2PgogIDwvZGl2Pgo8L2Rpdj4KYDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBgCjxkaXYgY2xhc3M9Indvby1wb3AtbWFpbiB5YXdmLWJ1YmJsZSI+CjxkaXYgY2xhc3M9Inlhd2YtYnViYmxlLXRleHQiPjwvZGl2Pgo8L2Rpdj4KYDsKICAgICAgfQogICAgICBjb25zdCBidWJibGUgPSBkb2N1bWVudC5pbXBvcnROb2RlKHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQsIHRydWUpOwogICAgICBpZiAoIShidWJibGVDb250ZW50IGluc3RhbmNlb2YgTm9kZSkpIHsKICAgICAgICBidWJibGVDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYnViYmxlQ29udGVudCArICcnKTsKICAgICAgfQogICAgICBidWJibGUucXVlcnlTZWxlY3RvcignLnlhd2YtYnViYmxlLXRleHQnKS5hcHBlbmRDaGlsZChidWJibGVDb250ZW50KTsKICAgICAgcmV0dXJuIGJ1YmJsZTsKICAgIH0oKSk7CiAgICBjb25zdCBhcnJvdyA9IHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/IGJ1YmJsZS5xdWVyeVNlbGVjdG9yKCcuV19hcnJvd19ib3InKSA6IG51bGw7CiAgICBjb25zdCByZWZlcmVuY2VMaXN0ID0gW107CiAgICBjb25zdCBkZUJvdW5kID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgIGxldCBidXN5ID0gZmFsc2U7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGJ1c3kpIHJldHVybjsgYnVzeSA9IHRydWU7CiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7CiAgICAgICAgICBidXN5ID0gZmFsc2U7CiAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgIH0pOwogICAgICB9OwogICAgfTsKICAgIGNvbnN0IHRyYWNrU2Nyb2xsID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgIGZvciAobGV0IHJlZiA9IHJlZmVyZW5jZTsgcmVmOyByZWYgPSByZWYub2Zmc2V0UGFyZW50KSB7CiAgICAgICAgcmVmZXJlbmNlTGlzdC5wdXNoKHJlZmVyZW5jZSk7CiAgICAgICAgcmVmLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGNhbGxiYWNrKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGRlVHJhY2tTY3JvbGwgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgICAgcmVmZXJlbmNlTGlzdC5zcGxpY2UoMCkuZm9yRWFjaChyZWYgPT4gewogICAgICAgIHJlZi5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBjYWxsYmFjayk7CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHVwZGF0ZVBvc2l0aW9uID0gZGVCb3VuZChmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IHJlY3QgPSByZWZlcmVuY2UuZ2V0Q2xpZW50UmVjdHMoKVswXTsKICAgICAgaWYgKCFyZWN0KSByZXR1cm47CiAgICAgIGNvbnN0IHRvcDAgPSByZWN0LnRvcCAtIGJ1YmJsZS5jbGllbnRIZWlnaHQgLSA4OwogICAgICBjb25zdCB0b3AxID0gdG9wMCArIHdpbmRvdy5wYWdlWU9mZnNldDsKICAgICAgY29uc3QgdG9wMiA9IHJlY3QuYm90dG9tICsgOCArIHdpbmRvdy5wYWdlWU9mZnNldDsKICAgICAgY29uc3QgbGVmdCA9IHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/CiAgICAgICAgcmVjdC5sZWZ0IC0gMzIgKyByZWN0LndpZHRoICsgd2luZG93LnBhZ2VYT2Zmc2V0IDoKICAgICAgICByZWN0LmxlZnQgLSBidWJibGUuY2xpZW50V2lkdGggLyAyICsgcmVjdC53aWR0aCArIHdpbmRvdy5wYWdlWE9mZnNldDsKICAgICAgY29uc3QgYXRUb3AgPSB0b3AwID4gMDsKICAgICAgY29uc3QgdG9wID0gYXRUb3AgPyB0b3AxIDogdG9wMjsKICAgICAgaWYgKHBhcnNlSW50KGJ1YmJsZS5zdHlsZS5sZWZ0LCAxMCkgIT09IGxlZnQpIHsKICAgICAgICBidWJibGUuc3R5bGUubGVmdCA9IGxlZnQgKyAncHgnOwogICAgICB9CiAgICAgIGlmIChwYXJzZUludChidWJibGUuc3R5bGUudG9wLCAxMCkgIT09IHRvcCkgewogICAgICAgIGJ1YmJsZS5zdHlsZS50b3AgPSB0b3AgKyAncHgnOwogICAgICB9CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBjb25zdCBhZGRDbGFzcyA9IGF0VG9wID8gJ1dfYXJyb3dfYm9yX2InIDogJ1dfYXJyb3dfYm9yX3QnOwogICAgICAgIGNvbnN0IHJlbW92ZUNsYXNzID0gYXRUb3AgPyAnV19hcnJvd19ib3JfdCcgOiAnV19hcnJvd19ib3JfYic7CiAgICAgICAgaWYgKCFhcnJvdy5jbGFzc0xpc3QuY29udGFpbnMoYWRkQ2xhc3MpKSB7CiAgICAgICAgICBhcnJvdy5jbGFzc0xpc3QuYWRkKGFkZENsYXNzKTsKICAgICAgICB9CiAgICAgICAgaWYgKGFycm93LmNsYXNzTGlzdC5jb250YWlucyhyZW1vdmVDbGFzcykpIHsKICAgICAgICAgIGFycm93LmNsYXNzTGlzdC5yZW1vdmUocmVtb3ZlQ2xhc3MpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBjb25zdCBzaG93ID0gZnVuY3Rpb24gKCkgewogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJ1YmJsZSk7CiAgICAgIGRlVHJhY2tTY3JvbGwodXBkYXRlUG9zaXRpb24pOwogICAgICB0cmFja1Njcm9sbCh1cGRhdGVQb3NpdGlvbik7CiAgICAgIHVwZGF0ZVBvc2l0aW9uKCk7CiAgICB9OwogICAgY29uc3QgaGlkZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgZGVUcmFja1Njcm9sbCh1cGRhdGVQb3NpdGlvbik7CiAgICAgIGlmIChidWJibGUucGFyZW50Tm9kZSkgewogICAgICAgIGJ1YmJsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGJ1YmJsZSk7CiAgICAgIH0KICAgIH07CiAgICBsZXQgbW91c2VJbiA9IG51bGw7CiAgICBjb25zdCBlbnRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgaWYgKG1vdXNlSW4gPT09IG51bGwpIHNob3coKTsKICAgICAgICBtb3VzZUluID0gdHJ1ZTsKICAgICAgfSwgMCk7CiAgICB9OwogICAgY29uc3QgbGVhdmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIG1vdXNlSW4gPSBmYWxzZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKG1vdXNlSW4gPT09IGZhbHNlKSB7CiAgICAgICAgICBoaWRlKCk7CiAgICAgICAgICBtb3VzZUluID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0sIDMwMCk7CiAgICB9OwogICAgcmVmZXJlbmNlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBlbnRlcik7CiAgICBidWJibGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGVudGVyKTsKICAgIHJlZmVyZW5jZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgbGVhdmUpOwogICAgYnViYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBsZWF2ZSk7CiAgfTsKCiAgLy8gVjcgb25seQogIGNvbnN0IGljb25zID0gewogICAgY2hlY2tib3g6ICc8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDE2IDE2Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0wIDB2MTZoMTZWMEgwem0xNC4zOTggMi45YS42NjcuNjY3IDAgMCAxIC41MjMgMS4xMjlsLTguNjg2IDguNjA0Yy0uMjYuMjU4LS42NzcuMjU4LS45MzcgMEwxLjQwOCA4Ljc4YS42NjcuNjY3IDAgMSAxIC45MzktLjk0N2wzLjQyIDMuMzkgOC4yMTUtOC4xNGEuNjY3LjY2NyAwIDAgMSAuNDE2LS4xODJ6Ii8+PC9zdmc+JywKICAgIHN1Y2Nlc3M6ICc8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNTEyIDBhNTEyIDUxMiAwIDEgMCAwIDEwMjRBNTEyIDUxMiAwIDEgMCA1MTIgMHptMjY1LjM5MyAyOTIuMDA2YzE2Ljc1LS4yIDMzLjQxNyA1LjkxMyA0Ni4wMjMgMTguNDE4IDI1LjI0IDI1LjAzOCAyNC42OTQgNjYuMTM0LTEuMTc2IDkxLjc5NUw1MDkuODM2IDcxMi4wOGE2Ni45NSA2Ni45NSAwIDAgMS00My4yOTMgMTkuNDY3bC0uMTkuMDFhNjMuMDYgNjMuMDYgMCAwIDEtNy41ODQuNDQzYy0xNy44MTIgMC0zMy45MzgtNy4xNjgtNDUuNjA0LTE4Ljc1NGwtMjEzLjIyLTIxMS41MDRDMTg4LjgzOCA0OTAuMjUgMTgyIDQ3NC42MjMgMTgyIDQ1Ny40MTJjMC0zNS40IDI4LjkzLTY0LjEgNjQuNjItNjQuMSAxNy4zNSAwIDMzLjEwNyA2Ljc4MyA0NC43MTUgMTcuODIybDE2OS41OCAxNjguMjE3TDczMC44NzcgMzExLjZjMTIuOTM1LTEyLjgzIDI5Ljc2Ni0xOS4zNzQgNDYuNTE2LTE5LjU4NHoiLz48L3N2Zz4nLAogICAgd2FybjogJzxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik01MTIgMGE1MTIgNTEyIDAgMSAwIDAgMTAyNEE1MTIgNTEyIDAgMSAwIDUxMiAwem0tMS4zNDYgMTUybDIuNzIuMDU1di4wMDJsLjEzNS4wMDRjMzYuNTkzIDEuNTEgNjUuODAzIDMxLjkgNjUuODAzIDY5LjE5MyAwIDM3LjI0LTI5LjE0MiA2Ny42MTctNjUuODE2IDY5LjE5M2wuMDctLjAwMi0uMTM3LjAwNmMuMDIyLS4wMDEuMDQ0LS4wMDMuMDY2LS4wMDRhNjguNiA2OC42IDAgMCAxLTIuODQuMDU5Yy0zNy45MTcgMC02OC42NTQtMzEuMDA0LTY4LjY1NC02OS4yNTJTNDcyLjczNyAxNTIgNTEwLjY1NCAxNTJ6bTIuNzIgMjQ5LjI2OGMzNy44ODIgMCA2OC42MjcgMzEuNjIyIDY4LjYyNyA3MC42MXYzMjkuNTY4QzU4MiA4NDAuMzc4IDU1MS4yNTUgODcyIDUxMy4zNzMgODcyYy0zNy45MzcgMC02OC42MjctMzEuNjIyLTY4LjYyNy03MC41NTVWNDcxLjg3N2MwLTM4Ljk4NyAzMC43LTcwLjYxIDY4LjYyNy03MC42MXoiLz48L3N2Zz4nLAogICAgZXJyb3I6ICc8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNTEyIDBhNTEyIDUxMiAwIDEgMCAwIDEwMjRBNTEyIDUxMiAwIDEgMCA1MTIgMHptLTEuMzczIDE1MmMzNy45MzcgMCA2OC42MjcgMzEuNjIyIDY4LjYyNyA3MC41NTV2MzI5LjU2OGMwIDM4Ljk4Ny0zMC43IDcwLjYxLTY4LjYyNyA3MC42MS0zNy44ODIgMC02OC42MjctMzEuNjIyLTY4LjYyNy03MC42MVYyMjIuNTU1QzQ0MiAxODMuNjIyIDQ3Mi43NDUgMTUyIDUxMC42MjcgMTUyem0yLjcyIDU4MS40OTRjMzcuOTE3IDAgNjguNjU0IDMxLjAwNCA2OC42NTQgNjkuMjUyUzU1MS4yNjMgODcyIDUxMy4zNDYgODcyYTY2LjY5IDY2LjY5IDAgMCAxLTIuNzE5LS4wNTV2LS4wMDJsLS4xMzUtLjAwNGMtMzYuNTkzLTEuNTEtNjUuODAzLTMxLjktNjUuODAzLTY5LjE5MyAwLTM3LjI0IDI5LjE0Mi02Ny42MTcgNjUuODE2LTY5LjE5M2wtLjA3LjAwMi4xMzctLjAwNmMtLjAyMi4wMDEtLjA0NC4wMDMtLjA2Ni4wMDRhNjguNiA2OC42IDAgMCAxIDIuODQtLjA1OXoiLz48L3N2Zz4nLAogICAgaGVscDogJzxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik01MTIgMGE1MTIgNTEyIDAgMSAwIDAgMTAyNEE1MTIgNTEyIDAgMSAwIDUxMiAwem0zLjY4IDE2MmM1OS42IDAgMTE0LjYxMyAyMS4zNiAxNTEuMzA3IDU0LjA2QzcwMy42NTMgMjQ3LjgzMiA3MjIgMjkxLjQyNCA3MjIgMzQ2LjgwM2MwIDQ1LjQxNS0xMS45MiA4Mi42MzItMzMuOTIgMTExLjcxLTUuNzMzIDYuMjYtMjAuMjQgMTkuOTU4LTQzLjIgNDAuNDJsLTQzLjgxNCAzOS40MDhDNTcxLjM2IDU2OS43OCA1NjAgNjAwLjQ4NSA1NjAgNjIyLjI2NnYxMi43MTVoLS4xMDdjLTEuNzYgMjcuMi0yNC41ODcgNDguNy01Mi40OCA0OC43cy01MC43Mi0yMS41MDItNTIuNDgtNDguN2gtLjM5OHYtMTIuNzE1YzAtMzQuNTI0IDUuNDkyLTUyLjM0NyAxOC4zNDYtNzYuODggMTEuOTItMjQuNTA0IDQ2LjQ1My02Mi4zNjggMTA2LjA1My0xMTUuMDI1bDExLjAxNC0xMi43MTVjMTYuNTA2LTE5Ljk4NSAyNC43NzMtNDEuNzY1IDI0Ljc3My02NC40NzMgMC0yOS45NzgtOC4yNjYtNTYuODk3LTI0Ljc3My03NC4xNTgtMTcuNDEzLTE3LjIzNC00My4wOTItMzMuMDkyLTc0LjI2Ni0zMy4wOTItNDAuMzczIDAtNjguOCAyMi43OS04Ni4yMTMgNDguMjItMTUuNiAyMC44ODMtMjIuOTM0IDUwLjg2LTIyLjkzNCA4OC45OCAwIDI4LjYwMi0yMy4zODggNTEuNzU4LTUyLjI2OCA1MS43NTgtMjguODUzIDAtNTIuMjY2LTIzLjE1Ni01Mi4yNjYtNTEuNzU4IDAtNjcuMTk2IDE5LjI1My0xMTkuODUgNTkuNi0xNTcuOTk2QzQwMS4wNCAxODcgNDQ3LjgxMyAxNjIgNTE1LjY4IDE2MnptLTguMjcgNTczLjI0MmE1OC4wOCA1OC4wOCAwIDAgMSAxLjc5MS4wMjljMzIuNzA1Ljc0NyA1OC45NDcgMjguODMgNTguOTQ3IDYzLjM2M3MtMjYuMjQyIDYyLjYxNy01OC44OCA2My4zNjNsLS4wNjYuMDAydi0uMDNjLS41MzQuMDE4LTEuMTYuMDMtMS43OS4wMy0zMy4yNTUgMC02MC4yMTUtMjguMzc1LTYwLjIxNS02My4zOHMyNi45Ni02My4zOCA2MC4yMTUtNjMuMzh6Ii8+PC9zdmc+JywKICB9OwogIGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTsKICB1aS5pY29uID0gZnVuY3Rpb24gKHR5cGUpIHsKICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGljb25zLCB0eXBlKSkgcmV0dXJuIG51bGw7CiAgICByZXR1cm4gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhpY29uc1t0eXBlXSwgJ2ltYWdlL3N2Zyt4bWwnKTsKICB9OwoKICBjc3MuYXBwZW5kKGAKLnlhd2YtV0JWNiAueWF3Zi1kaWFsb2ctdGl0bGUgewogIGN1cnNvcjogbW92ZTsKfQoueWF3Zi1XQlY2IC55YXdmLWRpYWxvZy1vdXRlciB7CiAgcG9zaXRpb246IGZpeGVkOwogIHRvcDogMHB4OwogIGxlZnQ6IDBweDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgYmFja2dyb3VuZDogbm9uZSByZXBlYXQgc2Nyb2xsIDAlIDAlIHJnYigwLCAwLCAwKTsKICBvcGFjaXR5OiAwLjM7CiAgei1pbmRleDogOTk5OTsKfQoueWF3Zi1XQlY2IC55YXdmLWRpYWxvZy55YXdmLWRyYWcgewogIG9wYWNpdHk6IDAuNjc7CiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogIHVzZXItc2VsZWN0OiBub25lOwp9Ci55YXdmLVdCVjYgLnlhd2YtYnViYmxlIHsKICBtYXgtd2lkdGg6IDQwMHB4Owp9CmApOwoKICBjc3MuYXBwZW5kKGAKLnlhd2YtV0JWNyAueWF3Zi1kaWFsb2cgewogIHBvc2l0aW9uOiBmaXhlZDsKICB0cmFuc2l0aW9uOiBub25lOwp9Ci55YXdmLVdCVjcgLnlhd2YtZGlhbG9nIC53b28tZGlhbG9nLW1haW4gewogIG1heC13aWR0aDogbm9uZTsKfQoueWF3Zi1XQlY3IC55YXdmLWRpYWxvZy10ZXh0IHsKICBtYXgtd2lkdGg6IDQwMHB4Owp9Ci55YXdmLVdCVjcgLnlhd2YtZGlhbG9nLXRpdGxlIHsKICBjdXJzb3I6IG1vdmU7Cn0KLnlhd2YtV0JWNyAueWF3Zi1kaWFsb2ctb3V0ZXIgewogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6IDBweDsKICBsZWZ0OiAwcHg7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQ6IG5vbmUgcmVwZWF0IHNjcm9sbCAwJSAwJSByZ2IoMCwgMCwgMCk7CiAgb3BhY2l0eTogMC4zOwogIHotaW5kZXg6IDk5OTk7Cn0KLnlhd2YtV0JWNyAueWF3Zi1kaWFsb2cueWF3Zi1kcmFnIHsKICBvcGFjaXR5OiAwLjY3OwogIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICB1c2VyLXNlbGVjdDogbm9uZTsKfQoueWF3Zi1XQlY3IC55YXdmLWJ1YmJsZSB7CiAgbWF4LXdpZHRoOiA0MDBweDsKICBmb250LXNpemU6IDE0cHg7CiAgcGFkZGluZzogOHB4IDE2cHg7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQoueWF3Zi1XQlY3IC55YXdmLWRpYWxvZy1jbG9zZSB7CiAgcGFkZGluZzogOHB4OwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDEwcHg7CiAgcmlnaHQ6IDEwcHg7CiAgei1pbmRleDogMTsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KYCk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3V0aWwvZG9tLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgfHwge307CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbCA9IHlhd2YudXRpbCB8fCB7fTsKICBjb25zdCBkb20gPSB1dGlsLmRvbSA9IHV0aWwuZG9tIHx8IHt9OwoKCiAgLyoqCiAgICogQHBhcmFtIHtzdHJpbmd9IGh0bWwKICAgKiBAcmV0dXJucyB7RG9jdW1lbnRGcmFnbWVudH0KICAgKi8KICBjb25zdCBwYXJzZUh0bWwgPSBmdW5jdGlvbiAoaHRtbCkgewogICAgY29uc3QgdGFnID0gJ3N0dXBpZC1pbm5lci1odG1sLWFzc2lnbi12YWxpZGF0b3InOwogICAgY29uc3QgcGFpcmVkID0gYDwke3RhZ30+YCArIGh0bWwgKyBgPC8ke3RhZ30+YDsKICAgIGNvbnN0IGRvbSA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcocGFpcmVkLCAndGV4dC9odG1sJyk7CiAgICBjb25zdCByZXN1bHQgPSBkb20ucXVlcnlTZWxlY3Rvcih0YWcpOwogICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICB3aGlsZSAocmVzdWx0LmZpcnN0Q2hpbGQpIGZyYWdtZW50LmFwcGVuZENoaWxkKHJlc3VsdC5maXJzdENoaWxkKTsKICAgIHJldHVybiBmcmFnbWVudDsKICB9OwoKICAvKioKICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQKICAgKiBAcGFyYW0ge3N0cmluZ30gaW5uZXJIdG1sCiAgICovCiAgY29uc3Qgc3R1cGlkSW5uZXJIdG1sQXNzaWduID0gZnVuY3Rpb24gKGVsZW1lbnQsIGlubmVySHRtbCkgewogICAgY29uc3QgZnJhZ21lbnQgPSBwYXJzZUh0bWwoaW5uZXJIdG1sKTsKICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gJyc7CiAgICBlbGVtZW50LmFwcGVuZENoaWxkKGZyYWdtZW50KTsKICAgIHJldHVybiBlbGVtZW50OwogIH07CiAgZG9tLmNvbnRlbnQgPSBzdHVwaWRJbm5lckh0bWxBc3NpZ247Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3V0aWwvdGltZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmIHx8IHt9OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWwgPSB5YXdmLnV0aWwgfHwge307CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgdGltZSA9IHV0aWwudGltZSA9IHt9OwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIHRpbWVNb250aERheTogeyBjbjogJ3sxfeaciHsyfeaXpSB7M306ezR9JywgZW46ICd7MX0tezJ9IHszfTp7NH0nIH0sCiAgICB0aW1lVG9kYXk6IHsgY246ICfku4rlpKknLCB0dzogJ+S7iuWkqScsIGVuOiAnVG9kYXknIH0sCiAgICB0aW1lTWludXRlQmVmb3JlOiB7IGNuOiAn5YiG6ZKf5YmNJywgdHc6ICfliIbpkJjliY0nLCBlbjogJyBtaW5zIGFnbycgfSwKICAgIHRpbWVTZWNvbmRCZWZvcmU6IHsgY246ICfnp5LliY0nLCB0dzogJ+enkuWJjScsIGVuOiAnIHNlY3MgYWdvJyB9LAogIH0pOwoKICBjb25zdCB0aW1lVG9QYXJ0cyA9ICh0aW1lLCBsb2NhbGUgPSAnY3VycmVudCcpID0+IHsKICAgIGNvbnN0IG9mZnNldCA9IGxvY2FsZSA9PT0gJ2N1cnJlbnQnID8gbmV3IERhdGUodGltZSkuZ2V0VGltZXpvbmVPZmZzZXQoKSA6CiAgICAgIGxvY2FsZSA9PT0gJ2NzdCcgPyAtNDgwIDogMDsKICAgIHJldHVybiBuZXcgRGF0ZSh0aW1lIC0gb2Zmc2V0ICogNmU0KS50b0lTT1N0cmluZygpLm1hdGNoKC9cZCsvZyk7CiAgfTsKCiAgdGltZS5wYXJzZSA9IGZ1bmN0aW9uICh0ZXh0KSB7CiAgICBsZXQgcGFyc2VEYXRlID0gbnVsbDsKICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7CiAgICBjb25zdCBbY3ksIGNtLCBjZF0gPSB0aW1lVG9QYXJ0cyhub3csICdjc3QnKTsKICAgIGlmICgvXlxkKy1cZCstXGQrIFxkKzpcZCskLy50ZXN0KHRleHQpKSB7CiAgICAgIGNvbnN0IFt5LCBtLCBkLCBoLCB1XSA9IHRleHQubWF0Y2goL1xkKy9nKTsKICAgICAgcGFyc2VEYXRlID0gRGF0ZS5VVEMoeSwgbSAtIDEsIGQsIGgsIHUpIC0gMjg4ZTU7CiAgICB9IGVsc2UgaWYgKC9eKD86XGQrLVxkK3xcZCvmnIhcZCvml6UpXHMqXGQrOlxkKyQvLnRlc3QodGV4dCkpIHsKICAgICAgY29uc3QgW20sIGQsIGgsIHVdID0gdGV4dC5tYXRjaCgvXGQrL2cpOwogICAgICBwYXJzZURhdGUgPSBEYXRlLlVUQyhjeSwgbSAtIDEsIGQsIGgsIHUpIC0gMjg4ZTU7CiAgICB9IGVsc2UgaWYgKC9eKD865LuK5aSpfHRvZGF5KVxzKlxkKzpcZCskL2kudGVzdCh0ZXh0KSkgewogICAgICBjb25zdCBbaCwgdV0gPSB0ZXh0Lm1hdGNoKC9cZCsvZyk7CiAgICAgIHBhcnNlRGF0ZSA9IERhdGUuVVRDKGN5LCBjbSAtIDEsIGNkLCBoLCB1KSAtIDI4OGU1OwogICAgfSBlbHNlIGlmICgvXlxzKlxkK1xzKig/OuWIhumSn+WJjXzliIbpkJjliY18bWlucyBhZ28pLy50ZXN0KHRleHQpKSB7CiAgICAgIGNvbnN0IG1pbiA9IHRleHQubWF0Y2goL1xkKy9nKTsKICAgICAgcGFyc2VEYXRlID0gbm93IC0gbWluICogNmU0OwogICAgfSBlbHNlIGlmICgvXlxzKlxkK1xzKig/OuenkuWJjXxzZWNzIGFnbykvLnRlc3QodGV4dCkpIHsKICAgICAgY29uc3Qgc2VjID0gdGV4dC5tYXRjaCgvXGQrL2cpOwogICAgICBwYXJzZURhdGUgPSBub3cgLSBzZWMgKiAxZTM7CiAgICB9CiAgICByZXR1cm4gcGFyc2VEYXRlID8gbmV3IERhdGUocGFyc2VEYXRlKSA6IG51bGw7CiAgfTsKCiAgY29uc3QgZm9ybWF0dGVyID0gSW50bC5EYXRlVGltZUZvcm1hdCgKICAgIHsgY246ICd6aC1DTicsIGhrOiAnemgtSEsnLCB0dzogJ3poLVRXJywgZW46ICdlbi1VUycgfVt1dGlsLmxhbmd1YWdlXSwKICAgIHsKICAgICAgeWVhcjogJ251bWVyaWMnLAogICAgICBtb250aDogJ251bWVyaWMnLAogICAgICBkYXk6ICdudW1lcmljJywKICAgICAgd2Vla2RheTogJ2xvbmcnLAogICAgICBob3VyOiAnMi1kaWdpdCcsCiAgICAgIG1pbnV0ZTogJzItZGlnaXQnLAogICAgICB0aW1lWm9uZU5hbWU6ICdsb25nJywKICAgIH0KICApOwoKICBjb25zdCBub3cgPSB0aW1lLm5vdyA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gdGltZS5kaWZmKTsKICB9OwoKICB0aW1lLmZvcm1hdCA9IGZ1bmN0aW9uICh0aW1lLCB7IGZvcm1hdCA9ICdhdXRvJywgbG9jYWxlID0gJ2N1cnJlbnQnIH0gPSB7fSkgewogICAgY29uc3QgcmVmID0gbm93KCk7CiAgICBjb25zdCBbaXksIGltLCBpZCwgaWgsIGl1XSA9IHRpbWVUb1BhcnRzKHRpbWUsIGxvY2FsZSk7CiAgICBjb25zdCBbbnksIG5tLCBuZCwgbmgsIF9udV0gPSB0aW1lVG9QYXJ0cyhyZWYsIGxvY2FsZSk7CiAgICBjb25zdCBkaWZmID0gKHJlZiAtIHRpbWUpIC8gMWUzOwogICAgaWYgKGZvcm1hdCA9PT0gJ2Z1bGwnKSB7CiAgICAgIHJldHVybiBmb3JtYXR0ZXIuZm9ybWF0KHRpbWUpOwogICAgfSBlbHNlIGlmIChpeSAhPT0gbnkgfHwgZm9ybWF0ID09PSAneWVhcicpIHsKICAgICAgcmV0dXJuIGAke2l5fS0ke2ltfS0ke2lkfSAke2lofToke2l1fWA7CiAgICB9IGVsc2UgaWYgKGltICE9PSBubSB8fCBpZCAhPT0gbmQgfHwgZm9ybWF0ID09PSAnbW9udGgnKSB7CiAgICAgIHJldHVybiBpMThuLnRpbWVNb250aERheS5yZXBsYWNlKC9ce1xkXH0vZywgbiA9PiBbK2ltLCAraWQsIGloLCBpdV1bblsxXSAtIDFdKTsKICAgIH0gZWxzZSBpZiAoaWggIT09IG5oICYmIGRpZmYgPiAzNjAwIHx8IGZvcm1hdCA9PT0gJ3RvZGF5JykgewogICAgICByZXR1cm4gYCR7aTE4bi50aW1lVG9kYXl9ICR7aWh9OiR7aXV9YDsKICAgIH0gZWxzZSBpZiAoZGlmZiA+IDUwIHx8IGZvcm1hdCA9PT0gJ21pbnV0ZScpIHsKICAgICAgcmV0dXJuIE1hdGguY2VpbChkaWZmIC8gNjApICsgaTE4bi50aW1lTWludXRlQmVmb3JlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIE1hdGgubWF4KE1hdGguY2VpbChkaWZmIC8gMTApLCAxKSAqIDEwICsgaTE4bi50aW1lU2Vjb25kQmVmb3JlOwogICAgfQogIH07CgogIHRpbWUuZGlmZiA9IDA7CiAgdGltZS5zZXREaWZmID0gZnVuY3Rpb24gKGRpZmYpIHsKICAgIHRpbWUuZGlmZiA9ICtkaWZmIHx8IDA7CiAgfTsKCiAgdGltZS5pc0NzdEVxdWl2YWxlbnQgPSBmdW5jdGlvbiAoKSB7CiAgICBjb25zdCB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwogICAgcmV0dXJuIFsuLi5BcnJheSgzNjYpXS5ldmVyeSgoXywgaSkgPT4gbmV3IERhdGUoeWVhciwgMCwgaSkuZ2V0VGltZXpvbmVPZmZzZXQoKSA9PT0gLTQ4MCk7CiAgfTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvdXRpbC9taWQuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKCiAgY29uc3QgYmFzZTYyID0gdXRpbC5iYXNlNjIgPSB7fTsKCiAgY29uc3QgYmFzZTYyRGljdCA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7CgogIGJhc2U2Mi5kZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7CiAgICByZXR1cm4gWy4uLnN0cl0ucmVkdWNlKChwcmV2LCBjaCkgPT4gewogICAgICByZXR1cm4gcHJldiAqIDYyICsgYmFzZTYyRGljdC5pbmRleE9mKGNoKTsKICAgIH0sIDApOwogIH07CgogIGJhc2U2Mi5lbmNvZGUgPSBmdW5jdGlvbiB0b1N0cmluZyhudW0pIHsKICAgIGlmIChudW0gPT09IDApIHJldHVybiAnMCc7CiAgICBpZiAobnVtIDwgNjIpIHJldHVybiBiYXNlNjJEaWN0W251bV07CiAgICByZXR1cm4gdG9TdHJpbmcoTWF0aC5mbG9vcihudW0gLyA2MikpICsgYmFzZTYyRGljdFtudW0gJSA2Ml07CiAgfTsKCiAgY29uc3QgbWlkID0gdXRpbC5taWQgPSB7fTsKCiAgbWlkLmVuY29kZSA9IGZ1bmN0aW9uIChiYXNlMTBtaWQpIHsKICAgIHJldHVybiBiYXNlMTBtaWQubWF0Y2goLy57MSw3fSg/PSg/Oi57N30pKiQpL2cpCiAgICAgIC5tYXAodHJ1bmMgPT4gYmFzZTYyLmVuY29kZShOdW1iZXIodHJ1bmMpKS5wYWRTdGFydCg0LCAwKSkKICAgICAgLmpvaW4oJycpLnJlcGxhY2UoL14wKy8sICcnKTsKICB9OwoKICBtaWQuZGVjb2RlID0gZnVuY3Rpb24gKGJhc2U2Mm1pZCkgewogICAgcmV0dXJuIGJhc2U2Mm1pZC5tYXRjaCgvLnsxLDR9KD89KD86Lns0fSkqJCkvZykKICAgICAgLm1hcCh0cnVuYyA9PiBTdHJpbmcoYmFzZTYyLmRlY29kZSh0cnVuYykpLnBhZFN0YXJ0KDcsIDApKQogICAgICAuam9pbignJykucmVwbGFjZSgvXjArLywgJycpOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3V0aWwvY3JjLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CgogIGNvbnN0IGNyYyA9IHV0aWwuY3JjID0ge307CgogIGNvbnN0IHRhYmxlID0gbmV3IFVpbnQzMkFycmF5KDI1Nik7CiAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKykgewogICAgbGV0IHJlbSA9IGkgPj4+IDA7CiAgICBmb3IgKGxldCBqID0gMDsgaiA8IDg7IGorKykgewogICAgICBpZiAocmVtICYgMSkgcmVtID0gKChyZW0gPj4+IDEpIF4gMHhlZGI4ODMyMCkgPj4+IDA7CiAgICAgIGVsc2UgcmVtID4+Pj0gMTsKICAgIH0KICAgIHRhYmxlW2ldID0gcmVtOwogIH0KCiAgY29uc3QgcGFyc2VTdHJpbmcgPSBmdW5jdGlvbiAoc3RyKSB7CiAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7CiAgICByZXR1cm4gZW5jb2Rlci5lbmNvZGUoc3RyKTsKICB9OwoKICAvKioKICAgKiBAcGFyYW0ge1VpbnQ4QXJyYXl8c3RyaW5nfSBidWZmZXIKICAgKiBAcGFyYW0ge251bWJlcn0gY3JjCiAgICovCiAgY3JjLmNyYzMyID0gZnVuY3Rpb24gKGJ1ZmZlciwgY3JjKSB7CiAgICBjb25zdCBieXRlcyA9IGJ1ZmZlciBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBidWZmZXIgOiBwYXJzZVN0cmluZyhTdHJpbmcoYnVmZmVyKSk7CiAgICBjcmMgPSB+Y3JjID4+PiAwOwogICAgYnl0ZXMuZm9yRWFjaChieXRlID0+IHsKICAgICAgY3JjID0gKGNyYyA+Pj4gOCkgXiB0YWJsZVsoY3JjICYgMHhmZikgXiBieXRlXTsKICAgIH0pOwogICAgY3JjID0gfmNyYyA+Pj4gMDsKICAgIHJldHVybiBjcmM7CiAgfTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gY3VzdG9tIGltcGxlbWVudGF0aW9uIHV0aWwvdGFyYmFsbAo7IChmdW5jdGlvbiAoKSB7CiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgfHwge307CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbCA9IHlhd2YudXRpbCB8fCB7fTsKCiAgLy8g5omT5YyF5bel5YW3CiAgY29uc3QgdGFyYmFsbCA9IHV0aWwudGFyYmFsbCA9IHt9OwoKICAvLyDlsIbkuIDkuKrmlofku7bovazkuLogdGFyYmFsbAogIHRhcmJhbGwuZmlsZSA9IGZ1bmN0aW9uIChmaWxlSW5mbywgYnVmZmVyKSB7CiAgICBjb25zdCBmaWxlbmFtZSA9IGZpbGVJbmZvLmZpbGVuYW1lLCBjb250ZW50ID0gZmlsZUluZm8uY29udGVudCwgbXRpbWUgPSBmaWxlSW5mby5tdGltZTsKICAgIGNvbnN0IGNoZWNrc3VtID0geyB2YWx1ZTogJyAnLnJlcGVhdCg4KSwgc2l6ZTogOCB9OwogICAgY29uc3QgZmllbGRzID0gWwogICAgICAvLyDmlofku7blkI3pmZDliLbkuI3otoXov4cgMTAwIOS4quWtl+espgogICAgICB7IHZhbHVlOiB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZmlsZW5hbWUpKSwgc2l6ZTogMTAwIH0sIC8vIGZpbGVuYW1lCiAgICAgIHsgdmFsdWU6ICcwMDAwNjQ0Jywgc2l6ZTogOCB9LCAvLyBtb2RlCiAgICAgIHsgdmFsdWU6ICcwMDAwMDAwJywgc2l6ZTogOCB9LCAvLyB1aWQKICAgICAgeyB2YWx1ZTogJzAwMDAwMDAnLCBzaXplOiA4IH0sIC8vIGdpZAogICAgICAvLyDmlofku7blpKflsI/kuI3otoXov4cgOEdpQgogICAgICB7IHZhbHVlOiBjb250ZW50LmJ5dGVMZW5ndGgudG9TdHJpbmcoOCkucGFkU3RhcnQoMTEsICcwJyksIHNpemU6IDEyIH0sIC8vIHNpemUKICAgICAgLy8g5L+u5pS55pe26Ze055u05o6l55So5b2T5YmN5pe26Ze0CiAgICAgIHsgdmFsdWU6IE1hdGguZmxvb3IoK210aW1lIC8gMTAwMCkudG9TdHJpbmcoOCkucGFkU3RhcnQoMTEsICcwJyksIHNpemU6IDEyIH0sIC8vIG10aW1lCiAgICAgIGNoZWNrc3VtLCAvLyBjaGtzdW0KICAgICAgeyB2YWx1ZTogJzAnLCBzaXplOiAxIH0sIC8vIHR5cGUKICAgICAgeyB2YWx1ZTogJycsIHNpemU6IDEwMCB9LCAvLyBsaW5lIGZpbGVuYW1lCiAgICAgIHsgdmFsdWU6ICd1c3RhcicsIHNpemU6IDYgfSwgLy8gdXN0YXIKICAgICAgeyB2YWx1ZTogJzAwJywgc2l6ZTogMiB9LCAvLyB1c3RhciB2ZXJzaW9uCiAgICBdOwogICAgYnVmZmVyLmZpbGwoMCk7CiAgICBjb25zdCB3cml0ZUZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgIGNvbnN0IGRhdGEgPSBBcnJheS5mcm9tKGZpZWxkLnZhbHVlKS5tYXAoZnVuY3Rpb24gKGNoYXIpIHsgcmV0dXJuIGNoYXIuY2hhckNvZGVBdCgpOyB9KTsKICAgICAgYnVmZmVyLnNldChkYXRhLCBmaWVsZC5vZmZzZXQpOwogICAgfTsKICAgIGZpZWxkcy5yZWR1Y2UoZnVuY3Rpb24gKG9mZnNldCwgZmllbGQpIHsgZmllbGQub2Zmc2V0ID0gb2Zmc2V0OyByZXR1cm4gb2Zmc2V0ICsgZmllbGQuc2l6ZTsgfSwgMCk7CiAgICBmaWVsZHMuZm9yRWFjaCh3cml0ZUZpZWxkKTsKICAgIGNoZWNrc3VtLnZhbHVlID0gQXJyYXkuZnJvbShidWZmZXIuc2xpY2UoMCwgNTEyKSkucmVkdWNlKGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ICsgeTsgfSkudG9TdHJpbmcoOCkucGFkU3RhcnQoNiwgJzAnKSArICdcMCc7CiAgICB3cml0ZUZpZWxkKGNoZWNrc3VtKTsKICAgIGJ1ZmZlci5zZXQobmV3IFVpbnQ4QXJyYXkoY29udGVudCksIDUxMik7CiAgICByZXR1cm4gYnVmZmVyOwogIH07CgogIC8vIOWwhuS4gOe7hOaWh+S7tuaJk+WMhQogIHRhcmJhbGwuZmlsZXMgPSBmdW5jdGlvbiAoZmlsZXMpIHsKICAgIGNvbnN0IHRhclNpemUgPSBmaWxlcy5yZWR1Y2UoZnVuY3Rpb24gKG9mZnNldCwgZmlsZSkgewogICAgICBjb25zdCBzaXplID0gZmlsZS5jb250ZW50LmJ5dGVMZW5ndGg7CiAgICAgIGZpbGUudGFyU2l6ZSA9IChzaXplID4+IDkgPDwgOSkgKyAoc2l6ZSAlIDUxMiA/IDUxMiA6IDApICsgNTEyOwogICAgICBmaWxlLm9mZnNldCA9IG9mZnNldDsKICAgICAgcmV0dXJuIG9mZnNldCArIGZpbGUudGFyU2l6ZTsKICAgIH0sIDApICsgMTAyNDsKICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcih0YXJTaXplKTsKICAgIGZpbGVzLmZvckVhY2goZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgdXRpbC50YXJiYWxsLmZpbGUoZmlsZSwgbmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCBmaWxlLm9mZnNldCwgZmlsZS50YXJTaXplKSk7CiAgICB9KTsKICAgIHJldHVybiBidWZmZXI7CiAgfTsKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBwbG95ZmlsbCBvZiBicm93c2VyLnJ1bnRpbWUuZ2V0TWFuaWZlc3QKOyAoZnVuY3Rpb24gKCkgewogIGNvbnN0IGJyb3dzZXIgPSB3aW5kb3cud2VCcm93c2VyID0gd2luZG93LndlQnJvd3NlciB8fCB7fTsKICBjb25zdCBydW50aW1lID0gYnJvd3Nlci5ydW50aW1lID0gYnJvd3Nlci5ydW50aW1lIHx8IHt9OwogIHJ1bnRpbWUuZ2V0TWFuaWZlc3QgPSBmdW5jdGlvbiAoKSB7CiAgICBjb25zdCBpbmZvID0gR00uaW5mbzsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IGluZm8uc2NyaXB0Lm5hbWUsCiAgICAgIHZlcnNpb246IGluZm8uc2NyaXB0LnZlcnNpb24uc3BsaXQoJy4nKS5zbGljZSgwLCAzKS5qb2luKCcuJyksCiAgICB9OwogIH07Cn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbW1vbi9uZXR3b3JrL25ldHdvcmsuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2YgPSB3aW5kb3cueWF3ZiB8fCB7fTsKICBjb25zdCBuZXR3b3JrID0geWF3Zi5uZXR3b3JrID0ge307CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKCiAgbmV0d29yay5nZXRVbmlxdWVLZXkgPSAoZnVuY3Rpb24gKCkgewogICAgbGV0IGxhc3QgPSAwOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICcnICsgKGxhc3QgPSBNYXRoLm1heChsYXN0ICsgMSwgRGF0ZS5ub3coKSkpOwogICAgfTsKICB9KCkpOwoKICBuZXR3b3JrLmZha2VDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiAnU1RLXycgKyBuZXR3b3JrLmdldFVuaXF1ZUtleSgpOwogIH07CgogIC8qKgogICAqIEBwYXJhbSB7c3RyaW5nfSByZXNwCiAgICovCiAgbmV0d29yay5wYXJzZUpzb24gPSBmdW5jdGlvbiAocmVzcCkgewogICAgcmV0dXJuIEpTT04ucGFyc2UocmVzcAogICAgICAucmVwbGFjZSgvXig/OnRyeVx7W157XSpcKCk/XHsvLCAneycpCiAgICAgIC5yZXBsYWNlKC99KD86XClccyo7P1xzKn1jYXRjaFwoZVwpXHtcfTs/KT8kLywgJ30nKQogICAgKTsKICB9OwoKICBuZXR3b3JrLmpzb25wID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2spIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIGNvbnN0IGtleSA9ICd5YXdmX2pzb25wXycgKyBjYWxsYmFjazsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoa2V5LCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBpZiAoZXZlbnQuZGV0YWlsLmRhdGEpIHsKICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRldGFpbC5kYXRhKTsKICAgICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlamVjdCgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHV0aWwuaW5qZWN0KGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrLCBrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCBjYWxsYmFjaywgewogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChrZXksIHsKICAgICAgICAgICAgICBkZXRhaWw6IHsgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSkgfSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgZGVsZXRlIHdpbmRvd1tjYWxsYmFja107CiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHJlamVjdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGtleSwgeyBkZXRhaWw6IHsgfSB9KTsKICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICB9OwogICAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgICAgIHNjcmlwdC5zcmMgPSB1cmw7CiAgICAgICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzY3JpcHQucmVtb3ZlKCk7CiAgICAgICAgICBzZXRUaW1lb3V0KHJlamVjdCwgMzAwMCk7CiAgICAgICAgfSk7CiAgICAgICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgcmVqZWN0KTsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICAgIH0sIHVybCwgY2FsbGJhY2ssIGtleSk7CiAgICB9KTsKICB9OwoKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gcmVwbGFjZW1lbnQgb2YgeWFvZmFuZzovL2NvbW1lbnQvbmV0d29yay5mZXRjaC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBuZXR3b3JrID0geWF3Zi5uZXR3b3JrOwoKICBuZXR3b3JrLmZldGNoVGV4dCA9IGFzeW5jIGZ1bmN0aW9uICh1cmwpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIEdNLnhtbEh0dHBSZXF1ZXN0KHsKICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgIHVybDogbmV3IFVSTCh1cmwsIGxvY2F0aW9uLmhyZWYpLmhyZWYsCiAgICAgICAgb25sb2FkOiBmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgcmVzb2x2ZShyZXNwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgfSwKICAgICAgICBvbmVycm9yOiBmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgcmVqZWN0KHJlc3Auc3RhdHVzVGV4dCk7CiAgICAgICAgfSwKICAgICAgfSk7CiAgICB9KTsKICB9OwoKICBuZXR3b3JrLmZldGNoSnNvbiA9IGFzeW5jIGZ1bmN0aW9uICh1cmwpIHsKICAgIHJldHVybiBKU09OLnBhcnNlKGF3YWl0IG5ldHdvcmsuZmV0Y2hUZXh0KHVybCkpOwogIH07CgogIG5ldHdvcmsuZmV0Y2hCbG9iID0gYXN5bmMgZnVuY3Rpb24gKHVybCkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgR00ueG1sSHR0cFJlcXVlc3QoewogICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgdXJsOiBuZXcgVVJMKHVybCwgbG9jYXRpb24uaHJlZikuaHJlZiwKICAgICAgICByZXNwb25zZVR5cGU6ICdibG9iJywKICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICByZXNvbHZlKHJlc3AucmVzcG9uc2UpOwogICAgICAgIH0sCiAgICAgICAgb25lcnJvcjogZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIHJlamVjdChyZXNwLnN0YXR1c1RleHQpOwogICAgICAgIH0sCiAgICAgIH0pOwogICAgfSk7CiAgfTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcmVxdWVzdC91c2VyaW5mby5qcwovKioKICog6L+Z5Liq5paH5Lu255So5p2l57u05oqk55So5oi35L+h5oGvCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG5ldHdvcmsgPSB5YXdmLm5ldHdvcms7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdCA9IHlhd2YucmVxdWVzdCB8fCB7fTsKCiAgLyoqIEB0eXBlZGVmIHt7aWQ6bnVtYmVyLG5hbWU6c3RyaW5nLGF2YXRhcjpzdHJpbmcsZm9sbG93ZWU6bnVtYmVyLGZvbGxvd2VyOm51bWJlcn19IFVzZXJJbmZvICovCiAgLyoqIEB0eXBlIHtNYXA8bnVtYmVyLFVzZXJJbmZvPn0gKi8KICBjb25zdCB1c2VySW5mb0NhY2hlQnlJZCA9IG5ldyBNYXAoKTsKICAvKiogQHR5cGUge01hcDxzdHJpbmcsVXNlckluZm8+fSAqLwogIGNvbnN0IHVzZXJJbmZvQ2FjaGVCeU5hbWUgPSBuZXcgTWFwKCk7CiAgY29uc3QgYmFzZVVybCA9IG5ldyBVUkwoewogICAgdXNlckNhcmQ6ICcvL3dlaWJvLmNvbS9hai92Ni91c2VyL25ld2NhcmQnLAogICAgdXNlckNhcmRfYWJyb2FkOiAnLy93d3cud2VpYm8uY29tL2FqL3Y2L3VzZXIvbmV3Y2FyZCcsCiAgLy8gZG9jdW1lbnQuZG9tYWluIOWfuuS6jiBTVEsubGliLmNhcmQudXNlcmNhcmQuYmFzZWNhcmQg5bm26Z2e56yU6K+vCiAgfVtkb2N1bWVudC5kb21haW4gPT09ICd3d3cud2VpYm8uY29tJyA/ICd1c2VyQ2FyZF9hYnJvYWQnIDogJ3VzZXJDYXJkJ10sIGxvY2F0aW9uLmhyZWYpOwoKICBsZXQgbGFzdFJlcXVlc3QgPSBQcm9taXNlLnJlc29sdmUoKTsKCiAgLyoqCiAgICogQHBhcmFtIHt7aWQ6bnVtYmVyPyxuYW1lOnN0cmluZz99fQogICAqIEByZXR1cm4ge1VzZXJJbmZvfQogICAqLwogIGNvbnN0IHVzZXJJbmZvID0gYXN5bmMgZnVuY3Rpb24gdXNlckluZm8oeyBpZCA9IG51bGwsIG5hbWUgPSBudWxsIH0pIHsKICAgIGF3YWl0IGxhc3RSZXF1ZXN0OwogICAgaWYgKCFpZCAmJiAhbmFtZSkgdGhyb3cgVHlwZUVycm9yKCdSZXF1ZXN0IHVzZXJpbmZvIHdpdGhvdXQgaWQgb3IgbmFtZS4nKTsKICAgIGlmIChpZCAmJiB1c2VySW5mb0NhY2hlQnlJZC5oYXMoaWQpKSB7CiAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHVzZXJJbmZvQ2FjaGVCeUlkLmdldChpZCkpKTsKICAgIH0KICAgIGlmIChuYW1lICYmIHVzZXJJbmZvQ2FjaGVCeU5hbWUuaGFzKG5hbWUpKSB7CiAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHVzZXJJbmZvQ2FjaGVCeU5hbWUuZ2V0KG5hbWUpKSk7CiAgICB9CiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGJhc2VVcmwpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2Fqd3ZyJywgJzYnKTsKICAgIGlmIChpZCkgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2lkJywgaWQpOwogICAgZWxzZSB1cmwuc2VhcmNoUGFyYW1zLnNldCgnbmFtZScsIG5hbWUpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3R5cGUnLCAnMScpOwogICAgY29uc3QgY2FsbGJhY2sgPSBuZXR3b3JrLmZha2VDYWxsYmFjaygpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NhbGxiYWNrJywgY2FsbGJhY2spOwogICAgdHJ5IHsKICAgICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgdXJsKTsKICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldHdvcmsuanNvbnAodXJsLCBjYWxsYmFjayk7CiAgICAgIGxhc3RSZXF1ZXN0ID0gcmVxdWVzdDsKICAgICAgY29uc3QgeyBkYXRhOiBodG1sIH0gPSBhd2FpdCByZXF1ZXN0OwogICAgICAvLyDmiJHku43nhLbml6Dms5XnkIbop6PkuIDkuKrkvb/nlKggSlNPTiDljIXoo7kgSFRNTCDnmoQgQVBJCiAgICAgIGNvbnN0IHVzZXJjYXJkID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhodG1sLCAndGV4dC9odG1sJyk7CiAgICAgIHJldHVybiAoZnVuY3Rpb24gcGFyc2VVc2VySW5mb1Jlc3BvbnNlKCkgewogICAgICAgIGNvbnN0IGF2YXRhciA9IHVzZXJjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5waWNfYm94IGltZycpLnNyYzsKICAgICAgICBjb25zdCBuYW1lID0gdXNlcmNhcmQucXVlcnlTZWxlY3RvcignLm5hbWUgYVt1aWRdJykuZ2V0QXR0cmlidXRlKCd0aXRsZScpOwogICAgICAgIC8vIOiZveeEtuS4gOiIrOadpeivtOaYr+eUseaVsOeggee7hOaIkOeahO+8jOS9huaYryAkQ09ORklHLnVpZCDmmK/lrZfnrKbkuLLnsbvlnovvvIzmiYDku6XmiJHku6zpgbXlrojlvq7ljZrnmoTnsbvlnovnuqblrprkvb/nlKjlrZfnrKbkuLLnsbvlnosKICAgICAgICBjb25zdCBpZCA9IHVzZXJjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5uYW1lIGFbdWlkXScpLmdldEF0dHJpYnV0ZSgndWlkJyk7CiAgICAgICAgY29uc3QgZm9sbG93ZWUgPSB1dGlsLnN0cmluZ3MucGFyc2VpbnQodXNlcmNhcmQucXVlcnlTZWxlY3RvcignLmNfZm9sbG93IGVtJykudGV4dENvbnRlbnQpOwogICAgICAgIGNvbnN0IGZvbGxvd2VyID0gdXRpbC5zdHJpbmdzLnBhcnNlaW50KHVzZXJjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jX2ZhbnMgZW0nKS50ZXh0Q29udGVudCk7CiAgICAgICAgY29uc3QgZGF0YSA9IHsgYXZhdGFyLCBpZCwgbmFtZSwgZm9sbG93ZWUsIGZvbGxvd2VyIH07CiAgICAgICAgdXNlckluZm9DYWNoZUJ5SWQuc2V0KGlkLCBkYXRhKTsKICAgICAgICB1c2VySW5mb0NhY2hlQnlOYW1lLnNldChuYW1lLCBkYXRhKTsKICAgICAgICB1dGlsLmRlYnVnKCdGZXRjaCB1c2VyIGluZm8gZ2V0OiAlbycsIGRhdGEpOwogICAgICAgIHJldHVybiBkYXRhOwogICAgICB9KCkpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgLy8g5Y+v6IO95piv55So5oi35LiN5a2Y5Zyo77yM5Lmf5Y+v6IO95piv5YW25a6D6Zeu6aKYCiAgICAgIHV0aWwuZGVidWcoJ0ZldGNoIHVzZXIgaW5mbyBmYWlsZWQ6IHJlcXVlc3QgJW8sIGVycm9yOiAlbycsIHVybCwgZXJyb3IpOwogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9OwogIHJlcXVlc3QudXNlckluZm8gPSB1c2VySW5mbzsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcmVxdWVzdC91c2Vyc3VnZ2VzdC5qcwovKioKICog5b2T6L6T5YWl55So5oi35ZCN5pe277yM57uZ5Ye65LiA5Liq55So5oi35YiX6KGo5Lul5L6b6YCJ5oupCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG5ldHdvcmsgPSB5YXdmLm5ldHdvcms7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdCA9IHlhd2YucmVxdWVzdCB8fCB7fTsKCiAgY29uc3QgdXNlclN1Z2dlc3RDYWNoZSA9IG5ldyBNYXAoKTsKCiAgY29uc3QgdXNlclN1Z2dlc3RCeVRvcCA9IGFzeW5jIGZ1bmN0aW9uIChrZXkpIHsKICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJ2h0dHBzOi8vcy53ZWliby5jb20vYWpheC90b3BzdWdnZXN0LnBocCcpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ19rJywgbmV0d29yay5nZXRVbmlxdWVLZXkoKSk7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnX3QnLCAxKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdfdicsIG5ldHdvcmsuZmFrZUNhbGxiYWNrKCkpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2tleScsIGtleSk7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgndWlkJywgeWF3Zi5pbml0LnBhZ2UuJENPTkZJRy51aWQpOwogICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgdXJsKTsKICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBuZXR3b3JrLmZldGNoVGV4dCh1cmwpOwogICAgY29uc3QgdXNlcnMgPSBBcnJheS5mcm9tKChuZXR3b3JrLnBhcnNlSnNvbihyZXNwKS5kYXRhIHx8IHt9KS51c2VyKTsKICAgIGNvbnN0IHJlc3VsdCA9IHVzZXJzLm1hcCh1c2VyID0+ICh7CiAgICAgIGlkOiB1c2VyLnVfaWQgKyAnJywKICAgICAgbmFtZTogdXNlci51X25hbWUsCiAgICAgIGF2YXRhcjogdXNlci51X3BpYywKICAgIH0pKTsKICAgIHV0aWwuZGVidWcoJ0dvdCBzdWdnZXN0aW9uIHVzZXJzIGZvciAlbyBmcm9tIHRvcDogJW8nLCBrZXksIHJlc3VsdCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CiAgY29uc3QgdXNlclN1Z2dlc3RCeUZvbGxvdyA9IGFzeW5jIGZ1bmN0aW9uIChrZXkpIHsKICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJ2h0dHBzOi8vd2VpYm8uY29tL2FqL3JlbGF0aW9uL2F0dGVudGlvbicpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ19ybmQnLCBuZXR3b3JrLmdldFVuaXF1ZUtleSgpKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdfdCcsIDApOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2Fqd3ZyJywgNik7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncScsIGtleSk7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgndHlwZScsIDApOwogICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgdXJsKTsKICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBuZXR3b3JrLmZldGNoSnNvbih1cmwpOwogICAgY29uc3QgdXNlcnMgPSBBcnJheS5mcm9tKHJlc3AuZGF0YSk7CiAgICBjb25zdCByZXN1bHQgPSB1c2Vycy5tYXAodXNlciA9PiAoewogICAgICBpZDogdXNlci51aWQgKyAnJywKICAgICAgbmFtZTogdXNlci5zY3JlZW5fbmFtZSwKICAgIH0pKTsKICAgIHV0aWwuZGVidWcoJ0dvdCBzdWdnZXN0aW9uIHVzZXJzIGZvciAlbyBmcm9tIGF0dGVudGlvbjogJW8nLCBrZXksIHJlc3VsdCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CiAgY29uc3QgdXNlclN1Z2dlc3QgPSBhc3luYyBmdW5jdGlvbiB1c2VyU3VnZ2VzdChrZXkpIHsKICAgIGNvbnN0IHN1Z2dlc3RzID0gYXdhaXQgUHJvbWlzZS5hbGwoWwogICAgICB1c2VyU3VnZ2VzdEJ5Rm9sbG93KGtleSkudGhlbih1c2VycyA9PiB1c2VycywgKCkgPT4gW10pLAogICAgICB1c2VyU3VnZ2VzdEJ5VG9wKGtleSkudGhlbih1c2VycyA9PiB1c2VycywgKCkgPT4gW10pLAogICAgXSk7CiAgICBjb25zdCBsaXN0ID0gc3VnZ2VzdHMucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSwgW10pLm1hcCh1c2VyID0+ICh7CiAgICAgIGlkOiB1c2VyLmlkLAogICAgICBuYW1lOiB1c2VyLm5hbWUsCiAgICB9KSk7CiAgICBjb25zdCByZXN1bHQgPSBbLi4ubmV3IE1hcChsaXN0Lm1hcCh1c2VyID0+IFt1c2VyLmlkLCB1c2VyXSkpLnZhbHVlcygpXTsKICAgIHV0aWwuZGVidWcoJ0dvdCBzdWdnZXN0aW9uIHVzZXJzIGZvciAlbzogJW8nLCBrZXksIHJlc3VsdCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CiAgY29uc3QgdXNlclN1Z2dlc3RDYWNoZWQgPSBhc3luYyBmdW5jdGlvbiB1c2VyU3VnZ2VzdENhY2hlZChrZXkpIHsKICAgIGlmICh1c2VyU3VnZ2VzdENhY2hlLmhhcyhrZXkpKSB7CiAgICAgIHJldHVybiB1c2VyU3VnZ2VzdENhY2hlLmdldChrZXkpOwogICAgfQogICAgY29uc3QgcHJvbWlzZSA9IHVzZXJTdWdnZXN0KGtleSk7CiAgICB1c2VyU3VnZ2VzdENhY2hlLnNldChrZXksIHByb21pc2UpOwogICAgdHJ5IHsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvbWlzZTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdXNlclN1Z2dlc3RDYWNoZS5kZWxldGUoa2V5KTsKICAgICAgcmV0dXJuIFtdOwogICAgfQogIH07CiAgcmVxdWVzdC51c2VyU3VnZ2VzdCA9IHVzZXJTdWdnZXN0Q2FjaGVkOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9yZXF1ZXN0L3RvcGljc3VnZ2VzdC5qcwovKioKICog5b2T6L6T5YWl6K+d6aKY5pe277yM57uZ5Ye65LiA5Liq6K+d6aKY5YiX6KGo5Lul5L6b6YCJ5oupCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG5ldHdvcmsgPSB5YXdmLm5ldHdvcms7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdCA9IHlhd2YucmVxdWVzdCB8fCB7fTsKCiAgY29uc3QgdG9waWNTdWdnZXN0ID0gYXN5bmMgZnVuY3Rpb24gKGtleSkgewogICAgY29uc3QgdXJsID0gbmV3IFVSTCgnaHR0cHM6Ly93ZWliby5jb20vYWovbWJsb2cvdG9waWM/Jyk7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnYWp3dnInLCA2KTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdxJywga2V5KTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdfX3JuZCcsICtuZXcgRGF0ZSgpKTsKICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHVybCk7CiAgICBjb25zdCByZXNwID0gYXdhaXQgbmV0d29yay5mZXRjaEpzb24odXJsKTsKICAgIGNvbnN0IHRvcGljcyA9IG5ldyBTZXQoQXJyYXkuZnJvbShyZXNwLmRhdGEpLm1hcCgoeyB0b3BpYyB9KSA9PiB7CiAgICAgIHRvcGljID0gdG9waWMucmVwbGFjZSgvXFvotoXor51cXSQvLCAnJyk7CiAgICAgIGlmICgvXFsuKlxdLy50ZXN0KHRvcGljKSkgcmV0dXJuIG51bGw7CiAgICAgIHJldHVybiB0b3BpYzsKICAgIH0pLmZpbHRlcih0b3BpYyA9PiB0b3BpYykpOwogICAgY29uc3QgcmVzdWx0ID0gWy4uLnRvcGljc107CiAgICB1dGlsLmRlYnVnKCdHb3Qgc3VnZ2VzdGlvbiB0b3BpY3MgZm9yICVvIGZyb20gdG9wOiAlbycsIGtleSwgcmVzdWx0KTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKICByZXF1ZXN0LnRvcGljU3VnZ2VzdCA9IHRvcGljU3VnZ2VzdDsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcmVxdWVzdC9sb25nZmVlZC5qcwovKioKICog5om+5Yiw5LiA5p2h6LaF6ZW/5b6u5Y2a55qE5YWo5paHCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG5ldHdvcmsgPSB5YXdmLm5ldHdvcms7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdCA9IHlhd2YucmVxdWVzdCB8fCB7fTsKCiAgLy8g6L+Z5LiA5qyh5oiR5Lus5LiN5YaN57yT5a2Y6ZW/5b6u5Y2a55qE5Y6f5paH5LqG77yM5Zug5Li6546w5Zyo5b6u5Y2a56We5LuW5aaI5Y+v5Lul57yW6L6R5LqGCiAgY29uc3QgZ2V0TG9uZ1RleHQgPSBhc3luYyBmdW5jdGlvbiAobWlkKSB7CiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKCdodHRwczovL3dlaWJvLmNvbS9wL2FqL21ibG9nL2dldGxvbmd0ZXh0Jyk7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnYWp3dnInLCA2KTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdtaWQnLCBtaWQpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ19fcm5kJywgK25ldyBEYXRlKCkpOwogICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgdXJsKTsKICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBuZXR3b3JrLmZldGNoSnNvbih1cmwpOwogICAgY29uc3QgeyBodG1sIH0gPSAocmVzcCB8fCB7fSkuZGF0YSB8fCB7fTsgaWYgKCFodG1sKSByZXR1cm4gbnVsbDsKICAgIHV0aWwuZGVidWcoJ0dvdCBsb25ndGV4dCBmb3IgJW86ICVvJywgbWlkLCB7IGh0bWwgfSk7CiAgICByZXR1cm4gaHRtbDsKICB9OwogIHJlcXVlc3QuZ2V0TG9uZ1RleHQgPSBnZXRMb25nVGV4dDsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcmVxdWVzdC9ncm91cGxpc3QuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBuZXR3b3JrID0geWF3Zi5uZXR3b3JrOwogIGNvbnN0IHJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgfHwge307CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgZnVuY3Rvb2xzID0gdXRpbC5mdW5jdG9vbHM7CgogIGkxOG4ud2hpc3Blckdyb3VwTmFtZSA9IHsKICAgIGNuOiAn5oKE5oKE5YWz5rOoJywKICB9OwoKICBjb25zdCBncm91cExpc3RWNiA9IGZ1bmN0b29scy5vbmNlKGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IHVybCA9ICdodHRwczovL3dlaWJvLmNvbS9hai9mL2dyb3VwL2xpc3QnOwogICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgdXJsKTsKICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBuZXR3b3JrLmZldGNoSnNvbih1cmwpOwogICAgY29uc3QgZ3JvdXBzID0gcmVzcC5kYXRhLm1hcChmdW5jdGlvbiAoZ3JvdXApIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogJ2cnICsgZ3JvdXAuZ2lkLAogICAgICAgIG5hbWU6IGdyb3VwLmduYW1lLAogICAgICAgIHR5cGU6ICdncm91cCcsCiAgICAgIH07CiAgICB9KTsKICAgIGNvbnN0IHNwZWNpYWwgPSBbewogICAgICBpZDogJ3doaXNwZXInLAogICAgICBuYW1lOiBpMThuLndoaXNwZXJHcm91cE5hbWUsCiAgICAgIHR5cGU6ICd3aGlzcGVyJywKICAgIH1dOwogICAgcmV0dXJuIFsuLi5zcGVjaWFsLCAuLi5ncm91cHNdOwogIH0pOwogIHJlcXVlc3QuZ3JvdXBMaXN0ID0gZ3JvdXBMaXN0VjY7CgogIGNvbnN0IGdyb3VwTGlzdFY3ID0gZnVuY3Rvb2xzLm9uY2UoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgY29uc3QgdXJsID0gbmV3IFVSTCgnL2FqYXgvZmVlZC9hbGxHcm91cHM/aXNfbmV3X3NlZ21lbnQ9MSZmZXRjaF9ob3Q9MScsIGxvY2F0aW9uLmhyZWYpLmhyZWY7CiAgICB1dGlsLmRlYnVnKCdmZXRjaCB1cmwgJXMnLCB1cmwpOwogICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKHVybCkudGhlbihyZXNwID0+IHJlc3AuanNvbigpKTsKICAgIHJldHVybiByZXNwLmdyb3Vwc1sxXS5ncm91cDsgLy8gWzFdIOaYr+iHquWumuS5ieWIhue7hO+8jOS7luS7rOS7o+eggeWwsei/meagtwogIH0pOwogIHJlcXVlc3QuZ3JvdXBMaXN0VjcgPSBncm91cExpc3RWNzsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcmVxdWVzdC9mZWVkc2J5Z3JvdXAuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBuZXR3b3JrID0geWF3Zi5uZXR3b3JrOwogIGNvbnN0IHJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgfHwge307CgogIGNvbnN0IGRvbSA9IHV0aWwuZG9tOwoKICBjbGFzcyBPcmRlck1pc21hdGNoQ291bnQgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuYnVmZmVyID0gW107CiAgICAgIHRoaXMubGRzID0gWzFdOwogICAgICB0aGlzLmxkc20gPSAwOwogICAgfQogICAgYXBwZW5kSXRlbXMoaXRlbXMpIHsKICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5idWZmZXI7CiAgICAgIGNvbnN0IGxkcyA9IHRoaXMubGRzOwogICAgICBidWZmZXIucHVzaCguLi5pdGVtcyk7CiAgICAgIGZvciAobGV0IGkgPSBsZHMubGVuZ3RoLCBsID0gYnVmZmVyLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGxldCBtID0gMSwgdiA9IGJ1ZmZlcltpXTsKICAgICAgICBmb3IgKGxldCBqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBsZXQgbiA9IGxkc1tqXSArIDE7CiAgICAgICAgICBpZiAodiA+PSBidWZmZXJbal0pIGNvbnRpbnVlOwogICAgICAgICAgaWYgKG4gPiBtKSBtID0gbjsKICAgICAgICB9CiAgICAgICAgbGRzW2ldID0gbTsKICAgICAgICBpZiAobSA+IHRoaXMubGRzbSkgdGhpcy5sZHNtID0gbTsKICAgICAgfQogICAgfQogICAgZXJyb3JzKCkgewogICAgICByZXR1cm4gdGhpcy5sZHMubGVuZ3RoIC0gdGhpcy5sZHNtOwogICAgfQogIH0KCiAgY2xhc3MgRmVlZHNCeUdyb3VwTG9hZGVyIHsKICAgIGNvbnN0cnVjdG9yKGdyb3VwLCBwYXJhbXMpIHsKICAgICAgdGhpcy5ncm91cCA9IGdyb3VwOwoKICAgICAgdGhpcy5zZWFyY2ggPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHBhcmFtcyk7CiAgICAgIFsnZ2lkJywgJ3doaXNwZXInLCAnbWluX2lkJywgJ2VuZF9pZCddLmZvckVhY2goa2V5ID0+IHRoaXMuc2VhcmNoLmRlbGV0ZShrZXkpKTsKICAgICAgaWYgKGdyb3VwLmlkLnN0YXJ0c1dpdGgoJ2cnKSkgewogICAgICAgIHRoaXMuc2VhcmNoLnNldCgnZ2lkJywgZ3JvdXAuaWQuc2xpY2UoMSkpOwogICAgICB9IGVsc2UgaWYgKGdyb3VwLmlkID09PSAnd2hpc3BlcicpIHsKICAgICAgICB0aGlzLnNlYXJjaC5zZXQoJ3doaXNwZXInLCAxKTsKICAgICAgfQoKICAgICAgdGhpcy5uZXh0UGFnZSA9IDE7CiAgICAgIC8qKiBAdHlwZSB7eyB0eXBlOiAiZmVlZCIsIGRhdGU6IG51bWJlciwgbWlkOiBzdHJpbmcsIGRvbTogRWxlbWVudCB9W119ICovCiAgICAgIHRoaXMucGVuZGluZ0ZlZWRzID0gW107CiAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IDIwOwogICAgICB0aGlzLm9yZGVyTWlzbWF0Y2ggPSBuZXcgT3JkZXJNaXNtYXRjaENvdW50KCk7CiAgICAgIC8qKiBAdHlwZSB7eyBtaWQ6IHN0cmluZyB9W11bXX0gKi8KICAgICAgdGhpcy5mZWVkc0J5UGFnZSA9IFtdOwogICAgfQogICAgYXN5bmMgcGVlaygpIHsKICAgICAgYXdhaXQgdGhpcy5sb2FkTW9yZSgpOwogICAgICByZXR1cm4gdGhpcy5wZW5kaW5nRmVlZHNbMF07CiAgICB9CiAgICBhc3luYyBuZXh0KCkgewogICAgICBhd2FpdCB0aGlzLmxvYWRNb3JlKCk7CiAgICAgIHJldHVybiB0aGlzLnBlbmRpbmdGZWVkcy5zaGlmdCgpOwogICAgfQogICAgYXN5bmMgaGFzTmV4dCgpIHsKICAgICAgYXdhaXQgdGhpcy5sb2FkTW9yZSgpOwogICAgICByZXR1cm4gdGhpcy5wZW5kaW5nRmVlZHMubGVuZ3RoID4gMDsKICAgIH0KICAgIGFzeW5jIGxvYWRNb3JlKCkgewogICAgICBpZiAodGhpcy5uZXh0UGFnZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICB0cnkgewogICAgICAgIHdoaWxlICh0aGlzLnBlbmRpbmdGZWVkcy5sZW5ndGggPCB0aGlzLmJ1ZmZlclNpemUpIHsKICAgICAgICAgIGNvbnN0IG5ld0xvYWRlZCA9IGF3YWl0IHRoaXMubG9hZE5leHRQYWdlKCk7CiAgICAgICAgICBjb25zdCBlcnJvcnMgPSB0aGlzLm9yZGVyTWlzbWF0Y2guZXJyb3JzKCk7CiAgICAgICAgICB0aGlzLmJ1ZmZlclNpemUgPSBNYXRoLm1heCh0aGlzLmJ1ZmZlclNpemUsIGVycm9ycyAqIDMgKyAyMCk7CiAgICAgICAgICBpZiAoIW5ld0xvYWRlZCkgeyB0aGlzLm5leHRQYWdlID0gbnVsbDsgYnJlYWs7IH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLm5leHRQYWdlID0gbnVsbDsKICAgICAgfQogICAgfQogICAgYXN5bmMgbG9hZE5leHRQYWdlKCkgewogICAgICB0aGlzLm5leHRQYWdlKys7CiAgICAgIGNvbnN0IHNlYXJjaCA9IG5ldyBVUkxTZWFyY2hQYXJhbXModGhpcy5zZWFyY2gpOwogICAgICBpZiAodGhpcy5mZWVkc0J5UGFnZS5sZW5ndGgpIHsKICAgICAgICBjb25zdCBsYXN0UGFnZSA9IHRoaXMuZmVlZHNCeVBhZ2VbdGhpcy5mZWVkc0J5UGFnZS5sZW5ndGggLSAxXTsKICAgICAgICBzZWFyY2guc2V0KCdtaW5faWQnLCBsYXN0UGFnZVswXS5taWQpOwogICAgICAgIHNlYXJjaC5zZXQoJ2VuZF9pZCcsIGxhc3RQYWdlW2xhc3RQYWdlLmxlbmd0aCAtIDFdLm1pZCk7CiAgICAgIH0KICAgICAgY29uc3QgaG9zdG5hbWUgPSAobG9jYXRpb24uaG9zdG5hbWUgPT09ICd3d3cud2VpYm8uY29tJyA/ICd3d3cuJyA6ICcnKSArICd3ZWliby5jb20nOwogICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly8ke2hvc3RuYW1lfS9hai9tYmxvZy9mc2VhcmNoP2AgKyBzZWFyY2g7CiAgICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHVybCk7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG5ldHdvcmsuZmV0Y2hKc29uKHVybCk7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBkb20uY29udGVudChjb250YWluZXIsIHJlc3VsdC5kYXRhKTsKICAgICAgY29uc3QgZmVlZEVsZW1lbnRzID0gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLldCX2ZlZWRfdHlwZVttaWRdJykpOwogICAgICBjb25zdCBmZWVkcyA9IGZlZWRFbGVtZW50cy5tYXAoaXRlbSA9PiB7CiAgICAgICAgY29uc3QgZGF0ZWl0ZW0gPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF9pdGVtX2RhdGUiXVtkYXRlXScpOyBpZiAoIWRhdGVpdGVtKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBkYXRlID0gTnVtYmVyKGRhdGVpdGVtLmdldEF0dHJpYnV0ZSgnZGF0ZScpKTsgaWYgKCFkYXRlKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBtaWQgPSBpdGVtLmdldEF0dHJpYnV0ZSgnZm1pZCcpIHx8IGl0ZW0uZ2V0QXR0cmlidXRlKCdtaWQnKTsKICAgICAgICBpZiAoIW1pZCkgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2ZlZWQnLCBkYXRlLCBtaWQsIGRvbTogaXRlbS5jbG9uZU5vZGUodHJ1ZSkgfTsKICAgICAgfSkuZmlsdGVyKGZlZWQgPT4gZmVlZCk7CiAgICAgIHRoaXMuZmVlZHNCeVBhZ2UucHVzaChmZWVkcyk7CiAgICAgIHRoaXMucGVuZGluZ0ZlZWRzLnB1c2goLi4uZmVlZHMpOwogICAgICB0aGlzLnBlbmRpbmdGZWVkcy5zb3J0KChhLCBiKSA9PiBiLmRhdGUgLSBhLmRhdGUpOwogICAgICB0aGlzLm9yZGVyTWlzbWF0Y2guYXBwZW5kSXRlbXMoZmVlZHMubWFwKCh7IGRhdGUgfSkgPT4gZGF0ZSkpOwogICAgICByZXR1cm4gZmVlZHMubGVuZ3RoOwogICAgfQogIH0KCiAgY29uc3QgZmVlZHNCeUdyb3VwID0gZnVuY3Rpb24gKGdyb3VwLCBwYXJhbXMpIHsKICAgIGNvbnN0IGxvYWRlciA9IG5ldyBGZWVkc0J5R3JvdXBMb2FkZXIoZ3JvdXAsIHBhcmFtcyk7CiAgICByZXR1cm4gewogICAgICBuZXh0OiAoKSA9PiBsb2FkZXIubmV4dCgpLAogICAgICBoYXNOZXh0OiAoKSA9PiBsb2FkZXIuaGFzTmV4dCgpLAogICAgICBwZWVrOiAoKSA9PiBsb2FkZXIucGVlaygpLAogICAgfTsKICB9OwogIHJlcXVlc3QuZmVlZHNCeUdyb3VwID0gZmVlZHNCeUdyb3VwOwoKICBjbGFzcyBGZWVkc0J5R3JvdXBzTG9hZGVyIHsKICAgIGNvbnN0cnVjdG9yKGdyb3VwcywgcGFyYW1zKSB7CiAgICAgIHRoaXMubG9hZGVycyA9IEFycmF5LmZyb20oZ3JvdXBzKS5tYXAoZ3JvdXAgPT4gbmV3IEZlZWRzQnlHcm91cExvYWRlcihncm91cCwgcGFyYW1zKSk7CiAgICAgIHRoaXMua25vd24gPSBuZXcgU2V0KCk7CiAgICB9CiAgICBhc3luYyBnZXRMYXN0KCkgewogICAgICBjb25zdCBsb2FkZXJzID0gdGhpcy5sb2FkZXJzOwogICAgICBpZiAobG9hZGVycy5sZW5ndGggPT09IDApIHJldHVybiBudWxsOwogICAgICAvKiogQHR5cGUge3sgbG9hZGVyOiBGZWVkc0J5R3JvdXBMb2FkZXIsIGZlZWQ6IHsgdHlwZTogImZlZWQiLCBkYXRlOiBudW1iZXIsIG1pZDogc3RyaW5nLCBkb206IEVsZW1lbnQgfXx7IHR5cGU6ICJkb25lIiwgZ3JvdXA6IHsgaWQ6IHN0cmluZyB9IH0gfVtdfSAqLwogICAgICBjb25zdCBmZWVkcyA9IChhd2FpdCBQcm9taXNlLmFsbChsb2FkZXJzLm1hcChhc3luYyBsb2FkZXIgPT4gewogICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgICBjb25zdCBmZWVkID0gYXdhaXQgbG9hZGVyLnBlZWsoKTsKICAgICAgICAgIGlmICghZmVlZCkgcmV0dXJuIHsgbG9hZGVyLCBmZWVkOiB7IHR5cGU6ICdkb25lJywgZ3JvdXA6IGxvYWRlci5ncm91cCB9IH07CiAgICAgICAgICBpZiAoIXRoaXMua25vd24uaGFzKGZlZWQubWlkKSkgewogICAgICAgICAgICByZXR1cm4geyBsb2FkZXIsIGZlZWQgfTsKICAgICAgICAgIH0KICAgICAgICAgIGF3YWl0IGxvYWRlci5uZXh0KCk7CiAgICAgICAgfQogICAgICB9KSkpOwogICAgICBjb25zdCBlbXB0eSA9IGZlZWRzLmZpbmQodiA9PiB2LmZlZWQudHlwZSA9PT0gJ2RvbmUnKTsKICAgICAgaWYgKGVtcHR5KSByZXR1cm4gZW1wdHk7CiAgICAgIGNvbnN0IGxhc3QgPSBmZWVkcy5yZWR1Y2UoKGEsIGIpID0+IGEuZmVlZC5kYXRlID4gYi5mZWVkLmRhdGUgPyBhIDogYik7CiAgICAgIHJldHVybiBsYXN0OwogICAgfQogICAgYXN5bmMgcGVlaygpIHsKICAgICAgY29uc3QgeyBmZWVkIH0gPSBhd2FpdCB0aGlzLmdldExhc3QoKTsKICAgICAgcmV0dXJuIGZlZWQ7CiAgICB9CiAgICBhc3luYyBuZXh0KCkgewogICAgICBjb25zdCB7IGxvYWRlciwgZmVlZCB9ID0gYXdhaXQgdGhpcy5nZXRMYXN0KCk7CiAgICAgIGlmIChmZWVkLnR5cGUgPT09ICdmZWVkJykgewogICAgICAgIGF3YWl0IGxvYWRlci5uZXh0KCk7CiAgICAgICAgdGhpcy5rbm93bi5hZGQoZmVlZC5taWQpOwogICAgICAgIHJldHVybiBmZWVkOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubG9hZGVycy5zcGxpY2UodGhpcy5sb2FkZXJzLmluZGV4T2YobG9hZGVyKSwgMSk7CiAgICAgICAgcmV0dXJuIGZlZWQ7CiAgICAgIH0KICAgIH0KICAgIGFzeW5jIGhhc05leHQoKSB7CiAgICAgIHJldHVybiB0aGlzLmxvYWRlcnMubGVuZ3RoID4gMDsKICAgIH0KICAgIGlzU2hvd24oZmVlZCkgewogICAgICByZXR1cm4gdGhpcy5rbm93bi5oYXMoZmVlZC5taWQpOwogICAgfQogICAgYWRkU2hvd24oZmVlZCkgewogICAgICByZXR1cm4gdGhpcy5rbm93bi5hZGQoZmVlZC5taWQpOwogICAgfQogIH0KCiAgY29uc3QgZmVlZHNCeUdyb3VwcyA9IGZ1bmN0aW9uIChncm91cHMsIHBhcmFtcykgewogICAgY29uc3QgbG9hZGVyID0gbmV3IEZlZWRzQnlHcm91cHNMb2FkZXIoZ3JvdXBzLCBwYXJhbXMpOwogICAgcmV0dXJuIHsKICAgICAgbmV4dDogKCkgPT4gbG9hZGVyLm5leHQoKSwKICAgICAgaGFzTmV4dDogKCkgPT4gbG9hZGVyLmhhc05leHQoKSwKICAgICAgcGVlazogKCkgPT4gbG9hZGVyLnBlZWsoKSwKICAgICAgaXNTaG93bjogZmVlZCA9PiBsb2FkZXIuaXNTaG93bihmZWVkKSwKICAgICAgYWRkU2hvd246IGZlZWQgPT4gbG9hZGVyLmFkZFNob3duKGZlZWQpLAogICAgfTsKICB9OwogIHJlcXVlc3QuZmVlZHNCeUdyb3VwcyA9IGZlZWRzQnlHcm91cHM7CgogIGNsYXNzIEZlZWRzQnlHcm91cHNVbnJlYWRDb3VudCB7CiAgICBjb25zdHJ1Y3Rvcihncm91cHMsIHN0a0luZm8pIHsKICAgICAgdGhpcy5ncm91cHMgPSBBcnJheS5mcm9tKGdyb3VwcykKICAgICAgICAuZmlsdGVyKGdyb3VwID0+IGdyb3VwLmlkLnN0YXJ0c1dpdGgoJ2cnKSkKICAgICAgICAubWFwKGdyb3VwID0+IGdyb3VwLmlkLnNsaWNlKDEpKTsKICAgICAgdGhpcy5zdGtJbmZvID0gc3RrSW5mbzsKICAgICAgdGhpcy5jYWxsYmFja3MgPSBuZXcgU2V0KCk7CiAgICAgIHRoaXMud29ya2luZyA9IGZhbHNlOwogICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlOwogICAgfQogICAgd2F0Y2goY2FsbGJhY2spIHsKICAgICAgdGhpcy5jYWxsYmFja3MuYWRkKGNhbGxiYWNrKTsKICAgICAgaWYgKCF0aGlzLndvcmtpbmcpIHRoaXMuc2NoZWR1bGUoKTsKICAgIH0KICAgIHVud2F0Y2goY2FsbGJhY2spIHsKICAgICAgdGhpcy5jYWxsYmFja3MuZGVsZXRlKGNhbGxiYWNrKTsKICAgIH0KICAgIGFzeW5jIHNjaGVkdWxlKCkgewogICAgICBpZiAodGhpcy5jYWxsYmFja3Muc2l6ZSA9PT0gMCkgdGhpcy53b3JraW5nID0gZmFsc2U7CiAgICAgIHRoaXMud29ya2luZyA9IHRydWU7CiAgICAgIGlmICghdGhpcy5wYXVzZWQpIHsKICAgICAgICBjb25zdCBzdGF0dXMgPSBhd2FpdCB0aGlzLmNoZWNrKCk7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMuc2NoZWR1bGUoKTsgfSwgMzBlMyk7CiAgICAgICAgaWYgKHRoaXMucGF1c2VkKSByZXR1cm47CiAgICAgICAgdGhpcy5jYWxsYmFja3MuZm9yRWFjaChjYWxsYmFjayA9PiB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjYWxsYmFjayhzdGF0dXMpOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICB1dGlsLmRlYnVnKCdFcnJvciB3aGlsZSBjaGVjayB1bnJlYWQgZmVlZHM6ICVvJywgZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMuc2NoZWR1bGUoKTsgfSwgMzBlMyk7CiAgICAgIH0KICAgIH0KICAgIGFzeW5jIGNoZWNrKCkgewogICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKCdodHRwczovL3JtLmFwaS53ZWliby5jb20vMi9yZW1pbmQvdW5yZWFkX2hpbnQuanNvbicpOwogICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnc291cmNlJywgdGhpcy5zdGtJbmZvLnNvdXJjZSk7CiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCd3aXRoX3VybCcsIDEpOwogICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnYXBwa2V5cycsICcnKTsKICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2dyb3VwX2lkcycsIHRoaXMuZ3JvdXBzLmpvaW4oJywnKSk7CiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjYWxsYmFjaycsIG5ldHdvcmsuZmFrZUNhbGxiYWNrKCkpOwogICAgICB1dGlsLmRlYnVnKCdDaGVjayB1bnJlYWQgYnkgZ3JvdXBzOiAlbycsIHVybCk7CiAgICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHVybCk7CiAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBuZXR3b3JrLmZldGNoVGV4dCh1cmwpOwogICAgICBjb25zdCBkYXRhID0gbmV0d29yay5wYXJzZUpzb24ocmVzcCkuZGF0YTsKICAgICAgY29uc3QgZ3JvdXBTdGF0dXMgPSBPYmplY3QuYXNzaWduKC4uLmRhdGEuZ3JvdXBzKTsKICAgICAgY29uc3QgcmVzdWx0ID0gT2JqZWN0LmFzc2lnbiguLi50aGlzLmdyb3Vwcy5tYXAoZ3JvdXAgPT4gKHsgWydzdGF0dXNfJyArIGdyb3VwXTogTnVtYmVyKGdyb3VwU3RhdHVzW2dyb3VwXSkgfSkpKTsKICAgICAgcmVzdWx0LnN0YXR1cyA9IHRoaXMuZ3JvdXBzLnJlZHVjZSgocCwgZ3JvdXApID0+IHAgKyBncm91cFN0YXR1c1tncm91cF0sIDApOwogICAgICBpZiAocmVzdWx0LnN0YXR1cykgewogICAgICAgIHV0aWwuZGVidWcoJ0NoZWNrIHVucmVhZCBieSBncm91cHMgZ290IHVucmVhZDogJW8nLCByZXN1bHQuc3RhdHVzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgcGF1c2UoKSB7IHRoaXMucGF1c2VkID0gdHJ1ZTsgfQogICAgcnVuKCkgeyB0aGlzLnBhdXNlZCA9IGZhbHNlOyB9CiAgfQoKICBjb25zdCB1bnJlYWRCeUdyb3VwcyA9IGZ1bmN0aW9uIChncm91cHMsIHN0a0luZm8pIHsKICAgIGNvbnN0IGxvYWRlciA9IG5ldyBGZWVkc0J5R3JvdXBzVW5yZWFkQ291bnQoZ3JvdXBzLCBzdGtJbmZvKTsKICAgIHJldHVybiB7CiAgICAgIHdhdGNoKGNhbGxiYWNrKSB7IGxvYWRlci53YXRjaChjYWxsYmFjayk7IH0sCiAgICAgIHVud2F0Y2goY2FsbGJhY2spIHsgbG9hZGVyLnVud2F0Y2goY2FsbGJhY2spOyB9LAogICAgICBwYXVzZSgpIHsgbG9hZGVyLnBhdXNlKCk7IH0sCiAgICAgIHJ1bigpIHsgbG9hZGVyLnJ1bigpOyB9LAogICAgfTsKICB9OwogIHJlcXVlc3QudW5yZWFkQnlHcm91cHMgPSB1bnJlYWRCeUdyb3VwczsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcmVxdWVzdC9mb2xsb3dpbmcuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBuZXR3b3JrID0geWF3Zi5uZXR3b3JrOwogIGNvbnN0IHJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgfHwge307CgogIGNvbnN0IGNhdGNoZWQgPSBmID0+IGZ1bmN0aW9uICguLi5hcmdzKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gZi5jYWxsKHRoaXMsIC4uLmFyZ3MpOwogICAgfSBjYXRjaCAoZSkgewogICAgICB1dGlsLmRlYnVnKGUpOyByZXR1cm4gbnVsbDsKICAgIH0KICB9OwoKICBjb25zdCBnZXRGb2xsb3dpbmdQYWdlVjYgPSBhc3luYyBmdW5jdGlvbiAodWlkLCBwYWdlVXJsKSB7CiAgICBjb25zdCB1cmwgPSBwYWdlVXJsIHx8IGBodHRwczovL3dlaWJvLmNvbS8ke3VpZH0vbXlmb2xsb3dgOwogICAgdXRpbC5kZWJ1ZygnRmV0Y2ggRm9sbG93OiBmZXRjaCBwYWdlICVzJywgdXJsKTsKICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHVybCk7CiAgICBjb25zdCByZXNwID0gYXdhaXQgbmV0d29yay5mZXRjaFRleHQodXJsKTsKICAgIGNvbnN0IHJlID0gLzxzY3JpcHQ+Rk1cLnZpZXdcKHsibnMiOiJwbFwucmVsYXRpb25cLm15Rm9sbG93XC5pbmRleCIuKiJodG1sIjooPz0uKig/Om1lbWJlcl9ib3h8V0JfZW1wdHkpKSgiLioiKX1cKTxcL3NjcmlwdD5cbi87CiAgICBjb25zdCBkb20gPSB1dGlsLmRvbS5jb250ZW50KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLCBKU09OLnBhcnNlKHJlc3AubWF0Y2gocmUpWzFdKSk7CgogICAgLy8g5aaC5p6c5Zyo6I635Y+W6L+H56iL5Lit55So5oi35omL5Yqo5Y+W5raI5LqG5LiA5Lqb5YWz5rOo77yM5Y+v6IO95a+86Ie05pyA5ZCO5Yeg6aG15piv56m655m955qECiAgICAvLyDlhbblrp7nnIvliLDov5nnp43mg4XlhrXlsLHor7TmmI7lh7rpl67popjkuoYKICAgIGNvbnN0IGVtcHR5ID0gZG9tLnF1ZXJ5U2VsZWN0b3IoJy5XQl9lbXB0eScpOwogICAgaWYgKGVtcHR5KSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYWxsUGFnZXM6IFtdLAogICAgICAgIGZvbGxvd0luUGFnZTogW10sCiAgICAgIH07CiAgICB9CgogICAgY29uc3QgYWxsUGFnZXMgPSAoZnVuY3Rpb24gKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHBhZ2VMaW5rID0gZG9tLnF1ZXJ5U2VsZWN0b3IoJy5XX3BhZ2VzIGEucGFnZVtocmVmXScpOwogICAgICAgIGNvbnN0IHVybFRlbXBsYXRlID0gbmV3IFVSTChwYWdlTGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSwgdXJsKS5ocmVmOwogICAgICAgIGNvbnN0IHBhZ2VMaW5rcyA9IGRvbS5xdWVyeVNlbGVjdG9yQWxsKCcuV19wYWdlcyAucGFnZScpOwogICAgICAgIGNvbnN0IHBhZ2VDb3VudCA9IE51bWJlcihwYWdlTGlua3NbcGFnZUxpbmtzLmxlbmd0aCAtIDJdLnRleHRDb250ZW50KSB8fCAxOwoKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShBcnJheShwYWdlQ291bnQpKS5tYXAoKF8sIGluZGV4KSA9PiB7CiAgICAgICAgICByZXR1cm4gdXJsVGVtcGxhdGUucmVwbGFjZSgvX3BhZ2U9XGQrLywgJ19wYWdlPScgKyAoaW5kZXggKyAxKSk7CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyBvbmx5IG9uZSBwYWdlCiAgICAgIH0KICAgICAgcmV0dXJuIFt1cmxdOwogICAgfSgpKTsKCiAgICBjb25zdCBmb2xsb3dJdGVtID0gQXJyYXkuZnJvbShkb20ucXVlcnlTZWxlY3RvckFsbCgnLm1lbWJlcl9ib3ggLm1lbWJlcl93cmFwIC5tb2RfcGljIC5waWNfYm94IGEgPiBpbWcnKSk7CiAgICBjb25zdCBmb2xsb3dJblBhZ2UgPSBmb2xsb3dJdGVtLm1hcChpbWcgPT4gewogICAgICBjb25zdCB0aXRsZSA9IGltZy50aXRsZTsKICAgICAgY29uc3QgYXZhdGFyID0gbmV3IFVSTChpbWcuc3JjLCAnaHR0cHM6Ly93ZWliby5jb20nKS5ocmVmOwogICAgICByZXR1cm4gKGNhdGNoZWQoZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOWFs+azqOS6huS4gOS4queUqOaItwogICAgICAgIGNvbnN0IGlkID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhpbWcuZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpIHx8ICcnKS5nZXQoJ2lkJyk7CiAgICAgICAgaWYgKCFpZCkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgaHJlZiA9IGBodHRwczovL3dlaWJvLmNvbS91LyR7aWR9YDsKICAgICAgICBjb25zdCBuYW1lID0gaW1nLmdldEF0dHJpYnV0ZSgnYWx0Jyk7CiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBuYW1lICE9PSB0aXRsZSA/IGBAJHtuYW1lfSAoJHt0aXRsZX0pYCA6ICdAJyArIG5hbWU7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiBgdXNlci0ke2lkfWAsCiAgICAgICAgICB0eXBlOiAndXNlcicsCiAgICAgICAgICB1c2VyOiBpZCwKICAgICAgICAgIHVybDogaHJlZiwKICAgICAgICAgIGF2YXRhciwKICAgICAgICAgIG5hbWUsCiAgICAgICAgICBkZXNjcmlwdGlvbiwKICAgICAgICB9OwogICAgICB9KSgpKSB8fCAoY2F0Y2hlZChmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8g5YWz5rOo5LqG5LiA5pSv6IKh56WoCiAgICAgICAgY29uc3QgaWQgPSAoaW1nLnBhcmVudE5vZGUuaHJlZi5tYXRjaCgvd2VpYm8uY29tXC9wXC8yMzA2NzcoW2EtekEtWlxkXSspLykgfHwgW10pWzFdOwogICAgICAgIGlmICghaWQpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IGhyZWYgPSBgaHR0cHM6Ly93ZWliby5jb20vcC8yMzA2Nzcke2lkfWA7CiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBgJCR7dGl0bGV9JGA7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiAnc3RvY2stJyArIGlkLAogICAgICAgICAgdHlwZTogJ3N0b2NrJywKICAgICAgICAgIHN0b2NrOiBpZCwKICAgICAgICAgIHVybDogaHJlZiwKICAgICAgICAgIGF2YXRhcjogYXZhdGFyLAogICAgICAgICAgbmFtZTogZGVzY3JpcHRpb24sCiAgICAgICAgICBkZXNjcmlwdGlvbiwKICAgICAgICB9OwogICAgICB9KSgpKSB8fCAoY2F0Y2hlZChmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8g5YWz5rOo5LqG5LiA5Liq6K+d6aKYCiAgICAgICAgY29uc3QgcmVmID0gaW1nLnBhcmVudE5vZGUuaHJlZi5tYXRjaCgvaHVhdGkud2VpYm8uY29tLyk7CiAgICAgICAgaWYgKCFyZWYpIHJldHVybiBudWxsOwogICAgICAgIC8vIOWOn+acrOeahOmTvuaOpeWMheWQq+eahOaYr+e8luWPt++8jOi/memHjOaNouaIkOivnemimOaWh+acrO+8jOWboOS4uuivnemimOaWh+acrOavlOe8luWPt+abtOWbuuWumu+8mue8luWPt+WPr+S7peiiq+WIoOmZpO+8jOaWh+acrOaXoOazleS/ruaUuQogICAgICAgIGNvbnN0IGhyZWYgPSBgaHR0cHM6Ly93ZWliby5jb20vay8ke3RpdGxlfWA7CiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBgIyR7dGl0bGV9I2A7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiAndG9waWMtJyArIHRpdGxlLAogICAgICAgICAgdHlwZTogJ3RvcGljJywKICAgICAgICAgIHRvcGljOiB0aXRsZSwKICAgICAgICAgIHVybDogaHJlZiwKICAgICAgICAgIGF2YXRhcjogYXZhdGFyLAogICAgICAgICAgbmFtZTogZGVzY3JpcHRpb24sCiAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sCiAgICAgICAgfTsKICAgICAgfSkoKSkgfHwgKGNhdGNoZWQoZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IGxpbmsgPSBpbWcuY2xvc2VzdCgnW2hyZWZdJyk7CiAgICAgICAgY29uc3QgaHJlZiA9IGxpbmsgJiYgbGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSB8fCBhdmF0YXI7CiAgICAgICAgLy8g5pyq55+l5YWz5rOo5YaF5a65CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiAndW5rbm93bi0nICsgaHJlZiwKICAgICAgICAgIHR5cGU6ICd1bmtub3duJywKICAgICAgICAgIHVybDogaHJlZiwKICAgICAgICAgIGF2YXRhcjogYXZhdGFyLAogICAgICAgICAgZGVzY3JpcHRpb246IHRpdGxlLAogICAgICAgICAgbmFtZTogdGl0bGUsCiAgICAgICAgfTsKICAgICAgfSkoKSk7CiAgICB9KTsKCiAgICBpZiAoIWZvbGxvd0luUGFnZS5sZW5ndGgpIHsKICAgICAgdGhyb3cgRXJyb3IoJ0EgcGFnZSB3aXRoIG5vIGZvbGxvd2luZyBpdGVtcyBvciBlbXB0eSBub3RpY2UuJyk7CiAgICB9CiAgICB1dGlsLmRlYnVnKCdGZXRjaCBmb2xsb3c6IGdvdCAlbyBpbiBwYWdlJywgZm9sbG93SW5QYWdlLmxlbmd0aCk7CgogICAgcmV0dXJuIHsgYWxsUGFnZXMsIGZvbGxvd0luUGFnZSB9OwogIH07CgogIGNvbnN0IGdldEZvbGxvd2luZ1BhZ2VWNyA9IGFzeW5jIGZ1bmN0aW9uICh1aWQsIHBhZ2UpIHsKICAgIGNvbnN0IHVybCA9IGBodHRwczovL3dlaWJvLmNvbS9hamF4L2ZyaWVuZHNoaXBzL2ZyaWVuZHM/cGFnZT0ke3BhZ2UgfHwgMX0mdWlkPSR7dWlkfWA7CiAgICB1dGlsLmRlYnVnKCdGZXRjaCBGb2xsb3c6IGZldGNoIHBhZ2UgJXMnLCB1cmwpOwogICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgdXJsKTsKICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBuZXR3b3JrLmZldGNoSnNvbih1cmwpOwogICAgaWYgKCFyZXNwIHx8ICFBcnJheS5pc0FycmF5KHJlc3AudXNlcnMpIHx8ICFyZXNwLnVzZXJzLmxlbmd0aCkgewogICAgICByZXR1cm4gewogICAgICAgIGFsbFBhZ2VzOiBbXSwKICAgICAgICBmb2xsb3dJblBhZ2U6IFtdLAogICAgICB9OwogICAgfQogICAgY29uc3QgcGFnZXMgPSByZXNwLm5leHRfY3Vyc29yID8gTWF0aC5jZWlsKHJlc3AudG90YWxfbnVtYmVyIC8gKHJlc3AubmV4dF9jdXJzb3IgLSByZXNwLnByZXZpb3VzX2N1cnNvcikpIDogcGFnZTsKICAgIGNvbnN0IGFsbFBhZ2VzID0gQXJyYXkuZnJvbShBcnJheShwYWdlcykpLm1hcCgoXywgaSkgPT4gaSArIDEpOwogICAgLy8gVjcg55qE5YWz5rOo5YiX6KGo546w5Zyo5Y+q6IO955yL5Yiw55So5oi3CiAgICBjb25zdCBmb2xsb3dJblBhZ2UgPSByZXNwLnVzZXJzLm1hcCh1c2VyID0+IHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogYHVzZXItJHt1c2VyLmlkc3RyfWAsCiAgICAgICAgdHlwZTogJ3VzZXInLAogICAgICAgIHVzZXI6IHVzZXIuaWRzdHIsCiAgICAgICAgdXJsOiBuZXcgVVJMKHVzZXIucHJvZmlsZV91cmwsICdodHRwczovL3dlaWJvLmNvbS8nKS5ocmVmLAogICAgICAgIGF2YXRhcjogdXNlci5hdmF0YXJfbGFyZ2UsCiAgICAgICAgbmFtZTogdXNlci5zY3JlZW5fbmFtZSwKICAgICAgICBkZXNjcmlwdGlvbjogJ0AnICsgdXNlci5zY3JlZW5fbmFtZSwKICAgICAgfTsKICAgIH0pOwogICAgdXRpbC5kZWJ1ZygnRmV0Y2ggZm9sbG93OiBnb3QgJW8gaW4gcGFnZScsIGZvbGxvd0luUGFnZS5sZW5ndGgpOwogICAgcmV0dXJuIHsgYWxsUGFnZXMsIGZvbGxvd0luUGFnZSB9OwogIH07CgogIHJlcXVlc3QuZ2V0Rm9sbG93aW5nUGFnZSA9IGFzeW5jIGZ1bmN0aW9uICh1aWQsIHBhZ2UgPSBudWxsKSB7CiAgICBmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8IDE2OyBhdHRlbXB0KyspIHsKICAgICAgaWYgKGF0dGVtcHQgIT09IDApIHsKICAgICAgICB1dGlsLmRlYnVnKCdSZXRyeSBmZXRjaGluZyB1c2VyIGZvbGxvd2luZyBkYXRhOyBhdHRlbXB0ICVkJywgYXR0ZW1wdCArIDEpOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgLy8g6L+Z55qEIGF3YWl0IOS4jeiDveecgeaOie+8jOS4jeeEtiBjYXRjaCDlsLHmipPkuI3kvY/ov5nkuKrov5Tlm57nu5PmnpzkuoYKICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICByZXR1cm4gYXdhaXQgZ2V0Rm9sbG93aW5nUGFnZVY2KHVpZCwgcGFnZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBhd2FpdCBnZXRGb2xsb3dpbmdQYWdlVjcodWlkLCBwYWdlKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB1dGlsLmRlYnVnKCdFcnJvciB3aGlsZSBmZXRjaGluZyB1c2VyIGZvbGxvd2luZyBkYXRhOiAlbycsIGUpOwogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4geyBzZXRUaW1lb3V0KHJlc29sdmUsIDMwZTMgKiBNYXRoLm1pbig4LCBhdHRlbXB0KSk7IH0pOwogICAgICB9CiAgICB9CiAgICB1dGlsLmRlYnVnKCdBYm9ydGVkIGZldGNoaW5nIHVzZXIgZm9sbG93aW5nIGRhdGEsIHRvbyBtYW55IGZhaWxlZCBhdHRlbXB0cy4nKTsKICAgIHRocm93IEVycm9yKCdOZXR3b3JrIGVycm9yIHdoaWxlIGZldGNoaW5nIGZvbGxvd2luZyBkYXRhJyk7CiAgfTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcmVxdWVzdC92b3RlZGV0YWlsLmpzCi8qKgogKiDojrflj5bmipXnpajnmoTor6bmg4UKICovCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgbmV0d29yayA9IHlhd2YubmV0d29yazsKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0IHx8IHt9OwoKICBjb25zdCB2b3RlRGV0YWlsID0gYXN5bmMgZnVuY3Rpb24gKHZvdGVJZCkgewogICAgY29uc3QgdXJsID0gbmV3IFVSTCgnaHR0cHM6Ly92b3RlLndlaWJvLmNvbS9oNS9pbmRleC9pbmRleCcpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3ZvdGVfaWQnLCB2b3RlSWQpOwogICAgdXRpbC5kZWJ1ZygnZmV0Y2ggdXJsICVzJywgdXJsKTsKICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBuZXR3b3JrLmZldGNoVGV4dCh1cmwpOwogICAgY29uc3QgZG9tID0gKG5ldyBET01QYXJzZXIoKSkucGFyc2VGcm9tU3RyaW5nKHJlc3AsICd0ZXh0L2h0bWwnKTsKICAgIGNvbnN0IHNjcmlwdHMgPSBkb20ucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0Om5vdChbc3JjXSknKTsKICAgIGNvbnN0IGRhdGEgPSBbLi4uc2NyaXB0c10ucmVkdWNlKChkYXRhLCBzY3JpcHQpID0+IHsKICAgICAgaWYgKGRhdGEpIHJldHVybiBkYXRhOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHNjcmlwdC50ZXh0Q29udGVudC5tYXRjaCgvXHtbXHNcU10qXH0vKVswXSk7CiAgICAgICAgaWYgKCFkYXRhLnZvdGVfaW5mbykgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwgbnVsbCk7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXF1ZXN0LnZvdGVEZXRhaWwgPSB2b3RlRGV0YWlsOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9yZXF1ZXN0L2ZlZWRmYXZvcml0ZS5qcwovKioKICog5pS26JeP5LiA5p2h5b6u5Y2aCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgfHwge307CgogIGNvbnN0IHN0cmluZ3MgPSB1dGlsLnN0cmluZ3M7CgogIGNvbnN0IGZlZWRGYXZvcml0ZSA9IGZ1bmN0aW9uIChmZWVkLCB7ICRDT05GSUcgfSkgewogICAgY29uc3QgbWlkID0gZmVlZC5nZXRBdHRyaWJ1dGUoJ21pZCcpOwogICAgY29uc3QgdXJsID0gU3RyaW5nKG5ldyBVUkwoJy9hai9mYXYvbWJsb2cvYWRkP2Fqd3ZyPTYnLCBsb2NhdGlvbi5ocmVmKSk7CiAgICBjb25zdCBib2R5ID0gU3RyaW5nKG5ldyBVUkxTZWFyY2hQYXJhbXMoWwogICAgICBbJ21pZCcsIG1pZF0sCiAgICAgIC4uLm5ldyBVUkxTZWFyY2hQYXJhbXMoZmVlZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWFyaycpKSwKICAgICAgWydsb2NhdGlvbicsICRDT05GSUcubG9jYXRpb25dLAogICAgICAuLi5uZXcgVVJMU2VhcmNoUGFyYW1zKGZlZWQuZ2V0QXR0cmlidXRlKCdkaXNzLWRhdGEnKSksCiAgICBdKSk7CiAgICB1dGlsLmRlYnVnKCdmZXRjaCB1cmwgJXNcblBPU1RcbiVzJywgdXJsLCBib2R5KTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgY29uc3Qga2V5ID0gJ2ZlZWRfZmF2b3JpdGVfJyArIHN0cmluZ3MucmFuZEtleSgpOwogICAgICBjb25zdCBsaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBldmVudC5kZXRhaWwuc3VjY2VzcyA9PT0gJ3RydWUnOwogICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGtleSwgbGlzdGVuZXIsIHRydWUpOwogICAgICAgIHJlc29sdmUoc3VjY2Vzcyk7CiAgICAgIH07CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGtleSwgbGlzdGVuZXIsIHRydWUpOwogICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAoeyB1cmwsIGJvZHkgfSwga2V5KSB7CiAgICAgICAgbGV0IHN1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICA7IChhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2godXJsLCB7CiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyhib2R5KSwKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLAogICAgICAgICAgICB9KS50aGVuKHJlc3AgPT4gcmVzcC5qc29uKCkpOwogICAgICAgICAgICBzdWNjZXNzID0gcmVzcC5jb2RlID09PSAnMTAwMDAwJzsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgfQogICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoa2V5LCB7CiAgICAgICAgICAgIGRldGFpbDogeyBzdWNjZXNzOiBKU09OLnN0cmluZ2lmeShzdWNjZXNzKSB9LAogICAgICAgICAgfSk7CiAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgfSgpKTsKICAgICAgfSwgeyB1cmwsIGJvZHkgfSwga2V5KTsKICAgIH0pOwogIH07CiAgcmVxdWVzdC5mZWVkRmF2b3JpdGUgPSBmZWVkRmF2b3JpdGU7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3JlcXVlc3QvaW1hZ2UuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBuZXR3b3JrID0geWF3Zi5uZXR3b3JrOwoKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0IHx8IHt9OwoKICBjb25zdCBnZXRJbWFnZSA9IGZ1bmN0aW9uICh1cmwpIHsKICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHVybCk7CiAgICByZXR1cm4gbmV0d29yay5mZXRjaEJsb2IodXJsLCB7IGNyZWRlbnRpYWxzOiAnb21pdCcgfSk7CiAgfTsKICByZXF1ZXN0LmdldEltYWdlID0gZ2V0SW1hZ2U7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3JlcXVlc3QvZmVlZGhpc3RvcnkuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBuZXR3b3JrID0geWF3Zi5uZXR3b3JrOwogIGNvbnN0IHJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgPSB5YXdmLnJlcXVlc3QgfHwge307CgogIGNvbnN0IHRpbWUgPSB1dGlsLnRpbWU7CgogIGNvbnN0IHBhZ2VTaXplID0gMTA7CiAgY29uc3QgZmVlZEhpc3RvcnlQYWdlID0gYXN5bmMgZnVuY3Rpb24gKG1pZCwgcGFnZSkgewogICAgY29uc3QgaG9zdCA9IGxvY2F0aW9uLmhvc3RuYW1lOwogICAgY29uc3QgdXJsID0gbmV3IFVSTChgaHR0cHM6Ly8ke2hvc3R9L3AvYWovdjYvaGlzdG9yeT9hand2cj02JmRvbWFpbj0xMDA1MDVgKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdtaWQnLCBtaWQpOwogICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3BhZ2UnLCBwYWdlKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdwYWdlX3NpemUnLCBwYWdlU2l6ZSk7CiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnX19ybmQnLCBEYXRlLm5vdygpKTsKICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHVybCArICcnKTsKICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBuZXR3b3JrLmZldGNoSnNvbih1cmwgKyAnJyk7CiAgICBjb25zdCBkYXRhID0gcmVzcC5kYXRhOwogICAgY29uc3QgY291bnQgPSBkYXRhLnRvdGFsX251bTsKICAgIGNvbnN0IGRvbSA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoZGF0YS5odG1sLCAndGV4dC9odG1sJyk7CiAgICBjb25zdCBoaXN0b3J5TGlzdCA9IFsuLi5kb20ucXVlcnlTZWxlY3RvckFsbCgnLldCX2ZlZWRfZGV0YWlsJyldLm1hcChoaXN0b3J5ID0+IHsKICAgICAgY29uc3QgZnJvbSA9IGhpc3RvcnkucXVlcnlTZWxlY3RvcignLldCX2Zyb20nKTsKICAgICAgY29uc3QgZGF0ZSA9IHRpbWUucGFyc2UoZnJvbS5xdWVyeVNlbGVjdG9yKCdhJykudGV4dENvbnRlbnQudHJpbSgpKTsKICAgICAgZnJvbS5yZW1vdmUoKTsKICAgICAgY29uc3QgdGV4dCA9IGhpc3RvcnkucXVlcnlTZWxlY3RvcignLldCX3RleHQnKTsKICAgICAgLy8g5oiR5Lmf5LiN55+l6YGT5Li65LuA5LmI5pyr5bC+5pyJ5LiA5Liq6Zu25a6956m65qC877yM6ICM5LiU6Zu25a6956m65qC85YmN6L+Y5Y+v6IO95pyJ56m65qC8CiAgICAgIGNvbnN0IHNvdXJjZSA9IHRleHQudGV4dENvbnRlbnQucmVwbGFjZSgvXltcc10qfFtcc1x1MjAwYl0qJC9nLCAnJyk7CiAgICAgIHRleHQudGV4dENvbnRlbnQgPSBzb3VyY2U7CiAgICAgIGNvbnN0IGltZ3MgPSBBcnJheS5mcm9tKGhpc3RvcnkucXVlcnlTZWxlY3RvckFsbCgnLldCX3BpYyBpbWcnKSk7CiAgICAgIGlmIChpbWdzLmxlbmd0aCkgewogICAgICAgIGNvbnN0IG9sZCA9IGhpc3RvcnkucXVlcnlTZWxlY3RvcignLldCX21lZGlhX3dyYXAnKTsKICAgICAgICBjb25zdCBtZWRpYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIG1lZGlhLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJXQl9tZWRpYV93cmFwIGNsZWFyZml4Ij48ZGl2IGNsYXNzPSJtZWRpYV9ib3giPjx1bCBjbGFzcz0iV0JfbWVkaWFfYSBjbGVhcmZpeCI+PGxpIGNsYXNzPSJXQl9waWMgU19iZzEgU19saW5lMiIgYWN0aW9uLXR5cGU9ImZsX3BpY3MiPjwvbGk+PC91bD48L2Rpdj48L2Rpdj4nOwogICAgICAgIGNvbnN0IHVsID0gbWVkaWEucXVlcnlTZWxlY3RvcigndWwnKTsKICAgICAgICBjb25zdCBsaSA9IHVsLnJlbW92ZUNoaWxkKHVsLmZpcnN0Q2hpbGQpOwogICAgICAgIHVsLmNsYXNzTGlzdC5hZGQoJ1dCX21lZGlhX2FfbScgKyBpbWdzLmxlbmd0aCk7CiAgICAgICAgaWYgKGltZ3MubGVuZ3RoID4gMSkgdWwuY2xhc3NMaXN0LmFkZCgnV0JfbWVkaWFfYV9tbicpOwogICAgICAgIGltZ3MuZm9yRWFjaCgoaW1nLCBpbmRleCkgPT4gewogICAgICAgICAgY29uc3QgY29udGFpbmVyID0gbGkuY2xvbmVOb2RlKHRydWUpOwogICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2xpXycgKyAoaW5kZXggKyAxKSk7CiAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW1nKTsKICAgICAgICAgIGNvbnN0IGFjdGlvbkRhdGEgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCdpc1ByaXZhdGU9MCZyZWxhdGlvbj0wJyk7CiAgICAgICAgICBhY3Rpb25EYXRhLnNldCgncGljX2lkJywgaW1nLnNyYy5yZXBsYWNlKC9eLipcL3xcLi4qJC9nLCAnJykpOwogICAgICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYWN0aW9uLWRhdGEnLCBhY3Rpb25EYXRhKTsKICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CiAgICAgICAgfSk7CiAgICAgICAgb2xkLnJlcGxhY2VXaXRoKG1lZGlhLmZpcnN0Q2hpbGQpOwogICAgICB9CiAgICAgIHJldHVybiB7IGRhdGUsIGRvbTogaGlzdG9yeSwgdGV4dDogc291cmNlLCBpbWdzIH07CiAgICB9KTsKICAgIHJldHVybiB7IGNvdW50LCBsaXN0OiBoaXN0b3J5TGlzdCB9OwogIH07CgogIGNvbnN0IGZlZWRIaXN0b3J5ID0gYXN5bmMgZnVuY3Rpb24gKG1pZCkgewogICAgY29uc3QgeyBjb3VudCwgbGlzdCB9ID0gYXdhaXQgZmVlZEhpc3RvcnlQYWdlKG1pZCwgMSk7CiAgICBjb25zdCBwYWdlcyA9IE1hdGguY2VpbChjb3VudCAvIHBhZ2VTaXplKTsKICAgIGZvciAobGV0IGkgPSAyOyBpIDw9IHBhZ2VzOyBpKyspIHsKICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGZlZWRIaXN0b3J5UGFnZShtaWQsIGkpOwogICAgICBsaXN0LnB1c2goLi4uZGF0YS5saXN0KTsKICAgIH0KICAgIGxpc3QuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgaXRlbS5pbmRleCA9IGxpc3QubGVuZ3RoIC0gaW5kZXg7CiAgICB9KTsKICAgIHJldHVybiBsaXN0OwogIH07CiAgcmVxdWVzdC5mZWVkSGlzdG9yeSA9IGZlZWRIaXN0b3J5OwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9yZXF1ZXN0L2FsbGltYWdlLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgbmV0d29yayA9IHlhd2YubmV0d29yazsKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0IHx8IHt9OwoKICBjb25zdCBnZXRBbGxJbWFnZXMgPSBhc3luYyBmdW5jdGlvbiAoYXV0aG9yLCBtaWQpIHsKICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoYGh0dHBzOi8vd2VpYm8uY29tLyR7YXV0aG9yfS8ke3V0aWwubWlkLmVuY29kZShtaWQpfWApOwogICAgY29uc3QgaHRtbCA9IGF3YWl0IG5ldHdvcmsuZmV0Y2hUZXh0KHVybCArICcnKTsKICAgIGNvbnN0IGRvbVBhcnNlciA9IG5ldyBET01QYXJzZXIoKTsKICAgIGNvbnN0IHBhZ2UgPSBkb21QYXJzZXIucGFyc2VGcm9tU3RyaW5nKGh0bWwsICd0ZXh0L2h0bWwnKTsKICAgIGNvbnN0IHNjcmlwdHMgPSBBcnJheS5mcm9tKHBhZ2UucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0JykpOwogICAgY29uc3QgZmVlZE1vZGVsID0gc2NyaXB0cy5yZWR1Y2UoKGZlZWRNb2RlbCwgc2NyaXB0KSA9PiB7CiAgICAgIGlmIChmZWVkTW9kZWwpIHJldHVybiBmZWVkTW9kZWw7CiAgICAgIGNvbnN0IGNvbnRlbnQgPSBzY3JpcHQudGV4dENvbnRlbnQubWF0Y2goL15ccypGTVwudmlld1woKFx7LipcfSlcKTs/XHMqJC8pOwogICAgICBpZiAoIWNvbnRlbnQpIHJldHVybiBudWxsOwogICAgICBjb25zdCBtb2RlbCA9IEpTT04ucGFyc2UoY29udGVudFsxXSk7CiAgICAgIGlmIChtb2RlbC5ucyAhPT0gJ3BsLmNvbnRlbnQud2VpYm9EZXRhaWwuaW5kZXgnKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIG1vZGVsOwogICAgfSwgbnVsbCk7CiAgICBpZiAoIWZlZWRNb2RlbCkgcmV0dXJuIG51bGw7CiAgICBjb25zdCBmZWVkID0gZG9tUGFyc2VyLnBhcnNlRnJvbVN0cmluZyhmZWVkTW9kZWwuaHRtbCwgJ3RleHQvaHRtbCcpLnF1ZXJ5U2VsZWN0b3IoJ1ttaWRdJyk7CiAgICBjb25zdCBpbWdzID0gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9waWMgaW1nJykpOwogICAgcmV0dXJuIGltZ3MubWFwKGltZyA9PiBpbWcuc3JjLnJlcGxhY2UoL15odHRwczovLCAnJykpOwogIH07CiAgcmVxdWVzdC5nZXRBbGxJbWFnZXMgPSBnZXRBbGxJbWFnZXM7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3JlcXVlc3QvYXJ0aWNsZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG5ldHdvcmsgPSB5YXdmLm5ldHdvcms7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdCA9IHlhd2YucmVxdWVzdCB8fCB7fTsKCiAgY29uc3QgaWdub3JlRXJyb3IgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgIHRyeSB7IHJldHVybiBjYWxsYmFjaygpOyB9IGNhdGNoIChlKSB7IC8qIGlnbm9yZSAqLyB9CiAgICByZXR1cm4gbnVsbDsKICB9OwoKICBjb25zdCBmZWVkQ2FyZCA9IGZ1bmN0aW9uIChtaWQpIHsKICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3gtaWZyYW1lJyk7CiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzcmMnLCBgaHR0cHM6Ly9jYXJkLndlaWJvLmNvbS9hcnRpY2xlL3YzL2NhcmRpZnJhbWU/dHlwZT1mZWVkJmlkPSR7bWlkfWApOwogICAgaWZyYW1lLmNsYXNzTmFtZSA9ICdjYXJkIGZlZWQtY2FyZCc7CiAgICByZXR1cm4gaWZyYW1lOwogIH07CgogIGNvbnN0IG1lZGlhQ2FyZCA9IGZ1bmN0aW9uIChpZCkgewogICAgY29uc3QgbWVkaWFUeXBlID0geyAxMDAxMjA6ICdtb3ZpZScgfVtpZC5zbGljZSgwLCA2KV07CiAgICBpZiAoIW1lZGlhVHlwZSkgcmV0dXJuIG51bGw7CiAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd4LWlmcmFtZScpOwogICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3JjJywgYGh0dHBzOi8vY2FyZC53ZWliby5jb20vYXJ0aWNsZS92My9jYXJkaWZyYW1lP3R5cGU9bW92aWUmaWQ9MTAyMjoke2lkfWApOwogICAgaWZyYW1lLmNsYXNzTmFtZSA9IGBjYXJkIG1lZGlhLWNhcmQgJHttZWRpYVR5cGV9LW1lZGlhLWNhcmRgOwogICAgcmV0dXJuIGlmcmFtZTsKICB9OwoKICBjb25zdCBzY3JpcHRWaWRlbyA9IGZ1bmN0aW9uIChzY3JpcHQpIHsKICAgIHRyeSB7CiAgICAgIGNvbnN0IG1hdGNoID0gc2NyaXB0Lm1hdGNoKC9rcnZcLmluaXRcKFx7KD86KD89LipzcmNbJyJdP1xzKjpccyooIi4qPyg/IVxcKS4iKSkpKD86KD89Lipwb3N0ZXJbJyJdP1xzKjpccyooIi4qPyg/IVxcKS4iKSkpLyk7CiAgICAgIGNvbnN0IFtfLCBzcmMsIHBvc3Rlcl0gPSBtYXRjaDsKICAgICAgY29uc3QgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpOwogICAgICB2aWRlby5jb250cm9scyA9IHRydWU7CiAgICAgIHZpZGVvLnNyYyA9IEpTT04ucGFyc2Uoc3JjKTsKICAgICAgdmlkZW8ucG9zdGVyID0gSlNPTi5wYXJzZShwb3N0ZXIpOwogICAgICByZXR1cm4gdmlkZW87CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH07CgogIGNvbnN0IHdoaXRlTGlzdFRhZ3MgPSBbCiAgICAnYScsCiAgICAncCcsICdoMScsICdoMicsICdoMycsICdoNCcsICdoNScsICdoNicsCiAgICAnb2wnLCAndWwnLCAnbGknLAogICAgJ3N1cCcsICdzdWInLAogICAgJ2ltZycsCiAgICAndGFibGUnLCAndGhlYWQnLCAndGJvZHknLCAndGZvb3QnLCAndHInLCAndGgnLCAndGQnLAogICAgJ2Jsb2NrcXVvdGUnLCAncXVvdGUnLAogICAgJ2JyJywgJ2hyJywKICAgICdzcGFuJywgJ2RpdicsCiAgXTsKICBjb25zdCB3aGl0ZUxpc3RBdHRyaWJ1dGUgPSB0YWdOYW1lID0+IFsKICAgIC4uLih7CiAgICAgIGltZzogWydzcmMnXSwKICAgIH1bdGFnTmFtZV0gfHwgW10pLAogIF07CiAgY29uc3Qgd2hpdGVMaXN0U3R5bGUgPSB7CiAgICAndGV4dC1hbGlnbic6IC9eKD86bGVmdHxyaWdodHxjZW50ZXJ8anVzdGlmeSkkLywKICAgICdmb250LXN0eWxlJzogL15pdGFsaWMkLywKICAgICdmb250LXdlaWdodCc6IC9eYm9sZCQvLAogICAgJ3RleHQtZGVjb3JhdGlvbi1saW5lJzogL14oPzp1bmRlcmxpbmV8bGluZS10aHJvdWdoKSQvLAogICAgY29sb3I6IGZ1bmN0aW9uIChjb2xvcikgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IFtyLCBnLCBiXSA9IGNvbG9yLm1hdGNoKC9yZ2JhP1woKC4qKVwpLylbMV0uc3BsaXQoJywnKS5tYXAoTnVtYmVyKTsKICAgICAgICBpZiAoTWF0aC5tYXgociwgZywgYikgPCA0NSkgcmV0dXJuICd2YXIoLS10ZXh0LWNvbG9yKSc7CiAgICAgICAgcmV0dXJuIGByZ2IoJHtyfSwgJHtnfSwgJHtifSlgOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0sCiAgfTsKICBjb25zdCBwYXJzZVNwZWNpYWxFbGVtZW50cyA9IGZ1bmN0aW9uICgvKiogQHR5cGUge0hUTUxFbGVtZW50fSAqL2NvbnRhaW5lcikgewogICAgLyoqIEB0eXBlIHtNYXA8SFRNTEVsZW1lbnQsIEhUTUxFbGVtZW50Pn0gKi8KICAgIGNvbnN0IHBsYWNlaG9sZGVycyA9IG5ldyBNYXAoKTsKICAgIGNvbnN0IHJlcGxhY2VFbGVtZW50ID0gKHNvdXJjZSwgcmVzdWx0KSA9PiB7CiAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgneC1zYW5pdGl6ZS1wbGFjZWhvbGRlcicpOwogICAgICBwbGFjZWhvbGRlcnMuc2V0KHBsYWNlaG9sZGVyLCByZXN1bHQpOwogICAgICBzb3VyY2UucmVwbGFjZVdpdGgocGxhY2Vob2xkZXIpOwogICAgfTsKICAgIEFycmF5LmZyb20oY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9mZWVkW2RhdGEtbWlkXScpKS5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAvLyDlvJXnlKjkuIDmnaHlvq7ljZoKICAgICAgY29uc3QgY2FyZCA9IGlnbm9yZUVycm9yKCgpID0+IGZlZWRDYXJkKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW1pZCcpKSk7CiAgICAgIHJlcGxhY2VFbGVtZW50KGVsZW1lbnQsIGNhcmQpOwogICAgfSk7CiAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZGJveCcpKS5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAvLyDlvJXnlKjnlLXlvbHnroDku4sKICAgICAgLyoqIEB0eXBlIHtIVE1MQW5jaG9yRWxlbWVudH0gKi8KICAgICAgY29uc3QgbGluayA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignYVtocmVmXj0iaHR0cHM6Ly93ZWliby5jb20vcC8iXScpOwogICAgICBpZiAobGluaykgewogICAgICAgIGNvbnN0IGlkID0gbGluay5ocmVmLnNwbGl0KCcvJykucG9wKCk7CiAgICAgICAgY29uc3QgbWVkaWEgPSBpZCAmJiBpZ25vcmVFcnJvcigoKSA9PiBtZWRpYUNhcmQoaWQpKTsKICAgICAgICByZXBsYWNlRWxlbWVudChlbGVtZW50LCBtZWRpYSk7CiAgICAgIH0KICAgIH0pOwogICAgQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0JykpLmZvckVhY2goZWxlbWVudCA9PiB7CiAgICAgIC8vIOaPkuWFpeS4gOauteinhumikQogICAgICBpZiAoL2tydi5pbml0XChcey4qXH1cKS8udGVzdChlbGVtZW50LnRleHRDb250ZW50KSkgewogICAgICAgIGNvbnN0IHZpZGVvID0gaWdub3JlRXJyb3IoKCkgPT4gc2NyaXB0VmlkZW8oZWxlbWVudC50ZXh0Q29udGVudCkpOwogICAgICAgIHJlcGxhY2VFbGVtZW50KGVsZW1lbnQsIHZpZGVvKTsKICAgICAgfQogICAgICByZXBsYWNlRWxlbWVudChlbGVtZW50LCBudWxsKTsKICAgIH0pOwogICAgcmV0dXJuIHBsYWNlaG9sZGVyczsKICB9OwogIGNvbnN0IHNhbml0aXplQW5jaG9yRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBsZXQgdXJsOwogICAgdHJ5IHsgdXJsID0gbmV3IFVSTChlbGVtZW50LmhyZWYpOyB9IGNhdGNoIChlKSB7IHVybCA9IG51bGw7IH0KICAgIGlmICghdXJsIHx8ICFbJ2h0dHA6JywgJ2h0dHBzOiddLmluY2x1ZGVzKHVybC5wcm90b2NvbCkpIHsKICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgcmV0dXJuIHNwYW47CiAgICB9CiAgICBjb25zdCBhbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICBhbmNob3IuaHJlZiA9IHVybC5ocmVmOwogICAgYW5jaG9yLnJlZmVycmVyUG9saWN5ID0gJ25vLXJlZmVycmVyJzsKICAgIGFuY2hvci50YXJnZXQgPSAnX2JsYW5rJzsKICAgIHJldHVybiBhbmNob3I7CiAgfTsKICBjb25zdCBhbm90aGVyVGFnID0gZnVuY3Rpb24gKHRhZ05hbWUsIG9yaSkgewogICAgY29uc3QgcmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTsKICAgIGlmIChvcmkuaGFzQXR0cmlidXRlKCdzdHlsZScpKSByZXN1bHQuc2V0QXR0cmlidXRlKCdzdHlsZScsIG9yaS5nZXRBdHRyaWJ1dGUoJ3N0eWxlJykpOwogICAgd2hpbGUgKG9yaS5maXJzdENoaWxkKSByZXN1bHQuYXBwZW5kQ2hpbGQob3JpLmZpcnN0Q2hpbGQpOwogICAgb3JpLnJlcGxhY2VXaXRoKHJlc3VsdCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CiAgY29uc3Qgc2FuaXRpemVDb250ZW50ID0gZnVuY3Rpb24gKC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR9ICovZWxlbWVudCkgewogICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7CiAgICBjb25zdCBwbGFjZWhvbGRlcnMgPSBwYXJzZVNwZWNpYWxFbGVtZW50cyhjb250YWluZXIpOwogICAgLy8g5oqK5bGe5oCn5o2i5oiQIENTUwogICAgW3sgaHRtbDogJ2NvbG9yJywgY3NzOiAnY29sb3InIH0sIHsgaHRtbDogJ2FsaWduJywgY3NzOiAndGV4dEFsaWduJyB9XS5mb3JFYWNoKCh7IGh0bWwsIGNzcyB9KSA9PiB7CiAgICAgIFsuLi5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbChgWyR7aHRtbH1dYCldLmZvckVhY2goZSA9PiBlLnN0eWxlW2Nzc10gPSBlLmdldEF0dHJpYnV0ZShodG1sKSk7CiAgICB9KTsKICAgIC8vIOaKiiBmb250IOagh+etvuaNouaIkCBzcGFuCiAgICBbLi4uY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZvbnQnKV0uZm9yRWFjaChlID0+IHsKICAgICAgYW5vdGhlclRhZygnc3BhbicsIGUpOwogICAgfSk7CiAgICAvLyDmiormoIfnrb7mjaLmiJAgQ1NTCiAgICBbCiAgICAgIHsgdGFnOiAnYicsIGNzczogeyBhdHRyOiAnZm9udC13ZWlnaHQnLCB2YWx1ZTogJ2JvbGQnIH0gfSwKICAgICAgeyB0YWc6ICdkZWwnLCBjc3M6IHsgYXR0cjogJ3RleHQtZGVjb3JhdGlvbicsIHZhbHVlOiAnbGluZS10aHJvdWdoJyB9IH0sCiAgICAgIHsgdGFnOiAnZW0nLCBjc3M6IHsgYXR0cjogJ2ZvbnQtc3R5bGUnLCB2YWx1ZTogJ2l0YWxpYycgfSB9LAogICAgICB7IHRhZzogJ2knLCBjc3M6IHsgYXR0cjogJ2ZvbnQtc3R5bGUnLCB2YWx1ZTogJ2l0YWxpYycgfSB9LAogICAgICB7IHRhZzogJ3MnLCBjc3M6IHsgYXR0cjogJ3RleHQtZGVjb3JhdGlvbicsIHZhbHVlOiAnbGluZS10aHJvdWdoJyB9IH0sCiAgICAgIHsgdGFnOiAnc3RyaWtlJywgY3NzOiB7IGF0dHI6ICd0ZXh0LWRlY29yYXRpb24nLCB2YWx1ZTogJ2xpbmUtdGhyb3VnaCcgfSB9LAogICAgICB7IHRhZzogJ3N0cm9uZycsIGNzczogeyBhdHRyOiAnZm9udC13ZWlnaHQnLCB2YWx1ZTogJ2JvbGQnIH0gfSwKICAgICAgeyB0YWc6ICd1JywgY3NzOiB7IGF0dHI6ICd0ZXh0LWRlY29yYXRpb24nLCB2YWx1ZTogJ3VuZGVybGluZScgfSB9LAogICAgXS5mb3JFYWNoKCh7IHRhZywgY3NzOiB7IGF0dHIsIHZhbHVlIH0gfSkgPT4gewogICAgICBbLi4uY29udGFpbmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZyldLmZvckVhY2goZSA9PiB7CiAgICAgICAgYW5vdGhlclRhZygnc3BhbicsIGUpLnN0eWxlLnNldFByb3BlcnR5KGF0dHIsIHZhbHVlKTsKICAgICAgfSk7CiAgICB9KTsKICAgIC8vIOaKiuWbvueJh+mFjeWtl+aNouaIkCBmaWd1cmUKICAgIGlmIChlbGVtZW50Lm1hdGNoZXMoJy5waWNib3gnKSkgZG8gewogICAgICBjb25zdCBvcmkgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ltZ1tzcmNdJyk7CiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGljaW5mbycpOwogICAgICBpZiAoIW9yaSkgYnJlYWs7CiAgICAgIGNvbnN0IGZpZ3VyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ZpZ3VyZScpOwogICAgICBjb25zdCBpbWcgPSBmaWd1cmUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJykpOwogICAgICBpbWcuc3JjID0gb3JpLnNyYzsKICAgICAgY29uc3QgZGVzY3JpcHRpb25UZXh0ID0gZGVzY3JpcHRpb24gJiYgZGVzY3JpcHRpb24udGV4dENvbnRlbnQudHJpbSgpOwogICAgICBpZiAoZGVzY3JpcHRpb25UZXh0KSB7CiAgICAgICAgY29uc3QgZmlnY2FwdGlvbiA9IGZpZ3VyZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWdjYXB0aW9uJykpOwogICAgICAgIGZpZ2NhcHRpb24udGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvblRleHQ7CiAgICAgIH0KICAgICAgcmV0dXJuIFtmaWd1cmVdOwogICAgfSB3aGlsZSAoZmFsc2UpOwogICAgLy8g5pyA5ZCO5Ymp5LiL55qE5YWD57Sg5YaN5YGa5LiA5qyh5raI5q+SCiAgICByZXR1cm4gWy4uLmNvbnRhaW5lci5jaGlsZE5vZGVzXS5tYXAoZnVuY3Rpb24gc2FuaXRpemUobm9kZSkgewogICAgICB0cnkgewogICAgICAgIGlmIChwbGFjZWhvbGRlcnMuaGFzKG5vZGUpKSByZXR1cm4gcGxhY2Vob2xkZXJzLmdldChub2RlKTsKICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHsKICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShub2RlLnRleHRDb250ZW50KTsKICAgICAgICB9CiAgICAgICAgY29uc3QgZWxlbWVudCA9IG5vZGU7CiAgICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoIShlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBvcmlUYWdOYW1lID0gZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgY29uc3QgdGFnTmFtZSA9IHdoaXRlTGlzdFRhZ3MuaW5jbHVkZXMob3JpVGFnTmFtZSkgPyBvcmlUYWdOYW1lIDogJ3NwYW4nOwogICAgICAgIGlmICh0YWdOYW1lID09PSAnYScpIHsKICAgICAgICAgIGNvbnN0IGFuY2hvciA9IHNhbml0aXplQW5jaG9yRWxlbWVudChlbGVtZW50KTsKICAgICAgICAgIEFycmF5LmZyb20oZWxlbWVudC5jaGlsZE5vZGVzKS5mb3JFYWNoKG5vZGUgPT4gYW5jaG9yLmFwcGVuZENoaWxkKHNhbml0aXplKG5vZGUpKSk7CiAgICAgICAgICByZXR1cm4gYW5jaG9yOwogICAgICAgIH0KICAgICAgICBjb25zdCByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpOwogICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB3aGl0ZUxpc3RBdHRyaWJ1dGUodGFnTmFtZSk7CiAgICAgICAgQXJyYXkuZnJvbShlbGVtZW50LmF0dHJpYnV0ZXMpLmZvckVhY2goYXR0cmlidXRlID0+IHsKICAgICAgICAgIGlmIChhdHRyaWJ1dGVzLmluY2x1ZGVzKGF0dHJpYnV0ZS5uYW1lKSkgewogICAgICAgICAgICByZXN1bHQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZS5uYW1lLCBhdHRyaWJ1dGUudmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHN0eWxlID0gZWxlbWVudC5zdHlsZTsKICAgICAgICBBcnJheS5mcm9tKHN0eWxlKS5mb3JFYWNoKHByb3AgPT4gewogICAgICAgICAgY29uc3QgdmFsdWUgPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHByb3ApOwogICAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gd2hpdGVMaXN0U3R5bGVbcHJvcF07CiAgICAgICAgICBpZiAodGVzdFZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSB7CiAgICAgICAgICAgIGlmICghdGVzdFZhbHVlLnRlc3QodmFsdWUpKSByZXR1cm47CiAgICAgICAgICAgIHJlc3VsdC5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wLCB2YWx1ZSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0ZXN0VmFsdWUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gdGVzdFZhbHVlKHZhbHVlKTsKICAgICAgICAgICAgaWYgKHBhcnNlZCA9PT0gbnVsbCkgcmV0dXJuOwogICAgICAgICAgICByZXN1bHQuc3R5bGUuc2V0UHJvcGVydHkocHJvcCwgcGFyc2VkKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBBcnJheS5mcm9tKGVsZW1lbnQuY2hpbGROb2RlcykuZm9yRWFjaChub2RlID0+IHsKICAgICAgICAgIGNvbnN0IHNhbml0aXplZCA9IHNhbml0aXplKG5vZGUpOwogICAgICAgICAgaWYgKHNhbml0aXplZCkgcmVzdWx0LmFwcGVuZENoaWxkKHNhbml0aXplZCk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICBBcnJheS5mcm9tKGVsZW1lbnQuY2hpbGROb2RlcykuZm9yRWFjaChub2RlID0+IHsKICAgICAgICAgICAgY29uc3Qgc2FuaXRpemVkID0gc2FuaXRpemUobm9kZSk7CiAgICAgICAgICAgIGlmIChzYW5pdGl6ZWQpIHJlc3VsdC5hcHBlbmRDaGlsZChzYW5pdGl6ZWQpOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0gY2F0Y2ggKGUyKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobm9kZS50ZXh0Q29udGVudCk7CiAgICAgICAgICB9IGNhdGNoIChlMykgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0pLmZpbHRlcih4ID0+IHgpOwogIH07CgogIGNvbnN0IHBhcnNlQ29udGVudCA9IGZ1bmN0aW9uICgvKiogQHR5cGUge0hUTUxFbGVtZW50fSAqL2NvbnRlbnQpIHsKICAgIGNvbnN0IHJlc3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgWy4uLmNvbnRlbnQuY2hpbGRyZW5dLmZvckVhY2goZWxlbWVudCA9PiB7CiAgICAgIHNhbml0aXplQ29udGVudChlbGVtZW50KS5mb3JFYWNoKG5vZGUgPT4gcmVzdWx0LmFwcGVuZENoaWxkKG5vZGUpKTsKICAgIH0pOwogICAgcmV0dXJuIHJlc3VsdC5pbm5lckhUTUw7CiAgfTsKCiAgY29uc3QgcGFyc2VBcnRpY2xlID0gZnVuY3Rpb24gKGRvY3VtZW50KSB7CiAgICBjb25zdCBhcnRpY2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25vZGUtdHlwZT0iYXJ0aWNsZUNvbnRlbnQiXScpOwogICAgY29uc3QgcmVzdWx0ID0ge307CiAgICByZXN1bHQudGl0bGUgPSBpZ25vcmVFcnJvcigoKSA9PiBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImFydGljbGVUaXRsZSJdJykudGV4dENvbnRlbnQpOwogICAgcmVzdWx0LmF1dGhvciA9IGlnbm9yZUVycm9yKCgpID0+IHsKICAgICAgY29uc3QgYXV0aG9yID0ge307CiAgICAgIGF1dGhvci5hdmF0YXIgPSBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJy5hdXRob3JpbmZvIGltZycpLnNyYzsKICAgICAgYXV0aG9yLm5hbWUgPSBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJy5hdXRob3JpbmZvIGEnKS50ZXh0Q29udGVudC50cmltKCk7CiAgICAgIGF1dGhvci51aWQgPSBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJy5hdXRob3JpbmZvIGEnKS5ocmVmLnNwbGl0KCcvJykucG9wKCk7CiAgICAgIGF1dGhvci5pbm5lciA9IGlnbm9yZUVycm9yKCgpID0+IHsKICAgICAgICBjb25zdCBpbm5lciA9IHt9OwogICAgICAgIGNvbnN0IGF1dGhvcjIgPSBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJy5hdXRob3JpbmZvIC5hdXRob3IyaW4nKTsKICAgICAgICBpZiAoIWF1dGhvcjIpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IGxpbmsgPSBhdXRob3IyLnF1ZXJ5U2VsZWN0b3IoJ2FbaHJlZl49Ii91LyJdJyk7CiAgICAgICAgaWYgKGxpbmspIHsKICAgICAgICAgIGlubmVyLm5hbWUgPSBsaW5rLnRleHRDb250ZW50LnRyaW0oKTsKICAgICAgICAgIGlubmVyLnVpZCA9IGxpbmsuaHJlZi5zcGxpdCgnLycpLnBvcCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpbm5lci5uYW1lID0gYXV0aG9yMi50ZXh0Q29udGVudC50cmltKCkucmVwbGFjZSgvXlxzKlxTK1xzKy8sICcnKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGlubmVyOwogICAgICB9KTsKICAgICAgcmV0dXJuIGF1dGhvcjsKICAgIH0pOwogICAgcmVzdWx0LmZlZWQgPSBpZ25vcmVFcnJvcigoKSA9PiB7CiAgICAgIGNvbnN0IGZha2VGZWVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLldCX2ZlZWQgW21pZF0nKTsKICAgICAgY29uc3QgbWlkID0gZmFrZUZlZWQuZ2V0QXR0cmlidXRlKCdtaWQnKTsKICAgICAgY29uc3QgY29tbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1thY3Rpb24tdHlwZT0iZmxfY29tbWVudCJdJyk7CiAgICAgIGNvbnN0IG91aWQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGNvbW1lbnQuZ2V0QXR0cmlidXRlKCdhY3Rpb24tZGF0YScpKS5nZXQoJ291aWQnKTsKICAgICAgcmV0dXJuIGBodHRwczovL3dlaWJvLmNvbS8ke291aWR9LyR7dXRpbC5taWQuZW5jb2RlKG1pZCl9YDsKICAgIH0pOwogICAgcmVzdWx0LnRpbWUgPSBpZ25vcmVFcnJvcigoKSA9PiBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJy50aW1lJykudGV4dENvbnRlbnQpOwogICAgcmVzdWx0LmxlYWQgPSBpZ25vcmVFcnJvcigoKSA9PiBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJy5wcmVmYWNlJykudGV4dENvbnRlbnQpOwogICAgcmVzdWx0LmNvdmVyID0gaWdub3JlRXJyb3IoKCkgPT4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25vZGUtdHlwZT0iYXJ0aWNsZUhlYWRlclBpYyJdJykuc3JjKTsKICAgIHJlc3VsdC5zb3VyY2UgPSBpZ25vcmVFcnJvcigoKSA9PiBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJy5hdXRob3JpbmZvIC5kZWwgYVtzdWRhLXVhdHJhY2sqPSJoZWFkbGluZV9wY190cmVuZF9vdXJsX2NsaWNrIl0nKS5ocmVmKTsKICAgIHJlc3VsdC5jcmVhdGVUaW1lID0gaWdub3JlRXJyb3IoKCkgPT4gYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCcudGltZScpLnRleHRDb250ZW50KTsKICAgIHJlc3VsdC5jb250ZW50ID0gaWdub3JlRXJyb3IoKCkgPT4gcGFyc2VDb250ZW50KGFydGljbGUucXVlcnlTZWxlY3RvcignW25vZGUtdHlwZT0iY29udGVudEJvZHkiXScpKSk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIGNvbnN0IGdldEFydGljbGUgPSBhc3luYyBmdW5jdGlvbiAoaWQpIHsKICAgIGNvbnN0IHVybCA9ICdodHRwczovL3dlaWJvLmNvbS90dGFydGljbGUvcC9zaG93P2lkPScgKyBpZDsKICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHVybCk7CiAgICBjb25zdCByZXNwID0gYXdhaXQgbmV0d29yay5mZXRjaFRleHQodXJsKTsKICAgIC8qKiBAdHlwZSB7SFRNTERvY3VtZW50fSAqLwogICAgY29uc3QgZG9tID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhyZXNwLCAndGV4dC9odG1sJyk7CiAgICByZXR1cm4gcGFyc2VBcnRpY2xlKGRvbSk7CiAgfTsKICByZXF1ZXN0LmdldEFydGljbGUgPSBnZXRBcnRpY2xlOwoKICBjb25zdCBnZXRBcnRpY2xlQ2FyZCA9IGFzeW5jIGZ1bmN0aW9uIChzcmMpIHsKICAgIHV0aWwuZGVidWcoJ2ZldGNoIHVybCAlcycsIHNyYyk7CiAgICBjb25zdCBvcmlIdG1sID0gYXdhaXQgbmV0d29yay5mZXRjaFRleHQoc3JjKTsKICAgIGNvbnN0IGh0bWwgPSBvcmlIdG1sLnJlcGxhY2UoLzxoZWFkPi8sICc8aGVhZD48YmFzZSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iaHR0cHM6Ly9jYXJkLndlaWJvLmNvbS8iIC8+PG1ldGEgbmFtZT0icmVmZXJyZXIiIGNvbnRlbnQ9Im5vLXJlZmVycmVyIiAvPicpOwogICAgcmV0dXJuIGh0bWw7CiAgfTsKICByZXF1ZXN0LmdldEFydGljbGVDYXJkID0gZ2V0QXJ0aWNsZUNhcmQ7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHBsb3lmaWxsIG9mIGJyb3dzZXIuc3RvcmFnZQo7IChmdW5jdGlvbiAoKSB7CiAgY29uc3QgYnJvd3NlciA9IHdpbmRvdy53ZUJyb3dzZXIgPSB3aW5kb3cud2VCcm93c2VyIHx8IHt9OwoKICBjb25zdCBzdG9yYWdlID0ge307CiAgYnJvd3Nlci5zdG9yYWdlID0gc3RvcmFnZTsKCiAgY29uc3Qgc3VwcG9ydE9uQ2hhbmdlZCA9IEJvb2xlYW4oR00uYWRkVmFsdWVDaGFuZ2VMaXN0ZW5lcik7CgogIGNvbnN0IG9uQ2hhbmdlTGlzdGVuZXJzID0gW107CiAgY29uc3QgdHJpZ2dlck9uQ2hhbmdlID0gZnVuY3Rpb24gKHsgY2hhbmdlcywgYXJlYU5hbWUgfSkgewogICAgb25DaGFuZ2VMaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgbGlzdGVuZXIoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjaGFuZ2VzKSksIGFyZWFOYW1lKTsKICAgICAgfSBjYXRjaCAoZSkgeyAvKiBpZ25vcmUgKi8gfQogICAgfSk7CiAgfTsKCiAgY29uc3QgY29sbGVjdGVkS2V5cyA9IG5ldyBTZXQoKTsKICBjb25zdCBjb2xsZWN0VmFsdWVzID0gZnVuY3Rpb24gKGdta2V5KSB7CiAgICBpZiAoIXN1cHBvcnRPbkNoYW5nZWQpIHJldHVybjsKICAgIGlmIChjb2xsZWN0ZWRLZXlzLmhhcyhnbWtleSkpIHJldHVybjsKICAgIGNvbGxlY3RlZEtleXMuYWRkKGdta2V5KTsKICAgIEdNLmFkZFZhbHVlQ2hhbmdlTGlzdGVuZXIoZ21rZXksIGZ1bmN0aW9uIChnbWtleSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7CiAgICAgIGNvbnN0IGFyZWFOYW1lID0gZ21rZXkuc2xpY2UoMCwgZ21rZXkuaW5kZXhPZignOjonKSk7CiAgICAgIGNvbnN0IGtleSA9IGdta2V5LnNsaWNlKGdta2V5LmluZGV4T2YoJzo6JykgKyAyKTsKICAgICAgdHJpZ2dlck9uQ2hhbmdlKHsKICAgICAgICBjaGFuZ2VzOiB7CiAgICAgICAgICBba2V5XTogewogICAgICAgICAgICBvbGRWYWx1ZTogSlNPTi5wYXJzZShvbGRWYWx1ZSksCiAgICAgICAgICAgIG5ld1ZhbHVlOiBKU09OLnBhcnNlKG5ld1ZhbHVlKSwKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICBhcmVhTmFtZSwKICAgICAgfSk7CiAgICB9KTsKICB9OwoKICBjb25zdCBzdG9yYWdlQXJlYSA9IGZ1bmN0aW9uIChhcmVhKSB7CiAgICBjb25zdCBwcmVmaXggPSBhcmVhICsgJzo6JzsKICAgIC8qKgogICAgICogQHBhcmFtIHthbnl9IGtleXMKICAgICAqLwogICAgY29uc3QgZ2V0ID0gYXN5bmMgZnVuY3Rpb24gKGtleXMpIHsKICAgICAgY29uc3Qga2V5TGlzdCA9IFtdOwogICAgICBpZiAodHlwZW9mIGtleXMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAga2V5TGlzdC5wdXNoKHsga2V5OiBrZXlzLCBkZWZhdWx0VmFsdWU6IHZvaWQgMCB9KTsKICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGtleXMpKSB7CiAgICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHJldHVybjsKICAgICAgICAgIGtleUxpc3QucHVzaCh7IGtleSwgZGVmYXVsdFZhbHVlOiB2b2lkIDAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoa2V5cyBpbnN0YW5jZW9mIE9iamVjdCkgewogICAgICAgIE9iamVjdC5rZXlzKGtleXMpLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgIGtleUxpc3QucHVzaCh7IGtleSwgZGVmYXVsdFZhbHVlOiBrZXlzW2tleV0gfSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoa2V5cyA9PSBudWxsKSB7CiAgICAgICAgKGF3YWl0IEdNLmxpc3RWYWx1ZXMoKSkuZm9yRWFjaChrZXkgPT4gewogICAgICAgICAgaWYgKCFrZXkuc3RhcnRzV2l0aChwcmVmaXgpKSByZXR1cm47CiAgICAgICAgICBrZXlMaXN0LnB1c2goewogICAgICAgICAgICBrZXk6IGtleS5zbGljZShwcmVmaXgubGVuZ3RoKSwKICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiB2b2lkIDAsCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgICBjb25zdCBhbGxHZXQgPSBrZXlMaXN0Lm1hcChhc3luYyAoeyBrZXksIGRlZmF1bHRWYWx1ZSB9KSA9PiB7CiAgICAgICAgY29sbGVjdFZhbHVlcyhwcmVmaXggKyBrZXkpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IEdNLmdldFZhbHVlKHByZWZpeCArIGtleSk7CiAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIGRlZmF1bHRWYWx1ZTsKICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICByZXR1cm4gdm9pZCAwOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb21pc2UuYWxsKGFsbEdldCk7CiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCAuLi5rZXlMaXN0Lm1hcCgoeyBrZXkgfSwgaW5kZXgpID0+ICgKICAgICAgICByZXN1bHRbaW5kZXhdICE9PSAodm9pZCAwKSA/ICh7IFtrZXldOiByZXN1bHRbaW5kZXhdIH0pIDoge30KICAgICAgKSkpOwogICAgfTsKICAgIGNvbnN0IGdldEJ5dGVzSW5Vc2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZCcpOwogICAgfTsKICAgIGNvbnN0IHNldCA9IGFzeW5jIGZ1bmN0aW9uIChrZXlzKSB7CiAgICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBbXTsKICAgICAgT2JqZWN0LmtleXMoa2V5cykuZm9yRWFjaChrZXkgPT4gewogICAgICAgIHNlcmlhbGl6ZWQucHVzaCh7IGtleSwgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGtleXNba2V5XSkgfSk7CiAgICAgIH0pOwogICAgICBjb25zdCBhbGxTZXQgPSBzZXJpYWxpemVkLm1hcCgoeyBrZXksIHZhbHVlIH0pID0+IHsKICAgICAgICBjb2xsZWN0VmFsdWVzKHByZWZpeCArIGtleSk7CiAgICAgICAgcmV0dXJuIEdNLnNldFZhbHVlKHByZWZpeCArIGtleSwgdmFsdWUpOwogICAgICB9KTsKICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYWxsU2V0KTsKICAgIH07CiAgICBjb25zdCByZW1vdmUgPSBhc3luYyBmdW5jdGlvbiAoa2V5cykgewogICAgICBjb25zdCBrZXlMaXN0ID0gW107CiAgICAgIGlmICh0eXBlb2Yga2V5cyA9PT0gJ3N0cmluZycpIHsKICAgICAgICBrZXlMaXN0LnB1c2goa2V5cyk7CiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShrZXlzKSkgewogICAgICAgIGtleUxpc3QucHVzaCguLi5rZXlzKTsKICAgICAgfQogICAgICBjb25zdCBhbGxEZWxldGUgPSBrZXlMaXN0Lm1hcChrZXkgPT4gewogICAgICAgIHJldHVybiBHTS5kZWxldGVWYWx1ZShwcmVmaXggKyBrZXkpOwogICAgICB9KTsKICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYWxsRGVsZXRlKTsKICAgIH07CiAgICBjb25zdCBjbGVhciA9IGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgICAgY29uc3Qga2V5cyA9IGF3YWl0IEdNLmxpc3RWYWx1ZXMoKTsKICAgICAgcmV0dXJuIHJlbW92ZShrZXlzLmZpbHRlcihrZXkgPT4ga2V5LnN0YXJ0c1dpdGgocHJlZml4KSkpOwogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGdldCwKICAgICAgZ2V0Qnl0ZXNJblVzZSwKICAgICAgc2V0LAogICAgICByZW1vdmUsCiAgICAgIGNsZWFyLAogICAgfTsKICB9OwoKICBzdG9yYWdlLnN5bmMgPSBzdG9yYWdlQXJlYSgnc3luYycpOwogIHN0b3JhZ2UubG9jYWwgPSBzdG9yYWdlQXJlYSgnbG9jYWwnKTsKCiAgY29uc3Qgb25DaGFuZ2VkID0gc3RvcmFnZS5vbkNoYW5nZWQgPSB7fTsKICBvbkNoYW5nZWQuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHsKICAgIGlmIChvbkNoYW5nZUxpc3RlbmVycy5pbmNsdWRlcyhsaXN0ZW5lcikpIHJldHVybjsKICAgIG9uQ2hhbmdlTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOwogIH07CiAgb25DaGFuZ2VkLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7CiAgICBjb25zdCBpbmRleCA9IG9uQ2hhbmdlTGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpOwogICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICBvbkNoYW5nZUxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpOwogICAgfQogIH07CiAgb25DaGFuZ2VkLmhhc0xpc3RlbmVyID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7CiAgICByZXR1cm4gb25DaGFuZ2VMaXN0ZW5lcnMuaW5jbHVkZXMobGlzdGVuZXIpOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3N0b3JhZ2Uvc3RvcmFnZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IGJyb3dzZXIgPSB3aW5kb3cud2VCcm93c2VyOwogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmIHx8IHt9OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWwgPSB5YXdmLnV0aWwgfHwge307CgogIGNvbnN0IHN0b3JhZ2UgPSB5YXdmLnN0b3JhZ2UgPSB7fTsKCiAgLyoqCiAgICog5b2T6K6+572u6aG55Y+Y5YyW5pe257uZ5Ye66ZKI5a+55p+Q5Liq6K6+572u55qE5Zue6LCDCiAgICog5rWP6KeI5Zmo5o+Q5L6b55qE5o6l5Y+j5Lya6ZKI5a+55omA5pyJ6K6+572u6aG557uZ5Zue6LCD77yM5L2G5piv5oiR5Lus5pi+54S25Y+q6ZyA6KaB54m55a6a55qE6K6+572u6aG577yM5omA5Lul5YyF6KOF5LiA5bGCCiAgICovCiAgY2xhc3MgU3RvcmFnZVdhdGNoZXIgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIC8qKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgTWFwPHN0cmluZywgU2V0PEZ1bmN0aW9uPj4+fSAqLwogICAgICB0aGlzLndhdGNoZXIgPSB7IGxvY2FsOiBuZXcgTWFwKCksIHN5bmM6IG5ldyBNYXAoKSB9OwogICAgICBicm93c2VyLnN0b3JhZ2Uub25DaGFuZ2VkLmFkZExpc3RlbmVyKChjaGFuZ2VzLCBhcmVhKSA9PiB7CiAgICAgICAgY29uc3Qgd2F0Y2hlciA9IHRoaXMud2F0Y2hlclthcmVhXTsKICAgICAgICBPYmplY3Qua2V5cyhjaGFuZ2VzKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICBpZiAoIXdhdGNoZXIuaGFzKGtleSkpIHJldHVybjsKICAgICAgICAgIGNvbnN0IHsgb2xkVmFsdWUsIG5ld1ZhbHVlIH0gPSBjaGFuZ2VzW2tleV07CiAgICAgICAgICB3YXRjaGVyLmdldChrZXkpLmZvckVhY2goY2FsbGJhY2sgPT4gewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGNhbGxiYWNrKG5ld1ZhbHVlLCBvbGRWYWx1ZSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICB1dGlsLmRlYnVnKCdFcnJvciB3aGlsZSBpbnZva2Ugc3RvcmFnZSB3YXRjaGVyICVzLiVzIC0+ICVvOlxuJW8nLCBhcmVhLCBrZXksIGNhbGxiYWNrLCBlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0ge1N0b3JhZ2VJdGVtfSBzdG9yYWdlCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICAgICovCiAgICBhZGRMaXN0ZW5lcihzdG9yYWdlLCBjYWxsYmFjaykgewogICAgICBjb25zdCB3YXRjaGVyID0gdGhpcy53YXRjaGVyW3N0b3JhZ2UuYXJlYV07CiAgICAgIGlmICghd2F0Y2hlci5oYXMoc3RvcmFnZS5rZXkpKSB3YXRjaGVyLnNldChzdG9yYWdlLmtleSwgbmV3IFNldCgpKTsKICAgICAgd2F0Y2hlci5nZXQoc3RvcmFnZS5rZXkpLmFkZChjYWxsYmFjayk7CiAgICAgIGNvbnN0IHJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICghd2F0Y2hlci5oYXMoc3RvcmFnZS5rZXkpKSByZXR1cm4gZmFsc2U7CiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gd2F0Y2hlci5nZXQoc3RvcmFnZS5rZXkpOwogICAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spOwogICAgICAgIGlmIChjYWxsYmFja3Muc2l6ZSA9PT0gMCkgd2F0Y2hlci5kZWxldGUoc3RvcmFnZS5rZXkpOwogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH07CiAgICAgIHJldHVybiB7IHJlbW92ZUxpc3RlbmVyIH07CiAgICB9CiAgfQoKICBjb25zdCB3YXRjaGVyID0gbmV3IFN0b3JhZ2VXYXRjaGVyKCk7CgogIC8qKgogICAqIOaPj+i/sOWvueW6lOa1j+iniOWZqOeahOS4gOS4quiuvue9rumhuQogICAqIOiuvue9rumhueeahOWAvOaAu+aYr+S4gOS4quWvueixoe+8jOWvueixoeeahOS4jeWQjOmUruWvueW6lOWFtuS7lueahOWQq+S5iQogICAqLwogIGNsYXNzIFN0b3JhZ2VJdGVtIHsKICAgIC8qKgogICAgICogQHBhcmFtIHtzdHJpbmd9IGtleQogICAgICogQHBhcmFtIHtib29sZWFufSBpc0xvY2FsCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGtleSwgaXNMb2NhbCA9IGZhbHNlKSB7CiAgICAgIHRoaXMuYXJlYSA9IGlzTG9jYWwgPyAnbG9jYWwnIDogJ3N5bmMnOwogICAgICB0aGlzLmtleSA9IGtleTsKICAgICAgdGhpcy5sYXN0ID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgIHRoaXMucHJvY2Vzc2luZyA9IGZhbHNlOwogICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7CiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTsKICAgICAgLyoqIEB0eXBlIEFycmF5PEZ1bmN0aW9uPiAqLwogICAgICB0aGlzLndhdGNoZXIgPSBbXTsKICAgICAgd2F0Y2hlci5hZGRMaXN0ZW5lcih0aGlzLCBuZXdWYWx1ZSA9PiB7CiAgICAgICAgLyoKICAgICAgICAgKiDlpoLmnpzlvZPliY3mraPmnInku7vkvZXmk43kvZzvvIzpgqPkuYjov5nkuKogb25DaGFuZ2Ug5Y+v6IO95piv5oiR5Lus6Ieq5bex6Kem5Y+R55qE77yMCiAgICAgICAgICog6ICM5LiU5pyJ5Y+v6IO96L+Z5LiqIG9uQ2hhbmdlIOi/mOS4jeaYr+acgOaWsOeahO+8iOavlOWmguaIkeS7rOi/nue7reiwg+eUqOS6huWHoOasoSBzZXTvvIzlj6rmnInmnIDlkI7kuIDmrKHmmK/mnInmhI/kuYnnmoTvvIkKICAgICAgICAgKiDpgqPkuYjmiJHku6zmjqjov58gb25DaGFuZ2Ug5LqL5Lu255qE5Y+R55Sf77yM562J5Yiw5oiR5Lus55qE5pWw5o2u5YaZ5YWl5a6M5oiQ5LmL5ZCO77yM5YaN6K+75Y+W5pyA5paw55qE5pWw5o2u5qOA5p+lIG9uQ2hhbmdlCiAgICAgICAgICog5aaC5p6c5b2T5YmN5rKh5pyJ5pON5L2c77yM6YKj5LmI6K+05piOIG9uQ2hhbmdlIOWPr+iDveadpeiHquS6juWFtuS7lumhtemdogogICAgICAgICAqIOi/meaXtuWAmeaIkeS7rOWwseWPr+S7peaUvuW/g+Wkp+iDhuWcsOinpuWPkSBvbkNoYW5nZSDkuoYKICAgICAgICAgKi8KICAgICAgICBpZiAodGhpcy5wcm9jZXNzaW5nKSB7CiAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5vbkNoYW5nZShuZXdWYWx1ZSk7CiAgICAgIH0pOwogICAgfQogICAgYXN5bmMgcnVuKGNhbGxiYWNrKSB7CiAgICAgIC8qCiAgICAgICAqIOW9k+aJp+ihjOW8guatpeaTjeS9nOaXtu+8jOaIkeS7rOmmluWFiOagh+iusCBwcm9jZXNzaW5nIOS7pemYu+atoiBvbkNoYW5nZQogICAgICAgKiDmjqXkuIvmnaXmraPluLjmiafooYzmk43kvZwKICAgICAgICovCiAgICAgIHRoaXMucHJvY2Vzc2luZyA9IHRydWU7CiAgICAgIGNvbnN0IGxhc3QgPSB0aGlzLmxhc3QgPSB0aGlzLmxhc3QudGhlbihjYWxsYmFjaykudGhlbih2YWx1ZSA9PiB2YWx1ZSwgZXJyb3IgPT4gewogICAgICAgIHV0aWwuZGVidWcoJ0Vycm9yIHdoaWxlIGhhbmRsaW5nIHN0b3JhZ2U6ICVvJywgZXJyb3IpOwogICAgICB9KTsKICAgICAgbGFzdC50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICBpZiAobGFzdCAhPT0gdGhpcy5sYXN0KSByZXR1cm47CiAgICAgICAgLyoKICAgICAgICAgKiDlm57osIPmnInml7blgJnmnInlu7bov5/vvIzmiYDku6XmiJHku6zov4cgNSDnp5Llho3mo4Dmn6XvvIzlj6/ku6Xov4fmu6Tmjonml6DmlYjnmoTlm57osIMKICAgICAgICAgKiDlubbkuI3mmK/ku4DkuYjlvojlpb3nmoTop6PlhrPlip7ms5XvvIzkvYbmmK/lj43mraPmiJHkuZ/msqHmib7liLDmm7Tlpb3nmoTop6PlhrPlip7ms5UKICAgICAgICAgKi8KICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwMCkpOwogICAgICAgIC8qCiAgICAgICAgICog5aaC5p6c5qCH6K6w5L2N5LiN5piv5oiR5Lus6K6+572u55qE77yM6YKj5LmI6K+05piO5Zyo5q2k5LmL5ZCO5Y+I6LCD55So5LqGIHJ1bgogICAgICAgICAqIOmCo+S5iOi/meS4quaXtuWAmSBwcm9jZXNzaW5nIOS4jeW6lOmHjee9rgogICAgICAgICAqLwogICAgICAgIGlmIChsYXN0ICE9PSB0aGlzLmxhc3QpIHJldHVybjsKICAgICAgICAvKgogICAgICAgICAqIOWmguaenOWcqOWGmeWFpei/h+eoi+S4re+8jOaciSBvbkNoYW5nZSDlm57miqXlm57mnaXvvIzpgqPkuYggZGlydHkg6KKr572u5L2NCiAgICAgICAgICog5q2k5pe25oiR5Lus5Li75Yqo5ouJ5Y675LiA6YGN5YC85p2l6Kem5Y+RIG9uQ2hhbmdlCiAgICAgICAgICog5rOo5oSP77yM5q2k5pe2IG9uQ2hhbmdlIOWPr+iDveiiq+aXoOaEj+S5ieWcsOinpuWPkeS6huS4gOasoe+8jOaJgOS7pemcgOimgeWcqOS4iuS4gOWxgui/h+a7pOi/meenjeWunumZheayoeWPmOWMlueahCBvbkNoYW5nZQogICAgICAgICAqLwogICAgICAgIHRoaXMucHJvY2Vzc2luZyA9IGZhbHNlOwogICAgICAgIGlmICghdGhpcy5kaXJ0eSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHsgW3RoaXMua2V5XTogdmFsdWUgfSA9IGF3YWl0IGJyb3dzZXIuc3RvcmFnZVt0aGlzLmFyZWFdLmdldCh0aGlzLmtleSk7CiAgICAgICAgLyoKICAgICAgICAgKiBvbkNoYW5nZSDlnKggbGFzdCDnmoTmtYHnqIvlhoXvvIzkvJrlnKjnu5PmnZ/liY3pmLvmraLku7vkvZXlkI7nu63mk43kvZwKICAgICAgICAgKi8KICAgICAgICBhd2FpdCB0aGlzLm9uQ2hhbmdlKHZhbHVlKTsKICAgICAgfSk7CiAgICAgIHJldHVybiB0aGlzLmxhc3Q7CiAgICB9CiAgICBhc3luYyBvbkNoYW5nZSh2YWx1ZSkgewogICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7CiAgICAgIHRoaXMud2F0Y2hlci5mb3JFYWNoKHdhdGNoZXIgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICB3YXRjaGVyKHZhbHVlKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB1dGlsLmRlYnVnKCdFcnJvciB3aGlsZSBpbnZva2Ugc3Ryb2FnZSB3YXRjaGVyOiAlbycsIGUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICBhc3luYyBnZXQoKSB7CiAgICAgIGxldCByZXN1bHRzID0gYXdhaXQgdGhpcy5ydW4oKCkgPT4gKAogICAgICAgIGJyb3dzZXIuc3RvcmFnZVt0aGlzLmFyZWFdLmdldCh0aGlzLmtleSkKICAgICAgKSk7CiAgICAgIGlmICghdGhpcy5pbml0aWFsaXplZCAmJiB0aGlzLmFyZWEgPT09ICdsb2NhbCcgJiYgIU9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdHMsIHRoaXMua2V5KSkgewogICAgICAgIHJlc3VsdHMgPSBhd2FpdCB0aGlzLnJ1bihhc3luYyAoKSA9PiB7CiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgYnJvd3Nlci5zdG9yYWdlLnN5bmMuZ2V0KHRoaXMua2V5KTsKICAgICAgICAgIGF3YWl0IGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5zZXQoZGF0YSk7CiAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTsKICAgICAgcmV0dXJuIHJlc3VsdHNbdGhpcy5rZXldOwogICAgfQogICAgLyoqIEBwYXJhbSB7Kn0gdmFsdWUgKi8KICAgIGFzeW5jIHNldCh2YWx1ZSkgewogICAgICBjb25zdCB0b2tlbiA9IHRoaXMubGFzdFNldFRva2VuID0ge307CiAgICAgIGF3YWl0IHRoaXMucnVuKCgpID0+IHsKICAgICAgICBpZiAodG9rZW4gIT09IHRoaXMubGFzdFNldFRva2VuKSByZXR1cm4gbnVsbDsKICAgICAgICB0aGlzLmxhc3RTZXRUb2tlbiA9IG51bGw7CiAgICAgICAgcmV0dXJuIGJyb3dzZXIuc3RvcmFnZVt0aGlzLmFyZWFdLnNldCh7IFt0aGlzLmtleV06IHZhbHVlIH0pOwogICAgICB9KTsKICAgIH0KICAgIGFzeW5jIHJlbW92ZSgpIHsKICAgICAgYXdhaXQgdGhpcy5ydW4oKCkgPT4gKAogICAgICAgIGJyb3dzZXIuc3RvcmFnZVt0aGlzLmFyZWFdLnJlbW92ZSh0aGlzLmtleSkKICAgICAgKSk7CiAgICB9CiAgICAvKiogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgKi8KICAgIGFkZExpc3RlbmVyKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMud2F0Y2hlci5wdXNoKGNhbGxiYWNrKTsKICAgIH0KICB9CgogIHN0b3JhZ2UuU3RvcmFnZSA9IGZ1bmN0aW9uIChrZXksIGlzTG9jYWwgPSBmYWxzZSkgewogICAgcmV0dXJuIG5ldyBTdG9yYWdlSXRlbShrZXksIGlzTG9jYWwpOwogIH07CgogIGNsYXNzIENvbmZpZ0NvbGxlY3Rpb24gewogICAgLyoqCiAgICAgKiBAcGFyYW0ge1N0b3JhZ2VJdGVtfSBzdG9yYWdlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHN0b3JhZ2UpIHsKICAgICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTsKICAgICAgLyoqIEB0eXBlIHtNYXA8c3RyaW5nLCBTZXQ8RnVuY3Rpb24+Pn0gKi8KICAgICAgdGhpcy53YXRjaGVyID0gbmV3IE1hcCgpOwogICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7CiAgICB9CiAgICB0cmlnZ2VyT25DaGFuZ2VkKGtleSwgbmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMud2F0Y2hlci5nZXQoa2V5KTsKICAgICAgaWYgKCFjYWxsYmFja3MgfHwgIWNhbGxiYWNrcy5zaXplKSByZXR1cm47CiAgICAgIGNvbnN0IGNsb25lZE5ld1ZhbHVlID0gbmV3VmFsdWUgJiYgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShuZXdWYWx1ZSkpOwogICAgICBjb25zdCBjbG9uZWRPbGRWYWx1ZSA9IG9sZFZhbHVlICYmIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2xkVmFsdWUpKTsKICAgICAgY2FsbGJhY2tzLmZvckVhY2goY2FsbGJhY2sgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBjYWxsYmFjayhjbG9uZWROZXdWYWx1ZSwgY2xvbmVkT2xkVmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHV0aWwuZGVidWcoJ0Vycm9yIHdoaWxlIGNhbGwgY29uZmlnIG9uY2hhbmdlIGNhbGxiYWNrOiAlbywgJXMgWyVvLCAlb10nLCB0aGlzLnN0b3JhZ2UsIGtleSwgY2xvbmVkTmV3VmFsdWUsIGNsb25lZE9sZFZhbHVlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgYXN5bmMgaW5pdCgpIHsKICAgICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHJldHVybjsKICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7CiAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgdGhpcy52YWx1ZSA9IGF3YWl0IHRoaXMuc3RvcmFnZS5nZXQoKTsKICAgICAgICBpZiAodHlwZW9mIHRoaXMudmFsdWUgPT09ICdvYmplY3QnKSBicmVhazsKICAgICAgICBhd2FpdCB0aGlzLnN0b3JhZ2Uuc2V0KHt9KTsKICAgICAgfQogICAgICB0aGlzLnN0b3JhZ2UuYWRkTGlzdGVuZXIobmV3VmFsdWVzID0+IHsKICAgICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLnZhbHVlOwogICAgICAgIGNvbnN0IGtleXMgPSBuZXcgU2V0KE9iamVjdC5rZXlzKHZhbHVlcykuY29uY2F0KE9iamVjdC5rZXlzKG5ld1ZhbHVlcykpKTsKICAgICAgICBrZXlzLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gbmV3VmFsdWVzW2tleV07CiAgICAgICAgICBjb25zdCBzdHJOZXdWYWx1ZSA9IG5ld1ZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBKU09OLnN0cmluZ2lmeShuZXdWYWx1ZSk7CiAgICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHZhbHVlc1trZXldOwogICAgICAgICAgY29uc3Qgc3RyT2xkVmFsdWUgPSBvbGRWYWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogSlNPTi5zdHJpbmdpZnkob2xkVmFsdWUpOwogICAgICAgICAgaWYgKHN0ck5ld1ZhbHVlID09PSBzdHJPbGRWYWx1ZSkgcmV0dXJuOwogICAgICAgICAgdmFsdWVzW2tleV0gPSBzdHJOZXdWYWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogSlNPTi5wYXJzZShzdHJOZXdWYWx1ZSk7CiAgICAgICAgICB0aGlzLnRyaWdnZXJPbkNoYW5nZWQoa2V5LCBzdHJOZXdWYWx1ZSAmJiBKU09OLnBhcnNlKHN0ck5ld1ZhbHVlKSwgb2xkVmFsdWUpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICAgIC8qKiBAcGFyYW0ge3N0cmluZ30ga2V5ICovCiAgICBnZXQoa2V5KSB7CiAgICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkgdGhyb3cgRXJyb3IoJ0NvbmZpZyBzaG91bGQgaW5pdGlhbGl6ZWQgZmlyc3QnKTsKICAgICAgcmV0dXJuIHRoaXMudmFsdWVba2V5XSAmJiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMudmFsdWVba2V5XSkpOwogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5CiAgICAgKiBAcGFyYW0geyp9IHZhbHVlCiAgICAgKi8KICAgIHNldChrZXksIHZhbHVlKSB7CiAgICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkgdGhyb3cgRXJyb3IoJ0NvbmZpZyBzaG91bGQgaW5pdGlhbGl6ZWQgZmlyc3QnKTsKICAgICAgY29uc3QgdmFsdWVzID0gdGhpcy52YWx1ZTsKICAgICAgY29uc3Qgb2xkVmFsdWUgPSB2YWx1ZXNba2V5XTsKICAgICAgY29uc3Qgc3RyT2xkVmFsdWUgPSBvbGRWYWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogSlNPTi5zdHJpbmdpZnkob2xkVmFsdWUpOwogICAgICBjb25zdCBzdHJOZXdWYWx1ZSA9IHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7CiAgICAgIGlmIChzdHJOZXdWYWx1ZSAhPT0gc3RyT2xkVmFsdWUpIHsKICAgICAgICBpZiAoc3RyTmV3VmFsdWUpIHZhbHVlc1trZXldID0gSlNPTi5wYXJzZShzdHJOZXdWYWx1ZSk7CiAgICAgICAgZWxzZSBkZWxldGUgdmFsdWVzW2tleV07CiAgICAgICAgdGhpcy5zdG9yYWdlLnNldCh2YWx1ZXMpOwogICAgICAgIC8qCiAgICAgICAgICog5oiR5Lus5LiN5b+F562J5YC855yf55qE5YaZ5YWl5LqG77yM5bCx5Y+v5Lul6Kem5Y+RIG9uQ2hhbmdlCiAgICAgICAgICog6L+Z5qC35Lya5LyY5YyW5YmN56uv55qE5riy5p+T5pWI5p6cCiAgICAgICAgICog5Y+N5q2j5bCx566X55yf55qE5YaZ5oyC5LqG77yM5oiR5Lmf5rKh6L6Z77yI5pGK5omL77yJCiAgICAgICAgICovCiAgICAgICAgdGhpcy50cmlnZ2VyT25DaGFuZ2VkKGtleSwgdmFsdWUsIG9sZFZhbHVlKTsKICAgICAgfQogICAgICByZXR1cm4gc3RyTmV3VmFsdWUgJiYgSlNPTi5wYXJzZShzdHJOZXdWYWx1ZSk7CiAgICB9CiAgICAvKiogQHBhcmFtIHtzdHJpbmd9IGtleSAqLwogICAgcmVtb3ZlKGtleSkgewogICAgICByZXR1cm4gdGhpcy5zZXQoa2V5LCB2b2lkIDApOwogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5CiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICAgICovCiAgICBhZGRMaXN0ZW5lcihrZXksIGNhbGxiYWNrKSB7CiAgICAgIGNvbnN0IHdhdGNoZXIgPSB0aGlzLndhdGNoZXI7CiAgICAgIGlmICghd2F0Y2hlci5oYXMoa2V5KSkgd2F0Y2hlci5zZXQoa2V5LCBuZXcgU2V0KCkpOwogICAgICB3YXRjaGVyLmdldChrZXkpLmFkZChjYWxsYmFjayk7CiAgICAgIGNvbnN0IHJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICghd2F0Y2hlci5oYXMoa2V5KSkgcmV0dXJuIGZhbHNlOwogICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHdhdGNoZXIuZ2V0KGtleSk7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gY2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7CiAgICAgICAgaWYgKGNhbGxiYWNrcy5zaXplID09PSAwKSB3YXRjaGVyLmRlbGV0ZShrZXkpOwogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH07CiAgICAgIHJldHVybiB7IHJlbW92ZUxpc3RlbmVyIH07CiAgICB9CiAgICAvKiogQHBhcmFtIHtzdHJpbmd9IGtleSAqLwogICAga2V5KGtleSkgewogICAgICByZXR1cm4gbmV3IENvbmZpZ0tleSh0aGlzLCBrZXkpOwogICAgfQogICAgYXN5bmMgaW1wb3J0Q29uZmlnKGRhdGEpIHsKICAgICAgdGhpcy52YWx1ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwogICAgICBhd2FpdCB0aGlzLnN0b3JhZ2Uuc2V0KHRoaXMudmFsdWUpOwogICAgfQogICAgZXhwb3J0KCkgewogICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnZhbHVlKSk7CiAgICB9CiAgICBhc3luYyByZXNldCgpIHsKICAgICAgYXdhaXQgdGhpcy5zdG9yYWdlLnNldCh7fSk7CiAgICB9CiAgfQoKICBjbGFzcyBDb25maWdLZXkgewogICAgLyoqCiAgICAgKiBAcGFyYW0ge0NvbmZpZ0NvbGxlY3Rpb259IGNvbmZpZwogICAgICogQHBhcmFtIHtzdHJpbmd9IGtleQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIGtleSkgewogICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZzsKICAgICAgdGhpcy5rZXkgPSBrZXk7CiAgICB9CiAgICBnZXQoKSB7IHJldHVybiB0aGlzLmNvbmZpZy5nZXQodGhpcy5rZXkpOyB9CiAgICBzZXQodmFsdWUpIHsgcmV0dXJuIHRoaXMuY29uZmlnLnNldCh0aGlzLmtleSwgdmFsdWUpOyB9CiAgICByZW1vdmUoKSB7IHJldHVybiB0aGlzLmNvbmZpZy5yZW1vdmUodGhpcy5rZXkpOyB9CiAgICBhZGRMaXN0ZW5lcihjYWxsYmFjaykgewogICAgICByZXR1cm4gdGhpcy5jb25maWcuYWRkTGlzdGVuZXIodGhpcy5rZXksIGNhbGxiYWNrKTsKICAgIH0KICB9CgogIHN0b3JhZ2UuQ29uZmlnID0gZnVuY3Rpb24gKHN0b3JhZ2UpIHsKICAgIHJldHVybiBuZXcgQ29uZmlnQ29sbGVjdGlvbihzdG9yYWdlKTsKICB9OwoKfSgpKTsKCi8vIOWwhuaVsOaNruS7jiBzeW5jIOenu+WKqOWIsCBsb2NhbAo7IChhc3luYyBmdW5jdGlvbiAoKSB7CiAgY29uc3QgYnJvd3NlciA9IHdpbmRvdy53ZUJyb3dzZXI7CiAgY29uc3QgW3N5bmNTdG9yYWdlLCBsb2NhbFN0b3JhZ2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoWwogICAgYnJvd3Nlci5zdG9yYWdlLnN5bmMuZ2V0KCksCiAgICBicm93c2VyLnN0b3JhZ2UubG9jYWwuZ2V0KCksCiAgXSk7CiAgY29uc3QgW3N5bmNLZXlzLCBsb2NhbEtleXNdID0gW3N5bmNTdG9yYWdlLCBsb2NhbFN0b3JhZ2VdLm1hcChzdG9yYWdlID0+IE9iamVjdC5rZXlzKHN0b3JhZ2UgfHwge30pKTsKICBjb25zdCBzeW5jT25seUtleXMgPSBzeW5jS2V5cy5maWx0ZXIoa2V5ID0+ICFsb2NhbEtleXMuaW5jbHVkZXMoa2V5KSk7CiAgY29uc3QgdXBkYXRlT2JqZWN0ID0gT2JqZWN0LmFzc2lnbih7fSwgLi4uc3luY09ubHlLZXlzLm1hcChrZXkgPT4gKHsgW2tleV06IHN5bmNTdG9yYWdlW2tleV0gfSkpKTsKICBhd2FpdCBicm93c2VyLnN0b3JhZ2UubG9jYWwuc2V0KHVwZGF0ZU9iamVjdCk7Cn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvc3RvcmFnZS9jb25maWcuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2YgPSB3aW5kb3cueWF3ZiB8fCB7fTsKCiAgY29uc3Qgc3RvcmFnZSA9IHlhd2Yuc3RvcmFnZTsKICBjb25zdCBjb25maWcgPSB5YXdmLmNvbmZpZyA9IHlhd2YuY29uZmlnIHx8IHt9OwogIGNvbnN0IHBvb2xzID0gY29uZmlnLnBvb2xzID0gW107CgogIGNvbmZpZy5pbml0ID0gYXN5bmMgZnVuY3Rpb24gKHVpZCkgewogICAgY29uc3QgdXNlclByb21pc2UgPSB1aWQgIT0gbnVsbCA/IGNvbmZpZy5wb29sKCdDb25maWcnLCB7IHVpZCwgaXNMb2NhbDogdHJ1ZSB9KSA6IFByb21pc2UucmVzb2x2ZShudWxsKTsKICAgIGNvbnN0IGdsb2JhbFByb21pc2UgPSBjb25maWcucG9vbCgnQ29uZmlnJywgeyBpc0xvY2FsOiB0cnVlIH0pOwogICAgY29uc3QgW3VzZXIsIGdsb2JhbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbdXNlclByb21pc2UsIGdsb2JhbFByb21pc2VdKTsKICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7IHVzZXIsIGdsb2JhbCB9KTsKICB9OwoKICBjb25maWcucG9vbCA9IGFzeW5jIGZ1bmN0aW9uIChwb29sTmFtZSwgY29uZmlnID0ge30pIHsKICAgIGNvbnN0IHsgdWlkID0gbnVsbCwgaXNMb2NhbCA9IGZhbHNlIH0gPSBjb25maWc7CiAgICBjb25zdCBwcmVmaXggPSB1aWQgPyBgdXNlciR7dWlkfWAgOiAnZ2xvYmFsJzsKICAgIGNvbnN0IG5hbWUgPSBwcmVmaXggKyBwb29sTmFtZTsKICAgIGNvbnN0IHN0b3JhZ2VJdGVtID0gc3RvcmFnZS5TdG9yYWdlKG5hbWUsIGlzTG9jYWwpOwogICAgY29uc3QgcG9vbCA9IHN0b3JhZ2UuQ29uZmlnKHN0b3JhZ2VJdGVtKTsKICAgIE9iamVjdC5hc3NpZ24ocG9vbCwgY29uZmlnKTsKICAgIGF3YWl0IHBvb2wuaW5pdCgpOwogICAgcG9vbHMucHVzaChwb29sKTsKICAgIHJldHVybiBwb29sOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3Nob3J0dXJsL3JlZGlyZWN0LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgLy8g6ISa5pys54mI6ZyA6KaB6L+Z6KGM77yM5omA5Lul6L+Z6YeM5aeR5LiU5Yqg5LiKCiAgaWYgKGxvY2F0aW9uLmhvc3QgIT09ICd0LmNuJykgcmV0dXJuOwoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgY29uZmlnID0geWF3Zi5jb25maWc7CgogIC8qKiBAdHlwZSB7UHJvbWlzZX0gKi8KICBjb25zdCBjb25maWdQcm9taXNlID0gY29uZmlnLmluaXQoKTsKCiAgY29uc3QgaGlkZUFsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgaGlkZUFsbC50ZXh0Q29udGVudCA9IGAKYm9keSB7IGRpc3BsYXk6IG5vbmU7IH0KaHRtbCB7IGJhY2tncm91bmQ6ICNmOWY5ZmE7IH0KQG1lZGlhIChwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaykgeyBodG1sIHsgYmFja2dyb3VuZDogIzJhMmEyZTsgfSB9CmA7CiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGhpZGVBbGwpOwoKICBjb25zdCBmaXhVcmwgPSBmdW5jdGlvbiAodXJsKSB7CiAgICAvLyDmmL7npLrnmoTlrZfnrKbnvJbnoIHmmK/plJnnmoQKICAgIC8vIOWOn+acrCBVVEYtOCDnvJbnoIHnmoTnvZHlnYDnlKggTGF0aW4tMSDlsZXnpLrnmoQKICAgIGxldCBmaXhFbmNvZGluZ1VybCA9IHVybDsKICAgIHRyeSB7CiAgICAgIGNvbnN0IGNvZGVQb2ludHMgPSBbLi4udXJsXS5tYXAoeCA9PiB4LmNoYXJDb2RlQXQoKSk7CiAgICAgIGlmIChjb2RlUG9pbnRzLmV2ZXJ5KGNvZGUgPT4gY29kZSA8IDI1NikpIHsKICAgICAgICBmaXhFbmNvZGluZ1VybCA9IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShuZXcgVWludDhBcnJheShjb2RlUG9pbnRzKSk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgZml4RW5jb2RpbmdVcmwgPSB1cmw7CiAgICB9CiAgICBpZiAoIS9odHRwcz86XC9cLy4qL2kudGVzdChmaXhFbmNvZGluZ1VybCkpIHJldHVybiBudWxsOwogICAgcmV0dXJuIGZpeEVuY29kaW5nVXJsOwogIH07CgogIGNvbnN0IG9uTG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgIGNvbmZpZ1Byb21pc2UudGhlbigoKSA9PiB7CiAgICAgIGNvbnN0IHVzZVJlZGlyZWN0ID0gY29uZmlnLmdsb2JhbC5rZXkoJ3Nob3J0X3VybF93b19jb25maXJtJykuZ2V0KCk7CiAgICAgIGlmICghdXNlUmVkaXJlY3QpIHJldHVybiBmYWxzZTsKICAgICAgbGV0IHVybCA9IFsKICAgICAgICAoKSA9PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3Blbi11cmwgYScpLmhyZWYsCiAgICAgICAgKCkgPT4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpbmsnKS50ZXh0Q29udGVudC50cmltKCksCiAgICAgICAgKCkgPT4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVybF92aWV3X2NvZGUnKS50ZXh0Q29udGVudC50cmltKCksCiAgICAgIF0ucmVkdWNlKCh1cmwsIGdldHRlcikgPT4gewogICAgICAgIGlmICh1cmwpIHJldHVybiB1cmw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBmaXhVcmwoZ2V0dGVyKCkpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsgcmV0dXJuIG51bGw7IH0KICAgICAgfSwgbnVsbCk7CiAgICAgIGlmICghdXJsKSByZXR1cm4gZmFsc2U7CiAgICAgIGxvY2F0aW9uLnJlcGxhY2UodXJsKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9KS50aGVuKHIgPT4gciwgKCkgPT4gZmFsc2UpLnRoZW4ocmVkaXJlY3QgPT4gewogICAgICBpZiAoIXJlZGlyZWN0KSBoaWRlQWxsLnJlbW92ZSgpOwogICAgfSk7CiAgfTsKCiAgaWYgKFsnY29tcGxldGUnLCAnbG9hZGVkJywgJ2ludGVyYWN0aXZlJ10uaW5jbHVkZXMoZG9jdW1lbnQucmVhZHlTdGF0ZSkpIHsKICAgIHNldFRpbWVvdXQob25Mb2FkLCAwKTsKICB9IGVsc2UgewogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIG9uTG9hZCk7CiAgfQoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBjdXN0b20gaW1wbGVtZW50YXRpb24gcmVkaXJlY3QKOyAoZnVuY3Rpb24gKCkgewogIGlmIChsb2NhdGlvbi5ob3N0ICE9PSAndC5jbicpIHJldHVybjsKICB0aHJvdyBuZXcgRXJyb3IoJ1lBV0YgfCB0LmNuIHBhZ2UgZm91bmQsIHNraXAgZm9sbG93aW5nIGV4ZWN1dGlvbnMnKTsKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9pbml0L3BhZ2UuanMKLyoKICog5qOA5p+l5b2T5YmN6aG16Z2i55qE57G75Z6LCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0ID0geWF3Zi5pbml0IHx8IHt9OwoKICBjb25zdCBwYWdlID0gaW5pdC5wYWdlID0gaW5pdC5wYWdlIHx8IHt9OwoKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eQogIHBhZ2UudHlwZVY2ID0gZnVuY3Rpb24gKCkgewogICAgY29uc3Qgc2VhcmNoID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhdGlvbi5zZWFyY2gpOwogICAgLy8g5a+86KeI6aG16Z2iCiAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUuc3RhcnRzV2l0aCgnL25ndWlkZScpKSByZXR1cm4gJ25ndWlkZSc7CiAgICAvLyDmkJzntKLpobXpnaIKICAgIGlmIChsb2NhdGlvbi5ob3N0ID09PSAncy53ZWliby5jb20nKSByZXR1cm4gJ3NlYXJjaCc7CiAgICAvLyDlj5HnjrDpobXpnaIKICAgIGlmIChsb2NhdGlvbi5ob3N0ID09PSAnZC53ZWliby5jb20nKSByZXR1cm4gJ2Rpc2NvdmVyJzsKICAgIC8vIOWktOadoeaWh+eroAogICAgaWYgKC9cL3R0YXJ0aWNsZVwvLy50ZXN0KGxvY2F0aW9uLnBhdGhuYW1lKSkgcmV0dXJuICd0dGFydGljbGUnOwogICAgY29uc3QgJENPTkZJRyA9IHBhZ2UuJENPTkZJRzsgaWYgKCEkQ09ORklHKSByZXR1cm4gbnVsbDsKICAgIGlmICgkQ09ORklHLmJwVHlwZSA9PT0gJ3BhZ2UnKSB7CiAgICAgIC8vIOWcsOeCuQogICAgICBpZiAoJENPTkZJRy5kb21haW4gPT09ICcxMDAxMDEnKSByZXR1cm4gJ3BsYWNlJzsKICAgICAgLy8g55S15b2xCiAgICAgIGlmICgkQ09ORklHLmRvbWFpbiA9PT0gJzEwMDEyMCcpIHJldHVybiAnbW92aWUnOwogICAgICAvLyDlm77kuaYKICAgICAgaWYgKCRDT05GSUcuZG9tYWluID09PSAnMTAwMjAyJykgcmV0dXJuICdib29rJzsKICAgICAgLy8g5Liq5Lq65Li76aG1CiAgICAgIGlmICgkQ09ORklHLmRvbWFpbiA9PT0gJzEwMDUwNScpIHJldHVybiAncHJvZmlsZSc7CiAgICAgIC8vIOS4quS6uuS4u+mhte+8iOS8geS4muiupOivgeeUqOaIt++8iQogICAgICBpZiAoJENPTkZJRy5kb21haW4gPT09ICcxMDA2MDYnKSByZXR1cm4gJ3Byb2ZpbGUnOwogICAgICAvLyDor53popjpobXvvIjotoXor53vvIkKICAgICAgaWYgKCRDT05GSUcuZG9tYWluID09PSAnMTAwODA4JykgcmV0dXJuICd0b3BpYyc7CiAgICAgIC8vIOmfs+S5kAogICAgICBpZiAoJENPTkZJRy5kb21haW4gPT09ICcxMDE1MTUnKSByZXR1cm4gJ211c2ljJzsKICAgICAgLy8g6IKh56WoCiAgICAgIGlmICgkQ09ORklHLmRvbWFpbiA9PT0gJzIzMDY3NycpIHJldHVybiAnc3RvY2snOwogICAgfQogICAgaWYgKCRDT05GSUcuYnBUeXBlID09PSAnbWFpbicpIHsKICAgICAgLy8g6LWeCiAgICAgIGlmIChsb2NhdGlvbi5wYXRobmFtZS5zdGFydHNXaXRoKCcvbGlrZS9vdXRib3gnKSkgcmV0dXJuICdsaWtlJzsKICAgICAgLy8g5pS26JePCiAgICAgIGlmIChsb2NhdGlvbi5wYXRobmFtZS5zdGFydHNXaXRoKCcvZmF2JykpIHJldHVybiAnZmF2JzsKICAgICAgLy8g6aaW6aG1CiAgICAgIGlmICgvXC9ob21lJC8udGVzdChsb2NhdGlvbi5wYXRobmFtZSkpIHsKICAgICAgICBpZiAoc2VhcmNoLmdldCgnZ2lkJykgPiAwKSByZXR1cm4gJ2dyb3VwJzsKICAgICAgICByZXR1cm4gJ2hvbWUnOwogICAgICB9CiAgICAgIC8vIOWlveWPi+WciAogICAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUuc3RhcnRzV2l0aCgnL2ZyaWVuZHMnKSkgcmV0dXJuICdmcmllbmRzJzsKICAgIH0KICAgIC8vIFVua25vd24KICAgIHJldHVybiBudWxsOwogIH07CgogIHBhZ2Uucm91dGUgPSBudWxsOwogIHBhZ2UudXBkYXRlID0gZnVuY3Rpb24gKHJvdXRlKSB7CiAgICBwYWdlLnJvdXRlID0gcm91dGU7CiAgfTsKICBwYWdlLnR5cGVWNyA9IGZ1bmN0aW9uICgpIHsKICAgIGlmIChsb2NhdGlvbi5wYXRobmFtZS5zdGFydHNXaXRoKCcvdHYvJykpIHJldHVybiAndHYnOwogICAgY29uc3Qgcm91dGUgPSBwYWdlLnJvdXRlOwogICAgaWYgKHJvdXRlLm5hbWUgPT09ICdwcm9maWxlJykgcmV0dXJuICdwcm9maWxlJzsKICAgIGlmIChyb3V0ZS5uYW1lID09PSAnbGlrZScpIHJldHVybiAnbGlrZSc7CiAgICBpZiAocm91dGUubmFtZSA9PT0gJ2NvbGxlY3QnKSByZXR1cm4gJ2Zhdic7CiAgICBpZiAocm91dGUubmFtZSA9PT0gJ215Z3JvdXBzJykgewogICAgICAvLyDmnIDmlrDlvq7ljZoKICAgICAgaWYgKC9eMTEwMDAvLnRlc3Qocm91dGUucXVlcnkuZ2lkKSkgcmV0dXJuICdob21lJzsKICAgICAgLy8g5YiG57uECiAgICAgIHJldHVybiAnZ3JvdXAnOwogICAgfQogICAgaWYgKHJvdXRlLm5hbWUgPT09ICd3ZWlibycpIHsKICAgICAgY29uc3QgY2hhbm5lbCA9IHJvdXRlLm1ldGEgJiYgcm91dGUubWV0YS5jaGFubmVsOwogICAgICAvLyDng63pl6gKICAgICAgaWYgKGNoYW5uZWwgPT09ICdob3QnKSByZXR1cm4gJ2Rpc2NvdmVyJzsKICAgICAgLy8g6aaW6aG1CiAgICAgIGlmIChjaGFubmVsID09PSAnaG9tZScpIHJldHVybiAnaG9tZSc7CiAgICB9CiAgICBpZiAocm91dGUuY2hhbm5lbCA9PT0gJ3N3ZWlib0RlZmF1bHQnKSByZXR1cm4gJ3NlYXJjaCc7CiAgICBpZiAocm91dGUuY2hhbm5lbCA9PT0gJ3N3ZWlibycpIHJldHVybiAnc2VhcmNoJzsKICAgIGlmIChyb3V0ZS5jaGFubmVsID09PSAnc3VzZXJEZWZhdWx0JykgcmV0dXJuICdzZWFyY2gnOwogICAgcmV0dXJuIG51bGw7CiAgfTsKICBwYWdlLm9pZCA9IGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IHJvdXRlID0gcGFnZS5yb3V0ZTsKICAgIHJldHVybiByb3V0ZS5uYW1lID09PSAncHJvZmlsZScgPyByb3V0ZS5wYXJhbXMuaWQgOiBudWxsOwogIH07CiAgcGFnZS51aWQgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcGFnZS5jb25maWcudXNlci5pZHN0cjsKICB9OwoKICBwYWdlLnR5cGUgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgIHJldHVybiBwYWdlLnR5cGVWNigpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHBhZ2UudHlwZVY3KCk7CiAgICB9CiAgfTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvaW5pdC9pbml0LmpzCi8qCiAqIOWIneWni+WMluebuOWFs+a1geeoiwogKgogKiDliJ3lp4vljJbmtYHnqIsKICogUmVhZHk6CiAqICAg5b2T6I635Y+W5YiwICRDT05GSUcg5Y+C5pWw5pe25bC95b+r6LCD55SoCiAqIExvYWQ6CiAqICAg5b2TIERPTUNvbnRlbnRMb2FkZWQg5pe26LCD55So77yM5q2k5pe2IERPTSDmoJHlj6/nlKgKICogICBMb2FkIOaAu+aYr+WcqCBSZWFkeSDkuYvlkI4KICogRGVpbml0OgogKiAgIOW9k+WHuumUmeaXtuiwg+eUqO+8jOatpOaXtuW6lOW9k+a2iOmZpOS5i+WJjeihjOS4uueahOWQhOenjeWJr+S9nOeUqAogKiAgIERlaW5pdCDlj6/og73kuI3op6blj5EgUmVhZHnvvIzkuZ/lj6/og73lnKggUmVhZHkg5LmL5ZCOCiAqICAgRGVpbml0IOS4jiBMb2FkIOS6kuaWpQogKgogKiDlpoLmnpzms6jlhoznmoTlm57osIPov5Tlm57kuIDkuKogdGhlbmFibGUg5a+56LGh77yM6YKj5LmI5Lya562J5a6D6Kej5Yaz5YaN57un57ut5ZCO57ut55qE5Zue6LCDCiAqIOWmguaenOS4jeW4jOacm+iuqeWQjumdoueahOmAu+i+keW8guatpei/m+ihjO+8jOivt+S4jeimgeebtOaOpeeUqCBhc3luYyDlh73mlbDvvIzogIzmmK/lnKjmma7pgJrlh73mlbDph4zlho3lhpnkuIDkuKogYXN5bmMKICovCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdCA9IHlhd2YuaW5pdCB8fCB7fTsKICB5YXdmLldFSUJPX1ZFUlNJT04gPSAwOwoKICBjb25zdCBwYWdlID0gaW5pdC5wYWdlID0gaW5pdC5wYWdlIHx8IHt9OwoKICBjb25zdCB2YWxpZFBhZ2VSZWFkeVY2ID0gJENPTkZJRyA9PiB7CiAgICAvLyDlv4XpobvnmoTlj4LmlbAKICAgIGlmICghJENPTkZJRykgcmV0dXJuIGZhbHNlOwogICAgaWYgKCEkQ09ORklHLnVpZCkgcmV0dXJuIGZhbHNlOwogICAgaWYgKCEkQ09ORklHLm5pY2spIHJldHVybiBmYWxzZTsKICAgIGlmICgkQ09ORklHLmlzbG9naW4gPT09ICcwJykgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgY29uc3QgdmFsaWRQYWdlUmVhZHlWNyA9IGNvbmZpZyA9PiB7CiAgICAvLyDlv4XpobvnmoTlj4LmlbAKICAgIGlmICghY29uZmlnKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoIWNvbmZpZy51c2VyKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoIWNvbmZpZy51c2VyLmlkc3RyKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoIWNvbmZpZy51c2VyLnNjcmVlbl9uYW1lKSByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKICBjb25zdCB2YWxpZFBhZ2VEb20gPSAoKSA9PiB7CiAgICAvLyDlpoLmnpzmnInnmbvlvZXmjInpkq7vvIzliJnor7TmmI7msqHmnInnmbvlvZXvvIzmraTml7bkuI3lt6XkvZwKICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ25fbG9naW4nKSkgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgLyoqIEB0eXBlIHtib29sZWFuP30gKi8KICBsZXQgc3RhdHVzID0gbnVsbDsKICAvKiogQHR5cGUge1NldDx7IGNhbGxiYWNrOiBGdW5jdGlvbiwgcHJpb3JpdHk6IG51bWJlciB9Pn0gKi8KICBjb25zdCBvblJlYWR5Q2FsbGJhY2sgPSBuZXcgU2V0KCk7CiAgLyoqIEB0eXBlIHtTZXQ8eyBjYWxsYmFjazogRnVuY3Rpb24sIHByaW9yaXR5OiBudW1iZXIgfT59ICovCiAgY29uc3Qgb25Mb2FkQ2FsbGJhY2sgPSBuZXcgU2V0KCk7CiAgLyoqIEB0eXBlIHtTZXQ8eyBjYWxsYmFjazogRnVuY3Rpb24sIHByaW9yaXR5OiBudW1iZXIgfT59ICovCiAgY29uc3Qgb25Db25maWdDaGFuZ2VDYWxsYmFjayA9IG5ldyBTZXQoKTsKICAvKiogQHR5cGUge1NldDx7IGNhbGxiYWNrOiBGdW5jdGlvbiwgcHJpb3JpdHk6IG51bWJlciB9Pn0gKi8KICBjb25zdCBvbkRlaW5pdENhbGxiYWNrID0gbmV3IFNldCgpOwoKICBjb25zdCBub29wID0gKCkgPT4geyB9OwoKICAvKioKICAgKiBAcGFyYW0ge1NldDx7IGNhbGxiYWNrOiBGdW5jdGlvbiwgcHJpb3JpdHk6IG51bWJlciB9Pn0gc2V0CiAgICovCiAgY29uc3QgcnVuU2V0ID0gYXN5bmMgc2V0ID0+IHsKICAgIGNvbnN0IGxpc3QgPSBbLi4uc2V0LnZhbHVlcygpXS5zb3J0KChwLCBxKSA9PiBxLnByaW9yaXR5IC0gcC5wcmlvcml0eSk7CiAgICBmb3IgKGNvbnN0IHsgY2FsbGJhY2sgfSBvZiBsaXN0KSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gY2FsbGJhY2soKTsKICAgICAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdXRpbC5kZWJ1ZygnRXJyb3Igd2hpbGUgaW5pdGlhbGl6aW5nOlxuJW8nLCBlKTsKICAgICAgfQogICAgfQogICAgc2V0LmNsZWFyKCk7CiAgfTsKCiAgY29uc3QgZ2VuVjZMaWtlQ29uZmlnQnlWN0NvbmZpZyA9IGNvbmZpZyA9PiAoewogICAgdWlkOiBjb25maWcudXNlci5pZHN0ciwKICAgIG5hbWU6IGNvbmZpZy51c2VyLnNjcmVlbl9uYW1lLAogICAgb2lkOiBudWxsLCAvLyDml6DmlbDmja4KICAgIGRvbWFpbjogJycsIC8vIOaXoOaVsOaNrgogICAgYnBUeXBlOiAnJywgLy8g5peg5pWw5o2uCiAgICBsb2NhdGlvbjogJycsIC8vIOaXoOaVsOaNrgogICAgbGFuZzogJ3poLUNOJywKICAgIHNraW46IG51bGwsIC8vIOaXoOaVsOaNrgogIH0pOwoKICBpbml0LnN0YXR1cyA9ICgpID0+IHN0YXR1czsKICAvLyDop6blj5EgUmVhZHkKICBpbml0LnJlYWR5ID0gYXN5bmMgJENPTkZJRyA9PiB7CiAgICBzdGF0dXMgPSB0cnVlOwogICAgaW5pdC5yZWFkeSA9IGluaXQuZGVpbml0ID0gbm9vcDsKICAgIHV0aWwuZGVidWcoJ3lhd2Ygb25yZWFkeScpOwogICAgYXdhaXQgcnVuU2V0KG9uUmVhZHlDYWxsYmFjayk7CiAgICBpZiAoWydjb21wbGV0ZScsICdsb2FkZWQnLCAnaW50ZXJhY3RpdmUnXS5pbmNsdWRlcyhkb2N1bWVudC5yZWFkeVN0YXRlKSkgewogICAgICBzZXRUaW1lb3V0KGluaXQuZGNsLCAwKTsKICAgIH0gZWxzZSB7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0LmRjbCk7CiAgICB9CiAgfTsKICAvLyDop6blj5EgQ29uZmlnQ2hhbmdlCiAgaW5pdC5jb25maWdDaGFuZ2UgPSBhc3luYyBjb25maWcgPT4gewogICAgdXRpbC5kZWJ1ZygneWF3ZiBvbmNvbmZpZ2NoYW5nZTogJW8nLCBjb25maWcpOwogICAgaWYgKHZhbGlkUGFnZVJlYWR5VjYoY29uZmlnKSkgewogICAgICBpZiAoIXlhd2YuV0VJQk9fVkVSU0lPTikgewogICAgICAgIHlhd2YuV0VJQk9fVkVSU0lPTiA9IDY7CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3lhd2YtV0JWNicpOwogICAgICB9CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gIT09IDYpIHJldHVybjsKICAgICAgcGFnZS4kQ09ORklHID0gY29uZmlnOwogICAgICBhd2FpdCBydW5TZXQob25Db25maWdDaGFuZ2VDYWxsYmFjayk7CiAgICAgIGF3YWl0IGluaXQucmVhZHkoY29uZmlnKTsKICAgIH0gZWxzZSBpZiAodmFsaWRQYWdlUmVhZHlWNyhjb25maWcpKSB7CiAgICAgIGlmICgheWF3Zi5XRUlCT19WRVJTSU9OKSB7CiAgICAgICAgeWF3Zi5XRUlCT19WRVJTSU9OID0gNzsKICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgneWF3Zi1XQlY3Jyk7CiAgICAgIH0KICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiAhPT0gNykgcmV0dXJuOwogICAgICBpZiAoIXBhZ2Uucm91dGUpIHJldHVybjsKICAgICAgcGFnZS5jb25maWcgPSBjb25maWc7CiAgICAgIHBhZ2UuJENPTkZJRyA9IGdlblY2TGlrZUNvbmZpZ0J5VjdDb25maWcoY29uZmlnKTsKICAgICAgYXdhaXQgcnVuU2V0KG9uQ29uZmlnQ2hhbmdlQ2FsbGJhY2spOwogICAgICBhd2FpdCBpbml0LnJlYWR5KGNvbmZpZyk7CiAgICB9IGVsc2UgewogICAgICBhd2FpdCBpbml0LmRlaW5pdCgpOwogICAgICByZXR1cm47CiAgICB9CiAgfTsKICAvLyDop6blj5EgRGVpbml0CiAgaW5pdC5kZWluaXQgPSBhc3luYyAoKSA9PiB7CiAgICBzdGF0dXMgPSBmYWxzZTsKICAgIGluaXQuZGVpbml0ID0gaW5pdC5yZWFkeSA9IGluaXQuZGNsID0gbm9vcDsKICAgIHV0aWwuZGVidWcoJ3lhd2YgZGVpbml0Jyk7CiAgICBhd2FpdCBydW5TZXQob25EZWluaXRDYWxsYmFjayk7CiAgfTsKICAvLyDop6blj5EgTG9hZAogIGluaXQuZGNsID0gYXN5bmMgKCkgPT4gewogICAgaWYgKCF2YWxpZFBhZ2VEb20oKSkgewogICAgICBhd2FpdCBpbml0LmRlaW5pdCgpOwogICAgICByZXR1cm47CiAgICB9CiAgICBzdGF0dXMgPSB7fTsKICAgIGluaXQuZGNsID0gbm9vcDsKICAgIHV0aWwuZGVidWcoJ3lhd2Ygb25sb2FkJyk7CiAgICBhd2FpdCBydW5TZXQob25Mb2FkQ2FsbGJhY2spOwogIH07CgogIGNvbnN0IHJlZ2lzdGVyID0gY2FsbGJhY2tDb2xsZWN0aW9uID0+ICgKICAgIChjYWxsYmFjaywgeyBwcmlvcml0eSA9IHV0aWwucHJpb3JpdHkuREVGQVVMVCB9ID0ge30pID0+IHsKICAgICAgaWYgKHN0YXR1cyA9PT0gbnVsbCkgewogICAgICAgIGNhbGxiYWNrQ29sbGVjdGlvbi5hZGQoeyBjYWxsYmFjaywgcHJpb3JpdHkgfSk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzKSB7CiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihjYWxsYmFjayk7CiAgICAgIH0KICAgIH0KICApOwoKICBpbml0Lm9uUmVhZHkgPSByZWdpc3RlcihvblJlYWR5Q2FsbGJhY2spOwogIGluaXQub25Mb2FkID0gcmVnaXN0ZXIob25Mb2FkQ2FsbGJhY2spOwogIGluaXQub25Db25maWdDaGFuZ2UgPSByZWdpc3RlcihvbkNvbmZpZ0NoYW5nZUNhbGxiYWNrKTsKICBpbml0Lm9uRGVpbml0ID0gcmVnaXN0ZXIob25EZWluaXRDYWxsYmFjayk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L2luaXQvc2V0dXAuanMKLyoqCiAqIOi/meS4quaWh+S7tueUqOS6juS7jue9kemhteS4reiOt+WPliAkQ09ORklHIOWPguaVsAogKiDnvZHpobXkuK3nmoQgJENPTkZJRyDlj4LmlbDljIXlkKvohJrmnKzpnIDopoHnmoTkuIrkuIvmloflj4LmlbDvvIzlpoIKICog5b2T5YmN55So5oi3IGlk44CB5pi156ew77yM5b2T5YmN6aG16Z2i55So5oi3IGlk77yM5b2T5YmN5Li76aKY562J562JCiAqIOaIkeS7rOmcgOimgeW9k+WJjeeUqOaItyBpZCDmiY3og73or7vlj5bnlKjmiLfnmoTorr7nva7ku47ogIznu6fnu63lkI7pnaLnmoTlt6XkvZwKICovCgo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CgogIGNvbnN0IHN0cmluZ3MgPSB1dGlsLnN0cmluZ3M7CgogIGNvbnN0IHJhbmRTdHIgPSBzdHJpbmdzLnJhbmRLZXkoKTsKICBjb25zdCBrZXkgPSBgeWF3Zl8ke3JhbmRTdHJ9YDsKICB1dGlsLmluamVjdChmdW5jdGlvbiAoa2V5KSB7CiAgICBsZXQgbGFzdFJlcG9ydCA9IG51bGw7CiAgICBjb25zdCByZXBvcnRSZXN1bHQgPSBhc3luYyB2YWx1ZSA9PiB7CiAgICAgIGxhc3RSZXBvcnQgPSBsYXN0UmVwb3J0ID8gbGFzdFJlcG9ydC50aGVuKFByb21pc2UucmVzb2x2ZSgpKSA6IFByb21pc2UucmVzb2x2ZSgpOwogICAgICBhd2FpdCBsYXN0UmVwb3J0OwogICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChrZXksIHsKICAgICAgICBkZXRhaWw6IHsgJENPTkZJRzogSlNPTi5zdHJpbmdpZnkodmFsdWUpIH0sCiAgICAgIH0pOwogICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICB9OwogICAgbGV0IGhvbGRlciA9IG51bGw7CiAgICBpZiAoJyRDT05GSUcnIGluIHdpbmRvdykgewogICAgICAvLyBGYWlsZWQgdG8gbG9hZCBZQVdGIGJlZm9yZSAkQ09ORklHIG9iamVjdCByZWFkeS4gU29tZSBmZWF0dXJlIG1heSBub3Qgd29yay4KICAgICAgY29uc3Qgb25Eb21Db250ZW50TG9hZGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgIHdpbmRvdy4kQ09ORklHID0gbmV3IFByb3h5KHdpbmRvdy4kQ09ORklHLCB7CiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChzZWxmLCBwcm9wZXJ0eSwgdmFsdWUpIHsKICAgICAgICAgICAgc2VsZltwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgICAgcmVwb3J0UmVzdWx0KHdpbmRvdy4kQ09ORklHKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICAgIHJlcG9ydFJlc3VsdCh3aW5kb3cuJENPTkZJRyk7CiAgICAgIH07CiAgICAgIGlmIChbJ2NvbXBsZXRlJywgJ2xvYWRlZCcsICdpbnRlcmFjdGl2ZSddLmluY2x1ZGVzKGRvY3VtZW50LnJlYWR5U3RhdGUpKSB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IG9uRG9tQ29udGVudExvYWRlZCgpOyB9LCAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgb25Eb21Db250ZW50TG9hZGVkKTsKICAgICAgfQogICAgICByZXR1cm47CiAgICB9CiAgICBsZXQgcHJveGllZCA9IHZvaWQgMDsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICckQ09ORklHJywgewogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICBnZXQoKSB7IHJldHVybiBwcm94aWVkOyB9LAogICAgICBzZXQodmFsdWUpIHsKICAgICAgICBsZXQgJENPTkZJRzsKICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LCAnJENPTkZJRycpOwogICAgICAgIHByb3BlcnR5LmVudW1lcmFibGUgPSB0cnVlOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICckQ09ORklHJywgcHJvcGVydHkpOwogICAgICAgIGlmIChob2xkZXIpIHsKICAgICAgICAgIGhvbGRlci4kQ09ORklHID0gdmFsdWU7CiAgICAgICAgICAkQ09ORklHID0gaG9sZGVyLiRDT05GSUc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICRDT05GSUcgPSB2YWx1ZTsKICAgICAgICB9CiAgICAgICAgcHJveGllZCA9IG5ldyBQcm94eSgkQ09ORklHLCB7CiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChzZWxmLCBwcm9wZXJ0eSwgdmFsdWUpIHsKICAgICAgICAgICAgc2VsZltwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgICAgcmVwb3J0UmVzdWx0KCRDT05GSUcpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgICAgcmVwb3J0UmVzdWx0KHZhbHVlKTsKICAgICAgfSwKICAgIH0pOwogICAgY29uc3Qgb25sb2FkID0gKCkgPT4gewogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9ubG9hZCk7CiAgICAgIHJlcG9ydFJlc3VsdCgpOwogICAgfTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgb25sb2FkKTsKICB9LCBrZXkpOwoKICBsZXQgbGFzdENvbmZpZyA9IHZvaWQgMDsKICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihrZXksIGZ1bmN0aW9uIChldmVudCkgewogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBpZiAoIWV2ZW50LmRldGFpbC4kQ09ORklHKSByZXR1cm47CiAgICBjb25zdCAkQ09ORklHID0gSlNPTi5wYXJzZShldmVudC5kZXRhaWwuJENPTkZJRyk7CiAgICBpZiAoZXZlbnQuZGV0YWlsLiRDT05GSUcgPT09IGxhc3RDb25maWcpIHJldHVybjsKICAgIGxhc3RDb25maWcgPSBldmVudC5kZXRhaWwuJENPTkZJRzsKICAgIGluaXQuY29uZmlnQ2hhbmdlKCRDT05GSUcpOwogIH0sIHRydWUpOwoKfSgpKTsKCi8vIFRPRE8hCi8vIE5FRUQgQ0xFQU4gVVAKCjsgKGZ1bmN0aW9uICgpIHsKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwoKICBjb25zdCBzdHJpbmdzID0gdXRpbC5zdHJpbmdzOwogIGNvbnN0IHJhbmRTdHIgPSBzdHJpbmdzLnJhbmRLZXkoKTsKICBjb25zdCBrZXkgPSBgeWF3Zl8ke3JhbmRTdHJ9YDsKCiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoa2V5LCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIGlmIChldmVudC5kZXRhaWwucm91dGUpIHsKICAgICAgY29uc3Qgcm91dGUgPSBKU09OLnBhcnNlKGV2ZW50LmRldGFpbC5yb3V0ZSk7CiAgICAgIGluaXQucGFnZS51cGRhdGUocm91dGUpOwogICAgfQogICAgaWYgKGV2ZW50LmRldGFpbC5jb25maWcpIHsKICAgICAgY29uc3QgY29uZmlnID0gSlNPTi5wYXJzZShldmVudC5kZXRhaWwuY29uZmlnKTsKICAgICAgaW5pdC5jb25maWdDaGFuZ2UoY29uZmlnKTsKICAgIH0KICB9LCB0cnVlKTsKCiAgdXRpbC5pbmplY3Qucm9vdEtleSA9IGB5YXdmXyR7c3RyaW5ncy5yYW5kS2V5KCl9YDsKICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSwga2V5KSB7CiAgICBsZXQgcm9vdFZtID0gbnVsbDsKCiAgICBjb25zdCBrZWJhYkNhc2UgPSBmdW5jdGlvbiAod29yZCkgewogICAgICBpZiAodHlwZW9mIHdvcmQgIT09ICdzdHJpbmcnKSByZXR1cm4gd29yZDsKICAgICAgcmV0dXJuIHdvcmQucmVwbGFjZSgvLi9nLCAoY2hhciwgaW5kZXgpID0+IHsKICAgICAgICBjb25zdCBsb3dlciA9IGNoYXIudG9Mb3dlckNhc2UoKTsKICAgICAgICBpZiAoY2hhciA9PT0gbG93ZXIgfHwgaW5kZXggPT09IDApIHJldHVybiBsb3dlcjsKICAgICAgICBlbHNlIHJldHVybiAnLScgKyBsb3dlcjsKICAgICAgfSk7CiAgICB9OwogICAgLy8g5Y+R546w5Lu75L2VIFZ1ZSDlhYPntKDnmoTml7blgJnkuIrmiqXmtojmga/ku6Xmlrnkvr/lhbbku5bmqKHlnZfkv67mlLnor6XlhYPntKAKICAgIGNvbnN0IHJlcG9ydE5ld05vZGUgPSBmdW5jdGlvbiAoeyB0YWcsIG5vZGUsIHJlcGxhY2UsIHJvb3QgPSBmYWxzZSB9KSB7CiAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCd5YXdmLVZ1ZU5vZGVJbnNlcnRlZCcsIHsKICAgICAgICBidWJibGVzOiB0cnVlLAogICAgICAgIGRldGFpbDogeyB0YWcsIHJlcGxhY2UsIHJvb3QgfSwKICAgICAgfSk7CiAgICAgIG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICB9OwogICAgY29uc3Qgcm91dGVSZXBvcnRPYmplY3QgPSBmdW5jdGlvbiAodm0pIHsKICAgICAgcmV0dXJuIHZtLiRyb3V0ZSA/IHsKICAgICAgICBuYW1lOiB2bS4kcm91dGUubmFtZSwKICAgICAgICBmdWxsUGF0aDogdm0uJHJvdXRlLmZ1bGxQYXRoLAogICAgICAgIHBhdGg6IHZtLiRyb3V0ZS5wYXRoLAogICAgICAgIHBhcmFtczogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2bS4kcm91dGUucGFyYW1zKSksCiAgICAgICAgcXVlcnk6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodm0uJHJvdXRlLnF1ZXJ5KSksCiAgICAgICAgbWV0YTogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2bS4kcm91dGUubWV0YSkpLAogICAgICB9IDogbnVsbDsKICAgIH07CiAgICAvLyDlj5HnjrAgVnVlIOagueWFg+e0oOeahOaXtuWAmeWQr+WKqOiEmuacrOeahOWIneWni+WMlgogICAgY29uc3QgcmVwb3J0Um9vdE5vZGUgPSBmdW5jdGlvbiAobm9kZSkgewogICAgICBjb25zdCB2bSA9IG5vZGUuX192dWVfXzsKICAgICAgcm9vdFZtID0gdm07CiAgICAgIGNvbnN0IGNvbmZpZyA9IHZtLmNvbmZpZzsKICAgICAgY29uc3Qgcm91dGUgPSByb3V0ZVJlcG9ydE9iamVjdCh2bSk7CiAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGtleSwgewogICAgICAgIGRldGFpbDogewogICAgICAgICAgY29uZmlnOiBKU09OLnN0cmluZ2lmeShjb25maWcpLAogICAgICAgICAgcm91dGU6IEpTT04uc3RyaW5naWZ5KHJvdXRlKSwKICAgICAgICB9LAogICAgICB9KTsKICAgICAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgIH07CiAgICBjb25zdCByZXBvcnRSb3V0ZUNoYW5nZSA9IGZ1bmN0aW9uIChyb3V0ZSkgewogICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChrZXksIHsKICAgICAgICBkZXRhaWw6IHsgcm91dGU6IEpTT04uc3RyaW5naWZ5KHJvdXRlKSB9LAogICAgICB9KTsKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgfTsKICAgIGxldCB1bndhdGNoUm91dGVDaGFuZ2UgPSBudWxsOwogICAgY29uc3QgbGlzdGVuUm91dGVDaGFuZ2UgPSBmdW5jdGlvbiAobm9kZSkgewogICAgICBpZiAodW53YXRjaFJvdXRlQ2hhbmdlKSB1bndhdGNoUm91dGVDaGFuZ2UoKTsKICAgICAgY29uc3Qgdm0gPSBub2RlLl9fdnVlX187CiAgICAgIHVud2F0Y2hSb3V0ZUNoYW5nZSA9IHZtLiR3YXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHJvdXRlUmVwb3J0T2JqZWN0KHZtKSk7CiAgICAgIH0sIGZ1bmN0aW9uIChyb3V0ZSkgewogICAgICAgIHJlcG9ydFJvdXRlQ2hhbmdlKEpTT04ucGFyc2Uocm91dGUpKTsKICAgICAgfSk7CiAgICB9OwoKICAgIGNvbnN0IGdldFRhZyA9IGZ1bmN0aW9uICh2bSkgewogICAgICBjb25zdCBuYW1lID0ga2ViYWJDYXNlKHZtLiRvcHRpb25zLm5hbWUgfHwgdm0uJG9wdGlvbnMuX2NvbXBvbmVudFRhZyk7CiAgICAgIHJldHVybiBuYW1lOwogICAgfTsKICAgIC8qKiBAdHlwZSB7V2Vha01hcDxPYmplY3QsIE5vZGU+fSAqLwogICAgY29uc3Qgdm1Ub0h0bWxOb2RlID0gbmV3IFdlYWtNYXAoKTsKICAgIGNvbnN0IHNlZW5FbGVtZW50ID0gbmV3IFdlYWtTZXQoKTsKICAgIGNvbnN0IG1hcmtFbGVtZW50ID0gZnVuY3Rpb24gKG5vZGUsIHZtKSB7CiAgICAgIGlmICghdm0gfHwgdm0uJGVsICE9PSBub2RlKSByZXR1cm47CiAgICAgIGNvbnN0IHRhZyA9IGdldFRhZyh2bSk7CiAgICAgIGlmICh0YWcgJiYgbm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQpIHsKICAgICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGUoJ3lhd2YtY29tcG9uZW50LXRhZycpKSB7CiAgICAgICAgICBjb25zdCB0YWdzID0gWy4uLm5ldyBTZXQoWy4uLm5vZGUuZ2V0QXR0cmlidXRlKCd5YXdmLWNvbXBvbmVudC10YWcnKS5zcGxpdCgnICcpLCB0YWddKS52YWx1ZXMoKV0uam9pbignICcpOwogICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29tcG9uZW50LXRhZycsIHRhZ3MpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgneWF3Zi1jb21wb25lbnQtdGFnJywgdGFnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc3Qga2V5ID0gKHZtLiR2bm9kZSB8fCB7fSkua2V5OwogICAgICBpZiAoa2V5ICE9IG51bGwgJiYgbm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQpIHsKICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgneWF3Zi1jb21wb25lbnQta2V5Jywga2V5KTsKICAgICAgfQogICAgICBpZiAodGFnKSB7CiAgICAgICAgaWYgKHZtVG9IdG1sTm9kZS5oYXModm0pKSB7CiAgICAgICAgICBjb25zdCBvbGQgPSB2bVRvSHRtbE5vZGUuaGFzKHZtKTsKICAgICAgICAgIGlmIChvbGQgIT09IG5vZGUpIHsKICAgICAgICAgICAgcmVwb3J0TmV3Tm9kZSh7IHRhZywgbm9kZSwgcmVwbGFjZTogdHJ1ZSB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVwb3J0TmV3Tm9kZSh7IHRhZywgbm9kZSwgcmVwbGFjZTogZmFsc2UgfSk7CiAgICAgICAgfQogICAgICAgIHZtVG9IdG1sTm9kZS5zZXQodm0sIG5vZGUpOwogICAgICB9CiAgICB9OwogICAgY29uc3QgZWFjaFZtRm9yTm9kZSA9IGZ1bmN0aW9uKiAobm9kZSkgewogICAgICBmb3IgKGxldCB2bSA9IG5vZGUuX192dWVfXzsgdm0gJiYgdm0uJGVsID09PSBub2RlOyB2bSA9IHZtLiRwYXJlbnQpIHsKICAgICAgICB5aWVsZCB2bTsKICAgICAgfQogICAgICBmb3IgKGxldCB2bSA9IG5vZGUuX192dWVfXzsgOyB2bSA9IHZtLiRjaGlsZHJlblswXSkgewogICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2bS4kY2hpbGRyZW4pKSBicmVhazsKICAgICAgICBpZiAodm0uJGNoaWxkcmVuLmxlbmd0aCAhPT0gMSkgYnJlYWs7CiAgICAgICAgY29uc3QgY2hpbGQgPSB2bS4kY2hpbGRyZW5bMF07CiAgICAgICAgaWYgKCFjaGlsZCB8fCBjaGlsZC4kZWwgIT09IG5vZGUpIGJyZWFrOwogICAgICAgIHlpZWxkIGNoaWxkOwogICAgICB9CiAgICB9OwogICAgY29uc3QgZWFjaE1vdW50ZWROb2RlID0gZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgY29uc3Qgdm0gPSBub2RlLl9fdnVlX187CiAgICAgIGlmICghdm0pIHJldHVybjsKICAgICAgLy8g5aaC5p6c5Y+R546w5qC55YWD57Sg77yM6YKj5LmI5Yid5aeL5YyW6ISa5pysCiAgICAgIGlmICh2bS4kcGFyZW50ID09IG51bGwpIHsKICAgICAgICByZXBvcnRSb290Tm9kZShub2RlKTsKICAgICAgICBsaXN0ZW5Sb3V0ZUNoYW5nZShub2RlKTsKICAgICAgfQogICAgICBmb3IgKGxldCB2bWkgb2YgZWFjaFZtRm9yTm9kZShub2RlKSkgewogICAgICAgIG1hcmtFbGVtZW50KG5vZGUsIHZtaSk7CiAgICAgIH0KICAgICAgaWYgKHNlZW5FbGVtZW50Lmhhcyhub2RlKSkgcmV0dXJuOwogICAgICBzZWVuRWxlbWVudC5hZGQobm9kZSk7CiAgICAgIGxldCBfX3Z1ZV9fID0gbm9kZS5fX3Z1ZV9fOwogICAgICBkZWxldGUgbm9kZS5fX3Z1ZV9fOwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobm9kZSwgJ19fdnVlX18nLCB7CiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgIHNldChuKSB7CiAgICAgICAgICBfX3Z1ZV9fID0gbjsKICAgICAgICAgIG1hcmtFbGVtZW50KG5vZGUsIG4pOwogICAgICAgIH0sCiAgICAgICAgZ2V0KCkgewogICAgICAgICAgcmV0dXJuIF9fdnVlX187CiAgICAgICAgfSwKICAgICAgfSk7CiAgICB9OwogICAgLyoqIEB0eXBlIHtNdXRhdGlvbkNhbGxiYWNrfSAqLwogICAgY29uc3Qgb2JzZXJ2ZU5ld05vZGVzID0gZnVuY3Rpb24gKHJlY29yZHMpIHsKICAgICAgQXJyYXkuZnJvbShyZWNvcmRzKS5mb3JFYWNoKHJlY29yZCA9PiB7CiAgICAgICAgQXJyYXkuZnJvbShyZWNvcmQuYWRkZWROb2RlcykuZm9yRWFjaChub2RlID0+IHsKICAgICAgICAgIGNvbnN0IG5vZGVzID0gW25vZGVdOwogICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBFbGVtZW50KSB7CiAgICAgICAgICAgIG5vZGVzLnB1c2goLi4ubm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpKTsKICAgICAgICAgIH0KICAgICAgICAgIG5vZGVzLmZvckVhY2gobm9kZSA9PiB7CiAgICAgICAgICAgIGVhY2hNb3VudGVkTm9kZShub2RlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH07CiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG9ic2VydmVOZXdOb2Rlcyk7CiAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7CgogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgcm9vdEtleSwgeyB2YWx1ZToge30sIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogZmFsc2UgfSk7CiAgICBjb25zdCB5YXdmID0gd2luZG93W3Jvb3RLZXldOwogICAgY29uc3QgdnVlU2V0dXAgPSB5YXdmLnZ1ZVNldHVwID0gKHlhd2YudnVlU2V0dXAgfHwge30pOwoKICAgIHZ1ZVNldHVwLmdldFJvb3RWbSA9ICgpID0+IHJvb3RWbTsKCiAgICB2dWVTZXR1cC5rZWJhYkNhc2UgPSBrZWJhYkNhc2U7CiAgICBjb25zdCBlYWNoQ29tcG9uZW50Vk0gPSB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0gPSBmdW5jdGlvbiAodGFnLCBjYWxsYmFjaywgeyBtb3VudGVkID0gdHJ1ZSwgd2F0Y2ggPSB0cnVlIH0gPSB7fSkgewogICAgICBjb25zdCBzZWVuID0gbmV3IFdlYWtTZXQoKTsKICAgICAgY29uc3QgZm91bmQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICAgICAgZm9yIChsZXQgdm0gb2YgZWFjaFZtRm9yTm9kZSh0YXJnZXQpKSB7CiAgICAgICAgICBpZiAoZ2V0VGFnKHZtKSA9PT0ga2ViYWJDYXNlKHRhZykpIHsKICAgICAgICAgICAgaWYgKHNlZW4uaGFzKHZtKSkgY29udGludWU7CiAgICAgICAgICAgIHNlZW4uYWRkKHZtKTsKICAgICAgICAgICAgY2FsbGJhY2sodm0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKHdhdGNoKSB7CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3lhd2YtVnVlTm9kZUluc2VydGVkJywgZXZlbnQgPT4gewogICAgICAgICAgaWYgKHRhZyAhPT0gZXZlbnQuZGV0YWlsLnRhZykgcmV0dXJuOwogICAgICAgICAgZm91bmQoZXZlbnQudGFyZ2V0KTsKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAobW91bnRlZCkgewogICAgICAgIFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBbeWF3Zi1jb21wb25lbnQtdGFnfj0iJHt0YWd9Il1gKV0uZm9yRWFjaChmb3VuZCk7CiAgICAgIH0KICAgIH07CiAgICB2dWVTZXR1cC5nZXRDb21wb25lbnRzQnlUYWdOYW1lID0gZnVuY3Rpb24gKHRhZykgewogICAgICBjb25zdCByZXN1bHQgPSBbXTsKICAgICAgZWFjaENvbXBvbmVudFZNKHRhZywgcmVzdWx0LnB1c2guYmluZChyZXN1bHQpLCB7IHdhdGNoOiBmYWxzZSB9KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH07CgogICAgdnVlU2V0dXAuY2xvc2VzdCA9IGZ1bmN0aW9uICh2bSwgdGFnKSB7CiAgICAgIGZvciAobGV0IHAgPSB2bTsgcDsgcCA9IHAuJHBhcmVudCkgewogICAgICAgIGlmIChnZXRUYWcocCkgPT09IGtlYmFiQ2FzZSh0YWcpKSB7CiAgICAgICAgICByZXR1cm4gcDsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9OwoKICAgIC8vIOS4i+mdoui/meS4gOS4sumDveayoea1i+ivlei/hwogICAgY29uc3QgY2hpbGRBcnJheSA9IGZ1bmN0aW9uIChlbGVtZW50LCBjcmVhdGVDaGlsZHJlbikgewogICAgICBpZiAoQXJyYXkuaXNBcnJheShlbGVtZW50KSkgewogICAgICAgIHJldHVybiBlbGVtZW50OwogICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuY29tcG9uZW50T3B0aW9ucykgewogICAgICAgIGlmICghZWxlbWVudC5jb21wb25lbnRPcHRpb25zLmNoaWxkcmVuICYmIGNyZWF0ZUNoaWxkcmVuKSB7CiAgICAgICAgICBlbGVtZW50LmNvbXBvbmVudE9wdGlvbnMuY2hpbGRyZW4gPSBbXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGVsZW1lbnQuY29tcG9uZW50T3B0aW9ucy5jaGlsZHJlbjsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIWVsZW1lbnQuY2hpbGRyZW4gJiYgY3JlYXRlQ2hpbGRyZW4pIHsKICAgICAgICAgIGVsZW1lbnQuY2hpbGRyZW4gPSBbXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGVsZW1lbnQuY2hpbGRyZW47CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBwYXJzZUNsYXNzID0gY2xhc3NOYW1lID0+IHsKICAgICAgaWYgKGNsYXNzTmFtZSA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjbGFzc05hbWUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgcmV0dXJuIFsuLi5uZXcgU2V0KGNsYXNzTmFtZS50cmltKCkuc3BsaXQoL1xzKy8pKV0uam9pbignICcpOwogICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY2xhc3NOYW1lKSkgewogICAgICAgIHJldHVybiBwYXJzZUNsYXNzKGNsYXNzTmFtZS5tYXAocGFyc2VDbGFzcykuam9pbignICcpKTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY2xhc3NOYW1lID09PSAnb2JqZWN0JykgewogICAgICAgIHJldHVybiBwYXJzZUNsYXNzKE9iamVjdC5rZXlzKGNsYXNzTmFtZSkuZmlsdGVyKGtleSA9PiBjbGFzc05hbWVba2V5XSkuam9pbignICcpKTsKICAgICAgfQogICAgICByZXR1cm4gJyc7CiAgICB9OwogICAgY29uc3QgZ2V0Vk5vZGVUYWcgPSBmdW5jdGlvbiAodm5vZGUpIHsKICAgICAgaWYgKCF2bm9kZS5jb21wb25lbnRPcHRpb25zKSByZXR1cm4gdm5vZGUudGFnOwogICAgICBjb25zdCBvcHQgPSB2bm9kZS5jb21wb25lbnRPcHRpb25zOwogICAgICBjb25zdCB0YWcgPSBvcHQuQ3RvciAmJiBvcHQuQ3Rvci5vcHRpb25zICYmIG9wdC5DdG9yLm9wdGlvbnMubmFtZSB8fCBvcHQudGFnOwogICAgICByZXR1cm4gJ3gtJyArIGtlYmFiQ2FzZSh0YWcpOwogICAgfTsKICAgIGNvbnN0IGJ1aWxkTm9kZXMgPSBmdW5jdGlvbiBidWlsZE5vZGVzKHZub2RlKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZub2RlKSkgewogICAgICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgneC15YXdmLWZyYWdtZW50Jyk7CiAgICAgICAgZnJhZ21lbnQuX192bm9kZV9fID0gdm5vZGU7CiAgICAgICAgdm5vZGUuZm9yRWFjaChjaGlsZCA9PiB7IGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkTm9kZXMoY2hpbGQpKTsgfSk7CiAgICAgICAgcmV0dXJuIGZyYWdtZW50OwogICAgICB9CiAgICAgIGNvbnN0IHRhZyA9IGdldFZOb2RlVGFnKHZub2RlKTsKICAgICAgaWYgKHRhZyA9PSBudWxsICYmIHZub2RlLnRleHQpIHsKICAgICAgICBjb25zdCBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodm5vZGUudGV4dCk7CiAgICAgICAgbm9kZS5fX3Zub2RlX18gPSB2bm9kZTsKICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgICBpZiAodGFnID09IG51bGwpIHsKICAgICAgICBjb25zdCBub2RlID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnJyk7CiAgICAgICAgbm9kZS5fX3Zub2RlX18gPSB2bm9kZTsKICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgICBjb25zdCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpOwogICAgICBub2RlLl9fdm5vZGVfXyA9IHZub2RlOwogICAgICBjb25zdCBkYXRhID0gdm5vZGUuZGF0YSB8fCB7fTsKICAgICAgY29uc3QgY2xhc3NOYW1lID0gcGFyc2VDbGFzcyhkYXRhLmNsYXNzKTsKICAgICAgaWYgKGNsYXNzTmFtZSkgbm9kZS5jbGFzc05hbWUgPSBjbGFzc05hbWU7CiAgICAgIGNvbnN0IHN0YXRpY0NsYXNzTmFtZSA9IHBhcnNlQ2xhc3MoZGF0YS5zdGF0aWNDbGFzcyk7CiAgICAgIGlmIChzdGF0aWNDbGFzc05hbWUpIG5vZGUuY2xhc3NOYW1lICs9ICcgJyArIHN0YXRpY0NsYXNzTmFtZTsKICAgICAgY29uc3QgY2hpbGRyZW4gPSBjaGlsZEFycmF5KHZub2RlKTsKICAgICAgaWYgKGNoaWxkcmVuKSBjaGlsZHJlbi5mb3JFYWNoKHZub2RlID0+IHsKICAgICAgICBub2RlLmFwcGVuZENoaWxkKGJ1aWxkTm9kZXModm5vZGUpKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBub2RlOwogICAgfTsKICAgIGNvbnN0IHZOb2RlID0gZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgcmV0dXJuIG5vZGUuX192bm9kZV9fOwogICAgfTsKICAgIGNvbnN0IGluc2VydEJlZm9yZSA9IGZ1bmN0aW9uIChwYXJlbnROb2RlLCBuZXdWTm9kZSwgcmVmTm9kZSwgbmV3Tm9kZSkgewogICAgICBpZiAocmVmTm9kZSA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiBhcHBlbmRDaGlsZChwYXJlbnROb2RlLCBuZXdWTm9kZSk7CiAgICAgIH0KICAgICAgaWYgKG5ld05vZGUgPT0gbnVsbCkgbmV3Tm9kZSA9IGJ1aWxkTm9kZXMobmV3Vk5vZGUpOwogICAgICBjb25zdCByZWZWTm9kZSA9IHZOb2RlKHJlZk5vZGUpOwogICAgICBjb25zdCBwYXJlbnRWTm9kZSA9IHZOb2RlKHBhcmVudE5vZGUpOwogICAgICBjb25zdCBjaGlsZHJlbiA9IGNoaWxkQXJyYXkocGFyZW50Vk5vZGUpOwogICAgICBjb25zdCBpbmRleCA9IGNoaWxkcmVuLmluZGV4T2YocmVmVk5vZGUpOwogICAgICBjaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDAsIG5ld1ZOb2RlKTsKICAgICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3Tm9kZSwgcmVmTm9kZSk7CiAgICAgIHJldHVybiBuZXdOb2RlOwogICAgfTsKICAgIGNvbnN0IGFwcGVuZENoaWxkID0gZnVuY3Rpb24gKHBhcmVudE5vZGUsIG5ld1ZOb2RlLCBuZXdOb2RlKSB7CiAgICAgIGNvbnN0IHBhcmVudFZOb2RlID0gdk5vZGUocGFyZW50Tm9kZSk7CiAgICAgIGNvbnN0IGNoaWxkcmVuID0gY2hpbGRBcnJheShwYXJlbnRWTm9kZSwgdHJ1ZSk7CiAgICAgIGlmIChuZXdOb2RlID09IG51bGwpIG5ld05vZGUgPSBidWlsZE5vZGVzKG5ld1ZOb2RlKTsKICAgICAgY2hpbGRyZW4ucHVzaChuZXdWTm9kZSk7CiAgICAgIHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQobmV3Tm9kZSk7CiAgICAgIHJldHVybiBuZXdOb2RlOwogICAgfTsKICAgIGNvbnN0IHJlbW92ZUNoaWxkID0gZnVuY3Rpb24gKHBhcmVudE5vZGUsIHRhcmdldE5vZGUpIHsKICAgICAgY29uc3QgdGFyZ2V0Vk5vZGUgPSB2Tm9kZSh0YXJnZXROb2RlKTsKICAgICAgY29uc3QgcGFyZW50Vk5vZGUgPSB2Tm9kZShwYXJlbnROb2RlKTsKICAgICAgY29uc3QgY2hpbGRyZW4gPSBjaGlsZEFycmF5KHBhcmVudFZOb2RlKTsKICAgICAgY29uc3QgaW5kZXggPSBjaGlsZHJlbi5pbmRleE9mKHRhcmdldFZOb2RlKTsKICAgICAgY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTsKICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0YXJnZXROb2RlKTsKICAgICAgcmV0dXJuIHRhcmdldFZOb2RlOwogICAgfTsKICAgIGNvbnN0IHdyYXBOb2RlID0gZnVuY3Rpb24gKGNocm9vdCkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKHJlZk5vZGUsIG5ld1ZOb2RlKSB7CiAgICAgICAgY29uc3QgbmV3Tm9kZSA9IGJ1aWxkTm9kZXMobmV3Vk5vZGUpOwogICAgICAgIGNvbnN0IHJlZlZOb2RlID0gdk5vZGUocmVmTm9kZSk7CiAgICAgICAgY29uc3QgcGFyZW50Tm9kZSA9IHJlZk5vZGUucGFyZW50Tm9kZTsKICAgICAgICBpZiAoIXBhcmVudE5vZGUpIHsKICAgICAgICAgIGNocm9vdChuZXdWTm9kZSk7CiAgICAgICAgICBhcHBlbmRDaGlsZChuZXdOb2RlLCByZWZWTm9kZSwgcmVmTm9kZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGluc2VydEJlZm9yZShwYXJlbnROb2RlLCBuZXdWTm9kZSwgcmVmTm9kZSwgbmV3Tm9kZSk7CiAgICAgICAgICByZW1vdmVDaGlsZChwYXJlbnROb2RlLCByZWZOb2RlKTsKICAgICAgICAgIGFwcGVuZENoaWxkKG5ld05vZGUsIHJlZlZOb2RlLCByZWZOb2RlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ld05vZGU7CiAgICAgIH07CiAgICB9OwogICAgY29uc3QgY2hhbmdlUm9vdCA9IGZ1bmN0aW9uIChjaHJvb3QpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyb290Tm9kZSkgewogICAgICAgIGNvbnN0IHBhcmVudE5vZGUgPSByb290Tm9kZS5wYXJlbnROb2RlOwogICAgICAgIGlmIChwYXJlbnROb2RlKSB7CiAgICAgICAgICByZW1vdmVDaGlsZChwYXJlbnROb2RlLCByb290Tm9kZSk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHJvb3RWTm9kZSA9IHZOb2RlKHJvb3ROb2RlKTsKICAgICAgICBjaHJvb3Qocm9vdFZOb2RlKTsKICAgICAgICByZXR1cm4gcm9vdE5vZGU7CiAgICAgIH07CiAgICB9OwogICAgY29uc3QgY2xhc3NNb2RpZnkgPSBmdW5jdGlvbiAobm9kZSwgYWRkLCByZW1vdmUpIHsKICAgICAgY29uc3Qgdm5vZGUgPSB2Tm9kZShub2RlKTsKICAgICAgdm5vZGUuZGF0YSA9IHZub2RlLmRhdGEgfHwge307CiAgICAgIGNvbnN0IGFkZGVkID0gcGFyc2VDbGFzcyhbcGFyc2VDbGFzcyh2bm9kZS5kYXRhLmNsYXNzKSwgLi4uYWRkXS5qb2luKCcgJykpOwogICAgICBjb25zdCByZW1vdmVkID0gYWRkZWQuc3BsaXQoL1xzKy8pLmZpbHRlcihjID0+ICFyZW1vdmUuaW5jbHVkZXMoYykpLmpvaW4oJyAnKTsKICAgICAgdm5vZGUuZGF0YS5jbGFzcyA9IHJlbW92ZWQ7CiAgICAgIG5vZGUuY2xhc3NOYW1lID0gcmVtb3ZlZDsKICAgIH07CiAgICBjb25zdCBhZGRDbGFzcyA9IGZ1bmN0aW9uIChub2RlLCAuLi5jbGFzc05hbWVzKSB7CiAgICAgIGNsYXNzTW9kaWZ5KG5vZGUsIGNsYXNzTmFtZXMuZmlsdGVyKHggPT4geCAmJiB0eXBlb2YgeCA9PT0gJ3N0cmluZycpLCBbXSk7CiAgICB9OwogICAgY29uc3QgcmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiAobm9kZSwgLi4uY2xhc3NOYW1lcykgewogICAgICBjbGFzc01vZGlmeShub2RlLCBbXSwgY2xhc3NOYW1lcy5maWx0ZXIoeCA9PiB4ICYmIHR5cGVvZiB4ID09PSAnc3RyaW5nJykpOwogICAgfTsKICAgIGNvbnN0IGFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAobm9kZSwgbmFtZSwgY2FsbGJhY2ssIGNvbmZpZ3MgPSB7fSwgbmF0aXZlT24gPSBmYWxzZSkgewogICAgICBjb25zdCB2bm9kZSA9IHZOb2RlKG5vZGUpOwogICAgICBjb25zdCBvblN0ciA9IG5hdGl2ZU9uID8gJ25hdGl2ZU9uJyA6ICdvbic7CiAgICAgIGlmICghdm5vZGUuZGF0YSkgdm5vZGUuZGF0YSA9IHt9OwogICAgICBpZiAoIXZub2RlLmRhdGFbb25TdHJdKSB2bm9kZS5kYXRhW29uU3RyXSA9IHt9OwogICAgICBjb25zdCBvbiA9IHZub2RlLmRhdGFbb25TdHJdOwogICAgICBjb25zdCB2dWVOYW1lID0gKGNvbmZpZ3MucGFzc2l2ZSA/ICcmJyA6ICcnKSArIChjb25maWdzLm9uY2UgPyAnficgOiAnJykgKyAoY29uZmlncy5jYXB0dXJlID8gJyEnIDogJycpICsgbmFtZTsKICAgICAgaWYgKCFvblt2dWVOYW1lXSkgb25bdnVlTmFtZV0gPSBjYWxsYmFjazsKICAgICAgZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkob25bdnVlTmFtZV0pKSBvblt2dWVOYW1lXSA9IFtvblt2dWVOYW1lXSwgY2FsbGJhY2tdOwogICAgICBlbHNlIG9uW3Z1ZU5hbWVdLnB1c2goY2FsbGJhY2spOwogICAgfTsKICAgIGNvbnN0IHJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAobm9kZSwgbmFtZSwgY2FsbGJhY2sgPSBudWxsLCBjb25maWdzID0ge30sIG5hdGl2ZU9uID0gZmFsc2UpIHsKICAgICAgY29uc3Qgdm5vZGUgPSB2Tm9kZShub2RlKTsKICAgICAgY29uc3Qgb25TdHIgPSBuYXRpdmVPbiA/ICduYXRpdmVPbicgOiAnb24nOwogICAgICBpZiAoIXZub2RlLmRhdGEpIHJldHVybjsKICAgICAgaWYgKCF2bm9kZS5kYXRhW29uU3RyXSkgcmV0dXJuOwogICAgICBjb25zdCBvbiA9IHZub2RlLmRhdGFbb25TdHJdOwogICAgICBjb25zdCB2dWVOYW1lID0gKGNvbmZpZ3MucGFzc2l2ZSA/ICcmJyA6ICcnKSArIChjb25maWdzLm9uY2UgPyAnficgOiAnJykgKyAoY29uZmlncy5jYXB0dXJlID8gJyEnIDogJycpICsgbmFtZTsKICAgICAgaWYgKCFvblt2dWVOYW1lXSkgcmV0dXJuOwogICAgICBpZiAoY2FsbGJhY2sgPT0gbnVsbCkgewogICAgICAgIGRlbGV0ZSBvblt2dWVOYW1lXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob25bdnVlTmFtZV0pKSB7CiAgICAgICAgICBpZiAob25bdnVlTmFtZV0gPT09IGNhbGxiYWNrKSBkZWxldGUgb25bdnVlTmFtZV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9uW3Z1ZU5hbWVdID0gb25bdnVlTmFtZV0uZmlsdGVyKGMgPT4gYyAhPT0gY2FsbGJhY2spOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIGNvbnN0IGdldEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAobm9kZSwgbmFtZSwgY29uZmlncyA9IHt9LCBuYXRpdmVPbiA9IGZhbHNlKSB7CiAgICAgIGNvbnN0IHZub2RlID0gdk5vZGUobm9kZSk7CiAgICAgIGNvbnN0IG9uU3RyID0gbmF0aXZlT24gPyAnbmF0aXZlT24nIDogJ29uJzsKICAgICAgaWYgKCF2bm9kZS5kYXRhKSByZXR1cm4gbnVsbDsKICAgICAgaWYgKCF2bm9kZS5kYXRhW29uU3RyXSkgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IG9uID0gdm5vZGUuZGF0YVtvblN0cl07CiAgICAgIGNvbnN0IHZ1ZU5hbWUgPSAoY29uZmlncy5wYXNzaXZlID8gJyYnIDogJycpICsgKGNvbmZpZ3Mub25jZSA/ICd+JyA6ICcnKSArIChjb25maWdzLmNhcHR1cmUgPyAnIScgOiAnJykgKyBuYW1lOwogICAgICBpZiAoIW9uW3Z1ZU5hbWVdKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIG9uW3Z1ZU5hbWVdOwogICAgfTsKICAgIGNvbnN0IGhhc0F0dHJpYnV0ZSA9IGZ1bmN0aW9uIChub2RlLCBuYW1lKSB7CiAgICAgIGNvbnN0IHZub2RlID0gdk5vZGUobm9kZSk7CiAgICAgIGlmICghdm5vZGUuZGF0YSkgcmV0dXJuIGZhbHNlOwogICAgICBpZiAoIXZub2RlLmRhdGEuYXR0cnMpIHJldHVybiBmYWxzZTsKICAgICAgY29uc3QgdmFsdWUgPSB2bm9kZS5kYXRhLmF0dHJzW25hbWVdOwogICAgICBpZiAodmFsdWUgPT09IGZhbHNlIHx8IHZhbHVlID09IG51bGwpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwogICAgY29uc3QgZ2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKG5vZGUsIG5hbWUpIHsKICAgICAgY29uc3Qgdm5vZGUgPSB2Tm9kZShub2RlKTsKICAgICAgaWYgKCF2bm9kZS5kYXRhKSByZXR1cm4gbnVsbDsKICAgICAgaWYgKCF2bm9kZS5kYXRhLmF0dHJzKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIHZub2RlLmRhdGEuYXR0cnNbbmFtZV07CiAgICB9OwogICAgY29uc3Qgc2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKG5vZGUsIG5hbWUsIHZhbHVlKSB7CiAgICAgIGNvbnN0IHZub2RlID0gdk5vZGUobm9kZSk7CiAgICAgIGlmICghdm5vZGUuZGF0YSkgcmV0dXJuOwogICAgICBpZiAoIXZub2RlLmRhdGEuYXR0cnMpIHJldHVybjsKICAgICAgdm5vZGUuZGF0YS5hdHRyc1tuYW1lXSA9IHZhbHVlOwogICAgfTsKICAgIGNvbnN0IHJlbW92ZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChub2RlLCBuYW1lKSB7CiAgICAgIGNvbnN0IHZub2RlID0gdk5vZGUobm9kZSk7CiAgICAgIGlmICghdm5vZGUuZGF0YSkgcmV0dXJuOwogICAgICBpZiAoIXZub2RlLmRhdGEuYXR0cnMpIHJldHVybjsKICAgICAgZGVsZXRlIHZub2RlLmRhdGEuYXR0cnNbbmFtZV07CiAgICB9OwogICAgY29uc3QgdHJhbnNmb3JtU2xvdCA9IGZ1bmN0aW9uIChub2RlLCBzbG90TmFtZSwgdHJhbnNmb3JtZXIpIHsKICAgICAgY29uc3Qgdm5vZGUgPSB2Tm9kZShub2RlKTsKICAgICAgY29uc3Qgc2xvdHMgPSAodm5vZGUuZGF0YSB8fCB7fSkuc2NvcGVkU2xvdHM7CiAgICAgIGlmICghc2xvdHMgfHwgIXNsb3RzW3Nsb3ROYW1lXSkgcmV0dXJuOwogICAgICBzbG90c1tzbG90TmFtZV0gPSB0cmFuc2Zvcm1SZW5kZXIoc2xvdHNbc2xvdE5hbWVdLCB0cmFuc2Zvcm1lcik7CiAgICB9OwogICAgY29uc3QgYnVpbGRlciA9IGZ1bmN0aW9uIChjcmVhdGVFbGVtZW50KSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAocm9vdCkgewogICAgICAgIGNvbnN0IHJlcGxhY2VSb290ID0gbmV3Um9vdCA9PiB7IHJvb3QgPSBuZXdSb290OyB9OwogICAgICAgIGNvbnN0IG5vZGVTdHJ1Y3QgPSBidWlsZE5vZGVzKHJvb3QpOwogICAgICAgIGNvbnN0IE5vZGVzID0gewogICAgICAgICAgdk5vZGUsCiAgICAgICAgICByZXBsYWNlUm9vdCwKICAgICAgICAgIGluc2VydEJlZm9yZSwKICAgICAgICAgIHJlbW92ZUNoaWxkLAogICAgICAgICAgYXBwZW5kQ2hpbGQsCiAgICAgICAgICB3cmFwTm9kZTogd3JhcE5vZGUocmVwbGFjZVJvb3QpLAogICAgICAgICAgdW53cmFwTm9kZTogY2hhbmdlUm9vdChyZXBsYWNlUm9vdCksCiAgICAgICAgICBhZGRDbGFzcywKICAgICAgICAgIHJlbW92ZUNsYXNzLAogICAgICAgICAgZ2V0RXZlbnRMaXN0ZW5lciwKICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIsCiAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyLAogICAgICAgICAgc2V0QXR0cmlidXRlLAogICAgICAgICAgaGFzQXR0cmlidXRlLAogICAgICAgICAgZ2V0QXR0cmlidXRlLAogICAgICAgICAgcmVtb3ZlQXR0cmlidXRlLAogICAgICAgICAgY3JlYXRlRWxlbWVudCwKICAgICAgICAgIGg6IGNyZWF0ZUVsZW1lbnQsCiAgICAgICAgICB0cmFuc2Zvcm1TbG90LAogICAgICAgIH07CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG5vZGVTdHJ1Y3QsCiAgICAgICAgICBOb2RlcywKICAgICAgICAgIGdldFJvb3Q6ICgpID0+IHJvb3QsCiAgICAgICAgfTsKICAgICAgfTsKICAgIH07CgogICAgY29uc3QgdHJhbnNmb3JtUmVuZGVyID0gZnVuY3Rpb24gKG9yaWdpbmFsUmVuZGVyLCB0cmFuc2Zvcm1lciwgeyByYXcgPSBmYWxzZSB9ID0ge30pIHsKICAgICAgaWYgKHJhdykgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoY3JlYXRlRWxlbWVudCkgewogICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVyKG9yaWdpbmFsUmVuZGVyKS5jYWxsKHRoaXMsIGNyZWF0ZUVsZW1lbnQsIHsgYnVpbGRlcjogYnVpbGRlcihjcmVhdGVFbGVtZW50KSB9KTsKICAgICAgICB9OwogICAgICB9CiAgICAgIGNvbnN0IHdyYXBwZWQgPSBmdW5jdGlvbiByZW5kZXIoY3JlYXRlRWxlbWVudCkgewogICAgICAgIGNvbnN0IHsgbm9kZVN0cnVjdCwgTm9kZXMsIGdldFJvb3QgfSA9IGJ1aWxkZXIoY3JlYXRlRWxlbWVudCkob3JpZ2luYWxSZW5kZXIuY2FsbCh0aGlzLCBjcmVhdGVFbGVtZW50KSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRyYW5zZm9ybWVyLmNhbGwodGhpcywgbm9kZVN0cnVjdCwgTm9kZXMpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1lBV0YgRXJyb3Igd2hpbGUgaW5qZWN0IHJlbmRlciBbJW9dOiAlbycsIHRyYW5zZm9ybWVyLCBlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGdldFJvb3QoKTsKICAgICAgfTsKICAgICAgd3JhcHBlZC5vcmlnaW5hbFJlbmRlciA9IG9yaWdpbmFsUmVuZGVyOwogICAgICByZXR1cm4gd3JhcHBlZDsKICAgIH07CiAgICBjb25zdCB0cmFuc2Zvcm1Db21wb25lbnRSZW5kZXIgPSB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRSZW5kZXIgPSBmdW5jdGlvbiAodm0sIHRyYW5zZm9ybWVyLCBjb25maWdzID0ge30pIHsKICAgICAgdm0uJG9wdGlvbnMucmVuZGVyID0gdHJhbnNmb3JtUmVuZGVyKHZtLiRvcHRpb25zLnJlbmRlciwgdHJhbnNmb3JtZXIsIGNvbmZpZ3MpOwogICAgfTsKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUgPSBmdW5jdGlvbiAodGFnLCB0cmFuc2Zvcm1lciwgY29uZmlncyA9IHt9KSB7CiAgICAgIGVhY2hDb21wb25lbnRWTSh0YWcsIGZ1bmN0aW9uICh2bSkgewogICAgICAgIHRyYW5zZm9ybUNvbXBvbmVudFJlbmRlcih2bSwgdHJhbnNmb3JtZXIsIGNvbmZpZ3MpOwogICAgICAgIHZtLiRmb3JjZVVwZGF0ZSgpOwogICAgICB9KTsKICAgIH07CgogICAgY29uc3QgaXNTaW1wbGVDbGljayA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5hbHRLZXkgfHwgZXZlbnQuc2hpZnRLZXkgfHwgZXZlbnQubWV0YUtleSkgcmV0dXJuIGZhbHNlOwogICAgICBpZiAoZXZlbnQud2hpY2ggIT09IDEpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwogICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybjsKICAgICAgY29uc3QgbWZzcCA9IHRhcmdldC5jbG9zZXN0KCdhLnlhd2YtbGluay1tZnNwJyk7CiAgICAgIGlmIChtZnNwKSB7CiAgICAgICAgaWYgKCFpc1NpbXBsZUNsaWNrKGV2ZW50KSkgewogICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGNvbnN0IG5tZnBkID0gdGFyZ2V0LmNsb3Nlc3QoJ2EueWF3Zi1saW5rLW5tZnBkJyk7CiAgICAgIGlmIChubWZwZCkgewogICAgICAgIGlmIChpc1NpbXBsZUNsaWNrKGV2ZW50KSkgewogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIHsgY2FwdHVyZTogdHJ1ZSB9KTsKICB9LCB1dGlsLmluamVjdC5yb290S2V5LCBrZXkpOwp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L2luaXQvcmVhZHkuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CgogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKCiAgY29uc3QgcHJpb3JpdHkgPSB1dGlsLnByaW9yaXR5OwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwoKICBjb25zdCBjb25maWcgPSB5YXdmLmNvbmZpZzsKCiAgaW5pdC5vblJlYWR5KGFzeW5jICgpID0+IHsKICAgIGNvbnN0ICRDT05GSUcgPSBpbml0LnBhZ2UuJENPTkZJRzsKICAgIGF3YWl0IGNvbmZpZy5pbml0KCRDT05GSUcudWlkKTsKICAgIHV0aWwuaTE4biA9ICRDT05GSUcubGFuZzsKICAgIHV0aWwudGltZS5zZXREaWZmKCRDT05GSUcudGltZURpZmYgfHwgMCk7CiAgfSwgeyBwcmlvcml0eTogcHJpb3JpdHkuRklSU1QgfSk7CgogIHV0aWwuZGVidWcoJ3lhd2YgbG9hZGluZywgaGlkZSBhbGwnKTsKICBjb25zdCBoaWRlQWxsID0gY3NzLmFkZCgnLldCX21pbmlibG9nIHsgdmlzaWJpbGl0eTogaGlkZGVuOyBvcGFjaXR5OiAwOyB9Jyk7CiAgaW5pdC5vblJlYWR5KCgpID0+IHsKICAgIGhpZGVBbGwucmVtb3ZlKCk7CiAgICB1dGlsLmRlYnVnKCd5YXdmIGxvYWRlZCwgZGlzYWJsZSBoaWRlIGFsbCcpOwogIH0sIHsgcHJpb3JpdHk6IHByaW9yaXR5LkxBU1QgfSk7CiAgaW5pdC5vbkRlaW5pdCgoKSA9PiB7CiAgICBoaWRlQWxsLnJlbW92ZSgpOwogICAgdXRpbC5kZWJ1ZygneWF3ZiB1bmxvYWRlZCwgZGlzYWJsZSBoaWRlIGFsbCcpOwogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiByZXBsYWNlbWVudCBvZiB5YW9mYW5nOi8vY29udGVudC9iYWNrZW5kL2Rvd25sb2FkLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmID0gd2luZG93Lnlhd2YgfHwge307CiAgY29uc3QgZG93bmxvYWQgPSB5YXdmLmRvd25sb2FkID0ge307CgogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CgogIGNvbnN0IHZhbGlkRmlsZW5hbWUgPSAoZnVuY3Rpb24gKCkgewogICAgY29uc3QgcmVnT3RoZXJDaGFyYWN0ZXJzID0gL14oPzpcdUQ4MzRbXHVEQ0Y2LVx1RENGRlx1REQyN1x1REQyOFx1REQ3My1cdUREN0FcdURERTktXHVEREZGXHVERTQ2LVx1REVGRlx1REY1Ny1cdURGNUZcdURGNzItXHVERkZGXXxcdUQ4MzZbXHVERThDLVx1REU5QVx1REVBMFx1REVCMC1cdURGRkZdfFx1RDgzQ1tcdURDMkMtXHVEQzJGXHVEQzk0LVx1REM5Rlx1RENBRlx1RENCMFx1RENDMFx1RENEMFx1RENGNi1cdURDRkZcdUREMEQtXHVERDBGXHVERDJGXHVERDZDLVx1REQ2Rlx1REQ5Qi1cdURERTVcdURFMDMtXHVERTBGXHVERTNCLVx1REUzRlx1REU0OS1cdURFNEZcdURFNTItXHVERUZGXXxcdUQ4MUFbXHVERTM5LVx1REUzRlx1REU1Rlx1REU2QS1cdURFNkRcdURFNzAtXHVERUNGXHVERUVFXHVERUVGXHVERUY2LVx1REVGRlx1REY0Ni1cdURGNEZcdURGNUFcdURGNjJcdURGNzgtXHVERjdDXHVERjkwLVx1REZGRl18XHVEODA5W1x1REM2Rlx1REM3NS1cdURDN0ZcdURENDQtXHVERkZGXXxcdUQ4MUJbXHVEQzAwLVx1REVGRlx1REY0NS1cdURGNEZcdURGN0YtXHVERjhFXHVERkEwLVx1REZGRl18XHVEODZFW1x1REMxRVx1REMxRl18XHVEODNEW1x1REQ3QVx1RERBNFx1REVEMS1cdURFREZcdURFRUQtXHVERUVGXHVERUY0LVx1REVGRlx1REY3NC1cdURGN0ZcdURGRDUtXHVERkZGXXxcdUQ4MDFbXHVEQzlFXHVEQzlGXHVEQ0FBLVx1RENGRlx1REQyOC1cdUREMkZcdURENjQtXHVERDZFXHVERDcwLVx1RERGRlx1REYzNy1cdURGM0ZcdURGNTYtXHVERjVGXHVERjY4LVx1REZGRl18XHVEODAwW1x1REMwQ1x1REMyN1x1REMzQlx1REMzRVx1REM0RVx1REM0Rlx1REM1RS1cdURDN0ZcdURDRkItXHVEQ0ZGXHVERDAzLVx1REQwNlx1REQzNC1cdUREMzZcdUREOEQtXHVERDhGXHVERDlDLVx1REQ5Rlx1RERBMS1cdUREQ0ZcdURERkUtXHVERTdGXHVERTlELVx1REU5Rlx1REVEMS1cdURFREZcdURFRkMtXHVERUZGXHVERjI0LVx1REYyRlx1REY0Qi1cdURGNEZcdURGN0ItXHVERjdGXHVERjlFXHVERkM0LVx1REZDN1x1REZENi1cdURGRkZdfFx1RDg2OVtcdURFRDctXHVERUZGXXxcdUQ4M0JbXHVEQzAwLVx1RERGRlx1REUwNFx1REUyMFx1REUyM1x1REUyNVx1REUyNlx1REUyOFx1REUzM1x1REUzOFx1REUzQVx1REUzQy1cdURFNDFcdURFNDMtXHVERTQ2XHVERTQ4XHVERTRBXHVERTRDXHVERTUwXHVERTUzXHVERTU1XHVERTU2XHVERTU4XHVERTVBXHVERTVDXHVERTVFXHVERTYwXHVERTYzXHVERTY1XHVERTY2XHVERTZCXHVERTczXHVERTc4XHVERTdEXHVERTdGXHVERThBXHVERTlDLVx1REVBMFx1REVBNFx1REVBQVx1REVCQy1cdURFRUZcdURFRjItXHVERkZGXXxcdUQ4N0VbXHVERTFFLVx1REZGRl18XHVEQjQwW1x1REMwMC1cdURDRkZcdURERjAtXHVERkZGXXxcdUQ4MDRbXHVEQzRFLVx1REM1MVx1REM3MC1cdURDN0VcdURDQkRcdURDQzItXHVEQ0NGXHVEQ0U5LVx1RENFRlx1RENGQS1cdURDRkZcdUREMzVcdURENDQtXHVERDRGXHVERDc3LVx1REQ3Rlx1RERDRVx1RERDRlx1RERFMFx1RERGNS1cdURERkZcdURFMTJcdURFM0UtXHVERTdGXHVERTg3XHVERTg5XHVERThFXHVERTlFXHVERUFBLVx1REVBRlx1REVFQi1cdURFRUZcdURFRkEtXHVERUZGXHVERjA0XHVERjBEXHVERjBFXHVERjExXHVERjEyXHVERjI5XHVERjMxXHVERjM0XHVERjNBXHVERjNCXHVERjQ1XHVERjQ2XHVERjQ5XHVERjRBXHVERjRFXHVERjRGXHVERjUxLVx1REY1Nlx1REY1OC1cdURGNUNcdURGNjRcdURGNjVcdURGNkQtXHVERjZGXHVERjc1LVx1REZGRl18XHVEODNBW1x1RENDNVx1RENDNlx1RENENy1cdURGRkZdfFx1RDgwRFtcdURDMkYtXHVERkZGXXxcdUQ4NkRbXHVERjM1LVx1REYzRl18W1x1RDgwN1x1RDgwQVx1RDgwQlx1RDgwRS1cdUQ4MTBcdUQ4MTItXHVEODE5XHVEODFDLVx1RDgyQlx1RDgyRFx1RDgyRVx1RDgzMC1cdUQ4MzNcdUQ4MzctXHVEODM5XHVEODNGXHVEODc0LVx1RDg3RFx1RDg3Ri1cdURCM0ZcdURCNDEtXHVEQkZGXVtcdURDMDAtXHVERkZGXXxcdUQ4MDZbXHVEQzAwLVx1REM5Rlx1RENGMy1cdURDRkVcdUREMDAtXHVERUJGXHVERUY5LVx1REZGRl18XHVEODAzW1x1REM0OS1cdURDN0ZcdURDQjMtXHVEQ0JGXHVEQ0YzLVx1RENGOVx1REQwMC1cdURFNUZcdURFN0YtXHVERkZGXXxcdUQ4MzVbXHVEQzU1XHVEQzlEXHVEQ0EwXHVEQ0ExXHVEQ0EzXHVEQ0E0XHVEQ0E3XHVEQ0E4XHVEQ0FEXHVEQ0JBXHVEQ0JDXHVEQ0M0XHVERDA2XHVERDBCXHVERDBDXHVERDE1XHVERDFEXHVERDNBXHVERDNGXHVERDQ1XHVERDQ3LVx1REQ0OVx1REQ1MVx1REVBNlx1REVBN1x1REZDQ1x1REZDRF18XHVEODA1W1x1REMwMC1cdURDN0ZcdURDQzgtXHVEQ0NGXHVEQ0RBLVx1REQ3Rlx1RERCNlx1RERCN1x1RERERS1cdURERkZcdURFNDUtXHVERTRGXHVERTVBLVx1REU3Rlx1REVCOC1cdURFQkZcdURFQ0EtXHVERUZGXHVERjFBLVx1REYxQ1x1REYyQy1cdURGMkZcdURGNDAtXHVERkZGXXxcdUQ4MDJbXHVEQzA2XHVEQzA3XHVEQzA5XHVEQzM2XHVEQzM5LVx1REMzQlx1REMzRFx1REMzRVx1REM1Nlx1REM5Ri1cdURDQTZcdURDQjAtXHVEQ0RGXHVEQ0YzXHVEQ0Y2LVx1RENGQVx1REQxQy1cdUREMUVcdUREM0EtXHVERDNFXHVERDQwLVx1REQ3Rlx1RERCOC1cdUREQkJcdURERDBcdURERDFcdURFMDRcdURFMDctXHVERTBCXHVERTE0XHVERTE4XHVERTM0LVx1REUzN1x1REUzQi1cdURFM0VcdURFNDgtXHVERTRGXHVERTU5LVx1REU1Rlx1REVBMC1cdURFQkZcdURFRTctXHVERUVBXHVERUY3LVx1REVGRlx1REYzNi1cdURGMzhcdURGNTZcdURGNTdcdURGNzMtXHVERjc3XHVERjkyLVx1REY5OFx1REY5RC1cdURGQThcdURGQjAtXHVERkZGXXxcdUQ4MDhbXHVERjlBLVx1REZGRl18XHVEODJGW1x1REM2Qi1cdURDNkZcdURDN0QtXHVEQzdGXHVEQzg5LVx1REM4Rlx1REM5QVx1REM5Qlx1RENBMC1cdURGRkZdfFx1RDgyQ1tcdURDMDItXHVERkZGXXxcdUQ4MTFbXHVERTQ3LVx1REZGRl18XHVEODNFW1x1REMwQy1cdURDMEZcdURDNDgtXHVEQzRGXHVEQzVBLVx1REM1Rlx1REM4OC1cdURDOEZcdURDQUUtXHVERDBGXHVERDE5LVx1REQ3Rlx1REQ4NS1cdUREQkZcdUREQzEtXHVERkZGXXxcdUQ4NzNbXHVERUEyLVx1REZGRl18W1wwLVx4MUZceDdGLVx4OUZceEFEXHUwMzc4XHUwMzc5XHUwMzgwLVx1MDM4M1x1MDM4Qlx1MDM4RFx1MDNBMlx1MDUzMFx1MDU1N1x1MDU1OFx1MDU2MFx1MDU4OFx1MDU4Qlx1MDU4Q1x1MDU5MFx1MDVDOC1cdTA1Q0ZcdTA1RUItXHUwNUVGXHUwNUY1LVx1MDYwNVx1MDYxQ1x1MDYxRFx1MDZERFx1MDcwRVx1MDcwRlx1MDc0Qlx1MDc0Q1x1MDdCMi1cdTA3QkZcdTA3RkItXHUwN0ZGXHUwODJFXHUwODJGXHUwODNGXHUwODVDXHUwODVEXHUwODVGLVx1MDg5Rlx1MDhCNS1cdTA4RTJcdTA5ODRcdTA5OERcdTA5OEVcdTA5OTFcdTA5OTJcdTA5QTlcdTA5QjFcdTA5QjMtXHUwOUI1XHUwOUJBXHUwOUJCXHUwOUM1XHUwOUM2XHUwOUM5XHUwOUNBXHUwOUNGLVx1MDlENlx1MDlEOC1cdTA5REJcdTA5REVcdTA5RTRcdTA5RTVcdTA5RkMtXHUwQTAwXHUwQTA0XHUwQTBCLVx1MEEwRVx1MEExMVx1MEExMlx1MEEyOVx1MEEzMVx1MEEzNFx1MEEzN1x1MEEzQVx1MEEzQlx1MEEzRFx1MEE0My1cdTBBNDZcdTBBNDlcdTBBNEFcdTBBNEUtXHUwQTUwXHUwQTUyLVx1MEE1OFx1MEE1RFx1MEE1Ri1cdTBBNjVcdTBBNzYtXHUwQTgwXHUwQTg0XHUwQThFXHUwQTkyXHUwQUE5XHUwQUIxXHUwQUI0XHUwQUJBXHUwQUJCXHUwQUM2XHUwQUNBXHUwQUNFXHUwQUNGXHUwQUQxLVx1MEFERlx1MEFFNFx1MEFFNVx1MEFGMi1cdTBBRjhcdTBBRkEtXHUwQjAwXHUwQjA0XHUwQjBEXHUwQjBFXHUwQjExXHUwQjEyXHUwQjI5XHUwQjMxXHUwQjM0XHUwQjNBXHUwQjNCXHUwQjQ1XHUwQjQ2XHUwQjQ5XHUwQjRBXHUwQjRFLVx1MEI1NVx1MEI1OC1cdTBCNUJcdTBCNUVcdTBCNjRcdTBCNjVcdTBCNzgtXHUwQjgxXHUwQjg0XHUwQjhCLVx1MEI4RFx1MEI5MVx1MEI5Ni1cdTBCOThcdTBCOUJcdTBCOURcdTBCQTAtXHUwQkEyXHUwQkE1LVx1MEJBN1x1MEJBQi1cdTBCQURcdTBCQkEtXHUwQkJEXHUwQkMzLVx1MEJDNVx1MEJDOVx1MEJDRVx1MEJDRlx1MEJEMS1cdTBCRDZcdTBCRDgtXHUwQkU1XHUwQkZCLVx1MEJGRlx1MEMwNFx1MEMwRFx1MEMxMVx1MEMyOVx1MEMzQS1cdTBDM0NcdTBDNDVcdTBDNDlcdTBDNEUtXHUwQzU0XHUwQzU3XHUwQzVCLVx1MEM1Rlx1MEM2NFx1MEM2NVx1MEM3MC1cdTBDNzdcdTBDODBcdTBDODRcdTBDOERcdTBDOTFcdTBDQTlcdTBDQjRcdTBDQkFcdTBDQkJcdTBDQzVcdTBDQzlcdTBDQ0UtXHUwQ0Q0XHUwQ0Q3LVx1MENERFx1MENERlx1MENFNFx1MENFNVx1MENGMFx1MENGMy1cdTBEMDBcdTBEMDRcdTBEMERcdTBEMTFcdTBEM0JcdTBEM0NcdTBENDVcdTBENDlcdTBENEYtXHUwRDU2XHUwRDU4LVx1MEQ1RVx1MEQ2NFx1MEQ2NVx1MEQ3Ni1cdTBENzhcdTBEODBcdTBEODFcdTBEODRcdTBEOTctXHUwRDk5XHUwREIyXHUwREJDXHUwREJFXHUwREJGXHUwREM3LVx1MERDOVx1MERDQi1cdTBEQ0VcdTBERDVcdTBERDdcdTBERTAtXHUwREU1XHUwREYwXHUwREYxXHUwREY1LVx1MEUwMFx1MEUzQi1cdTBFM0VcdTBFNUMtXHUwRTgwXHUwRTgzXHUwRTg1XHUwRTg2XHUwRTg5XHUwRThCXHUwRThDXHUwRThFLVx1MEU5M1x1MEU5OFx1MEVBMFx1MEVBNFx1MEVBNlx1MEVBOFx1MEVBOVx1MEVBQ1x1MEVCQVx1MEVCRVx1MEVCRlx1MEVDNVx1MEVDN1x1MEVDRVx1MEVDRlx1MEVEQVx1MEVEQlx1MEVFMC1cdTBFRkZcdTBGNDhcdTBGNkQtXHUwRjcwXHUwRjk4XHUwRkJEXHUwRkNEXHUwRkRCLVx1MEZGRlx1MTBDNlx1MTBDOC1cdTEwQ0NcdTEwQ0VcdTEwQ0ZcdTEyNDlcdTEyNEVcdTEyNEZcdTEyNTdcdTEyNTlcdTEyNUVcdTEyNUZcdTEyODlcdTEyOEVcdTEyOEZcdTEyQjFcdTEyQjZcdTEyQjdcdTEyQkZcdTEyQzFcdTEyQzZcdTEyQzdcdTEyRDdcdTEzMTFcdTEzMTZcdTEzMTdcdTEzNUJcdTEzNUNcdTEzN0QtXHUxMzdGXHUxMzlBLVx1MTM5Rlx1MTNGNlx1MTNGN1x1MTNGRVx1MTNGRlx1MTY5RC1cdTE2OUZcdTE2RjktXHUxNkZGXHUxNzBEXHUxNzE1LVx1MTcxRlx1MTczNy1cdTE3M0ZcdTE3NTQtXHUxNzVGXHUxNzZEXHUxNzcxXHUxNzc0LVx1MTc3Rlx1MTdERVx1MTdERlx1MTdFQS1cdTE3RUZcdTE3RkEtXHUxN0ZGXHUxODBFXHUxODBGXHUxODFBLVx1MTgxRlx1MTg3OC1cdTE4N0ZcdTE4QUItXHUxOEFGXHUxOEY2LVx1MThGRlx1MTkxRlx1MTkyQy1cdTE5MkZcdTE5M0MtXHUxOTNGXHUxOTQxLVx1MTk0M1x1MTk2RVx1MTk2Rlx1MTk3NS1cdTE5N0ZcdTE5QUMtXHUxOUFGXHUxOUNBLVx1MTlDRlx1MTlEQi1cdTE5RERcdTFBMUNcdTFBMURcdTFBNUZcdTFBN0RcdTFBN0VcdTFBOEEtXHUxQThGXHUxQTlBLVx1MUE5Rlx1MUFBRVx1MUFBRlx1MUFCRi1cdTFBRkZcdTFCNEMtXHUxQjRGXHUxQjdELVx1MUI3Rlx1MUJGNC1cdTFCRkJcdTFDMzgtXHUxQzNBXHUxQzRBLVx1MUM0Q1x1MUM4MC1cdTFDQkZcdTFDQzgtXHUxQ0NGXHUxQ0Y3XHUxQ0ZBLVx1MUNGRlx1MURGNi1cdTFERkJcdTFGMTZcdTFGMTdcdTFGMUVcdTFGMUZcdTFGNDZcdTFGNDdcdTFGNEVcdTFGNEZcdTFGNThcdTFGNUFcdTFGNUNcdTFGNUVcdTFGN0VcdTFGN0ZcdTFGQjVcdTFGQzVcdTFGRDRcdTFGRDVcdTFGRENcdTFGRjBcdTFGRjFcdTFGRjVcdTFGRkZcdTIwMEItXHUyMDBGXHUyMDJBLVx1MjAyRVx1MjA2MC1cdTIwNkZcdTIwNzJcdTIwNzNcdTIwOEZcdTIwOUQtXHUyMDlGXHUyMEJGLVx1MjBDRlx1MjBGMS1cdTIwRkZcdTIxOEMtXHUyMThGXHUyM0ZCLVx1MjNGRlx1MjQyNy1cdTI0M0ZcdTI0NEItXHUyNDVGXHUyQjc0XHUyQjc1XHUyQjk2XHUyQjk3XHUyQkJBLVx1MkJCQ1x1MkJDOVx1MkJEMi1cdTJCRUJcdTJCRjAtXHUyQkZGXHUyQzJGXHUyQzVGXHUyQ0Y0LVx1MkNGOFx1MkQyNlx1MkQyOC1cdTJEMkNcdTJEMkVcdTJEMkZcdTJENjgtXHUyRDZFXHUyRDcxLVx1MkQ3RVx1MkQ5Ny1cdTJEOUZcdTJEQTdcdTJEQUZcdTJEQjdcdTJEQkZcdTJEQzdcdTJEQ0ZcdTJERDdcdTJEREZcdTJFNDMtXHUyRTdGXHUyRTlBXHUyRUY0LVx1MkVGRlx1MkZENi1cdTJGRUZcdTJGRkMtXHUyRkZGXHUzMDQwXHUzMDk3XHUzMDk4XHUzMTAwLVx1MzEwNFx1MzEyRS1cdTMxMzBcdTMxOEZcdTMxQkItXHUzMUJGXHUzMUU0LVx1MzFFRlx1MzIxRlx1MzJGRlx1NERCNi1cdTREQkZcdTlGRDYtXHU5RkZGXHVBNDhELVx1QTQ4Rlx1QTRDNy1cdUE0Q0ZcdUE2MkMtXHVBNjNGXHVBNkY4LVx1QTZGRlx1QTdBRVx1QTdBRlx1QTdCOC1cdUE3RjZcdUE4MkMtXHVBODJGXHVBODNBLVx1QTgzRlx1QTg3OC1cdUE4N0ZcdUE4QzUtXHVBOENEXHVBOERBLVx1QThERlx1QThGRVx1QThGRlx1QTk1NC1cdUE5NUVcdUE5N0QtXHVBOTdGXHVBOUNFXHVBOURBLVx1QTlERFx1QTlGRlx1QUEzNy1cdUFBM0ZcdUFBNEVcdUFBNEZcdUFBNUFcdUFBNUJcdUFBQzMtXHVBQURBXHVBQUY3LVx1QUIwMFx1QUIwN1x1QUIwOFx1QUIwRlx1QUIxMFx1QUIxNy1cdUFCMUZcdUFCMjdcdUFCMkZcdUFCNjYtXHVBQjZGXHVBQkVFXHVBQkVGXHVBQkZBLVx1QUJGRlx1RDdBNC1cdUQ3QUZcdUQ3QzctXHVEN0NBXHVEN0ZDLVx1RjhGRlx1RkE2RVx1RkE2Rlx1RkFEQS1cdUZBRkZcdUZCMDctXHVGQjEyXHVGQjE4LVx1RkIxQ1x1RkIzN1x1RkIzRFx1RkIzRlx1RkI0Mlx1RkI0NVx1RkJDMi1cdUZCRDJcdUZENDAtXHVGRDRGXHVGRDkwXHVGRDkxXHVGREM4LVx1RkRFRlx1RkRGRVx1RkRGRlx1RkUxQS1cdUZFMUZcdUZFNTNcdUZFNjdcdUZFNkMtXHVGRTZGXHVGRTc1XHVGRUZELVx1RkYwMFx1RkZCRi1cdUZGQzFcdUZGQzhcdUZGQzlcdUZGRDBcdUZGRDFcdUZGRDhcdUZGRDlcdUZGREQtXHVGRkRGXHVGRkU3XHVGRkVGLVx1RkZGQlx1RkZGRVx1RkZGRl0pJC9nOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lCiAgICBjb25zdCByZWdXaW5kb3dzUmVzZXJ2ZWRGaWxlbmFtZSA9IC9eKD89Q09OfFBSTnxBVVh8TlVMfENPTVsxLTldfExQVFsxLTldJCkvaTsKICAgIGNvbnN0IHJlZ0ZpbGVuYW1lVW5oYXBweUNoYXJhY3RlcnMgPSAvXltccy4tXSt8Wzw+OiIvXFx8PypdfFwuKD89LipcLil8Wy87I118W1xzLl0rJC9nOwogICAgY29uc3QgZGVmYXVsdEZpbGVuYW1lID0gJ18nOwogICAgcmV0dXJuIGZpbGVuYW1lID0+IHsKICAgICAgY29uc3QgdmFsaWQgPSAoZmlsZW5hbWUgKyAnJykKICAgICAgICAubWF0Y2goLy4vdWcpLm1hcChjaGFyYWN0ZXIgPT4gY2hhcmFjdGVyLnJlcGxhY2UocmVnT3RoZXJDaGFyYWN0ZXJzLCAnXycpKS5qb2luKCcnKQogICAgICAgIC5yZXBsYWNlKHJlZ0ZpbGVuYW1lVW5oYXBweUNoYXJhY3RlcnMsICdfJykKICAgICAgICAucmVwbGFjZShyZWdXaW5kb3dzUmVzZXJ2ZWRGaWxlbmFtZSwgJ18nKSB8fAogICAgICAgIGRlZmF1bHRGaWxlbmFtZTsKICAgICAgaWYgKHZhbGlkID09PSBmaWxlbmFtZSkgcmV0dXJuIGZpbGVuYW1lOwogICAgICByZXR1cm4gdmFsaWRGaWxlbmFtZSh2YWxpZCk7CiAgICB9OwogIH0oKSk7CgogIGRvd25sb2FkLmZpbGVuYW1lID0gdmFsaWRGaWxlbmFtZTsKCiAgLyoqCiAgICogQHBhcmFtIHt7IGJsb2I6IEJsb2IsIGZpbGVuYW1lOiBzdHJpbmcgfX0KICAgKi8KICBkb3dubG9hZC5ibG9iID0gYXN5bmMgZnVuY3Rpb24gKHsgYmxvYiwgZmlsZW5hbWUgfSkgewogICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICBsaW5rLmRvd25sb2FkID0gZmlsZW5hbWU7CiAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOwogICAgbGluay5jbGljaygpOwogICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsKICAgIGNvbnN0IHJldm9rZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgcmV2b2tlKTsKICAgIH07CiAgICBzZXRUaW1lb3V0KHJldm9rZSwgNjBlMyk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgcmV2b2tlKTsKICB9OwoKICAvKioKICAgKiBAcGFyYW0ge3sgdXJsOiBzdHJpbmcsIGZpbGVuYW1lOiBzdHJpbmcgfVtdfQogICAqLwogIGRvd25sb2FkLnVybHMgPSBhc3luYyBmdW5jdGlvbiAoZmlsZXMpIHsKICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBQcm9taXNlLmFsbChmaWxlcy5tYXAoZnVuY3Rpb24gKHsgdXJsLCBmaWxlbmFtZSB9LCBpbmRleCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIEdNLnhtbEh0dHBSZXF1ZXN0KHsKICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJywKICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgICAgY29uc3QgbXRpbWUgPSAocmVzcC5yZXNwb25zZUhlYWRlcnMubWF0Y2goL15MYXN0LU1vZGlmaWVkOiAoLiopJC9taSkgfHwgW10pWzFdOwogICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICBmaWxlbmFtZSwKICAgICAgICAgICAgICBjb250ZW50OiByZXNwLnJlc3BvbnNlLAogICAgICAgICAgICAgIG10aW1lOiBuZXcgRGF0ZShtdGltZSB8fCBEYXRlLm5vdygpKSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LAogICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZWplY3QoKTsKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSkpOwoKICAgIGNvbnN0IHByZWZpeCA9IGNvbnRlbnRbMF0uZmlsZW5hbWUuc3BsaXQoJy8nKS5yZWR1Y2UoKHJlc3VsdCwgcGFydCkgPT4gewogICAgICBpZiAoY29udGVudC5zb21lKGl0ZW0gPT4gIWl0ZW0uZmlsZW5hbWUuc3RhcnRzV2l0aChyZXN1bHQgKyAnLycgKyBwYXJ0KSkpIHJldHVybiByZXN1bHQ7CiAgICAgIHJldHVybiByZXN1bHQgKyAnLycgKyBwYXJ0OwogICAgfSk7CiAgICBjb250ZW50LmZvckVhY2goaXRlbSA9PiB7CiAgICAgIGl0ZW0uZmlsZW5hbWUgPSBpdGVtLmZpbGVuYW1lLnNsaWNlKHByZWZpeC5sZW5ndGgpLnJlcGxhY2UoL15cLy8sICcnKTsKICAgIH0pOwogICAgY29uc3QgdGFyYmFsbCA9IHV0aWwudGFyYmFsbC5maWxlcyhjb250ZW50KTsKICAgIGxldCBibG9iID0gbmV3IEJsb2IoW3RhcmJhbGxdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi94LXRhcicgfSk7CiAgICBkb3dubG9hZC5ibG9iKHsgYmxvYiwgZmlsZW5hbWU6IChwcmVmaXggfHwgY29udGVudFswXS5maWxlbmFtZSkgKyAnLnRhcicgfSk7CgogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHJlcGxhY2VtZW50IG9mIHlhb2Zhbmc6Ly9jb250ZW50L2JhY2tlbmQvbm90aWZpY2F0aW9ucy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmIHx8IHt9OwogIGNvbnN0IG5vdGlmaWNhdGlvbnMgPSB5YXdmLm5vdGlmaWNhdGlvbnMgPSB7fTsKCiAgbm90aWZpY2F0aW9ucy5zaG93ID0gZnVuY3Rpb24gKHsgdGl0bGUsIGNvbnRlbnQsIGljb24gPSBudWxsLCBkdXJhdGlvbiA9IEluZmluaXR5IH0pIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIEdNLm5vdGlmaWNhdGlvbih7CiAgICAgICAgdGl0bGUsCiAgICAgICAgdGV4dDogY29udGVudCwKICAgICAgICBpbWFnZTogaWNvbiwKICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgIH0sCiAgICAgICAgb25kb25lOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXNvbHZlKGZhbHNlKTsKICAgICAgICB9LAogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVzb2x2ZShmYWxzZSk7CiAgICAgIH0pOwogICAgfSk7CiAgfTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gcmVwbGFjZW1lbnQgb2YgeWFvZmFuZzovL2NvbnRlbnQvYmFja2VuZC9mb250bGlzdC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmIHx8IHt9OwoKICBjb25zdCBmb250TGlzdCA9IHlhd2YuZm9udExpc3QgPSB7fTsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwoKICBjb25zdCBmdW5jdG9vbHMgPSB1dGlsLmZ1bmN0b29sczsKCiAgY29uc3QgdGV4dFdpZHRoID0gKGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IGZvbnRzaXplID0gMTQ7CiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKCiAgICAvLyBodHRwczovL2J1Z3ppbC5sYS81NjEzNjEKICAgIHJldHVybiBmdW5jdGlvbiAoZm9udG5hbWUsIHRleHQpIHsKICAgICAgY29udGV4dC5mb250ID0gJ2JvbGQgJyArIGZvbnRzaXplICsgJ3B4ICcgKyBmb250bmFtZTsKICAgICAgcmV0dXJuIGNvbnRleHQubWVhc3VyZVRleHQodGV4dCkud2lkdGg7CiAgICB9OwogIH0oKSk7CgogIGNvbnN0IHNhbXBsZVRleHRXaWR0aCA9IGZ1bmN0aW9uIChmb250bmFtZSkgewogICAgY29uc3Qgc2FtcGxlVGV4dCA9IFsKICAgICAgJ1RoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cnLAogICAgICAnNzUzMTkwMjQ2OCcsCiAgICAgICcsLiEtJywKICAgICAgJ+WkqeWcsOeOhOm7hO+8jOWuh+Wumea0quiNkuOAgicsCiAgICAgICfnn6XmiYDlhYjlvozvvIzliYfov5HpgZPnn6PjgIInLAogICAgXS5qb2luKCcnKTsKICAgIHJldHVybiB0ZXh0V2lkdGgoZm9udG5hbWUsIHNhbXBsZVRleHQpOwogIH07CgogIGNvbnN0IGJhc2ljRm9udHMgPSBbCiAgICAnbW9ub3NwYWNlJywgJ3NhbnMtc2VyaWYnLCAnc2FucycsICdTeW1ib2wnLCAnQXJpYWwnLCAnRml4ZWQnLAogICAgJ1RpbWVzJywgJ1RpbWVzIE5ldyBSb21hbicsICflrovkvZMnLCAn6buR5L2TJywgJ01pY3Jvc29mdCBZYUhlaScsCiAgXTsKCiAgY29uc3Qgc2V0dXBCYXNlbGluZSA9IGZ1bmN0b29scy5vbmNlKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBiYXNpY0ZvbnRzLm1hcChmb250bmFtZSA9PiBzYW1wbGVUZXh0V2lkdGgoZm9udG5hbWUpKTsKICB9KTsKCiAgY29uc3QgY2hlY2tGb250ID0gYXN5bmMgZnVuY3Rpb24gKGNzc05hbWUpIHsKICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpOwogICAgY29uc3QgYmFzZWxpbmUgPSBzZXR1cEJhc2VsaW5lKCk7CiAgICByZXR1cm4gYmFzaWNGb250cy5zb21lKChmb250bmFtZSwgaW5kZXgpID0+ICgKICAgICAgc2FtcGxlVGV4dFdpZHRoKGAke2Nzc05hbWV9LCR7Zm9udG5hbWV9YCkgIT09IGJhc2VsaW5lW2luZGV4XQogICAgKSk7CiAgfTsKCiAgY29uc3QgY2hlY2tBbGxGb250cyA9IGZ1bmN0b29scy5vbmNlKGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IGNoZWNrbGlzdCA9IHsKICAgICAgd2VzdDogWwogICAgICAgIFsnVGltZXMnLCAnVGltZXMnXSwKICAgICAgICBbJyJUaW1lcyBOZXcgUm9tYW4iJywgJ1RpbWVzIE5ldyBSb21hbiddLAogICAgICAgIFsnR2VvcmdpYScsICdHZW9yZ2lhJ10sCiAgICAgICAgWydBcmlhbCcsICdBcmlhbCddLAogICAgICAgIFsnSGVsdmV0aWNhJywgJ0hlbHZldGljYSddLAogICAgICAgIFsnVmVyZGFuYScsICdWZXJkYW5hJ10sCiAgICAgICAgWyciLlNGTlNEaXNwbGF5LVJlZ3VsYXIiJywgJ1NhbiBGcmFuY2lzY28nXSwKICAgICAgXSwKICAgICAgY2hpbmVzZTogWwogICAgICAgIFsnIlNpbVN1biIsICLlrovkvZMiJywgJ+S4reaYk+Wui+S9kyddLAogICAgICAgIFsnIkhlaXRpIFNDIiwgIum7keS9ky3nroAiJywgJ+m7keS9ky3nroAnXSwKICAgICAgICBbJyJQaW5nRmFuZyBTQyIsICLoi7nmlrkt566AIicsICfoi7nmlrkt566AJ10sCiAgICAgICAgWyciU1RIZWl0aSIsICLljY7mlofpu5HkvZMiJywgJ+WNjuaWh+m7keS9kyddLAogICAgICAgIFsnIkhpcmFnaW5vIFNhbnMgR0IiLCAi5Yas6Z2S6buR5L2T566A5L2T5Lit5paHIicsICflhqzpnZLpu5HkvZMnXSwKICAgICAgICBbJyJNaWNyb3NvZnQgWWFIZWkiLCAi5b6u6L2v6ZuF6buRIicsICflvq7ova/pm4Xpu5EnXSwKICAgICAgICBbJyJEZW5nWGlhbiIsICLnrYnnur8iJywgJ+etiee6vyddLAogICAgICAgIFsnIldlblF1YW5ZaSBaZW4gSGVpIiwgIuaWh+aziempv+ato+m7kSInLCAn5paH5rOJ6am/5q2j6buRJ10sCiAgICAgICAgWyciV2VuUXVhbllpIE1pY3JvIEhlaSIsICLmlofms4npqb/lvq7nsbPpu5EiJywgJ+aWh+aziempv+W+ruexs+m7kSddLAogICAgICAgIFsnIk5vdG8gU2FucyBDSksgU0MiLCAiU291cmNlIEhhbiBTYW5zIFNDIiwgIuaAnea6kOm7keS9kyBTQyInLCAn5oCd5rqQ6buR5L2TJ10sCiAgICAgICAgWyciTm90byBTZXJpZiBDSksgU0MiLCAiU291cmNlIEhhbiBTZXJpZiBTQyIsICLmgJ3mupDlrovkvZMgU0MiJywgJ+aAnea6kOWui+S9kyddLAogICAgICAgIFsnIlNpbUthaSIsICLmpbfkvZMiJywgJ+S4reaYk+alt+S9kyddLAogICAgICAgIFsnIlBNaW5nTGlVIiwgIuaWsOe0sOaYjumrlCInLCAn5paw57Sw5piO6auUJ10sCiAgICAgICAgWyciTWluZ0xpVSIsICLntLDmmI7pq5QiJywgJ+e0sOaYjumrlCddLAogICAgICAgIFsnIkhlaXRpIFRDIiwgIum7kemrlC3nuYEiJywgJ+m7kemrlC3nuYEnXSwKICAgICAgICBbJyJQaW5nRmFuZyBUQyIsICLomIvmlrkt57mBIicsICfomIvmlrkt57mBJ10sCiAgICAgICAgWyciUGluZ0ZhbmcgSEsiLCAi6JiL5pa5Lea4ryInLCAn6JiL5pa5Lea4ryddLAogICAgICAgIFsnIkxpSGVpIFBybyBNZWRpdW0iLCAi5YS36buRIFBybyInLCAn5YS36buRIFBybyddLAogICAgICAgIFsnIk1pY3Jvc29mdCBKaGVuZ0hlaSIsICLlvq7ou5/mraPpu5Hpq5QiJywgJ+W+rui7n+ato+m7kemrlCddLAogICAgICAgIFsnIk5vdG8gU2FucyBDSksgVEMiLCAiU291cmNlIEhhbiBTYW5zIFRDIiwgIuaAnea6kOm7kemrlCBUQyInLCAn5oCd5rqQ6buR6auUJ10sCiAgICAgICAgWyciTm90byBTZXJpZiBDSksgVEMiLCAiU291cmNlIEhhbiBTZXJpZiBUQyIsICLmgJ3mupDlrovpq5QgVEMiJywgJ+aAnea6kOWui+mrlCddLAogICAgICAgIFsnIkRGS2FpLVNCIiwgIkJpYXVLYWkiLCAi5qiZ5qW36auUIicsICfmqJnmpbfpq5QnXSwKICAgICAgXSwKICAgIH07CiAgICBhd2FpdCBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhjaGVja2xpc3QpLm1hcChhc3luYyBrZXkgPT4gewogICAgICBjb25zdCBhdmFpbGFibGUgPSBhd2FpdCBQcm9taXNlLmFsbChjaGVja2xpc3Rba2V5XS5tYXAoKFtjc3NOYW1lXSkgPT4gY2hlY2tGb250KGNzc05hbWUpKSk7CiAgICAgIGNoZWNrbGlzdFtrZXldID0gY2hlY2tsaXN0W2tleV0uZmlsdGVyKChmb250LCBpbmRleCkgPT4gYXZhaWxhYmxlW2luZGV4XSk7CiAgICB9KSk7CiAgICByZXR1cm4gY2hlY2tsaXN0OwogIH0pOwoKCiAgZm9udExpc3QuZ2V0ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGNoZWNrQWxsRm9udHMoKTsKICB9OwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiByZXBsYWNlbWVudCBvZiB5YW9mYW5nOi8vY29udGVudC9iYWNrZW5kL3ZpZXdpbWFnZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZiA9IHdpbmRvdy55YXdmIHx8IHt9OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGNvbnN0IGltYWdlVmlld2VyID0geWF3Zi5pbWFnZVZpZXdlciA9IHt9OwoKICBpMThuLnZpZXdPcmlnaW5hbFRpdGxlID0gewogICAgY246ICfmn6XnnIvlm77niYcgLSBZQVdGJywKICAgIHR3OiAn5qqi6KaW5ZyW54mHIC0gWUFXRicsCiAgICBlbjogJ1ZpZXcgSW1hZ2VzIC0gWUFXRicsCiAgfTsKCiAgY29uc3QgcGFnZSA9IGluZm8gPT4gYAo8IURPQ1RZUEUgaHRtbD4KPGh0bWw+CjxoZWFkPjxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPjx0aXRsZT4ke2kxOG4udmlld09yaWdpbmFsVGl0bGV9PC90aXRsZT48c3R5bGU+CiAgYm9keSwgI2Nob3NlIHsgYmFja2dyb3VuZDogIzIyMjsgfQogIGJvZHksIGJvZHkgKiB7IC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IHVzZXItc2VsZWN0OiBub25lOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IH0KICAjdmlld2VyIHsgYmFja2dyb3VuZDogaHNsKDAsIDAlLCA5MCUpOyB9CiAgLm5vcm1hbCAjdmlld2VyIHsgd2lkdGg6IGF1dG87IGhlaWdodDogYXV0bzsgY3Vyc29yOiBhdXRvOyB9CiAgLm92ZXIgI3ZpZXdlci5sYXJnZSB7IHdpZHRoOiBhdXRvOyBoZWlnaHQ6IGF1dG87IGN1cnNvcjogem9vbS1vdXQ7IH0KICAub3ZlciAjdmlld2VyLmZpdCB7IG1heC13aWR0aDogMTAwdnc7IG1heC1oZWlnaHQ6IGNhbGMoMTAwJSAtIDIwcHgpOyBjdXJzb3I6IHpvb20taW47IH0KICAjY29udGFpbmVyIHsgdG9wOiAwOyBvdmVyZmxvdzogYXV0bzsgd2lkdGg6IDEwMHZ3OyBoZWlnaHQ6IGNhbGMoMTAwdmggLSAxMDFweCk7IH0KICAjY29udGFpbmVyLmxlZnQsICNjb250YWluZXIubGVmdCAjdmlld2VyIHsgY3Vyc29yOiB1cmwoImh0dHBzOi8vaW1nLnQuc2luYWpzLmNuL3Q2L3N0eWxlL2ltYWdlcy9jb21tb24vcGljX3ByZXYuY3VyIiksIGF1dG87IH0KICAjY29udGFpbmVyLnJpZ2h0LCAjY29udGFpbmVyLnJpZ2h0ICN2aWV3ZXIgeyBjdXJzb3I6IHVybCgiaHR0cHM6Ly9pbWcudC5zaW5hanMuY24vdDYvc3R5bGUvaW1hZ2VzL2NvbW1vbi9waWNfbmV4dC5jdXIiKSwgYXV0bzsgfQogIC5zaW5nbGUgI2NvbnRhaW5lciwgLnNpbmdsZSAjaW1nYXJlYSB7IGhlaWdodDogMTAwdmg7IH0KICAjaW1nYXJlYSB7IGRpc3BsYXk6IHRhYmxlLWNlbGw7IHBvc2l0aW9uOiByZWxhdGl2ZTsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgdGV4dC1hbGlnbjogY2VudGVyOyB3aWR0aDogMTAwdnc7IGhlaWdodDogY2FsYygxMDB2aCAtIDEwMXB4KTsgfQogICNjaG9zZSB7IHBvc2l0aW9uOiBmaXhlZDsgY2xlYXI6IGJvdGg7IHdpZHRoOiAxMDAlOyBib3R0b206IDA7IGhlaWdodDogMTAwcHg7IG92ZXJmbG93OiBhdXRvOyBvdmVyZmxvdy14OiBoaWRkZW47IGJvcmRlci10b3A6IDFweCBzb2xpZCAjYWFhOyB9CiAgLnNpbmdsZSAjY2hvc2UgeyBkaXNwbGF5OiBub25lOyB9CiAgI2Nob3NlIGEgeyBkaXNwbGF5OiBibG9jazsgaGVpZ2h0OiA4MHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IHdpZHRoOiA4MHB4OyBmbG9hdDogbGVmdDsgbWFyZ2luOiAxMHB4OyB9CiAgI2Nob3NlIGEuY3VycmVudCB7IG91dGxpbmU6IDJweCBzb2xpZCByZWQ7IH0KICAjY2hvc2UgaW1nIHsgbWF4LWhlaWdodDogODBweDsgbWF4LXdpZHRoOiA4MHB4OyB9CiAgQC1tb3otZG9jdW1lbnQgdXJsLXByZWZpeCgpIHsKICAgIGJvZHkgeyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoImNocm9tZTovL2dsb2JhbC9za2luL21lZGlhL2ltYWdlZG9jLWRhcmtub2lzZS5wbmciKTsgIH0KICAgICN2aWV3ZXIgeyBiYWNrZ3JvdW5kOiBoc2woMCwgMCUsIDkwJSkgdXJsKCJjaHJvbWU6Ly9nbG9iYWwvc2tpbi9tZWRpYS9pbWFnZWRvYy1saWdodG5vaXNlLnBuZyIpIHJlcGVhdCBzY3JvbGwgMCAwOyB9CiAgfQo8L3N0eWxlPjxzY3JpcHQ+Y29uc3QgaW5mbyA9ICR7SlNPTi5zdHJpbmdpZnkoaW5mbyl9Ozwvc2NyaXB0PjwvaGVhZD4KPGJvZHk+PGRpdiBpZD0iY29udGFpbmVyIiB0YWJpbmRleD0iMSI+PGRpdiBpZD0iaW1nYXJlYSIgdGFiaW5kZXg9Ii0xIj48aW1nIGlkPSJ2aWV3ZXIiIGNsYXNzPSJsYXJnZSIgLz48L2Rpdj48L2Rpdj48ZGl2IGlkPSJjaG9zZSIgdGFiaW5kZXg9Ii0xIj48c2NyaXB0PgogIGluZm8uaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24gKGltYWdlLCBpKSB7CiAgICBjb25zdCB1cmwgPSBpbWFnZS5yZXBsYWNlKC9sYXJnZS8sICdzcXVhcmUnKTsKICAgIGRvY3VtZW50LndyaXRlKCc8YSBpZD0iaW1nJyArIGkgKyAnIiBocmVmPSJqYXZhc2NyaXB0OjsiIG9uY2xpY2s9InJldHVybiBnb3RvKCcgKyBpICsgJykgJiYgZmFsc2UiPjxpbWcgc3JjPSInICsgdXJsICsgJyI+PC9hPicpOwogIH0pOwo8L3NjcmlwdD48L2Rpdj48c2NyaXB0PgogIGZ1bmN0aW9uIHJlc2l6ZSgpIHsKICAgIGNvbnN0IHdpZHRoID0gdmlld2VyLm5hdHVyYWxXaWR0aDsKICAgIGNvbnN0IGhlaWdodCA9IHZpZXdlci5uYXR1cmFsSGVpZ2h0OwogICAgaWYgKHdpZHRoID4gY29udGFpbmVyLmNsaWVudFdpZHRoIHx8IGhlaWdodCA+IGNvbnRhaW5lci5jbGllbnRIZWlnaHQpIGltZ2FyZWEuY2xhc3NOYW1lID0gJ292ZXInOwogICAgZWxzZSBpbWdhcmVhLmNsYXNzTmFtZSA9ICdub3JtYWwnOwogICAgZm9jdXMoKTsKICB9CiAgZnVuY3Rpb24gc2hvdygpIHsKICAgIGNvbnN0IHVybCA9IGluZm8uaW1hZ2VzW2luZm8uY3VycmVudF07CiAgICBpZiAodmlld2VyLnNyYyA9PT0gdXJsKSByZXR1cm47CiAgICB2aWV3ZXIuc3JjID0gJyc7CiAgICB2aWV3ZXIuc3JjID0gdXJsOwogICAgY29udGFpbmVyLnNjcm9sbFRvcCA9IDA7CiAgICBjb250YWluZXIuc2Nyb2xsTGVmdCA9IDA7CiAgICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNjaG9zZSBhJykpLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgICAgaWYgKGEuaWQgPT09ICdpbWcnICsgaW5mby5jdXJyZW50KSBhLmNsYXNzTmFtZSA9ICdjdXJyZW50JzsKICAgICAgZWxzZSBhLmNsYXNzTmFtZSA9ICcnOwogICAgfSk7CiAgICBmb2N1cygpOwogIH0KICBmdW5jdGlvbiBmb2N1cygpIHsgY29udGFpbmVyLmZvY3VzKCk7IH0KICBpZiAoaW5mby5pbWFnZXMubGVuZ3RoID09PSAxKSBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZSA9ICdzaW5nbGUnOwogIGZ1bmN0aW9uIHByZXZJbWcoKSB7IGdvdG8oaW5mby5jdXJyZW50IC0gMSk7IH0KICBmdW5jdGlvbiBuZXh0SW1nKCkgeyBnb3RvKGluZm8uY3VycmVudCArIDEpOyB9CiAgZnVuY3Rpb24gZ290byhuKSB7CiAgICB3aGlsZSAobiA8IDApIG4gKz0gaW5mby5pbWFnZXMubGVuZ3RoOwogICAgbiA9IG4gJSBpbmZvLmltYWdlcy5sZW5ndGg7CiAgICBpbmZvLmN1cnJlbnQgPSBuOwogICAgc2hvdygpOwogIH0KICBmdW5jdGlvbiBjaGVja0xSKHgpIHsKICAgIGlmIChpbmZvLmltYWdlcy5sZW5ndGggPT09IDEpIHJldHVybiAnbWlkJzsKICAgIGxldCBwb3MgPSAnbWlkJywgdyA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDsKICAgIGlmICh4IDwgMTAwICYmIHggPCB3ICogMC4yKSBwb3MgPSAnbGVmdCc7CiAgICBpZiAoeCA+IHcgLSAxMDAgJiYgeCA+IHcgKiAwLjgpIHBvcyA9ICdyaWdodCc7CiAgICBpZiAoY29udGFpbmVyLmNsYXNzTmFtZSAhPT0gcG9zKSBjb250YWluZXIuY2xhc3NOYW1lID0gcG9zOwogICAgcmV0dXJuIHBvczsKICB9CiAgZnVuY3Rpb24gaW5pdEV2ZW50cygpIHsKICAgIHZpZXdlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7IHNob3coKTsgc2V0VGltZW91dChyZXNpemUsIDApOyB9OwogICAgaW1nYXJlYS5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uIChlKSB7IGNoZWNrTFIoZS5jbGllbnRYKTsgfTsKICAgIGltZ2FyZWEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICBjb25zdCBwb3MgPSBjaGVja0xSKGUuY2xpZW50WCk7CiAgICAgIGlmIChwb3MgPT09ICdsZWZ0JykgcHJldkltZygpOyBlbHNlIGlmIChwb3MgPT09ICdyaWdodCcpIG5leHRJbWcoKTsgZWxzZSByZXR1cm4gdHJ1ZTsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgZm9jdXMoKTsKICAgIH0sIHRydWUpOwogICAgdmlld2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICBpZiAoaW1nYXJlYS5jbGFzc05hbWUgPT09ICdub3JtYWwnKSByZXR1cm47CiAgICAgIGlmICh2aWV3ZXIuY2xhc3NOYW1lID09PSAnbGFyZ2UnKSB2aWV3ZXIuY2xhc3NOYW1lID0gJ2ZpdCc7CiAgICAgIGVsc2Ugdmlld2VyLmNsYXNzTmFtZSA9ICdsYXJnZSc7CiAgICB9KTsKICAgIHdpbmRvdy5vbnJlc2l6ZSA9IHJlc2l6ZTsKICAgIHdpbmRvdy5vbmtleWRvd24gPSBmdW5jdGlvbiAoZSkgewogICAgICBjb25zdCBrZXkgPSBlLmtleUNvZGUsIG4gPSBrZXkgJiAxNTsKICAgICAgaWYgKGtleSA9PT0gMzMpIHByZXZJbWcoKTsgZWxzZSBpZiAoa2V5ID09PSAzNCkgbmV4dEltZygpOwogICAgICBlbHNlIGlmIChbNDgsIDk2XS5pbmRleE9mKGtleSAmIC0xNikgIT09IC0xKSB7CiAgICAgICAgaWYgKG4gPiAwICYmIG4gPD0gaW5mby5pbWFnZXMubGVuZ3RoKSBnb3RvKG4gLSAxKTsKICAgICAgfSBlbHNlIHJldHVybjsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgfTsKICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7IHNob3coKTsgZm9jdXMoKTsgfTsKICAgIGNvbnRhaW5lci5vbmJsdXIgPSBmdW5jdGlvbiAoKSB7IHNldFRpbWVvdXQoZm9jdXMsIDApOyB9OwogIH0KICBpbml0RXZlbnRzKCk7Cjwvc2NyaXB0PjwvYm9keT4KPC9odG1sPgpgOwoKICBpbWFnZVZpZXdlci5vcGVuID0gZnVuY3Rpb24gKHsgaW1hZ2VzLCBjdXJyZW50IH0pIHsKICAgIGNvbnN0IGh0bWwgPSBwYWdlKHsgaW1hZ2VzLCBjdXJyZW50OiBjdXJyZW50IC0gMSB9KTsKICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbaHRtbF0sIHsgdHlwZTogJ3RleHQvaHRtbCcgfSk7CiAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgd2luZG93Lm9wZW4odXJsKTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7IH0sIDMwMDApOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIGN1c3RvbSBpbXBsZW1lbnRhdGlvbiBiYWNrZW5kL2V4dGVybmFsTWVudQo7IChmdW5jdGlvbiAoKSB7CiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGV4dGVybmFsTWVudSA9IHlhd2YuZXh0ZXJuYWxNZW51ID0ge307CgogIGV4dGVybmFsTWVudS5hZGQgPSBmdW5jdGlvbiAoeyB0aXRsZSwgY2FsbGJhY2sgfSkgewogICAgR00ucmVnaXN0ZXJNZW51Q29tbWFuZCh0aXRsZSwgY2FsbGJhY2spOwogIH07Cn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gaW1wbGVtZW50YXRpb24gZm9yIGNoYXQgcGFnZQo7IChmdW5jdGlvbiAoKSB7Ci8qIGVzbGludC1kaXNhYmxlIGluZGVudCAqLwppZiAoIS9eaHR0cHM6XC9cL2FwaS53ZWliby5jb21cL2NoYXQvLnRlc3QobG9jYXRpb24uaHJlZikpIHJldHVybjsKLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L2NoYXQvaW5pdC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBjb25maWcgPSB5YXdmLmNvbmZpZzsKCiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdCA9IHt9OwoKICBpbml0LnVzZXJDb25maWcgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgIGluaXQuc2V0VXNlckRhdGEgPSBhc3luYyBmdW5jdGlvbiAodXNlckRhdGEpIHsKICAgICAgY29uc3QgaWQgPSB1c2VyRGF0YS5pZDsKICAgICAgYXdhaXQgY29uZmlnLmluaXQoaWQpOwogICAgICByZXNvbHZlKGNvbmZpZy51c2VyKTsKICAgIH07CiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIHJlcGxhY2VtZW50IG9mIHlhb2Zhbmc6Ly9jb250ZW50L2NoYXQvaW5qZWN0LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CgogIDsgKGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IHVzZXJEYXRhVXJsID0gJy93ZWJpbS8yL2FjY291bnQvcHJvZmlsZS9iYXNpYy5qc29uP3NvdXJjZT0yMDk2Nzg5OTMmdD0nICsgRGF0ZS5ub3coKTsKICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgZmV0Y2godXNlckRhdGFVcmwpLnRoZW4ocmVzcCA9PiByZXNwLmpzb24oKSk7CiAgICBpbml0LnNldFVzZXJEYXRhKHVzZXJEYXRhKTsKICB9KCkpOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9jaGF0L3J1bGUuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwoKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgOyAoYXN5bmMgZnVuY3Rpb24gYXZhdGFyU2hhcGUoKSB7CiAgICBjb25zdCB1c2VyQ29uZmlnID0gYXdhaXQgaW5pdC51c2VyQ29uZmlnOwogICAgY29uc3QgaXNFbmFibGVkID0gdXNlckNvbmZpZy5rZXkoJ2xheW91dF9hdmF0YXJfc2hhcGUnKS5nZXQoKTsKICAgIGlmICghaXNFbmFibGVkKSByZXR1cm47CiAgICBjb25zdCBzaGFwZSA9IHVzZXJDb25maWcua2V5KCdsYXlvdXRfYXZhdGFyX3NoYXBlLnNoYXBlJykuZ2V0KCk7CiAgICBpZiAoc2hhcGUgPT09ICdzcXVhcmUnKSB7CiAgICAgIC8vIOaYr+eahO+8jOS7luS7rOWwseaYr+acieeahOaLvOaIkOS6hiBhdmF0YXIg5pyJ55qE5ou85oiQ5LqGIGF2YXRvciDvvJvpobrkvr/kuIDor7TvvIzliY3pnaLkuIDkuKrmi7zlvpflr7kKICAgICAgY3NzLmFwcGVuZChgCiNhcHAgLmF2YXRhciwgI2FwcCAuYXZhdG9yIHsgYm9yZGVyLXJhZGl1czogMDsgfQpgKTsKICAgIH0KICB9KCkpOwoKICBjb25zdCBkaXNhYmxlVW5sb2FkUHJvbXB0ID0gZnVuY3Rpb24gKCkgewogICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gZGlzYWJsZUJlZm9yZVVubG9hZCgpIHsKICAgICAgaWYgKCF3aW5kb3cub25iZWZvcmV1bmxvYWQpIHsKICAgICAgICBzZXRUaW1lb3V0KGRpc2FibGVCZWZvcmVVbmxvYWQsIDEwMCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2luZG93Lm9uYmVmb3JldW5sb2FkID0gbnVsbDsKICAgICAgICB3aW5kb3cub251bmxvYWQgPSBudWxsOwogICAgICB9CiAgICB9KTsKICB9OwoKICA7IChhc3luYyBmdW5jdGlvbiAoKSB7CiAgICBjb25zdCB1c2VyQ29uZmlnID0gYXdhaXQgaW5pdC51c2VyQ29uZmlnOwoKICAgIGNvbnN0IHJ1bGVzID0gW3sKICAgICAga2V5OiAnY2xlYW5faWNvbnNfYXBwcm92ZScsCiAgICAgIGFpbml0OiAoKSA9PiBjc3MuYXBwZW5kKCcuYXZhdG9yLWJveCAubS1pY29uIGltZ1tzcmMkPSJnZz09Il0geyBkaXNwbGF5OiBub25lOyB9JyksCiAgICB9LCB7CiAgICAgIGtleTogJ2NsZWFuX2ljb25zX2FwcHJvdmVfY28nLAogICAgICBhaW5pdDogKCkgPT4gY3NzLmFwcGVuZCgnLmF2YXRvci1ib3ggLm0taWNvbiBpbWdbc3JjJD0iUW1DQyJdIHsgZGlzcGxheTogbm9uZTsgfScpLAogICAgfSwgewogICAgICBrZXk6ICdjbGVhbl9pY29uc19jbHViJywKICAgICAgYWluaXQ6ICgpID0+IGNzcy5hcHBlbmQoJy5hdmF0b3ItYm94IC5tLWljb24gaW1nW3NyYyQ9IkNZSUkiXSB7IGRpc3BsYXk6IG5vbmU7IH0nKSwKICAgIH0sIHsKICAgICAga2V5OiAnY2xlYW5faWNvbnNfdl9naXJsJywKICAgICAgYWluaXQ6ICgpID0+IGNzcy5hcHBlbmQoJy5hdmF0b3ItYm94IC5tLWljb24gaW1nW3NyYyQ9IllJST0iXSB7IGRpc3BsYXk6IG5vbmU7IH0nKSwKICAgIH0sIHsKICAgICAga2V5OiAnY2xlYW5faWNvbnNfYmlnZnVuJywKICAgICAgYWluaXQ6ICgpID0+IGNzcy5hcHBlbmQoJyNhcHAgLmljb24tYXJlYSA+IGkudGYgeyBkaXNwbGF5OiBub25lOyB9JyksCiAgICB9XTsKICAgIHJ1bGVzLmZvckVhY2goKHsga2V5LCBhaW5pdCB9KSA9PiB7CiAgICAgIGNvbnN0IGlzRW5hYmxlZCA9IHVzZXJDb25maWcua2V5KGtleSkuZ2V0KCk7CiAgICAgIGlmIChpc0VuYWJsZWQpIGFpbml0KCk7CiAgICB9KTsKCiAgICBpZiAoc2VsZiAhPT0gdG9wIHx8IHVzZXJDb25maWcua2V5KCdjaGF0X3BhZ2VfZGlzYWJsZV91bmxvYWRfcHJvbXB0JykuZ2V0KCkpIHsKICAgICAgZGlzYWJsZVVubG9hZFByb21wdCgpOwogICAgfQoKICB9KCkpOwoKfSgpKTsKLy8jZW5kcmVnaW9uCnRocm93IG5ldyBFcnJvcignWUFXRiB8IGNoYXQgcGFnZSBmb3VuZCwgc2tpcCBmb2xsb3dpbmcgZXhlY3V0aW9ucycpOwovKiBlc2xpbnQtZW5hYmxlIGluZGVudCAqLwp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGVzZXQvcnVsZS5qcwovKioKICog6L+Z5Liq5paH5Lu255So5LqO5o+P6L+w5LiA5p2h6KeE5YiZCiAqCiAqIHlhd2YucnVsZS48cnVsZVR5cGU+KGRldGFpbHM6IG9iamVjdCkg5paw5bu65LiA5p2h6KeE5YiZCiAqIDxydWxlVHlwZT46CiAqICAgUnVsZTog5pmu6YCa6KeE5YiZ77yM5pmu6YCa6KeE5YiZ5bqU5b2T5bGe5LqO5LiA5LiqIEdyb3VwCiAqICAgVGV4dDog57qv5paH5pys77yI5LuF55So5LqO5bGV56S677yM5LiA6Iis5LiN5om/5ouF5Yqf6IO977yJ77yM57qv5paH5pys5piv5pmu6YCa6KeE5YiZ55qE5LiA5Liq54m55L6LCiAqICAgVGFiOiDmoIfnrb7pobXvvIzmmK/mnIDpobblsYLnmoTop4TliJnvvIzlhbbkuK3ljIXlkKvoi6XlubIgR3JvdXAKICogICBHcm91cDog6KeE5YiZ5YiG57uE77yI5bCP5qCH6aKY77yJ77yM5bGe5LqO5LiA5LiqIFRhYu+8jOWFtuS4reWMheWQq+iLpeW5siBSdWxlCiAqCiAqIOaZrumAmuinhOWImSBSdWxlIOaYr+S4gOS4qiBCb29sZWFuQ29uZmlnSXRlbe+8jOS8mum7mOiupOW4puS4gOS4quW8gOWFswogKiAgIOWmguaenOS4jeW4jOacm+aYvuekuuW8gOWFs++8jOWImemcgOimgeWcqCBkZXRhaWxzIOmHjOaMh+WumiBhbHdheXM6IHRydWUg5q2k5pe26K6k5Li6CiAqCiAqIENvbmZpZ0l0ZW0g55So5LqO5o+P6L+w5LiA5Liq55WM6Z2i5YWD57Sg77yM5oiW5LiA5Liq5a+55bqU55qE6K6+572u6aG5CiAqIHlhd2YucnVsZS5jbGFzcy5Db25maWdJdGVtIOeahOaehOmAoOWHveaVsOS4gOiIrOS4jemcgOimgeS7juWklumDqOiwg+eUqAogKiDkuIDmnaEgUnVsZSDmiJbogIUgUnVsZSDnmoQgcmVmIOWxnuaAp++8jOaYr+S4gOS4qiBDb25maWdJdGVtCiAqIHJlZiDlsZ7mgKfkuIvnmoQgQ29uZmlnSXRlbSDnmoTnsbvlnovnlLHmnoTpgKDml7blr7nosaHnmoQgdHlwZSDlsZ7mgKflhrPlrprvvJoKICogICBib29sZWFuOiDlpI3pgInmoYYKICogICBzZWxlY3Q6IOS4i+aLieWNlemAieahhgogKiAgIG51bWJlcjog5pWw5a2X6L6T5YWl5qGGCiAqICAgcmFuZ2U6IOaVsOWtl+i+k+WFpeahhuWSjOS4gOS4quiMg+WbtOmAieaLqQogKiAgIGJ1YmJsZTog5o+Q56S65paH5a2XCiAqICAgc3RyaW5nczog5aSa5Liq5a2X56ym5LiyCiAqICAgcmVnZXhlbjog5aSa5Liq5q2j5YiZ6KGo6L6+5byPCiAqICAgdXNlcnM6IOWkmuS4queUqOaIt++8iGlk77yJCiAqICAgdXNlcm5hbWVzOiDlpJrkuKrnlKjmiLflkI0KICogICB0b3BpY3M6IOWkmuS4quivnemimAogKiAgIGtleTog5LiA5Liq6ZSu55uY5oyJ6ZSuCiAqCiAqIENvbmZpZ0l0ZW0g55qE5bGe5oCn5ZKM5pa55rOV5YyF5ous77yaCiAqIOaYvuekuuebuOWFswogKiAgIHRlbXBsYXRlKCkg77yI5Y+v6YCJ77yJIOeUqOS6juaYvuekuueahOaooeadvwogKiAgIHJlbmRlcihpc1Jvb3Q6IGJvb2xlYW4pIO+8iOWPr+mAie+8iSDmmL7npLrnmoTlh73mlbDvvIzlpoLmnpznvLrnnIHliJnkvb/nlKggdGVtcGxhdGUg5bGe5oCn5qC55o2u6KeE5YiZ55Sf5oiQCiAqICAgYWZ0ZXJSZW5kZXIoY29udGFpbmVyOiBFbGVtZW50KSDvvIjlj6/pgInvvIkg5Zyo6LCD55SoIHJlbmRlciDlkI7lj6/nlKjov5nkuKrlh73mlbDlr7nkuqfnlJ/nmoQgRE9NIOWBmui/m+S4gOatpeS/ruaUuQogKiAgIHRleHQoaXNSb290OiBib29sZWFuKSDvvIjlj6/pgInvvIkg5pi+56S655qE5paH5pys77yM5aaC5p6c57y655yB5YiZ5L2/55SoIHRlbXBsYXRlIOaIliByZW5kZXIg5qC55o2u6KeE5YiZ55Sf5oiQCiAqIOiuvue9ruebuOWFswogKiAgIGluaXRpYWwoKTogYW55IOiuvue9rueahOm7mOiupOWAvAogKiAgIG5vcm1hbGl6ZSh2YWx1ZTogYW55KTogYW55IOWvueiuvue9ruWAvOi/m+ihjOinhOiMg+WMlgogKiAgIGdldENvbmZpZygpOiBhbnkg6I635Y+W6K6+572uCiAqICAgc2V0Q29uZmlnKHZhbHVlOiBhbnkpOiBhbnkg5YaZ5YWl5paw6K6+572uCiAqICAgYWRkQ29uZmlnTGlzdGVuZXIoY2FsbGJhY2s6IChuZXdWYWx1ZTogYW55LCBvbGRWYWx1ZTogYW55KSA9PiB2b2lkKSDlvZPorr7nva7mlLnlj5jml7blm57osIMKICogICByZW1vdmVDb25maWdMaXN0ZW5lcihjYWxsYmFjaykg5Y+W5raI5re75Yqg55qE6K6+572u5pS55Y+Y55qE5Zue6LCDCiAqCiAqIEJvb2xlYW5Db25maWdJdGVtIOe7p+aJv+iHqiBDb25maWdJdGVtIOWMheaLrOWxnuaAp+WSjOaWueazle+8mgogKiAgIGFsd2F5cygpOiBib29sZWFuID0gZmFsc2Ug5aaC5p6c6K+l5bGe5oCn5Li6IHRydWXvvIzpgqPkuYjmmL7npLrml7bkuI3luKblpI3pgInmoYbvvIzmsqHmnInlr7nlupTnmoTorr7nva7pobnvvIzmo4Dmn6Xml7bmgLvmmK/lt7LlkK/nlKgKICogICBpc0VuYWJsZWQoKTogYm9vbGVhbiDmo4Dmn6XmmK/lkKblt7LlkK/nlKgKICoKICogU2VsZWN0Q29uZmlnSXRlbSDnu6fmib/oh6ogQ29uZmlnSXRlbQogKiAgIOaMh+WumiBzZWxlY3Qg5bGe5oCn5Li6IEFycmF5PHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH0+77yM5Y+v5Lul55So5LqO5riy5p+T6YCJ5oup5qGGCiAqCiAqIE51bWJlckNvbmZpZ0l0ZW0g57un5om/6IeqIENvbmZpZ0l0ZW0KICogICDmjIflrpogbWluLCBtYXgsIHN0ZXAg5bGe5oCn77yM57G75Z6LIG51bWJlcu+8jOWPr+eUqOS6jui+k+WFpeS4gOS4quaVsOWtlwogKgogKiBSYW5nZUNvbmZpZ0l0ZW0g57un5om/6IeqIE51bWJlckNvbmZpZ0l0ZW0KICogICDnm7jmr5QgTnVtYmVyIOWkmuS6huS4gOS4quaLluWKqOadoeS7peaWueS+v+i+k+WFpQogKgogKiBCdWJibGVDb25maWdJdGVtIOe7p+aJv+iHqiBDb25maWdJdGVtCiAqICAg5LiN5a2Y5YKo5pWw5o2u77yM5LuF55So5p2l5bGV56S65LiA5Liq5rCU5rOh5by556qXCiAqICAg5L2/55SoIGljb24g5bGe5oCn5o+P6L+w5Zu+5qCH57G75Z6L77yM5qih5p2/5YaF5a655bCG5Lya5riy5p+T5Yiw5rCU5rOh5LitCiAqCiAqIFJ1bGVJdGVtIOe7p+aJv+iHqiBCb29sZWFuQ29uZmlnSXRlbSDljIXmi6zlsZ7mgKflkozmlrnms5XvvJoKICogICBwYXJlbnQg5p6E6YCg5pe25aaC5oyH5a6aIHBhcmVudO+8jOWImeS8muWwhuivpeinhOWImeWKoOWFpeWIsOWFtueItuS6sueahOWtkOmbhuWQiOS4rQogKiAgIGNoaWxkcmVuOiBBcnJheTxSdWxlSXRlbT4g5p6E6YCg5pe26Ieq5Yqo5Yid5aeL5YyW55qE5pWw57uE77yM55So5LqO57u05oqk5YW25a2Q6ZuG5ZCICiAqICAgdHlwZTogc3RyaW5nID0gIm5vcm1hbCI6IOinhOWImeeahOexu+Wei++8jOeUqOS6juagh+iusCBUYWIg5ZKMIEdyb3VwCiAqCiAqIFRhYiwgR3JvdXAg57un5om/6IeqIFJ1bGVJdGVt77yaCiAqICAg6L+Z5Lik5Liq5Lya6Ieq5Yqo5bim5pyJIGFsd2F5cyA9PiB0cnVl77yM5LiU5pyJ54m55q6K55qEIHR5cGXvvIzmnInnibnmrornmoTmuLLmn5PpgLvovpEKICoKICogUnVsZSDnu6fmib/oh6ogUnVsZUl0ZW3vvIzlnKjlpJbpg6jmnoTpgKDml7bkvb/nlKggeWF3Zi5ydWxlLlJ1bGUg5p6E6YCg5Zmo5p6E6YCg77yI5peg6ZyAIG5ldyDlhbPplK7lrZfvvInvvIzljIXmi6zvvJoKICogICBjc3M6IHN0cmluZyB8ICgpID0+IHN0cmluZyDov5nmnaHop4TliJnms6jlhoznmoQgQ1NT77yM5peg6K666KeE5YiZ5piv5ZCm5ZCv55So5Z2H5Lya55Sf5pWICiAqICAgYWNzczogc3RyaW5nIHwgKCkgPT4gc3RyaW5nIOi/meadoeinhOWImeazqOWGjOeahCBDU1PvvIzku4XlkK/nlKjor6XmnaHop4TliJnlkI7nlJ/mlYgKICogICBpbml0OiAoKSA9PiB2b2lkIOW9k+WIneWni+WMluaXtuiwg+eUqO+8jOaXoOiuuuinhOWImeaYr+WQpuWQr+eUqOWdh+S8mueUn+aViAogKiAgIGFpbml0OiAoKSA9PiB2b2lkIOW9k+WIneWni+WMluaXtuiwg+eUqO+8jOS7heWQr+eUqOivpeadoeinhOWImeWQjueUn+aViAogKgogKiBUZXh0IOe7p+aJv+iHqiBSdWxl77yM5Zyo5aSW6YOo5p6E6YCg5pe25L2/55SoIHlhd2YucnVsZS5UZXh0IOaehOmAoOWZqOaehOmAoO+8iOaXoOmcgCBuZXcg5YWz6ZSu5a2X77yJ77yaCiAqICAg5a6e546w5LqG54m55q6K55qE5riy5p+T6YC76L6RCiAqCiAqIHlhd2YucnVsZS50YWJzOiBBcnJheTxUYWI+IOeUqOS6jue7tOaKpOaJgOacieazqOWGjOeahOagh+etvumhtQogKiB5YXdmLnJ1bGUucXVlcnkoewogKiAgIGJhc2U6IEFycmF5PFJ1bGVJdGVtPiA9IHlhd2YucnVsZS50YWJzCiAqIH0pOiBBcnJheTxSdWxlPiDnlKjkuo7moLnmja7nrZvpgInmnaHku7bliJflh7rlr7nlupTnmoTop4TliJkKICovCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwoKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IGNvbmZpZyA9IHlhd2YuY29uZmlnOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdDsKCiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CiAgY29uc3QgdWkgPSB1dGlsLnVpOwogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgcHJpb3JpdHkgPSB1dGlsLnByaW9yaXR5OwogIGNvbnN0IGtleWJvYXJkID0gdXRpbC5rZXlib2FyZDsKCiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZSA9IHt9OwogIGNvbnN0IHJ1bGVzID0geWF3Zi5ydWxlcyA9IHt9OwogIGNvbnN0IHRhYnMgPSBydWxlLnRhYnMgPSBbXTsKCiAgcnVsZXMuYWxsID0gbmV3IE1hcCgpOwogIHJ1bGUuY2xhc3MgPSB7fTsKICBydWxlLnR5cGVzID0ge307CgogIC8qKgogICAqIOi/memHjOe7tOaKpOS4gOS4quWfuuacrOeahOiuvue9rumhuQogICAqIOaIkeS7rOWcqOi/meS4gOWxgue7tOaKpO+8mgogICAqICAg5Z+65LqOIHRlbXBsYXRlIOWxnuaAp+eahOmAmueUqOa4suafk+mAu+i+kQogICAqICAg5Z+65LqOIHJlZiDlsZ7mgKfnmoTniLblrZDlhbPns7vvvIjnlKjkuo7muLLmn5PvvIkKICAgKiBAY29uc3RydWN0b3IKICAgKiBAcGFyYW0ge29iamVjdH0gc2VsZgogICAqLwogIGNvbnN0IEJhc2VDb25maWdJdGVtID0gZnVuY3Rpb24gQmFzZUNvbmZpZ0l0ZW0oc2VsZikgewogICAgaWYgKCFzZWxmLnJlZikgc2VsZi5yZWYgPSB7fTsKICAgIE9iamVjdC5rZXlzKHNlbGYucmVmKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgIGlmIChzZWxmLnJlZltrZXldIGluc3RhbmNlb2YgQmFzZUNvbmZpZ0l0ZW0pIHJldHVybjsKICAgICAgaWYgKCFzZWxmLnJlZltrZXldLmlkKSBzZWxmLnJlZltrZXldLmlkID0ga2V5OwogICAgICBzZWxmLnJlZltrZXldID0gY29uZmlnSXRlbUJ1aWxkZXIoc2VsZi5yZWZba2V5XSwgc2VsZik7CiAgICB9KTsKICAgIC8vIOWmguaenOS9v+eUqCBPYmplY3QuYXNzaWduIOWwhiBzZWxmIOS4iueahOWGheWuueaLt+i0neWIsCB0aGlzIOS4igogICAgLy8gICDlsIbkvJrkuKLlpLEgc2VsZiDkuIrnmoTmiYDmnInnmoQgZ2V0dGVyIC8gc2V0dGVyCiAgICAvLyAgIOS4lOW9k+WOn+Wei+S4iuaciSBzZXR0ZXIg5pe25Lya5Y+R55Sf6ZSZ6K+vCiAgICAvLyDlm6DmraTmiJHku6zkuLogc2VsZiDorr7nva7mraPnoa7nmoQgX19wcm90b19f77yM5bm255u05o6l6L+U5ZueIHNlbGYKICAgIC8vIOWPquimgeWtkOexu+S4jeWcqCBzdXBlciDkuYvliY3orr/pl64gdGhpc++8jOi/meagt+WBmuaYr+W+iOWuieWFqOeahAogICAgLy8g5LiA6Iis5LiN5o6o6I2Q6L+Z56eN5YGa5rOV77yM5L2G5piv6L+Z6YeM55So6LW35p2l5a6e5Zyo5piv5oSf6KeJ5aSq5aW95LqGCiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc2VsZiwgT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpKTsKICAgIHJldHVybiBzZWxmOwogIH07CiAgLyoqCiAgICogQHJldHVybnMge3N0cmluZ30KICAgKi8KICBCYXNlQ29uZmlnSXRlbS5wcm90b3R5cGUudGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnJzsgfTsKCiAgLyoqIEBwYXJhbSB7Ym9vbGVhbn0gZnVsbERvbSAqLwogIGNvbnN0IHBhcnNlVGVtcGxhdGUgPSBmdW5jdGlvbiAoZnVsbERvbSkgewogICAgLyoqCiAgICAgKiBAdHlwZWRlZiB7eyB0eXBlOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfX0gVGVtcGxhdGVUb2tlbgogICAgICovCiAgICAvKiogQHR5cGUgeyh0ZW1wbGF0ZTogc3RyaW5nKSA9PiBBcnJheTxUZW1wbGF0ZVRva2VuPn0gKi8KICAgIGNvbnN0IHRva2VuaXplID0gZnVuY3Rpb24gKHRlbXBsYXRlKSB7CiAgICAgIGNvbnN0IHBhcnNlUmVnID0gbmV3IFJlZ0V4cChbCiAgICAgICAgU3RyaW5nLnJhd2Bce1x7KFteXH1dKylcfVx9YCwgLy8ge3tjaGlsZH19CiAgICAgICAgU3RyaW5nLnJhd2BcW1xbKFteXF1dKylcXVxdYCwgLy8gW1tydWxlXV0KICAgICAgICBTdHJpbmcucmF3YChcfFx8fFx8KWAsIC8vIHx8IG9yIHwKICAgICAgICBTdHJpbmcucmF3YChbXlx8XFtce1wmXSt8JlteO10rOylgLCAvLyB0ZXh0CiAgICAgIF0ubWFwKHJlZyA9PiBgKD86JHtyZWd9KWApLmpvaW4oJ3wnKSwgJ2cnKTsKICAgICAgLyoqIEB0eXBlIHtzdHJpbmc/W11bXX0gKi8KICAgICAgY29uc3QgbWF0Y2hlcyA9IFtdOwogICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgIGNvbnN0IG1hdGNoID0gcGFyc2VSZWcuZXhlYyh0ZW1wbGF0ZSk7CiAgICAgICAgaWYgKCFtYXRjaCkgYnJlYWs7CiAgICAgICAgbWF0Y2hlcy5wdXNoKFsuLi5tYXRjaF0pOwogICAgICB9CiAgICAgIGNvbnN0IHRva2VucyA9IG1hdGNoZXMubWFwKChbXywgLi4udHlwZWRdKSA9PiB7CiAgICAgICAgY29uc3QgdHlwZXMgPSBbJ2NoaWxkJywgJ3J1bGUnLCAnc3BsaXR0ZXInLCAndGV4dCddOwogICAgICAgIGNvbnN0IGluZGV4ID0gdHlwZWQuZmluZEluZGV4KHggPT4geCk7CiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIHsgdHlwZTogdHlwZXNbaW5kZXhdLCB2YWx1ZTogdHlwZWRbaW5kZXhdIH07CiAgICAgIH0pLmZpbHRlcih0b2tlbiA9PiB0b2tlbik7CiAgICAgIHJldHVybiB0b2tlbnM7CiAgICB9OwoKICAgIC8qKiBAdHlwZSB7KHRva2VuczogQXJyYXk8VGVtcGxhdGVUb2tlbj4sIGFjY2VwdFR5cGVzOiBJdGVyYWJsZTxzdHJpbmc+KSA9PiBBcnJheTxUZW1wbGF0ZVRva2VuPn0gKi8KICAgIGNvbnN0IGZpbHRlcmVkVG9rZW5zID0gZnVuY3Rpb24gKHRva2VucywgYWNjZXB0VHlwZXMpIHsKICAgICAgY29uc3QgdHlwZXMgPSBuZXcgU2V0KGFjY2VwdFR5cGVzKTsKICAgICAgcmV0dXJuIHRva2Vucy5maWx0ZXIodG9rZW4gPT4gdG9rZW4gJiYgdHlwZXMuaGFzKHRva2VuLnR5cGUpKTsKICAgIH07CgogICAgLyoqCiAgICAgKiBAdHlwZWRlZiB7KHRva2VuOiBUZW1wbGF0ZVRva2VuLCByZWZlcmVuY2U6IE5vZGUsIHJlZjogVWlJdGVtQ29sbGVjdGlvbikgPT4gTm9kZX0gVGVtcGxhdGVUb2tlblJlbmRlcgogICAgICovCiAgICAvKiogQHR5cGUge09iamVjdDxzdHJpbmcsIFRlbXBsYXRlVG9rZW5SZW5kZXI+fSAqLwogICAgY29uc3QgdG9rZW5SZW5kZXIgPSB7fTsKCiAgICAvKiogQHR5cGUge1RlbXBsYXRlVG9rZW5SZW5kZXJ9ICovCiAgICB0b2tlblJlbmRlci5jaGlsZCA9IGZ1bmN0aW9uICh0b2tlbiwgcmVmZXJlbmNlLCByZWYsIG1vZGUpIHsKICAgICAgY29uc3QgY2hpbGQgPSByZWZbdG9rZW4udmFsdWVdOwogICAgICBpZiAoIWNoaWxkKSByZXR1cm4gcmVmZXJlbmNlOwogICAgICBpZiAobW9kZSAhPT0gJ3RleHQnKSB7CiAgICAgICAgY29uc3QgY2hpbGREb20gPSBjaGlsZC5nZXRSZW5kZXJSZXN1bHQobW9kZSA9PT0gJ3JlY3Vyc2l2ZScpOwogICAgICAgIGlmIChjaGlsZERvbSBpbnN0YW5jZW9mIE5vZGUpIHsKICAgICAgICAgIHJlZmVyZW5jZS5hcHBlbmRDaGlsZChjaGlsZERvbSk7CiAgICAgICAgICByZXR1cm4gcmVmZXJlbmNlOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNoaWxkRG9tID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICByZXR1cm4gY2hpbGREb20ocmVmZXJlbmNlKTsKICAgICAgICB9IGVsc2UgcmV0dXJuIHJlZmVyZW5jZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCB0ZXh0ID0gY2hpbGQudGV4dCgpOwogICAgICAgIHJlZmVyZW5jZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KSk7CiAgICAgICAgcmV0dXJuIHJlZmVyZW5jZTsKICAgICAgfQogICAgfTsKICAgIC8qKiBAdHlwZSB7VGVtcGxhdGVUb2tlblJlbmRlcn0gKi8KICAgIHRva2VuUmVuZGVyLnJ1bGUgPSBmdW5jdGlvbiAodG9rZW4sIHJlZmVyZW5jZSwgcmVmLCBtb2RlKSB7CiAgICAgIGNvbnN0IHJlZlJ1bGUgPSBydWxlcy5hbGwuZ2V0KHRva2VuLnZhbHVlKTsKICAgICAgaWYgKCFyZWZSdWxlKSB7CiAgICAgICAgdXRpbC5kZWJ1ZygnUmVmZXJlbmNlZCBydWxlICVzIGRvZXMgbm90IGZvdW5kLicsIHRva2VuLnZhbHVlKTsKICAgICAgfQogICAgICBpZiAobW9kZSA9PT0gJ3RleHQnKSB7CiAgICAgICAgcmVmZXJlbmNlLmFwcGVuZENoaWxkKHJlZlJ1bGUudGV4dChmYWxzZSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlZmVyZW5jZS5hcHBlbmRDaGlsZChyZWZSdWxlLnJlbmRlcihmYWxzZSkpOwogICAgICB9CiAgICAgIHJldHVybiByZWZlcmVuY2U7CiAgICB9OwogICAgLyoqIEB0eXBlIHtUZW1wbGF0ZVRva2VuUmVuZGVyfSAqLwogICAgdG9rZW5SZW5kZXIuc3BsaXR0ZXIgPSBmdW5jdGlvbiAodG9rZW4sIHJlZmVyZW5jZSwgcmVmLCBtb2RlKSB7CiAgICAgIGNvbnN0IHBhcmVudCA9IHJlZmVyZW5jZS5wYXJlbnROb2RlOwogICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7CiAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobGFiZWwsIHJlZmVyZW5jZS5uZXh0U2libGluZyk7CiAgICAgIGlmICh0b2tlbi52YWx1ZSA9PT0gJ3x8JykgewogICAgICAgIGNvbnN0IGJyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKTsKICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGJyLCByZWZlcmVuY2UubmV4dFNpYmxpbmcpOwogICAgICB9CiAgICAgIHJldHVybiBsYWJlbDsKICAgIH07CiAgICAvKiogQHR5cGUge1RlbXBsYXRlVG9rZW5SZW5kZXJ9ICovCiAgICB0b2tlblJlbmRlci50ZXh0ID0gZnVuY3Rpb24gKHRva2VuLCByZWZlcmVuY2UsIHJlZiwgbW9kZSkgewogICAgICBjb25zdCB0ZXh0ID0gdG9rZW4udmFsdWUuc3RhcnRzV2l0aCgnJicpID8gewogICAgICAgICcmYW1wOyc6ICcmJywKICAgICAgfVt0b2tlbi52YWx1ZV0gOiB0b2tlbi52YWx1ZTsKICAgICAgcmVmZXJlbmNlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpKTsKICAgICAgcmV0dXJuIHJlZmVyZW5jZTsKICAgIH07CiAgICAvKiogQHR5cGUge0FycmF5PHN0cmluZz59ICovCiAgICBsZXQgYWNjZXB0VHlwZXMgPSBbXTsKICAgIGNvbnN0IGl0ZW1SZW5kZXIgPSBmdW5jdGlvbiAodGVtcGxhdGUsIHJlZiwgbW9kZSA9IG51bGwpIHsKICAgICAgY29uc3QgdHlwZXMgPSBtb2RlICYmIChhY2NlcHRUeXBlcyA9IHsKICAgICAgICBub3JtYWw6IFsnY2hpbGQnLCAnc3BsaXR0ZXInLCAndGV4dCddLAogICAgICAgIHJlY3Vyc2l2ZTogWydjaGlsZCcsICdzcGxpdHRlcicsICd0ZXh0JywgJ3J1bGUnXSwKICAgICAgICB0ZXh0OiBbJ2NoaWxkJywgJ3RleHQnXSwKICAgICAgfVttb2RlIHx8ICdub3JtYWwnXSkgfHwgYWNjZXB0VHlwZXMuZmlsdGVyKHR5cGUgPT4gdHlwZSAhPT0gJ3J1bGUnKTsKICAgICAgY29uc3QgcmVmZXJlbmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTsKICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctaXRlbScpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVmZXJlbmNlKTsKICAgICAgY29uc3QgdG9rZW5zID0gZmlsdGVyZWRUb2tlbnModG9rZW5pemUodGVtcGxhdGUpLCB0eXBlcyk7CiAgICAgIHRva2Vucy5yZWR1Y2UoKHJlZmVyZW5jZSwgdG9rZW4pID0+ICgKICAgICAgICB0b2tlblJlbmRlclt0b2tlbi50eXBlXSh0b2tlbiwgcmVmZXJlbmNlLCByZWYsIG1vZGUpCiAgICAgICksIHJlZmVyZW5jZSk7CiAgICAgIHJldHVybiBjb250YWluZXI7CiAgICB9OwoKICAgIGNvbnN0IHJ1bGVSZW5kZXIgPSBmdW5jdGlvbiAoaXNSb290ID0gdHJ1ZSkgewogICAgICBpZiAoIXRoaXMudGVtcGxhdGUpIHJldHVybiBudWxsOwogICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGUoKTsKICAgICAgY29uc3QgcmVmID0gdGhpcy5yZWY7CiAgICAgIGNvbnN0IG1vZGUgPSBmdWxsRG9tID8gaXNSb290ID8gJ3JlY3Vyc2l2ZScgOiAnbm9ybWFsJyA6ICd0ZXh0JzsKICAgICAgcmV0dXJuIGl0ZW1SZW5kZXIodGVtcGxhdGUsIHJlZiwgbW9kZSk7CiAgICB9OwoKICAgIHJldHVybiBydWxlUmVuZGVyOwogIH07CgogIC8qKgogICAqIHJlbmRlciDmmK/pgJrnlKjnmoTln7rkuo4gdGVtcGxhdGUg55qE5riy5p+T6YC76L6RCiAgICovCiAgQmFzZUNvbmZpZ0l0ZW0ucHJvdG90eXBlLnJlbmRlciA9IHBhcnNlVGVtcGxhdGUodHJ1ZSk7CiAgLyoqCiAgICogdGV4dCDmmK/pgJrnlKjnmoTmo4Dmn6XljIXlkKvmloflrZfnmoTpgLvovpEKICAgKi8KICBCYXNlQ29uZmlnSXRlbS5wcm90b3R5cGUudGV4dCA9ICgocGFyc2UgPT4gZnVuY3Rpb24gKGlzUm9vdCA9IHRydWUpIHsKICAgIGxldCByZXN1bHQ7CiAgICBpZiAodGhpcy50ZW1wbGF0ZSkgcmVzdWx0ID0gcGFyc2UuY2FsbCh0aGlzLCBpc1Jvb3QpOwogICAgZWxzZSByZXN1bHQgPSB0aGlzLnJlbmRlcihpc1Jvb3QpOwogICAgcmV0dXJuIHJlc3VsdCAmJiByZXN1bHQudGV4dENvbnRlbnQudHJpbSgpIHx8ICcnOwogIH0pKHBhcnNlVGVtcGxhdGUoZmFsc2UpKSk7CiAgLyoqCiAgICog5riy5p+T5YyF5ousIHJlbmRlciDlkozkuIDkuKrlj6/pgInnmoQgYWZ0ZXJSZW5kZXIKICAgKiDov5nph4zljIXoo4XkuKTkuKrlh73mlbDvvIzlpoLmnpzpnIDopoHph43ovb3muLLmn5PpgLvovpHvvIzlupTor6Xph43ovb0gcmVuZGVyCiAgICog5aaC5p6c6ZyA6KaB6I635b6X5riy5p+T57uT5p6c77yM5bqU6K+l5L2/55So6L+Z5Liq5pa55rOVCiAgICovCiAgQmFzZUNvbmZpZ0l0ZW0ucHJvdG90eXBlLmdldFJlbmRlclJlc3VsdCA9IGZ1bmN0aW9uIChpc1Jvb3QgPSB0cnVlKSB7CiAgICBsZXQgbm9kZSA9IHRoaXMucmVuZGVyKGlzUm9vdCk7CiAgICBpZiAodHlwZW9mIHRoaXMuYWZ0ZXJSZW5kZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgbm9kZSA9IHRoaXMuYWZ0ZXJSZW5kZXIobm9kZSk7CiAgICB9CiAgICByZXR1cm4gbm9kZTsKICB9OwoKICBjb25zdCBuZXh0Q29uZmlnSWQgPSAoZnVuY3Rpb24gKCkgewogICAgbGV0IGxhc3RJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDFlNykgKiAxMDsKICAgIC8qKgogICAgICogQHJldHVybiB7c3RyaW5nfSDov5Tlm57kuIDkuKrlnKjmraTmrKHov5DooYzkuK3llK/kuIDnmoTlgLzvvIznlKjmnaXmoIfor4bni6znq4vnmoTorr7nva7pobkKICAgICAqLwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgbGFzdEluZGV4ICs9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCk7CiAgICAgIGNvbnN0IHJhbmQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKTsKICAgICAgY29uc3QgaW5kZXggPSBsYXN0SW5kZXgudG9TdHJpbmcoMzYpOwogICAgICByZXR1cm4gYHlhd2YtJHtyYW5kfS0ke2luZGV4fWA7CiAgICB9OwogIH0oKSk7CgogIC8qKgogICAqIOS4gOS4quWPr+iDveW4puacieiuvue9rueahOmhueebrgogICAqIOaIkeS7rOWcqOi/meS4gOWxgue7tOaKpOaJgOacieWSjOiuvue9ruacieWFs+eahOWGheWuue+8jOWMheaLrAogICAqICAg6K6+572u55qE6K+75YaZCiAgICogICDorr7nva7nmoTlkIjms5XmgKfpqozor4EKICAgKiAgIOiuvue9ruabtOaWsOaXtuWbnuiwg+abtOaWsOaVsOaNrueahOa4suafk+mAu+i+kQogICAqLwogIGNsYXNzIENvbmZpZ0l0ZW0gZXh0ZW5kcyBCYXNlQ29uZmlnSXRlbSB7CiAgICAvKioKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtIOWtkOiuvue9rumhuQogICAgICogQHBhcmFtIHtDb25maWdJdGVtfSBjb250ZXh0IOeItuiuvue9rumhue+8iGl0ZW0g5bqU5b2T5Zyo5piv6K+l6K6+572u6aG555qEIHJlZiDkuK3vvIkKICAgICAqLwogICAgY29uc3RydWN0b3IoaXRlbSwgY29udGV4dCkgewogICAgICBzdXBlcihpdGVtKTsKICAgICAgaWYgKGNvbnRleHQpIHsKICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogICAgICAgIGlmICh0aGlzLmlkKSB0aGlzLmlkID0gY29udGV4dC5pZCArICcuJyArIHRoaXMuaWQ7CiAgICAgIH0KICAgICAgdGhpcy5jb25maWdJZCA9IG5leHRDb25maWdJZCgpOwogICAgICB0aGlzLmNvbmZpZ0luaXRpYWxpemVkID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm5zIHthbnl9IOihqOekuuiuvue9rueahOWIneWni+WAvAogICAgICovCiAgICBnZXQgaW5pdGlhbCgpIHsgcmV0dXJuIG51bGw7IH0KICAgIC8qKgogICAgICogQHBhcmFtIHthbnl9IOacquagvOW8j+WMlueahOiuvue9rumhuQogICAgICogQHJldHVybnMge2FueX0g5qC55o2u6K+l6K6+572u6aG55YWB6K6455qE5Y+W5YC85qC85byP5YyW5ZCO55qE6K6+572u6aG577yM5q2k5pe26K6+572u6aG55oC75piv5ZCI5rOV55qECiAgICAgKi8KICAgIG5vcm1hbGl6ZSh2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH0KICAgIC8qKgogICAgICog6YeN6L296L+Z5Liq5Ye95pWw5p2l5oyH5a6a5L2/55So5LuA5LmI5p2l5a2Y5YKoCiAgICAgKiDpu5jorqTkv53lrZjlnKjlvZPliY3nlKjmiLfkuYvkuIsKICAgICAqLwogICAgZ2V0IGNvbmZpZ1Bvb2woKSB7CiAgICAgIHJldHVybiBjb25maWcudXNlcjsKICAgIH0KICAgIC8qKgogICAgICog5Yid5aeL5YyW6K6+572u6aG5CiAgICAgKiDov5nkuKrlh73mlbDku4XlupTnlLEgaW5pdENvbmZpZyDosIPnlKgKICAgICAqLwogICAgcHJlcGFyQ29uZmlnKCkgewogICAgICBpZiAodGhpcy5jb25maWcpIHJldHVybiB0aGlzLmNvbmZpZzsKICAgICAgaWYgKCF0aGlzLmlkKSB0aHJvdyBFcnJvcignaWQgaXMgcmVxdWlyZWQgdG8gaW5pdCBjb25maWcnKTsKICAgICAgdGhpcy5jb25maWcgPSB0aGlzLmNvbmZpZ1Bvb2wua2V5KHRoaXMuaWQpOwogICAgICByZXR1cm4gdGhpcy5jb25maWc7CiAgICB9CiAgICAvKioKICAgICAqIOS4gOS4qumhueebruS4jeS4gOWumuaAu+aYr+mcgOimgeWMheWQq+iuvue9rumhuQogICAgICog5aaC5p6c5rKh5pyJ6LCD55So6L+H5Lu75L2VIGdldENvbmZpZywgc2V0Q29uZmlnIOetieaWueazle+8jOWImeS4jeS8muS4uuivpemhueebruWIhumFjeiuvue9rumhuQogICAgICog5Zyo56ys5LiA5qyh6LCD55So5Lu75L2V5ZKM6K6+572u6aG555u45YWz55qE5pa55rOV5pe277yM5oiR5Lus6K+V5Zu+5YiG6YWN6K6+572u6aG5CiAgICAgKi8KICAgIGluaXRDb25maWcoKSB7CiAgICAgIGlmICh0aGlzLmNvbmZpZ0luaXRpYWxpemVkKSByZXR1cm47CiAgICAgIHRoaXMuY29uZmlnSW5pdGlhbGl6ZWQgPSB0cnVlOwogICAgICB0aGlzLnByZXBhckNvbmZpZygpOwogICAgICB0aGlzLmFkZENvbmZpZ1VpTGlzdGVuZXIoKTsKICAgIH0KICAgIC8qKgogICAgICog5Yid5aeL5YyW6K6+572u6aG55Y+Y5YyW5pe25a+5IFVJIOeahOWPjemmiAogICAgICog6L+Z5Liq5Ye95pWw5LuF5bqU55SxIGluaXRDb25maWcg6LCD55SoCiAgICAgKi8KICAgIGFkZENvbmZpZ1VpTGlzdGVuZXIoKSB7CiAgICAgIHRoaXMuaW5pdENvbmZpZygpOwogICAgICB0aGlzLmNvbmZpZy5hZGRMaXN0ZW5lcihuZXdWYWx1ZSA9PiB7CiAgICAgICAgdGhpcy5yZW5kZXJBbGxWYWx1ZXMoKTsKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIOivu+WPluiuvue9rumhuQogICAgICogQHJldHVybiB7YW55fSDlvZPliY3orr7nva7pobnnmoTlgLwKICAgICAqLwogICAgZ2V0Q29uZmlnKCkgewogICAgICB0aGlzLmluaXRDb25maWcoKTsKICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmNvbmZpZy5nZXQoKTsKICAgICAgY29uc3Qgc3RyaW5naWZ5VmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gdmFsdWUgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7CiAgICAgIGNvbnN0IG5vcm1hbGl6ZSA9IHRoaXMubm9ybWFsaXplKHZhbHVlKTsKICAgICAgY29uc3Qgc3RyaW5naWZ5Tm9ybWFsaXplID0gbm9ybWFsaXplID09IG51bGwgPyBub3JtYWxpemUgOiBKU09OLnN0cmluZ2lmeShub3JtYWxpemUpOwogICAgICBpZiAoc3RyaW5naWZ5VmFsdWUgIT09IHN0cmluZ2lmeU5vcm1hbGl6ZSkgewogICAgICAgIHRoaXMuY29uZmlnLnNldChub3JtYWxpemUpOwogICAgICB9CiAgICAgIHJldHVybiBub3JtYWxpemU7CiAgICB9CiAgICAvKioKICAgICAqIOWGmeWFpeiuvue9rumhuQogICAgICogQHBhcmFtIHthbnl9IHZhbHVlIOW9k+WJjeiuvue9rumhueeahOWAvAogICAgICogQHJldHVybiB7YW55fSDlrp7pmYXlhpnlhaXnmoTlgLzvvIjnu4/ov4fmoLzlvI/ljJbvvIkKICAgICAqLwogICAgc2V0Q29uZmlnKHZhbHVlKSB7CiAgICAgIHRoaXMuaW5pdENvbmZpZygpOwogICAgICBjb25zdCBub3JtYWxpemUgPSB0aGlzLm5vcm1hbGl6ZSh2YWx1ZSk7CiAgICAgIHRoaXMuY29uZmlnLnNldChub3JtYWxpemUpOwogICAgICByZXR1cm4gbm9ybWFsaXplOwogICAgfQogICAgLyoqCiAgICAgKiDlvZPorr7nva7pobnlj5jljJbml7bnmoTlm57osIMKICAgICAqIOazqOaEj+S4jeimgeWcqOWbnuiwg+WHveaVsOS4reS/neeVmeiuvue9rumhuea4suafk+WHuuadpeeahOaWh+aho+iKgueCueeahOW8leeUqO+8jOWQpuWImeWPr+iDvemAoOaIkOWeg+WcvuWbnuaUtuWkseaViAogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sg5b2T6K6+572u6aG55Y+Y5YyW5pe255qE5Zue6LCD5Ye95pWwCiAgICAgKiBAcmV0dXJuIHt7cmVtb3ZlQ29uZmlnTGlzdGVuZXI6IEZ1bmN0aW9ufX0KICAgICAqLwogICAgYWRkQ29uZmlnTGlzdGVuZXIoY2FsbGJhY2spIHsKICAgICAgdGhpcy5pbml0Q29uZmlnKCk7CiAgICAgIGNvbnN0IHsgcmVtb3ZlTGlzdGVuZXIgfSA9IHRoaXMuY29uZmlnLmFkZExpc3RlbmVyKGNhbGxiYWNrKTsKICAgICAgcmV0dXJuIHsgcmVtb3ZlQ29uZmlnTGlzdGVuZXI6IHJlbW92ZUxpc3RlbmVyIH07CiAgICB9CiAgICByZW5kZXIoLi4uYXJncykgewogICAgICBjb25zdCBub2RlID0gc3VwZXIucmVuZGVyKC4uLmFyZ3MpOwogICAgICAvLyDlnKjmuLLmn5Pml7bmoIforrDor6XlhYPntKDnmoTorr7nva4gaWQKICAgICAgLy8g5b2T6ZyA6KaB5pu05paw6K6+572u5pe25Y+v5Lul5pa55L6/5Zyw5LuO55WM6Z2i5LiK5om+5Yiw6K+l5YWD57SgCiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCd5YXdmLWNvbmZpZy1pdGVtJywgdGhpcy5jb25maWdJZCk7CiAgICAgIHJldHVybiBub2RlOwogICAgfQogICAgLyoqCiAgICAgKiDmoLnmja7orr7nva4gaWQg5om+5Yiw5omA5pyJ6K+l6K6+572u6aG55riy5p+T55qE5a6e5L6LCiAgICAgKi8KICAgIGdldFJlbmRlckl0ZW1zKCkgewogICAgICBjb25zdCBzZWxlY3RvciA9IGBbeWF3Zi1jb25maWctaXRlbT0iJHt0aGlzLmNvbmZpZ0lkfSJdYDsKICAgICAgcmV0dXJuIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpOwogICAgfQogICAgLyoqCiAgICAgKiDmm7TmlrDmuLLmn5PpobnnmoTlgLwKICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lcgogICAgICovCiAgICByZW5kZXJWYWx1ZShjb250YWluZXIpIHsKICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0KICAgIC8qKgogICAgICog5pu05paw5riy5p+T5omA5pyJ5a6e5L6LCiAgICAgKi8KICAgIHJlbmRlckFsbFZhbHVlcygpIHsKICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLmdldFJlbmRlckl0ZW1zKCk7CiAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB0aGlzLnJlbmRlclZhbHVlKGl0ZW0pKTsKICAgIH0KICB9CiAgcnVsZS5jbGFzcy5Db25maWdJdGVtID0gQ29uZmlnSXRlbTsKCiAgLyoqCiAgICog5LiA5Liq5rKh5pyJ55WM6Z2i55qE6K6+572u6aG5CiAgICovCiAgY2xhc3MgT2Zmc2NyZWVuQ29uZmlnSXRlbSBleHRlbmRzIENvbmZpZ0l0ZW0gewogICAgYWRkQ29uZmlnVWlMaXN0ZW5lcigpIHsgLyog5Zug5Li65rKh5pyJIFVJ77yM5omA5Lul5LuA5LmI6YO95LiN5YGaICovIH0KICAgIHJlbmRlcigpIHsgcmV0dXJuIG51bGw7IH0KICAgIHRleHQoKSB7IHJldHVybiAnJzsgfQogICAgZ2V0UmVuZGVySXRlbXMoKSB7IHJldHVybiBudWxsOyB9CiAgICBnZXRSZW5kZXJSZXN1bHQoKSB7IHJldHVybiBudWxsOyB9CiAgICByZW5kZXJWYWx1ZSgpIHsgcmV0dXJuIG51bGw7IH0KICB9CiAgcnVsZS5jbGFzcy5PZmZzY3JlZW5Db25maWdJdGVtID0gT2Zmc2NyZWVuQ29uZmlnSXRlbTsKICBydWxlLnR5cGVzLm9mZnNjcmVlbiA9IE9mZnNjcmVlbkNvbmZpZ0l0ZW07CgogIC8qKgogICAqIOS4gOS4quW4g+WwlOiuvue9rumhuQogICAqIOacieS4qiBjaGVja2JveAogICAqIOS9v+eUqOm7mOiupOeahOa4suafk+mAu+i+ke+8jOWkjemAieahhuWKoOWIsOacgOWJjemdogogICAqLwogIGNsYXNzIEJvb2xlYW5Db25maWdJdGVtIGV4dGVuZHMgQ29uZmlnSXRlbSB7CiAgICBjb25zdHJ1Y3RvcihpdGVtLCBwYXJlbnQpIHsKICAgICAgc3VwZXIoaXRlbSwgcGFyZW50KTsKICAgIH0KICAgIGdldCBpbml0aWFsKCkgeyByZXR1cm4gZmFsc2U7IH0KICAgIG5vcm1hbGl6ZSh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRoaXMuaW5pdGlhbDsKICAgICAgcmV0dXJuICEhdmFsdWU7CiAgICB9CiAgICBpc0VuYWJsZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmFsd2F5cyB8fCB0aGlzLmdldENvbmZpZygpOwogICAgfQogICAgcmVuZGVyKC4uLmFyZ3MpIHsKICAgICAgY29uc3QgY29udGFpbmVyID0gc3VwZXIucmVuZGVyKC4uLmFyZ3MpOwogICAgICBpZiAodGhpcy5hbHdheXMpIHJldHVybiBjb250YWluZXI7CiAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBjaGVja2JveC5jbGFzc0xpc3QuYWRkKCdXX2NoZWNrYm94JywgJ3lhd2YtY29uZmlnLWNoZWNrYm94Jyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2hlY2tib3guY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctY2hlY2tib3gnKTsKICAgICAgfQogICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29uZmlnLWlucHV0JywgdGhpcy5jb25maWdJZCk7CiAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGV2ZW50ID0+IHsKICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgewogICAgICAgICAgdGhpcy5yZW5kZXJWYWx1ZShjb250YWluZXIpOwogICAgICAgIH0gZWxzZSB0aGlzLnNldENvbmZpZyhjaGVja2JveC5jaGVja2VkKTsKICAgICAgfSk7CiAgICAgIGNvbnN0IGxhYmVsID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJyk7CiAgICAgIGxhYmVsLmluc2VydEJlZm9yZShjaGVja2JveCwgbGFiZWwuZmlyc3RDaGlsZCk7CiAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLmdldENvbmZpZygpOwogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA3KSB7CiAgICAgICAgY29uc3QgY29udGFpbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBjb250YWluLmNsYXNzTmFtZSA9ICd5YXdmLWNvbmZpZy1jaGVja2JveC13cmFwJzsKICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIGljb24uY2xhc3NOYW1lID0gJ3lhd2YtY29uZmlnLWNoZWNrYm94LWljb24nOwogICAgICAgIGNoZWNrYm94LnJlcGxhY2VXaXRoKGNvbnRhaW4pOwogICAgICAgIGNvbnRhaW4uYXBwZW5kKGNoZWNrYm94KTsKICAgICAgICBjb250YWluLmFwcGVuZChpY29uKTsKICAgICAgICBpY29uLmFwcGVuZCh1aS5pY29uKCdjaGVja2JveCcpLmRvY3VtZW50RWxlbWVudCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0KICAgIHJlbmRlclZhbHVlKGNvbnRhaW5lcikgewogICAgICBjb250YWluZXIgPSBzdXBlci5yZW5kZXJWYWx1ZShjb250YWluZXIpOwogICAgICBjb25zdCBzZWxlY3RvciA9IGBpbnB1dFt0eXBlPSJjaGVja2JveCJdW3lhd2YtY29uZmlnLWlucHV0PSIke3RoaXMuY29uZmlnSWR9Il1gOwogICAgICBjb25zdCBjaGVja2JveCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgaWYgKGNoZWNrYm94ICYmIGNoZWNrYm94LmNoZWNrZWQgIT09IGNvbmZpZykgewogICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBjb25maWc7CiAgICAgIH0KICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0KICB9CiAgcnVsZS5jbGFzcy5Cb29sZWFuQ29uZmlnSXRlbSA9IEJvb2xlYW5Db25maWdJdGVtOwogIHJ1bGUudHlwZXMuYm9vbGVhbiA9IEJvb2xlYW5Db25maWdJdGVtOwoKICAvKioKICAgKiDkuIDkuKrlpJrpgInkuIDorr7nva7pobkKICAgKiDmnInkuKogc2VsZWN0IOS4i+aLiemAieaLqeahhgogICAqIOmcgOimgemFjee9riBzZWxlY3Qg5bGe5oCn5Li6IEFycmF5PHsgdmFsdWU6IHN0cmluZywgbmFtZTogc3RyaW5nIH0+IOeUqOS6juWAmemAiemhuQogICAqIOS4jeS9v+eUqOm7mOiupOeahOa4suafk+mAu+i+kQogICAqLwogIGNsYXNzIFNlbGVjdENvbmZpZ0l0ZW0gZXh0ZW5kcyBDb25maWdJdGVtIHsKICAgIGNvbnN0cnVjdG9yKGl0ZW0sIHBhcmVudCkgewogICAgICBzdXBlcihpdGVtLCBwYXJlbnQpOwogICAgICBjb25zdCBzZWxlY3QgPSB0aGlzLnNlbGVjdDsKICAgICAgaWYgKCFzZWxlY3QgfHwgIUFycmF5LmlzQXJyYXkoc2VsZWN0KSAmJiB0eXBlb2Ygc2VsZWN0LnRoZW4gIT09ICdmdW5jdGlvbicpIHsKICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ2BzZWxlY3RgIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3Igc2VsZWN0IGNvbmZpZyBpdGVtJyk7CiAgICAgIH0KICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHNlbGVjdCkgJiYgdHlwZW9mIHNlbGVjdC50aGVuID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHNlbGVjdCkudGhlbihpdGVtcyA9PiB7CiAgICAgICAgICB0aGlzLnNlbGVjdCA9IGl0ZW1zOwogICAgICAgICAgaWYgKHRoaXMuY29uZmlnSW5pdGlhbGl6ZWQpIHsKICAgICAgICAgICAgdGhpcy5nZXRDb25maWcoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgZ2V0IGluaXRpYWwoKSB7CiAgICAgIGNvbnN0IHNlbGVjdCA9IHRoaXMuc2VsZWN0OwogICAgICBpZiAoIXNlbGVjdCkgcmV0dXJuIG51bGw7CiAgICAgIGlmICghQXJyYXkuaXNBcnJheShzZWxlY3QpKSByZXR1cm4gbnVsbDsKICAgICAgaWYgKCFzZWxlY3RbMF0pIHJldHVybiBudWxsOwogICAgICByZXR1cm4gc2VsZWN0WzBdLnZhbHVlOwogICAgfQogICAgbm9ybWFsaXplKHZhbHVlKSB7CiAgICAgIGNvbnN0IHNlbGVjdCA9IHRoaXMuc2VsZWN0OwogICAgICBpZiAoc2VsZWN0ICYmICFBcnJheS5pc0FycmF5KHNlbGVjdCkgJiYgdHlwZW9mIHNlbGVjdC50aGVuID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdmFsdWU7CiAgICAgIGlmICghc2VsZWN0IHx8ICFBcnJheS5pc0FycmF5KHNlbGVjdCkpIHJldHVybiBudWxsOwogICAgICBpZiAoc2VsZWN0LmZpbmQoaXRlbSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZSkpIHJldHVybiB2YWx1ZTsKICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbDsKICAgIH0KICAgIHJlbmRlcigpIHsKICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCd5YXdmLWNvbmZpZy1pdGVtJywgdGhpcy5jb25maWdJZCk7CiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1zZWxlY3QnKTsKICAgICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDcpIHsKICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LmFkZCgnd29vLWlucHV0LW1haW4nKTsKICAgICAgfQogICAgICBjb25zdCByZW5kZXJPcHRpb25zID0gaXRlbXMgPT4gewogICAgICAgIGl0ZW1zLmZvckVhY2goKHsgdGV4dCwgdmFsdWUsIHN0eWxlID0gbnVsbCB9KSA9PiB7CiAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsKICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTsKICAgICAgICAgIG9wdGlvbi50ZXh0ID0gdHlwZW9mIHRleHQgPT09ICdmdW5jdGlvbicgPyB0ZXh0KCkgOiB0ZXh0OwogICAgICAgICAgaWYgKHN0eWxlKSBvcHRpb24uc3R5bGUgKz0gJzsnICsgc3R5bGU7CiAgICAgICAgICBzZWxlY3QuYWRkKG9wdGlvbik7CiAgICAgICAgfSk7CiAgICAgICAgc2VsZWN0LnZhbHVlID0gSlNPTi5zdHJpbmdpZnkodGhpcy5nZXRDb25maWcoKSk7CiAgICAgIH07CiAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuc2VsZWN0KSkgcmVuZGVyT3B0aW9ucyh0aGlzLnNlbGVjdCk7CiAgICAgIGVsc2UgUHJvbWlzZS5yZXNvbHZlKHRoaXMuc2VsZWN0KS50aGVuKGl0ZW1zID0+IHsKICAgICAgICByZW5kZXJPcHRpb25zKGl0ZW1zKTsKICAgICAgfSk7CiAgICAgIHNlbGVjdC5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29uZmlnLWlucHV0JywgdGhpcy5jb25maWdJZCk7CiAgICAgIHNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBldmVudCA9PiB7CiAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHsKICAgICAgICAgIHRoaXMucmVuZGVyVmFsdWUoY29udGFpbmVyKTsKICAgICAgICB9IGVsc2UgdGhpcy5zZXRDb25maWcoSlNPTi5wYXJzZShzZWxlY3QudmFsdWUpKTsKICAgICAgfSk7CiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxlY3QpOwogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA3KSB7CiAgICAgICAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHdyYXAuY2xhc3NOYW1lID0gJ3dvby1pbnB1dC13cmFwJzsKICAgICAgICBzZWxlY3QucmVwbGFjZVdpdGgod3JhcCk7CiAgICAgICAgd3JhcC5hcHBlbmQoc2VsZWN0KTsKICAgICAgfQogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfQogICAgcmVuZGVyVmFsdWUoY29udGFpbmVyKSB7CiAgICAgIGNvbnRhaW5lciA9IHN1cGVyLnJlbmRlclZhbHVlKGNvbnRhaW5lcik7CiAgICAgIGNvbnN0IHNlbGVjdG9yID0gYHNlbGVjdFt5YXdmLWNvbmZpZy1pbnB1dD0iJHt0aGlzLmNvbmZpZ0lkfSJdYDsKICAgICAgY29uc3Qgc2VsZWN0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOwogICAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpOwogICAgICBjb25zdCBjb25maWdTdHIgPSBKU09OLnN0cmluZ2lmeShjb25maWcpOwogICAgICBpZiAoc2VsZWN0ICYmIHNlbGVjdC52YWx1ZSAhPT0gY29uZmlnU3RyKSB7CiAgICAgICAgc2VsZWN0LnZhbHVlID0gY29uZmlnU3RyOwogICAgICB9CiAgICAgIHJldHVybiBjb250YWluZXI7CiAgICB9CiAgfQogIHJ1bGUuY2xhc3MuU2VsZWN0Q29uZmlnSXRlbSA9IFNlbGVjdENvbmZpZ0l0ZW07CiAgcnVsZS50eXBlcy5zZWxlY3QgPSBTZWxlY3RDb25maWdJdGVtOwoKICAvKioKICAgKiDkuIDkuKrovpPlhaXmoYYKICAgKiDkuI3mmrTpnLLnu5nlpJbpnaLnm7TmjqXkvb/nlKgKICAgKi8KICBjbGFzcyBJbnB1dENvbmZpZ0l0ZW0gZXh0ZW5kcyBDb25maWdJdGVtIHsKICAgIGNvbnN0cnVjdG9yKGl0ZW0sIHBhcmVudCkgewogICAgICBzdXBlcihpdGVtLCBwYXJlbnQpOwogICAgfQogICAgZ2V0IGluaXRpYWwoKSB7IHJldHVybiAnJzsgfQogICAgZ2V0IGlucHV0VHlwZSgpIHsgcmV0dXJuICd0ZXh0JzsgfQogICAgbm9ybWFsaXplKHZhbHVlKSB7IHJldHVybiAnJyArIHZhbHVlOyB9CiAgICBzdHJpbmdpZnkodmFsdWUpIHsgcmV0dXJuICcnICsgdmFsdWU7IH0KICAgIHJlbmRlcigpIHsKICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCd5YXdmLWNvbmZpZy1pdGVtJywgdGhpcy5jb25maWdJZCk7CiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1pbnB1dCcpOwogICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDcpIHsKICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCd3b28taW5wdXQtbWFpbicpOwogICAgICB9CiAgICAgIGlucHV0LnR5cGUgPSB0aGlzLmlucHV0VHlwZTsKICAgICAgaW5wdXQudmFsdWUgPSB0aGlzLmdldENvbmZpZygpOwogICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGV2ZW50ID0+IHsKICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgewogICAgICAgICAgdGhpcy5yZW5kZXJWYWx1ZShjb250YWluZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCB0b2tlbiA9IHRoaXMuc2V0Q29uZmlnVG9rZW4gPSB7fTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBpZiAodGhpcy5zZXRDb25maWdUb2tlbiAhPT0gdG9rZW4pIHJldHVybjsKICAgICAgICAgICAgdGhpcy5zZXRDb25maWcoaW5wdXQudmFsdWUpOwogICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gaW5wdXQpIHsKICAgICAgICAgICAgICB0aGlzLnJlbmRlclZhbHVlKGNvbnRhaW5lcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGV2ZW50ID0+IHsKICAgICAgICB0aGlzLnJlbmRlclZhbHVlKGNvbnRhaW5lcik7CiAgICAgIH0pOwogICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29uZmlnLWlucHV0JywgdGhpcy5jb25maWdJZCk7CiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dCk7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDcpIHsKICAgICAgICBjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgd3JhcC5jbGFzc05hbWUgPSAnd29vLWlucHV0LXdyYXAnOwogICAgICAgIGlucHV0LnJlcGxhY2VXaXRoKHdyYXApOwogICAgICAgIHdyYXAuYXBwZW5kKGlucHV0KTsKICAgICAgfQogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfQogICAgcmVuZGVyVmFsdWUoY29udGFpbmVyKSB7CiAgICAgIGNvbnRhaW5lciA9IHN1cGVyLnJlbmRlclZhbHVlKGNvbnRhaW5lcik7CiAgICAgIGNvbnN0IHNlbGVjdG9yID0gYGlucHV0W3lhd2YtY29uZmlnLWlucHV0PSIke3RoaXMuY29uZmlnSWR9Il1gOwogICAgICBjb25zdCBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgY29uc3QgaGFzRm9jdXMgPSBpbnB1dCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsKICAgICAgaWYgKGlucHV0ICYmICFoYXNGb2N1cyAmJiBpbnB1dC52YWx1ZSAhPT0gdGhpcy5zdHJpbmdpZnkoY29uZmlnKSkgewogICAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5zdHJpbmdpZnkoY29uZmlnKTsKICAgICAgfQogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfQogIH0KICBydWxlLmNsYXNzLklucHV0Q29uZmlnSXRlbSA9IElucHV0Q29uZmlnSXRlbTsKICBydWxlLnR5cGVzLmlucHV0ID0gSW5wdXRDb25maWdJdGVtOwoKICAvKioKICAgKiDkuIDkuKrmlbDlrZfovpPlhaXmoYYKICAgKiDlhYHorrjlrprkuYkgbWluLCBtYXgsIHN0ZXAg5bGe5oCnCiAgICog5a+55bqU5LiA5LiqIG51bWJlciDovpPlhaXmoYYKICAgKi8KICBjbGFzcyBOdW1iZXJDb25maWdJdGVtIGV4dGVuZHMgSW5wdXRDb25maWdJdGVtIHsKICAgIGNvbnN0cnVjdG9yKGl0ZW0sIHBhcmVudCkgewogICAgICBzdXBlcihpdGVtLCBwYXJlbnQpOwogICAgfQogICAgZ2V0IGlucHV0VHlwZSgpIHsgcmV0dXJuICdudW1iZXInOyB9CiAgICBnZXQgaW5pdGlhbCgpIHsgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHRoaXMubWluLCAwKSwgdGhpcy5tYXgpOyB9CiAgICBnZXQgbWluKCkgeyByZXR1cm4gMDsgfQogICAgZ2V0IG1heCgpIHsgcmV0dXJuIEluZmluaXR5OyB9CiAgICBnZXQgc3RlcCgpIHsgcmV0dXJuIDE7IH0KICAgIG5vcm1hbGl6ZSh2YWx1ZSkgewogICAgICBsZXQgbnVtYmVyID0gK3ZhbHVlOwogICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShudW1iZXIpKSByZXR1cm4gdGhpcy5pbml0aWFsOwogICAgICBpZiAoK3RoaXMubWluID09PSB0aGlzLm1pbiAmJiBudW1iZXIgPCB0aGlzLm1pbikgbnVtYmVyID0gdGhpcy5taW47CiAgICAgIGlmICgrdGhpcy5tYXggPT09IHRoaXMubWF4ICYmIG51bWJlciA+IHRoaXMubWF4KSBudW1iZXIgPSB0aGlzLm1heDsKICAgICAgaWYgKCt0aGlzLnN0ZXAgPT09IHRoaXMuc3RlcCAmJiBOdW1iZXIuaXNGaW5pdGUodGhpcy5zdGVwKSkgewogICAgICAgIG51bWJlciAtPSAobnVtYmVyIC0gdGhpcy5taW4pICUgdGhpcy5zdGVwOwogICAgICB9CiAgICAgIHJldHVybiBudW1iZXI7CiAgICB9CiAgICByZW5kZXIoKSB7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHN1cGVyLnJlbmRlcigpOwogICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctbnVtYmVyJyk7CiAgICAgIGNvbnN0IGlucHV0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7CiAgICAgIGlmICgrdGhpcy5taW4gPT09IHRoaXMubWluICYmIHRoaXMubWluICE9PSAtSW5maW5pdHkpIGlucHV0Lm1pbiA9IHRoaXMubWluOwogICAgICBpZiAoK3RoaXMubWF4ID09PSB0aGlzLm1heCAmJiB0aGlzLm1heCAhPT0gSW5maW5pdHkpIGlucHV0Lm1heCA9IHRoaXMubWF4OwogICAgICBpZiAoK3RoaXMuc3RlcCA9PT0gdGhpcy5zdGVwICYmIE51bWJlci5pc0Zpbml0ZSh0aGlzLnN0ZXApKSBpbnB1dC5zdGVwID0gdGhpcy5zdGVwOwogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfQogIH0KICBydWxlLmNsYXNzLk51bWJlckNvbmZpZ0l0ZW0gPSBOdW1iZXJDb25maWdJdGVtOwogIHJ1bGUudHlwZXMubnVtYmVyID0gTnVtYmVyQ29uZmlnSXRlbTsKCiAgLyoqCiAgICog6IyD5Zu06L6T5YWl5qGGCiAgICog5ZKM5pWw5a2X6L6T5YWl5qGG5rKh5LuA5LmI5beu5Yir77yM6Zmk5LqG5aSa5LqG5LiA5Liq6IyD5Zu05ouW5Yqo5p2hCiAgICog5LuF5b2TIG1pbuOAgW1heCDpg73orr7nva7kuobml7bmiY3kvJrmnInmlYgKICAgKi8KICBjbGFzcyBSYW5nZUNvbmZpZ0l0ZW0gZXh0ZW5kcyBOdW1iZXJDb25maWdJdGVtIHsKICAgIHJlbmRlciguLi5hcmdzKSB7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHN1cGVyLnJlbmRlciguLi5hcmdzKTsKICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgneWF3Zi1jb25maWctaXRlbScsIHRoaXMuY29uZmlnSWQpOwogICAgICBpZiAoK3RoaXMubWluICE9PSB0aGlzLm1pbikgcmV0dXJuIGNvbnRhaW5lcjsKICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodGhpcy5taW4pKSByZXR1cm4gY29udGFpbmVyOwogICAgICBpZiAoK3RoaXMubWF4ICE9PSB0aGlzLm1heCkgcmV0dXJuIGNvbnRhaW5lcjsKICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodGhpcy5tYXgpKSByZXR1cm4gY29udGFpbmVyOwogICAgICBpZiAoK3RoaXMuc3RlcCAhPT0gdGhpcy5zdGVwKSByZXR1cm4gY29udGFpbmVyOwogICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZSh0aGlzLnN0ZXApKSByZXR1cm4gY29udGFpbmVyOwogICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctcmFuZ2UnKTsKICAgICAgY29uc3QgcmFuZ2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICByYW5nZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctcmFuZ2Utd3JhcCcpOwogICAgICBjb25zdCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgIHJhbmdlLnR5cGUgPSAncmFuZ2UnOwogICAgICByYW5nZXIuYXBwZW5kQ2hpbGQocmFuZ2UpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmFuZ2VyKTsKICAgICAgcmFuZ2UubWluID0gdGhpcy5taW47CiAgICAgIHJhbmdlLm1heCA9IHRoaXMubWF4OwogICAgICByYW5nZS5zdGVwID0gdGhpcy5zdGVwOwogICAgICByYW5nZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGV2ZW50ID0+IHsKICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgewogICAgICAgICAgdGhpcy5yZW5kZXJWYWx1ZShjb250YWluZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCB0b2tlbiA9IHRoaXMuc2V0Q29uZmlnVG9rZW4gPSB7fTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBpZiAodGhpcy5zZXRDb25maWdUb2tlbiAhPT0gdG9rZW4pIHJldHVybjsKICAgICAgICAgICAgdGhpcy5zZXRDb25maWcoK3JhbmdlLnZhbHVlKTsKICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGV2ZW50ID0+IHsKICAgICAgICB0aGlzLnJlbmRlclZhbHVlKGNvbnRhaW5lcik7CiAgICAgIH0pOwogICAgICByYW5nZS52YWx1ZSA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgIHJhbmdlLnNldEF0dHJpYnV0ZSgneWF3Zi1jb25maWctaW5wdXQnLCB0aGlzLmNvbmZpZ0lkKTsKICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0KICAgIHJlbmRlclZhbHVlKGNvbnRhaW5lcikgewogICAgICBjb250YWluZXIgPSBzdXBlci5yZW5kZXJWYWx1ZShjb250YWluZXIpOwogICAgICBjb25zdCBzZWxlY3RvciA9IGBpbnB1dFt0eXBlPSJyYW5nZSJdW3lhd2YtY29uZmlnLWlucHV0PSIke3RoaXMuY29uZmlnSWR9Il1gOwogICAgICBjb25zdCByYW5nZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgY29uc3QgaGFzRm9jdXMgPSByYW5nZSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsKICAgICAgaWYgKHJhbmdlICYmICFoYXNGb2N1cyAmJiArcmFuZ2UudmFsdWUgIT09IGNvbmZpZykgewogICAgICAgIHJhbmdlLnZhbHVlID0gY29uZmlnOwogICAgICB9CiAgICAgIHJldHVybiBjb250YWluZXI7CiAgICB9CiAgfQogIHJ1bGUuY2xhc3MuUmFuZ2VDb25maWdJdGVtID0gUmFuZ2VDb25maWdJdGVtOwogIHJ1bGUudHlwZXMucmFuZ2UgPSBSYW5nZUNvbmZpZ0l0ZW07CgogIC8qKgogICAqIOS4gOS4quminOiJsumAieaLqeahhgogICAqIOWvueW6lOS4gOS4qiBjb2xvciDovpPlhaXmoYYKICAgKi8KICBjbGFzcyBDb2xvckNvbmZpZ0l0ZW0gZXh0ZW5kcyBJbnB1dENvbmZpZ0l0ZW0gewogICAgY29uc3RydWN0b3IoaXRlbSwgcGFyZW50KSB7CiAgICAgIHN1cGVyKGl0ZW0sIHBhcmVudCk7CiAgICB9CiAgICBnZXQgaW5pdGlhbCgpIHsgcmV0dXJuICcjZmZmZmZmJzsgfQogICAgbm9ybWFsaXplKHZhbHVlKSB7CiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSByZXR1cm4gdGhpcy5pbml0aWFsOwogICAgICBpZiAoIS8jWzAtOWEtZl17Nn0vaS50ZXN0KHZhbHVlKSkgcmV0dXJuIHRoaXMuaW5pdGlhbDsKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogICAgcmVuZGVyKCkgewogICAgICBjb25zdCBjb250YWluZXIgPSBzdXBlci5yZW5kZXIoKTsKICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWNvbG9yJyk7CiAgICAgIGNvbnN0IGlucHV0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7CiAgICAgIGlucHV0LnR5cGUgPSAnY29sb3InOwogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfQogIH0KICBydWxlLmNsYXNzLkNvbG9yQ29uZmlnSXRlbSA9IENvbG9yQ29uZmlnSXRlbTsKICBydWxlLnR5cGVzLmNvbG9yID0gQ29sb3JDb25maWdJdGVtOwoKICBpMThuLmtleWJvYXJkRGlzYWJsZWQgPSB7CiAgICBjbjogJ++8iOW3suemgeeUqO+8iScsCiAgICB0dzogJ++8iOW3suWBnOeUqO+8iScsCiAgICBlbjogJyhEaXNhYmxlZCknLAogIH07CgogIC8qKgogICAqIOS4gOS4quiuvue9ruaMiemUrueahOiuvue9rumhuQogICAqLwogIGNsYXNzIEtleWJvYXJkQ29uZmlnSXRlbSBleHRlbmRzIENvbmZpZ0l0ZW0gewogICAgY29uc3RydWN0b3IoaXRlbSwgcGFyZW50KSB7CiAgICAgIHN1cGVyKGl0ZW0sIHBhcmVudCk7CiAgICB9CiAgICBnZXQgaW5pdGlhbCgpIHsgcmV0dXJuIG51bGw7IH0KICAgIG5vcm1hbGl6ZSh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiBudWxsOwogICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykgcmV0dXJuIHRoaXMuaW5pdGlhbDsKICAgICAgaWYgKHZhbHVlIDwgMCB8fCB2YWx1ZSA+IGtleWJvYXJkLmFsdGVyLk1BWCkgcmV0dXJuIHRoaXMuaW5pdGlhbDsKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogICAgcmVuZGVyKCkgewogICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29uZmlnLWl0ZW0nLCB0aGlzLmNvbmZpZ0lkKTsKICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWtleScpOwogICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNykgewogICAgICAgIGJ1dHRvbi5jbGFzc05hbWUgPSAnd29vLWJ1dHRvbi1tYWluIHdvby1idXR0b24tbGluZSB3b28tYnV0dG9uLXByaW1hcnkgd29vLWJ1dHRvbi1zIHdvby1idXR0b24tcm91bmQnOwogICAgICB9CiAgICAgIGJ1dHRvbi50eXBlID0gJ2J1dHRvbic7CiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGtleWJvYXJkLm5hbWUodGhpcy5nZXRDb25maWcoKSk7CiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZXZlbnQgPT4gewogICAgICAgIGlmICghZXZlbnQuaXNUcnVzdGVkKSByZXR1cm47CiAgICAgICAgY29uc3QgY29kZSA9IGtleWJvYXJkLmV2ZW50KGV2ZW50KTsKICAgICAgICBpZiAoY29kZSA9PT0ga2V5Ym9hcmQuY29kZS5UQUIpIHJldHVybjsKICAgICAgICBpZiAoY29kZSA9PT0ga2V5Ym9hcmQuY29kZS5UQUIgKyBrZXlib2FyZC5hbHRlci5TSElGVCkgcmV0dXJuOwogICAgICAgIGlmIChjb2RlID09PSBrZXlib2FyZC5jb2RlLkVTQykgewogICAgICAgICAgdGhpcy5zZXRDb25maWcobnVsbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2V0Q29uZmlnKGNvZGUpOwogICAgICAgIH0KICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB9LCB0cnVlKTsKICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgneWF3Zi1jb25maWctaW5wdXQnLCB0aGlzLmNvbmZpZ0lkKTsKICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7CiAgICAgIHJldHVybiBjb250YWluZXI7CiAgICB9CiAgICByZW5kZXJWYWx1ZShjb250YWluZXIpIHsKICAgICAgY29udGFpbmVyID0gc3VwZXIucmVuZGVyVmFsdWUoY29udGFpbmVyKTsKICAgICAgY29uc3Qgc2VsZWN0b3IgPSBgYnV0dG9uW3R5cGU9ImJ1dHRvbiJdW3lhd2YtY29uZmlnLWlucHV0PSIke3RoaXMuY29uZmlnSWR9Il1gOwogICAgICBjb25zdCBidXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IHRleHQgPSBjb25maWcgPyBrZXlib2FyZC5uYW1lKGNvbmZpZykgOiBpMThuLmtleWJvYXJkRGlzYWJsZWQ7CiAgICAgIGlmIChidXR0b24gJiYgYnV0dG9uLnRleHRDb250ZW50ICE9PSB0ZXh0KSB7CiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDsKICAgICAgfQogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfQogIH0KICBydWxlLmNsYXNzLktleWJvYXJkQ29uZmlnSXRlbSA9IEtleWJvYXJkQ29uZmlnSXRlbTsKICBydWxlLnR5cGVzLmtleSA9IEtleWJvYXJkQ29uZmlnSXRlbTsKCiAgLyoqCiAgICog5LiA5Liq5paH5pys6L6T5YWl5qGGCiAgICog5a+55bqU5LiA5LiqIHRleHRhcmVhIOi+k+WFpeahhgogICAqLwogIGNsYXNzIFRleHRDb25maWdJdGVtIGV4dGVuZHMgQ29uZmlnSXRlbSB7CiAgICBjb25zdHJ1Y3RvcihpdGVtLCBwYXJlbnQpIHsKICAgICAgc3VwZXIoaXRlbSwgcGFyZW50KTsKICAgIH0KICAgIGdldCBpbml0aWFsKCkgeyByZXR1cm4gJyc7IH0KICAgIG5vcm1hbGl6ZSh2YWx1ZSkgewogICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykgcmV0dXJuIHRoaXMuaW5pdGlhbDsKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogICAgcmVuZGVyKCkgewogICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29uZmlnLWl0ZW0nLCB0aGlzLmNvbmZpZ0lkKTsKICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLXRleHQnKTsKICAgICAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpOwogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgdGV4dGFyZWEuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctdGV4dGFyZWEnLCAnV19pbnB1dCcpOwogICAgICB9IGVsc2UgewogICAgICAgIHRleHRhcmVhLmNsYXNzTmFtZSA9ICd5YXdmLWNvbmZpZy10ZXh0YXJlYSB3b28taW5wdXQtbWFpbic7CiAgICAgIH0KICAgICAgdGV4dGFyZWEudmFsdWUgPSB0aGlzLmdldENvbmZpZygpOwogICAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGV2ZW50ID0+IHsKICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgdGV4dGFyZWEudmFsdWUgPSB0aGlzLmdldENvbmZpZygpOwogICAgICAgIGVsc2UgdGhpcy5zZXRDb25maWcodGV4dGFyZWEudmFsdWUpOwogICAgICB9KTsKICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGV2ZW50ID0+IHsKICAgICAgICB0aGlzLnJlbmRlclZhbHVlKGNvbnRhaW5lcik7CiAgICAgIH0pOwogICAgICB0ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29uZmlnLWlucHV0JywgdGhpcy5jb25maWdJZCk7CiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDcpIHsKICAgICAgICBjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgd3JhcC5jbGFzc05hbWUgPSAnd29vLWlucHV0LXdyYXAnOwogICAgICAgIHRleHRhcmVhLnJlcGxhY2VXaXRoKHdyYXApOwogICAgICAgIHdyYXAuYXBwZW5kKHRleHRhcmVhKTsKICAgICAgfQogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfQogICAgcmVuZGVyVmFsdWUoY29udGFpbmVyKSB7CiAgICAgIGNvbnRhaW5lciA9IHN1cGVyLnJlbmRlclZhbHVlKGNvbnRhaW5lcik7CiAgICAgIGNvbnN0IHNlbGVjdG9yID0gYHRleHRhcmVhW3lhd2YtY29uZmlnLWlucHV0PSIke3RoaXMuY29uZmlnSWR9Il1gOwogICAgICBjb25zdCB0ZXh0YXJlYSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgaWYgKHRleHRhcmVhICYmIHRleHRhcmVhLnZhbHVlICE9PSBjb25maWcpIHsKICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9IGNvbmZpZzsKICAgICAgfQogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfQogIH0KICBydWxlLmNsYXNzLlRleHRDb25maWdJdGVtID0gVGV4dENvbmZpZ0l0ZW07CiAgcnVsZS50eXBlcy50ZXh0ID0gVGV4dENvbmZpZ0l0ZW07CgogIC8qKgogICAqIOaYvuekuuS4gOS4quWwj+Wbvuagh++8jOm8oOagh+WIkuS4iuWOu+WPr+S7peaYvuekuuW8ueWHuui1t+azoQogICAqIOi/meS4qumhueebruS4jeWvueW6lOiuvue9ruWAvAogICAqLwogIGNsYXNzIEJ1YmJsZUNvbmZpZ0l0ZW0gZXh0ZW5kcyBCYXNlQ29uZmlnSXRlbSB7CiAgICBjb25zdHJ1Y3RvcihpdGVtLCBwYXJlbnQpIHsKICAgICAgc3VwZXIoaXRlbSwgcGFyZW50KTsKICAgIH0KICAgIHJlbmRlciguLi5hcmdzKSB7CiAgICAgIGNvbnN0IGNvbnRlbnQgPSBzdXBlci5yZW5kZXIoLi4uYXJncyk7CiAgICAgIGNvbnN0IGNvbnRlbnRMYWJlbCA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignbGFiZWwnKTsKICAgICAgY29udGVudExhYmVsLnJlcGxhY2VXaXRoKC4uLkFycmF5LmZyb20oY29udGVudExhYmVsLmNoaWxkTm9kZXMpKTsKICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBjb25zdCBpY29uVHlwZSA9IHRoaXMuaWNvbiB8fCAnYXNrJzsKICAgICAgbGV0IGljb247CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpOwogICAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnV19pY29uJywgJ3lhd2YtYnViYmxlLWljb24nLCBgaWNvbl8ke2ljb25UeXBlfVNgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBpY29uVHlwZVY3ID0gewogICAgICAgICAgYXNrOiAnaGVscCcsCiAgICAgICAgICB3YXJuOiAnd2FybicsCiAgICAgICAgICBzdWNjOiAnc3VjY2VzcycsCiAgICAgICAgfVtpY29uVHlwZV07CiAgICAgICAgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGljb24uY2xhc3NOYW1lID0gJ3lhd2YtYnViYmxlLWljb24nOwogICAgICAgIGNvbnN0IHN2ZyA9IGljb24uYXBwZW5kQ2hpbGQodWkuaWNvbihpY29uVHlwZVY3KS5kb2N1bWVudEVsZW1lbnQpOwogICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgYHdvby10aXAtaWNvbiB3b28tdGlwLSR7aWNvblR5cGVWN31GaWxsYCk7CiAgICAgIH0KICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGljb24pOwogICAgICB1aS5idWJibGUoY29udGVudCwgaWNvbik7CiAgICAgIHJldHVybiBjb250YWluZXI7CiAgICB9CiAgfQogIHJ1bGUuY2xhc3MuQnViYmxlQ29uZmlnSXRlbSA9IEJ1YmJsZUNvbmZpZ0l0ZW07CiAgcnVsZS50eXBlcy5idWJibGUgPSBCdWJibGVDb25maWdJdGVtOwoKICBpMThuLmNvbGxlY3Rpb25BZGRCdXR0b24gPSB7CiAgICBjbjogJ+a3u+WKoCcsCiAgICB0dzogJ+aWsOWinicsCiAgICBlbjogJ0FkZCcsCiAgfTsKCiAgY2xhc3MgQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gZXh0ZW5kcyBDb25maWdJdGVtIHsKICAgIGdldCBpbml0aWFsKCkgeyByZXR1cm4gW107IH0KICAgIG5vcm1hbGl6ZSh2YWx1ZSkgewogICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gW107CiAgICAgIHJldHVybiB2YWx1ZS5tYXAoaXRlbSA9PiB0aGlzLm5vcm1hbGl6ZUl0ZW0oaXRlbSkpLmZpbHRlcihpdGVtID0+IGl0ZW0gIT0gbnVsbCk7CiAgICB9CiAgICBub3JtYWxpemVJdGVtKGl0ZW0pIHsgcmV0dXJuIGl0ZW07IH0KICAgIHRyYWNrKGl0ZW0sIGluZGV4ID0gLTEpIHsgcmV0dXJuICcnICsgaW5kZXg7IH0KICAgIHJlbmRlckxpc3RpdGVtKGl0ZW0sIGluZGV4KSB7CiAgICAgIGNvbnN0IGxpc3RpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGxpc3RpdGVtLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWNvbGxlY3Rpb24taXRlbScsICdXX2J0bl9iJywgJ1dfYnRuX3RhZycpOwogICAgICB9IGVsc2UgewogICAgICAgIGxpc3RpdGVtLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWNvbGxlY3Rpb24taXRlbScpOwogICAgICB9CiAgICAgIGNvbnN0IHRyYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyB0aGlzLnRyYWNrKGl0ZW0sIGluZGV4KSA6IHRoaXMudHJhY2soaXRlbSk7CiAgICAgIGxpc3RpdGVtLmRhdGFzZXQueWF3ZlRyYWNrID0gdHJhY2s7CiAgICAgIGNvbnN0IGRlbGV0ZUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgIGRlbGV0ZUl0ZW0uY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctY29sbGVjdGlvbi1yZW1vdmUnKTsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGRlbGV0ZUl0ZW0uaW5uZXJIVE1MID0gJzxhIGNsYXNzPSJXX2ZpY29uIGZpY29uX2Nsb3NlIFNfZmljb24iIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPlg8L2E+JzsKICAgICAgfSBlbHNlIHsKICAgICAgICBkZWxldGVJdGVtLmlubmVySFRNTCA9ICc8aSBjbGFzcz0id29vLWZvbnQgd29vLWZvbnQtLWNyb3NzIiB5YXdmLWNvbXBvbmVudC10YWc9Indvby1mb250aWNvbiI+PC9pPic7CiAgICAgIH0KICAgICAgbGlzdGl0ZW0uYXBwZW5kQ2hpbGQoZGVsZXRlSXRlbSk7CiAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0tY29udGVudCcpOwogICAgICBjb250ZW50LmFwcGVuZENoaWxkKHRoaXMucmVuZGVySXRlbShpdGVtKSk7CiAgICAgIGxpc3RpdGVtLmFwcGVuZENoaWxkKGNvbnRlbnQpOwogICAgICByZXR1cm4gbGlzdGl0ZW07CiAgICB9CiAgICByZW5kZXIoKSB7CiAgICAgIHJldHVybiByZWZlcmVuY2UgPT4gewogICAgICAgIC8qKiBAdHlwZSB7SFRNTExhYmVsRWxlbWVudH0gKi8KICAgICAgICBjb25zdCBsYWJlbCA9IHJlZmVyZW5jZTsKICAgICAgICAvLyDmiJHku6zmuLLmn5PkuIDkuKrovpPlhaXmoYYKICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgaW5wdXQudHlwZSA9ICd0ZXh0JzsKICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWlucHV0JywgJ1dfaW5wdXQnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaW5wdXQuY2xhc3NOYW1lID0gJ3lhd2YtY29uZmlnLWNvbGxlY3Rpb24taW5wdXQgd29vLWlucHV0LW1haW4nOwogICAgICAgIH0KICAgICAgICBsYWJlbC5hcHBlbmRDaGlsZChpbnB1dCk7CiAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNykgewogICAgICAgICAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgd3JhcC5jbGFzc05hbWUgPSAnd29vLWlucHV0LXdyYXAnOwogICAgICAgICAgaW5wdXQucmVwbGFjZVdpdGgod3JhcCk7CiAgICAgICAgICB3cmFwLmFwcGVuZChpbnB1dCk7CiAgICAgICAgfQogICAgICAgIC8vIOWcqOW9k+WJjeagh+etvuWJjemdouiXj+S4gOS4quihqOWNleWFg+e0oO+8jOeUqOS6juWkhOeQhueUqOaIt+i+k+WFpeaPkOS6pAogICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7CiAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWZvcm0nKTsKICAgICAgICBmb3JtLnNldEF0dHJpYnV0ZSgnb25zdWJtaXQnLCAnJyk7CiAgICAgICAgbGFiZWwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZm9ybSwgbGFiZWwpOwogICAgICAgIGNvbnN0IGZvcm1JZCA9IGZvcm0uaWQgPSBuZXh0Q29uZmlnSWQoKTsKICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2Zvcm0nLCBmb3JtSWQpOwogICAgICAgIC8vIOWcqOW9k+WJjeagh+etvuWQjumdouaUvuS4gOS4quaPkOS6pOaMiemSrgogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgY29uc3Qgc3VibWl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICBzdWJtaXQuc2V0QXR0cmlidXRlKCdmb3JtJywgZm9ybUlkKTsKICAgICAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICAgICAgc3VibWl0LmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWNvbGxlY3Rpb24tc3VibWl0JywgJ1dfYnRuX2EnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN1Ym1pdC5jbGFzc05hbWUgPSAneWF3Zi1jb25maWctY29sbGVjdGlvbi1zdWJtaXQgd29vLWJ1dHRvbi1tYWluIHdvby1idXR0b24tbGluZSB3b28tYnV0dG9uLXByaW1hcnkgd29vLWJ1dHRvbi1zIHdvby1idXR0b24tcm91bmQnOwogICAgICAgICAgfQogICAgICAgICAgc3VibWl0LnRleHRDb250ZW50ID0gaTE4bi5jb2xsZWN0aW9uQWRkQnV0dG9uOwogICAgICAgICAgbGFiZWwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc3VibWl0LCBsYWJlbC5uZXh0U2libGluZyk7CiAgICAgICAgfSwgMCk7CiAgICAgICAgLy8g5aSE55CG5o+Q5Lqk5pe255qE5pON5L2cCiAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBhc3luYyBldmVudCA9PiB7CiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgICAgY29uc3QgdXNlcklucHV0ID0gaW5wdXQudmFsdWUudHJpbSgpOwogICAgICAgICAgaWYgKCF1c2VySW5wdXQpIHJldHVybjsKICAgICAgICAgIGlucHV0LmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgdGhpcy5wYXJzZVVzZXJJbnB1dCh1c2VySW5wdXQpOwogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbXMpKSB7CiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB0aGlzLmFkZEl0ZW0oaXRlbSkpOwogICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnOwogICAgICAgICAgfQogICAgICAgICAgaW5wdXQuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgICBsYWJlbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZXZlbnQgPT4gewogICAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICAgIGNvbnN0IGNvZGUgPSBrZXlib2FyZC5ldmVudChldmVudCk7CiAgICAgICAgICBpZiAoY29kZSA9PT0ga2V5Ym9hcmQuY29kZS5FTlRFUikgewogICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAodHlwZW9mIHRoaXMuZ2V0U3VnZ2VzdGlvbkl0ZW1zID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICB0aGlzLnJlbmRlclN1Z2dlc3Rpb25JdGVtcyhpbnB1dCk7CiAgICAgICAgfQoKICAgICAgICAvLyDmmL7npLrmiYDmnInpobnnm67nu4TmiJDnmoTliJfooagKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctY29sbGVjdGlvbi1pdGVtcycpOwogICAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29uZmlnLWl0ZW0nLCB0aGlzLmNvbmZpZ0lkKTsKICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsKICAgICAgICBsaXN0LmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWNvbGxlY3Rpb24tbGlzdCcpOwogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsaXN0KTsKICAgICAgICByZWZlcmVuY2UucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChjb250YWluZXIpOwogICAgICAgIHRoaXMuZ2V0Q29uZmlnKCkuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgIGNvbnN0IGxpc3RpdGVtID0gdGhpcy5yZW5kZXJMaXN0aXRlbShpdGVtLCBpbmRleCk7CiAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGxpc3RpdGVtKTsKICAgICAgICB9KTsKICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgICAgY29uc3QgZGVsZXRlSXRlbSA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcueWF3Zi1jb25maWctY29sbGVjdGlvbi1yZW1vdmUnKTsKICAgICAgICAgIGlmICghZGVsZXRlSXRlbSkgcmV0dXJuOwogICAgICAgICAgY29uc3QgbGlzdGl0ZW0gPSBkZWxldGVJdGVtLnBhcmVudE5vZGU7CiAgICAgICAgICBjb25zdCB0cmFjayA9IGxpc3RpdGVtLmRhdGFzZXQueWF3ZlRyYWNrOwogICAgICAgICAgdGhpcy5yZW1vdmVJdGVtKHRyYWNrKTsKICAgICAgICB9KTsKICAgICAgfTsKICAgIH0KICAgIGFzeW5jIHBhcnNlVXNlcklucHV0KHZhbHVlKSB7CiAgICAgIHJldHVybiBbdmFsdWVdOwogICAgfQogICAgYXN5bmMgcGFyc2VGYXN0SXRlbSh2YWx1ZSwgdHlwZSkgewogICAgICByZXR1cm4gdGhpcy5wYXJzZVVzZXJJbnB1dCh2YWx1ZSk7CiAgICB9CiAgICBhZGRJdGVtKHZhbHVlKSB7CiAgICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IHRyYWNrID0gdGhpcy50cmFjayh2YWx1ZSk7CiAgICAgIGNvbnN0IGluZGV4ID0gdmFsdWVzLmZpbmRJbmRleCgoaXRlbSwgaW5kZXgpID0+IHRoaXMudHJhY2soaXRlbSwgaW5kZXgpID09PSB0cmFjayk7CiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHZhbHVlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7CiAgICAgIHRoaXMuc2V0Q29uZmlnKHZhbHVlcyk7CiAgICB9CiAgICByZW1vdmVJdGVtKHRyYWNrKSB7CiAgICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGluZGV4ID0gdmFsdWVzLmZpbmRJbmRleCgoaXRlbSwgaW5kZXgpID0+IHRoaXMudHJhY2soaXRlbSwgaW5kZXgpID09PSB0cmFjayk7CiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHZhbHVlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNldENvbmZpZyh2YWx1ZXMpOwogICAgfQogICAgcmVuZGVySXRlbShpdGVtKSB7CiAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpdGVtKTsKICAgIH0KICAgIHVwZGF0ZUl0ZW0oY29udGFpbmVyLCBpdGVtKSB7CiAgICAgIGNvbnRhaW5lci50ZXh0Q29udGVudCA9IGl0ZW07CiAgICB9CiAgICByZW5kZXJWYWx1ZShjb250YWluZXIpIHsKICAgICAgY29uc3QgdmFsdWVzID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgY29uc3QgbGlzdCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1jb25maWctY29sbGVjdGlvbi1saXN0Jyk7CiAgICAgIGNvbnN0IGxpc3RpdGVtcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcueWF3Zi1jb25maWctY29sbGVjdGlvbi1pdGVtJyk7CiAgICAgIGNvbnN0IGxpc3RpdGVtTWFwID0gbmV3IE1hcCgpOwogICAgICBbLi4ubGlzdGl0ZW1zXS5mb3JFYWNoKGxpc3RpdGVtID0+IHsKICAgICAgICBsaXN0aXRlbU1hcC5zZXQobGlzdGl0ZW0uZGF0YXNldC55YXdmVHJhY2ssIGxpc3RpdGVtKTsKICAgICAgfSk7CiAgICAgIGxpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgIHZhbHVlcy5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHsKICAgICAgICBjb25zdCB0cmFjayA9IHRoaXMudHJhY2sodmFsdWUsIGluZGV4KTsKICAgICAgICBpZiAobGlzdGl0ZW1NYXAuaGFzKHRyYWNrKSkgewogICAgICAgICAgY29uc3QgbGlzdGl0ZW0gPSBsaXN0aXRlbU1hcC5nZXQodHJhY2spOwogICAgICAgICAgY29uc3QgY29udGVudCA9IGxpc3RpdGVtLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0tY29udGVudCcpOwogICAgICAgICAgdGhpcy51cGRhdGVJdGVtKGNvbnRlbnQsIHZhbHVlKTsKICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQobGlzdGl0ZW0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBsaXN0aXRlbSA9IHRoaXMucmVuZGVyTGlzdGl0ZW0odmFsdWUsIGluZGV4KTsKICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQobGlzdGl0ZW0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIEBwYXJhbSB7SFRNTElucHV0RWxlbWVudH0gaW5wdXQKICAgICAqLwogICAgcmVuZGVyU3VnZ2VzdGlvbkl0ZW1zKGlucHV0KSB7CiAgICAgIGNvbnN0IHN1Z2dlc3Rpb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgc3VnZ2VzdGlvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdsYXllcl9tZW51X2xpc3QnLCAneWF3Zi1jb2xsZWN0aW9uLXN1Z2dlc3Rpb24nKTsKICAgICAgY29uc3Qgc3VnZ2VzdGlvbkxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpOwogICAgICBzdWdnZXN0aW9uTGlzdC5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbGxlY3Rpb24tc3VnZ2VzdGlvbi1saXN0Jyk7CiAgICAgIHN1Z2dlc3Rpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoc3VnZ2VzdGlvbkxpc3QpOwogICAgICAvKiogQHR5cGUge0hUTUxMSUVsZW1lbnRbXX0gKi8KICAgICAgY29uc3Qgc3VnZ2VzdGlvbkl0ZW1zID0gW107CiAgICAgIGxldCBzdWdnZXN0aW9uSXRlbXNTaG93biA9IGZhbHNlOwogICAgICBjb25zdCBoaWRlU3VnZ2VzdGlvbkl0ZW1zID0gKCkgPT4gewogICAgICAgIHN1Z2dlc3Rpb25JdGVtc1Nob3duID0gZmFsc2U7CiAgICAgICAgaWYgKCFzdWdnZXN0aW9uQ29udGFpbmVyLnBhcmVudE5vZGUpIHJldHVybjsKICAgICAgICBzdWdnZXN0aW9uQ29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3VnZ2VzdGlvbkNvbnRhaW5lcik7CiAgICAgIH07CiAgICAgIGNvbnN0IG9sZFBvc2l0aW9uID0gQXJyYXkoMykuZmlsbChOYU4pOwogICAgICBjb25zdCB1cGRhdGVQb3NpdGlvbiA9ICgpID0+IHsKICAgICAgICBpZiAoIXN1Z2dlc3Rpb25JdGVtc1Nob3duKSByZXR1cm47CiAgICAgICAgY29uc3QgcmVjdHMgPSBpbnB1dC5nZXRDbGllbnRSZWN0cygpOwogICAgICAgIGlmICghcmVjdHMgfHwgIXJlY3RzWzBdKSByZXR1cm47CiAgICAgICAgY29uc3QgeyBsZWZ0LCB3aWR0aCwgYm90dG9tIH0gPSByZWN0c1swXTsKICAgICAgICBjb25zdCBbb2xkTGVmdCwgb2xkV2lkdGgsIG9sZEJvdHRvbV0gPSBvbGRQb3NpdGlvbjsKICAgICAgICBpZiAobGVmdCAhPT0gb2xkTGVmdCkgc3VnZ2VzdGlvbkNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gTWF0aC5yb3VuZChsZWZ0KSArICdweCc7CiAgICAgICAgaWYgKHdpZHRoICE9PSBvbGRXaWR0aCkgc3VnZ2VzdGlvbkNvbnRhaW5lci5zdHlsZS5taW5XaWR0aCA9IChNYXRoLnJvdW5kKHdpZHRoKSAtIDQpICsgJ3B4JzsKICAgICAgICBpZiAoYm90dG9tICE9PSBvbGRCb3R0b20pIHN1Z2dlc3Rpb25Db250YWluZXIuc3R5bGUudG9wID0gTWF0aC5yb3VuZChib3R0b20pICsgJ3B4JzsKICAgICAgICBvbGRQb3NpdGlvbi5zcGxpY2UoMCwgMywgbGVmdCwgd2lkdGgsIGJvdHRvbSk7CiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGVQb3NpdGlvbik7CiAgICAgIH07CiAgICAgIGNvbnN0IHNob3dTdWdnZXN0aW9uSXRlbXMgPSBpdGVtcyA9PiB7CiAgICAgICAgc3VnZ2VzdGlvbkxpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgc3VnZ2VzdGlvbkl0ZW1zLnNwbGljZSgwKTsKICAgICAgICBzdWdnZXN0aW9uSXRlbXMucHVzaCguLi5pdGVtcy5tYXAoaXRlbSA9PiB7CiAgICAgICAgICBjb25zdCBsaXN0aXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgICBsaXN0aXRlbS5jbGFzc0xpc3QuYWRkKCd5YXdmLWxpc3Qtc3VnZ2VzdGlvbi1pdGVtJyk7CiAgICAgICAgICBsaXN0aXRlbS5kYXRhc2V0Lnlhd2ZTdWdnZXN0aW9uRGF0YSA9IEpTT04uc3RyaW5naWZ5KGl0ZW0pOwogICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgIGxpbmsuaHJlZiA9ICdqYXZhc2NyaXB0OnZvaWQoMCk7JzsKICAgICAgICAgIGxpc3RpdGVtLmFwcGVuZENoaWxkKGxpbmspOwogICAgICAgICAgdGhpcy5yZW5kZXJTdWdnZXN0aW9uSXRlbShsaW5rLCBpdGVtKTsKICAgICAgICAgIHN1Z2dlc3Rpb25MaXN0LmFwcGVuZENoaWxkKGxpc3RpdGVtKTsKICAgICAgICAgIHJldHVybiBsaXN0aXRlbTsKICAgICAgICB9KSk7CiAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCkgc3VnZ2VzdGlvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICBlbHNlIHN1Z2dlc3Rpb25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBpZiAoIXN1Z2dlc3Rpb25Db250YWluZXIucGFyZW50Tm9kZSkgewogICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdWdnZXN0aW9uQ29udGFpbmVyKTsKICAgICAgICB9CiAgICAgICAgc3VnZ2VzdGlvbkl0ZW1zU2hvd24gPSB0cnVlOwogICAgICAgIHVwZGF0ZVBvc2l0aW9uKCk7CiAgICAgIH07CiAgICAgIGNvbnN0IHVwZGF0ZUlucHV0U3VnZ2VzdGlvbiA9IGFzeW5jICgpID0+IHsKICAgICAgICBjb25zdCB1c2VySW5wdXQgPSBpbnB1dC52YWx1ZS50cmltKCk7CiAgICAgICAgY29uc3QgaGFzRm9jdXMgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBpbnB1dDsKICAgICAgICBpZiAoIWhhc0ZvY3VzKSB7CiAgICAgICAgICBoaWRlU3VnZ2VzdGlvbkl0ZW1zKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgdGhpcy5nZXRTdWdnZXN0aW9uSXRlbXModXNlcklucHV0KTsKICAgICAgICAgIGlmICh1c2VySW5wdXQgIT09IGlucHV0LnZhbHVlLnRyaW0oKSkgcmV0dXJuOwogICAgICAgICAgc2hvd1N1Z2dlc3Rpb25JdGVtcyhpdGVtcyk7CiAgICAgICAgfQogICAgICB9OwogICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZUlucHV0U3VnZ2VzdGlvbik7CiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdXBkYXRlSW5wdXRTdWdnZXN0aW9uKTsKICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHVwZGF0ZUlucHV0U3VnZ2VzdGlvbik7CiAgICAgIGNvbnN0IGNob3NlU3VnZ2VzdGlvbkxpc3RJdGVtID0gbGlzdGl0ZW0gPT4gewogICAgICAgIGNvbnN0IGl0ZW0gPSBKU09OLnBhcnNlKGxpc3RpdGVtLmRhdGFzZXQueWF3ZlN1Z2dlc3Rpb25EYXRhKTsKICAgICAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5ub3JtYWxpemVJdGVtKHRoaXMucGFyc2VTdWdnZXN0aW9uSXRlbShpdGVtKSk7CiAgICAgICAgaWYgKG5vcm1hbGl6ZWQgPT09IG51bGwpIHJldHVybjsKICAgICAgICB0aGlzLmFkZEl0ZW0obm9ybWFsaXplZCk7CiAgICAgICAgaW5wdXQudmFsdWUgPSAnJzsKICAgICAgICB1cGRhdGVJbnB1dFN1Z2dlc3Rpb24oKTsKICAgICAgfTsKICAgICAgY29uc3QgZ2V0Rm9jdXMgPSAoKSA9PiBzdWdnZXN0aW9uSXRlbXMuZmluZChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCd5YXdmLWN1cnJlbnQnKSk7CiAgICAgIGNvbnN0IHNldEZvY3VzID0gY3VycmVudCA9PiBzdWdnZXN0aW9uSXRlbXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBpZiAoaXRlbSA9PT0gY3VycmVudCkgewogICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCd5YXdmLWN1cnJlbnQnKTsKICAgICAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIGl0ZW0uY2xhc3NMaXN0LmFkZCgnY3VyJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgneWF3Zi1jdXJyZW50Jyk7CiAgICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2N1cicpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGNvbnN0IGtleWRvd25FdmVudEhhbmRsZXIgPSBldmVudCA9PiB7CiAgICAgICAgY29uc3QgaGFuZGxlciA9IHsKICAgICAgICAgIFtrZXlib2FyZC5jb2RlLkVOVEVSXTogKCkgPT4gewogICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gZ2V0Rm9jdXMoKTsKICAgICAgICAgICAgaWYgKCFjdXJyZW50KSByZXR1cm47CiAgICAgICAgICAgIGNob3NlU3VnZ2VzdGlvbkxpc3RJdGVtKGN1cnJlbnQpOwogICAgICAgICAgfSwKICAgICAgICAgIFtrZXlib2FyZC5jb2RlLlVQXTogKCkgPT4gewogICAgICAgICAgICBjb25zdCBvbGQgPSBnZXRGb2N1cygpOwogICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gb2xkICYmIG9sZC5wcmV2aW91c1NpYmxpbmcgfHwgc3VnZ2VzdGlvbkl0ZW1zW3N1Z2dlc3Rpb25JdGVtcy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgaWYgKGN1cnJlbnQpIHNldEZvY3VzKGN1cnJlbnQpOwogICAgICAgICAgfSwKICAgICAgICAgIFtrZXlib2FyZC5jb2RlLkRPV05dOiAoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IG9sZCA9IGdldEZvY3VzKCk7CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBvbGQgJiYgb2xkLm5leHRTaWJsaW5nIHx8IHN1Z2dlc3Rpb25JdGVtc1swXTsKICAgICAgICAgICAgaWYgKGN1cnJlbnQpIHNldEZvY3VzKGN1cnJlbnQpOwogICAgICAgICAgfSwKICAgICAgICB9W2tleWJvYXJkLmV2ZW50KGV2ZW50KV07CiAgICAgICAgaWYgKCFoYW5kbGVyKSByZXR1cm47CiAgICAgICAgaGFuZGxlcigpOwogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIH07CiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBrZXlkb3duRXZlbnRIYW5kbGVyKTsKICAgICAgc3VnZ2VzdGlvbkxpc3QuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZXZlbnQgPT4gewogICAgICAgIGNvbnN0IGxpc3RpdGVtID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2xpLnlhd2YtbGlzdC1zdWdnZXN0aW9uLWl0ZW0nKTsKICAgICAgICBjaG9zZVN1Z2dlc3Rpb25MaXN0SXRlbShsaXN0aXRlbSk7CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgfSk7CiAgICAgIHN1Z2dlc3Rpb25MaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGV2ZW50ID0+IHsKICAgICAgICBpZiAoIShldmVudC50YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuOwogICAgICAgIGNvbnN0IGxpc3RpdGVtID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2xpLnlhd2YtbGlzdC1zdWdnZXN0aW9uLWl0ZW0nKTsKICAgICAgICBzZXRGb2N1cyhsaXN0aXRlbSk7CiAgICAgIH0pOwogICAgfTsKICAgIHBhcnNlU3VnZ2VzdGlvbkl0ZW0oaXRlbSkgeyByZXR1cm4gaXRlbTsgfQogIH0KICBydWxlLmNsYXNzLkNvbGxlY3Rpb25Db25maWdJdGVtID0gQ29sbGVjdGlvbkNvbmZpZ0l0ZW07CgogIGNsYXNzIFN0cmluZ0NvbGxlY3Rpb25Db25maWdJdGVtIGV4dGVuZHMgQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gewogICAgbm9ybWFsaXplSXRlbShpdGVtKSB7IHJldHVybiAoJycgKyBpdGVtKS50cmltKCk7IH0KICAgIHRyYWNrKGl0ZW0sIGluZGV4ID0gLTEpIHsgcmV0dXJuIGl0ZW07IH0KICAgIHJlbmRlciguLi5hcmdzKSB7CiAgICAgIGNvbnN0IHJlbmRlciA9IHN1cGVyLnJlbmRlciguLi5hcmdzKTsKICAgICAgcmV0dXJuIHJlZmVyZW5jZSA9PiB7CiAgICAgICAgcmVuZGVyKHJlZmVyZW5jZSk7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcmVmZXJlbmNlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24taXRlbXMnKTsKICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctY29sbGVjdGlvbi1zdHJpbmcnKTsKICAgICAgfTsKICAgIH0KICAgIHVwZGF0ZUl0ZW0oKSB7CiAgICAgIC8vIHRyYWNrIOi/lOWbnueahOaYr+Wtl+S4suacrOi6q++8jOWmguaenCB0cmFjayDlr7nlupTlrZfkuLLkuI3lupTor6XmnInlj5jljJbvvIzmiYDku6Xml6DpnIDmm7TmlrAKICAgIH0KICB9CiAgcnVsZS5jbGFzcy5TdHJpbmdDb2xsZWN0aW9uQ29uZmlnSXRlbSA9IFN0cmluZ0NvbGxlY3Rpb25Db25maWdJdGVtOwogIHJ1bGUudHlwZXMuc3RyaW5ncyA9IFN0cmluZ0NvbGxlY3Rpb25Db25maWdJdGVtOwoKICBjbGFzcyBSZWdFeHBDb2xsZWN0aW9uQ29uZmlnSXRlbSBleHRlbmRzIFN0cmluZ0NvbGxlY3Rpb25Db25maWdJdGVtIHsKICAgIGNvbnN0cnVjdG9yKGl0ZW0sIHBhcmVudCkgewogICAgICBzdXBlcihpdGVtLCBwYXJlbnQpOwogICAgICB0aGlzLmNvbmZpZ0NhY2hlRGlydHkgPSB0cnVlOwogICAgfQogICAgaW5pdENvbmZpZygpIHsKICAgICAgaWYgKHRoaXMuY29uZmlnSW5pdGlhbGl6ZWQpIHJldHVybjsKICAgICAgc3VwZXIuaW5pdENvbmZpZygpOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsKICAgICAgICB0aGlzLmNvbmZpZ0NhY2hlRGlydHkgPSB0cnVlOwogICAgICB9KTsKICAgIH0KICAgIG5vcm1hbGl6ZUl0ZW0odmFsdWUpIHsKICAgICAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSByZXR1cm4gbnVsbDsKICAgICAgaWYgKHR5cGVvZiB2YWx1ZS5zb3VyY2UgIT09ICdzdHJpbmcnKSByZXR1cm4gbnVsbDsKICAgICAgaWYgKHR5cGVvZiB2YWx1ZS5mbGFncyAhPT0gJ3N0cmluZycgJiYgdmFsdWUuZmxhZ3MgIT09IHZvaWQgMCkgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IHsgc291cmNlLCBmbGFncyB9ID0gdmFsdWU7CiAgICAgIHJldHVybiB7IHNvdXJjZSwgZmxhZ3MgfTsKICAgIH0KICAgIHRyYWNrKHsgc291cmNlLCBmbGFncyB9LCBpbmRleCA9IC0xKSB7IHJldHVybiBgLyR7c291cmNlfS8ke2ZsYWdzfWA7IH0KICAgIHJlbmRlckl0ZW0oeyBzb3VyY2UsIGZsYWdzIH0pIHsKICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGAvJHtzb3VyY2V9LyR7ZmxhZ3N9YCk7CiAgICB9CiAgICBhc3luYyBwYXJzZVVzZXJJbnB1dCh2YWx1ZSkgewogICAgICBsZXQgcmVnZXhwID0gbnVsbDsKICAgICAgdHJ5IHsKICAgICAgICByZWdleHAgPSBuZXcgUmVnRXhwKC4uLnZhbHVlLm1hdGNoKC9eXC8oLiopXC8oW2EtekEtWl0qKSQvKS5zbGljZSgxKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmVnZXhwID0gbmV3IFJlZ0V4cCh2YWx1ZSwgJ211Jyk7CiAgICAgICAgfSBjYXRjaCAoZTIpIHsgLyogZW1wdHkgKi8gfQogICAgICB9CiAgICAgIGlmICghcmVnZXhwKSByZXR1cm4gbnVsbDsKICAgICAgY29uc3QgeyBzb3VyY2UsIGZsYWdzIH0gPSByZWdleHA7CiAgICAgIGlmIChzb3VyY2UgPT09ICcoPzopJykgcmV0dXJuIG51bGw7CiAgICAgIHJldHVybiBbeyBzb3VyY2UsIGZsYWdzIH1dOwogICAgfQogICAgLy8g5oiR5Lus5YKo5a2Y5LiA5Lu957yW6K+R5aW955qE5q2j5YiZ6KGo6L6+5byP77yM6L+Z5qC35Y+v5Lul5pa55L6/5L2/55SoCiAgICBnZXRDb25maWdDb21waWxlZCgpIHsKICAgICAgdGhpcy51cGRhdGVDb25maWdDYWNoZSgpOwogICAgICByZXR1cm4gdGhpcy5jb25maWdDYWNoZTsKICAgIH0KICAgIHVwZGF0ZUNvbmZpZ0NhY2hlKCkgewogICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLmNvbmZpZ0NhY2hlKSAmJiAhdGhpcy5jb25maWdDYWNoZURpcnR5KSByZXR1cm47CiAgICAgIHRoaXMucmVidWlsZENvbmZpZ0NhY2hlKCk7CiAgICB9CiAgICBzZXRDb25maWcoLi4uYXJncykgewogICAgICBjb25zdCByZXN1bHQgPSBzdXBlci5zZXRDb25maWcoLi4uYXJncyk7CiAgICAgIHRoaXMucmVidWlsZENvbmZpZ0NhY2hlTGF0ZXIoKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIHJlYnVpbGRDb25maWdDYWNoZSgpIHsKICAgICAgdGhpcy5jb25maWdDYWNoZSA9IHRoaXMuZ2V0Q29uZmlnKCkubWFwKGl0ZW0gPT4gdGhpcy5jb21waWxlUmVnRXhwKGl0ZW0pKTsKICAgICAgdGhpcy5jb25maWdDYWNoZURpcnR5ID0gZmFsc2U7CiAgICB9CiAgICByZWJ1aWxkQ29uZmlnQ2FjaGVMYXRlcigpIHsKICAgICAgdGhpcy5jb25maWdDYWNoZURpcnR5ID0gdHJ1ZTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuY29uZmlnQ2FjaGVEaXJ0eSkgewogICAgICAgICAgdGhpcy5yZWJ1aWxkQ29uZmlnQ2FjaGUoKTsKICAgICAgICB9CiAgICAgIH0sIDApOwogICAgfQogICAgYWRkSXRlbSh2YWx1ZSkgewogICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLmdldENvbmZpZygpOwogICAgICBjb25zdCB0cmFjayA9IHRoaXMudHJhY2sodmFsdWUpOwogICAgICBjb25zdCBpbmRleCA9IHZhbHVlcy5maW5kSW5kZXgoKGl0ZW0sIGluZGV4KSA9PiB0aGlzLnRyYWNrKGl0ZW0sIGluZGV4KSA9PT0gdHJhY2spOwogICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgdmFsdWVzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgICAgdmFsdWVzLnB1c2godmFsdWUpOwogICAgICBzdXBlci5zZXRDb25maWcodmFsdWVzKTsKICAgIH0KICAgIHJlbW92ZUl0ZW0odHJhY2spIHsKICAgICAgY29uc3QgdmFsdWVzID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgY29uc3QgaW5kZXggPSB2YWx1ZXMuZmluZEluZGV4KChpdGVtLCBpbmRleCkgPT4gdGhpcy50cmFjayhpdGVtLCBpbmRleCkgPT09IHRyYWNrKTsKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIHZhbHVlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CiAgICAgIHN1cGVyLnNldENvbmZpZyh2YWx1ZXMpOwogICAgfQogICAgY29tcGlsZVJlZ0V4cCh7IHNvdXJjZSwgZmxhZ3MgfSkgewogICAgICByZXR1cm4gUmVnRXhwKHNvdXJjZSwgZmxhZ3MpOwogICAgfQogIH0KICBydWxlLmNsYXNzLlJlZ0V4cENvbGxlY3Rpb25Db25maWdJdGVtID0gUmVnRXhwQ29sbGVjdGlvbkNvbmZpZ0l0ZW07CiAgcnVsZS50eXBlcy5yZWdleGVuID0gUmVnRXhwQ29sbGVjdGlvbkNvbmZpZ0l0ZW07CgogIGNsYXNzIFVzZXJJZENvbGxlY3Rpb25Db25maWdJdGVtIGV4dGVuZHMgQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gewogICAgbm9ybWFsaXplSXRlbSh2YWx1ZSkgewogICAgICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHJldHVybiBudWxsOwogICAgICBjb25zdCBpZCA9IFN0cmluZyh2YWx1ZS5pZCk7CiAgICAgIGlmICghaWQgfHwgIStpZCkgcmV0dXJuIG51bGw7CiAgICAgIHJldHVybiB7IGlkIH07CiAgICB9CiAgICB0cmFjayh7IGlkIH0sIGluZGV4ID0gLTEpIHsgcmV0dXJuIGlkOyB9CiAgICByZW5kZXIoLi4uYXJncykgewogICAgICBjb25zdCByZW5kZXIgPSBzdXBlci5yZW5kZXIoLi4uYXJncyk7CiAgICAgIHJldHVybiByZWZlcmVuY2UgPT4gewogICAgICAgIHJlbmRlcihyZWZlcmVuY2UpOwogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJlZmVyZW5jZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW1zJyk7CiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWNvbGxlY3Rpb24tdXNlci1pZCcpOwogICAgICB9OwogICAgfQogICAgcmVuZGVySXRlbSh7IGlkIH0pIHsKICAgICAgY29uc3QgdXNlcml0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgdXNlcml0ZW0uY2xhc3NMaXN0LmFkZCgneWF3Zi1jb25maWctdXNlci1pdGVtJyk7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICB1c2VyaXRlbS5zZXRBdHRyaWJ1dGUoJ3VzZXJjYXJkJywgYGlkPSR7aWR9YCk7CiAgICAgIH0KICAgICAgY29uc3QgdXNlcmF2YXRhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICB1c2VyYXZhdGFyLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLXVzZXItYXZhdGFyJyk7CiAgICAgIHVzZXJpdGVtLmFwcGVuZENoaWxkKHVzZXJhdmF0YXIpOwogICAgICBjb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICB1c2VybmFtZS5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy11c2VyLW5hbWUnKTsKICAgICAgdXNlcml0ZW0uYXBwZW5kQ2hpbGQodXNlcm5hbWUpOwogICAgICByZXF1ZXN0LnVzZXJJbmZvKHsgaWQgfSkudGhlbigoeyBuYW1lLCBhdmF0YXIgfSkgPT4gewogICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgIGltZy5zcmMgPSBhdmF0YXI7CiAgICAgICAgaW1nLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLXVzZXItYXZhdGFyLWltZycpOwogICAgICAgIHVzZXJhdmF0YXIuYXBwZW5kQ2hpbGQoaW1nKTsKICAgICAgICB1c2VybmFtZS50ZXh0Q29udGVudCA9IG5hbWU7CiAgICAgIH0pOwogICAgICByZXR1cm4gdXNlcml0ZW07CiAgICB9CiAgICBhc3luYyBwYXJzZVVzZXJJbnB1dCh2YWx1ZSkgewogICAgICBjb25zdCB1c2VybmFtZSA9IHZhbHVlLnJlcGxhY2UoL15ALywgJycpOwogICAgICBjb25zdCB1c2VyID0gYXdhaXQgcmVxdWVzdC51c2VySW5mbyh7IG5hbWU6IHVzZXJuYW1lIH0pOwogICAgICBpZiAoIXVzZXIgfHwgIXVzZXIuaWQpIHJldHVybiBudWxsOwogICAgICByZXR1cm4gW3sgaWQ6IHVzZXIuaWQgfV07CiAgICB9CiAgICBhc3luYyBwYXJzZUZhc3RJdGVtKHZhbHVlLCB0eXBlKSB7CiAgICAgIHJldHVybiBbdmFsdWVdOwogICAgfQogICAgdXBkYXRlSXRlbSgpIHsKICAgIH0KICAgIGFzeW5jIGdldFN1Z2dlc3Rpb25JdGVtcyh1c2VySW5wdXQpIHsKICAgICAgcmV0dXJuIHJlcXVlc3QudXNlclN1Z2dlc3QodXNlcklucHV0LnJlcGxhY2UoL15ALywgJycpKTsKICAgIH0KICAgIHJlbmRlclN1Z2dlc3Rpb25JdGVtKGxpc3RpdGVtLCBpdGVtKSB7CiAgICAgIGxpc3RpdGVtLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGl0ZW0ubmFtZSkpOwogICAgfQogIH0KICBydWxlLmNsYXNzLlVzZXJJZENvbGxlY3Rpb25Db25maWdJdGVtID0gVXNlcklkQ29sbGVjdGlvbkNvbmZpZ0l0ZW07CiAgcnVsZS50eXBlcy51c2VycyA9IFVzZXJJZENvbGxlY3Rpb25Db25maWdJdGVtOwoKICBjbGFzcyBVc2VyTmFtZUNvbGxlY3Rpb25Db25maWdJdGVtIGV4dGVuZHMgU3RyaW5nQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gewogICAgYXN5bmMgZ2V0U3VnZ2VzdGlvbkl0ZW1zKHVzZXJJbnB1dCkgewogICAgICBjb25zdCB1c2VycyA9IGF3YWl0IHJlcXVlc3QudXNlclN1Z2dlc3QodXNlcklucHV0LnJlcGxhY2UoL15ALywgJycpKTsKICAgICAgcmV0dXJuIHVzZXJzLm1hcCh1c2VyID0+IHVzZXIubmFtZSk7CiAgICB9CiAgICByZW5kZXJTdWdnZXN0aW9uSXRlbShsaXN0aXRlbSwgaXRlbSkgewogICAgICBsaXN0aXRlbS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpdGVtKSk7CiAgICB9CiAgICByZW5kZXJJdGVtKHZhbHVlKSB7CiAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnQCcgKyB2YWx1ZSk7CiAgICB9CiAgICBhc3luYyBwYXJzZVVzZXJJbnB1dCh1c2VySW5wdXQpIHsKICAgICAgcmV0dXJuIFt1c2VySW5wdXQudHJpbSgpLnJlcGxhY2UoL15APy8sICcnKV07CiAgICB9CiAgICBhc3luYyBwYXJzZUZhc3RJdGVtKHZhbHVlKSB7CiAgICAgIHJldHVybiBbdmFsdWUubmFtZV07CiAgICB9CiAgfQogIHJ1bGUuY2xhc3MuVXNlck5hbWVDb2xsZWN0aW9uQ29uZmlnSXRlbSA9IFVzZXJOYW1lQ29sbGVjdGlvbkNvbmZpZ0l0ZW07CiAgcnVsZS50eXBlcy51c2VybmFtZXMgPSBVc2VyTmFtZUNvbGxlY3Rpb25Db25maWdJdGVtOwoKICBjbGFzcyBUb3BpY0NvbGxlY3Rpb25Db25maWdJdGVtIGV4dGVuZHMgU3RyaW5nQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gewogICAgYXN5bmMgZ2V0U3VnZ2VzdGlvbkl0ZW1zKHVzZXJJbnB1dCkgewogICAgICBjb25zdCB0b3BpY3MgPSBhd2FpdCByZXF1ZXN0LnRvcGljU3VnZ2VzdCh1c2VySW5wdXQucmVwbGFjZSgvIy9nLCAnJykpOwogICAgICByZXR1cm4gdG9waWNzOwogICAgfQogICAgcmVuZGVyU3VnZ2VzdGlvbkl0ZW0obGlzdGl0ZW0sIGl0ZW0pIHsKICAgICAgbGlzdGl0ZW0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaXRlbSkpOwogICAgfQogICAgcmVuZGVySXRlbSh2YWx1ZSkgewogICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJyMnICsgdmFsdWUgKyAnIycpOwogICAgfQogICAgYXN5bmMgcGFyc2VVc2VySW5wdXQodXNlcklucHV0KSB7CiAgICAgIHJldHVybiBbdXNlcklucHV0LnRyaW0oKS5yZXBsYWNlKC8jL2csICcnKV07CiAgICB9CiAgICBhc3luYyBwYXJzZUZhc3RJdGVtKHZhbHVlKSB7CiAgICAgIHJldHVybiBbdmFsdWVdOwogICAgfQogIH0KICBydWxlLmNsYXNzLlRvcGljQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gPSBUb3BpY0NvbGxlY3Rpb25Db25maWdJdGVtOwogIHJ1bGUudHlwZXMudG9waWNzID0gVG9waWNDb2xsZWN0aW9uQ29uZmlnSXRlbTsKCiAgLy8g6L+Z5Liq55uu5YmN5LiN5pSv5oyBIFY3CiAgY2xhc3MgR3JvdXBJZENvbGxlY3Rpb25Db25maWdJdGVtIGV4dGVuZHMgQ29sbGVjdGlvbkNvbmZpZ0l0ZW0gewogICAgbm9ybWFsaXplSXRlbSh2YWx1ZSkgewogICAgICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHJldHVybiBudWxsOwogICAgICBjb25zdCBpZCA9IFN0cmluZyh2YWx1ZS5pZCk7CiAgICAgIHJldHVybiB7IGlkIH07CiAgICB9CiAgICB0cmFjayh7IGlkIH0sIGluZGV4ID0gLTEpIHsgcmV0dXJuIGlkOyB9CiAgICByZW5kZXIoLi4uYXJncykgewogICAgICBjb25zdCByZW5kZXIgPSBzdXBlci5yZW5kZXIoLi4uYXJncyk7CiAgICAgIHJldHVybiByZWZlcmVuY2UgPT4gewogICAgICAgIHJlbmRlcihyZWZlcmVuY2UpOwogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHJlZmVyZW5jZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW1zJyk7CiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWNvbGxlY3Rpb24tZ3JvdXAtaWQnKTsKICAgICAgfTsKICAgIH0KICAgIHJlbmRlckl0ZW0odmFsdWUpIHsKICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgOyAoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IGdyb3VwcyA9IGF3YWl0IHJlcXVlc3QuZ3JvdXBMaXN0KCk7CiAgICAgICAgY29uc3QgZ3JvdXAgPSBncm91cHMuZmluZChncm91cCA9PiBncm91cC5pZCA9PT0gdmFsdWUuaWQpOwogICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBncm91cC5uYW1lOwogICAgICB9KCkpOwogICAgICByZXR1cm4gc3BhbjsKICAgIH0KICAgIGFzeW5jIHBhcnNlR3JvdXBJbnB1dCh2YWx1ZSkgewogICAgICBjb25zdCBncm91cHMgPSBhd2FpdCByZXF1ZXN0Lmdyb3VwTGlzdCgpOwogICAgICBjb25zdCBncm91cCA9IGdyb3Vwcy5maW5kKGdyb3VwID0+IGdyb3VwLm5hbWUgPT09IHZhbHVlKTsKICAgICAgcmV0dXJuIFt7IGlkOiBncm91cC5pZCB9XTsKICAgIH0KICAgIGFzeW5jIHBhcnNlRmFzdEl0ZW0odmFsdWUsIHR5cGUpIHsKICAgICAgcmV0dXJuIFt2YWx1ZV07CiAgICB9CiAgICB1cGRhdGVJdGVtKCkgewogICAgfQogICAgYXN5bmMgZ2V0U3VnZ2VzdGlvbkl0ZW1zKHVzZXJJbnB1dCkgewogICAgICBjb25zdCBncm91cHMgPSBhd2FpdCByZXF1ZXN0Lmdyb3VwTGlzdCgpOwogICAgICByZXR1cm4gZ3JvdXBzLmZpbHRlcihncm91cCA9PiBncm91cC5uYW1lLmluY2x1ZGVzKHVzZXJJbnB1dCkpOwogICAgfQogICAgcmVuZGVyU3VnZ2VzdGlvbkl0ZW0obGlzdGl0ZW0sIGl0ZW0pIHsKICAgICAgbGlzdGl0ZW0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaXRlbS5uYW1lKSk7CiAgICB9CiAgfQogIHJ1bGUuY2xhc3MuR3JvdXBJZENvbGxlY3Rpb25Db25maWdJdGVtID0gR3JvdXBJZENvbGxlY3Rpb25Db25maWdJdGVtOwogIHJ1bGUudHlwZXMuZ3JvdXBzID0gR3JvdXBJZENvbGxlY3Rpb25Db25maWdJdGVtOwoKICBjb25zdCBjb25maWdJdGVtQnVpbGRlciA9IGZ1bmN0aW9uIChpdGVtLCBwYXJlbnQpIHsKICAgIGlmICghaXRlbSkgcmV0dXJuIG51bGw7CiAgICBjb25zdCBjb25zdHJ1Y3RvciA9IHJ1bGUudHlwZXNbaXRlbS50eXBlXTsKICAgIGlmICghY29uc3RydWN0b3IpIHsKICAgICAgcmV0dXJuIG5ldyBDb25maWdJdGVtKGl0ZW0sIHBhcmVudCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbmV3IGNvbnN0cnVjdG9yKGl0ZW0sIHBhcmVudCk7CiAgICB9CiAgfTsKCiAgLyoqCiAgICog5o+P6L+w5LiA5Liq5Ye6546w5Zyo6K6+572u56qX5Y+j5Lit55qE6aG555uuCiAgICovCiAgY2xhc3MgUnVsZUl0ZW0gZXh0ZW5kcyBCb29sZWFuQ29uZmlnSXRlbSB7CiAgICBnZXQgdHlwZSgpIHsgcmV0dXJuICdub3JtYWwnOyB9CiAgICBnZXQgZGlzYWJsZWQoKSB7IHJldHVybiBmYWxzZTsgfQogICAgY29uc3RydWN0b3IoaXRlbSkgewogICAgICBzdXBlcihpdGVtLCBudWxsKTsKICAgICAgaWYgKHRoaXMucGFyZW50KSB7CiAgICAgICAgdGhpcy5wYXJlbnQuY2hpbGRyZW4ucHVzaCh0aGlzKTsKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICog5o+P6L+w6K6+572u56qX5Y+j55qE5LiA5Liq5qCH562+6aG1CiAgICovCiAgY2xhc3MgVGFiIGV4dGVuZHMgUnVsZUl0ZW0gewogICAgY29uc3RydWN0b3IoaXRlbSkgewogICAgICBzdXBlcihpdGVtKTsKICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdOwogICAgICB0YWJzLnB1c2godGhpcyk7CiAgICB9CiAgICBnZXQgdHlwZSgpIHsgcmV0dXJuICd0YWInOyB9CiAgICBnZXQgYWx3YXlzKCkgeyByZXR1cm4gdHJ1ZTsgfQogICAgcmVuZGVyKCkgewogICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICBzcGFuLnRleHRDb250ZW50ID0gdGhpcy50ZW1wbGF0ZSgpOwogICAgICByZXR1cm4gc3BhbjsKICAgIH0KICB9CiAgcnVsZS5UYWIgPSBmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIG5ldyBUYWIoaXRlbSk7CiAgfTsKICBydWxlLmNsYXNzLlRhYiA9IFRhYjsKICAvLyDov5nkuKrmoIfnrb7pobXkuI3kvJrlnKjorr7nva7nqpflj6PkuK3mmL7npLrvvIzkvYbmmK/kvJrlh7rnjrDlnKjmkJzntKLnu5Pmnpzph4zpnaIKICBydWxlLnZ0YWIgPSBydWxlLlRhYih7IHR5cGU6ICd2dGFiJyB9KTsKCiAgLyoqCiAgICog5o+P6L+w56qX5Y+j55qE5LiA57uE6K6+572u77yM5LiA57uE6K6+572u5pyJ5LiA5Liq5Yqg57KX5paH5a2X5pi+56S655qE5qCH6aKYCiAgICovCiAgY2xhc3MgR3JvdXAgZXh0ZW5kcyBSdWxlSXRlbSB7CiAgICBjb25zdHJ1Y3RvcihpdGVtKSB7CiAgICAgIGlmICghKGl0ZW0ucGFyZW50IGluc3RhbmNlb2YgVGFiKSkgewogICAgICAgIHRocm93IFR5cGVFcnJvcignR3JvdXAgbXVzdCBpbiBzb21lIFRhYicpOwogICAgICB9CiAgICAgIHN1cGVyKGl0ZW0pOwogICAgICB0aGlzLmNoaWxkcmVuID0gW107CiAgICB9CiAgICBnZXQgdHlwZSgpIHsgcmV0dXJuICdncm91cCc7IH0KICAgIGdldCBhbHdheXMoKSB7IHJldHVybiB0cnVlOyB9CiAgICByZW5kZXIoLi4uYXJncykgewogICAgICBjb25zdCBub2RlID0gc3VwZXIucmVuZGVyKC4uLmFyZ3MpOwogICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWdyb3VwJyk7CiAgICAgIHJldHVybiBub2RlOwogICAgfQogIH0KICBydWxlLmNsYXNzLkdyb3VwID0gR3JvdXA7CiAgcnVsZS5Hcm91cCA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gbmV3IEdyb3VwKGl0ZW0pOwogIH07CgogIC8qKgogICAqIOaPj+i/sOS4gOadoeiuvue9rgogICAqIOiuvue9ruS8muiwg+eUqCBleGVjdXRlIOWIneWni+WMluS4gOasoQogICAqIOS4jeimgemHjei9vSBleGVjdXRlIOWunueOsOmAu+i+ke+8jOebuOWPje+8jOW6lOivpemHjei9veS7peS4i+WHoOS4quWxnuaAp++8mgogICAqICAgY3NzOiBzdHJpbmcg5o+P6L+w6K+l6K6+572u6ZyA6KaB5Yqg5YWl55qEIENTU++8jOaXoOiuuuaYr+WQpuaJk+W8gOiuvue9ruWdh+S8mueUn+aViAogICAqICAgYWNzczogc3RyaW5nIOS7heW9k+ivpeiuvue9ruaJk+W8gOaXtuWKoOWFpei/meS6myBDU1MKICAgKiAgIGluaXQ6IEZ1bmN0aW9uIOWIneWni+WMluaXtuS8muWbnuiwg+S4gOasoQogICAqICAgYWluaXQ6IEZ1bmN0aW9uIOS7heW9k+ivpeiuvue9ruaJk+W8gOaXtu+8jOWIneWni+WMluaXtuWbnuiwg+S4gOasoQogICAqLwogIGNsYXNzIFJ1bGUgZXh0ZW5kcyBSdWxlSXRlbSB7CiAgICBjb25zdHJ1Y3RvcihpdGVtKSB7CiAgICAgIGlmICghKGl0ZW0ucGFyZW50IGluc3RhbmNlb2YgR3JvdXApKSB7CiAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdSdWxlIG11c3QgaW4gc29tZSBHcm91cCcpOwogICAgICB9CiAgICAgIHN1cGVyKGl0ZW0pOwogICAgICBydWxlcy5hbGwuc2V0KHRoaXMuaWQsIHRoaXMpOwogICAgfQogICAgLyoqIEB0eXBlIHtudW1iZXJ8bnVtYmVyW119ICovCiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gNjsgfSAvLyDlpoLmnpzmsqHmnInnibnmroror7TmmI7vvIzov5nmnaHop4TliJnlj6rmlK/mjIHml6fniYjvvIh2Nu+8ieW+ruWNmgogICAgaXNXZWlib1ZlcnNpb25TdXBwb3J0ZWQoKSB7CiAgICAgIGNvbnN0IHZlcnNpb25zID0gQXJyYXkuaXNBcnJheSh0aGlzLndlaWJvVmVyc2lvbikgPyB0aGlzLndlaWJvVmVyc2lvbiA6IFt0aGlzLndlaWJvVmVyc2lvbl07CiAgICAgIHJldHVybiB2ZXJzaW9ucy5pbmNsdWRlcyh5YXdmLldFSUJPX1ZFUlNJT04pOwogICAgfQogICAgcmVuZGVyKC4uLmFyZ3MpIHsKICAgICAgY29uc3Qgbm9kZSA9IHN1cGVyLnJlbmRlciguLi5hcmdzKTsKICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1ydWxlJyk7CiAgICAgIGlmICghdGhpcy5pc1dlaWJvVmVyc2lvblN1cHBvcnRlZCgpKSB7CiAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1ydWxlLXVuc3VwcG9ydCcpOwogICAgICB9CiAgICAgIHJldHVybiBub2RlOwogICAgfQogICAgZXhlY3V0ZSgpIHsKICAgICAgaWYgKCF0aGlzLmlzV2VpYm9WZXJzaW9uU3VwcG9ydGVkKCkpIHJldHVybjsKICAgICAgY29uc3QgZW5hYmxlZCA9IHRoaXMuaXNFbmFibGVkKCk7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3Qgc3R5bGVzID0gW107CiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmNzcyA9PT0gJ3N0cmluZycpIHN0eWxlcy5wdXNoKHRoaXMuY3NzKTsKICAgICAgICBpZiAodHlwZW9mIHRoaXMuY3NzID09PSAnZnVuY3Rpb24nKSBzdHlsZXMucHVzaCh0aGlzLmNzcygpKTsKICAgICAgICBpZiAoZW5hYmxlZCkgewogICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmFjc3MgPT09ICdzdHJpbmcnKSBzdHlsZXMucHVzaCh0aGlzLmFjc3MpOwogICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmFjc3MgPT09ICdmdW5jdGlvbicpIHN0eWxlcy5wdXNoKHRoaXMuYWNzcygpKTsKICAgICAgICB9CiAgICAgICAgaWYgKHN0eWxlcy5sZW5ndGgpIHJ1bGUuc3R5bGUuYXBwZW5kKHN0eWxlcy5qb2luKCdcbicpKTsKICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW5pdCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5pbml0KCk7CiAgICAgICAgaWYgKGVuYWJsZWQpIHsKICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5haW5pdCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5haW5pdCgpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHV0aWwuZGVidWcoJ0Vycm9yIHdoaWxlIGV4ZWN1dGUgcnVsZSAlbzogJW8nLCB0aGlzLCBlKTsKICAgICAgfQogICAgfQogIH0KICBydWxlLmNsYXNzLlJ1bGUgPSBSdWxlOwogIHJ1bGUuUnVsZSA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICBjb25zdCByZXN1bHQgPSBuZXcgUnVsZShpdGVtKTsKICAgIGlmIChydWxlLmluaXRlZCkgcmVzdWx0LmV4ZWN1dGUoKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgLyoqCiAgICog6K6+572u5Lit55qE5LiA5Liq57qv5paH5pys6aG577yM6L+Z5Liq6K6+572u6aG55rKh5pyJ5aSN6YCJ5qGGCiAgICog57un5om/6Ieq5pyJ5aSN6YCJ5qGG55qE6K6+572u6aG577yM5q2k5pe26K6k5Li66K+l5aSN6YCJ5qGG5piv5oC76KKr6YCJ5Lit55qECiAgICovCiAgY2xhc3MgVGV4dCBleHRlbmRzIFJ1bGUgewogICAgY29uc3RydWN0b3IoaXRlbSkgewogICAgICBzdXBlcihpdGVtKTsKICAgICAgdGhpcy5hbHdheXMgPSB0cnVlOwogICAgfQogICAgcmVuZGVyKC4uLmFyZ3MpIHsKICAgICAgY29uc3Qgbm9kZSA9IHN1cGVyLnJlbmRlciguLi5hcmdzKTsKICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy10ZXh0Jyk7CiAgICAgIHJldHVybiBub2RlOwogICAgfQogIH0KICBydWxlLlRleHQgPSBmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIG5ldyBUZXh0KGl0ZW0pOwogIH07CiAgcnVsZS5jbGFzcy5UZXh0ID0gVGV4dDsKCiAgLyoqCiAgICog5LuO5omA5pyJ6K6+572u6aG55Lit5qC55o2u5p2h5Lu2562b6YCJ5Ye65LiA5Lqb6K6+572u6aG5CiAgICog5LmL5ZCO5Y+v55So5LqO5bGV56S65a+56K+d5qGG562J5pON5L2cCiAgICogQHBhcmFtIHt7IGJhc2U6IFRhYltdLCBmaWx0ZXI6IChydWxlOiBSdWxlKSA9PiBib29sZWFuIH19IGJhc2Ug5o+P6L+w5pCc57Si6IyD5Zu0CiAgICovCiAgcnVsZS5xdWVyeSA9IGZ1bmN0aW9uICh7CiAgICBiYXNlID0gdGFicywKICAgIGZpbHRlciA9IG51bGwsCiAgICBpbmNsdWRlSGlkZGVuID0gZmFsc2UsCiAgfSA9IHt9KSB7CiAgICBjb25zdCByZXN1bHQgPSBuZXcgU2V0KCk7CiAgICA7IChmdW5jdGlvbiBxdWVyeShpdGVtcykgewogICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGlmIChpdGVtLmhpZGRlbiAmJiAhaW5jbHVkZUhpZGRlbikgcmV0dXJuOwogICAgICAgIGlmIChpdGVtLmRpc2FibGVkKSByZXR1cm47CiAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBUYWIgfHwgaXRlbSBpbnN0YW5jZW9mIEdyb3VwKSB7CiAgICAgICAgICBxdWVyeShpdGVtLmNoaWxkcmVuKTsKICAgICAgICB9CiAgICAgICAgaWYgKCEoaXRlbSBpbnN0YW5jZW9mIFJ1bGUpKSByZXR1cm47CiAgICAgICAgaWYgKGZpbHRlciAmJiAhZmlsdGVyKGl0ZW0pKSByZXR1cm47CiAgICAgICAgcmVzdWx0LmFkZChpdGVtKTsKICAgICAgfSk7CiAgICB9KGJhc2UpKTsKICAgIHJldHVybiBbLi4ucmVzdWx0XTsKICB9OwoKICBydWxlLmluaXRlZCA9IGZhbHNlOwogIHJ1bGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgIHJ1bGUuc3R5bGUgPSBjc3MuYWRkKCcnKTsKICAgIHJ1bGUuaW5pdGVkID0gdHJ1ZTsKICAgIHJ1bGUucXVlcnkoeyBpbmNsdWRlSGlkZGVuOiB0cnVlIH0pLmZvckVhY2gocnVsZSA9PiBydWxlLmV4ZWN1dGUoKSk7CiAgfTsKCiAgaW5pdC5vblJlYWR5KCgpID0+IHsKICAgIHJ1bGUuaW5pdCgpOwogIH0sIHsgcHJpb3JpdHk6IHByaW9yaXR5LkRFRkFVTFQgfSk7CgogIGNzcy5hcHBlbmQoYAoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1ncm91cCB7IGRpc3BsYXk6IGJsb2NrOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luOiAxNXB4IDEwcHggNXB4OyB9Ci55YXdmLVdCVjYgLnlhd2YtY29uZmlnLXJ1bGUgeyBkaXNwbGF5OiBibG9jazsgbWFyZ2luOiA1cHggMjBweDsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1ydWxlLXVuc3VwcG9ydCB7IG9wYWNpdHk6IDAuNTsgfQoueWF3Zi1XQlY2IC55YXdmLWJ1YmJsZSAueWF3Zi1jb25maWctcnVsZSB7IGRpc3BsYXk6IGlubGluZTsgbWFyZ2luOiAwOyB9Ci55YXdmLVdCVjYgLnlhd2YtY29uZmlnLXJ1bGUgPiBsYWJlbCArIGxhYmVsIHsgbWFyZ2luLWxlZnQ6IDhweDsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1ydWxlID4gYnIgKyBsYWJlbCB7IG1hcmdpbi1sZWZ0OiAyMHB4OyB9Ci55YXdmLVdCVjYgLnlhd2YtYnViYmxlLWljb24geyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBtYXJnaW4tbGVmdDogMnB4OyBtYXJnaW4tcmlnaHQ6IDJweDsgfQoueWF3Zi1XQlY2IC55YXdmLWJ1YmJsZS10ZXh0IC55YXdmLWJ1YmJsZS1pY29uIHsgZGlzcGxheTogbm9uZTsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1zZWxlY3QgeyBoZWlnaHQ6IDIwcHg7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctbnVtYmVyIGlucHV0W3R5cGU9Im51bWJlciJdIHsgd2lkdGg6IDQ1cHg7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctcmFuZ2UgeyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctcmFuZ2Utd3JhcCB7IGRpc3BsYXk6IG5vbmU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMDsgcmlnaHQ6IDA7IG1hcmdpbjogMDsgYm90dG9tOiBjYWxjKDEwMCUgKyAycHgpOyBoZWlnaHQ6IDgwcHg7IGJhY2tncm91bmQ6ICNmMGYwZjA7IGJhY2tncm91bmQ6IE1lbnU7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctcmFuZ2U6Zm9jdXMtd2l0aGluIC55YXdmLWNvbmZpZy1yYW5nZS13cmFwIHsgZGlzcGxheTogYmxvY2s7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctcmFuZ2UgaW5wdXRbdHlwZT0icmFuZ2UiXSB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBib3R0b206IDA7IG1hcmdpbjogYXV0bzsgd2lkdGg6IDc1cHg7IHJpZ2h0OiAtMjBweDsgbGVmdDogLTIwcHg7IHRyYW5zZm9ybTogcm90YXRlKC05MGRlZyk7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctY29sb3IgaW5wdXRbdHlwZT0iY29sb3IiXSB7IHdpZHRoOiA0NXB4OyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBoZWlnaHQ6IDIwcHg7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctdGV4dCB0ZXh0YXJlYSB7IHdpZHRoOiBjYWxjKDEwMCUgLSAyMHB4KTsgcGFkZGluZy1sZWZ0OiAxMHB4OyBwYWRkaW5nLXJpZ2h0OiAxMHB4OyBtaW4taGVpZ2h0OiAxMjBweDsgcmVzaXplOiB2ZXJ0aWNhbDsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWlucHV0IHsgbWFyZ2luOiA1cHg7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctY29sbGVjdGlvbi1saXN0IHsgZGlzcGxheTogYmxvY2s7IG1hcmdpbjogNXB4OyB9Ci55YXdmLVdCVjYgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tbGlzdCAueWF3Zi1jb25maWctY29sbGVjdGlvbi1pdGVtIHsgcGFkZGluZzogMCA1cHggMCAyMHB4OyBtaW4td2lkdGg6IDA7IGhlaWdodDogMjBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IGN1cnNvcjogZGVmYXVsdDsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXJlbW92ZSB7IGRpc3BsYXk6IGJsb2NrOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgZGlzcGxheTogZmxvdy1yb290OyB3aWR0aDogMjBweDsgaGVpZ2h0OiAyMHB4OyBsaW5lLWhlaWdodDogMjBweDsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0tY29udGVudCB7IG1heC13aWR0aDogNTAwcHg7IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyBvdmVyZmxvdzogaGlkZGVuOyB3aGl0ZS1zcGFjZTogbm93cmFwOyB9Ci55YXdmLVdCVjYgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tdXNlci1pZCAueWF3Zi1jb25maWctY29sbGVjdGlvbi1saXN0IHsgbWFyZ2luLWxlZnQ6IC01cHg7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0geyB3aWR0aDogOTBweDsgaGVpZ2h0OiA1MHB4OyBwYWRkaW5nOiAxcHggMjBweCAxcHggNTZweDsgdGV4dC1hbGlnbjogbGVmdDsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXVzZXItaWQgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tcmVtb3ZlIHsgcmlnaHQ6IDA7IGxlZnQ6IGF1dG87IHRleHQtYWxpZ246IGNlbnRlcjsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXVzZXItaWQgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tcmVtb3ZlIGEgeyBwb3NpdGlvbjogc3RhdGljOyBtYXJnaW46IDA7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIC55YXdmLWNvbmZpZy11c2VyLWF2YXRhciB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMXB4OyB0b3A6IDFweDsgd2lkdGg6IDUwcHg7IGhlaWdodDogNTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXVzZXItaWQgLnlhd2YtY29uZmlnLXVzZXItYXZhdGFyLWltZyB7IHdpZHRoOiA1MHB4OyBoZWlnaHQ6IDUwcHg7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIC55YXdmLWNvbmZpZy11c2VyLW5hbWUgeyBtYXgtd2lkdGg6IDEwMCU7IHdvcmQtYnJlYWs6IGJyZWFrLWFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgbWF4LWhlaWdodDogNDBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoueWF3Zi1XQlY2IC55YXdmLWNvbGxlY3Rpb24tc3VnZ2VzdGlvbi55YXdmLWNvbGxlY3Rpb24tc3VnZ2VzdGlvbiB7IHotaW5kZXg6IDEwMDAwOyBwb3NpdGlvbjogZml4ZWQ7IH0KLnlhd2YtV0JWNiAueWF3Zi1saXN0LXN1Z2dlc3Rpb24taXRlbSBhIHsgbWluLWhlaWdodDogMTUuNnB4OyB9CmApOwoKICBjc3MuYXBwZW5kKGAKLnlhd2YtV0JWNyBsYWJlbDpob3ZlciAueWF3Zi1jb25maWctY2hlY2tib3gtd3JhcCAueWF3Zi1jb25maWctY2hlY2tib3gtaWNvbiwKLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY2hlY2tib3gtd3JhcDpob3ZlciAueWF3Zi1jb25maWctY2hlY2tib3gtaWNvbiB7IGJvcmRlci1jb2xvcjogdmFyKC0tdy1jaGVja2JveC1jaGVjay1jb2xvcik7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY2hlY2tib3gtd3JhcCB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgcG9zaXRpb246IHJlbGF0aXZlOyB3aWR0aDogdmFyKC0tdy1jaGVja2JveC1zaXplKTsgaGVpZ2h0OiB2YXIoLS13LWNoZWNrYm94LXNpemUpOyBvdmVyZmxvdzogaGlkZGVuOyBtYXJnaW4tcmlnaHQ6IDRweDsgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWNoZWNrYm94IHsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAtMTAwcHg7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY2hlY2tib3gtaWNvbiB7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXctY2hlY2tib3gtYm9yZGVyKTsgY29sb3I6IHZhcigtLXctY2hlY2tib3gtY2hlY2stY29sb3IpOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWNoZWNrYm94LWljb24geyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IGJvdHRvbTogMDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jaGVja2JveC1pY29uIHN2ZyB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAtMXB4OyBsZWZ0OiAtMXB4OyByaWdodDogLTFweDsgYm90dG9tOiAtMXB4OyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWNoZWNrYm94Om5vdCg6Y2hlY2tlZCkgfiAueWF3Zi1jb25maWctY2hlY2tib3gtaWNvbiBzdmcgeyBkaXNwbGF5OiBub25lOyB9CgoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1ncm91cCB7IGRpc3BsYXk6IGJsb2NrOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luOiAxNXB4IDEwcHggNXB4OyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLXJ1bGUgeyBkaXNwbGF5OiBibG9jazsgbWFyZ2luOiA1cHggMjBweDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1ydWxlLXVuc3VwcG9ydCB7IG9wYWNpdHk6IDAuNTsgfQoueWF3Zi1XQlY3IC55YXdmLWJ1YmJsZSAueWF3Zi1jb25maWctcnVsZSB7IGRpc3BsYXk6IGlubGluZTsgbWFyZ2luOiAwOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLXJ1bGUgPiBsYWJlbCArIGxhYmVsIHsgbWFyZ2luLWxlZnQ6IDhweDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1ydWxlID4gYnIgKyBsYWJlbCB7IG1hcmdpbi1sZWZ0OiAyMHB4OyB9Ci55YXdmLVdCVjcgLnlhd2YtYnViYmxlLWljb24geyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBtYXJnaW4tbGVmdDogMnB4OyBtYXJnaW4tcmlnaHQ6IDJweDsgZGlzcGxheTogaW5saW5lOyB9Ci55YXdmLVdCVjcgLnlhd2YtYnViYmxlLXRleHQgLnlhd2YtYnViYmxlLWljb24geyBkaXNwbGF5OiBub25lOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLXNlbGVjdCB7IGhlaWdodDogMjBweDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1udW1iZXIgaW5wdXRbdHlwZT0ibnVtYmVyIl0geyB3aWR0aDogNDVweDsgYm94LXNpemluZzogYm9yZGVyLWJveDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1yYW5nZSB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1yYW5nZS13cmFwIHsgZGlzcGxheTogbm9uZTsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAwOyByaWdodDogMDsgbWFyZ2luOiAwOyBib3R0b206IGNhbGMoMTAwJSArIDJweCk7IGhlaWdodDogODBweDsgYmFja2dyb3VuZDogI2YwZjBmMDsgYmFja2dyb3VuZDogTWVudTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1yYW5nZTpmb2N1cy13aXRoaW4gLnlhd2YtY29uZmlnLXJhbmdlLXdyYXAgeyBkaXNwbGF5OiBibG9jazsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1yYW5nZSBpbnB1dFt0eXBlPSJyYW5nZSJdIHsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGJvdHRvbTogMDsgbWFyZ2luOiBhdXRvOyB3aWR0aDogNzVweDsgcmlnaHQ6IC0yMHB4OyBsZWZ0OiAtMjBweDsgdHJhbnNmb3JtOiByb3RhdGUoLTkwZGVnKTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jb2xvciBpbnB1dFt0eXBlPSJjb2xvciJdIHsgd2lkdGg6IDQ1cHg7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IGhlaWdodDogMjBweDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy10ZXh0IHRleHRhcmVhIHsgd2lkdGg6IDEwMCU7IG1pbi1oZWlnaHQ6IDEyMHB4OyByZXNpemU6IHZlcnRpY2FsOyBwYWRkaW5nLWxlZnQ6IHZhcigtLXctaW5wdXQtaW5kZW50KTsgcGFkZGluZy1yaWdodDogdmFyKC0tdy1pbnB1dC1pbmRlbnQpOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tc3VibWl0LAoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1rZXkgYnV0dG9uIHsgcGFkZGluZzogNHB4IDE2cHg7IG1hcmdpbjogMCA0cHg7IHZlcnRpY2FsLWFsaWduOiBib3R0b207IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY29sbGVjdGlvbi1saXN0IHsgZGlzcGxheTogYmxvY2s7IG1hcmdpbjogNXB4OyBwYWRkaW5nOiAwOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tbGlzdCAueWF3Zi1jb25maWctY29sbGVjdGlvbi1pdGVtIHsgcGFkZGluZzogMCA1cHggMCAyMHB4OyBtaW4td2lkdGg6IDA7IGhlaWdodDogMjBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IGN1cnNvcjogZGVmYXVsdDsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBwb3NpdGlvbjogcmVsYXRpdmU7IG1hcmdpbi1sZWZ0OiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXctYi1saW5lLXByaW1hcnktYm9yZGVyKTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXJlbW92ZSB7IGRpc3BsYXk6IGJsb2NrOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMnB4OyBsZWZ0OiAwOyBkaXNwbGF5OiBmbG93LXJvb3Q7IHdpZHRoOiAyMHB4OyBoZWlnaHQ6IDIwcHg7IGxpbmUtaGVpZ2h0OiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGN1cnNvcjogcG9pbnRlcjsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0tY29udGVudCB7IG1heC13aWR0aDogNTAwcHg7IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyBvdmVyZmxvdzogaGlkZGVuOyB3aGl0ZS1zcGFjZTogbm93cmFwOyB9Ci55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tdXNlci1pZCAueWF3Zi1jb25maWctY29sbGVjdGlvbi1saXN0IHsgbWFyZ2luLWxlZnQ6IC01cHg7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0geyB3aWR0aDogOTBweDsgaGVpZ2h0OiA1MHB4OyBwYWRkaW5nOiAxcHggMjBweCAxcHggNTZweDsgdGV4dC1hbGlnbjogbGVmdDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXVzZXItaWQgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tcmVtb3ZlIHsgcmlnaHQ6IDA7IGxlZnQ6IGF1dG87IHRleHQtYWxpZ246IGNlbnRlcjsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXVzZXItaWQgLnlhd2YtY29uZmlnLWNvbGxlY3Rpb24tcmVtb3ZlIGEgeyBwb3NpdGlvbjogc3RhdGljOyBtYXJnaW46IDA7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIC55YXdmLWNvbmZpZy11c2VyLWF2YXRhciB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMXB4OyB0b3A6IDFweDsgd2lkdGg6IDUwcHg7IGhlaWdodDogNTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1jb2xsZWN0aW9uLXVzZXItaWQgLnlhd2YtY29uZmlnLXVzZXItYXZhdGFyLWltZyB7IHdpZHRoOiA1MHB4OyBoZWlnaHQ6IDUwcHg7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctY29sbGVjdGlvbi11c2VyLWlkIC55YXdmLWNvbmZpZy11c2VyLW5hbWUgeyBtYXgtd2lkdGg6IDEwMCU7IHdvcmQtYnJlYWs6IGJyZWFrLWFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgbWF4LWhlaWdodDogNDBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbGxlY3Rpb24tc3VnZ2VzdGlvbi55YXdmLWNvbGxlY3Rpb24tc3VnZ2VzdGlvbiB7IHotaW5kZXg6IDEwMDAwOyBwb3NpdGlvbjogZml4ZWQ7IGJhY2tncm91bmQ6IHZhcigtLXctY2FyZC1iYWNrZ3JvdW5kKTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tdy1sYXllci1ib3JkZXIpOyBib3JkZXItcmFkaXVzOiB2YXIoLS13LWxheWVyLXJhZGl1cyk7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb2xsZWN0aW9uLXN1Z2dlc3Rpb24tbGlzdCB7IG1hcmdpbjogMDsgcGFkZGluZzogMTBweCAwOyBsaXN0LXN0eWxlOiBub25lOyB9Ci55YXdmLVdCVjcgLnlhd2YtbGlzdC1zdWdnZXN0aW9uLWl0ZW0geyBsaW5lLWhlaWdodDogMjBweDsgcGFkZGluZzogNXB4IDEwcHg7IH0KLnlhd2YtV0JWNyAueWF3Zi1saXN0LXN1Z2dlc3Rpb24taXRlbS55YXdmLWN1cnJlbnQgeyBsaW5lLWhlaWdodDogMjBweDsgcGFkZGluZzogNXB4IDEwcHg7IGJhY2tncm91bmQ6IHZhcigtLXctcG9wLWl0ZW0taG92ZXIpOyB9Ci55YXdmLVdCVjcgLnlhd2YtbGlzdC1zdWdnZXN0aW9uLWl0ZW0gYSB7IG1pbi1oZWlnaHQ6IDE1LjZweDsgY29sb3I6IGluaGVyaXQ7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1pdGVtIC53b28taW5wdXQtd3JhcCB7IGhlaWdodDogMjBweDsgbGluZS1oZWlnaHQ6IDIwcHg7IC0tdy1pbnB1dC1oZWlnaHQ6IDIwcHg7IGJveC1zaXppbmc6IGNvbnRlbnQtYm94OyBtYXJnaW4tbGVmdDogNHB4OyBtYXJnaW4tcmlnaHQ6IDRweDsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1pdGVtIC53b28taW5wdXQtd3JhcC53b28taW5wdXQtdGV4dCB7IGhlaWdodDogYXV0bzsgd2lkdGg6IDEwMCU7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctaXRlbSAud29vLWlucHV0LXdyYXAgaW5wdXQsCi55YXdmLVdCVjcgLnlhd2YtY29uZmlnLWl0ZW0gLndvby1pbnB1dC13cmFwIHNlbGVjdCB7IHZlcnRpY2FsLWFsaWduOiBib3R0b207IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctaXRlbSAueWF3Zi1jb25maWctc2VsZWN0IC53b28taW5wdXQtd3JhcCB7IHBhZGRpbmctcmlnaHQ6IDM2cHg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQoueWF3Zi1XQlY3IC55YXdmLWNvbmZpZy1pdGVtIC55YXdmLWNvbmZpZy1zZWxlY3QgLndvby1pbnB1dC13cmFwOjpiZWZvcmUgeyBjb250ZW50OiAiICI7IGRpc3BsYXk6IGJsb2NrOyB3aWR0aDogMDsgaGVpZ2h0OiAwOyBib3JkZXItdG9wOiA0cHggc29saWQgY3VycmVudENvbG9yOyBib3JkZXItbGVmdDogNHB4IHNvbGlkIHRyYW5zcGFyZW50OyBib3JkZXItcmlnaHQ6IDRweCBzb2xpZCB0cmFuc3BhcmVudDsgcG9zaXRpb246IGFic29sdXRlOyByaWdodDogMTRweDsgdG9wOiBjYWxjKDUwJSAtIDJweCk7IH0KLnlhd2YtV0JWNyAueWF3Zi1jb25maWctdGV4dCAud29vLWlucHV0LXdyYXAgeyB3aWR0aDogNTIwcHg7IGhlaWdodDogYXV0bzsgcGFkZGluZzogMDsgfQpgKTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZXNldC9vYnNlcnZlci5qcwovKioKICog6L+Z5Liq5paH5Lu255So5LqO5qOA5p+l6aG16Z2i5Lit5piv5ZCm5pyJ5paw5YWD57Sg5re75Yqg5oiW5YWD57Sg5Y+Y5YyW77yM5bm26Ieq5Yqo6Kem5Y+R5ZCE57G75Zue6LCDCiAqIOeUseS6juW+ruWNmuS8mumikee5geabtOaWsOeVjOmdouS4iuaYvuekuueahOaXpeacn++8iMOXw5fliIbpkp/liY3vvInmlofmnKzvvIwKICogICDov5nph4znibnliKvov4fmu6Tmjonkuobml6XmnJ/mmL7npLrnmoTnm7jlhbPlj5jljJbvvIzlpoLmnpzku4XljIXmi6zmraTnsbvlj5jljJbliJnkuI3op6blj5Hlm57osIMKICogeWF3Zi5vYnNlcnZlci5kb20uYWRkKGNhbGxiYWNrOiBGdW5jdGlvbikg5re75Yqg5LiA5Liq5Zue6LCDCiAqIHlhd2Yub2JzZXJ2ZXIuZG9tLnJlbW92ZShjYWxsYmFjazogRnVuY3Rpb24pIOWPlua2iOS4gOS4quWbnuiwgwogKi8KOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CgogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKCiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyID0geWF3Zi5vYnNlcnZlciB8fCB7fTsKICBvYnNlcnZlci5kb20gPSB7fTsKCiAgY29uc3QgcHJpb3JpdHkgPSB1dGlsLnByaW9yaXR5OwogIGNvbnN0IHBlcmZvcm1hbmNlID0gdXRpbC5wZXJmb3JtYW5jZTsKCiAgLyoqIEB0eXBlIHtBcnJheTxGdW5jdGlvbj59ICovCiAgY29uc3QgY2FsbGJhY2tzID0gW107CgogIC8qKgogICAqIOW9k+mhtemdouacieS7u+S9leWPmOWMluaXtuWbnuiwgwogICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiAgICovCiAgb2JzZXJ2ZXIuZG9tLmFkZCA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spOwogICAgcmV0dXJuIGNhbGxiYWNrOwogIH07CgogIC8qKgogICAqIOenu+mZpOS5i+WJjea3u+WKoOeahOWbnuiwgwogICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrCiAgICovCiAgb2JzZXJ2ZXIuZG9tLnJlbW92ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgbGV0IGZvdW5kID0gZmFsc2U7CiAgICB3aGlsZSAodHJ1ZSkgewogICAgICBjb25zdCBpbmRleCA9IGNhbGxiYWNrcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtID09PSBjYWxsYmFjayk7CiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiBmb3VuZDsKICAgICAgY2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIGZvdW5kID0gdHJ1ZTsKICAgIH0KICB9OwoKICBjb25zdCBhY3QgPSBmdW5jdGlvbiAoKSB7CiAgICBjYWxsYmFja3MuZm9yRWFjaChjYWxsYmFjayA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgcGVyZm9ybWFuY2UoY2FsbGJhY2spOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdXRpbC5kZWJ1ZygnRXJyb3Igd2hpbGUgaGFuZGxpbmcgbXV0YXRpb24gY2FsbGJhY2s6ICVvICVvJywgY2FsbGJhY2ssIGUpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvKiogQHR5cGUge2Jvb2xlYW4/fSAqLwogIGxldCBzdGF0dXMgPSBudWxsOwogIC8qKiBAdHlwZSB7TXV0YXRpb25DYWxsYmFja30gKi8KICBjb25zdCBvbk11dGF0aW9uID0gZnVuY3Rpb24gKG11dGF0aW9uKSB7CiAgICBpZiAobXV0YXRpb24gJiYgbXV0YXRpb24uZXZlcnkoZnVuY3Rpb24gaXNEYXRlKHgpIHsKICAgICAgbGV0IHRhcmdldCA9IHgudGFyZ2V0OwogICAgICByZXR1cm4gdGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0ZScpIHx8IHRhcmdldC5oYXNBdHRyaWJ1dGUoJ3lhd2YtZGF0ZScpOwogICAgfSkpIHJldHVybjsKICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSBzdGF0dXMgPSB0cnVlOwogICAgaWYgKHN0YXR1cyAhPT0gbnVsbCkgcmV0dXJuOwogICAgYWN0KCk7IHN0YXR1cyA9IGZhbHNlOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChzdGF0dXMgPT09IHRydWUpIGFjdCgpOwogICAgICBzdGF0dXMgPSBudWxsOwogICAgfSwgMTAwKTsKICB9OwoKICBjb25zdCBvYnNlcnZlID0gZnVuY3Rpb24gKCkgewogICAgb25NdXRhdGlvbigpOwogICAgKG5ldyBNdXRhdGlvbk9ic2VydmVyKG9uTXV0YXRpb24pKQogICAgICAub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTsKICB9OwoKICBpbml0Lm9uTG9hZChmdW5jdGlvbiAoKSB7CiAgICBvYnNlcnZlKCk7CiAgfSwgeyBwcmlvcml0eTogcHJpb3JpdHkuTEFTVCArIHByaW9yaXR5LkFGVEVSICogMiB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZXNldC9maWx0ZXIuanMKLyoqCiAqIOi/meS4quaWh+S7tueUqOS6juiHquWKqOajgOafpemhtemdouS4reWHuueOsOeahOW+ruWNmuWSjOivhOiuuu+8jOW5tuinpuWPkei/h+a7pOinhOWImQogKiDmtonlj4rlh73mlbDljIXmi6wKICogICB5YXdmLm9ic2VydmVyLjx0eXBlPi48YWN0aW9uPgogKiA8dHlwZT46IGZlZWQgLyBjb21tZW50IOWkhOeQhuW+ruWNmiAvIOivhOiuugogKiA8YWN0aW9uPjoKICogICBhZGQocnVsZTogZmVlZCA9PiBzdHJpbmcsIHsgcHJpb3JpdHk6IG51bWJlciB9KTog5re75Yqg5LiA5Liq6KeE5YiZCiAqICAgb25CZWZvcmUoY2FsbGJhY2s6IGZlZWQgPT4gUHJvbWlzZT8pCiAqICAgb25BZnRlcihjYWxsYmFjazogZmVlZCA9PiBQcm9taXNlPywgcmVzdWx0KQogKiAgIG9uRmluYWxseShjYWxsYmFjazogZmVlZCA9PiBQcm9taXNlPywgcmVzdWx0KQogKiAgIG9uRG9uZSgpCiAqLwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKCiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKCiAgY29uc3QgcHJpb3JpdHkgPSB1dGlsLnByaW9yaXR5OwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3Qgc3RyaW5ncyA9IHV0aWwuc3RyaW5nczsKCiAgLyoqCiAgICog55So5LqO5pS26ZuG6ZKI5a+55b6u5Y2a5oiW6K+E6K6655qE6L+H5ruk6KeE5YiZ77yM5bm25qC55o2u5LyY5YWI57qn6YCQ5LiA5qOA5p+lCiAgICovCiAgY2xhc3MgRmlsdGVyQ29sbGVjdGlvbiB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgLyoqIEB0eXBlIHtBcnJheTx7IHByaW9yaXR5OiBudW1iZXIsIGZpbHRlcjogRnVuY3Rpb259Pn0gKi8KICAgICAgdGhpcy5maWx0ZXJzID0gW107CiAgICB9CiAgICAvKioKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZpbHRlcgogICAgICogQHBhcmFtIHtudW1iZXJ9IHByaW9yaXR5CiAgICAgKi8KICAgIGFkZChmaWx0ZXIsIHByaW9yaXR5ID0gMCkgewogICAgICB0aGlzLmZpbHRlcnMucHVzaCh7IGZpbHRlciwgcHJpb3JpdHkgfSk7CiAgICAgIHRoaXMuZmlsdGVycy5zb3J0KCh4LCB5KSA9PiB5LnByaW9yaXR5IC0geC5wcmlvcml0eSk7CiAgICB9CiAgICBhc3luYyBmaWx0ZXIoLi4ucGFyYW1zKSB7CiAgICAgIGZvciAoY29uc3QgeyBmaWx0ZXIgfSBvZiB0aGlzLmZpbHRlcnMpIHsKICAgICAgICB0cnkgewogICAgICAgICAgbGV0IHJldCA9IGZpbHRlciguLi5wYXJhbXMpOwogICAgICAgICAgaWYgKHJldCAmJiAhcmV0LnJlc3VsdCAmJiB0eXBlb2YgcmV0LnRoZW4gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgcmV0ID0gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKHJldCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodHlwZW9mIHJldCA9PT0gJ3N0cmluZycpIHJldCA9IHsgcmVzdWx0OiByZXQgfTsKICAgICAgICAgIGlmICghcmV0IHx8ICFyZXQucmVzdWx0KSBjb250aW51ZTsKICAgICAgICAgIGNvbnN0IHsgcmVzdWx0LCByZWFzb24gPSBudWxsIH0gPSByZXQ7CiAgICAgICAgICByZXR1cm4geyByZXN1bHQ6IHJlc3VsdCArICcnLCByZWFzb246IHJlYXNvbiArICcnLCBmaWx0ZXIgfTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB1dGlsLmRlYnVnKCdFeGNlcHRpb24gd2hpbGUgcGFyc2luZyBydWxlICVvOlxucGFyYW1zOiAlb1xuZXhjZXB0aW9uOiAlb1xuJW8nLCBmaWx0ZXIsIHBhcmFtcywgZSwgZS5zdGFjayk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB7IHJlc3VsdDogbnVsbCB9OwogICAgfQogIH0KCiAgLyoqCiAgICog5Zyo5Y+R546w5LiA5p2h5paw55qE6ZyA6KaB6L+H5ruk55qE5b6u5Y2a5oiW6K+E6K665pe277yM5Lya5L6d5qyh6LCD55So77yaCiAgICogICAxLiBvbkJlZm9yZShmZWVkKQogICAqICAgMi4g6YCQ5Liq6LCD55So6L+H5ruk6KeE5YiZCiAgICogICAzLiDlpoLmnpzov4fmu6Top4TliJnooajmmI7mnKrooqvpmpDol48gb25BZnRlcihmZWVkLCB7IHJlc3VsdCwgcmVhc29uIH0pCiAgICogICA0LiBvbkZpbmFsbHkoZmVlZCwgeyByZXN1bHQsIHJlYXNvbiB9KQogICAqIOaJgOacieWFg+e0oOWujOaIkOWkhOeQhuaXtuiwg+eUqCBvbkRvbmUKICAgKiDmiYDmnInlm57osIPlpoLmnpzov5Tlm54gUHJvbWlzZe+8jOWImeS8muetieW+hSBQcm9taXNlIOe7k+adn+WGjei/m+WFpeS4i+S4gOmYtuautQogICAqLwogIGNsYXNzIEZpbHRlck9ic2VydmVyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmJlZm9yZSA9IFtdOwogICAgICB0aGlzLmFmdGVyID0gW107CiAgICAgIHRoaXMuZmluYWxseSA9IFtdOwogICAgICB0aGlzLmRvbmUgPSBbXTsKICAgICAgdGhpcy5maWx0ZXJzID0gbmV3IEZpbHRlckNvbGxlY3Rpb24oKTsKICAgICAgdGhpcy5wZW5kaW5nID0gW107CiAgICAgIHRoaXMuYnVzeSA9IGZhbHNlOwogICAgICB0aGlzLmNsZWFuID0gbnVsbDsKICAgIH0KICAgIGZpbHRlcihmaWx0ZXIsIHsgcHJpb3JpdHkgPSAwIH0gPSB7fSkgewogICAgICB0aGlzLmZpbHRlcnMuYWRkKGZpbHRlciwgcHJpb3JpdHkpOwogICAgfQogICAgLyoqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fSBjYWxsYmFja3MgKi8KICAgIGFzeW5jIGludm9rZUNhbGxiYWNrcyhjYWxsYmFja3MsIC4uLmFyZ3MpIHsKICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tzLm1hcChjYWxsYmFjayA9PiAoCiAgICAgICAgbmV3IFByb21pc2UoYXN5bmMgcmVzb2x2ZSA9PiB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBhd2FpdCBQcm9taXNlLnJlc29sdmUoY2FsbGJhY2soLi4uYXJncykpOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICB1dGlsLmRlYnVnKCdFcnJvciB3aGlsZSBmaWx0ZXIgY2FsbGJhY2s6ICVvICVvJywgY2FsbGJhY2ssIGUpOwogICAgICAgICAgfQogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pCiAgICAgICkpKTsKICAgIH0KICAgIGFzeW5jIGFjdGl2ZShpdGVtcywgaXNBcHBlbmQgPSB0cnVlKSB7CiAgICAgIGlmIChpc0FwcGVuZCkgewogICAgICAgIHRoaXMucGVuZGluZy5wdXNoKC4uLml0ZW1zKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBlbmRpbmcudW5zaGlmdCguLi5pdGVtcyk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYnVzeSkgewogICAgICAgIGlmICghdGhpcy5jbGVhbikgewogICAgICAgICAgdGhpcy5jbGVhbiA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGF3YWl0IHRoaXMuY2xlYW47CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuYnVzeSA9IHRydWU7CiAgICAgIGNvbnN0IHByb21pc2VzID0gW107CiAgICAgIHdoaWxlICh0aGlzLnBlbmRpbmcubGVuZ3RoKSB7CiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMucGVuZGluZy5zaGlmdCgpOwogICAgICAgIHByb21pc2VzLnB1c2goKGFzeW5jICgpID0+IHsKICAgICAgICAgIGF3YWl0IHRoaXMuaW52b2tlQ2FsbGJhY2tzKHRoaXMuYmVmb3JlLCBpdGVtKTsKICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZmlsdGVycy5maWx0ZXIoaXRlbSk7CiAgICAgICAgICBjb25zdCBjYWxsQWZ0ZXIgPSB0aGlzLmFwcGx5KGl0ZW0sIHJlc3VsdCk7CiAgICAgICAgICBpZiAoY2FsbEFmdGVyKSB7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW52b2tlQ2FsbGJhY2tzKHRoaXMuYWZ0ZXIsIGl0ZW0sIHJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgICBhd2FpdCB0aGlzLmludm9rZUNhbGxiYWNrcyh0aGlzLmZpbmFsbHksIGl0ZW0sIHJlc3VsdCk7CiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpOwogICAgICAgIH0pKCkpOwogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7CiAgICAgICAgaWYgKCF0aGlzLmJ1c3kpIGJyZWFrOwogICAgICB9CiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTsKICAgICAgYXdhaXQgdGhpcy5pbnZva2VDYWxsYmFja3ModGhpcy5kb25lKTsKICAgICAgdGhpcy5idXN5ID0gZmFsc2U7CiAgICAgIGlmICh0aGlzLnBlbmRpbmcubGVuZ3RoKSB7CiAgICAgICAgYXdhaXQgdGhpcy5hY3RpdmUodGhpcy5wZW5kaW5nLnNwbGljZSgwKSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmNsZWFuKSB0aGlzLmNsZWFuID0gbnVsbDsKICAgICAgaWYgKHRoaXMucmVzb2x2ZSkgewogICAgICAgIHRoaXMucmVzb2x2ZSgpOwogICAgICAgIHRoaXMucmVzb2x2ZSA9IG51bGw7CiAgICAgIH0KICAgIH0KICAgIGFzeW5jIHJlcnVuKCkgewogICAgICBjb25zdCBsYXN0UmVydW4gPSB0aGlzLmxhc3RSZXJ1biA9ICh0aGlzLmxhc3RSZXJ1biB8fCAwKSArIDE7CiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7CiAgICAgIGlmICh0aGlzLmxhc3RSZXJ1biAhPT0gbGFzdFJlcnVuKSByZXR1cm47CiAgICAgIHRoaXMucmVhcHBseSgpOwogICAgfQogICAgb25CZWZvcmUoY2FsbGJhY2spIHsgdGhpcy5iZWZvcmUucHVzaChjYWxsYmFjayk7IH0KICAgIG9uQWZ0ZXIoY2FsbGJhY2spIHsgdGhpcy5hZnRlci5wdXNoKGNhbGxiYWNrKTsgfQogICAgb25GaW5hbGx5KGNhbGxiYWNrKSB7IHRoaXMuZmluYWxseS5wdXNoKGNhbGxiYWNrKTsgfQogICAgb25Eb25lKGNhbGxiYWNrKSB7IHRoaXMuZG9uZS5wdXNoKGNhbGxiYWNrKTsgfQogIH0KCiAgLyoqCiAgICog6ZKI5a+55b6u5Y2a55qE6L+H5ruk6KeE5YiZCiAgICog5a+55bqU6ISa5pys54mIIG9ic2VydmVyLndlaWJvLioKICAgKi8KICBvYnNlcnZlci5mZWVkID0gbmV3IEZpbHRlck9ic2VydmVyKCk7CgogIC8qKgogICAqIOmSiOWvueivhOiuuueahOi/h+a7pOinhOWImQogICAqIOWvueW6lOiEmuacrOeJiCBvYnNlcnZlci5jb21tZW50CiAgICovCiAgb2JzZXJ2ZXIuY29tbWVudCA9IG5ldyBGaWx0ZXJPYnNlcnZlcigpOwoKICBjb25zdCBoaWRlRmVlZENzcyA9IGNzcy5hZGQoYAoueWF3Zi1XQlY2IFthY3Rpb24tdHlwZT0iZmVlZF9saXN0X2l0ZW0iXTpub3QoW3lhd2YtZmVlZF0pLAoueWF3Zi1XQlY2IFtub2RlLXR5cGU9ImZlZWRfbGlzdCJdIC5XQl9mZWVkX3R5cGU6bm90KFt5YXdmLWZlZWRdKSwKLnlhd2YtV0JWNiAubGlzdF91bFtub2RlLXR5cGU9ImZlZWRfbGlzdF9jb21tZW50TGlzdCJdIC5saXN0X2xpOm5vdChbeWF3Zi1jb21tZW50XSksCi55YXdmLVdCVjYgLmxpc3RfdWxbbm9kZS10eXBlPSJjb21tZW50X2xpc3QiXSAubGlzdF9saTpub3QoW3lhd2YtY29tbWVudF0pCi55YXdmLVdCVjYgeyB2aXNpYmlsaXR5OiBoaWRkZW47IG9wYWNpdHk6IDA7IH0KLnlhd2YtV0JWNiBbYWN0aW9uLXR5cGU9ImZlZWRfbGlzdF9pdGVtIl06bm90KFt5YXdmLWZlZWRdKSBbbm9kZS10eXBlPSJmZWVkX2xpc3QiXSAuV0JfZmVlZF90eXBlOm5vdChbeWF3Zi1mZWVkXSkgeyBkaXNwbGF5OiBub25lOyB9Ci55YXdmLVdCVjYgW3lhd2YtZmVlZF06bm90KFt5YXdmLWZlZWQtZGlzcGxheV0pLCBbeWF3Zi1jb21tZW50XTpub3QoW3lhd2YtY29tbWVudC1kaXNwbGF5XSkgeyB2aXNpYmlsaXR5OiBoaWRkZW47IG9wYWNpdHk6IDA7IH0KLnlhd2YtV0JWNiBbeWF3Zi1jb21tZW50LWRpc3BsYXk9ImhpZGUiXSwgW3lhd2YtZmVlZC1kaXNwbGF5PSJoaWRlIl0geyBkaXNwbGF5OiBub25lOyB9Ci55YXdmLVdCVjYgW3lhd2YtZmVlZC1kaXNwbGF5PSJmb2xkIl0geyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KLnlhd2YtV0JWNiBbeWF3Zi1mZWVkLWRpc3BsYXk9ImZvbGQiXSA+ICogeyBkaXNwbGF5OiBub25lOyB9Ci55YXdmLVdCVjYgW3lhd2YtZmVlZC1kaXNwbGF5PSJmb2xkIl06OmJlZm9yZSB7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMTBweCAyMHB4OyBkaXNwbGF5OiBibG9jazsgb3BhY2l0eTogMC42OyBsaW5lLWhlaWdodDogMTZweDsgfQoueWF3Zi1XQlY2IC5XQl9mZWVkX3R5cGVbeWF3Zi1mZWVkLWRpc3BsYXk9ImZvbGQiXSAuV0JfZmVlZF9kZXRhaWwgeyBkaXNwbGF5OiBub25lOyB9Ci55YXdmLVdCVjYgLldCX2ZlZWRfdHlwZVt5YXdmLWZlZWQtZGlzcGxheT0iZm9sZCJdOmhvdmVyIC5XQl9mZWVkX2RldGFpbDpub3QoOmhvdmVyKSB7IGRpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogaGlkZGVuOyBwYWRkaW5nOiAwIDIwcHggMjdweDsgfQoueWF3Zi1XQlY2IC5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfdHlwZVt5YXdmLWZlZWQtZGlzcGxheT0iZm9sZCJdLldCX2ZlZWRfdmlwY292ZXI6aG92ZXIgLldCX2ZlZWRfZGV0YWlsIHsgcGFkZGluZy10b3A6IDA7IH0KLnlhd2YtV0JWNiAuV0JfZmVlZF90eXBlW3lhd2YtZmVlZC1kaXNwbGF5PSJmb2xkIl0gLldCX2ZlZWRfaGFuZGxlIHsgZGlzcGxheTogbm9uZTsgfQoKLnlhd2YtV0JWNyAueWF3Zi1mZWVkLWZpbHRlci1sb2FkaW5nLAoueWF3Zi1XQlY3IC55YXdmLWZlZWQtZmlsdGVyLXJ1bm5pbmcgeyB2aXNpYmlsaXR5OiBoaWRkZW47IH0KLnlhd2YtV0JWNyAueWF3Zi1yZXNpemUtc2Vuc29yLAoueWF3Zi1XQlY3IC55YXdmLXJlc2l6ZS1zZW5zb3ItZXhwYW5kLAoueWF3Zi1XQlY3IC55YXdmLXJlc2l6ZS1zZW5zb3Itc2hyaW5rIHsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGJvdHRvbTogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IG92ZXJmbG93OiBoaWRkZW47IHotaW5kZXg6IC0xOyB2aXNpYmlsaXR5OiBoaWRkZW47IH0KLnlhd2YtV0JWNyAueWF3Zi1yZXNpemUtc2Vuc29yLWV4cGFuZCAueWF3Zi1yZXNpemUtc2Vuc29yLWNoaWxkIHsgd2lkdGg6IDEwMDAwMDAwcHg7IGhlaWdodDogMTAwMDAwMDBweDsgfQoueWF3Zi1XQlY3IC55YXdmLXJlc2l6ZS1zZW5zb3Itc2hyaW5rIC55YXdmLXJlc2l6ZS1zZW5zb3ItY2hpbGQgeyB3aWR0aDogMjAwJTsgaGVpZ2h0OiAyMDAlOyB9Ci55YXdmLVdCVjcgLnlhd2YtcmVzaXplLXNlbnNvci1jaGlsZCB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB0cmFuc2l0aW9uOiAwczsgfQpgKTsKCiAgaW5pdC5vbkxvYWQoZnVuY3Rpb24gKCkgewogICAgY3NzLmFwcGVuZChgLnlhd2YtV0JWNiBbeWF3Zi1mZWVkLWRpc3BsYXk9ImZvbGQiXTo6YmVmb3JlIHsgY29udGVudDogJHtpMThuLmZvbGRSZWFzb259OyB9YCk7CiAgfSk7CiAgaW5pdC5vbkRlaW5pdCgoKSA9PiB7CiAgICBoaWRlRmVlZENzcy5yZW1vdmUoKTsKICB9KTsKCiAgaW5pdC5vbkxvYWQoZnVuY3Rpb24gKCkgewogICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICBvYnNlcnZlci5mZWVkLmFwcGx5ID0gZnVuY3Rpb24gKGZlZWQsIHsgcmVzdWx0LCBmaWx0ZXIgPSBudWxsLCByZWFzb24gPSBudWxsIH0pIHsKICAgICAgICBmZWVkLnNldEF0dHJpYnV0ZSgneWF3Zi1mZWVkLWRpc3BsYXknLCByZXN1bHQgfHwgJ3Vuc2V0Jyk7CiAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQgIT09ICd1bnNldCcpIHsKICAgICAgICAgIGNvbnN0IGF1dGhvciA9IGZlZWQucXVlcnlTZWxlY3RvcignLldCX2RldGFpbCA+IC5XQl9pbmZvID4gLldfZmJbdXNlcmNhcmRdJykgfHwKICAgICAgICAgICAgZmVlZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1mZWVkIC5pbmZvIC5uYW1lJyk7CiAgICAgICAgICBjb25zdCBhdXRob3JOYW1lID0gYXV0aG9yICYmIGF1dGhvci50ZXh0Q29udGVudDsKICAgICAgICAgIGlmIChhdXRob3JOYW1lKSBmZWVkLnNldEF0dHJpYnV0ZSgneWF3Zi1mZWVkLWF1dGhvcicsIGF1dGhvck5hbWUpOwogICAgICAgICAgaWYgKHJlYXNvbikgZmVlZC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1yZWFzb24nLCByZWFzb24pOwogICAgICAgICAgdXRpbC5kZWJ1ZygnRmVlZCBmaWx0ZXIgJW8gLT4gJW8gYnkgJW8gZHVlIHRvICVvJywgZmVlZCwgcmVzdWx0LCBmaWx0ZXIsIHJlYXNvbik7CiAgICAgICAgfQogICAgICAgIGlmIChyZXN1bHQgPT09ICdoaWRlJykgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9OwogICAgICBvYnNlcnZlci5mZWVkLnJlYXBwbHkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc3QgcGFyc2VkID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbeWF3Zi1mZWVkLWRpc3BsYXldJykpOwogICAgICAgIHBhcnNlZC5mb3JFYWNoKGZlZWQgPT4gewogICAgICAgICAgZmVlZC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHVuZm9sZEV2ZW50SGFuZGxlcik7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlKHBhcnNlZCwgZmFsc2UpOwogICAgICB9OwogICAgICBvYnNlcnZlci5jb21tZW50LmFwcGx5ID0gZnVuY3Rpb24gKGNvbW1lbnQsIHsgcmVzdWx0LCBmaWx0ZXIgPSBudWxsLCByZWFzb24gPSBudWxsIH0pIHsKICAgICAgICBjb21tZW50LnNldEF0dHJpYnV0ZSgneWF3Zi1jb21tZW50LWRpc3BsYXknLCByZXN1bHQgfHwgJ3Vuc2V0Jyk7CiAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQgIT09ICd1bnNldCcpIHsKICAgICAgICAgIHV0aWwuZGVidWcoJ0NvbW1lbnQgZmlsdGVyICVvIC0+ICVvIGJ5ICVvIGR1ZSB0byAlbycsIGNvbW1lbnQsIHJlc3VsdCwgZmlsdGVyLCByZWFzb24pOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0ID09PSAnaGlkZScpIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfTsKICAgICAgb2JzZXJ2ZXIuY29tbWVudC5yZWFwcGx5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IHBhcnNlZCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3lhd2YtY29tbWVudC1kaXNwbGF5XScpKTsKICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmUocGFyc2VkLCBmYWxzZSk7CiAgICAgIH07CiAgICAgIGNvbnN0IHJlbW92ZUhpZGRlbkl0ZW0gPSBmdW5jdGlvbiAoaXRlbSwgeyByZXN1bHQgfSkgewogICAgICAgIGlmIChyZXN1bHQgIT09ICdoaWRlJykgcmV0dXJuOwogICAgICAgIGl0ZW0ucmVtb3ZlKCk7CiAgICAgIH07CiAgICAgIGNvbnN0IHVuZm9sZEV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGNvbnN0IGZlZWQgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnW21pZF0nKTsKICAgICAgICBmZWVkLnNldEF0dHJpYnV0ZSgneWF3Zi1mZWVkLWRpc3BsYXknLCAndW5mb2xkJyk7CiAgICAgICAgZmVlZC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHVuZm9sZEV2ZW50SGFuZGxlcik7CiAgICAgIH07CiAgICAgIGNvbnN0IGZvbGRGZWVkVW5mb2xkID0gZnVuY3Rpb24gKGZlZWQsIHsgcmVzdWx0IH0pIHsKICAgICAgICBpZiAocmVzdWx0ICE9PSAnZm9sZCcpIHJldHVybjsKICAgICAgICBmZWVkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdW5mb2xkRXZlbnRIYW5kbGVyKTsKICAgICAgfTsKICAgICAgb2JzZXJ2ZXIuZmVlZC5vbkZpbmFsbHkocmVtb3ZlSGlkZGVuSXRlbSk7CiAgICAgIG9ic2VydmVyLmZlZWQub25GaW5hbGx5KGZvbGRGZWVkVW5mb2xkKTsKICAgICAgb2JzZXJ2ZXIuY29tbWVudC5vbkZpbmFsbHkocmVtb3ZlSGlkZGVuSXRlbSk7CgogICAgICAvLyDoh6rliqjmo4DmtYvpobXpnaLkuK3nmoTlvq7ljZrlubbop6blj5Hov4fmu6Top4TliJkKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBmZWVkRmlsdGVyKCkgewogICAgICAgIGNvbnN0IGZlZWRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChbCiAgICAgICAgICAnW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfaXRlbSJdOm5vdChbeWF3Zi1mZWVkXSknLAogICAgICAgICAgJ1tub2RlLXR5cGU9ImZlZWRfbGlzdCJdIC5XQl9mZWVkX3R5cGU6bm90KFt5YXdmLWZlZWRdKScsCiAgICAgICAgXS5qb2luKCcsJykpOwogICAgICAgIGlmICghZmVlZHMubGVuZ3RoKSByZXR1cm47CiAgICAgICAgZmVlZHMuZm9yRWFjaChmZWVkID0+IGZlZWQuc2V0QXR0cmlidXRlKCd5YXdmLWZlZWQnLCAnJykpOwogICAgICAgIG9ic2VydmVyLmZlZWQuYWN0aXZlKGZlZWRzKTsKICAgICAgfSk7CiAgICAgIC8vIOiHquWKqOajgOa1i+mhtemdouS4reeahOivhOiuuuW5tuinpuWPkei/h+a7pOinhOWImQogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIGNvbW1lbnRGaWx0ZXIoKSB7CiAgICAgICAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFsKICAgICAgICAgICcubGlzdF91bFtub2RlLXR5cGU9ImZlZWRfbGlzdF9jb21tZW50TGlzdCJdIC5saXN0X2xpOm5vdChbeWF3Zi1jb21tZW50XSknLAogICAgICAgICAgJy5saXN0X3VsW25vZGUtdHlwZT0iY29tbWVudF9saXN0Il0gLmxpc3RfbGk6bm90KFt5YXdmLWNvbW1lbnRdKSAnLAogICAgICAgIF0uam9pbignLCcpKTsKICAgICAgICBpZiAoIWNvbW1lbnRzLmxlbmd0aCkgcmV0dXJuOwogICAgICAgIGNvbW1lbnRzLmZvckVhY2goY29tbWVudCA9PiBjb21tZW50LnNldEF0dHJpYnV0ZSgneWF3Zi1jb21tZW50JywgJycpKTsKICAgICAgICBvYnNlcnZlci5jb21tZW50LmFjdGl2ZShjb21tZW50cyk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgLyoKICAgICAgICog5b6u5Y2a6KGo56S6IEZlZWQg55qE57uT5p6E5L2T5b6I5aWH5aaZCiAgICAgICAqIOWug+eahCBpZHN0ciDlsZ7mgKfvvIzmmK/kuKogc3RyaW5n77yM5piv5b2T5YmN5b6u5Y2a55qEIG1pZO+8jOS5n+WPr+iDveaYr+W/q+i9rOeahOWOn+W+ruWNmiBpZAogICAgICAgKiDlroPnmoQgaWQg5bGe5oCn77yM5aSn6YOo5YiG5oOF5Ya15LiL5piv5LiqIG51bWJlcu+8jOihqOekuuW9k+WJjeW+ruWNmueahCBtaWTvvIzlgbblsJTmmK/kuKrlrZfnrKbkuLLvvIzooajnpLrlv6vovazlvq7ljZrnmoTlvZPliY0gaWQKICAgICAgICog5a6D55qEIG1pZCDlsZ7mgKfvvIzmmK/kuKogc3RyaW5n77yM5pivIGlkIOWxnuaAp+eahOWtl+espuS4suW9ouW8jwogICAgICAgKiDlroPnmoQgbWJsb2dpZCDmmK8gNjIg6L+b5Yi25o2i566X5ZCO55qEIGlkc3RyCiAgICAgICAqLwoKICAgICAgY29uc3QgcmFuZFN0ciA9IHN0cmluZ3MucmFuZEtleSgpOwogICAgICBjb25zdCBrZXkgPSBgeWF3Zl9mZWVkRmlsdGVyXyR7cmFuZFN0cn1gOwoKICAgICAgLy8g5b2T5pyJ5LiA5p2h5a6M5oiQ6L+H5ruk6KeE5YiZ5Yik5pat5pe277yM5Lqk57uZ6aG16Z2i6ISa5pys5aSE55CGCiAgICAgIG9ic2VydmVyLmZlZWQuYXBwbHkgPSBmdW5jdGlvbiAoZGF0YSwgeyByZXN1bHQsIGZpbHRlciA9IG51bGwsIHJlYXNvbiA9IG51bGwgfSkgewogICAgICAgIGNvbnN0IG1pZCA9IGRhdGEubWlkOwogICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGtleSwgewogICAgICAgICAgZGV0YWlsOiBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogJ3Jlc3VsdCcsIG1pZCwgcmVzdWx0OiB7IHJlc3VsdDogcmVzdWx0IHx8ICd1bnNldCcsIHJlYXNvbiB9IH0pLAogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICBpZiAocmVzdWx0KSB1dGlsLmRlYnVnKCdGZWVkIGZpbHRlciAlbyAtPiAlbyBieSAlbyBkdWUgdG8gJW8nLCBkYXRhLCByZXN1bHQsIGZpbHRlciwgcmVhc29uKTsKICAgICAgICBpZiAocmVzdWx0ID09PSAnaGlkZScpIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfTsKICAgICAgLy8g5aaC5p6c6ZyA6KaB6YeN5paw6Kem5Y+R6L+H5ruk6KeE5YiZ77yM6YKj5LmI6K6p6aG16Z2i6ISa5pys6YeN5paw6Kem5Y+R5LiA5qyhCiAgICAgIG9ic2VydmVyLmZlZWQucmVhcHBseSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChrZXksIHsgZGV0YWlsOiBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogJ3JlcnVuJyB9KSB9KTsKICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgIH07CiAgICAgIC8vIOW9k+mhtemdouiEmuacrOajgOa1i+WIsOS4gOadoemcgOimgei/h+a7pOeahOW+ruWNmuaXtu+8jOaPkOS6pOi/h+a7pAogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihrZXksIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGNvbnN0IGRldGFpbCA9IEpTT04ucGFyc2UoZXZlbnQuZGV0YWlsKTsKICAgICAgICBpZiAoZGV0YWlsLmFjdGlvbiA9PT0gJ3RyaWdnZXInKSB7CiAgICAgICAgICBvYnNlcnZlci5mZWVkLmFjdGl2ZShbZGV0YWlsLmRhdGFdKTsKICAgICAgICB9CiAgICAgIH0sIHRydWUpOwogICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSwga2V5KSB7CiAgICAgICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICAgIC8vIOWxleW8gOW+ruWNmuato+aWhwogICAgICAgIGNvbnN0IGxvbmdDb250ZW50RXhwYW5kRm9yRGV0YWlsID0gYXN5bmMgZnVuY3Rpb24gKHZtLCBmZWVkRGV0YWlsKSB7CiAgICAgICAgICBpZiAoIWZlZWREZXRhaWwgfHwgIWZlZWREZXRhaWwuaXNMb25nVGV4dCkgcmV0dXJuOwogICAgICAgICAgaWYgKGZlZWREZXRhaWwubG9uZ1RleHRDb250ZW50X3JhdykgcmV0dXJuOwogICAgICAgICAgaWYgKFt0cnVlLCBmYWxzZV0uaW5jbHVkZXMoZmVlZERldGFpbC5feWF3Zl9Mb25nVGV4dENvbnRlbnRMb2FkaW5nKSkgcmV0dXJuOwogICAgICAgICAgdm0uJHNldChmZWVkRGV0YWlsLCAnX3lhd2ZfTG9uZ1RleHRDb250ZW50TG9hZGluZycsIHRydWUpOwogICAgICAgICAgdm0uJHNldChmZWVkRGV0YWlsLCAnbG9uZ1RleHRDb250ZW50X3JhdycsIG51bGwpOwogICAgICAgICAgdm0uJHNldChmZWVkRGV0YWlsLCAnbG9uZ1RleHRDb250ZW50JywgbnVsbCk7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgdm0uJGh0dHAuZ2V0KCcvYWpheC9zdGF0dXNlcy9sb25ndGV4dCcsIHsKICAgICAgICAgICAgICBwYXJhbXM6IHsgaWQ6IGZlZWREZXRhaWwuaWRzdHIgfSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmICghcmVzcC5kYXRhIHx8ICFyZXNwLmRhdGEub2sgfHwgIXJlc3AuZGF0YS5kYXRhKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwLmRhdGEuZGF0YTsKICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sb25nVGV4dENvbnRlbnQpIHsKICAgICAgICAgICAgICBmZWVkRGV0YWlsLmxvbmdUZXh0Q29udGVudF9yYXcgPSBkYXRhLmxvbmdUZXh0Q29udGVudDsKICAgICAgICAgICAgICBpZiAoZGF0YS51cmxfc3RydWN0KSBmZWVkRGV0YWlsLnVybF9zdHJ1Y3QgPSBkYXRhLnVybF9zdHJ1Y3Q7CiAgICAgICAgICAgICAgaWYgKGRhdGEudG9waWNfc3RydWN0KSBmZWVkRGV0YWlsLnRvcGljX3N0cnVjdCA9IGRhdGEudG9waWNfc3RydWN0OwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICB9CiAgICAgICAgICBmZWVkRGV0YWlsLl95YXdmX0xvbmdUZXh0Q29udGVudExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9OwogICAgICAgIGNvbnN0IGxvbmdDb250ZW50RXhwYW5kID0gYXN5bmMgZnVuY3Rpb24gKHZtLCBmZWVkKSB7CiAgICAgICAgICBhd2FpdCBsb25nQ29udGVudEV4cGFuZEZvckRldGFpbCh2bSwgZmVlZCk7CiAgICAgICAgICBhd2FpdCBsb25nQ29udGVudEV4cGFuZEZvckRldGFpbCh2bSwgZmVlZC5yZXR3ZWV0ZWRfc3RhdHVzKTsKICAgICAgICB9OwogICAgICAgIC8vIOinpuWPkei/h+a7pOW5tuetieW+hei/h+a7pOe7k+aenOWbnuadpQogICAgICAgIGNvbnN0IHBlbmRpbmdGZWVkcyA9IG5ldyBNYXAoKTsKICAgICAgICBjb25zdCB0cmlnZ2VyRmlsdGVyID0gZnVuY3Rpb24gKHZtLCBmZWVkKSB7CiAgICAgICAgICBjb25zdCBtaWQgPSBmZWVkLm1pZDsKICAgICAgICAgIGZlZWQuX3lhd2ZfRmlsdGVyU3RhdHVzID0gJ3J1bm5pbmcnOwogICAgICAgICAgY29uc3QgY2xlYW5VcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcGVuZGluZ0ZlZWRzLmRlbGV0ZShtaWQpOwogICAgICAgICAgICB2bS4kb2ZmKCdob29rOmJlZm9yZURlc3Ryb3knLCBjbGVhblVwKTsKICAgICAgICAgIH07CiAgICAgICAgICB2bS4kb25jZSgnaG9vazpiZWZvcmVEZXN0cm95JywgY2xlYW5VcCk7CiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUZpbHRlclJlc3VsdCA9IGZ1bmN0aW9uICh7IHJlc3VsdCwgcmVhc29uIH0pIHsKICAgICAgICAgICAgICBjbGVhblVwKCk7CiAgICAgICAgICAgICAgZmVlZC5feWF3Zl9GaWx0ZXJTdGF0dXMgPSByZXN1bHQ7CiAgICAgICAgICAgICAgZmVlZC5feWF3Zl9GaWx0ZXJSZWFzb24gPSByZWFzb247CiAgICAgICAgICAgICAgcmVzb2x2ZSh7IHJlc3VsdCwgcmVhc29uIH0pOwogICAgICAgICAgICB9OwogICAgICAgICAgICBwZW5kaW5nRmVlZHMuc2V0KG1pZCwgaGFuZGxlRmlsdGVyUmVzdWx0KTsKICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoa2V5LCB7CiAgICAgICAgICAgICAgZGV0YWlsOiBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogJ3RyaWdnZXInLCBtaWQsIGRhdGE6IGZlZWQgfSksCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIC8vIOWkhOeQhui/h+a7pOe7k+aenAogICAgICAgIGNvbnN0IGFwcGx5RmlsdGVyUmVzdWx0ID0gZnVuY3Rpb24gKHZtLCBmZWVkLCB7IHJlc3VsdCwgcmVhc29uIH0pIHsKICAgICAgICAgIGlmIChyZXN1bHQgPT09ICdoaWRlJykgewogICAgICAgICAgICBjb25zdCBpbmRleCA9IHZtLmRhdGEuaW5kZXhPZihmZWVkKTsKICAgICAgICAgICAgdm0uZGF0YS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdmZWVkJywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICBjb25zdCBmZWVkU2Nyb2xsID0gdnVlU2V0dXAuY2xvc2VzdCh2bSwgJ2ZlZWQtc2Nyb2xsJyk7CgogICAgICAgICAgLy8g5Zyo5riy5p+T5LiA5p2hIGZlZWQg5pe277yM6aKd5aSW5o+S5YWl6L+H5ruk54q25oCB55qE5qCH6K+GCiAgICAgICAgICB2bS4kb3B0aW9ucy5yZW5kZXIgPSAoZnVuY3Rpb24gKHJlbmRlcikgewogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGNyZWF0ZUVsZW1lbnQpIHsKICAgICAgICAgICAgICAvLyDlpoLmnpzmn5DkuKogZmVlZCDkuI3lnKggZmVlZC1zY3JvbGwg6YeM6Z2iCiAgICAgICAgICAgICAgLy8g6YKj5LmI5oiR5Lus5LiN5Lya5oqK5a6D5bCx6L+Z5LmI57uZ6ZqQ6JeP6LW35p2lCiAgICAgICAgICAgICAgY29uc3QgdW5kZXJGaWx0ZXIgPSBmZWVkU2Nyb2xsICE9IG51bGwgJiYgdGhpcy5taWQgPiAwOwogICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlbmRlci5jYWxsKHRoaXMsIGNyZWF0ZUVsZW1lbnQpOwogICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0LmRhdGEuY2xhc3MsIHsKICAgICAgICAgICAgICAgICd5YXdmLWZlZWQtZmlsdGVyJzogdHJ1ZSwKICAgICAgICAgICAgICAgICd5YXdmLWZlZWQtZmlsdGVyLWlnbm9yZSc6ICF1bmRlckZpbHRlciwKICAgICAgICAgICAgICAgIFtgeWF3Zi1mZWVkLWZpbHRlci0ke3RoaXMuZGF0YS5feWF3Zl9GaWx0ZXJTdGF0dXMgfHwgJ2xvYWRpbmcnfWBdOiB1bmRlckZpbHRlciwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXN1bHQuZGF0YS5hdHRyc1snZGF0YS1mZWVkLWF1dGhvci1uYW1lJ10gPSB0aGlzLmRhdGEudXNlci5zY3JlZW5fbmFtZTsKICAgICAgICAgICAgICByZXN1bHQuZGF0YS5hdHRyc1snZGF0YS1mZWVkLW1pZCddID0gdGhpcy5kYXRhLm1pZDsKICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhLnJldHdlZXRlZF9zdGF0dXMpIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5kYXRhLmF0dHJzWydkYXRhLWZlZWQtb21pZCddID0gdGhpcy5kYXRhLnJldHdlZXRlZF9zdGF0dXMubWlkOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhLm9yaV9taWQpIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5kYXRhLmF0dHJzWydkYXRhLWZlZWQtZm1pZCddID0gdGhpcy5kYXRhLmlkc3RyOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhLl95YXdmX0ZpbHRlclJlYXNvbikgewogICAgICAgICAgICAgICAgcmVzdWx0LmRhdGEuYXR0cnNbJ2RhdGEteWF3Zi1maWx0ZXItcmVhc29uJ10gPSB0aGlzLmRhdGEuX3lhd2ZfRmlsdGVyUmVhc29uOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICB9OwogICAgICAgICAgfSh2bS4kb3B0aW9ucy5yZW5kZXIpKTsKICAgICAgICAgIHZtLiRmb3JjZVVwZGF0ZSgpOwogICAgICAgICAgLy8g5q+P5qyh6auY5bqm5Y+Y5YyW5pe25pu05pawIF95YXdmX0hlaWdodCDlsZ7mgKcKICAgICAgICAgIC8vIOaIkeS5n+S4jeefpemBk+i/meauteS7o+eggeaAjuS5iOW3peS9nOi1t+adpeeahO+8jOWPjeato+e9keS4iueahOS7o+eggeWwsei/memAu+i+ke+8jOeEtuWQjuS5n+ecn+eahOiDveeUqAogICAgICAgIH0pOwogICAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgnc2Nyb2xsJywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICBjb25zdCB3cmFwUmFmID0gZnVuY3Rpb24gKGYpIHsKICAgICAgICAgICAgbGV0IGRpcnR5ID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaWYgKGRpcnR5KSByZXR1cm47CiAgICAgICAgICAgICAgZGlydHkgPSB0cnVlOwogICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBkaXJ0eSA9IGZhbHNlOwogICAgICAgICAgICAgICAgZigpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwogICAgICAgICAgfTsKICAgICAgICAgIC8vIHZtLl9fcHJvdG9fXy5zaXplRGVwZW5kZW5jaWVzIOmHjOmdouWtmOeahOaYr+WOn+acrOWFs+W/g+eahOWxnuaApwogICAgICAgICAgLy8g6YKj5Liq5rKh5LuA5LmI57uf5LiA55qE5aW95Yqe5rOV57uZ5pS56L+H5p2l77yM5L2G5piv5oiR5Lus5Y+v5Lul5ZyoIHZtIOiHquW3sei6q+S4iuiuvue9rui/meS4quWxnuaAp+adpeimhuebluWugwogICAgICAgICAgLy8g5Zug5Li66K6+572u55qE6L+Z5Liq5bGe5oCn5oiR5Lus5bm25LiN5pyf5pyb5Lul5ZCO6L+Y5pyJ5Y+Y5YyW77yM5omA5Lul5oiR5Lus5LiN6ZyA6KaB6K6p5a6D6L+HIFZ1ZSDnmoTnlJ/lkb3lkajmnJ8gJGZvcmNlVXBkYXRlIOWwseaYr+S6hgogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHZtLCAnc2l6ZURlcGVuZGVuY2llcycsIHsgdmFsdWU6IFsnX3lhd2ZfSGVpZ2h0J10sIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7CiAgICAgICAgICBjb25zdCBzZW5zb3JQcmVmaXggPSAneWF3Zl9yZXNpemVfc2Vuc29yX2VsZW1lbnRfJzsKICAgICAgICAgIGNvbnN0IHJlc2V0U2Vuc29yID0gZnVuY3Rpb24gKGNvbnRhaW5lcikgewogICAgICAgICAgICBjb25zdCBbZXhwYW5kLCBzaHJpbmtdID0gY29udGFpbmVyLmNoaWxkcmVuOwogICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBjb250YWluZXIuY2xpZW50SGVpZ2h0OwogICAgICAgICAgICBleHBhbmQuc2Nyb2xsVG9wID0gMWU3OwogICAgICAgICAgICBzaHJpbmsuc2Nyb2xsVG9wID0gMWU3OwogICAgICAgICAgICByZXR1cm4gaGVpZ2h0OwogICAgICAgICAgfTsKICAgICAgICAgIGNvbnN0IG9uU2Nyb2xsID0gZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgICAgIHJldHVybiB3cmFwUmFmKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSB2bS4kcmVmc1tzZW5zb3JQcmVmaXggKyBpbmRleF07CiAgICAgICAgICAgICAgaWYgKCFjb250YWluZXIpIHJldHVybjsKICAgICAgICAgICAgICB2bS5kYXRhW2luZGV4XS5feWF3Zl9IZWlnaHQgPSByZXNldFNlbnNvcihjb250YWluZXIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CiAgICAgICAgICAvLyDlpoLmnpzlj6/ku6Xmioogc2Vuc29yIOWBmuaIkOe7hOS7tueahOivne+8jOWFtuWunuWPquimgSBtb3VudCDml7blpITnkIbkuIDkuIvlsLHooYzkuobvvIzkuI3ov4fov5nph4zmmK/msqHlip7ms5UKICAgICAgICAgIGNvbnN0IHVwZGF0ZVNlbnNvciA9IHdyYXBSYWYoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb25zdCBhbGxTZW5zb3IgPSBPYmplY3Qua2V5cyh2bS4kcmVmcykuZmlsdGVyKGtleSA9PiBrZXkuc3RhcnRzV2l0aChzZW5zb3JQcmVmaXgpKTsKICAgICAgICAgICAgYWxsU2Vuc29yLm1hcChrZXkgPT4gTnVtYmVyLnBhcnNlSW50KGtleS5zbGljZShzZW5zb3JQcmVmaXgubGVuZ3RoKSwgMTApKS5mb3JFYWNoKGluZGV4ID0+IHsKICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSB2bS4kcmVmc1tzZW5zb3JQcmVmaXggKyBpbmRleF07CiAgICAgICAgICAgICAgaWYgKCFjb250YWluZXIpIHJldHVybjsKICAgICAgICAgICAgICBjb25zdCBbZXhwYW5kLCBzaHJpbmtdID0gY29udGFpbmVyLmNoaWxkcmVuOwogICAgICAgICAgICAgIGlmIChleHBhbmQuc2Nyb2xsVG9wICE9PSAwICYmIHNocmluay5zY3JvbGxUb3AgIT09IDApIHJldHVybjsKICAgICAgICAgICAgICB2bS5kYXRhW2luZGV4XS5feWF3Zl9IZWlnaHQgPSByZXNldFNlbnNvcihjb250YWluZXIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgdm0uJHNjb3BlZFNsb3RzLmNvbnRlbnQgPSAoZnVuY3Rpb24gKGNvbnRlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgY29uc3QgY3JlYXRlRWxlbWVudCA9IHZtLl9zZWxmLl9jLCBoID0gY3JlYXRlRWxlbWVudDsKICAgICAgICAgICAgICBjb25zdCByYXcgPSBjb250ZW50LmNhbGwodGhpcywgZGF0YSk7CiAgICAgICAgICAgICAgY29uc3QgeyBpbmRleCB9ID0gZGF0YTsKICAgICAgICAgICAgICBjb25zdCByZXNpemVTZW5zb3IgPSBoKCdkaXYnLCB7CiAgICAgICAgICAgICAgICBjbGFzczogJ3lhd2YtcmVzaXplLXNlbnNvcicsCiAgICAgICAgICAgICAgICByZWY6IHNlbnNvclByZWZpeCArIGluZGV4LAogICAgICAgICAgICAgIH0sIFsKICAgICAgICAgICAgICAgIGgoJ2RpdicsIHsKICAgICAgICAgICAgICAgICAgY2xhc3M6ICd5YXdmLXJlc2l6ZS1zZW5zb3ItZXhwYW5kJywKICAgICAgICAgICAgICAgICAgb246IHsgJyZzY3JvbGwnOiBvblNjcm9sbChpbmRleCkgfSwKICAgICAgICAgICAgICAgIH0sIFsKICAgICAgICAgICAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ3lhd2YtcmVzaXplLXNlbnNvci1jaGlsZCcgfSksCiAgICAgICAgICAgICAgICBdKSwKICAgICAgICAgICAgICAgIGgoJ2RpdicsIHsKICAgICAgICAgICAgICAgICAgY2xhc3M6ICd5YXdmLXJlc2l6ZS1zZW5zb3Itc2hyaW5rJywKICAgICAgICAgICAgICAgICAgb246IHsgJyZzY3JvbGwnOiBvblNjcm9sbChpbmRleCkgfSwKICAgICAgICAgICAgICAgIH0sIFsKICAgICAgICAgICAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ3lhd2YtcmVzaXplLXNlbnNvci1jaGlsZCcgfSksCiAgICAgICAgICAgICAgICBdKSwKICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBBcnJheS5pc0FycmF5KHJhdykgPyByYXcgOiBbcmF3XTsKICAgICAgICAgICAgICByZXN1bHQucHVzaChyZXNpemVTZW5zb3IpOwogICAgICAgICAgICAgIHVwZGF0ZVNlbnNvcigpOwogICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9KHZtLiRzY29wZWRTbG90cy5jb250ZW50KSk7CiAgICAgICAgICB2bS4kd2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5kYXRhOyB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2bS5kYXRhKSkgcmV0dXJuOwogICAgICAgICAgICB2bS5kYXRhLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXRlbSwgJ195YXdmX0hlaWdodCcpOwogICAgICAgICAgICAgIGlmICghZGVzY3JpcHRvcikgewogICAgICAgICAgICAgICAgdm0uJHNldChpdGVtLCAnX3lhd2ZfSGVpZ2h0JywgMCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICghZGVzY3JpcHRvci5zZXQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHNpemUgPSB2bS5feWF3Zl9IZWlnaHQ7CiAgICAgICAgICAgICAgICBkZWxldGUgdm0uX3lhd2ZfSGVpZ2h0OwogICAgICAgICAgICAgICAgdm0uJHNldChpdGVtLCAnX3lhd2ZfSGVpZ2h0Jywgc2l6ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgdm0uJGZvcmNlVXBkYXRlKCk7CiAgICAgICAgfSk7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoa2V5LCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIGNvbnN0IGRldGFpbCA9IEpTT04ucGFyc2UoZXZlbnQuZGV0YWlsKTsKICAgICAgICAgIGlmIChkZXRhaWwuYWN0aW9uID09PSAncmVydW4nKSB7CiAgICAgICAgICAgIC8vIOWvueeOsOacieeahOWFg+e0oOWGjeadpeS4gOasoQogICAgICAgICAgICB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0oJ2ZlZWQtc2Nyb2xsJywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICAgICAgWy4uLnZtLmRhdGFdLmZvckVhY2goYXN5bmMgZmVlZCA9PiB7CiAgICAgICAgICAgICAgICBpZiAoWydsb2FkaW5nJywgJ3J1bm5pbmcnXS5pbmNsdWRlcyhmZWVkLl95YXdmX0ZpbHRlclN0YXR1cykpIHJldHVybjsKICAgICAgICAgICAgICAgIGNvbnN0IHsgcmVzdWx0LCByZWFzb24gfSA9IGF3YWl0IHRyaWdnZXJGaWx0ZXIodm0sIGZlZWQpOwogICAgICAgICAgICAgICAgYXBwbHlGaWx0ZXJSZXN1bHQodm0sIGZlZWQsIHsgcmVzdWx0LCByZWFzb24gfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sIHsgd2F0Y2g6IGZhbHNlIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChkZXRhaWwuYWN0aW9uID09PSAncmVzdWx0JykgewogICAgICAgICAgICAvLyDlupTnlKjov4fmu6Tnu5PmnpwKICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IHBlbmRpbmdGZWVkcy5nZXQoZGV0YWlsLm1pZCk7CiAgICAgICAgICAgIGlmIChoYW5kbGVyKSBoYW5kbGVyKGRldGFpbC5yZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0sIHRydWUpOwogICAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgnZmVlZC1zY3JvbGwnLCBmdW5jdGlvbiAodm0pIHsKICAgICAgICAgIC8vIOW9kyBmZWVkLXNjcm9sbCDlhoUgZmVlZCDliJfooajlj5jljJbml7bvvIzmiJHku6zmiorpgqPkupvmsqHop4Hov4fnmoTlhajpg73moIforrDkuIDkuIsKICAgICAgICAgIHZtLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmRhdGE7IH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY29uc3QgZmVlZHMgPSBbLi4udm0uZGF0YV07CiAgICAgICAgICAgIGZlZWRzLmZvckVhY2goYXN5bmMgZmVlZCA9PiB7CiAgICAgICAgICAgICAgaWYgKCEoZmVlZC5taWQgPiAwKSkgcmV0dXJuOwogICAgICAgICAgICAgIGlmIChmZWVkLl95YXdmX0ZpbHRlckFwcGx5KSByZXR1cm47CiAgICAgICAgICAgICAgdm0uJHNldChmZWVkLCAnX3lhd2ZfRmlsdGVyU3RhdHVzJywgJ2xvYWRpbmcnKTsKICAgICAgICAgICAgICB2bS4kc2V0KGZlZWQsICdfeWF3Zl9GaWx0ZXJSZWFzb24nLCBudWxsKTsKICAgICAgICAgICAgICB2bS4kc2V0KGZlZWQsICdfeWF3Zl9GaWx0ZXJBcHBseScsIHRydWUpOwogICAgICAgICAgICAgIGF3YWl0IGxvbmdDb250ZW50RXhwYW5kKHZtLCBmZWVkKTsKICAgICAgICAgICAgICBjb25zdCB7IHJlc3VsdCwgcmVhc29uIH0gPSBhd2FpdCB0cmlnZ2VyRmlsdGVyKHZtLCBmZWVkKTsKICAgICAgICAgICAgICBhcHBseUZpbHRlclJlc3VsdCh2bSwgZmVlZCwgeyByZXN1bHQsIHJlYXNvbiB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LCB7IGltbWVkaWF0ZTogdHJ1ZSB9KTsKICAgICAgICB9KTsKCgogICAgICB9LCB1dGlsLmluamVjdC5yb290S2V5LCBrZXkpOwogICAgfQogIH0sIHsgcHJpb3JpdHk6IHByaW9yaXR5LkxBU1QgfSk7CgogIGkxOG4uZm9sZFJlYXNvbiA9IHsKICAgIGNuOiAnIuW3suaKmOWPoCBAIiBhdHRyKHlhd2YtZmVlZC1hdXRob3IpICIg55qE5LiA5p2h5b6u5Y2aIicsCiAgICB0dzogJyLlt7LmipjnloogQCIgYXR0cih5YXdmLWZlZWQtYXV0aG9yKSAiIOeahOS4gOaineW+ruWNmiInLAogICAgZW46ICciQSBmZWVkIHBvc3RlZCBieSBAIiBhdHRyKHlhd2YtZmVlZC1hdXRob3IpJywKICB9OwoKICAvLyDljZXmnaHlvq7ljZrpobXpnaLmsLjov5zkuI3lupTlvZPpmpDol4/lvq7ljZoKICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiBzaW5nbGVXZWlib1BhZ2VVbnNldFJ1bGUoKSB7CiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2lkXj0iUGxfT2ZmaWNpYWxfV2VpYm9EZXRhaWxfXyJdJykgPyAndW5zZXQnIDogbnVsbDsKICB9LCB7IHByaW9yaXR5OiAxZTYgfSk7CiAgLy8g5aS05p2h5paH56ug5piv5LiA5p2h5b6u5Y2a77yM57G75Ly85LqO5Y2V5p2h5b6u5Y2a77yM5LiN5bqU5b2T6ZqQ6JePCiAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gc2luZ2xlV2VpYm9QYWdlVW5zZXRSdWxlKGZlZWQpIHsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gIT09IDYpIHJldHVybiBudWxsOwogICAgcmV0dXJuIGZlZWQubWF0Y2hlcygnLldCX2FydGljYWwgKicpID8gJ3Vuc2V0JyA6IG51bGw7CiAgfSwgeyBwcmlvcml0eTogMWU2IH0pOwogIC8vIOaXoOiuuuWboOS4uuS9leenjeWOn+WboO+8jOWQjOS4gOmhtemdouS4iuWQjOS4gOadoeW+ruWNmuS4jeW6lOWHuueOsOS4pOasoQogIC8vIDIwMjDlubQ35pyI5ZCO77yM5LiK5LiA6KGM5rOo6YeK5piv6ZSZ55qE77yM5Zug5Li65b+r6L2s5LmL5ZCO5LuW5Lus55qEIG1pZCDmmK/kuIDmoLfnmoTvvIzpnIDopoHnlKggZm1pZCDljLrliIYKICAvLyDkuI3ov4flsLHnrpfmmK/lv6vovaznmoTvvIzlsZXnpLrlh6DmrKHkuZ/msqHmnInku7vkvZXmhI/kuYnvvIzmiYDku6Xov5nmrrXpgLvovpHkv53mjIHkuI3lj5gKICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiBoaWRlRHVwbGljYXRlKGZlZWQpIHsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gIT09IDYpIHJldHVybiBudWxsOwogICAgY29uc3QgbWlkID0gZmVlZC5nZXRBdHRyaWJ1dGUoJ21pZCcpOwogICAgaWYgKCFtaWQpIHJldHVybiBudWxsOwogICAgY29uc3QgYWxsID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZmVlZF90eXBlW21pZF0nKSk7CiAgICBpZiAoYWxsLmZpbmQodGhhdCA9PiB0aGF0ICE9PSBmZWVkICYmIHRoYXQuZ2V0QXR0cmlidXRlKCdtaWQnKSA9PT0gbWlkKSkgcmV0dXJuICdoaWRlJzsKICAgIHJldHVybiBudWxsOwogIH0sIHsgcHJpb3JpdHk6IDFlNiB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZXNldC9kaWFsb2cuanMKLyoqCiAqIOi/meS4quaWh+S7tueUqOS6juaYvuekuuS4gOS4quaYvuekuuS6huiLpeW5suadoeinhOWImeeahOWvueivneahhgogKi8KOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKCiAgY29uc3QgdWkgPSB1dGlsLnVpOwogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CgogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3QgdGFicyA9IHJ1bGUudGFiczsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBjb25maWdEaWFsb2dUaXRsZTogewogICAgICBjbjogJ+iuvue9riAtIOiNr+aWuSAoWUFXRiknLAogICAgICB0dzogJ+ioreWumiAtIOiXpeaWuSAoWUFXRiknLAogICAgICBlbjogJ1NldHRpbmdzIC0gWUFXRiAoWWV0IEFub3RoZXIgV2VpYm8gRmlsdGVyKScsCiAgICB9LAogICAgc2VhcmNoRW1wdHlJbnB1dDogeyBjbjogJ+mUruWFpeS7peaQnOe0ouiuvue9rumhuScsIHR3OiAn6Y215YWl5Lul5pCc5bCL6Kit5a6a6aCFJywgZW46ICdUeXBlIHRvIHNlYXJjaCBzZXR0aW5ncycgfSwKICAgIHNlYXJjaEVtcHR5UmVzdWx0OiB7IGNuOiAn5pyq5om+5Yiw5LiO5oKo6L6T5YWl5Yy56YWN55qE6K6+572u6aG5JywgdHc6ICfmnKrmib7liLDoiIfmgqjovLjlhaXljLnphY3nmoToqK3nva7poIUnLCBlbjogJ05vIE1hdGNoZWQgU2V0dGluZ3MnIH0sCiAgfSk7CgogIC8qKiBAdHlwZSB7eyBbZTogc3RyaW5nXTogKCkgPT4gSFRNTEVsZW1lbnQgfX0gKi8KICBjb25zdCBjb25maWdEb20gPSB7fTsKICBjb25maWdEb20ubGVmdCA9ICgpID0+IHsKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9IldCX21pbml0YWIgeWF3Zi1jb25maWctaGVhZGVyIiBub2RlLXR5cGU9Inlhd2YtY29uZmlnLWhlYWRlciI+PHVsIGNsYXNzPSJtaW5pdGJfdWwgU19saW5lMSBTX2JnMSBjbGVhcmZpeCI+PC91bD48L2Rpdj4nOwogICAgfSBlbHNlIHsKICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJ5YXdmLWNvbmZpZy1oZWFkZXIiPjx1bCBjbGFzcz0id29vLWJveC1mbGV4IHdvby10YWItbmF2Ij48L3VsPjwvZGl2Pic7CiAgICB9CiAgICByZXR1cm4gY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5maXJzdENoaWxkKTsKICB9OwogIGNvbmZpZ0RvbS5zZWFyY2ggPSAoKSA9PiB7CiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpOwogICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxsaSBjbGFzcz0ibWluaXRiX2l0ZW0gU19saW5lMSB5YXdmLWNvbmZpZy10YWIgeWF3Zi1jb25maWctdGFiLXNlYXJjaCI+PGxhYmVsIGNsYXNzPSJtaW5pdGJfbGsgU190eHQxIj48aW5wdXQgaWQ9Inlhd2YtY29uZmlnLXNlYXJjaCIgY2xhc3M9Inlhd2YtY29uZmlnLXNlYXJjaCIgdHlwZT0ic2VhcmNoIj48c3BhbiBjbGFzcz0ieWF3Zi1jb25maWctc2VhcmNoLWxvZ28gV19maWNvbiBTX3R4dDIiPmY8L3NwYW4+PC9sYWJlbD48L2xpPic7CiAgICB9IGVsc2UgewogICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxsaSBjbGFzcz0id29vLXRhYi1pdGVtLW1haW4geWF3Zi1jb25maWctdGFiIHlhd2YtY29uZmlnLXRhYi1zZWFyY2giPjxsYWJlbD48aW5wdXQgaWQ9Inlhd2YtY29uZmlnLXNlYXJjaCIgY2xhc3M9Indvby1pbnB1dC1tYWluIHlhd2YtY29uZmlnLXNlYXJjaCIgdHlwZT0ic2VhcmNoIj48aSBkYXRhLXYtMjYyMT0iIiBjbGFzcz0id29vLWZvbnQgaWNvbiB3b28tZm9udC0tc2VhcmNoIHlhd2YtY29uZmlnLXNlYXJjaC1sb2dvIj48L2k+PC9sYWJlbD48L2xpPic7CiAgICB9CiAgICByZXR1cm4gY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5maXJzdENoaWxkKTsKICB9OwogIGNvbmZpZ0RvbS5pdGVtID0gdGl0bGUgPT4gewogICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8bGkgY2xhc3M9Im1pbml0Yl9pdGVtIFNfbGluZTEgeWF3Zi1jb25maWctdGFiIj48YSBjbGFzcz0ibWluaXRiX2xrIFNfdHh0MSBTX2JnMSBTX2JnMiIgYWN0aW9uLXR5cGU9InRhYl9pdGVtIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij48L2E+PC9saT4nOwogICAgICBjb25zdCB0ZXh0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsKICAgICAgdGV4dC5hcHBlbmRDaGlsZCh0aXRsZSk7CiAgICB9IGVsc2UgewogICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxsaSBjbGFzcz0id29vLXRhYi1pdGVtLW1haW4geWF3Zi1jb25maWctdGFiIj48YnV0dG9uPjwvYnV0dG9uPjwvbGk+JzsKICAgICAgY29uc3QgdGV4dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdidXR0b24nKTsKICAgICAgdGV4dC5hcHBlbmRDaGlsZCh0aXRsZSk7CiAgICB9CiAgICByZXR1cm4gY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5maXJzdENoaWxkKTsKICB9OwogIGNvbmZpZ0RvbS5yaWdodCA9ICgpID0+IHsKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxkaXYgbm9kZS10eXBlPSJ5YXdmLWNvbmZpZy1ib2R5IiBjbGFzcz0ieWF3Zi1jb25maWctYm9keSB5YXdmLXdpbmRvdy1ib2R5Ij48L2Rpdj4nOwogICAgfSBlbHNlIHsKICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJ5YXdmLWNvbmZpZy1ib2R5IHlhd2Ytd2luZG93LWJvZHkiPjwvZGl2Pic7CiAgICB9CiAgICByZXR1cm4gY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5maXJzdENoaWxkKTsKICB9OwogIGNvbmZpZ0RvbS5sYXllciA9ICgpID0+IHsKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9Inlhd2YtY29uZmlnLWxheWVyIj48L2Rpdj4nOwogICAgfSBlbHNlIHsKICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJ5YXdmLWNvbmZpZy1sYXllciI+PC9kaXY+JzsKICAgIH0KICAgIHJldHVybiBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmZpcnN0Q2hpbGQpOwogIH07CgogIGNvbnN0IHJlbmRlclRpcCA9IChsYXllciwgdGV4dCkgPT4gewogICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICBsYXllci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iV0JfZW1wdHkiPjxkaXYgY2xhc3M9IldCX2lubmVyd3JhcCI+PGRpdiBjbGFzcz0iZW1wdHlfY29uIGNsZWFyZml4Ij48cCBjbGFzcz0iaWNvbl9iZWQiPjxpIGNsYXNzPSJXX2ljb24gaWNvbl93YXJuQiI+PC9pPjwvcD48cCBjbGFzcz0idGV4dCB5YXdmLXRpcC10ZXh0Ij48L3A+PC9kaXY+PC9kaXY+PC9kaXY+JzsKICAgIH0gZWxzZSB7CiAgICAgIGxheWVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJ3b28tdGlwLW1haW4gd29vLXRpcC12ZXJ0aWNhbCB5YXdmLWVtcHR5LXRpcCI+PHNwYW4gY2xhc3M9Indvby10aXAtaWNvbiB3b28tdGlwLXdhcm5GaWxsIHlhd2YtZW1wdHktdGlwLWljb24iPjwvc3Bhbj48c3BhbiBjbGFzcz0id29vLXRpcC10ZXh0IHlhd2YtdGlwLXRleHQiPjwvcD48L2Rpdj4nOwogICAgICBsYXllci5xdWVyeVNlbGVjdG9yKCcud29vLXRpcC1pY29uJykuYXBwZW5kQ2hpbGQodWkuaWNvbignd2FybicpLmRvY3VtZW50RWxlbWVudCkuc2V0QXR0cmlidXRlKCdjbGFzcycsICd3b28tdGlwLWljb24nKTsKICAgIH0KICAgIGxheWVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLXRpcC10ZXh0JykudGV4dENvbnRlbnQgPSB0ZXh0OwogIH07CgogIGNvbnN0IHJlbmRlclNlYXJjaCA9IChsYXllciwgaW5wdXQsIGZpbHRlcikgPT4gewogICAgY29uc3Qgc2VhcmNoVGV4dHMgPSAoaW5wdXQubWF0Y2goL1xTKy9nKSB8fCBbXSkuZmlsdGVyKHggPT4gIXguaW5jbHVkZXMoJzonKSkubWFwKHQgPT4gdC50b1VwcGVyQ2FzZSgpKTsKICAgIGNvbnN0IFtfdmVyTWF0Y2gsIHZlck9wLCB2ZXJOdW1dID0gaW5wdXQubWF0Y2goL1xidmVyKD86c2lvbik/OihbPjxdPz0/KShcZCspXGIvKSB8fCBbXTsKICAgIGNvbnN0IHZlcnNpb25UZXN0ID0gewogICAgICAnPic6IHYgPT4gdiA+IHZlck51bSwKICAgICAgJzwnOiB2ID0+IHYgPCB2ZXJOdW0sCiAgICAgICc+PSc6IHYgPT4gdiA+PSB2ZXJOdW0sCiAgICAgICc8PSc6IHYgPT4gdiA8PSB2ZXJOdW0sCiAgICAgICc9JzogdiA9PiB2ID09PSArdmVyTnVtLAogICAgICAnJzogdiA9PiB2ID09PSArdmVyTnVtLAogICAgfVt2ZXJPcF0gfHwgKCgpID0+IHRydWUpOwogICAgY29uc3QgW193YnZlck1hdGNoLCB3YlZlck51bV0gPSBpbnB1dC5tYXRjaCgvXGJ3ZWlibzp2KFs2N10pXGIvKSB8fCBbXTsKICAgIGNvbnN0IHdlaWJvVmVyc2lvblRlc3QgPSB3YlZlck51bSA/ICh2ID0+IEFycmF5LmlzQXJyYXkodikgPyB2LmluY2x1ZGVzKCt3YlZlck51bSkgOiB2ID09PSArd2JWZXJOdW0pIDogKCkgPT4gdHJ1ZTsKICAgIGxheWVyLmlubmVySFRNTCA9ICcnOwogICAgaWYgKCFzZWFyY2hUZXh0cy5sZW5ndGggJiYgdmVyTnVtID09IG51bGwgJiYgd2JWZXJOdW0gPT0gbnVsbCkgewogICAgICByZW5kZXJUaXAobGF5ZXIsIGkxOG4uc2VhcmNoRW1wdHlJbnB1dCk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IGl0ZW1zID0gcnVsZS5xdWVyeSh7CiAgICAgIGZpbHRlcjogZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoIWl0ZW0udmVyc2lvbikgcmV0dXJuIGZhbHNlOwogICAgICAgIGlmICghdmVyc2lvblRlc3QoaXRlbS52ZXJzaW9uKSkgcmV0dXJuIGZhbHNlOwogICAgICAgIGlmICghd2VpYm9WZXJzaW9uVGVzdChpdGVtLndlaWJvVmVyc2lvbikpIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJyAmJiAhZmlsdGVyKGl0ZW0pKSByZXR1cm4gZmFsc2U7CiAgICAgICAgY29uc3QgdGV4dCA9IGl0ZW0udGV4dCgpLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgaWYgKHNlYXJjaFRleHRzLnNvbWUodCA9PiAhdGV4dC5pbmNsdWRlcyh0KSkpIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSwKICAgIH0pOwogICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgICByZW5kZXJUaXAobGF5ZXIsIGkxOG4uc2VhcmNoRW1wdHlSZXN1bHQpOwogICAgICByZXR1cm47CiAgICB9CiAgICByZW5kZXIobGF5ZXIsIGl0ZW1zKTsKICB9OwoKICAvKioKICAgKiBAcGFyYW0ge0VsZW1lbnR9IGlubmVyCiAgICogQHBhcmFtIHtBcnJheTxUYWI+fSB0YWJzCiAgICovCiAgY29uc3QgcmVuZGVyVGFicyA9IGZ1bmN0aW9uIChpbm5lciwgdGFicywgeyBpbml0aWFsID0gbnVsbCwgZmlsdGVyID0gbnVsbCB9ID0ge30pIHsKICAgIGlubmVyLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWlubmVyJyk7CiAgICBjb25zdCBsZWZ0ID0gaW5uZXIuYXBwZW5kQ2hpbGQoY29uZmlnRG9tLmxlZnQoKSk7CiAgICBjb25zdCByaWdodCA9IGlubmVyLmFwcGVuZENoaWxkKGNvbmZpZ0RvbS5yaWdodCgpKTsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDcpIHsKICAgICAgY29uc3QgdjdUaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgdjdUaXAuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9InRpcCB3b28tYm94LWZsZXggd29vLWJveC1hbGlnbkNlbnRlciB3b28tYm94LWp1c3RpZnlDZW50ZXIgd29vLXRpcC1tYWluIHdvby10aXAtZmxhdCB3b28tdGlwLWVycm9yIiBzdHlsZT0icGFkZGluZzogMTBweDsiPjxzcGFuIGNsYXNzPSJ3b28tdGlwLXRleHQiPuiNr+aWue+8iFlBV0bvvInpkojlr7nlvq7ljZrmlrDniYjvvIhWN++8ieeahOaUr+aMgeato+WcqOW8gOWPkeS4re+8geebruWJjee7neWkp+WkmuaVsOWKn+iDveaaguS4jeaUr+aMgeaWsOeJiO+8ge+8geasoui/juWIsCA8YSBocmVmPSJodHRwczovL2dpdGh1Yi5jb20vdGlhbnNoL3lhb2ZhbmciIHRhcmdldD0iX2JsYW5rIiByZWw9Im5vb3BlbmVyIj7pobnnm67kuLvpobU8L2E+IOi0oeeMruS7o+egge+8gTwvc3Bhbj48L2Rpdj4nOwogICAgICBjb25zdCB0ZXh0ID0gdjdUaXAucXVlcnlTZWxlY3RvcignLndvby10aXAtdGV4dCcpOwogICAgICB0ZXh0LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHVpLmljb24oJ2Vycm9yJykuZG9jdW1lbnRFbGVtZW50LCB0ZXh0KS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ3dpZHRoOiAzMnB4OyBoZWlnaHQ6IDMycHg7Jyk7CiAgICAgIHJpZ2h0LmFwcGVuZENoaWxkKHY3VGlwLmZpcnN0Q2hpbGQpOwogICAgfQogICAgY29uc3QgdGFibGlzdCA9IGxlZnQucXVlcnlTZWxlY3RvcigndWwnKTsKICAgIGNvbnN0IHNlYXJjaCA9IHRhYmxpc3QuYXBwZW5kQ2hpbGQoY29uZmlnRG9tLnNlYXJjaCgpKTsKICAgIGNvbnN0IHNlYXJjaElucHV0ID0gc2VhcmNoLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7CiAgICBjb25zdCByZW5kZXJUYWJzID0gdGFicy5maWx0ZXIodGFiID0+IHRhYi50eXBlID09PSAndGFiJyk7CiAgICAvKiogQHR5cGUge0VsZW1lbnQ/fSAqLwogICAgbGV0IGN1cnJlbnQgPSBudWxsOwogICAgLyoqIEB0eXBlIHtXZWFrTWFwPEVsZW1lbnQsIEZ1bmN0aW9uPn0gKi8KICAgIGNvbnN0IHRhYkluaXQgPSBuZXcgV2Vha01hcCgpOwogICAgY29uc3QgdGFiTGF5ZXIgPSByZW5kZXJUYWJzLm1hcCh0YWIgPT4gewogICAgICBjb25zdCBsYXllciA9IHJpZ2h0LmFwcGVuZENoaWxkKGNvbmZpZ0RvbS5sYXllcigpKTsKICAgICAgcmV0dXJuIGxheWVyOwogICAgfSk7CiAgICBjb25zdCBoaWRlQWxsTGF5ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIFsuLi50YWJMYXllciwgc2VhcmNoTGF5ZXJdLmZvckVhY2gobGF5ZXIgPT4gewogICAgICAgIGlmIChsYXllci5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScpIHsKICAgICAgICAgIGxheWVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CiAgICBjb25zdCB0YWJMZWZ0ID0gcmVuZGVyVGFicy5tYXAoKHRhYiwgaW5kZXgpID0+IHsKICAgICAgY29uc3QgbGF5ZXIgPSB0YWJMYXllcltpbmRleF07CiAgICAgIGNvbnN0IHRhYkxlZnQgPSB0YWJsaXN0LmFwcGVuZENoaWxkKGNvbmZpZ0RvbS5pdGVtKHRhYi5nZXRSZW5kZXJSZXN1bHQoKSkpOwogICAgICB0YWJJbml0LnNldCh0YWJMZWZ0LCAoKSA9PiB7CiAgICAgICAgaGlkZUFsbExheWVyKCk7CiAgICAgICAgbGF5ZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgcmVuZGVyKGxheWVyLCBydWxlLnF1ZXJ5KHsgYmFzZTogW3RhYl0sIGZpbHRlciB9KSk7CiAgICAgICAgbGF5ZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgIH0pOwogICAgICByZXR1cm4gdGFiTGVmdDsKICAgIH0pOwogICAgY29uc3Qgc2VhcmNoTGF5ZXIgPSByaWdodC5hcHBlbmRDaGlsZChjb25maWdEb20ubGF5ZXIoKSk7CiAgICBzZWFyY2hMYXllci5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1sYXllci1zZWFyY2gnKTsKICAgIHRhYkluaXQuc2V0KHNlYXJjaCwgKCkgPT4gewogICAgICBoaWRlQWxsTGF5ZXIoKTsKICAgICAgc2VhcmNoTGF5ZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgIHJlbmRlclNlYXJjaChzZWFyY2hMYXllciwgc2VhcmNoSW5wdXQudmFsdWUsIGZpbHRlcik7CiAgICAgIHNlYXJjaExheWVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgfSk7CiAgICBjb25zdCBzZXRDdXJyZW50ID0gdGFiTGVmdCA9PiB7CiAgICAgIGlmIChjdXJyZW50ID09PSB0YWJMZWZ0KSByZXR1cm47CiAgICAgIGNvbnN0IGN1cnJlbnRDbGFzc05hbWUgPSB5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYgPyAnY3VycmVudCcgOiAnd29vLXRhYi1hY3RpdmUnOwogICAgICBpZiAoY3VycmVudCkgY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKCd5YXdmLWN1cnJlbnQnLCBjdXJyZW50Q2xhc3NOYW1lKTsKICAgICAgY3VycmVudCA9IHRhYkxlZnQ7CiAgICAgIHRhYkxlZnQuY2xhc3NMaXN0LmFkZCgneWF3Zi1jdXJyZW50JywgY3VycmVudENsYXNzTmFtZSk7CiAgICAgIGlmIChzZWFyY2ggIT09IHRhYkxlZnQgJiYgc2VhcmNoSW5wdXQudmFsdWUpIHNlYXJjaElucHV0LnZhbHVlID0gJyc7CiAgICAgIHRhYkluaXQuZ2V0KHRhYkxlZnQpKCk7CiAgICAgIHJpZ2h0LnNjcm9sbFRvKDAsIDApOwogICAgfTsKICAgIC8vIOiHquWKqOmAieS4reebruagh+mAiemhueWNoe+8jOaIluesrOS4gOS4qumAiemhueWNoQogICAgc2V0Q3VycmVudCh0YWJMZWZ0Wyhpbml0aWFsICYmIHJlbmRlclRhYnMuaW5kZXhPZihpbml0aWFsKSArIDEgfHwgMSkgLSAxXSk7CiAgICBsZWZ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICBjb25zdCB0YWJMZWZ0ID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy55YXdmLWNvbmZpZy10YWInKTsKICAgICAgaWYgKCF0YWJMZWZ0KSByZXR1cm47CiAgICAgIGlmICh0YWJMZWZ0ID09PSBzZWFyY2gpIHJldHVybjsKICAgICAgc2V0Q3VycmVudCh0YWJMZWZ0KTsKICAgIH0pOwogICAgLy8g5b2T5Zyo5pCc57Si5qGG6YeM6Z2i6L6T5YWl5YaF5a6555qE5pe25YCZ77yM6YCJ5Lit5pCc57Si5qGG5bm25Yi35paw57uT5p6cCiAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGV2ZW50ID0+IHsKICAgICAgaWYgKCFzZWFyY2hJbnB1dC52YWx1ZSAmJiBjdXJyZW50ICE9PSBzZWFyY2gpIHJldHVybjsKICAgICAgaWYgKGN1cnJlbnQgIT09IHNlYXJjaCkgc2V0Q3VycmVudChzZWFyY2gpOwogICAgICBlbHNlIHRhYkluaXQuZ2V0KHNlYXJjaCkoKTsKICAgIH0pOwogIH07CgogIGNvbnN0IHJlbmRlciA9IGZ1bmN0aW9uIChpbm5lciwgaXRlbXMpIHsKICAgIGNvbnN0IGdyb3VwcyA9IG5ldyBNYXAoKTsKICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgIGlmICghZ3JvdXBzLmhhcyhpdGVtLnBhcmVudCkpIHsKICAgICAgICBncm91cHMuc2V0KGl0ZW0ucGFyZW50LCBbXSk7CiAgICAgIH0KICAgICAgZ3JvdXBzLmdldChpdGVtLnBhcmVudCkucHVzaChpdGVtKTsKICAgIH0pOwogICAgWy4uLmdyb3Vwcy5lbnRyaWVzKCldLmZvckVhY2goKFtncm91cCwgaXRlbXNdKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgaW5uZXIuYXBwZW5kQ2hpbGQoZ3JvdXAuZ2V0UmVuZGVyUmVzdWx0KCkpOwogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1ncm91cC1pdGVtcycpOwogICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICBsZXQgbm9kZSA9IGl0ZW0uZ2V0UmVuZGVyUmVzdWx0KCk7CiAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgfSk7CiAgICAgICAgaW5uZXIuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHV0aWwuZGVidWcoJ0Vycm9yIHdoaWxlIHJlbmRlciBjb25maWcgbGlzdDonLCBlKTsKICAgICAgfQogICAgfSk7CiAgfTsKICBydWxlLnJlbmRlciA9IHJlbmRlcjsKCiAgcnVsZS5kaWFsb2cgPSBmdW5jdGlvbiAodGFiID0gbnVsbCwgZmlsdGVyID0gbnVsbCkgewogICAgdHJ5IHsKICAgICAgdWkuZGlhbG9nKHsKICAgICAgICBpZDogJ3lhd2YtY29uZmlnJywKICAgICAgICB0aXRsZTogaTE4bi5jb25maWdEaWFsb2dUaXRsZSwKICAgICAgICByZW5kZXI6IGlubmVyID0+IHsKICAgICAgICAgIHJlbmRlclRhYnMoaW5uZXIsIHRhYnMsIHsgaW5pdGlhbDogdGFiLCBmaWx0ZXIgfSk7CiAgICAgICAgfSwKICAgICAgICBiYXI6IHRydWUsCiAgICAgIH0pLnNob3coKTsKICAgIH0gY2F0Y2ggKGUpIHsgdXRpbC5kZWJ1ZygnRXJyb3Igd2hpbGUgc2hvd2luZyBydWxlIGRpYWxvZyAlbycsIGUpOyB9CiAgfTsKCiAgY3NzLmFwcGVuZChgCi55YXdmLVdCVjYgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1pbm5lciB7IHBhZGRpbmc6IDAgMCAwIDE2MHB4OyB3aWR0aDogNjQwcHg7IGhlaWdodDogNDgwcHg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQoueWF3Zi1XQlY2ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaGVhZGVyIHsgcG9zaXRpb246IGFic29sdXRlOyB3aWR0aDogMTYwcHg7IGhlaWdodDogNDgwcHg7IHRvcDogMDsgbGVmdDogMDsgfQoueWF3Zi1XQlY2ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaGVhZGVyIHVsIHsgaGVpZ2h0OiA0NTBweDsgd2lkdGg6IDEyMHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwYWRkaW5nOiAyMHB4IDAgMTBweCA0MHB4OyBib3gtc2hhZG93OiAtNHB4IDAgMnB4IC0ycHggcmdiYSg2NCwgNjQsIDY0LCAwLjE1KSBpbnNldCwgMCA0cHggMnB4IC0ycHggcmdiYSg2NCwgNjQsIDY0LCAwLjE1KSBpbnNldDsgfQoueWF3Zi1XQlY2ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaGVhZGVyIGxpIHsgZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiAyNXB4OyBib3JkZXItc3R5bGU6IHNvbGlkIG5vbmU7IG1hcmdpbi10b3A6IC0xcHg7IH0KLnlhd2YtV0JWNiAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciBhLAoueWF3Zi1XQlY2ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaGVhZGVyIGxhYmVsIHsgd2lkdGg6IDEwMHB4OyBwYWRkaW5nOiAwIDEwcHg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgei1pbmRleDogMTsgfQoueWF3Zi1XQlY2ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaGVhZGVyIC55YXdmLWNvbmZpZy10YWI6bm90KC5jdXJyZW50KSBhIHsgYmFja2dyb3VuZDogbm9uZSB0cmFuc3BhcmVudDsgfQoueWF3Zi1XQlY2ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaGVhZGVyIC55YXdmLWNvbmZpZy1zZWFyY2ggeyAtbW96LWFwcGVhcmFuY2U6IG5vbmU7IC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsgYmFja2dyb3VuZDogbm9uZSB0cmFuc3BhcmVudDsgYm9yZGVyOiBtZWRpdW0gbm9uZTsgaGVpZ2h0OiAyNXB4OyBwYWRkaW5nOiAwIDAgMCAzMHB4OyB0ZXh0LWFsaWduOiByaWdodDsgd2lkdGg6IDcwcHg7IGJveC1zaXppbmc6IGNvbnRlbnQtYm94OyBwb3NpdGlvbjogcmVsYXRpdmU7IHotaW5kZXg6IDI7IH0KLnlhd2YtV0JWNiAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLXNlYXJjaC1sb2dvIHsgY2xlYXI6IGJvdGg7IGRpc3BsYXk6IGJsb2NrOyBmbG9hdDogbGVmdDsgbGVmdDogNDVweDsgcG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IC0yN3B4OyB0cmFuc2l0aW9uOiBsZWZ0IGxpbmVhciAwLjJzOyBjdXJzb3I6IHRleHQ7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IH0KLnlhd2YtV0JWNiAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciBsaS5jdXJyZW50IC55YXdmLWNvbmZpZy1zZWFyY2gtbG9nbywKLnlhd2YtV0JWNiAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLXNlYXJjaDpmb2N1cyB+IC55YXdmLWNvbmZpZy1zZWFyY2gtbG9nbyB7IGxlZnQ6IDE1cHg7IH0KLnlhd2YtV0JWNiAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWJvZHkgeyBwYWRkaW5nOiAxMHB4IDIwcHggMjBweDsgd2lkdGg6IDYwMHB4OyBtYXgtaGVpZ2h0OiA0NTBweDsgb3ZlcmZsb3c6IGF1dG87IGJveC1zaGFkb3c6IDAgNHB4IDJweCAtMnB4IHJnYmEoNjQsIDY0LCA2NCwgMC4xNSkgaW5zZXQ7IHBvc2l0aW9uOiByZWxhdGl2ZTsgbGluZS1oZWlnaHQ6IDIwcHg7IH0KLnlhd2YtV0JWNiAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWxheWVyIHsgcGFkZGluZy1ib3R0b206IDIwcHg7IG1pbi1oZWlnaHQ6IDQwMHB4OyB9Ci55YXdmLVdCVjYgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1sYXllci5jdXJyZW50IHsgZGlzcGxheTogYmxvY2s7IH0KYCk7CgogIGNzcy5hcHBlbmQoYAoueWF3Zi1XQlY3ICN5YXdmLWNvbmZpZyB7IHdpZHRoOiA4MDBweDsgZm9udC1zaXplOiAxNHB4OyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1pbm5lciB7IHBhZGRpbmc6IDAgMCAwIDE2MHB4OyB3aWR0aDogNjQwcHg7IGhlaWdodDogNDgwcHg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQoueWF3Zi1XQlY3ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaGVhZGVyIHsgcG9zaXRpb246IGFic29sdXRlOyB3aWR0aDogMTYwcHg7IGhlaWdodDogNDgwcHg7IHRvcDogMDsgbGVmdDogMDsgfQoueWF3Zi1XQlY3ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaGVhZGVyIHVsIHsgaGVpZ2h0OiA0NDJweDsgd2lkdGg6IDEyMHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwYWRkaW5nOiAyMHB4IDAgMjBweCA0MHB4OyBib3JkZXItcmlnaHQ6IDEwcHggc29saWQgdmFyKC0tZnJhbWUtYmFja2dyb3VuZCk7IH0KLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciBsaSB7IGRpc3BsYXk6IGJsb2NrOyB3aWR0aDogMTIwcHg7IGhlaWdodDogMjVweDsgbGluZS1oZWlnaHQ6IDI1cHg7IH0KLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciBsaS55YXdmLWN1cnJlbnQgeyBib3gtc2hhZG93OiAtMnB4IDAgdmFyKC0tdy1icmFuZCkgaW5zZXQ7IGZvbnQtd2VpZ2h0OiBib2xkOyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1oZWFkZXIgbGk6aG92ZXIgYnV0dG9uIHsgYmFja2dyb3VuZDogdmFyKC0tdy1ob3ZlcikgIWltcG9ydGFudDsgYm9yZGVyLXJhZGl1czogMTVweDsgfQoueWF3Zi1XQlY3ICN5YXdmLWNvbmZpZyAueWF3Zi1jb25maWctaGVhZGVyIGJ1dHRvbiwKLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciBsYWJlbCB7IHdpZHRoOiAxMjBweDsgcGFkZGluZzogMDsgYm9yZGVyOiBub25lOyBiYWNrZ3JvdW5kOiBub25lOyBwb3NpdGlvbjogcmVsYXRpdmU7IHotaW5kZXg6IDE7IH0KLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWhlYWRlciBidXR0b24geyBjb2xvcjogaW5oZXJpdDsgb3V0bGluZTogbm9uZTsgY3Vyc29yOiBwb2ludGVyOyBmb250OiBpbmhlcml0OyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1oZWFkZXIgLnlhd2YtY29uZmlnLXNlYXJjaCB7IC1tb3otYXBwZWFyYW5jZTogbm9uZTsgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lOyBiYWNrZ3JvdW5kOiBub25lIHRyYW5zcGFyZW50OyBoZWlnaHQ6IDI1cHg7IHBhZGRpbmc6IDAgMTBweCAgIDAgMzBweDsgdGV4dC1hbGlnbjogcmlnaHQ7IHdpZHRoOiA4MHB4OyBib3gtc2l6aW5nOiBjb250ZW50LWJveDsgcG9zaXRpb246IHJlbGF0aXZlOyB6LWluZGV4OiAyOyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1zZWFyY2gtbG9nbyB7IGNsZWFyOiBib3RoOyBkaXNwbGF5OiBibG9jazsgZmxvYXQ6IGxlZnQ7IGxlZnQ6IDU1cHg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgdG9wOiAtMThweDsgdHJhbnNpdGlvbjogbGVmdCBsaW5lYXIgMC4yczsgY3Vyc29yOiB0ZXh0OyBmb250LXdlaWdodDogbm9ybWFsOyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1oZWFkZXIgbGkueWF3Zi1jdXJyZW50IC55YXdmLWNvbmZpZy1zZWFyY2gtbG9nbywKLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLXNlYXJjaDpmb2N1cyB+IC55YXdmLWNvbmZpZy1zZWFyY2gtbG9nbyB7IGxlZnQ6IDE1cHg7IH0KLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWJvZHkgeyBwYWRkaW5nOiAxMHB4IDIwcHggMjBweDsgd2lkdGg6IDYwMHB4OyBtYXgtaGVpZ2h0OiA0NTBweDsgb3ZlcmZsb3c6IGF1dG87IHBvc2l0aW9uOiByZWxhdGl2ZTsgbGluZS1oZWlnaHQ6IDIwcHg7IH0KLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLnlhd2YtY29uZmlnLWxheWVyIHsgcGFkZGluZy1ib3R0b206IDIwcHg7IG1pbi1oZWlnaHQ6IDQwMHB4OyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC55YXdmLWNvbmZpZy1sYXllci55YXdmLWN1cnJlbnQgeyBkaXNwbGF5OiBibG9jazsgfQoueWF3Zi1XQlY3ICN5YXdmLWNvbmZpZyAud29vLWRpYWxvZy1tYWluIHsgd2lkdGg6IDgwMHB4OyBtYXgtd2lkdGg6IG5vbmU7IHBhZGRpbmc6IDA7IG92ZXJmbG93OiBoaWRkZW47IH0KLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLndvby1kaWFsb2ctdGl0bGUgeyBtYXJnaW4tYm90dG9tOiAwOyB9Ci55YXdmLVdCVjcgI3lhd2YtY29uZmlnIC53b28tdGFiLW5hdiB7IG1hcmdpbjogMDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgfQoueWF3Zi1XQlY3ICN5YXdmLWNvbmZpZyAueWF3Zi1lbXB0eS10aXAgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0KLnlhd2YtV0JWNyAjeWF3Zi1jb25maWcgLnlhd2YtZW1wdHktdGlwLWljb24geyBkaXNwbGF5OiBibG9jazsgbWFyZ2luOiAwIGF1dG8gMjBweDsgcGFkZGluZy10b3A6IDE1MHB4OyB9CmApOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlc2V0L21lbnUuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CgogIGNvbnN0IHBhZ2VtZW51ID0geWF3Zi5wYWdlbWVudSA9IHt9OwoKICBsZXQgY29udGFpbmVyUmVzb2x2ZTsKICBjb25zdCBjb250YWluZXJQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICBjb250YWluZXJSZXNvbHZlID0gcmVzb2x2ZTsKICB9KTsKCiAgbGV0IGl0ZW1zID0gW107CgogIGNvbnN0IGxpbmUgPSBmdW5jdGlvbiAoKSB7CiAgICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICB1bC5pbm5lckhUTUwgPSAnPGxpIGNsYXNzPSJsaW5lIFNfbGluZTEgeWF3Zi1jb25maWctbWVudWxpbmUiPjwvbGk+JzsKICAgIHJldHVybiB1bC5maXJzdENoaWxkOwogIH07CgogIHBhZ2VtZW51LmFkZCA9IGFzeW5jIGZ1bmN0aW9uICh7IHRpdGxlLCBocmVmID0gbnVsbCwgb25DbGljaywgb3JkZXIgPSBJbmZpbml0eSwgc2VjdGlvbiA9IDAgfSkgewogICAgY29uc3QgdWwgPSBhd2FpdCBjb250YWluZXJQcm9taXNlOwogICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgbGkuaW5uZXJIVE1MID0gJzxhIHRhcmdldD0iX3RvcCI+PC9hPic7CiAgICBjb25zdCBhID0gbGkuZmlyc3RDaGlsZDsKICAgIGEuaHJlZiA9IGhyZWYgfHwgJ2phdmFzY3JpcHQ6dm9pZCgwKTsnOwogICAgYS50ZXh0Q29udGVudCA9IHR5cGVvZiB0aXRsZSA9PT0gJ2Z1bmN0aW9uJyA/IHRpdGxlKCkgOiB0aXRsZTsKICAgIGxpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICBvbkNsaWNrKGV2ZW50KTsKICAgIH0pOwogICAgY29uc3QgaW5kZXggPSBpdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLnNlY3Rpb24gPiBzZWN0aW9uIHx8IGl0ZW0uc2VjdGlvbiA9PT0gc2VjdGlvbiAmJiBpdGVtLm9yZGVyID4gb3JkZXIpOwogICAgaWYgKGluZGV4ICE9PSAtMSkgdWwuaW5zZXJ0QmVmb3JlKGxpLCBpdGVtc1tpbmRleF0ubGkpOwogICAgZWxzZSB1bC5hcHBlbmRDaGlsZChsaSk7CiAgICBpZiAoaW5kZXggPiAwICYmIGl0ZW1zW2luZGV4IC0gMV0uc2VjdGlvbiA9PT0gc2VjdGlvbikgewogICAgICBpZiAobGkucHJldmlvdXNTaWJsaW5nLm1hdGNoZXMoJy5saW5lJykpIHVsLnJlbW92ZUNoaWxkKGxpLnByZXZpb3VzU2libGluZyk7CiAgICB9CiAgICBpZiAoaW5kZXggIT09IC0xICYmIGl0ZW1zW2luZGV4XS5zZWN0aW9uICE9PSBzZWN0aW9uKSB7CiAgICAgIGlmICghbGkubmV4dFNpYmxpbmcubWF0Y2hlcygnLmxpbmUnKSkgdWwuaW5zZXJ0QmVmb3JlKGxpbmUoKSwgbGkubmV4dFNpYmxpbmcpOwogICAgfQogICAgaXRlbXMuc3BsaWNlKGluZGV4LCAwLCB7IGxpLCBvcmRlciwgc2VjdGlvbiB9KTsKICAgIGNvbnN0IHNldFRleHQgPSBmdW5jdGlvbiAobmV3VGV4dCkgewogICAgICBsaS5maXJzdENoaWxkLnRleHRDb250ZW50ID0gdHlwZW9mIG5ld1RleHQgPT09ICdmdW5jdGlvbicgPyBuZXdUZXh0KCkgOiBuZXdUZXh0OwogICAgfTsKICAgIHJldHVybiB7IGRvbTogbGksIHRleHQ6IHNldFRleHQgfTsKICB9OwoKICBwYWdlbWVudS5yZWFkeSA9IGZ1bmN0aW9uICh1bCkgewogICAgY29udGFpbmVyUmVzb2x2ZSh1bCk7CiAgfTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvY29tbW9uL2ZlZWQuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgZW52ID0geWF3Zi5lbnY7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3QgcnVsZXMgPSB5YXdmLnJ1bGVzOwoKICBjb25zdCB1aSA9IHV0aWwudWk7CiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgY29udGV4dG1lbnUgPSB5YXdmLmNvbnRleHRtZW51OwoKICBjb25zdCBmYXN0SGFuZGxlcnMgPSBuZXcgTWFwKCk7CgogIGNvbnN0IGZlZWRDb2xsZWN0aW9uQmFsbCA9IGZ1bmN0aW9uIChhY3Rpb24pIHsKICAgIHJldHVybiB7CiAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3Bhbi5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1mZWVkLWJhbGwnKTsKICAgICAgICBzcGFuLmNsYXNzTGlzdC5hZGQoJ3lhd2YtY29uZmlnLWZlZWQtJyArIGFjdGlvbik7CiAgICAgICAgcmV0dXJuIHNwYW47CiAgICAgIH0sCiAgICB9OwogIH07CgogIGNvbnN0IGdyb3VwcyA9IGZ1bmN0aW9uICh7CiAgICBiYXNlQ2xhc3M6IEJhc2UsCiAgICB0YWI6IHRhYk5hbWUsCiAgICBrZXksCiAgICB0aXRsZSwKICAgIHR5cGUsCiAgICBiZWZvcmU6IHsgaGlkZTogYmVmb3JlSGlkZSA9IG51bGwsIHNob3c6IGJlZm9yZVNob3cgPSBudWxsLCBmb2xkOiBiZWZvcmVGb2xkID0gbnVsbCB9ID0ge30sCiAgICBkZXRhaWxzOiB7IGhpZGUgPSBudWxsLCBzaG93ID0gbnVsbCwgZm9sZCA9IG51bGwgfSwKICAgIGZhc3QgPSBudWxsLAogICAgdmVyc2lvbiwKICB9KSB7CiAgICBjb25zdCB0YWIgPSBydWxlc1t0YWJOYW1lXTsKCiAgICAvLyDliJvlu7rkuIDkuKrliIbnu4QKICAgIGNvbnN0IGdyb3VwID0gdGFiW2tleV0gPSB7fTsKICAgIGdyb3VwW2tleV0gPSBydWxlLkdyb3VwKHsKICAgICAgcGFyZW50OiB0YWJbdGFiTmFtZV0sCiAgICAgIHRlbXBsYXRlOiB0aXRsZSwKICAgIH0pOwoKICAgIC8vIOS+neasoeWIm+W7uuS4ieenjeexu+Wei+eahOi/h+a7pOinhOWImQogICAgY29uc3QgYWN0aW9ucyA9IFsKICAgICAgeyBhY3Rpb246ICdzaG93JywgZGV0YWlsczogc2hvdywgYmVmb3JlOiBiZWZvcmVTaG93IH0sCiAgICAgIHsgYWN0aW9uOiAnaGlkZScsIGRldGFpbHM6IGhpZGUsIGJlZm9yZTogYmVmb3JlSGlkZSB9LAogICAgICB7IGFjdGlvbjogJ2ZvbGQnLCBkZXRhaWxzOiBmb2xkLCBiZWZvcmU6IGJlZm9yZUZvbGQgfSwKICAgIF0uZmlsdGVyKGl0ZW0gPT4gaXRlbS5kZXRhaWxzKTsKCiAgICBhY3Rpb25zLmZvckVhY2goKHsgYWN0aW9uLCBkZXRhaWxzOiB7IHRpdGxlLCBwcmlvcml0eSA9IG51bGwgfSwgYmVmb3JlIH0pID0+IHsKICAgICAgaWYgKHR5cGVvZiBiZWZvcmUgPT09ICdmdW5jdGlvbicpIGJlZm9yZSgpOwogICAgICBncm91cFthY3Rpb25dID0gbmV3IEJhc2UoewogICAgICAgIGlkOiBbJ2ZpbHRlcicsIHRhYk5hbWUsIGtleSwgYWN0aW9uXS5qb2luKCdfJyksCiAgICAgICAgdmVyc2lvbiwKICAgICAgICBwYXJlbnQ6IGdyb3VwW2tleV0sCiAgICAgICAgcHJpb3JpdHk6IHByaW9yaXR5ID09PSBudWxsID8gewogICAgICAgICAgc2hvdzogMWU1LAogICAgICAgICAgaGlkZTogMCwKICAgICAgICAgIGZvbGQ6IC0xZTUsCiAgICAgICAgfVthY3Rpb25dIDogcHJpb3JpdHksCiAgICAgICAgdGVtcGxhdGU6ICgpID0+ICd7e2JhbGx9fScgKyB0aXRsZSgpLAogICAgICAgIHJlZjogewogICAgICAgICAgaXRlbXM6IHsgdHlwZSB9LAogICAgICAgICAgYmFsbDogZmVlZENvbGxlY3Rpb25CYWxsKGFjdGlvbiksCiAgICAgICAgfSwKICAgICAgICBhbHdheXM6IHRydWUsCiAgICAgICAgZmVlZEFjdGlvbjogYWN0aW9uLAogICAgICB9KTsKICAgIH0pOwoKICAgIGlmIChmYXN0KSB7CiAgICAgIGNvbnN0IHsKICAgICAgICB0eXBlczogW2FjdGl2ZVR5cGVzLCBhbGxUeXBlc10sCiAgICAgICAgcmFkaW9Hcm91cCwKICAgICAgICByZW5kZXIsCiAgICAgIH0gPSBmYXN0OwogICAgICBbCiAgICAgICAgLi4uYWN0aXZlVHlwZXMubWFwKHR5cGUgPT4gKHsgdHlwZSwgYWN0aXZlOiB0cnVlIH0pKSwKICAgICAgICAuLi5hbGxUeXBlcy5tYXAodHlwZSA9PiAoeyB0eXBlLCBhY3RpdmU6IGZhbHNlIH0pKSwKICAgICAgXS5mb3JFYWNoKCh7IHR5cGUsIGFjdGl2ZSB9KSA9PiB7CiAgICAgICAgY29uc3QgaGFuZGxlciA9IHsKICAgICAgICAgIGFjdGl2ZSwKICAgICAgICAgIHJhZGlvR3JvdXAsCiAgICAgICAgICByZW5kZXIsCiAgICAgICAgICBydWxlczogYWN0aW9ucy5tYXAoKHsgYWN0aW9uIH0pID0+ICh7IGFjdGlvbiwgcnVsZTogZ3JvdXBbYWN0aW9uXSB9KSksCiAgICAgICAgfTsKICAgICAgICBpZiAoIWZhc3RIYW5kbGVycy5oYXModHlwZSkpIGZhc3RIYW5kbGVycy5zZXQodHlwZSwgW10pOwogICAgICAgIGZhc3RIYW5kbGVycy5nZXQodHlwZSkucHVzaChoYW5kbGVyKTsKICAgICAgfSk7CiAgICB9CiAgfTsKICBydWxlLmdyb3VwcyA9IGdyb3VwczsKCiAgY3NzLmFwcGVuZChgCi55YXdmLWNvbmZpZy1mZWVkLWJhbGwgeyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOiAwLjhlbTsgaGVpZ2h0OiAwLjhlbTsgYm9yZGVyLXJhZGl1czogMWVtOyBtYXJnaW4tcmlnaHQ6IDAuNWVtOyBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgYmFja2dyb3VuZDogdmFyKC0teWF3Zi1iYWxsLWNvbG9yKTsgYm94LXNoYWRvdzogMCAwIDJweCB2YXIoLS15YXdmLWJhbGwtY29sb3IpOyBvcGFjaXR5OiAwLjg7IH0KLnlhd2YtY29uZmlnLWZlZWQtc2hvdyB7IC0teWF3Zi1iYWxsLWNvbG9yOiAjM2VjNjNlOyB9Ci55YXdmLWNvbmZpZy1mZWVkLWhpZGUgeyAtLXlhd2YtYmFsbC1jb2xvcjogI2M2M2UzZTsgfQoueWF3Zi1jb25maWctZmVlZC1mb2xkIHsgLS15YXdmLWJhbGwtY29sb3I6ICNjNmM2M2U7IH0KYCk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgZmFzdEFkZERpYWxvZ1RpdGxlOiB7CiAgICAgIGNuOiAn5Yib5bu66L+H5ruk6KeE5YiZJywKICAgICAgdHc6ICflibXlu7rnr6npgbjopo/liYcnLAogICAgICBlbjogJ0NyZWF0ZSBGaWx0ZXIgUnVsZXMnLAogICAgfSwKICAgIGZhc3RBZGREaWFsb2dEZXNjcmlwdGlvbjogewogICAgICBjbjogJ+ivt+mAieaLqeimgeWIm+W7uueahOi/h+a7pOinhOWImScsCiAgICAgIHR3OiAn6KuL6YG45pOH6KaB5Ym15bu655qE6YGO5r++6KaP5YmHJywKICAgICAgZW46ICdTZWxlY3QgRmlsdGVyIFJ1bGVzIHRvIENyZWF0ZScsCiAgICB9LAogICAgZmFzdEFkZFNob3c6IHsKICAgICAgY246ICfmmL7npLonLAogICAgICB0dzogJ+mhr+ekuicsCiAgICAgIGVuOiAnc2hvdycsCiAgICB9LAogICAgZmFzdEFkZEhpZGU6IHsKICAgICAgY246ICfpmpDol48nLAogICAgICB0dzogJ+maseiXjycsCiAgICAgIGVuOiAnaGlkZScsCiAgICB9LAogICAgZmFzdEFkZEZvbGQ6IHsKICAgICAgY246ICfmipjlj6AnLAogICAgICB0dzogJ+aKmOeWiicsCiAgICAgIGVuOiAnZm9sZCcsCiAgICB9LAogIH0pOwoKICAvLyDmmL7npLrkuIDkuKrnlKjkuo7lv6vpgJ/liJvlu7rop4TliJnnmoTlr7nor53moYYKICBjb25zdCBhc2tGYXN0ID0gZnVuY3Rpb24gKHNlbGVjdGVkSXRlbXMpIHsKICAgIGNvbnN0IGl0ZW1zID0gW107CiAgICBjb25zdCByZW5kZXIgPSBmdW5jdGlvbiAoaW5uZXIpIHsKICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd5YXdmLWZhc3QtYWRkLWJvZHknKTsKICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gaTE4bi5mYXN0QWRkRGlhbG9nRGVzY3JpcHRpb247CiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbik7CiAgICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsKICAgICAgdWwuY2xhc3NMaXN0LmFkZCgneWF3Zi1mYXN0LWFkZC1saXN0Jyk7CiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh1bCk7CiAgICAgIHNlbGVjdGVkSXRlbXMuZm9yRWFjaChvcmlnaW5hbEl0ZW0gPT4gewogICAgICAgIGNvbnN0IGhhbmRsZXJzID0gZmFzdEhhbmRsZXJzLmdldChvcmlnaW5hbEl0ZW0udHlwZSkgfHwgW107CiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaCgoeyBhY3RpdmUsIHJlbmRlciwgcnVsZXMsIHJhZGlvR3JvdXAgfSkgPT4gewogICAgICAgICAgY29uc3QgaXRlbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob3JpZ2luYWxJdGVtKSk7CiAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pOwogICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpOwogICAgICAgICAgbGkuYXBwZW5kQ2hpbGQobGFiZWwpOwogICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7CiAgICAgICAgICBpdGVtLmFjdGl2ZSA9IGNoZWNrYm94LmNoZWNrZWQgPSBhY3RpdmU7CiAgICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICAgICAgaXRlbS5hY3RpdmUgPSBjaGVja2JveC5jaGVja2VkOwogICAgICAgICAgICBpZiAoaXRlbS5hY3RpdmUgJiYgcmFkaW9Hcm91cCkgewogICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2godGhhdEl0ZW0gPT4gewogICAgICAgICAgICAgICAgaWYgKHRoYXRJdGVtID09PSBpdGVtKSByZXR1cm47CiAgICAgICAgICAgICAgICBpZiAodGhhdEl0ZW0ucmFkaW9Hcm91cCAhPT0gaXRlbS5yYWRpb0dyb3VwKSByZXR1cm47CiAgICAgICAgICAgICAgICB0aGF0SXRlbS5zZXRBY3RpdmUoZmFsc2UpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChyYWRpb0dyb3VwKSBpdGVtLnJhZGlvR3JvdXAgPSByYWRpb0dyb3VwOwogICAgICAgICAgaXRlbS5zZXRBY3RpdmUgPSBhY3RpdmUgPT4gewogICAgICAgICAgICBpdGVtLmFjdGl2ZSA9IGNoZWNrYm94LmNoZWNrZWQgPSBhY3RpdmU7CiAgICAgICAgICB9OwogICAgICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQoY2hlY2tib3gpOwogICAgICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQocmVuZGVyKGl0ZW0pKTsKICAgICAgICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpOwogICAgICAgICAgcnVsZXMuZm9yRWFjaCgoeyBhY3Rpb24sIHJ1bGUgfSkgPT4gewogICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsKICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gYWN0aW9uOwogICAgICAgICAgICBvcHRpb24udGV4dCA9IGkxOG5bewogICAgICAgICAgICAgIHNob3c6ICdmYXN0QWRkU2hvdycsCiAgICAgICAgICAgICAgaGlkZTogJ2Zhc3RBZGRIaWRlJywKICAgICAgICAgICAgICBmb2xkOiAnZmFzdEFkZEZvbGQnLAogICAgICAgICAgICB9W2FjdGlvbl1dOwogICAgICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTsKICAgICAgICAgIH0pOwogICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoc2VsZWN0KTsKICAgICAgICAgIHNlbGVjdC52YWx1ZSA9ICdoaWRlJzsKICAgICAgICAgIGl0ZW0uZ2V0UnVsZSA9ICgpID0+IHJ1bGVzLmZpbmQocnVsZSA9PiBydWxlLmFjdGlvbiA9PT0gc2VsZWN0LnZhbHVlKS5ydWxlOwogICAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZXZlbnQgPT4gewogICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudCkpIHJldHVybjsKICAgICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3QnKSkuZm9yRWFjaChzZWxlY3QgPT4gewogICAgICAgICAgaWYgKHNlbGVjdC52YWx1ZSA9PT0gdGFyZ2V0LnZhbHVlKSByZXR1cm47CiAgICAgICAgICBjb25zdCB0YXJnZXRPcHRpb24gPSBbLi4uc2VsZWN0Lm9wdGlvbnNdLmZpbmQob3B0aW9uID0+IG9wdGlvbi52YWx1ZSA9PT0gdGFyZ2V0LnZhbHVlKTsKICAgICAgICAgIGNvbnN0IHNldFZhbHVlID0gdGFyZ2V0T3B0aW9uID8gdGFyZ2V0T3B0aW9uLnZhbHVlIDogJ2hpZGUnOwogICAgICAgICAgc2VsZWN0LnZhbHVlID0gc2V0VmFsdWU7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBpbm5lci5hcHBlbmRDaGlsZChjb250YWluZXIpOwogICAgfTsKICAgIGNvbnN0IGZhc3RBZGREaWFsb2cgPSB1aS5kaWFsb2coewogICAgICBpZDogJ3lhd2YtZmFzdC1hZGQnLAogICAgICB0aXRsZTogaTE4bi5mYXN0QWRkRGlhbG9nVGl0bGUsCiAgICAgIHJlbmRlciwKICAgICAgYnV0dG9uOiB7CiAgICAgICAgb2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZhc3RBZGREaWFsb2cuaGlkZSgpOwogICAgICAgICAgaXRlbXMuZm9yRWFjaChhc3luYyAoeyBhY3RpdmUsIGdldFJ1bGUsIHR5cGUsIHZhbHVlIH0pID0+IHsKICAgICAgICAgICAgaWYgKCFhY3RpdmUpIHJldHVybjsKICAgICAgICAgICAgY29uc3QgeyByZWY6IHsgaXRlbXM6IHJ1bGVJdGVtIH0gfSA9IGdldFJ1bGUoKTsKICAgICAgICAgICAgY29uc3QgcGFyc2VSZXN1bHQgPSBhd2FpdCBydWxlSXRlbS5wYXJzZUZhc3RJdGVtKHZhbHVlLCB0eXBlKTsKICAgICAgICAgICAgcGFyc2VSZXN1bHQuZm9yRWFjaChpdGVtID0+IHJ1bGVJdGVtLmFkZEl0ZW0oaXRlbSkpOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBjYW5jZWw6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZhc3RBZGREaWFsb2cuaGlkZSgpOwogICAgICAgIH0sCiAgICAgIH0sCiAgICB9KTsKICAgIGZhc3RBZGREaWFsb2cuc2hvdygpOwogIH07CgogIC8qKgogICAqIOe7tOaKpOeUqOS6juW/q+mAn+WIm+W7uuinhOWImeeahOWvueivneahhgogICAqIEB0eXBlIHtBcnJheTwodGFyZ2V0OiBFbGVtZW50IHwgU2VsZWN0aW9uKSA9PiBBcnJheTx7IHRpdGxlOiBzdHJpbmcsIHR5cGU6IHN0cmluZywgdmFsdWU6IGFueSB9Pj59CiAgICovCiAgY29uc3QgZmFzdExpc3RlbmVycyA9IFtdOwogIHJ1bGUuYWRkRmFzdExpc3RlbmVyID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7CiAgICBmYXN0TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOwogIH07CiAgY29uc3QgcnVuRmFzdExpc3RlbmVycyA9IGFzeW5jIGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgIGNvbnN0IHJlc3BvbnNlcyA9IGF3YWl0IFByb21pc2UuYWxsKGZhc3RMaXN0ZW5lcnMubWFwKGxpc3RlbmVyID0+IGxpc3RlbmVyKHRhcmdldCkpKTsKICAgIHJldHVybiByZXNwb25zZXMucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSwgW10pOwogIH07CgogIC8qKgogICAqIOeUqOadpee7tOaKpOaJgOacieWSjOa2iOaBr+a1gei/h+a7pOinhOWImeWPs+mUruiPnOWNlQogICAqLwogIDsgKGFzeW5jIGZ1bmN0aW9uICgpIHsKCiAgICBpZiAoIWVudi5jb25maWcuY29udGV4dE1lbnVTdXBwb3J0ZWQpIHJldHVybjsKCiAgICBjb250ZXh0bWVudS5hZGRMaXN0ZW5lcihhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgaWYgKGluaXQucGFnZS50eXBlKCkgPT09ICdzZWFyY2gnKSByZXR1cm4gbnVsbDsKICAgICAgY29uc3Qgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpOwogICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7CiAgICAgIGxldCB1c2VTZWxlY3Rpb24gPSB0cnVlOwogICAgICBpZiAoIShzZWxlY3Rpb24gKyAnJykpIHVzZVNlbGVjdGlvbiA9IGZhbHNlOwogICAgICBmb3IgKGxldCBpID0gMDsgdXNlU2VsZWN0aW9uICYmIGkgPCBzZWxlY3Rpb24ucmFuZ2VDb3VudDsgaSsrKSB7CiAgICAgICAgY29uc3QgcmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdChpKTsKICAgICAgICBjb25zdCBpc0NoaWxkID0gW3JhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5lbmRDb250YWluZXJdLmV2ZXJ5KGUgPT4gewogICAgICAgICAgZm9yICg7IGUgPT09IHRhcmdldDsgZSA9IGUucGFyZW50Tm9kZSkgaWYgKCFlKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9KTsKICAgICAgICBpZiAoIWlzQ2hpbGQpIHVzZVNlbGVjdGlvbiA9IGZhbHNlOwogICAgICB9CiAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgcnVuRmFzdExpc3RlbmVycyh1c2VTZWxlY3Rpb24gPyBzZWxlY3Rpb24gOiB0YXJnZXQpOwogICAgICByZXR1cm4gaXRlbXMubWFwKCh7IHRpdGxlLCB0eXBlLCB2YWx1ZSB9KSA9PiAoewogICAgICAgIHRpdGxlLAogICAgICAgIG9uY2xpY2s6ICgpID0+IHsKICAgICAgICAgIGFza0Zhc3QoW3sgdHlwZSwgdmFsdWUgfV0pOwogICAgICAgIH0sCiAgICAgIH0pKTsKICAgIH0pOwoKICB9KCkpOwoKICAvKioKICAgKiDmi5bmi73nm7jlhbMKICAgKi8KICA7IChhc3luYyBmdW5jdGlvbiAoKSB7CgogICAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICAgIGRyb3BBcmVhVGl0bGU6IHsKICAgICAgICBjbjogJ+aLluaUvuiHs+atpFxu5b+r6YCf5Yib5bu66L+H5ruk6KeE5YiZJywKICAgICAgICB0dzogJ+aLluaUvuiHs+atpFxu5b+r6YCf5Ym15bu656+p6YG46KaP5YmHJywKICAgICAgICBlbjogJ0Ryb3AgSGVyZVxuQ3JlYXRlIEZpbHRlciBSdWxlcycsCiAgICAgIH0sCiAgICAgIGRyb3BBcmVhQ29udGVudDogewogICAgICAgIGNuOiAn5oKo5Y+v5Lul5bCG5paH5pys44CB5biQ5Y+35ZCN44CB5aS05YOP44CB6K+d6aKY44CB5p2l5rqQ562J5ouW5pS+6Iez5q2k5aSE5Lul5Yib5bu66L+H5ruk6KeE5YiZJywKICAgICAgICB0dzogJ+aCqOWPr+S7peWwh+aWh+acrOOAgeW4s+iZn+WQjeOAgemgreWDj+OAgeipsemhjOOAgeS+hua6kOetieaLluaUvuiHs+atpOiZleS7peWJteW7uumBjua/vuimj+WJhycsCiAgICAgICAgZW46ICdieSBkcmFnZ2luZyB0ZXh0LCBhY2NvdW50IG5hbWVzLCBhdmF0YXJzLCB0b3BpY3MsIHNvdXJjZXMsIGV0Yy4nLAogICAgICB9LAogICAgfSk7CgogICAgY29uc3QgZHJhZ0l0ZW1zID0gW107CiAgICBjb25zdCBkcm9wQXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgbGV0IGRyYWdJbmRleCA9IDAsIGluQXJlYSA9IGZhbHNlOwogICAgY29uc3Qgc2hvd0Ryb3BBcmVhID0gZnVuY3Rpb24gKCkgewogICAgICBkcmFnSW5kZXgrKzsKICAgICAgaWYgKCFkcm9wQXJlYSkgcmV0dXJuOwogICAgICBkcm9wQXJlYS5jbGFzc0xpc3QuYWRkKCd5YXdmLWRyYWcnKTsKICAgICAgZHJvcEFyZWEucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCd5YXdmLWRyb3AtYXJlYS1hY3RpdmUnKTsKICAgIH07CiAgICBjb25zdCBoaWRlRHJvcEFyZWEgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGRyYWdJbmRleCsrOwogICAgICBpbkFyZWEgPSBmYWxzZTsKICAgICAgaWYgKCFkcm9wQXJlYSkgcmV0dXJuOwogICAgICBkcm9wQXJlYS5jbGFzc0xpc3QucmVtb3ZlKCd5YXdmLWRyYWcnLCAneWF3Zi1kcmFnLWluJyk7CiAgICAgIGRyb3BBcmVhLnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgneWF3Zi1kcm9wLWFyZWEtYWN0aXZlJyk7CiAgICB9OwogICAgY29uc3QgZW50ZXJEcm9wQXJlYSA9IGZ1bmN0aW9uICgpIHsKICAgICAgaW5BcmVhID0gdHJ1ZTsKICAgICAgaWYgKCFkcm9wQXJlYSkgcmV0dXJuOwogICAgICBkcm9wQXJlYS5jbGFzc0xpc3QuYWRkKCd5YXdmLWRyYWctaW4nKTsKICAgIH07CiAgICBjb25zdCBsZWF2ZURyb3BBcmVhID0gZnVuY3Rpb24gKCkgewogICAgICBpbkFyZWEgPSBmYWxzZTsKICAgICAgaWYgKCFkcm9wQXJlYSkgcmV0dXJuOwogICAgICBkcm9wQXJlYS5jbGFzc0xpc3QucmVtb3ZlKCd5YXdmLWRyYWctaW4nKTsKICAgIH07CgogICAgY29uc3QgZHJhZ1N0YXJ0SGFuZGxlciA9IGFzeW5jIGZ1bmN0aW9uIChldmVudCkgewogICAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7CiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgY29uc3QgY3VycmVudERyYWdJbmRleCA9ICsrZHJhZ0luZGV4OwogICAgICBsZXQgdXNlU2VsZWN0aW9uID0gZmFsc2U7CiAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBUZXh0KSB1c2VTZWxlY3Rpb24gPSB0cnVlOwogICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IHJ1bkZhc3RMaXN0ZW5lcnModXNlU2VsZWN0aW9uID8gc2VsZWN0aW9uIDogdGFyZ2V0KTsKICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybjsKICAgICAgaWYgKGN1cnJlbnREcmFnSW5kZXggIT09IGRyYWdJbmRleCkgcmV0dXJuOwogICAgICBkcmFnSXRlbXMuc3BsaWNlKDApOwogICAgICBkcmFnSXRlbXMucHVzaCguLi5pdGVtcyk7CiAgICAgIHNob3dEcm9wQXJlYSgpOwogICAgfTsKICAgIGNvbnN0IGRyYWdFbmRIYW5kbGVyID0gZnVuY3Rpb24gKCkgewogICAgICBkcmFnSXRlbXMuc3BsaWNlKDApOwogICAgICBoaWRlRHJvcEFyZWEoKTsKICAgIH07CiAgICBsZXQgZHJhZ0VudGVyQ291bnQgPSAwOwogICAgY29uc3QgZHJhZ0VudGVySGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICBkcmFnRW50ZXJDb3VudCsrOwogICAgICBlbnRlckRyb3BBcmVhKCk7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9OwogICAgY29uc3QgZHJhZ0xlYXZlSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICBpZiAoIS0tZHJhZ0VudGVyQ291bnQpIGxlYXZlRHJvcEFyZWEoKTsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIH07CiAgICBjb25zdCBkcmFnT3ZlckhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIH07CiAgICBjb25zdCBkcm9wSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAoaW5BcmVhKSB7CiAgICAgICAgY29uc3QgaXRlbXMgPSBkcmFnSXRlbXMuc3BsaWNlKDApOwogICAgICAgIGFza0Zhc3QoaXRlbXMubWFwKCh7IHR5cGUsIHZhbHVlIH0pID0+ICh7IHR5cGUsIHZhbHVlIH0pKSk7CiAgICAgIH0KICAgICAgZHJhZ0VuZEhhbmRsZXIoKTsKICAgIH07CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBkcmFnU3RhcnRIYW5kbGVyKTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBkcmFnRW5kSGFuZGxlcik7CiAgICBkcm9wQXJlYS5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCBkcmFnRW50ZXJIYW5kbGVyKTsKICAgIGRyb3BBcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGRyYWdMZWF2ZUhhbmRsZXIpOwogICAgZHJvcEFyZWEuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBkcmFnT3ZlckhhbmRsZXIpOwogICAgZHJvcEFyZWEuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGRyb3BIYW5kbGVyKTsKCiAgICBkcm9wQXJlYS5jbGFzc0xpc3QuYWRkKCdnbl90b3BtZW51bGlzdCcsICd5YXdmLWRyb3AtYXJlYScpOwogICAgZHJvcEFyZWEuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9IldfbGF5ZXJfYXJyb3ciPjxzcGFuIGNsYXNzPSJXX2Fycm93X2JvciBXX2Fycm93X2Jvcl90Ij48aSBjbGFzcz0iU19saW5lMyI+PC9pPjxlbSBjbGFzcz0iU19iZzJfYnIiPjwvZW0+PC9zcGFuPjwvZGl2Pic7CgogICAgY29uc3QgZHJvcEFyZWFDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBkcm9wQXJlYUNvbnRlbnQuY2xhc3NMaXN0LmFkZCgneWF3Zi1kcm9wLWNvbnRlbnQnKTsKICAgIGRyb3BBcmVhLmFwcGVuZENoaWxkKGRyb3BBcmVhQ29udGVudCk7CiAgICBkcm9wQXJlYUNvbnRlbnQuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9Inlhd2YtZHJvcC10aXRsZSI+PC9kaXY+PGRpdiBjbGFzcz0ieWF3Zi1kcm9wLXRleHQiPjwvZGl2Pic7CgogICAgaW5pdC5vbkxvYWQoZnVuY3Rpb24gYWRkRHJvcEFyZWEoKSB7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBjb25zdCByZWZlcmVuY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1nbl9zZXRfbGlzdCcpOwogICAgICAgIGlmICghcmVmZXJlbmNlKSB7CiAgICAgICAgICBzZXRUaW1lb3V0KGFkZERyb3BBcmVhLCAxMDApOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBkcm9wQXJlYUNvbnRlbnQucXVlcnlTZWxlY3RvcignLnlhd2YtZHJvcC10aXRsZScpLnRleHRDb250ZW50ID0gaTE4bi5kcm9wQXJlYVRpdGxlOwogICAgICAgIGRyb3BBcmVhQ29udGVudC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1kcm9wLXRleHQnKS50ZXh0Q29udGVudCA9IGkxOG4uZHJvcEFyZWFDb250ZW50OwogICAgICAgIHJlZmVyZW5jZS5hcHBlbmRDaGlsZChkcm9wQXJlYSk7CiAgICAgIH0KICAgIH0pOwoKICB9KCkpOwoKICBjc3MuYXBwZW5kKGAKLnlhd2YtZmFzdC1hZGQtYm9keSB7IHBhZGRpbmc6IDIwcHg7IH0KLnlhd2YtZmFzdC1hZGQtbGlzdCB7IHBhZGRpbmc6IDIwcHg7IH0KLnlhd2YtZHJvcC1hcmVhIHsgd2lkdGg6IDIyNHB4OyBoZWlnaHQ6IDIyNHB4OyB0b3A6IDM0cHg7IHJpZ2h0OiAtMTE5cHg7IGRpc3BsYXk6IG5vbmU7IG9wYWNpdHk6IDAuODsgfQoueWF3Zi1kcm9wLWFyZWEueWF3Zi1kcmFnIHsgZGlzcGxheTogYmxvY2s7IH0KLnlhd2YtZHJvcC1hcmVhLnlhd2YtZHJhZy1pbiB7IG9wYWNpdHk6IDE7IH0KLldCX2dsb2JhbF9uYXYgLmduX3RvcG1lbnVsaXN0Lnlhd2YtZHJvcC1hcmVhIC5XX2xheWVyX2Fycm93IC5XX2Fycm93X2Jvcl90IHsgcmlnaHQ6IDEyMnB4OyB9Ci55YXdmLWRyb3AtY29udGVudCB7IG1hcmdpbjogMjBweDsgYm9yZGVyOiA1cHggZGFzaGVkICM2NjY7IGJvcmRlci1yYWRpdXM6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgd2hpdGUtc3BhY2U6IHdyYXA7IHdpZHRoOiAxMzRweDsgaGVpZ2h0OiAxMzRweDsgcGFkZGluZzogMjBweDsgbWFyZ2luOiAyMHB4OyBsaW5lLWhlaWdodDogMS41OyB9Ci55YXdmLWRyb3AtdGl0bGUgeyBmb250LXNpemU6IDE2cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7IG1hcmdpbjogMCAwIDIwcHg7IC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IHVzZXItc2VsZWN0OiBub25lOyB9Ci55YXdmLWRyb3AtYXJlYS1hY3RpdmUgLmduX3RvcG1lbnVsaXN0X3lhd2YgeyBkaXNwbGF5OiBub25lOyB9CmApOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9jb21tb24vcGFyc2UuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKICBjb25zdCBwYWdlID0gaW5pdC5wYWdlOwoKICBjb25zdCBmZWVkUGFyc2VyID0geWF3Zi5mZWVkVjYgPSB7fTsKICBjb25zdCBjb21tZW50UGFyc2VyID0geWF3Zi5jb21tZW50VjYgPSB7fTsKCiAgLy8g5paH5pysCiAgLy8g5paH5pys5YiG5Li65a6M5pW05qih5byP77yI55So5LqO5q2j5YiZ5Yy56YWN77yJ5ZKM566A5piT5qih5byP77yI55So5LqO5YWz6ZSu6K+N77yJCiAgLy8g5a6M5pW05qih5byP5LiL5Lqn55Sf55qE5paH5pys5pu05aSN5p2C77yM5Y+v55So5LqO5pu05aSN5p2C55qE6L+H5ruk6KeE5YiZCiAgLy8g566A5Y2V5qih5byP5LiL5Lqn55Sf55qE5paH5pys5pu056ym5ZCI5LiA6Iis55So5oi355qE55CG6Kej77yM5pu06YCC5ZCI5pmu6YCa55So5oi35L2/55SoCiAgLyoqCiAgICog5om+5Yiw5LiA57uEIE5vZGUg55qE5YWs5YWx56WW5YWICiAgICogQHBhcmFtIHtOb2RlW119IG5vZGVzCiAgICovCiAgY29uc3QgY29tbW9uUGFyZW50ID0gZnVuY3Rpb24gKC4uLm5vZGVzKSB7CiAgICBpZiAobm9kZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDsKICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEpIHJldHVybiBub2Rlc1swXTsKICAgIGNvbnN0IGZpcnN0UGFyZW50cyA9IFtdOwogICAgbGV0IHBhcmVudEluZGV4ID0gMDsKICAgIGZvciAobGV0IFtyXSA9IG5vZGVzOyByOyByID0gci5wYXJlbnRFbGVtZW50KSBmaXJzdFBhcmVudHMucHVzaChyKTsKICAgIGZvciAobGV0IGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIGZvciAobGV0IHAgPSBub2Rlc1tpXTsgdHJ1ZTsgcCA9IHAucGFyZW50RWxlbWVudCkgewogICAgICAgIGlmICghcCkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgaW5kZXggPSBmaXJzdFBhcmVudHMuaW5kZXhPZihwLCBwYXJlbnRJbmRleCk7CiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgY29udGludWU7CiAgICAgICAgcGFyZW50SW5kZXggPSBpbmRleDsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGZpcnN0UGFyZW50c1twYXJlbnRJbmRleF07CiAgfTsKCiAgLyoqCiAgICog5qOA5p+l5LiA5Liq6IqC54K55piv5LiN5piv5Y+m5LiA5Liq6IqC54K555qE56WW5YWI6IqC54K5CiAgICogQHBhcmFtIHtOb2RlfE5vZGVMaXN0fE5vZGVbXX0gcGFyZW50CiAgICogQHBhcmFtIHtOb2RlfE5vZGVMaXN0fE5vZGVbXX0gY2hpbGQKICAgKiBAcmV0dXJuIHtib29sZWFufQogICAqLwogIGNvbnN0IGNvbnRhaW5zID0gZnVuY3Rpb24gKHBhcmVudCwgY2hpbGQpIHsKICAgIGlmICghcGFyZW50IHx8ICFjaGlsZCkgcmV0dXJuIGZhbHNlOwogICAgaWYgKCEoY2hpbGQgaW5zdGFuY2VvZiBOb2RlKSkgewogICAgICBjb25zdCBjaGlsZHJlbiA9IEFycmF5LmZyb20oY2hpbGQpOwogICAgICByZXR1cm4gY2hpbGRyZW4uZXZlcnkoY2hpbGQgPT4gY29udGFpbnMocGFyZW50LCBjaGlsZCkpOwogICAgfQogICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE5vZGUpIHsKICAgICAgcmV0dXJuIHBhcmVudC5jb250YWlucyhjaGlsZCk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCBwYXJlbnRzID0gbmV3IFNldChBcnJheS5mcm9tKHBhcmVudCkpOwogICAgICBmb3IgKGxldCBlID0gY2hpbGQ7IGU7IGUgPSBlLnBhcmVudEVsZW1lbnQpIHsKICAgICAgICBpZiAocGFyZW50cy5oYXMoZSkpIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZmFsc2U7CiAgfTsKCiAgLyoqCiAgICog5qOA5p+l5p+Q5Liq5YWD57Sg5piv5ZCm5piv5LiA5p2h5b6u5Y2aCiAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50CiAgICogQHJldHVybnMge2Jvb2xlYW59CiAgICovCiAgY29uc3QgaXNGZWVkRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAoIShlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybiBmYWxzZTsKICAgIGlmICghZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ21pZCcpKSByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKICAvKioKICAgKiDmo4Dmn6Xmn5DkuKrlhYPntKDmmK/lkKbmmK/kuIDmnaHmkJzntKLpobXpnaLnmoTlvq7ljZoKICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0KICAgKi8KICBjb25zdCBpc1NlYXJjaEZlZWRFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgIGlmICghaXNGZWVkRWxlbWVudChlbGVtZW50KSkgcmV0dXJuIGZhbHNlOwogICAgaWYgKCFlbGVtZW50Lm1hdGNoZXMoJy5jYXJkLXdyYXAnKSkgcmV0dXJuIGZhbHNlOwogICAgaWYgKCFlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWZlZWQnKSkgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgLyoqCiAgICog5qOA5p+l5p+Q5Liq5YWD57Sg5piv5ZCm5piv5LiA5p2h6K+E6K66CiAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50CiAgICogQHJldHVybnMge2Jvb2xlYW59CiAgICovCiAgY29uc3QgaXNDb21tZW50RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAoIShlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybiBmYWxzZTsKICAgIGlmICghZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2NvbW1lbnRfaWQnKSkgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgLyoqCiAgICog5qOA5p+l5p+Q5Liq5YWD57Sg5piv5ZCm5piv5LiA5p2h6L2s5Y+R55qE5b6u5Y2aCiAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50CiAgICogQHJldHVybnMge2Jvb2xlYW59CiAgICovCiAgY29uc3QgaXNGb3J3YXJkRmVlZEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkgewogICAgaWYgKCFpc0ZlZWRFbGVtZW50KGVsZW1lbnQpKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoIWVsZW1lbnQuaGFzQXR0cmlidXRlKCdvbWlkJykpIHJldHVybiBmYWxzZTsKICAgIHJldHVybiB0cnVlOwogIH07CgogIC8qKgogICAqIOajgOafpeafkOS4quWFg+e0oOaYr+WQpuaYr+S4gOadoeexu+S8vOeugOWNlei9rOWPkeeahOW+ruWNmgogICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudAogICAqIEByZXR1cm5zIHtib29sZWFufQogICAqLwogIGNvbnN0IGlzRmFzdEZlZWRFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgIGlmICghaXNGZWVkRWxlbWVudChlbGVtZW50KSkgcmV0dXJuIGZhbHNlOwogICAgaWYgKCFlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZm1pZCcpKSByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKICAvKioKICAgKiDmo4Dmn6Xmn5DkuKrlhYPntKDmmK/lkKbmmK/kuIDmnaHlv6vovaznmoTlvq7ljZoKICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0KICAgKi8KICBjb25zdCBpc0Zhc3RGb3J3YXJkRmVlZEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkgewogICAgaWYgKCFpc0Zhc3RGZWVkRWxlbWVudChlbGVtZW50KSkgcmV0dXJuIGZhbHNlOwogICAgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpc2Zhc3Rmb3J3YXJkJykgIT09ICcxJykgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgLyoqCiAgICog6I635Y+W5LiA5p2h5b6u5Y2a5Lit5omA5pyJ5YaF5a6555u45YWz55qE6IqC54K5CiAgICogQHBhcmFtIHtFbGVtZW50fSBmZWVkCiAgICogQHJldHVybnMge0VsZW1lbnRbXX0KICAgKi8KICBjb25zdCBmZWVkQ29udGVudEVsZW1lbnRzID0gZnVuY3Rpb24gKGZlZWQsIHsgZGV0YWlsID0gZmFsc2UsIHNob3J0ID0gZmFsc2UsIGxvbmcgPSB0cnVlIH0gPSB7fSkgewogICAgaWYgKCFpc0ZlZWRFbGVtZW50KGZlZWQpKSByZXR1cm4gbnVsbDsKICAgIGNvbnN0IGNvbnRlbnQgPSBmZWVkUGFyc2VyLmNvbnRlbnQuZG9tKGZlZWQsIHRydWUsIGZhbHNlKTsKICAgIGNvbnN0IGNvbnRlbnRGdWxsID0gZmVlZFBhcnNlci5jb250ZW50LmRvbShmZWVkLCB0cnVlLCB0cnVlKTsKICAgIGxldCBwb3N0ID0gY29udGVudEZ1bGwgPyAhc2hvcnQgPyBbY29udGVudEZ1bGxdIDogbG9uZyA/IFtjb250ZW50LCBjb250ZW50RnVsbF0gOiBbY29udGVudF0gOiBbY29udGVudF07CiAgICBpZiAoZGV0YWlsKSB7CiAgICAgIGNvbnN0IFthdXRob3JdID0gZmVlZFBhcnNlci5hdXRob3IuZG9tKGZlZWQpOwogICAgICBjb25zdCBbc291cmNlXSA9IGZlZWRQYXJzZXIuc291cmNlLmRvbShmZWVkLCB0cnVlKTsKICAgICAgY29uc3QgW2RhdGVdID0gZmVlZFBhcnNlci5kYXRlLmRvbShmZWVkLCB0cnVlKTsKICAgICAgcG9zdCA9IFthdXRob3IsIC4uLnBvc3QsIHNvdXJjZSwgZGF0ZV07CiAgICB9CiAgICBpZiAoZmVlZC5oYXNBdHRyaWJ1dGUoJ2ZtaWQnKSkgewogICAgICBjb25zdCBbZmF1dGhvcl0gPSBmZWVkUGFyc2VyLmZhdXRob3IuZG9tKGZlZWQpOwogICAgICBwb3N0LnVuc2hpZnQoZmF1dGhvcik7CiAgICB9CiAgICBpZiAoZmVlZC5oYXNBdHRyaWJ1dGUoJ29taWQnKSkgewogICAgICBjb25zdCByZWFzb24gPSBmZWVkUGFyc2VyLmNvbnRlbnQuZG9tKGZlZWQsIGZhbHNlLCBmYWxzZSk7CiAgICAgIGNvbnN0IHJlYXNvbkZ1bGwgPSBmZWVkUGFyc2VyLmNvbnRlbnQuZG9tKGZlZWQsIGZhbHNlLCB0cnVlKTsKICAgICAgbGV0IG9yaSA9IHJlYXNvbkZ1bGwgPyAhc2hvcnQgPyBbcmVhc29uRnVsbF0gOiBsb25nID8gW3JlYXNvbiwgcmVhc29uRnVsbF0gOiBbcmVhc29uXSA6IFtyZWFzb25dOwogICAgICBpZiAoZGV0YWlsKSB7CiAgICAgICAgY29uc3QgW29yaWdpbmFsXSA9IGZlZWRQYXJzZXIub3JpZ2luYWwuZG9tKGZlZWQpOwogICAgICAgIGNvbnN0IFtzb3VyY2VPcmldID0gZmVlZFBhcnNlci5zb3VyY2UuZG9tKGZlZWQsIGZhbHNlKTsKICAgICAgICBjb25zdCBbZGF0ZU9yaV0gPSBmZWVkUGFyc2VyLmRhdGUuZG9tKGZlZWQsIGZhbHNlKTsKICAgICAgICBvcmkgPSBbb3JpZ2luYWwsIC4uLm9yaSwgc291cmNlT3JpLCBkYXRlT3JpXTsKICAgICAgfQogICAgICByZXR1cm4gWy4uLnBvc3QsIG51bGwsIC4uLm9yaV07CiAgICB9CiAgICByZXR1cm4gcG9zdDsKICB9OwoKICAvKioKICAgKiDojrflj5bkuIDmnaHlvq7ljZrkuK3miYDmnInlhoXlrrnnm7jlhbPnmoToioLngrkKICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbW1lbnQKICAgKiBAcmV0dXJucyB7RWxlbWVudFtdfQogICAqLwogIGNvbnN0IGNvbW1lbnRDb250ZW50RWxlbWVudHMgPSBmdW5jdGlvbiAoY29tbWVudCkgewogICAgaWYgKCFpc0NvbW1lbnRFbGVtZW50KGNvbW1lbnQpKSByZXR1cm4gbnVsbDsKICAgIGNvbnN0IHRleHQgPSBjb21tZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl90ZXh0Jyk7CiAgICByZXR1cm4gW3RleHRdOwogIH07CgogIC8qKgogICAqIOiOt+WPluiKgueCueaJgOWcqOeahOW+ruWNmgogICAqIEBwYXJhbSB7Tm9kZX0gbm9kZQogICAqIEByZXR1cm5zIHtFbGVtZW50fQogICAqLwogIGNvbnN0IGZlZWRDb250YWluZXIgPSBmdW5jdGlvbiAobm9kZSkgewogICAgaWYgKCFub2RlKSByZXR1cm4gbnVsbDsKICAgIGlmICgobm9kZSBpbnN0YW5jZW9mIE5vZGUpICYmICEobm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQpKSB7CiAgICAgIHJldHVybiBmZWVkQ29udGFpbmVyKG5vZGUucGFyZW50Tm9kZSk7CiAgICB9CiAgICByZXR1cm4gbm9kZS5jbG9zZXN0KCdbbWlkXScpOwogIH07CiAgZmVlZFBhcnNlci5mZWVkTm9kZSA9IG5vZGUgPT4gZmVlZENvbnRhaW5lcihub2RlKTsKCiAgLyoqCiAgICog6I635Y+W6IqC54K55omA5Zyo55qE6K+E6K66CiAgICogQHBhcmFtIHtOb2RlfSBub2RlCiAgICogQHJldHVybnMge0VsZW1lbnR9CiAgICovCiAgY29uc3QgY29tbWVudENvbnRhaW5lciA9IGZ1bmN0aW9uIChub2RlKSB7CiAgICBpZiAoIW5vZGUpIHJldHVybiBudWxsOwogICAgaWYgKChub2RlIGluc3RhbmNlb2YgTm9kZSkgJiYgIShub2RlIGluc3RhbmNlb2YgRWxlbWVudCkpIHsKICAgICAgcmV0dXJuIGNvbW1lbnRDb250YWluZXIobm9kZS5wYXJlbnROb2RlKTsKICAgIH0KICAgIHJldHVybiBub2RlLmNsb3Nlc3QoJ1tjb21tZW50X2lkXScpOwogIH07CiAgZmVlZFBhcnNlci5jb21tZW50Tm9kZSA9IG5vZGUgPT4gZmVlZENvbnRhaW5lcihub2RlKTsKCiAgY29uc3QgdGV4dFBhcnNlciA9IGZ1bmN0aW9uIChkZXRhaWwsIGNvbnRhaW5lclR5cGUpIHsKICAgIGNvbnN0IHBhcnNlcnMgPSBbXTsKICAgIC8qKgogICAgICog5pmu6YCa5paH5pys77yI5paH5pys4pyT77yM5q2j5YiZ4pyT77yJCiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGUKICAgICAqLwogICAgY29uc3QgdGV4dCA9IG5vZGUgPT4gewogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHsKICAgICAgICByZXR1cm4gbm9kZS50ZXh0Q29udGVudC50cmltKCkucmVwbGFjZSgvXHMvZywgJyAnKTsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH07CiAgICBwYXJzZXJzLnB1c2godGV4dCk7CiAgICAvKioKICAgICAqIOWxleW8gC/mlLbotbflhajmlofvvIjkuI3orqHlhaXlhoXlrrnvvIkKICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZQogICAgICovCiAgICBjb25zdCBmb2xkID0gbm9kZSA9PiB7CiAgICAgIGlmIChub2RlLm1hdGNoZXMoJ2FbYWN0aW9uLXR5cGU9ImZsX3VuZm9sZCJdLCBhW2FjdGlvbi10eXBlPSJmbF9mb2xkIl0nKSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH07CiAgICBwYXJzZXJzLnB1c2goZm9sZCk7CiAgICAvKioKICAgICAqIOaNouihjOespiA8YnI+IO+8iOaWh+acrOKck++8jOato+WImeKck++8iQogICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlCiAgICAgKi8KICAgIGNvbnN0IGxpbmVCcmVhayA9IG5vZGUgPT4gewogICAgICBpZiAobm9kZS5tYXRjaGVzKCdiciwgLnlhd2YtbGluZS1icmVhaycpKSB7CiAgICAgICAgcmV0dXJuICdcbic7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKGxpbmVCcmVhayk7CiAgICAvKioKICAgICAqICPor53popgj77yI5paH5pys4pyT77yM5q2j5YiZ4pyT77yJCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUKICAgICAqLwogICAgY29uc3QgdG9waWMgPSBub2RlID0+IHsKICAgICAgbGV0IHRvcGljID0gbnVsbDsKICAgICAgaWYgKG5vZGUubWF0Y2hlcygnYVtzdWRhLXVhdHJhY2sqPSIxMDIyLXRvcGljIl0nKSAmJiBub2RlLnRpdGxlKSB7CiAgICAgICAgdG9waWMgPSBub2RlLnRpdGxlLnJlcGxhY2UoL15bXHMjXSt8W1xzI10rJC9nLCAnJyk7CiAgICAgICAgaWYgKG5vZGUucXVlcnlTZWxlY3RvcignLmZpY29uX3N1cGVydG9waWMnKSkgdG9waWMgPSAnXHVlNjI3JyArIHRvcGljOwogICAgICB9CiAgICAgIGlmICghdG9waWMgJiYgbm9kZS5tYXRjaGVzKCdhLmFfdG9waWMsIGFbc3VkYS11YXRyYWNrKj0iMTAyMi10b3BpYyJdJykpIHsKICAgICAgICB0b3BpYyA9IG5vZGUudGV4dENvbnRlbnQucmVwbGFjZSgvXltccyNdK3xbXHMjXSskL2csICcnKTsKICAgICAgfQogICAgICBpZiAoIXRvcGljICYmIG5vZGUubWF0Y2hlcygnYVtzdWRhLXVhdHJhY2sqPSIxMDIyLXN0b2NrIl0nKSkgewogICAgICAgIHRvcGljID0gbm9kZS50ZXh0Q29udGVudC5yZXBsYWNlKC9eW1xzJF0rfFtccyRdKyQvZywgJycpOwogICAgICB9CiAgICAgIGlmICh0b3BpYykgewogICAgICAgIGNvbnN0IFtfLCBzdXBlclRvcGljLCB0ZXh0XSA9IHRvcGljLm1hdGNoKC9eKD89KFx1ZTYyNz98LipcW+i2heivnVxdfC4q6LaF6K+dJCkpW1x1ZTYyN1xzXSooLio/KSg/Olxb6LaF6K+dXF186LaF6K+dKT8kLyk7CiAgICAgICAgaWYgKHN1cGVyVG9waWMgJiYgZGV0YWlsKSByZXR1cm4gYCAjJHt0ZXh0fVvotoXor51dIyBgOwogICAgICAgIGlmIChkZXRhaWwpIHJldHVybiBgICMke3RleHR9IyBgOwogICAgICAgIHJldHVybiBgIyR7dGV4dH0jYDsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH07CiAgICBwYXJzZXJzLnB1c2godG9waWMpOwogICAgLyoqCiAgICAgKiAk6IKh56WoJO+8iOaWh+acrOKck++8jOato+WImeKck++8iQogICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlCiAgICAgKi8KICAgIGNvbnN0IHN0b2NrID0gbm9kZSA9PiB7CiAgICAgIGlmIChub2RlLm1hdGNoZXMoJ2Fbc3VkYS11YXRyYWNrKj0iMTAyMi1zdG9jayJdJykpIHsKICAgICAgICBjb25zdCB0ZXh0ID0gbm9kZS50ZXh0Q29udGVudC50cmltKCkucmVwbGFjZSgvXlwkP3xcJD8kL2csICcnKTsKICAgICAgICBpZiAoZGV0YWlsKSByZXR1cm4gYCAkJHt0ZXh0fSQgYDsKICAgICAgICByZXR1cm4gYCQke3RleHR9JGA7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKHN0b2NrKTsKICAgIC8qKgogICAgICogW+ihqOaDhV3vvIjmlofmnKzinJPvvIzmraPliJninJPvvIkKICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZQogICAgICovCiAgICBjb25zdCBlbW90aW9uID0gbm9kZSA9PiB7CiAgICAgIGlmIChub2RlLm1hdGNoZXMoJ2ltZ1t0eXBlPSJmYWNlIl1bYWx0XScpKSB7CiAgICAgICAgY29uc3QgdGV4dCA9IG5vZGUuZ2V0QXR0cmlidXRlKCdhbHQnKS50cmltKCkKICAgICAgICAgIC5yZXBsYWNlKC9eXFs/LywgJ1snKS5yZXBsYWNlKC9cXT8kLywgJ10nKTsKICAgICAgICBpZiAoZGV0YWlsKSByZXR1cm4gYCAke3RleHR9IGA7CiAgICAgICAgcmV0dXJuIHRleHQ7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKGVtb3Rpb24pOwoKICAgIC8qKgogICAgICog5aaC5p6c5oiR5Lus5ou/5Yiw5LiA5Liq5L2c6ICF5oiW6ICF5Y6f5L2c6ICF55qE6ZO+5o6l77yM5oiR5Lus6L+Y5Y+v5Lul5ou/5Yiw5LuW55qE6YKj5Lqb5bCP5Zu+5qCHCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUKICAgICAqLwogICAgY29uc3QgdXNlckljb25zID0gZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgY29uc3QgaXNTZWFyY2ggPSBpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWRDb250YWluZXIobm9kZSkpOwogICAgICBjb25zdCBpdGVtcyA9IFtdOwogICAgICBpZiAoaXNTZWFyY2gpIHsKICAgICAgICBjb25zdCBzaWJsaW5nID0gWy4uLm5vZGUucGFyZW50Tm9kZS5jaGlsZHJlbl07CiAgICAgICAgaXRlbXMucHVzaCguLi5zaWJsaW5nLmZpbHRlcihpdGVtID0+IGl0ZW0ubWF0Y2hlcygnYVt0aXRsZV0nKSkpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGljb25zID0gW107CiAgICAgICAgZm9yIChsZXQgbmV4dCA9IG5vZGU7IG5leHQ7IG5leHQgPSBuZXh0Lm5leHRFbGVtZW50U2libGluZykgewogICAgICAgICAgaWYgKG5leHQubWF0Y2hlcygnLnNwX2t6JykpIGJyZWFrOwogICAgICAgICAgaWYgKG5leHQubWF0Y2hlcygnW3RpdGxlXScpKSBpY29ucy5wdXNoKG5leHQpOwogICAgICAgICAgY29uc3QgaW5uZXIgPSBuZXh0LnF1ZXJ5U2VsZWN0b3IoJy5XX2ljb25bdGl0bGVdJyk7CiAgICAgICAgICBpZiAoaW5uZXIpIGljb25zLnB1c2goaW5uZXIpOwogICAgICAgIH0KICAgICAgICBpdGVtcy5wdXNoKC4uLmljb25zKTsKICAgICAgfQogICAgICBjb25zdCBpY29ucyA9IGl0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0gIT09IG5vZGUgJiYgaXRlbS50aXRsZS50cmltKCkpOwogICAgICByZXR1cm4gaWNvbnMubWFwKGljb24gPT4gYFske2ljb24udGl0bGUudHJpbSgpfV1gKTsKICAgIH07CgogICAgLyoqCiAgICAgKiBA5L2c6ICF77yI5paH5pys4pyX77yM5q2j5YiZ4pyT77yJCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUKICAgICAqLwogICAgY29uc3QgYXV0aG9yID0gbm9kZSA9PiB7CiAgICAgIGlmICghbm9kZS5tYXRjaGVzKCcuV0JfZGV0YWlsID4gLldCX2luZm8gPiAuV19mYlt1c2VyY2FyZF0nKSkgcmV0dXJuIG51bGw7CiAgICAgIGlmICghZGV0YWlsKSByZXR1cm4gJyc7CiAgICAgIGNvbnN0IG5hbWUgPSAnQCcgKyBub2RlLnRleHRDb250ZW50LnRyaW0oKTsKICAgICAgY29uc3QgaWQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKG5vZGUuZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKS5nZXQoJ2lkJyk7CiAgICAgIGNvbnN0IGxpbmsgPSAnaHR0cHM6Ly93ZWliby5jb20vdS8nICsgaWQ7CiAgICAgIGNvbnN0IGljb25zID0gdXNlckljb25zKG5vZGUpOwogICAgICByZXR1cm4gW25hbWUsIGxpbmssIC4uLmljb25zXS5qb2luKCcgJyk7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKGF1dGhvcik7CiAgICAvKioKICAgICAqIEDljp/kvZzvvIjmlofmnKzinJfvvIzmraPliJninJPvvIkKICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZQogICAgICovCiAgICBjb25zdCBvcmlnaW5hbCA9IG5vZGUgPT4gewogICAgICBpZiAoIW5vZGUubWF0Y2hlcygnLldCX2V4cGFuZCA+IC5XQl9pbmZvID4gLldfZmJbdXNlcmNhcmRdJykpIHJldHVybiBudWxsOwogICAgICBpZiAoIWRldGFpbCkgcmV0dXJuICcnOwogICAgICBjb25zdCBuYW1lID0gbm9kZS50ZXh0Q29udGVudC50cmltKCkucmVwbGFjZSgvXkA/LywgJ0AnKTsKICAgICAgY29uc3QgaWQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKG5vZGUuZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKS5nZXQoJ2lkJyk7CiAgICAgIGNvbnN0IGxpbmsgPSAnaHR0cHM6Ly93ZWliby5jb20vdS8nICsgaWQ7CiAgICAgIGNvbnN0IGljb25zID0gdXNlckljb25zKG5vZGUpOwogICAgICByZXR1cm4gW25hbWUsIGxpbmssIC4uLmljb25zXS5qb2luKCcgJyk7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKG9yaWdpbmFsKTsKICAgIC8qKgogICAgICogQOaPkOWIsO+8iOaWh+acrOKck++8jOato+WImeKck++8iQogICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlCiAgICAgKi8KICAgIGNvbnN0IG1lbnRpb24gPSBub2RlID0+IHsKICAgICAgaWYgKG5vZGUubWF0Y2hlcygnYVt1c2VyY2FyZF0nKSkgewogICAgICAgIHJldHVybiBub2RlLnRleHRDb250ZW50LnRyaW0oKS5yZXBsYWNlKC9eQD8vLCAnQCcpICsgJyAnOwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfTsKICAgIHBhcnNlcnMucHVzaChtZW50aW9uKTsKICAgIC8qKgogICAgICog5p2l5rqQ77yI5paH5pys4pyX77yM5q2j5YiZ4pyT77yJCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUKICAgICAqLwogICAgY29uc3Qgc291cmNlID0gbm9kZSA9PiB7CiAgICAgIGlmICghbm9kZS5tYXRjaGVzKCcuV0JfZnJvbSBhOm5vdChbZGF0ZV0pOm5vdChbeWF3Zi1kYXRlXSknKSkgcmV0dXJuIG51bGw7CiAgICAgIGlmICghZGV0YWlsKSByZXR1cm4gJyc7CiAgICAgIHJldHVybiAobm9kZS50aXRsZSB8fCBub2RlLnRleHRDb250ZW50KS50cmltKCk7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKHNvdXJjZSk7CiAgICAvKioKICAgICAqIOaXtumXtO+8iOaWh+acrOKcl++8jOato+WImeKck++8iQogICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlCiAgICAgKi8KICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5vZGUgPT4gewogICAgICBpZiAoIW5vZGUubWF0Y2hlcygnYVtkYXRlXSwgYVt5YXdmLWRhdGVdJykpIHJldHVybiBudWxsOwogICAgICBpZiAoIWRldGFpbCkgcmV0dXJuICcnOwogICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKyhub2RlLmdldEF0dHJpYnV0ZSgnZGF0ZScpIHx8IG5vZGUuZ2V0QXR0cmlidXRlKCd5YXdmLWRhdGUnKSkpOwogICAgICAvLyDlsIbml7bpl7TmoLzlvI/ljJbkuLrkuJzlhavljLrnmoQgSVNPIDg2MDEg5LiyCiAgICAgIGRhdGUuc2V0SG91cnMoZGF0ZS5nZXRIb3VycygpICsgOCk7CiAgICAgIGlmICgoZGF0ZS5nZXRVVENGdWxsWWVhcigpICsgJycpLmxlbmd0aCAhPT0gNCkgcmV0dXJuICcnOwogICAgICByZXR1cm4gWwogICAgICAgIGRhdGUuZ2V0VVRDRnVsbFllYXIoKSwKICAgICAgICAnLScsIChkYXRlLmdldFVUQ01vbnRoKCkgKyAxICsgJycpLnBhZFN0YXJ0KDIsIDApLAogICAgICAgICctJywgKGRhdGUuZ2V0VVRDRGF0ZSgpICsgJycpLnBhZFN0YXJ0KDIsIDApLAogICAgICAgICdUJywgKGRhdGUuZ2V0VVRDSG91cnMoKSArICcnKS5wYWRTdGFydCgyLCAwKSwKICAgICAgICAnOicsIChkYXRlLmdldFVUQ01pbnV0ZXMoKSArICcnKS5wYWRTdGFydCgyLCAwKSwKICAgICAgICAnOicsIChkYXRlLmdldFVUQ1NlY29uZHMoKSArICcnKS5wYWRTdGFydCgyLCAwKSwKICAgICAgICAnLicsIChkYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpICsgJycpLnBhZFN0YXJ0KDMsIDApLAogICAgICAgICcrMDgwMCcsCiAgICAgIF0uam9pbignJyk7CiAgICB9OwogICAgcGFyc2Vycy5wdXNoKHRpbWVzdGFtcCk7CiAgICAvKioKICAgICAqIOmTvuaOpQogICAgICogVVJM77yI5paH5pys4pyX77yM5q2j5YiZ4pyT77yJCiAgICAgKiDmoIfpopjvvIjmlofmnKzinJPvvIzmraPliJninJPvvIkKICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZQogICAgICovCiAgICBjb25zdCBsaW5rID0gbm9kZSA9PiB7CiAgICAgIGNvbnN0IG91dHB1dCA9IFtdOwogICAgICBpZiAoIW5vZGUubWF0Y2hlcygnYVthY3Rpb24tdHlwZT0iZmVlZF9saXN0X3VybCJdJykpIHJldHVybiBudWxsOwogICAgICBpZiAobm9kZS5tYXRjaGVzKCdbc3VkYS11YXRyYWNrKj0iMTAyMi10b3BpYyJdJykpIHJldHVybiBudWxsOwogICAgICBpZiAoZGV0YWlsKSB7CiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChub2RlLmhyZWYudHJpbSgpKTsKICAgICAgICBpZiAodXJsLmhvc3QgKyB1cmwucGF0aG5hbWUgPT09ICdmZWVkLm1peC5zaW5hLmNvbS5jbi9saW5rX2NhcmQvcmVkaXJlY3QnKSB7CiAgICAgICAgICBvdXRwdXQucHVzaCh1cmwuc2VhcmNoUGFyYW1zLmdldCgndXJsJykpOwogICAgICAgIH0gZWxzZSBvdXRwdXQucHVzaCh1cmwuaHJlZik7CiAgICAgICAgb3V0cHV0LnB1c2goJ1x1ZmZmOScpOwogICAgICAgIGNvbnN0IGljb24gPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJy5XX2ZpY29uJyk7CiAgICAgICAgaWYgKGljb24pIG91dHB1dC5wdXNoKGljb24udGV4dENvbnRlbnQpOwogICAgICB9CiAgICAgIGlmIChub2RlLm1hdGNoZXMoJ1t0aXRsZV0nKSkgewogICAgICAgIG91dHB1dC5wdXNoKG5vZGUuZ2V0QXR0cmlidXRlKCd0aXRsZScpLnRyaW0oKSk7CiAgICAgIH0KICAgICAgaWYgKGRldGFpbCkgewogICAgICAgIG91dHB1dC5wdXNoKCdcdWZmZmInKTsKICAgICAgfQogICAgICBpZiAob3V0cHV0Lmxlbmd0aCkgcmV0dXJuICcgJyArIG91dHB1dC5qb2luKCcgJykgKyAnICc7CiAgICAgIHJldHVybiBudWxsOwogICAgfTsKICAgIHBhcnNlcnMucHVzaChsaW5rKTsKCiAgICAvKioKICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZQogICAgICogQHJldHVybnMge3N0cmluZ30KICAgICAqLwogICAgY29uc3QgYWxsUGFyc2VyID0gZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgcmV0dXJuIHBhcnNlcnMucmVkdWNlKChyZXN1bHQsIHBhcnNlcikgPT4gewogICAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkgcmV0dXJuIHJlc3VsdDsKICAgICAgICByZXR1cm4gcGFyc2VyKG5vZGUpOwogICAgICB9LCBudWxsKTsKICAgIH07CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGUKICAgICAqIEByZXR1cm5zIHtzdHJpbmd9CiAgICAgKi8KICAgIGNvbnN0IHBhcnNlTm9kZSA9IGZ1bmN0aW9uIHBhcnNlTm9kZShub2RlLCBpc1NlYXJjaCA9IG51bGwpIHsKICAgICAgY29uc3QgdGV4dCA9IGFsbFBhcnNlcihub2RlKTsKICAgICAgaWYgKHRleHQgIT0gbnVsbCkgcmV0dXJuIHRleHQ7CiAgICAgIGlmIChub2RlLmhhc0NoaWxkTm9kZXMoKSkgewogICAgICAgIHJldHVybiBbLi4ubm9kZS5jaGlsZE5vZGVzXS5tYXAobm9kZSA9PiBwYXJzZU5vZGUobm9kZSkpLmpvaW4oJycpOwogICAgICB9CiAgICAgIHJldHVybiAnJzsKICAgIH07CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge1NlbGVjdGlvbn0gc2VsZWN0aW9uCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119CiAgICAgKi8KICAgIGNvbnN0IHBhcnNlU2VsZWN0aW9uID0gZnVuY3Rpb24gKHNlbGVjdGlvbikgewogICAgICBjb25zdCByYW5nZXMgPSBbLi4uQXJyYXkoc2VsZWN0aW9uLnJhbmdlQ291bnQpXQogICAgICAgIC5tYXAoKF8sIGkpID0+IHNlbGVjdGlvbi5nZXRSYW5nZUF0KGkpKTsKICAgICAgY29uc3QgcmFuZ2VFbGVtZW50cyA9IHJhbmdlcy5tYXAocmFuZ2UgPT4gewogICAgICAgIHJldHVybiBjb21tb25QYXJlbnQocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLmVuZENvbnRhaW5lcik7CiAgICAgIH0pOwogICAgICBjb25zdCBjb250YWluZXIgPSBjb250YWluZXJUeXBlID09PSAnZmVlZCcgPyBmZWVkQ29udGFpbmVyIDogY29tbWVudENvbnRhaW5lcjsKICAgICAgY29uc3QgY29udGVudEVsZW1lbnRzID0gY29udGFpbmVyVHlwZSA9PT0gJ2ZlZWQnID8gZmVlZENvbnRlbnRFbGVtZW50cyA6IGNvbW1lbnRDb250ZW50RWxlbWVudHM7CiAgICAgIGNvbnN0IGZlZWQgPSBjb250YWluZXIoY29tbW9uUGFyZW50KC4uLnJhbmdlRWxlbWVudHMpKTsKICAgICAgaWYgKCFmZWVkKSByZXR1cm4gbnVsbDsKICAgICAgY29uc3QgZWxlbWVudHMgPSBjb250ZW50RWxlbWVudHMoZmVlZCwgeyBkZXRhaWwsIHNob3J0OiB0cnVlLCBsb25nOiB0cnVlIH0pOwogICAgICBpZiAoIWVsZW1lbnRzKSByZXR1cm4gbnVsbDsKICAgICAgaWYgKHJhbmdlRWxlbWVudHMuc29tZShyZSA9PiAhY29udGFpbnMoZWxlbWVudHMsIHJlKSkpIHJldHVybiBudWxsOwogICAgICByZXR1cm4gcmFuZ2VzLm1hcCgocmFuZ2UsIHJhbmdlSW5kZXgpID0+IHsKICAgICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBbcmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLmVuZENvbnRhaW5lcl07CiAgICAgICAgaWYgKHN0YXJ0ID09PSBlbmQpIHsKICAgICAgICAgIGlmIChzdGFydCBpbnN0YW5jZW9mIFRleHQpIHsKICAgICAgICAgICAgcmV0dXJuIHN0YXJ0LnRleHRDb250ZW50LnNsaWNlKHJhbmdlLnN0YXJ0T2Zmc2V0LCByYW5nZS5lbmRPZmZzZXQpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHBhcnNlTm9kZShzdGFydCk7CiAgICAgICAgfQogICAgICAgIGxldCBzdGF0dXMgPSAwOwogICAgICAgIHJldHVybiAoZnVuY3Rpb24gcGFyc2VOb2RlKG5vZGUpIHsKICAgICAgICAgIGlmIChub2RlID09PSBzdGFydCAmJiBub2RlIGluc3RhbmNlb2YgVGV4dCkgewogICAgICAgICAgICByZXR1cm4gbm9kZS50ZXh0Q29udGVudC5zbGljZShyYW5nZS5zdGFydE9mZnNldCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobm9kZSA9PT0gZW5kICYmIG5vZGUgaW5zdGFuY2VvZiBUZXh0KSB7CiAgICAgICAgICAgIHJldHVybiBub2RlLnRleHRDb250ZW50LnNsaWNlKDAsIHJhbmdlLmVuZE9mZnNldCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCB0ZXh0ID0gYWxsUGFyc2VyKG5vZGUpOwogICAgICAgICAgaWYgKHRleHQpIHsKICAgICAgICAgICAgaWYgKG5vZGUgPT09IHN0YXJ0KSBzdGF0dXMgPSAxOwogICAgICAgICAgICBpZiAobm9kZSA9PT0gZW5kKSBzdGF0dXMgPSAyOwogICAgICAgICAgICByZXR1cm4gc3RhdHVzID09PSAxIHx8IG5vZGUgPT09IGVuZCA/IHRleHQgOiAnJzsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChub2RlLmhhc0NoaWxkTm9kZXMoKSkgewogICAgICAgICAgICByZXR1cm4gWy4uLm5vZGUuY2hpbGROb2Rlc10ubWFwKG5vZGUgPT4gcGFyc2VOb2RlKG5vZGUpKS5qb2luKCcnKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9KHJhbmdlRWxlbWVudHNbcmFuZ2VJbmRleF0pKTsKICAgICAgfSk7CiAgICB9OwoKICAgIC8qKiBAdHlwZSB7V2Vha01hcDxOb2RlLCBzdHJpbmc+fSAqLwogICAgY29uc3Qgbm9kZUNhY2hlID0gbmV3IFdlYWtNYXAoKTsKCiAgICAvKioKICAgICAqLy8qKgogICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldAogICAgKiBAcmV0dXJucyB7c3RyaW5nfQogICAgKi8vKioKICAgICogQHBhcmFtIHtTZWxlY3Rpb259IHRhcmdldAogICAgKiBAcmV0dXJucyB7c3RyaW5nW119CiAgICAqLwogICAgY29uc3QgcGFyc2VyID0gZnVuY3Rpb24gKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgTm9kZSkgewogICAgICAgIGlmIChub2RlQ2FjaGUuaGFzKHRhcmdldCkpIHJldHVybiBub2RlQ2FjaGUuZ2V0KHRhcmdldCk7CiAgICAgICAgY29uc3QgdGV4dCA9IHBhcnNlTm9kZSh0YXJnZXQpOwogICAgICAgIG5vZGVDYWNoZS5zZXQodGFyZ2V0LCB0ZXh0KTsKICAgICAgICByZXR1cm4gdGV4dDsKICAgICAgfQogICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgU2VsZWN0aW9uKSB7CiAgICAgICAgcmV0dXJuIHBhcnNlU2VsZWN0aW9uKHRhcmdldCk7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9OwoKICAgIHJldHVybiBwYXJzZXI7CiAgfTsKCiAgY29uc3QgZnVsbFRleHRQYXJzZXIgPSB0ZXh0UGFyc2VyKHRydWUsICdmZWVkJyk7CiAgY29uc3Qgc2ltcGxlVGV4dFBhcnNlciA9IHRleHRQYXJzZXIoZmFsc2UsICdmZWVkJyk7CiAgY29uc3QgY29tbWVudFRleHRQYXJzZXIgPSB0ZXh0UGFyc2VyKGZhbHNlLCAnY29tbWVudCcpOwoKICBjb25zdCBub2RlVGV4dFBhcnNlciA9ICh0YXJnZXQsIGRldGFpbCkgPT4gewogICAgY29uc3QgcGFyc2VyID0gZGV0YWlsID8gZnVsbFRleHRQYXJzZXIgOiBzaW1wbGVUZXh0UGFyc2VyOwogICAgY29uc3QgZWxlbWVudHMgPSBmZWVkQ29udGVudEVsZW1lbnRzKHRhcmdldCwgeyBkZXRhaWwsIGxvbmc6IHRydWUgfSk7CiAgICBpZiAoZWxlbWVudHMpIHsKICAgICAgY29uc3QgdGV4dHMgPSBlbGVtZW50cy5tYXAoZWxlbWVudCA9PiBwYXJzZXIoZWxlbWVudCkgfHwgJycpOwogICAgICByZXR1cm4gdGV4dHMuam9pbihkZXRhaWwgPyAnXHUyMDI4JyA6ICdcbicpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHBhcnNlcih0YXJnZXQpOwogICAgfQogIH07CgogIGNvbnN0IHRleHQgPSBmZWVkUGFyc2VyLnRleHQgPSB7fTsKICB0ZXh0LmRldGFpbCA9IGVsZW1lbnQgPT4gbm9kZVRleHRQYXJzZXIoZWxlbWVudCwgdHJ1ZSk7CiAgdGV4dC5zaW1wbGUgPSBlbGVtZW50ID0+IG5vZGVUZXh0UGFyc2VyKGVsZW1lbnQsIGZhbHNlKTsKCiAgLy8g5YaF5a655Yy65Z+fCiAgY29uc3QgY29udGVudCA9IGZlZWRQYXJzZXIuY29udGVudCA9IHt9OwogIGNvbnRlbnQuZG9tID0gKGZlZWQsIGlzTWFpbiwgaXNGdWxsKSA9PiB7CiAgICBjb25zdCBpc1NlYXJjaCA9IGlzU2VhcmNoRmVlZEVsZW1lbnQoZmVlZCk7CiAgICBpZiAoaXNGdWxsID09PSBmYWxzZSkgewogICAgICBpZiAoaXNNYWluICYmICFpc1NlYXJjaCkgewogICAgICAgIHJldHVybiBmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF9jb250ZW50Il0nKTsKICAgICAgfSBlbHNlIGlmICghaXNNYWluICYmICFpc1NlYXJjaCkgewogICAgICAgIHJldHVybiBmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF9yZWFzb24iXScpOwogICAgICB9IGVsc2UgaWYgKGlzTWFpbikgewogICAgICAgIHJldHVybiBmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50ID4gW25vZGUtdHlwZT0iZmVlZF9saXN0X2NvbnRlbnQiXScpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF9mb3J3YXJkQ29udGVudCJdID4gW25vZGUtdHlwZT0iZmVlZF9saXN0X2NvbnRlbnQiXScpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGlzRnVsbCA9PT0gdHJ1ZSkgewogICAgICBpZiAoaXNNYWluICYmICFpc1NlYXJjaCkgewogICAgICAgIHJldHVybiBmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF9jb250ZW50X2Z1bGwiXScpOwogICAgICB9IGVsc2UgaWYgKCFpc01haW4gJiYgIWlzU2VhcmNoKSB7CiAgICAgICAgcmV0dXJuIGZlZWQucXVlcnlTZWxlY3RvcignW25vZGUtdHlwZT0iZmVlZF9saXN0X3JlYXNvbl9mdWxsIl0nKTsKICAgICAgfSBlbHNlIGlmIChpc01haW4pIHsKICAgICAgICByZXR1cm4gZmVlZC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCA+IFtub2RlLXR5cGU9ImZlZWRfbGlzdF9jb250ZW50X2Z1bGwiXScpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF9mb3J3YXJkQ29udGVudCJdID4gW25vZGUtdHlwZT0iZmVlZF9saXN0X2NvbnRlbnRfZnVsbCJdJyk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBjb250ZW50LmRvbShmZWVkLCB0cnVlKSB8fCBjb250ZW50LmRvbShmZWVkLCBmYWxzZSk7CiAgICB9CiAgfTsKCiAgLy8g5L2c6ICF77yI6L+Z5p2h5b6u5Y2a5piv6LCB5Y+R55qE77yJCiAgLy8g5a+55LqO5b+r6L2s5b6u5Y2a77yM5piv6L+Z5p2h5b6u5Y2a6L2s5Y+R6Ieq55qE5L2c6ICFCiAgY29uc3QgYXV0aG9yID0gZmVlZFBhcnNlci5hdXRob3IgPSB7fTsKICBhdXRob3IuZG9tID0gZmVlZCA9PiB7CiAgICBpZiAoIShmZWVkIGluc3RhbmNlb2YgTm9kZSkpIHJldHVybiBbXTsKICAgIGlmICghaXNTZWFyY2hGZWVkRWxlbWVudChmZWVkKSkgewogICAgICBjb25zdCBhdXRob3IgPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5XQl9kZXRhaWwgPiAuV0JfaW5mbyA+IC5XX2ZiW3VzZXJjYXJkXScpOwogICAgICByZXR1cm4gYXV0aG9yID8gW2F1dGhvcl0gOiBbXTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGF1dGhvciA9IGZlZWQucXVlcnlTZWxlY3RvcignLmNhcmQtZmVlZCAuaW5mbyAubmFtZScpOwogICAgICByZXR1cm4gYXV0aG9yID8gW2F1dGhvcl0gOiBbXTsKICAgIH0KICB9OwogIGF1dGhvci5pZCA9IGZlZWQgPT4gewogICAgY29uc3QgZG9tTGlzdCA9IGF1dGhvci5kb20oZmVlZCk7CiAgICBpZiAoIWlzU2VhcmNoRmVlZEVsZW1lbnQoZmVlZCkpIHsKICAgICAgcmV0dXJuIGRvbUxpc3QubWFwKGRvbSA9PiBuZXcgVVJMU2VhcmNoUGFyYW1zKGRvbS5nZXRBdHRyaWJ1dGUoJ3VzZXJjYXJkJykpLmdldCgnaWQnKSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZG9tTGlzdC5tYXAoZG9tID0+IHsKICAgICAgICBjb25zdCBbXywgdWlkXSA9IGRvbS5wYXRobmFtZS5tYXRjaCgvXlwvKD86dVwvKT8oXGQrKS8pIHx8IFtdOwogICAgICAgIHJldHVybiBTdHJpbmcoTnVtYmVyLnBhcnNlSW50KHVpZCwgMTApKTsKICAgICAgfSkuZmlsdGVyKHVpZCA9PiArdWlkKTsKICAgIH0KICB9OwogIGF1dGhvci5uYW1lID0gZmVlZCA9PiB7CiAgICBjb25zdCBkb21MaXN0ID0gYXV0aG9yLmRvbShmZWVkKTsKICAgIHJldHVybiBkb21MaXN0Lm1hcChkb20gPT4gZG9tLnRleHRDb250ZW50LnRyaW0oKSk7CiAgfTsKICBhdXRob3IuYXZhdGFyID0gZmVlZCA9PiB7CiAgICBjb25zdCBkb21MaXN0ID0gYXV0aG9yLmRvbShmZWVkKTsKICAgIGlmIChkb21MaXN0Lmxlbmd0aCAhPT0gMSkgcmV0dXJuIG51bGw7CiAgICBpZiAoIWlzU2VhcmNoRmVlZEVsZW1lbnQoZmVlZCkpIHsKICAgICAgY29uc3QgaW1nID0gZmVlZC5xdWVyeVNlbGVjdG9yKCcuV0JfZmFjZSBpbWcnKTsKICAgICAgcmV0dXJuIGltZy5zcmM7CiAgICB9IGVsc2UgewogICAgICBjb25zdCBpbWcgPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWZlZWQgLmF2YXRvciBpbWcnKTsKICAgICAgcmV0dXJuIGltZy5zcmM7CiAgICB9CiAgfTsKCiAgLy8g5b+r6L2s5L2c6ICFCiAgY29uc3QgZmF1dGhvciA9IGZlZWRQYXJzZXIuZmF1dGhvciA9IHt9OwogIGZhdXRob3IuZG9tID0gZmVlZCA9PiB7CiAgICBpZiAoIShmZWVkIGluc3RhbmNlb2YgTm9kZSkpIHJldHVybiBbXTsKICAgIGlmICghaXNTZWFyY2hGZWVkRWxlbWVudChmZWVkKSkgewogICAgICBjb25zdCBmYXV0aG9yID0gZmVlZC5xdWVyeVNlbGVjdG9yKCcuc3Bfa3ogfiBhW3VzZXJjYXJkXScpOwogICAgICByZXR1cm4gZmF1dGhvciA/IFtmYXV0aG9yXSA6IFtdOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogIH07CiAgZmF1dGhvci5pZCA9IGZlZWQgPT4gewogICAgY29uc3QgZG9tTGlzdCA9IGZhdXRob3IuZG9tKGZlZWQpOwogICAgaWYgKCFpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpKSB7CiAgICAgIHJldHVybiBkb21MaXN0Lm1hcChkb20gPT4gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb20uZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKS5nZXQoJ2lkJykpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogIH07CiAgZmF1dGhvci5uYW1lID0gZmVlZCA9PiB7CiAgICBjb25zdCBkb21MaXN0ID0gZmF1dGhvci5kb20oZmVlZCk7CiAgICBjb25zdCAkQ09ORklHID0gcGFnZS4kQ09ORklHOwogICAgcmV0dXJuIGRvbUxpc3QubWFwKGRvbSA9PiB7CiAgICAgIGNvbnN0IGlkID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb20uZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKS5nZXQoJ2lkJyk7CiAgICAgIGlmIChpZCA9PT0gJENPTkZJRy51aWQpIHJldHVybiAkQ09ORklHLm5pY2s7CiAgICAgIHJldHVybiBkb20udGV4dENvbnRlbnQudHJpbSgpOwogICAgfSk7CiAgfTsKCiAgLy8g5Y6f5L2c6ICF77yI5LiA5p2h6KKr6L2s5Y+R55qE5b6u5Y2a5pyA5pep5p2l6Ieq6LCB77yJCiAgY29uc3Qgb3JpZ2luYWwgPSBmZWVkUGFyc2VyLm9yaWdpbmFsID0ge307CiAgb3JpZ2luYWwuZG9tID0gZmVlZCA9PiB7CiAgICBpZiAoIShmZWVkIGluc3RhbmNlb2YgTm9kZSkpIHJldHVybiBbXTsKICAgIGlmICghaXNTZWFyY2hGZWVkRWxlbWVudChmZWVkKSkgewogICAgICBjb25zdCBvcmlnaW5hbCA9IGZlZWQucXVlcnlTZWxlY3RvcignLldCX2V4cGFuZCA+IC5XQl9pbmZvID4gLldfZmJbdXNlcmNhcmRdJyk7CiAgICAgIHJldHVybiBvcmlnaW5hbCA/IFtvcmlnaW5hbF0gOiBbXTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IG9yaWdpbmFsID0gZmVlZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb21tZW50IC5uYW1lJyk7CiAgICAgIHJldHVybiBvcmlnaW5hbCA/IFtvcmlnaW5hbF0gOiBbXTsKICAgIH0KICB9OwogIG9yaWdpbmFsLmlkID0gZmVlZCA9PiB7CiAgICBjb25zdCBkb21MaXN0ID0gb3JpZ2luYWwuZG9tKGZlZWQpOwogICAgaWYgKCFpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpKSB7CiAgICAgIHJldHVybiBkb21MaXN0Lm1hcChkb20gPT4gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb20uZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKS5nZXQoJ2lkJykpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGRvbUxpc3QubWFwKGRvbSA9PiB7CiAgICAgICAgY29uc3QgW18sIHVpZF0gPSBkb20ucGF0aG5hbWUubWF0Y2goL15cLyg/OnVcLyk/KFxkKykvKSB8fCBbXTsKICAgICAgICByZXR1cm4gU3RyaW5nKE51bWJlci5wYXJzZUludCh1aWQsIDEwKSk7CiAgICAgIH0pLmZpbHRlcih1aWQgPT4gK3VpZCk7CiAgICB9CiAgfTsKICBvcmlnaW5hbC5uYW1lID0gZmVlZCA9PiB7CiAgICBjb25zdCBkb21MaXN0ID0gb3JpZ2luYWwuZG9tKGZlZWQpOwogICAgcmV0dXJuIGRvbUxpc3QubWFwKGRvbSA9PiBkb20udGV4dENvbnRlbnQudHJpbSgpLnJlcGxhY2UoL15ALywgJycpKTsKICB9OwoKICAvLyDmj5DliLDvvIjlvq7ljZrkuK3mj5DliLDnmoTkurrvvIzovazlj5Hot6/lvoTkuK3nmoTkurrlkIzlsZ7kuo7mj5DliLDvvIkKICBjb25zdCBtZW50aW9uID0gZmVlZFBhcnNlci5tZW50aW9uID0ge307CiAgbWVudGlvbi5kb20gPSAoZmVlZCwgeyBzaG9ydCA9IGZhbHNlLCBsb25nID0gdHJ1ZSB9ID0ge30pID0+IHsKICAgIGNvbnN0IGNvbnRlbnRzID0gZmVlZENvbnRlbnRFbGVtZW50cyhmZWVkLCB7IHNob3J0LCBsb25nIH0pOwogICAgaWYgKCFpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpKSB7CiAgICAgIGNvbnN0IGRvbUxpc3QgPSBjb250ZW50cy5tYXAoY29udGVudCA9PiB7CiAgICAgICAgaWYgKCFjb250ZW50KSByZXR1cm4gW107CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWYqPSJsb2M9YXQiXVt1c2VyY2FyZCo9Im5hbWUiXScpKTsKICAgICAgfSkucmVkdWNlKCh4LCB5KSA9PiB4LmNvbmNhdCh5KSk7CiAgICAgIHJldHVybiBkb21MaXN0OwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgbGlua0xpc3QgPSBjb250ZW50cy5tYXAoY29udGVudCA9PiAoCiAgICAgICAgY29udGVudCA/IEFycmF5LmZyb20oY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdhJykpIDogW10KICAgICAgKSkucmVkdWNlKCh4LCB5KSA9PiB4LmNvbmNhdCh5KSk7CiAgICAgIGNvbnN0IGRvbUxpc3QgPSBsaW5rTGlzdC5maWx0ZXIobGluayA9PiB7CiAgICAgICAgaWYgKCFbJ3dlaWJvLmNvbScsICd3d3cud2VpYm8uY29tJ10uaW5jbHVkZXMobGluay5ob3N0bmFtZSkpIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoIS9cL25cLy8udGVzdChsaW5rLnBhdGhuYW1lKSkgcmV0dXJuIGZhbHNlOwogICAgICAgIGlmICghL15ALy50ZXN0KGxpbmsudGV4dENvbnRlbnQudHJpbSgpKSkgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KTsKICAgICAgcmV0dXJuIGRvbUxpc3Q7CiAgICB9CiAgfTsKICBtZW50aW9uLm5hbWUgPSAoZmVlZCwgeyBzaG9ydCA9IGZhbHNlLCBsb25nID0gdHJ1ZSB9ID0ge30pID0+IHsKICAgIGNvbnN0IGRvbUxpc3QgPSBtZW50aW9uLmRvbShmZWVkLCB7IHNob3J0LCBsb25nIH0pOwogICAgaWYgKCFpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpKSB7CiAgICAgIHJldHVybiBkb21MaXN0Lm1hcChkb20gPT4gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb20uZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKS5nZXQoJ25hbWUnKSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZG9tTGlzdC5tYXAoZG9tID0+IGRlY29kZVVSSUNvbXBvbmVudChkb20ucGF0aG5hbWUuc3BsaXQoJy8nKVsyXSkpOwogICAgfQogIH07CgogIC8vIOivnemimO+8iOWMheaLrOivnemimOWSjOi2heivne+8iQogIGNvbnN0IHRvcGljID0gZmVlZFBhcnNlci50b3BpYyA9IHt9OwogIHRvcGljLmRvbSA9IChmZWVkLCB7IHNob3J0ID0gZmFsc2UsIGxvbmcgPSB0cnVlIH0gPSB7fSkgPT4gewogICAgY29uc3QgaXNTZWFyY2ggPSBpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpOwogICAgY29uc3QgY29udGVudHMgPSBmZWVkQ29udGVudEVsZW1lbnRzKGZlZWQsIHsgc2hvcnQsIGxvbmcgfSk7CiAgICBjb25zdCBkb21MaXN0ID0gW107CiAgICBjb250ZW50cy5mb3JFYWNoKGNvbnRlbnQgPT4gewogICAgICBpZiAoIWNvbnRlbnQpIHJldHVybjsKICAgICAgaWYgKCFpc1NlYXJjaCkgewogICAgICAgIGNvbnN0IHRvcGljcyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbChbCiAgICAgICAgICAnYVtzdWRhLXVhdHJhY2sqPSIxMDIyLXRvcGljIl0nLAogICAgICAgICAgJ2EuYV90b3BpYycsCiAgICAgICAgXS5qb2luKCcsJykpOwogICAgICAgIGRvbUxpc3QucHVzaCguLi50b3BpY3MpOwogICAgICAgIGNvbnN0IHNvdXJjZXMgPSBzb3VyY2UuZG9tKGZlZWQpOwogICAgICAgIHNvdXJjZXMuZm9yRWFjaChzb3VyY2UgPT4gewogICAgICAgICAgaWYgKC9eaHR0cHM6XC9cL2h1YXRpLndlaWJvLmNvbVwva1wvW14vPyNdKyQvLnRlc3Qoc291cmNlLmhyZWYpKSBkb21MaXN0LnB1c2goc291cmNlKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBsaW5rcyA9IEFycmF5LmZyb20oY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdhJykpOwogICAgICAgIGxpbmtzLmZvckVhY2gobGluayA9PiB7CiAgICAgICAgICBsZXQgaXNUb3BpYyA9IGZhbHNlOwogICAgICAgICAgaWYgKGxpbmsuaG9zdG5hbWUgPT09ICdzLndlaWJvLmNvbScpIHsKICAgICAgICAgICAgaXNUb3BpYyA9IC9eIy4qIyQvLnRlc3QobGluay50ZXh0Q29udGVudC50cmltKCkpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGxpbmsuaG9zdG5hbWUgPT09ICdodWF0aS53ZWliby5jb20nKSB7CiAgICAgICAgICAgIGlzVG9waWMgPSAvXlxzKlx1ZTYyNy8udGVzdChsaW5rLnRleHRDb250ZW50KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc1RvcGljKSBkb21MaXN0LnB1c2gobGluayk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGRvbUxpc3Q7CiAgfTsKICB0b3BpYy50ZXh0ID0gKGZlZWQsIHsgc2hvcnQgPSBmYWxzZSwgbG9uZyA9IHRydWUgfSA9IHt9KSA9PiB7CiAgICBjb25zdCBkb21MaXN0ID0gdG9waWMuZG9tKGZlZWQsIHsgc2hvcnQsIGxvbmcgfSk7CiAgICByZXR1cm4gZG9tTGlzdC5tYXAoZG9tID0+IHsKICAgICAgaWYgKGRvbSBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50KSB7CiAgICAgICAgaWYgKC9eaHR0cHM6XC9cL2h1YXRpLndlaWJvLmNvbVwva1wvW14vPyNdKyQvLnRlc3QoZG9tLmhyZWYpKSB7CiAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGRvbS5ocmVmLnNwbGl0KCcvJykucG9wKCkpLnRyaW0oKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc3QgdGV4dCA9IGRvbS50aXRsZSB8fCBkb20udGV4dENvbnRlbnQ7CiAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoL1sjXHVlNjI3XXxcW+i2heivnVxdJC9nLCAnJykudHJpbSgpOwogICAgfSk7CiAgfTsKCiAgLy8g6ZO+5o6l77yI6Zmk6LaF6K+d5aSW5omA5pyJ55qE6ZO+5o6l77yM5YyF5ous5aSW56uZ6ZO+5o6l44CB6KeG6aKR44CB5paH56ug562J77yJCiAgY29uc3QgbGluayA9IGZlZWRQYXJzZXIubGluayA9IHt9OwogIGxpbmsuZG9tID0gKGZlZWQsIHsgc2hvcnQgPSBmYWxzZSwgbG9uZyA9IHRydWUgfSA9IHt9KSA9PiB7CiAgICBjb25zdCBpc1NlYXJjaCA9IGlzU2VhcmNoRmVlZEVsZW1lbnQoZmVlZCk7CiAgICBjb25zdCBjb250ZW50cyA9IGZlZWRDb250ZW50RWxlbWVudHMoZmVlZCwgeyBzaG9ydCwgbG9uZyB9KTsKICAgIGNvbnN0IGRvbUxpc3QgPSBbXS5jb25jYXQoLi4uY29udGVudHMubWFwKGNvbnRlbnQgPT4gewogICAgICBpZiAoIWNvbnRlbnQpIHJldHVybiBbXTsKICAgICAgaWYgKCFpc1NlYXJjaCkgewogICAgICAgIHJldHVybiBBcnJheS5mcm9tKGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnYVthY3Rpb24tdHlwZT0iZmVlZF9saXN0X3VybCJdJykpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGxpbmtzID0gQXJyYXkuZnJvbShjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKSk7CiAgICAgICAgcmV0dXJuIGxpbmtzLmZpbHRlcihsaW5rID0+ICgKICAgICAgICAgIGxpbmsucXVlcnlTZWxlY3RvcignLndiaWNvbicpLnRleHRDb250ZW50LnRyaW0oKSA9PT0gJ08nCiAgICAgICAgKSk7CiAgICAgIH0KICAgIH0pKTsKICAgIGNvbnN0IHRvcGljcyA9IG5ldyBTZXQoZmVlZFBhcnNlci50b3BpYy5kb20oZmVlZCwgeyBzaG9ydCwgbG9uZyB9KSk7CiAgICByZXR1cm4gZG9tTGlzdC5maWx0ZXIobGluayA9PiBsaW5rICYmICF0b3BpY3MuaGFzKGxpbmspKTsKICB9OwogIGxpbmsudGV4dCA9IChmZWVkLCB7IHNob3J0ID0gZmFsc2UsIGxvbmcgPSB0cnVlIH0gPSB7fSkgPT4gewogICAgY29uc3QgZG9tTGlzdCA9IGxpbmsuZG9tKGZlZWQsIHsgc2hvcnQsIGxvbmcgfSk7CiAgICByZXR1cm4gZG9tTGlzdC5tYXAoZG9tID0+IHsKICAgICAgY29uc3QgdGV4dCA9IGRvbS50aXRsZSB8fCBkb20udGV4dENvbnRlbnQ7CiAgICAgIHJldHVybiB0ZXh0OwogICAgfSk7CiAgfTsKCiAgLy8g5p2l5rqQCiAgY29uc3Qgc291cmNlID0gZmVlZFBhcnNlci5zb3VyY2UgPSB7fTsKICBzb3VyY2UuZG9tID0gKGZlZWQsIGlzTWFpbikgPT4gewogICAgY29uc3QgaXNTZWFyY2ggPSBpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpOwogICAgaWYgKGlzTWFpbiA9PT0gdHJ1ZSkgewogICAgICBpZiAoIWlzU2VhcmNoKSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZGV0YWlsID4gLldCX2Zyb20gYTpub3QoW2RhdGVdKTpub3QoW3lhd2YtZGF0ZV0pJykpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBBcnJheS5mcm9tKGZlZWQucXVlcnlTZWxlY3RvckFsbCgnLmNvbnRlbnQgPiAuZnJvbSBhOmxhc3QtY2hpbGQ6bm90KDpmaXJzdC1jaGlsZCknKSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaXNNYWluID09PSBmYWxzZSkgewogICAgICBpZiAoIWlzU2VhcmNoKSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZXhwYW5kIC5XQl9mcm9tIGE6bm90KFtkYXRlXSk6bm90KFt5YXdmLWRhdGVdKScpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkLWNvbW1lbnQgLmZyb20gYTpsYXN0LWNoaWxkOm5vdCg6Zmlyc3QtY2hpbGQpJykpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAoIWlzU2VhcmNoKSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZnJvbSBhOm5vdChbZGF0ZV0pOm5vdChbeWF3Zi1kYXRlXSknKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuZnJvbSBhOmxhc3QtY2hpbGQ6bm90KDpmaXJzdC1jaGlsZCknKSk7CiAgICAgIH0KICAgIH0KICB9OwogIHNvdXJjZS50ZXh0ID0gKGZlZWQsIGlzTWFpbikgPT4gewogICAgY29uc3QgZG9tTGlzdCA9IHNvdXJjZS5kb20oZmVlZCwgaXNNYWluKTsKICAgIHJldHVybiBkb21MaXN0Lm1hcChkb20gPT4gewogICAgICBjb25zdCB0ZXh0ID0gKGRvbS50aXRsZSB8fCBkb20udGV4dENvbnRlbnQpLnRyaW0oKTsKICAgICAgcmV0dXJuIHRleHQ7CiAgICB9KS5maWx0ZXIoc291cmNlID0+IHNvdXJjZSk7CiAgfTsKCiAgLy8g5pel5pyfCiAgY29uc3QgZGF0ZSA9IGZlZWRQYXJzZXIuZGF0ZSA9IHt9OwogIGRhdGUuZG9tID0gKGZlZWQsIGlzTWFpbikgPT4gewogICAgY29uc3QgaXNTZWFyY2ggPSBpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpOwogICAgaWYgKGlzTWFpbiA9PT0gdHJ1ZSkgewogICAgICBpZiAoIWlzU2VhcmNoKSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZGV0YWlsID4gLldCX2Zyb20gYVtkYXRlXSwgLldCX2RldGFpbCA+IC5XQl9mcm9tIGFbeWF3Zi1kYXRlXScpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb250ZW50ID4gLmZyb20gYTpmaXJzdC1jaGlsZCcpKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChpc01haW4gPT09IGZhbHNlKSB7CiAgICAgIGlmICghaXNTZWFyY2gpIHsKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9leHBhbmQgLldCX2Zyb20gYVtkYXRlXSwgLldCX2V4cGFuZCAuV0JfZnJvbSBhW3lhd2YtZGF0ZV0nKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZC1jb21tZW50IC5mcm9tIGE6Zmlyc3QtY2hpbGQnKSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICghaXNTZWFyY2gpIHsKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9mcm9tIGFbZGF0ZV0sIC5XQl9mcm9tIGFbeWF3Zi1kYXRlXScpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mcm9tIGE6Zmlyc3QtY2hpbGQnKSk7CiAgICAgIH0KICAgIH0KICB9OwogIGRhdGUuZGF0ZSA9IChmZWVkLCBpc01haW4pID0+IHsKICAgIGNvbnN0IGRvbUxpc3QgPSBkYXRlLmRvbShmZWVkLCBpc01haW4pOwogICAgcmV0dXJuIGRvbUxpc3QubWFwKGRvbSA9PiAoCiAgICAgIG5ldyBEYXRlKE51bWJlcihkb20uZ2V0QXR0cmlidXRlKCdkYXRlJykgfHwgZG9tLmdldEF0dHJpYnV0ZSgneWF3Zi1kYXRlJykpKQogICAgKSkuZmlsdGVyKGRhdGUgPT4gK2RhdGUpOwogIH07CgogIC8vIOWFtuS7luWfuuehgOmAmueUqAogIGZlZWRQYXJzZXIuaXNGZWVkID0gZmVlZCA9PiBpc0ZlZWRFbGVtZW50KGZlZWQpOwogIGZlZWRQYXJzZXIuaXNTZWFyY2hGZWVkID0gZmVlZCA9PiBpc1NlYXJjaEZlZWRFbGVtZW50KGZlZWQpOwogIGZlZWRQYXJzZXIuaXNGb3J3YXJkID0gZmVlZCA9PiBpc0ZvcndhcmRGZWVkRWxlbWVudChmZWVkKTsKICBmZWVkUGFyc2VyLmlzRmFzdCA9IGZlZWQgPT4gaXNGYXN0RmVlZEVsZW1lbnQoZmVlZCk7CiAgZmVlZFBhcnNlci5pc0Zhc3RGb3J3YXJkID0gZmVlZCA9PiBpc0Zhc3RGb3J3YXJkRmVlZEVsZW1lbnQoZmVlZCk7CgogIGZlZWRQYXJzZXIubWlkID0gbm9kZSA9PiBmZWVkQ29udGFpbmVyKG5vZGUpLmdldEF0dHJpYnV0ZSgnbWlkJyk7CiAgZmVlZFBhcnNlci5vbWlkID0gbm9kZSA9PiBmZWVkQ29udGFpbmVyKG5vZGUpLmdldEF0dHJpYnV0ZSgnb21pZCcpOwogIGZlZWRQYXJzZXIuZm1pZCA9IG5vZGUgPT4gZmVlZENvbnRhaW5lcihub2RlKS5nZXRBdHRyaWJ1dGUoJ2ZtaWQnKTsKCiAgLy8g6K+E6K665YaF5a65CiAgY29tbWVudFBhcnNlci50ZXh0ID0gdGFyZ2V0ID0+IHsKICAgIGNvbnN0IGVsZW1lbnRzID0gY29tbWVudENvbnRlbnRFbGVtZW50cyh0YXJnZXQpOwogICAgaWYgKGVsZW1lbnRzKSB7CiAgICAgIGNvbnN0IHRleHRzID0gZWxlbWVudHMubWFwKGVsZW1lbnQgPT4gY29tbWVudFRleHRQYXJzZXIoZWxlbWVudCkgfHwgJycpOwogICAgICByZXR1cm4gdGV4dHMuam9pbignXG4nKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBjb21tZW50VGV4dFBhcnNlcih0YXJnZXQpOwogICAgfQogIH07CgogIC8vIOivhOiuuueUqOaItwogIGNvbnN0IGNvbW1lbnRVc2VyID0gY29tbWVudFBhcnNlci51c2VyID0ge307CiAgY29tbWVudFVzZXIuZG9tID0gY29tbWVudCA9PiB7CiAgICBjb25zdCBjb250ZW50ID0gY29tbWVudENvbnRlbnRFbGVtZW50cyhjb21tZW50KTsKICAgIHJldHVybiBbXS5jb25jYXQoLi4uY29udGVudC5tYXAoZWxlbWVudCA9PiBbLi4uZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW3VzZXJjYXJkXScpXSkpOwogIH07CiAgY29tbWVudFVzZXIubmFtZSA9IGNvbW1lbnQgPT4gewogICAgY29uc3QgZG9tTGlzdCA9IGNvbW1lbnRVc2VyLmRvbShjb21tZW50KTsKICAgIHJldHVybiBkb21MaXN0CiAgICAgIC5tYXAoZG9tID0+IGRvbS50ZXh0Q29udGVudC50cmltKCkucmVwbGFjZSgvXkA/LywgJycpKQogICAgICAuZmlsdGVyKHVzZXIgPT4gdXNlcik7CiAgfTsKCn0oKSk7CjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwoKICBjb25zdCBmZWVkUGFyc2VyID0geWF3Zi5mZWVkVjcgPSB7fTsKICBjb25zdCBjb21tZW50UGFyc2VyID0geWF3Zi5jb21tZW50VjcgPSB7fTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwoKICAvLyDlsIbml7bpl7TmoLzlvI/ljJbkuLrkuJzlhavljLrnmoQgSVNPIDg2MDEg5LiyCiAgY29uc3QgZGF0ZSA9IGZ1bmN0aW9uIChkYXRlU3RyKSB7CiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7CiAgICBkYXRlLnNldEhvdXJzKGRhdGUuZ2V0SG91cnMoKSArIDgpOwogICAgaWYgKChkYXRlLmdldFVUQ0Z1bGxZZWFyKCkgKyAnJykubGVuZ3RoICE9PSA0KSByZXR1cm4gJyc7CiAgICByZXR1cm4gWwogICAgICBkYXRlLmdldFVUQ0Z1bGxZZWFyKCksCiAgICAgICctJywgKGRhdGUuZ2V0VVRDTW9udGgoKSArIDEgKyAnJykucGFkU3RhcnQoMiwgMCksCiAgICAgICctJywgKGRhdGUuZ2V0VVRDRGF0ZSgpICsgJycpLnBhZFN0YXJ0KDIsIDApLAogICAgICAnVCcsIChkYXRlLmdldFVUQ0hvdXJzKCkgKyAnJykucGFkU3RhcnQoMiwgMCksCiAgICAgICc6JywgKGRhdGUuZ2V0VVRDTWludXRlcygpICsgJycpLnBhZFN0YXJ0KDIsIDApLAogICAgICAnOicsIChkYXRlLmdldFVUQ1NlY29uZHMoKSArICcnKS5wYWRTdGFydCgyLCAwKSwKICAgICAgJy4nLCAoZGF0ZS5nZXRVVENNaWxsaXNlY29uZHMoKSArICcnKS5wYWRTdGFydCgzLCAwKSwKICAgICAgJyswODAwJywKICAgIF0uam9pbignJyk7CiAgfTsKCiAgY29uc3QgY2F0Y2hlZCA9IChmLCB2ID0gbnVsbCkgPT4gZmVlZCA9PiB7IHRyeSB7IHJldHVybiBmKGZlZWQpOyB9IGNhdGNoIChlKSB7IHJldHVybiB2OyB9IH07CiAgY29uc3QgbWlkID0gbWlkID0+IG1pZCA+IDAgPyBtaWQgOiBudWxsOwoKICBmZWVkUGFyc2VyLm1pZCA9IGZlZWQgPT4gbWlkKGZlZWQubWlkKTsKICBmZWVkUGFyc2VyLm9taWQgPSBmZWVkID0+IG1pZCgoZmVlZC5yZXR3ZWV0ZWRfc3RhdHVzIHx8IHt9KS5taWQpOwoKICBmZWVkUGFyc2VyLmlzRmFzdCA9IGZlZWQgPT4gZmVlZC5zY3JlZW5fbmFtZV9zdWZmaXhfbmV3ICE9IG51bGw7CiAgZmVlZFBhcnNlci5pc0Zhc3RGb3J3YXJkID0gZmVlZCA9PiBmZWVkUGFyc2VyLmlzRmFzdChmZWVkKSAmJiBmZWVkLm9yaV9taWQgIT0gbnVsbDsKICBmZWVkUGFyc2VyLmlzRm9yd2FyZCA9IGZlZWQgPT4gZmVlZC5yZXR3ZWV0ZWRfc3RhdHVzICE9IG51bGw7CgogIGNvbnN0IGF1dGhvciA9IGZlZWRQYXJzZXIuYXV0aG9yID0ge307CiAgYXV0aG9yLmF2YXRhciA9IGNhdGNoZWQoZmVlZCA9PiBmZWVkLnVzZXIuYXZhdGFyX2xhcmdlIHx8IGZlZWQudXNlci5hdmF0YXJfaGQsIG51bGwpOwogIGF1dGhvci5pZCA9IGZlZWQgPT4gW2ZlZWQudXNlci5pZHN0cl07CiAgYXV0aG9yLm5hbWUgPSBmZWVkID0+IFtmZWVkLnVzZXIuc2NyZWVuX25hbWVdOwogIGNvbnN0IGZhdXRob3IgPSBmZWVkUGFyc2VyLmZhdXRob3IgPSB7fTsKICBmYXV0aG9yLmlkID0gZmVlZCA9PiBmZWVkUGFyc2VyLmlzRmFzdEZvcndhcmQoZmVlZCkgPyBbU3RyaW5nKGZlZWQub3JpX3VpZCldIDogW107IC8vIG9yaV9taWQg5piv6KKr5b+r6L2s5b6u5Y2aIGlk77yMb3JpX3VpZCDmmK/ovazlv6vovaznmoTkurrnmoQgaWQKICBmYXV0aG9yLm5hbWUgPSBjYXRjaGVkKGZlZWQgPT4gZmVlZFBhcnNlci5pc0Zhc3RGb3J3YXJkKGZlZWQpID8gW2ZlZWQuc2NyZWVuX25hbWVfc3VmZml4X25ldy5maW5kKHggPT4geC50eXBlID09PSAyKS5jb250ZW50XSA6IFtdLCBbXSk7CiAgY29uc3Qgb3JpZ2luYWwgPSBmZWVkUGFyc2VyLm9yaWdpbmFsID0ge307CiAgb3JpZ2luYWwuaWQgPSBjYXRjaGVkKGZlZWQgPT4gZmVlZC5yZXR3ZWV0ZWRfc3RhdHVzID8gW2ZlZWQucmV0d2VldGVkX3N0YXR1cy51c2VyLmlkc3RyXSA6IFtdLCBbXSk7CiAgb3JpZ2luYWwubmFtZSA9IGNhdGNoZWQoZmVlZCA9PiBmZWVkLnJldHdlZXRlZF9zdGF0dXMgPyBbZmVlZC5yZXR3ZWV0ZWRfc3RhdHVzLnVzZXIuc2NyZWVuX25hbWVdIDogW10sIFtdKTsKICBjb25zdCBsaW5rVG9waWNzID0gZmVlZCA9PiB7CiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmVlZC51cmxfc3RydWN0KSkgcmV0dXJuIFtdOwogICAgY29uc3QgdG9waWNzID0gW107CiAgICBmZWVkLnVybF9zdHJ1Y3QuZm9yRWFjaCh1cmwgPT4gewogICAgICBjb25zdCBtYXRjaCA9IHVybC5zaG9ydF91cmwubWF0Y2goLyMoW14jXSopXFvotoXor51cXSMvKTsKICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzBdKSB0b3BpY3MucHVzaChtYXRjaFswXSk7CiAgICB9KTsKICAgIHJldHVybiB0b3BpY3M7CiAgfTsKICBjb25zdCB0ZXh0ID0gZmVlZFBhcnNlci50ZXh0ID0ge307CiAgdGV4dC5kZXRhaWwgPSBmZWVkID0+IHsKICAgIGxldCB0ZXh0ID0gW2ZlZWQsIGZlZWQucmV0d2VldGVkX3N0YXR1c10uZmlsdGVyKHggPT4geCAmJiB4LnVzZXIpLm1hcCh4ID0+IFsKICAgICAgeC51c2VyLnNjcmVlbl9uYW1lLAogICAgICB4LmxvbmdUZXh0Q29udGVudF9yYXcgfHwgeC50ZXh0X3JhdywKICAgICAgeC5zb3VyY2UsCiAgICAgIGRhdGUoeC5jcmVhdGVkX2F0KSwKICAgIF0pLnJlZHVjZSgoeCwgeSkgPT4geC5jb25jYXQoeSkpLmpvaW4oJ1x1MjAyOCcpOwogICAgaWYgKEFycmF5LmlzQXJyYXkoZmVlZC51cmxfc3RydWN0KSkgewogICAgICB0ZXh0ID0gZmVlZC51cmxfc3RydWN0LnJlZHVjZSh1cmwgPT4gewogICAgICAgIGlmICghdXJsIHx8ICF1cmwuc2hvcnRfdXJsIHx8ICEvaHR0cHM/OlwvXC8vLnRlc3QodXJsLnNob3J0X3VybCkpIHJldHVybiB0ZXh0OwogICAgICAgIHJldHVybiB0ZXh0LnNwbGl0KHVybC5zaG9ydF91cmwpLmpvaW4oKHVybC5sb25nX3VybCB8fCB1cmwuc2hvcnRfdXJsKSArICdcdWZmZjknICsgKHVybC51cmxfdGl0bGUgfHwgJycpICsgJ1x1ZmZmYicpOwogICAgICB9LCB0ZXh0KTsKICAgIH0KICAgIGNvbnN0IHRvcGljcyA9IGxpbmtUb3BpY3MoZmVlZCkubWFwKHQgPT4gYCMke3R9W+i2heivnV0jYCkuam9pbignJyk7CiAgICBpZiAodG9waWNzKSB0ZXh0ICs9ICdcbicgKyB0b3BpY3M7CiAgICByZXR1cm4gdGV4dDsKICB9OwogIHRleHQuc2ltcGxlID0gZmVlZCA9PiB7CiAgICBsZXQgdGV4dCA9IFtmZWVkLCBmZWVkLnJldHdlZXRlZF9zdGF0dXNdLmZpbHRlcih4ID0+IHgpCiAgICAgIC5tYXAoeCA9PiB4LmxvbmdUZXh0Q29udGVudF9yYXcgfHwgeC50ZXh0X3Jhdykuam9pbignXG4nKTsKICAgIGlmIChBcnJheS5pc0FycmF5KGZlZWQudXJsX3N0cnVjdCkpIHsKICAgICAgdGV4dCA9IGZlZWQudXJsX3N0cnVjdC5yZWR1Y2UodXJsID0+IHsKICAgICAgICBpZiAoIXVybCB8fCAhdXJsLnNob3J0X3VybCB8fCAhL2h0dHBzPzpcL1wvLy50ZXN0KHVybC5zaG9ydF91cmwpKSByZXR1cm4gdGV4dDsKICAgICAgICByZXR1cm4gdGV4dC5zcGxpdCh1cmwuc2hvcnRfdXJsKS5qb2luKHVybC51cmxfdGl0bGUgfHwgdXJsLmxvbmdfVVJMIHx8IHVybC5zaG9ydF91cmwpOwogICAgICB9LCB0ZXh0KTsKICAgIH0KICAgIGNvbnN0IHRvcGljcyA9IGxpbmtUb3BpY3MoZmVlZCkubWFwKHQgPT4gYCMke3R9W+i2heivnV0jYCkuam9pbignJyk7CiAgICBpZiAodG9waWNzKSB0ZXh0ICs9ICdcbicgKyB0b3BpY3M7CiAgICByZXR1cm4gdGV4dDsKICB9OwogIGNvbnN0IG1lbnRpb24gPSBmZWVkUGFyc2VyLm1lbnRpb24gPSB7fTsKICBtZW50aW9uLm5hbWUgPSBmZWVkID0+IHsKICAgIGNvbnN0IHRleHQgPSBbZmVlZCwgZmVlZC5yZXR3ZWV0ZWRfc3RhdHVzXS5maWx0ZXIoeCA9PiB4KQogICAgICAubWFwKHggPT4geC5sb25nVGV4dENvbnRlbnRfcmF3IHx8IHgudGV4dF9yYXcpLmpvaW4oJ1xuJyk7CiAgICBjb25zdCB1c2VycyA9ICh0ZXh0Lm1hdGNoKC9AW1x1NGUwMC1cdTlmYTV8XHVFN0M3LVx1RTdGM3xcd19cLcK3XSsvZykgfHwgW10pOwogICAgcmV0dXJuIHVzZXJzLm1hcCh1ID0+IHUuc2xpY2UoMSkpOwogIH07CiAgY29uc3QgdG9waWMgPSBmZWVkUGFyc2VyLnRvcGljID0ge307CiAgdG9waWMudGV4dCA9IGZlZWQgPT4gewogICAgY29uc3QgdG9waWNzID0gbGlua1RvcGljcyhmZWVkKTsKICAgIGlmIChBcnJheS5pc0FycmF5KGZlZWQudG9waWNfc3RydWN0KSkgewogICAgICB0b3BpY3MucHVzaCguLi5mZWVkLnRvcGljX3N0cnVjdC5tYXAodG9waWMgPT4gdG9waWMudG9waWNfdGl0bGUpKTsKICAgIH0KICAgIGlmIChBcnJheS5pc0FycmF5KGZlZWQudXJsX3N0cnVjdCkpIHsKICAgICAgLy8g5omA5pyJ5LiN5pivIGh0dHBzPyDlvIDlpLTnmoTpk77mjqUKICAgICAgdG9waWNzLnB1c2goLi4uZmVlZC51cmxfc3RydWN0Lm1hcCh4ID0+IHguc2hvcnRfdXJsKS5maWx0ZXIoeCA9PiB4ICYmIC9eKFsjJF0pLipcMSQvLnRlc3QoeCkpKTsKICAgIH0KICAgIHJldHVybiBbLi4ubmV3IFNldCh0b3BpY3MubWFwKHRleHQgPT4gdGV4dC5yZXBsYWNlKC9bI1x1ZTYyNyRdfFxb6LaF6K+dXF0kL2csICcnKS50cmltKCkpKV07CiAgfTsKICBjb25zdCBzb3VyY2UgPSBmZWVkUGFyc2VyLnNvdXJjZSA9IHt9OwogIHNvdXJjZS50ZXh0ID0gZmVlZCA9PiB7CiAgICBjb25zdCBzb3VyY2VzID0gW2ZlZWQsIGZlZWQucmV0d2VldGVkX3N0YXR1c10uZmlsdGVyKHggPT4geCkubWFwKHggPT4geC5zb3VyY2UpOwogICAgcmV0dXJuIHNvdXJjZXM7CiAgfTsKICBjb25zdCBwaWNzID0gZmVlZFBhcnNlci5waWNzID0ge307CiAgcGljcy5pbmZvID0gZmVlZCA9PiB7CiAgICBjb25zdCBwaWNzID0gW107CiAgICBbZmVlZCwgZmVlZC5yZXR3ZWV0ZWRfc3RhdHVzXS5mb3JFYWNoKGZkID0+IHsKICAgICAgaWYgKGZkICYmIGZkLnBpY19pbmZvcykgcGljcy5wdXNoKC4uLk9iamVjdC5rZXlzKGZkLnBpY19pbmZvcykubWFwKGsgPT4gZmQucGljX2luZm9zW2tdKSk7CiAgICB9KTsKICAgIHJldHVybiBwaWNzOwogIH07CgoKfSgpKTsKOyAoZnVuY3Rpb24gKCkgewogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CgogIGNvbnN0IHByaW9yaXR5ID0gdXRpbC5wcmlvcml0eTsKCiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZCA9IHt9OwogIGNvbnN0IGNvbW1lbnRQYXJzZXIgPSB5YXdmLmNvbW1lbnQgPSB7fTsKCiAgaW5pdC5vbkxvYWQoZnVuY3Rpb24gKCkgewogICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGZlZWRQYXJzZXIsIHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/IHlhd2YuZmVlZFY2IDogeWF3Zi5mZWVkVjcpOwogICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGNvbW1lbnRQYXJzZXIsIHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/IHlhd2YuY29tbWVudFY2IDogeWF3Zi5jb21tZW50VjcpOwogIH0sIHsgcHJpb3JpdHk6IHByaW9yaXR5LkZJUlNUIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9jb21tb24vZmFzdC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKICBjb25zdCBjb21tZW50UGFyc2VyID0geWF3Zi5jb21tZW50OwogIGNvbnN0IHJlcXVlc3QgPSB5YXdmLnJlcXVlc3Q7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGNvbnN0IGZhc3QgPSBmZWVkUGFyc2VyLmZhc3QgPSB7fTsKICBjb25zdCBjb21tZW50RmFzdCA9IGNvbW1lbnRQYXJzZXIuZmFzdCA9IHt9OwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGNvbnRlbnRUZXh0Q29udGV4dFRpdGxlOiB7CiAgICAgIGNuOiAn6L+H5ruk5b6u5Y2aIOWGheWuueKAnHsxfeKAnScsCiAgICAgIHR3OiAn56+p6YG45b6u5Y2aIOWFp+WuueOAjHsxfeOAjScsCiAgICAgIGVuOiAnQ3JlYXRlIGZpbHRlciBmb3IgY29udGVudCDigJx7MX3igJ0nLAogICAgfSwKICAgIGFjY291bnRDb250ZXh0VGl0bGU6IHsKICAgICAgY246ICfov4fmu6Tlvq7ljZog5biQ5Y+34oCcezF94oCdJywKICAgICAgdHc6ICfnr6npgbjlvq7ljZog5biz6Jmf44CMezF944CNJywKICAgICAgZW46ICdDcmVhdGUgZmlsdGVyIGZvciBhY2NvdW50IOKAnEB7MX3igJ0nLAogICAgfSwKICAgIHRvcGljQ29udGV4dFRpdGxlOiB7CiAgICAgIGNuOiAn6L+H5ruk5b6u5Y2aIOivnemimCN7MX0jJywKICAgICAgdHc6ICfnr6npgbjlvq7ljZog6Kmx6aGMI3sxfSMnLAogICAgICBlbjogJ0NyZWF0ZSBmaWx0ZXIgZm9yIHRvcGljICNAezF9IycsCiAgICB9LAogICAgc291cmNlQ29udGV4dFRpdGxlOiB7CiAgICAgIGNuOiAn6L+H5ruk5b6u5Y2aIOadpea6kOKAnHsxfeKAnScsCiAgICAgIHR3OiAn56+p6YG45b6u5Y2aIOS+hua6kOOAjHsxfeOAjScsCiAgICAgIGVuOiAnQ3JlYXRlIGZpbHRlciBmb3Igc291cmNlIOKAnEB7MX3igJ0nLAogICAgfSwKICB9KTsKCiAgY29uc3QgY2xlYW5UZXh0ID0gdGV4dCA9PiB0ZXh0LnJlcGxhY2UoL15bXHNcdTIwMGJdK3xbXHNcdTIwMGJdKyQvZywgJycpOwoKICBjb25zdCByZWNvZ25pemUgPSBmYXN0LnJlY29nbml6ZSA9IHt9OwogIC8vIOivhuWIq+mAieS4reeahOaWh+acrAogIHJlY29nbml6ZS50ZXh0U2ltcGxlID0gZnVuY3Rpb24gKHNlbGVjdGlvbikgewogICAgaWYgKCEoc2VsZWN0aW9uIGluc3RhbmNlb2YgU2VsZWN0aW9uKSkgcmV0dXJuIFtdOwogICAgaWYgKCEoc2VsZWN0aW9uICsgJycpKSByZXR1cm4gW107CiAgICBpZiAoc2VsZWN0aW9uLnJhbmdlQ291bnQgIT09IDEpIHJldHVybiBbXTsKICAgIGxldCBzaW1wbGUsIGZ1bGwsIHR5cGU7CiAgICBzaW1wbGUgPSAoZmVlZFBhcnNlci50ZXh0LnNpbXBsZShzZWxlY3Rpb24pIHx8IFtdKS5tYXAoY2xlYW5UZXh0KTsKICAgIGZ1bGwgPSAoZmVlZFBhcnNlci50ZXh0LmRldGFpbChzZWxlY3Rpb24pIHx8IFtdKS5tYXAoY2xlYW5UZXh0KTsKICAgIHR5cGUgPSAndGV4dCc7CiAgICBpZiAoIXNpbXBsZS5qb2luKCcnKSAmJiAhZnVsbC5qb2luKCcnKSkgewogICAgICBzaW1wbGUgPSBmdWxsID0gKGNvbW1lbnRQYXJzZXIudGV4dChzZWxlY3Rpb24pIHx8IFtdKS5tYXAoY2xlYW5UZXh0KTsKICAgICAgdHlwZSA9ICdjb21tZW50JzsKICAgIH0KICAgIGlmICghc2ltcGxlLmpvaW4oJycpICYmICFmdWxsLmpvaW4oJycpKSB7CiAgICAgIHJldHVybiBbXTsKICAgIH0KICAgIGNvbnN0IHRlbXBsYXRlID0gaTE4bi5jb250ZW50VGV4dENvbnRleHRUaXRsZTsKICAgIGNvbnN0IHRpdGxlID0gdGVtcGxhdGUucmVwbGFjZSgnezF9JywgKCkgPT4gc2ltcGxlKTsKICAgIHJldHVybiBbeyB0aXRsZSwgdHlwZSwgdmFsdWU6IHsgc2ltcGxlLCBmdWxsIH0gfV07CiAgfTsKICBydWxlLmFkZEZhc3RMaXN0ZW5lcihyZWNvZ25pemUudGV4dFNpbXBsZSk7CgogIC8vIOivhuWIq+WkmuS4qumAieWMuumAieS4reeahOaWh+acrAogIHJlY29nbml6ZS50ZXh0Q29tcGxleCA9IGZ1bmN0aW9uIChzZWxlY3Rpb24pIHsKICAgIGlmICghKHNlbGVjdGlvbiBpbnN0YW5jZW9mIFNlbGVjdGlvbikpIHJldHVybiBbXTsKICAgIGlmIChzZWxlY3Rpb24ucmFuZ2VDb3VudCA8PSAxKSByZXR1cm4gW107CiAgICBsZXQgdGV4dHMgPSBmZWVkUGFyc2VyLnRleHQuZGV0YWlsKHNlbGVjdGlvbikuZmlsdGVyKGNsZWFuVGV4dCk7CiAgICBsZXQgdHlwZSA9ICdtdWx0aXRleHQnOwogICAgaWYgKCF0ZXh0cy5sZW5ndGgpIHsKICAgICAgdGV4dHMgPSBjb21tZW50UGFyc2VyLnRleHQoc2VsZWN0aW9uKS5maWx0ZXIoY2xlYW5UZXh0KTsKICAgICAgdHlwZSA9ICdtdWx0aXRleHRjb21tZW50JzsKICAgIH0KICAgIGlmICghdGV4dHMubGVuZ3RoKSB7CiAgICAgIHJldHVybiBbXTsKICAgIH0KICAgIGNvbnN0IHRlbXBsYXRlID0gaTE4bi5jb250ZW50VGV4dENvbnRleHRUaXRsZTsKICAgIHRleHRzID0gdGV4dHMubWFwKHRleHQgPT4gdGV4dC50cmltKCkpOwogICAgY29uc3Qgam9pbmVkID0gdGV4dHMuam9pbign4oCmJyk7CiAgICBjb25zdCBwbGFjZWhvbGRlciA9IGpvaW5lZC5sZW5ndGggPiAxMCA/IGpvaW5lZC5zbGljZSgwLCA5KSArICfigKYnIDogam9pbmVkOwogICAgY29uc3QgdGl0bGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKCd7MX0nLCAoKSA9PiBwbGFjZWhvbGRlcik7CiAgICByZXR1cm4gW3sgdGl0bGUsIHR5cGUsIHZhbHVlOiB7IGZ1bGw6IHRleHRzIH0gfV07CiAgfTsKICBydWxlLmFkZEZhc3RMaXN0ZW5lcihyZWNvZ25pemUudGV4dENvbXBsZXgpOwoKICAvLyDlm6DkuLrmiJHku6znp7vpmaTkuoblr7npk77mjqXnmoTor4bliKvvvIzov5nph4wg5bCG6ZO+5o6l6K+G5Yir5Li65paH5pysCiAgcmVjb2duaXplLnRleHRMaW5rID0gZnVuY3Rpb24gKHRhcmdldCkgewogICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybiBbXTsKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JvZHknKTsKICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXJnZXQuY2xvbmVOb2RlKHRydWUpKTsKICAgIGNvbnN0IGxpbmsgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihbCiAgICAgICdhW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfdXJsIl1bdGl0bGVdJywKICAgICAgJ2FbYWN0aW9uLXR5cGU9ImZsX3VybF9hZGRwYXJhbXMiXVt0aXRsZV0nLAogICAgXS5qb2luKCcsJykpOwogICAgaWYgKCFsaW5rKSByZXR1cm4gW107CiAgICBpZiAobGluay5tYXRjaGVzKCdbc3VkYS11YXRyYWNrKj0iMTAyMi10b3BpYyJdJykpIHJldHVybiBbXTsKICAgIGNvbnN0IHRleHQgPSBsaW5rLnRpdGxlLnRyaW0oKTsKICAgIGlmICh0ZXh0Lm1hdGNoKC9eaHR0cHM/Oi8pIHx8IHRleHQgPT09ICfnvZHpobXpk77mjqUnKSByZXR1cm4gW107CiAgICBjb25zdCB0ZW1wbGF0ZSA9IGkxOG4uY29udGVudFRleHRDb250ZXh0VGl0bGU7CiAgICBjb25zdCB0aXRsZSA9IHRlbXBsYXRlLnJlcGxhY2UoJ3sxfScsICgpID0+IHRleHQpOwogICAgcmV0dXJuIFt7IHRpdGxlLCB0eXBlOiAndGV4dCcsIHZhbHVlOiB7IHNpbXBsZTogdGV4dCwgZnVsbDogW3RleHRdIH0gfV07CiAgfTsKICBydWxlLmFkZEZhc3RMaXN0ZW5lcihyZWNvZ25pemUudGV4dExpbmspOwoKICAvLyDor4bliKvnlKjmiLfnmoTlpLTlg4/jgIHpk77mjqXnrYkKICByZWNvZ25pemUuYWNjb3VudCA9IGFzeW5jIGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpKSByZXR1cm4gW107CiAgICBjb25zdCBmaW5kID0gc2VsZWN0b3IgPT4gewogICAgICBjb25zdCBwYXJlbnQgPSB0YXJnZXQuY2xvc2VzdChzZWxlY3Rvcik7CiAgICAgIGlmIChwYXJlbnQpIHJldHVybiBwYXJlbnQ7CiAgICAgIGNvbnN0IGNvbnRlbnQgPSB0YXJnZXQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICAgIGlmICghY29udGVudCkgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbnRlbnQuY2xvc2VzdCgnW2NvbW1lbnRfaWRdLCBbbWlkXScpOwogICAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuIG51bGw7CiAgICAgIGlmICh0YXJnZXQgPT09IGNvbnRhaW5lciB8fCBjb250YWluZXIuY29udGFpbnModGFyZ2V0KSkgcmV0dXJuIGNvbnRlbnQ7CiAgICAgIHJldHVybiBudWxsOwogICAgfTsKICAgIGNvbnN0IHVzZXIgPSB7IGlkOiBudWxsLCBuYW1lOiBudWxsLCB0eXBlOiAnYWNjb3VudCcgfTsKICAgIC8vIOeUqOaIt+mTvuaOpQogICAgOyAoZnVuY3Rpb24gKHVzZXJsaW5rKSB7CiAgICAgIGlmICghdXNlcmxpbmspIHJldHVybjsKICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh1c2VybGluay5nZXRBdHRyaWJ1dGUoJ3VzZXJjYXJkJykpOwogICAgICBpZiAocGFyYW1zLmhhcygnaWQnKSkgdXNlci5pZCA9IHBhcmFtcy5nZXQoJ2lkJyk7CiAgICAgIGlmIChwYXJhbXMuaGFzKCduYW1lJykpIHVzZXIubmFtZSA9IHBhcmFtcy5nZXQoJ25hbWUnKTsKICAgICAgaWYgKHVzZXJsaW5rLm1hdGNoZXMoJy5XQl9kZXRhaWwgPiAuV0JfaW5mbyA+IC5XX2ZiW3VzZXJjYXJkXScpKSB1c2VyLnR5cGUgPSAnYXV0aG9yJzsKICAgICAgaWYgKHVzZXJsaW5rLm1hdGNoZXMoJy5XQl9leHBhbmQgPiAuV0JfaW5mbyA+IC5XX2ZiW3VzZXJjYXJkXScpKSB1c2VyLnR5cGUgPSAnb3JpZ2luYWwnOwogICAgICBpZiAodXNlcmxpbmsubWF0Y2hlcygnLldCX2ZlZWRfdHlwZSBhW2hyZWYqPSJsb2M9YXQiXVt1c2VyY2FyZCo9Im5hbWUiXScpKSB1c2VyLnR5cGUgPSAnbWVudGlvbic7CiAgICAgIGlmICh1c2VybGluay5tYXRjaGVzKCdbY29tbWVudF9pZF0gW3VzZXJjYXJkXScpKSB1c2VyLnR5cGUgPSAnY29tbWVudHVzZXInOwogICAgfShmaW5kKCdbdXNlcmNhcmQqPSJuYW1lPSJdLCBbdXNlcmNhcmQqPSJpZD0iXScpKSk7CiAgICAvLyDkuKrkurrkuLvpobXnmoTlpLTlg48KICAgIDsgKGZ1bmN0aW9uIChwaG90bykgewogICAgICBpZiAoIXBob3RvKSByZXR1cm47CiAgICAgIHVzZXIubmFtZSA9IHBob3RvLmdldEF0dHJpYnV0ZSgnYWx0Jyk7CiAgICB9KGZpbmQoJy5waG90b1thbHRdJykpKTsKICAgIC8vIOeUqOaIt+WNoeeJh+WktOWDjwogICAgOyAoZnVuY3Rpb24gKHVzZXJjYXJkKSB7CiAgICAgIGlmICghdXNlcmNhcmQpIHJldHVybjsKICAgICAgY29uc3QgYXZhdGFyID0gdXNlcmNhcmQucXVlcnlTZWxlY3RvcignW2ltZ3R5cGU9ImhlYWQiXVt1aWRdW3RpdGxlXScpOwogICAgICBpZiAoIWF2YXRhcikgcmV0dXJuOwogICAgICB1c2VyLm5hbWUgPSBhdmF0YXIudGl0bGU7CiAgICAgIHVzZXIuaWQgPSBhdmF0YXIuZ2V0QXR0cmlidXRlKCd1aWQnKTsKICAgIH0oZmluZCgnLmxheWVyX3BlcnNvbmNhcmQnKSkpOwogICAgaWYgKCF1c2VyLmlkICYmICF1c2VyLm5hbWUpIHJldHVybiBbXTsKICAgIGlmICghdXNlci5pZCB8fCAhdXNlci5uYW1lKSB0cnkgewogICAgICBPYmplY3QuYXNzaWduKHVzZXIsIGF3YWl0IHJlcXVlc3QudXNlckluZm8odXNlcikpOwogICAgfSBjYXRjaCAoZSkgeyByZXR1cm4gW107IH0KICAgIGNvbnN0IHRlbXBsYXRlID0gaTE4bi5hY2NvdW50Q29udGV4dFRpdGxlOwogICAgaWYgKCF0ZW1wbGF0ZSkgcmV0dXJuIFtdOwogICAgY29uc3QgdGl0bGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKCd7MX0nLCAoKSA9PiB1c2VyLm5hbWUpOwogICAgcmV0dXJuIFt7IHRpdGxlLCB0eXBlOiB1c2VyLnR5cGUsIHZhbHVlOiB7IGlkOiB1c2VyLmlkLCBuYW1lOiB1c2VyLm5hbWUgfSB9XTsKICB9OwogIHJ1bGUuYWRkRmFzdExpc3RlbmVyKHJlY29nbml6ZS5hY2NvdW50KTsKCiAgLy8g6K+G5Yir6K+d6aKYCiAgcmVjb2duaXplLnRvcGljID0gYXN5bmMgZnVuY3Rpb24gKHRhcmdldCkgewogICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybiBbXTsKICAgIGxldCB0b3BpYyA9IG51bGw7CiAgICBpZiAodGFyZ2V0Lm1hdGNoZXMoJ2Fbc3VkYS11YXRyYWNrKj0iMTAyMi10b3BpYyJdJykgJiYgdGFyZ2V0LnRpdGxlKSB7CiAgICAgIHRvcGljID0gdGFyZ2V0LnRpdGxlLnJlcGxhY2UoL15bXHMjXSt8W1xzI10rJC9nLCAnJyk7CiAgICB9CiAgICBpZiAoIXRvcGljICYmIHRhcmdldC5tYXRjaGVzKCdhLmFfdG9waWMsIGFbc3VkYS11YXRyYWNrKj0iMTAyMi10b3BpYyJdJykpIHsKICAgICAgdG9waWMgPSB0YXJnZXQudGV4dENvbnRlbnQucmVwbGFjZSgvXltccyNdK3xbXHMjXSskL2csICcnKTsKICAgIH0KICAgIGlmICghdG9waWMgJiYgdGFyZ2V0Lm1hdGNoZXMoJ2Fbc3VkYS11YXRyYWNrKj0iMTAyMi1zdG9jayJdJykpIHsKICAgICAgdG9waWMgPSB0YXJnZXQudGV4dENvbnRlbnQucmVwbGFjZSgvXltccyRdK3xbXHMkXSskL2csICcnKTsKICAgIH0KICAgIGlmICghdG9waWMgJiYgdGFyZ2V0Lm1hdGNoZXMoJy5ob3RfdG9waWMgYVt0aXRsZV1bc3VkYS11YXRyYWNrKj0ia2V5PWhvdHRvcGljX3IyIl0nKSkgewogICAgICB0b3BpYyA9IHRhcmdldC50aXRsZS5yZXBsYWNlKC9eW1xzI10rfFtccyNdKyQvZywgJycpOwogICAgfQogICAgaWYgKCF0b3BpYyAmJiB0YXJnZXQubWF0Y2hlcygnLldCX2Zyb20gYVtocmVmXj0iaHR0cHM6Ly9odWF0aS53ZWliby5jb20vay8iXScpKSB7CiAgICAgIGlmICgvXmh0dHBzOlwvXC9odWF0aS53ZWliby5jb21cL2tcL1teLz8jXSskLy50ZXN0KHRhcmdldC5ocmVmKSkgewogICAgICAgIHRvcGljID0gZGVjb2RlVVJJQ29tcG9uZW50KHRhcmdldC5ocmVmLnNwbGl0KCcvJykucG9wKCkpLnRyaW0oKTsKICAgICAgfQogICAgfQogICAgaWYgKCF0b3BpYykgcmV0dXJuIFtdOwogICAgY29uc3QgdGV4dCA9IHRvcGljLnJlcGxhY2UoL15cdWU2Mjd8XFvotoXor51cXSR86LaF6K+dJC9nLCAnJyk7CiAgICBjb25zdCB0ZW1wbGF0ZSA9IGkxOG4udG9waWNDb250ZXh0VGl0bGU7CiAgICBjb25zdCB0aXRsZSA9IHRlbXBsYXRlLnJlcGxhY2UoJ3sxfScsICgpID0+IHRleHQpOwogICAgcmV0dXJuIFt7IHRpdGxlLCB0eXBlOiAndG9waWMnLCB2YWx1ZTogdGV4dCB9XTsKICB9OwogIHJ1bGUuYWRkRmFzdExpc3RlbmVyKHJlY29nbml6ZS50b3BpYyk7CgogIC8vIOivhuWIq+adpea6kAogIHJlY29nbml6ZS5zb3VyY2UgPSBhc3luYyBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuIFtdOwogICAgaWYgKCF0YXJnZXQubWF0Y2hlcygnLldCX2Zyb20gYTpub3QoW2RhdGVdKTpub3QoW3lhd2YtZGF0ZV0pJykpIHJldHVybiBbXTsKICAgIGNvbnN0IHNvdXJjZSA9ICh0YXJnZXQudGl0bGUgfHwgdGFyZ2V0LnRleHRDb250ZW50KS50cmltKCk7CiAgICBpZiAoIXNvdXJjZSB8fCBzb3VyY2UgPT09ICflvq7ljZogd2VpYm8uY29tJykgcmV0dXJuIFtdOwogICAgY29uc3QgdGVtcGxhdGUgPSBpMThuLnNvdXJjZUNvbnRleHRUaXRsZTsKICAgIGNvbnN0IHRpdGxlID0gdGVtcGxhdGUucmVwbGFjZSgnezF9JywgKCkgPT4gc291cmNlKTsKICAgIHJldHVybiBbeyB0aXRsZSwgdHlwZTogJ3NvdXJjZScsIHZhbHVlOiBzb3VyY2UgfV07CiAgfTsKICBydWxlLmFkZEZhc3RMaXN0ZW5lcihyZWNvZ25pemUuc291cmNlKTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICB0ZXh0RmFzdERlc2NyaXB0aW9uOiB7CiAgICAgIGNuOiAn5YyF5ZCr4oCcezF94oCd55qE5b6u5Y2aJywKICAgICAgdHc6ICfljIXlkKvjgIx7MX3jgI3nmoTlvq7ljZonLAogICAgICBlbjogJ0ZlZWRzIGNvbnRhaW4gdGV4dCDigJx7MX3igJ0nLAogICAgfSwKICAgIHRleHRDb21tZW50RmFzdERlc2NyaXB0aW9uOiB7CiAgICAgIGNuOiAn5YyF5ZCr4oCcezF94oCd55qE6K+E6K66JywKICAgICAgdHc6ICfljIXlkKvjgIx7MX3jgI3nmoToqZXoq5YnLAogICAgICBlbjogJ0NvbW1lbnRzIGNvbnRhaW4gdGV4dCDigJx7MX3igJ0nLAogICAgfSwKICAgIHJlZ2V4RmFzdERlc2NyaXB0aW9uOiB7CiAgICAgIGNuOiAn5Yy56YWNezF955qE5b6u5Y2aJywKICAgICAgdHc6ICfljLnphY17MX3nmoTlvq7ljZonLAogICAgICBlbjogJ0ZlZWRzIGNvbnRhaW4gdGV4dCDigJx7MX3igJ0nLAogICAgfSwKICAgIHJlZ2V4Q29tbWVudEZhc3REZXNjcmlwdGlvbjogewogICAgICBjbjogJ+WMuemFjXsxfeeahOivhOiuuicsCiAgICAgIHR3OiAn5Yy56YWNezF955qE6KmV6KuWJywKICAgICAgZW46ICdDb21tZW50cyBjb250YWluIHRleHQg4oCcezF94oCdJywKICAgIH0sCiAgICBhY2NvdW50QXV0aG9yRmFzdERlc2NyaXB0aW9uOiB7CiAgICAgIGNuOiAn5L2c6ICF5piv4oCcQHsxfeKAneeahOW+ruWNmicsCiAgICAgIHR3OiAn5L2c6ICF5piv44CMQHsxfeOAjeeahOW+ruWNmicsCiAgICAgIGVuOiAnRmVlZHMgYnkgIkB7MX0iJywKICAgIH0sCiAgICBhY2NvdW50QXV0aG9yRm9yd2FyZEZhc3REZXNjcmlwdGlvbjogewogICAgICBjbjogJ+S9nOiAheaYr+KAnEB7MX3igJ3nmoTovazlj5Hlvq7ljZonLAogICAgICB0dzogJ+S9nOiAheaYr+OAjEB7MX3jgI3nmoTovYnnmbzlvq7ljZonLAogICAgICBlbjogJ0ZlZWRzIGJ5ICJAezF9IicsCiAgICB9LAogICAgYWNjb3VudE1lbnRpb25GYXN0RGVzY3JpcHRpb246IHsKICAgICAgY246ICfmj5DliLDkuobigJxAezF94oCd55qE5b6u5Y2aJywKICAgICAgdHc6ICfmj5DliLDkuobjgIxAezF944CN55qE5b6u5Y2aJywKICAgICAgZW46ICdGZWVkcyBtZW50aW9uZWQgIkB7MX0iJywKICAgIH0sCiAgICBhY2NvdW50T3JpZ2luYWxGYXN0RGVzY3JpcHRpb246IHsKICAgICAgY246ICfljp/kvZzogIXmmK/igJxAezF94oCd55qE5b6u5Y2aJywKICAgICAgdHc6ICfljp/kvZzogIXmmK/jgIxAezF944CN55qE5b6u5Y2aJywKICAgICAgZW46ICdPcmlnaW5hbCBGZWVkcyBieSAiQHsxfSInLAogICAgfSwKICAgIGFjY291bnRDb21tZW50RmFzdERlc2NyaXB0aW9uOiB7CiAgICAgIGNuOiAn5YyF5ZCr4oCcQHsxfeKAneeahOivhOiuuicsCiAgICAgIHR3OiAn5YyF5ZCr44CMQHsxfeOAjeeahOipleirlicsCiAgICAgIGVuOiAnQ29tbWVudHMgd2l0aCAiQHsxfSInLAogICAgfSwKICAgIHRvcGljRmFzdERlc2NyaXB0aW9uOiB7CiAgICAgIGNuOiAn5YyF5ZCr6K+d6aKYI3sxfSPnmoTlvq7ljZonLAogICAgICB0dzogJ+WMheWQq+ivnemimCN7MX0j55qE5b6u5Y2aJywKICAgICAgZW46ICdGZWVkcyBjb250YWluIHRvcGljICN7MX0jJywKICAgIH0sCiAgICBzb3VyY2VGYXN0RGVzY3JpcHRpb246IHsKICAgICAgY246ICfmnaXoh6rigJx7MX3igJ3nmoTlvq7ljZonLAogICAgICB0dzogJ+S+huiHquOAjHsxfeOAjeeahOW+ruWNmicsCiAgICAgIGVuOiAnRmVlZHMgZnJvbSBzb3VyY2Ug4oCcezF94oCdJywKICAgIH0sCiAgfSk7CgogIGNvbnN0IHJlbmRlciA9IGZhc3QucmVuZGVyID0ge307CiAgY29uc3QgY29tbWVudFJlbmRlciA9IGNvbW1lbnRGYXN0LnJlbmRlciA9IHt9OwoKICBjb25zdCB0ZXh0RmFzdFJlbmRlciA9IGZ1bmN0aW9uIChkZXNjcmlwdGlvbikgewogICAgcmV0dXJuIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgY29uc3QgW3ByZSwgcG9zdF0gPSBkZXNjcmlwdGlvbigpLnNwbGl0KCd7MX0nKTsKICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHByZSkpOwogICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dCk7CiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwb3N0KSk7CiAgICAgIGlucHV0LnZhbHVlID0gaXRlbS52YWx1ZSA9IGl0ZW0udmFsdWUuc2ltcGxlOwogICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGV2ZW50ID0+IHsKICAgICAgICBpdGVtLnZhbHVlID0gaW5wdXQudmFsdWU7CiAgICAgIH0pOwogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfTsKICB9OwogIHJlbmRlci50ZXh0ID0gdGV4dEZhc3RSZW5kZXIoKCkgPT4gaTE4bi50ZXh0RmFzdERlc2NyaXB0aW9uKTsKICBjb21tZW50UmVuZGVyLnRleHQgPSB0ZXh0RmFzdFJlbmRlcigoKSA9PiBpMThuLnRleHRDb21tZW50RmFzdERlc2NyaXB0aW9uKTsKCiAgY29uc3QgcmVnZXhFc2NhcGVkID0gZnVuY3Rpb24gKHN0cikgewogICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bLiorP14ke30oKXxbXF0vXFxdL2csICdcXCQmJyk7CiAgfTsKICBjb25zdCByZWdleEZhc3RSZW5kZXIgPSBmdW5jdGlvbiAoZGVzY3JpcHRpb24pIHsKICAgIHJldHVybiBmdW5jdGlvbiAoaXRlbSkgewogICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgIGNvbnN0IFtwcmUsIHBvc3RdID0gZGVzY3JpcHRpb24oKS5zcGxpdCgnezF9Jyk7CiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwcmUpKTsKICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXQpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocG9zdCkpOwogICAgICBpZiAoaXRlbS52YWx1ZS5mdWxsLmxlbmd0aCA9PT0gMSkgewogICAgICAgIGlucHV0LnZhbHVlID0gaXRlbS52YWx1ZSA9ICcvJyArIHJlZ2V4RXNjYXBlZChpdGVtLnZhbHVlLmZ1bGxbMF0pICsgJy9tdSc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW5wdXQudmFsdWUgPSBpdGVtLnZhbHVlID0gJy9eJyArIGl0ZW0udmFsdWUuZnVsbAogICAgICAgICAgLm1hcCh2YWx1ZSA9PiBgKD89Lioke3JlZ2V4RXNjYXBlZCh2YWx1ZSl9KWApLmpvaW4oJycpICsgJy9tdSc7CiAgICAgIH0KICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBldmVudCA9PiB7CiAgICAgICAgaXRlbS52YWx1ZSA9IGlucHV0LnZhbHVlOwogICAgICB9KTsKICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH07CiAgfTsKICByZW5kZXIucmVnZXggPSByZWdleEZhc3RSZW5kZXIoKCkgPT4gaTE4bi5yZWdleEZhc3REZXNjcmlwdGlvbik7CiAgY29tbWVudFJlbmRlci5yZWdleCA9IHJlZ2V4RmFzdFJlbmRlcigoKSA9PiBpMThuLnJlZ2V4Q29tbWVudEZhc3REZXNjcmlwdGlvbik7CgogIGNvbnN0IHNpbXBsZVJlbmRlciA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgcmVhZFZhbHVlID0gdmFsdWUgPT4gdmFsdWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoaXRlbSkgewogICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZW1wbGF0ZSgpLnJlcGxhY2UoJ3sxfScsICgpID0+IHJlYWRWYWx1ZShpdGVtLnZhbHVlKSk7CiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShtZXNzYWdlKSk7CiAgICAgIHJldHVybiBjb250YWluZXI7CiAgICB9OwogIH07CgogIHJlbmRlci5hdXRob3IgPSBzaW1wbGVSZW5kZXIoKCkgPT4gaTE4bi5hY2NvdW50QXV0aG9yRmFzdERlc2NyaXB0aW9uLCB2YWx1ZSA9PiB2YWx1ZS5uYW1lKTsKICByZW5kZXIuZm9yd2FyZCA9IHNpbXBsZVJlbmRlcigoKSA9PiBpMThuLmFjY291bnRBdXRob3JGb3J3YXJkRmFzdERlc2NyaXB0aW9uLCB2YWx1ZSA9PiB2YWx1ZS5uYW1lKTsKICByZW5kZXIubWVudGlvbiA9IHNpbXBsZVJlbmRlcigoKSA9PiBpMThuLmFjY291bnRNZW50aW9uRmFzdERlc2NyaXB0aW9uLCB2YWx1ZSA9PiB2YWx1ZS5uYW1lKTsKICByZW5kZXIub3JpZ2luYWwgPSBzaW1wbGVSZW5kZXIoKCkgPT4gaTE4bi5hY2NvdW50T3JpZ2luYWxGYXN0RGVzY3JpcHRpb24sIHZhbHVlID0+IHZhbHVlLm5hbWUpOwogIGNvbW1lbnRSZW5kZXIudXNlciA9IHNpbXBsZVJlbmRlcigoKSA9PiBpMThuLmFjY291bnRDb21tZW50RmFzdERlc2NyaXB0aW9uLCB2YWx1ZSA9PiB2YWx1ZS5uYW1lKTsKICByZW5kZXIudG9waWMgPSBzaW1wbGVSZW5kZXIoKCkgPT4gaTE4bi50b3BpY0Zhc3REZXNjcmlwdGlvbik7CiAgcmVuZGVyLnNvdXJjZSA9IHNpbXBsZVJlbmRlcigoKSA9PiBpMThuLnNvdXJjZUZhc3REZXNjcmlwdGlvbik7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2NvbW1vbi9sb25nLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwoKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGNvbnN0IGRvbSA9IHV0aWwuZG9tOwoKICAvKioKICAgKiDnu5/orqHkuIDmnaHlvq7ljZrnmoTlrZfmlbAKICAgKiDlvq7ljZrnmoTlrZfmlbDoi7HmlofmjInljYrlrZforqHnrpflubblm5voiI3kupTlhaUKICAgKiBAcGFyYW0ge0VsZW1lbnR9IGh0bWwKICAgKi8KICBjb25zdCBmZWVkQ2hhcmFjdGVyQ291bnQgPSBmdW5jdGlvbiAodGV4dCkgewogICAgY29uc3QgY29udGVudCA9IHRleHQudGV4dENvbnRlbnQ7CiAgICBjb25zdCBjaGFyQ291bnQgPSBjb250ZW50Lmxlbmd0aDsKICAgIGNvbnN0IGxhdGluQ291bnQgPSBjb250ZW50LnJlcGxhY2UoL1teXHUwMDIwLVx1MDBmZV0vZywgJycpLmxlbmd0aDsKICAgIHJldHVybiBNYXRoLmNlaWwoY2hhckNvdW50IC0gbGF0aW5Db3VudCAvIDIpOwogIH07CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgZm9sZFRleHQ6IHsKICAgICAgY246ICfmlLbotbflhajmlocnLAogICAgfSwKICAgIHRleHRDb3VudDogewogICAgICBjbjogJ++8iOe6pnsxfeWtl++8iScsCiAgICAgIHR3OiAn77yI57SEezF95a2X77yJJywKICAgICAgZW46ICcgKGFib3V0IHsxfSBjaGFyYWN0ZXJzKScsCiAgICB9LAogIH0pOwoKICBvYnNlcnZlci5mZWVkLm9uQmVmb3JlKGFzeW5jIGZ1bmN0aW9uIChmZWVkKSB7CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OICE9PSA2KSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICBjb25zdCB1bmZvbGQgPSBBcnJheS5mcm9tKGZlZWQucXVlcnlTZWxlY3RvckFsbCgnW2FjdGlvbi10eXBlPSJmbF91bmZvbGQiXScpKTsKICAgIC8vIOi/meautemAu+i+keWfuuS6jiBsaWIuZmVlZC5wbHVnaW5zLm1vcmVUaGFuMTQwCiAgICAvLyDljIXmi6znm7TmjqXmioogSFRNTCDmj5LlhaXov5vljrvnmoTpgLvovpHkuZ/mmK/moLnmja7ov5nmrrXmnaXlgZrnmoQKICAgIGNvbnN0IHVuZm9sZGluZyA9IHVuZm9sZC5tYXAoYXN5bmMgZnVuY3Rpb24gKGJ1dHRvbikgewogICAgICBjb25zdCB0ZXh0ID0gYnV0dG9uLnBhcmVudE5vZGU7CiAgICAgIGlmICghdGV4dC5tYXRjaGVzKCcuV0JfdGV4dCcpKSByZXR1cm47CiAgICAgIGlmICh0ZXh0Lm5leHRFbGVtZW50U2libGluZyAmJiB0ZXh0Lm5leHRFbGVtZW50U2libGluZy5tYXRjaGVzKCcuV0JfdGV4dCcpKSByZXR1cm47CiAgICAgIGNvbnN0IG1pZCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoYnV0dG9uLmdldEF0dHJpYnV0ZSgnYWN0aW9uLWRhdGEnKSkuZ2V0KCdtaWQnKTsKICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlcXVlc3QuZ2V0TG9uZ1RleHQobWlkKTsKICAgICAgY29uc3QgZnVsbCA9IHRleHQuY2xvbmVOb2RlKGZhbHNlKTsKICAgICAgZnVsbC5zZXRBdHRyaWJ1dGUoJ25vZGUtdHlwZScsIGZ1bGwuZ2V0QXR0cmlidXRlKCdub2RlLXR5cGUnKSArICdfZnVsbCcpOwogICAgICBkb20uY29udGVudChmdWxsLCBodG1sKTsKICAgICAgdGV4dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShmdWxsLCB0ZXh0Lm5leHRTaWJsaW5nKTsKICAgICAgY29uc3QgY2hhckNvdW50ID0gZmVlZENoYXJhY3RlckNvdW50KGZ1bGwpOwogICAgICBjb25zdCBsaW5lQnJlYWtDb3VudCA9IGZ1bGwucXVlcnlTZWxlY3RvckFsbCgnYnInKS5sZW5ndGg7CiAgICAgIGNvbnN0IGZvbGRCdXR0b25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgZm9sZEJ1dHRvbkNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyIgaWdub3JlPSJpZ25vcmUiIGNsYXNzPSJXQl90ZXh0X29wdCIgYWN0aW9uLXR5cGU9ImZsX2ZvbGQiPjxpIGNsYXNzPSJXX2ZpY29uIGZpY29uX2Fycm93X3VwIj5kPC9pPjwvYT4nOwogICAgICBjb25zdCBjb3VudFRpcCA9IGkxOG4udGV4dENvdW50LnJlcGxhY2UoJ3sxfScsICgpID0+IGNoYXJDb3VudCA+IDEwMDAgPyBNYXRoLnJvdW5kKGNoYXJDb3VudCAvIDEwMCkgKiAxMDAgOiBNYXRoLnJvdW5kKGNoYXJDb3VudCAvIDEwKSAqIDEwKTsKICAgICAgYnV0dG9uLmluc2VydEJlZm9yZShkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb3VudFRpcCksIGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdpJykpOwogICAgICAvLyDoh6rliqjlsZXlvIDkuI3otoXov4fmjIflrprlrZfmlbDnmoTlvq7ljZoKICAgICAgY29uc3QgZXhwYW5kTG9uZyA9IHlhd2YucnVsZXMuZmVlZHMuY29udGVudC5leHBhbmRMb25nOwogICAgICBpZiAoZXhwYW5kTG9uZy5nZXRDb25maWcoKSAmJiBleHBhbmRMb25nLnJlZi5jb3VudC5nZXRDb25maWcoKSA+PSBjaGFyQ291bnQgKyBsaW5lQnJlYWtDb3VudCAqIChleHBhbmRMb25nLnJlZi5ici5nZXRDb25maWcoKSAtIDEpKSB7CiAgICAgICAgdGV4dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICB9IGVsc2UgewogICAgICAgIGZ1bGwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBjb25zdCBmb2xkQnV0dG9uID0gZm9sZEJ1dHRvbkNvbnRhaW5lci5maXJzdENoaWxkOwogICAgICAgIGZvbGRCdXR0b24uaW5zZXJ0QmVmb3JlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGkxOG4uZm9sZFRleHQpLCBmb2xkQnV0dG9uLmZpcnN0Q2hpbGQpOwogICAgICAgIGZ1bGwuYXBwZW5kQ2hpbGQoZm9sZEJ1dHRvbik7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIFByb21pc2UuYWxsKHVuZm9sZGluZykudGhlbigoKSA9PiB7IH0pOwogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9maWx0ZXIvZmlsdGVyLmpzCgo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGkxOG4uZmlsdGVyVGFiVGl0bGUgPSB7CiAgICBjbjogJ+W+ruWNmui/h+a7pCcsCiAgICB0dzogJ+W+ruWNmuevqemBuCcsCiAgICBlbjogJ0ZpbHRlcicsCiAgfTsKCiAgY29uc3QgZmlsdGVyID0geWF3Zi5ydWxlcy5maWx0ZXIgPSB7fTsKICBmaWx0ZXIuZmlsdGVyID0gcnVsZS5UYWIoewogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmlsdGVyVGFiVGl0bGUsCiAgICBwYWdlbWVudTogdHJ1ZSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvZmlsdGVyL2ZvbGxvd2luZy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBjb25maWcgPSB5YXdmLmNvbmZpZzsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0OwogIGNvbnN0IGRvd25sb2FkID0geWF3Zi5kb3dubG9hZDsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CgogIGNvbnN0IGZpbHRlciA9IHlhd2YucnVsZXMuZmlsdGVyOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGNvbnN0IGZ1bmN0b29scyA9IHV0aWwuZnVuY3Rvb2xzOwogIGNvbnN0IHVpID0gdXRpbC51aTsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgZ2V0Q29udGV4dCA9IGZ1bmN0b29scy5vbmNlKGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IGZvbGxvd0NvbmZpZyA9IGF3YWl0IGNvbmZpZy5wb29sKCdGb2xsb3cnLCB7CiAgICAgIHVpZDogaW5pdC5wYWdlLiRDT05GSUcudWlkLAogICAgICBpc0xvY2FsOiB0cnVlLAogICAgfSk7CiAgICBjb25zdCBmZXRjaERhdGEgPSBuZXcgcnVsZS5jbGFzcy5PZmZzY3JlZW5Db25maWdJdGVtKHsKICAgICAgaWQ6ICdmZXRjaERhdGEnLAogICAgICBjb25maWdQb29sOiBmb2xsb3dDb25maWcsCiAgICAgIGdldCBpbml0aWFsKCkgeyByZXR1cm4ge307IH0sCiAgICAgIHNldENvbmZpZyh2YWx1ZSkgewogICAgICAgIHZhbHVlLnRpbWVzdGFtcCA9IERhdGUubm93KCk7CiAgICAgICAgcmV0dXJuIHN1cGVyLnNldENvbmZpZyh2YWx1ZSk7CiAgICAgIH0sCiAgICAgIHJlc3RhcnQoKSB7CiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmdldENvbmZpZygpOwogICAgICAgIHZhbHVlLnN0YXJ0VGltZSA9IERhdGUubm93KCk7CiAgICAgICAgdGhpcy5zZXRDb25maWcodmFsdWUpOwogICAgICAgIHJldHVybiB2YWx1ZS5zdGFydFRpbWU7CiAgICAgIH0sCiAgICAgIGlzT3V0RGF0ZWQoKSB7CiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmdldENvbmZpZygpOwogICAgICAgIGlmICghdmFsdWUudGltZXN0YW1wKSByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHZhbHVlLnN0YXJ0VGltZSA8IERhdGUubm93KCkgLSA4NjRlNSAqIDM7CiAgICAgIH0sCiAgICAgIC8vIOWFtuWunuiuvue9ruivu+WGmeW5tuS4jeaYr+WQjOatpeeahO+8jOS9huaYr+S5n+ayoeS7gOS5iOabtOWlveeahOWKnuazleWwseaYr+S6hgogICAgICBnZXRMb2NrKCkgewogICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgICBjb25zdCBsb2NrID0gRGF0ZS5ub3coKSArIFsuLi5BcnJheSgxMDApXS5tYXAoXyA9PiBNYXRoLnJhbmRvbSgpICogMTAgfCAwKS5qb2luKCcnKTsKICAgICAgICB2YWx1ZS5sb2NrID0gbG9jazsKICAgICAgICB0aGlzLnNldENvbmZpZyh2YWx1ZSk7CiAgICAgICAgcmV0dXJuIGxvY2s7CiAgICAgIH0sCiAgICAgIGFzc2VydExvY2sobG9jaykgewogICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgICBpZiAodmFsdWUubG9jayAhPT0gbG9jaykgewogICAgICAgICAgdGhyb3cgRXJyb3IoJ0ZldGNoaW5nIGZvbGxvdyBsaXN0IGVycm9yOiBMb2NrIGxvc3QnKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRvdWNoVGltZXN0YW1wKCkgewogICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgICB0aGlzLnNldENvbmZpZyh2YWx1ZSk7CiAgICAgICAgcmV0dXJuIHZhbHVlLmxvY2s7CiAgICAgIH0sCiAgICAgIG5vcm1hbGl6ZSh2YWx1ZSkgewogICAgICAgIGNvbnN0IGJhc2UgPSAoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIHt9OwogICAgICAgICAgaWYgKCF2YWx1ZS50aW1lc3RhbXApIHJldHVybiB7fTsKICAgICAgICAgIGlmICh2YWx1ZS50aW1lc3RhbXAgPiBEYXRlLm5vdygpICsgNjBlMykgcmV0dXJuIHt9OwogICAgICAgICAgaWYgKHZhbHVlLnRpbWVzdGFtcCA8IERhdGUubm93KCkgLSA4NjQwMGUzICogNykgcmV0dXJuIHt9OwogICAgICAgICAgaWYgKHZhbHVlLmFsbFBhZ2VzICYmICF2YWx1ZS5zdGFydFRpbWUpIHsKICAgICAgICAgICAgdmFsdWUuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh2YWx1ZS5wZW5kaW5nUGFnZXMpIHsKICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlLmxpc3QpKSByZXR1cm4ge307CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfSgpKTsKICAgICAgICBiYXNlLndlaWJvVmVyc2lvbiA9IHlhd2YuV0VJQk9fVkVSU0lPTjsKICAgICAgICByZXR1cm4gYmFzZTsKICAgICAgfSwKICAgIH0pOwogICAgY29uc3QgbGFzdExpc3QgPSBuZXcgcnVsZS5jbGFzcy5PZmZzY3JlZW5Db25maWdJdGVtKHsKICAgICAgaWQ6ICdsYXN0TGlzdCcsCiAgICAgIGNvbmZpZ1Bvb2w6IGZvbGxvd0NvbmZpZywKICAgICAgZ2V0IGluaXRpYWwoKSB7IHJldHVybiBudWxsOyB9LAogICAgICBub3JtYWxpemUodmFsdWUpIHsKICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoIXZhbHVlLnRpbWVzdGFtcCkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlLmxpc3QpKSByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgIH0sCiAgICB9KTsKICAgIGNvbnN0IGxhc3RDaGFuZ2UgPSBuZXcgcnVsZS5jbGFzcy5PZmZzY3JlZW5Db25maWdJdGVtKHsKICAgICAgaWQ6ICdsYXN0Q2hhbmdlJywKICAgICAgY29uZmlnUG9vbDogZm9sbG93Q29uZmlnLAogICAgICBnZXQgaW5pdGlhbCgpIHsgcmV0dXJuIG51bGw7IH0sCiAgICAgIG5vcm1hbGl6ZSh2YWx1ZSkgewogICAgICAgIGlmICghdmFsdWUpIHJldHVybiBudWxsOwogICAgICAgIGlmICghdmFsdWUudGltZXN0YW1wKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUuYWRkKSkgdmFsdWUuYWRkID0gW107CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlLmxvc3QpKSB2YWx1ZS5sb3N0ID0gW107CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlLnJlbmFtZSkpIHZhbHVlLnJlbmFtZSA9IFtdOwogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfSwKICAgIH0pOwogICAgY29uc3QgY29uZmlncyA9IHsgZmV0Y2hEYXRhLCBsYXN0TGlzdCwgbGFzdENoYW5nZSB9OwogICAgcmV0dXJuIGNvbmZpZ3M7CiAgfSk7CgogIGxldCBmb2xsb3dpbmdDb250ZXh0ID0gbnVsbDsKICBpbml0Lm9uUmVhZHkoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgZm9sbG93aW5nQ29udGV4dCA9IGF3YWl0IGdldENvbnRleHQoKTsKICB9LCB7IHByaW9yaXR5OiB1dGlsLnByaW9yaXR5LkJFRk9SRSB9KTsKCiAgLyoqIEB0eXBlZGVmIHsnaW5hY3RpdmUnfCd3YWl0aW5nJ3wnc3RhcnRpbmcnfCdwZW5kaW5nJ3wncnVubmluZyd8J3J1bm5pbmdfZmFpbCd8J2NoZWNraW5nJ3wnY2hlY2tpbmdfZmFpbCd9IFVwZGF0ZVN0YXR1c1N0YXR1cyAqLwogIC8qKiBAdHlwZSB7eyBzdGF0dXM6IFVwZGF0ZVN0YXR1c1N0YXR1cywgY3VycmVudDogbnVtYmVyLCB0b3RhbDogbnVtYmVyLCByZXN1bHQ6IG51bWJlciB9fSAqLwogIGNvbnN0IHVwZGF0ZVN0YXR1cyA9IHsKICAgIHN0YXR1czogJ2luYWN0aXZlJywKICAgIGN1cnJlbnQ6IDAsCiAgICB0b3RhbDogMCwKICAgIHJlc3VsdDogMCwKICB9OwogIGNvbnN0IHJlcG9ydFVwZGF0ZVN0YXR1cyA9IGZ1bmN0aW9uICgvKiogQHR5cGUge1VwZGF0ZVN0YXR1c1N0YXR1c30gKi9zdGF0dXMpIHsKICAgIGNvbnN0IHsgZmV0Y2hEYXRhIH0gPSBmb2xsb3dpbmdDb250ZXh0OwogICAgY29uc3QgZmV0Y2hDb250ZXh0ID0gZmV0Y2hEYXRhLmdldENvbmZpZygpOwogICAgT2JqZWN0LmFzc2lnbih1cGRhdGVTdGF0dXMsIHsKICAgICAgc3RhdHVzLAogICAgICBjdXJyZW50OiBmZXRjaENvbnRleHQuY3VycmVudFBhZ2UgfHwgMCwKICAgICAgdG90YWw6IChmZXRjaENvbnRleHQuYWxsUGFnZXMgfHwgW10pLmxlbmd0aCwKICAgICAgcmVzdWx0OiAoZmV0Y2hDb250ZXh0Lmxpc3QgfHwgW10pLmxlbmd0aCwKICAgIH0pOwogICAgZm9sbG93aW5nLmF1dG9DaGVja0ZvbGxvd2luZy5yZWYuZmV0Y2hpbmcucmVuZGVyQWxsVmFsdWVzKCk7CiAgfTsKCiAgLy8g6I635Y+W56ys5LiA6aG155qE5pWw5o2uCiAgY29uc3QgZmV0Y2hJbml0aWFsaXplID0gYXN5bmMgZnVuY3Rpb24gKCkgewogICAgY29uc3QgeyBmZXRjaERhdGEgfSA9IGZvbGxvd2luZ0NvbnRleHQ7CiAgICBjb25zdCBsb2NrID0gZmV0Y2hEYXRhLnRvdWNoVGltZXN0YW1wKCk7CiAgICBmZXRjaERhdGEucmVzdGFydCgpOwogICAgY29uc3QgeyBhbGxQYWdlcywgZm9sbG93SW5QYWdlIH0gPSBhd2FpdCByZXF1ZXN0LmdldEZvbGxvd2luZ1BhZ2UoaW5pdC5wYWdlLiRDT05GSUcudWlkKTsKICAgIGZldGNoRGF0YS5hc3NlcnRMb2NrKGxvY2spOwogICAgY29uc3QgZmV0Y2hDb250ZXh0ID0gZmV0Y2hEYXRhLmdldENvbmZpZygpOwogICAgZmV0Y2hDb250ZXh0LmFsbFBhZ2VzID0gYWxsUGFnZXM7CiAgICBmZXRjaENvbnRleHQubGlzdCA9IGZvbGxvd0luUGFnZTsKICAgIGZldGNoQ29udGV4dC5jdXJyZW50UGFnZSA9IDE7CiAgICBmZXRjaERhdGEuc2V0Q29uZmlnKGZldGNoQ29udGV4dCk7CiAgfTsKICAvLyDojrflj5blkI7kuIDpobXnmoTmlbDmja4KICBjb25zdCBmZXRjaE5leHQgPSBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICBjb25zdCB7IGZldGNoRGF0YSB9ID0gZm9sbG93aW5nQ29udGV4dDsKICAgIGNvbnN0IGxvY2sgPSBmZXRjaERhdGEudG91Y2hUaW1lc3RhbXAoKTsKICAgIGNvbnN0IG9sZEZldGNoQ29udGV4dCA9IGZldGNoRGF0YS5nZXRDb25maWcoKTsKICAgIGNvbnN0IGN1cnJlbnRQYWdlID0gb2xkRmV0Y2hDb250ZXh0LmN1cnJlbnRQYWdlOwogICAgY29uc3QgbmV4dFBhZ2UgPSBvbGRGZXRjaENvbnRleHQuYWxsUGFnZXNbY3VycmVudFBhZ2VdOwogICAgY29uc3QgeyBmb2xsb3dJblBhZ2UgfSA9IGF3YWl0IHJlcXVlc3QuZ2V0Rm9sbG93aW5nUGFnZShpbml0LnBhZ2UuJENPTkZJRy51aWQsIG5leHRQYWdlKTsKICAgIGZldGNoRGF0YS5hc3NlcnRMb2NrKGxvY2spOwogICAgY29uc3QgZmV0Y2hDb250ZXh0ID0gZmV0Y2hEYXRhLmdldENvbmZpZygpOwogICAgZmV0Y2hDb250ZXh0Lmxpc3QucHVzaCguLi5mb2xsb3dJblBhZ2UpOwogICAgZmV0Y2hDb250ZXh0LmN1cnJlbnRQYWdlKys7CiAgICBmZXRjaERhdGEuc2V0Q29uZmlnKGZldGNoQ29udGV4dCk7CiAgfTsKICAvLyDmo4Dmn6XmmK/lkKblt7Lnu4/ojrflj5blrozmr5UKICBjb25zdCBoYXNOZXh0UGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgIGNvbnN0IHsgZmV0Y2hEYXRhIH0gPSBmb2xsb3dpbmdDb250ZXh0OwogICAgY29uc3QgZmV0Y2hDb250ZXh0ID0gZmV0Y2hEYXRhLmdldENvbmZpZygpOwogICAgcmV0dXJuIGZldGNoQ29udGV4dC5hbGxQYWdlcy5sZW5ndGggPiBmZXRjaENvbnRleHQuY3VycmVudFBhZ2U7CiAgfTsKICAvLyDmr5Tlr7nmlrDml6fliJfooajkuI3lkIwKICBjb25zdCBjaGVja0xpc3REaWZmID0gZnVuY3Rpb24gKGxpc3QsIG5ld0xpc3QsIGxhc3RDaGFuZ2UpIHsKICAgIC8vIOWmguaenOS5i+WJjeayoeacieaVsOaNru+8jOmCo+S5iOS5n+WwseS4jeeUqOWvueavlAogICAgaWYgKCFBcnJheS5pc0FycmF5KGxpc3QpKSByZXR1cm4geyBhZGQ6IFtdLCBsb3N0OiBbXSwgcmVuYW1lOiBbXSB9OwogICAgY29uc3QgeyBhZGQ6IGxhc3RBZGQgPSBbXSwgbG9zdDogbGFzdExvc3QgPSBbXSwgcmVuYW1lOiBsYXN0UmVuYW1lID0gW10gfSA9IGxhc3RDaGFuZ2UgfHwge307CiAgICBjb25zdCBzYW1lRm9sbG93SXRlbSA9ICh4LCB5KSA9PiB4LmlkID09PSB5LmlkOwogICAgY29uc3QgZ2V0TmFtZSA9IHggPT4geC5uYW1lLnJlcGxhY2UoL0B8XHM/XCguKlwpL2csICcnKTsKICAgIC8vIOWFiOagueaNruWOn+acieWQjeWNleWSjOacquaPkOS6pOeahOabtOaUueaBouWkjeabtOaXqeeahOWQjeWNlQogICAgY29uc3Qgb2xkTGlzdCA9IGxpc3QKICAgICAgLmZpbHRlcih4ID0+ICFsYXN0QWRkLmZpbmQoeSA9PiBzYW1lRm9sbG93SXRlbSh4LCB5KSkpLmNvbmNhdChsYXN0TG9zdCkKICAgICAgLm1hcCh4ID0+IChsYXN0UmVuYW1lLmZpbmQociA9PiBzYW1lRm9sbG93SXRlbShyLm9sZCwgeCkpIHx8IHsgb2xkOiB4IH0pLm9sZCk7CiAgICAvLyDnhLblkI7lsIbmlrDnmoTlkI3ljZXkuI7mm7Tml6nnmoTlkI3ljZXmr5TovoMKICAgIGNvbnN0IGFkZCA9IG5ld0xpc3QuZmlsdGVyKHggPT4gIW9sZExpc3QuZmluZCh5ID0+IHNhbWVGb2xsb3dJdGVtKHksIHgpKSk7CiAgICBjb25zdCBsb3N0ID0gb2xkTGlzdC5maWx0ZXIoeSA9PiAhbmV3TGlzdC5maW5kKHggPT4gc2FtZUZvbGxvd0l0ZW0oeSwgeCkpKTsKICAgIGNvbnN0IHJlbmFtZSA9IG9sZExpc3QubWFwKG9sZEl0ZW0gPT4gewogICAgICBpZiAob2xkSXRlbS50eXBlICE9PSAndXNlcicpIHJldHVybiBudWxsOwogICAgICBjb25zdCBuZXdJdGVtID0gbmV3TGlzdC5maW5kKG4gPT4gc2FtZUZvbGxvd0l0ZW0obiwgb2xkSXRlbSkpOwogICAgICBpZiAoIW5ld0l0ZW0pIHJldHVybiBudWxsOwogICAgICBjb25zdCBvbGROYW1lID0gZ2V0TmFtZShvbGRJdGVtKTsKICAgICAgY29uc3QgbmV3TmFtZSA9IGdldE5hbWUobmV3SXRlbSk7CiAgICAgIGlmIChvbGROYW1lID09PSBuZXdOYW1lKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIG5ld0l0ZW0sIHsKICAgICAgICBvbGQ6IG9sZEl0ZW0sCiAgICAgICAgbmV3OiBuZXdJdGVtLAogICAgICB9KTsKICAgIH0pLmZpbHRlcih2ID0+IHYpOwogICAgcmV0dXJuIHsgYWRkLCBsb3N0LCByZW5hbWUgfTsKICB9OwoKICAvLyDljrvpmaTph43lpI3mlbDmja4KICBjb25zdCByZW1vdmVEdXBsaWNhdGUgPSBmdW5jdGlvbiAobGlzdCkgewogICAgaWYgKCFBcnJheS5pc0FycmF5KGxpc3QpKSByZXR1cm4gW107CiAgICBjb25zdCBzZWVuID0gbmV3IFNldCgpOwogICAgcmV0dXJuIGxpc3QuZmlsdGVyKGl0ZW0gPT4gewogICAgICBpZiAoc2Vlbi5oYXMoaXRlbS5pZCkpIHJldHVybiBmYWxzZTsKICAgICAgc2Vlbi5hZGQoaXRlbS5pZCk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSk7CiAgfTsKCiAgLy8g6Kem5Y+R5Yi35paw5rWB56iL77yM5aaC5p6c5q2k5pe25bey57uP5a6M5oiQ5YiZ5by65Yi26YeN5paw5byA5aeLCiAgY29uc3QgdXBkYXRlRm9sbG93TGlzdCA9IGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgIHJlcG9ydFVwZGF0ZVN0YXR1cygnc3RhcnRpbmcnKTsKICAgIGNvbnN0IHsgZmV0Y2hEYXRhLCBsYXN0TGlzdCwgbGFzdENoYW5nZSB9ID0gZm9sbG93aW5nQ29udGV4dDsKCiAgICAvLyDlpoLmnpzov57nu60gMTAg5YiG6ZKf5rKh5pyJ5pu05paw77yM6YKj5LmI5Y+v6IO95piv5LmL5YmN6LSf6LSj5pu05paw55qE6YKj5Liq6aG16Z2i6KKr5YWz6Zet5oiW6ICF5Ye66ZSZ5LqGCiAgICBjb25zdCB7IHRpbWVzdGFtcCwgbG9jayB9ID0gZmV0Y2hEYXRhLmdldENvbmZpZygpOwogICAgaWYgKHRpbWVzdGFtcCA+IERhdGUubm93KCkgLSA2MDBlMyAmJiBsb2NrKSB7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmIChmZXRjaERhdGEuZ2V0Q29uZmlnKCkudGltZXN0YW1wID09PSB0aW1lc3RhbXApIHVwZGF0ZUZvbGxvd0xpc3QoKTsKICAgICAgfSwgNjAwZTMpOwogICAgICByZXBvcnRVcGRhdGVTdGF0dXMoJ3BlbmRpbmcnKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIOWmguaenOS5i+WJjeiOt+WPluaVsOaNruS9v+eUqOeahOW+ruWNmueJiOacrOWSjOeOsOWcqOS4jeS4gOagt++8jOmCo+S5iOaVsOaNruimgeS4ouW8gwogICAgaWYgKGZldGNoRGF0YS5nZXRDb25maWcoKS53ZWlib1ZlcnNpb24gIT09IHlhd2YuV0VJQk9fVkVSU0lPTikgewogICAgICBmZXRjaERhdGEuc2V0Q29uZmlnKHt9KTsKICAgIH0KCiAgICB0cnkgewogICAgICBpZiAoZmV0Y2hEYXRhLmlzT3V0RGF0ZWQoKSkgewogICAgICAgIGZldGNoRGF0YS5zZXRDb25maWcoe30pOwogICAgICB9CiAgICAgIGNvbnN0IGxvY2sgPSBmZXRjaERhdGEuZ2V0TG9jaygpOwogICAgICB1dGlsLmRlYnVnKCdGZXRjaCBGb2xsb3c6IHN0YXJ0IGZvbGxvdyBmZXRjaGluZycpOwogICAgICAvLyDlpoLmnpzkuYvliY3ojrflj5bliLDkuIDljYrvvIzpgqPkuYjlsLHnu6fnu63kuYvliY3nmoTlt6XkvZzvvIzlkKbliJnlvIDlp4vmlrDlt6XkvZwKICAgICAgaWYgKCFmZXRjaERhdGEuZ2V0Q29uZmlnKCkuYWxsUGFnZXMpIHsKICAgICAgICB1dGlsLmRlYnVnKCdGZXRjaCBGb2xsb3c6IGZldGNoIGZpcnN0IHBhZ2UnKTsKICAgICAgICBmZXRjaERhdGEuYXNzZXJ0TG9jayhsb2NrKTsKICAgICAgICBhd2FpdCBmZXRjaEluaXRpYWxpemUoKTsKICAgICAgICB1dGlsLmRlYnVnKCdGZXRjaCBGb2xsb3c6IGZldGNoIGZpcnN0IGRvbmUnKTsKICAgICAgfQogICAgICB3aGlsZSAoaGFzTmV4dFBhZ2UoKSkgewogICAgICAgIHJlcG9ydFVwZGF0ZVN0YXR1cygncnVubmluZycpOwogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1ZTMpKTsKICAgICAgICB1dGlsLmRlYnVnKCdGZXRjaCBGb2xsb3c6IGZldGNoIG5leHQgcGFnZScpOwogICAgICAgIGZldGNoRGF0YS5hc3NlcnRMb2NrKGxvY2spOwogICAgICAgIGF3YWl0IGZldGNoTmV4dCgpOwogICAgICAgIHV0aWwuZGVidWcoJ0ZldGNoIEZvbGxvdzogZmV0Y2ggbmV4dCBkb25lJyk7CiAgICAgIH0KICAgICAgZmV0Y2hEYXRhLmFzc2VydExvY2sobG9jayk7CiAgICAgIHV0aWwuZGVidWcoJ0ZldGNoIEZvbGxvdzogZmV0Y2ggZXZlcnl0aGluZyBkb25lJyk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHV0aWwuZGVidWcoZSk7CiAgICAgIHV0aWwuZGVidWcoJ0ZldGNoIEZvbGxvdzogZmV0Y2hpbmcgZm9sbG93aW5nIGZhaWxlZCcpOwogICAgICByZXBvcnRVcGRhdGVTdGF0dXMoJ3J1bm5pbmdfZmFpbCcpOwogICAgICByZXR1cm47CiAgICB9CgogICAgdHJ5IHsKICAgICAgcmVwb3J0VXBkYXRlU3RhdHVzKCdjaGVja2luZycpOwogICAgICBjb25zdCBuZXdMaXN0ID0gcmVtb3ZlRHVwbGljYXRlKGZldGNoRGF0YS5nZXRDb25maWcoKS5saXN0KTsKICAgICAgY29uc3Qgb2xkTGlzdCA9IGxhc3RMaXN0LmdldENvbmZpZygpOwogICAgICBjb25zdCBjaGFuZ2VMaXN0ID0gKGxhc3RDaGFuZ2UuZ2V0Q29uZmlnKCkgfHwge30pOwogICAgICBjb25zdCB7IGFkZCwgbG9zdCwgcmVuYW1lIH0gPSBjaGVja0xpc3REaWZmKG9sZExpc3QgJiYgb2xkTGlzdC5saXN0LCBuZXdMaXN0LCBjaGFuZ2VMaXN0KTsKCiAgICAgIGNvbnN0IGZpbmlzaFRpbWUgPSBEYXRlLm5vdygpOwogICAgICBsYXN0TGlzdC5zZXRDb25maWcoeyB0aW1lc3RhbXA6IGZpbmlzaFRpbWUsIGxpc3Q6IG5ld0xpc3QgfSk7CiAgICAgIGlmIChhZGQubGVuZ3RoIHx8IGxvc3QubGVuZ3RoIHx8IHJlbmFtZS5sZW5ndGgpIHsKICAgICAgICBsYXN0Q2hhbmdlLnNldENvbmZpZyh7IHRpbWVzdGFtcDogZmluaXNoVGltZSwgYWRkLCBsb3N0LCByZW5hbWUgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGFzdENoYW5nZS5zZXRDb25maWcobnVsbCk7CiAgICAgIH0KICAgICAgZmV0Y2hEYXRhLnNldENvbmZpZyh7fSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHV0aWwuZGVidWcoJ0ZldGNoIEZvbGxvdzogZXJyb3Igd2hpbGUgdXBkYXRlIHJlc3VsdCcpOwogICAgICB1dGlsLmRlYnVnKGUpOwogICAgICByZXBvcnRVcGRhdGVTdGF0dXMoJ2NoZWNraW5nX2ZhaWwnKTsKICAgIH0KICAgIHJlcG9ydFVwZGF0ZVN0YXR1cygnaW5hY3RpdmUnKTsKICB9OwoKICBjb25zdCBjbGVhckZvbGxvd0xpc3QgPSBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICBjb25zdCB7IGZldGNoRGF0YSwgbGFzdExpc3QsIGxhc3RDaGFuZ2UgfSA9IGZvbGxvd2luZ0NvbnRleHQ7CiAgICBjb25zdCB7IHRpbWVzdGFtcCwgbG9jayB9ID0gZmV0Y2hEYXRhLmdldENvbmZpZygpIHx8IHt9OwogICAgdXRpbC5kZWJ1ZygnRmV0Y2ggRm9sbG93OiBjbGVhciBmZXRjaGluZyBkYXRhLicpOwogICAgaWYgKHRpbWVzdGFtcCA+IERhdGUubm93KCkgLSA2MDBlMyAmJiBsb2NrKSB7CiAgICAgIHV0aWwuZGVidWcoJ0ZldGNoIEZvbGxvdzogRmV0Y2hpbmcgc2VlbXMgaW4gcHJvZ3Jlc3MsIGFuZCB3b3VsZCBicmVhaycpOwogICAgfQogICAgZmV0Y2hEYXRhLnNldENvbmZpZyh7fSk7CiAgICBsYXN0TGlzdC5zZXRDb25maWcobnVsbCk7CiAgICBsYXN0Q2hhbmdlLnNldENvbmZpZyhudWxsKTsKICB9OwoKICBjb25zdCBleHBvcnRGb2xsb3dMaXN0ID0gYXN5bmMgZnVuY3Rpb24gKHsgdGltZXN0YW1wLCBsaXN0IH0pIHsKICAgIGNvbnN0IGNzdkl0ZW0gPSBzdHJpbmcgPT4gewogICAgICBpZiAoIS9bIixcc10vLnRlc3Qoc3RyaW5nKSkgcmV0dXJuIHN0cmluZzsKICAgICAgcmV0dXJuICciJyArIHN0cmluZy5yZXBsYWNlKC8iL2csICciIicpICsgJyInOwogICAgfTsKICAgIC8vIOi/memHjOaIkeS7rOeUqOS4iiBCT00g5Y+v5Lul6I635b6X5pu05aW955qE5YW85a655oCnCiAgICAvLyDlnKjliY3pnaLmlL7kuIDliJfluo/lj7fvvIzov5nmoLfljbPkvr/kuI3og73lpITnkIYgQk9NIO+8jOS5n+WPr+S7pei6suW8gOacgOWJjemdouS4gOihjOeahOW6j+aVsO+8jOS4jeS8muWHuuS7gOS5iOmXrumimAogICAgY29uc3QgY29udGVudCA9ICdcdWZlZmYjLG5hbWUsaG9tZXBhZ2UsYXZhdGFyXHJcbicgKyBsaXN0Lm1hcCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgY29uc3QgbmFtZSA9IGNzdkl0ZW0oaXRlbS5kZXNjcmlwdGlvbik7CiAgICAgIGNvbnN0IGhvbWVwYWdlID0gY3N2SXRlbShuZXcgVVJMKGl0ZW0udXJsLCAnaHR0cHM6Ly93ZWliby5jb20nKS5ocmVmKTsKICAgICAgY29uc3QgYXZhdGFyID0gY3N2SXRlbShuZXcgVVJMKGl0ZW0uYXZhdGFyLCAnaHR0cHM6Ly93ZWliby5jb20nKS5ocmVmKTsKICAgICAgcmV0dXJuIFtpbmRleCArIDEsIG5hbWUsIGhvbWVwYWdlLCBhdmF0YXJdLmpvaW4oJywnKTsKICAgIH0pLmpvaW4oJ1xyXG4nKSArICdcclxuJzsgLy8gQ1JMRiDmjaLooYznrKbmlK/mjIHmlYjmnpzmnIDlpb3vvIzogIzkuJTkuZ/mm7TlkIjkuY7op4TojIMKICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTogJ3RleHQvY3N2JyB9KTsKICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWy1dfFQuKi9nLCAnJyk7CiAgICBjb25zdCBmaWxlbmFtZSA9IGRvd25sb2FkLmZpbGVuYW1lKCdmb2xsb3dpbmctJyArIGluaXQucGFnZS4kQ09ORklHLnVpZCArICctJyArIGRhdGUgKyAnLmNzdicpOwogICAgZG93bmxvYWQuYmxvYih7IGJsb2IsIGZpbGVuYW1lIH0pOwogIH07CgogIGNvbnN0IGZvcm1hdExhc3RUaW1lID0gZnVuY3Rpb24gKHRpbWVzdGFtcCkgewogICAgaWYgKCF0aW1lc3RhbXApIHJldHVybiBpMThuLmF1dG9DaGVja0ZvbGxvd2luZ05ldmVyOwogICAgY29uc3Qgb3B0aW9uID0geyB5ZWFyOiAnbnVtZXJpYycsIG1vbnRoOiAnbG9uZycsIGRheTogJ251bWVyaWMnLCBob3VyOiAnbnVtZXJpYycsIG1pbnV0ZTogJ251bWVyaWMnLCBzZWNvbmQ6ICdudW1lcmljJyB9OwogICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoaTE4bi5sYW5ndWFnZUNvZGUsIG9wdGlvbik7CiAgICByZXR1cm4gZm9ybWF0dGVyLmZvcm1hdChuZXcgRGF0ZSh0aW1lc3RhbXApKTsKICB9OwoKICBpMThuLmZvbGxvd2luZ0dyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+WFs+azqOeuoeeQhicsCiAgICB0dzogJ+mXnOazqOeuoeeQhicsCiAgICBlbjogJ0ZvbGxvd2luZycsCiAgfTsKCiAgY29uc3QgZm9sbG93aW5nID0gZmlsdGVyLmZvbGxvd2luZyA9IHt9OwogIGZvbGxvd2luZy5mb2xsb3dpbmcgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogZmlsdGVyLmZpbHRlciwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZvbGxvd2luZ0dyb3VwVGl0bGUsCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgYXV0b0NoZWNrRm9sbG93aW5nOiB7CiAgICAgIGNuOiAn6Ieq5Yqo5qOA5p+l5YWz5rOo5YiX6KGo5bm25o+Q56S65Y+Y5YyWfHt7ZnJlcXVlbmN5fX17e2l9fXx8e3tidXR0b25zfX18fHt7ZmV0Y2hpbmd9fScsCiAgICAgIHR3OiAn6Ieq5YuV5qqi5p+l6Zec5rOo5riF5Zau5Lim5o+Q56S66K6K5YyWfHt7ZnJlcXVlbmN5fX17e2l9fXx8e3tidXR0b25zfX18fHt7ZmV0Y2hpbmd9fScsCiAgICAgIGVuOiAnQXV0b21hdGljYWxseSBjaGVja3MgYW5kIHByb21wdCBhbnkgY2hhbmdlcyBhYm91dCBmb2xsb3dpbmcgbGlzdCB8IHt7ZnJlcXVlbmN5fX17e2l9fXx8e3tidXR0b25zfX18fHt7ZmV0Y2hpbmd9fScsCiAgICB9LAogICAgYXV0b0NoZWNrRm9sbG93aW5nRGV0YWlsOiB7CiAgICAgIGNuOiAn5byA5ZCv5pys5Yqf6IO95ZCO6ISa5pys5Lya5q+P6ZqU5LiA5q615pe26Ze077yM5qOA5p+l5oKo55qE5YWz5rOo5YiX6KGo77yM5bm25ZKM5LiK5LiA5qyh5b6X5Yiw55qE57uT5p6c5q+U6L6D77yM5bCG5LiN5ZCM5LmL5aSE5bGV56S65Ye65p2l44CC6ISa5pys5qOA5p+l5YWz5rOo5YiX6KGo5Y+q6IO95YOP5oKo5Zyo572R6aG15Lit5qOA5p+l5YWz5rOo5YiX6KGo5LiA5qC377yM5LiA6aG15LiA6aG155qE57+755yL77yM5Zug5q2k5qOA5p+l5Y+v6IO96ZyA6KaB6L6D6ZW/55qE5pe26Ze077yM5aaC5p6c5oKo5YWz5rOo5LqG5aSn6YeP55qE5biQ5Y+377yM6K+36ICD6JmR6ZmN5L2O6Ieq5Yqo5qOA5p+l55qE6aKR546H44CCJywKICAgIH0sCiAgICBhdXRvQ2hlY2tGb2xsb3dpbmcxOiB7IGNuOiAn5q+P5aSpJywgdHc6ICfmr4/lpKknLCBlbjogJ2V2ZXJ5IGRheScgfSwKICAgIGF1dG9DaGVja0ZvbGxvd2luZzM6IHsgY246ICfmr4/kuInlpKknLCB0dzogJ+avj+S4ieWkqScsIGVuOiAnZXZlcnkgMyBkYXlzJyB9LAogICAgYXV0b0NoZWNrRm9sbG93aW5nNzogeyBjbjogJ+avj+WRqCcsIHR3OiAn5q+P6YCxJywgZW46ICdldmVyeSB3ZWVrJyB9LAogICAgYXV0b0NoZWNrRm9sbG93aW5nTGFzdFRpbWU6IHsgY246ICfmnKzlnLDmlbDmja7mm7TmlrDml7bpl7TvvJonLCB0dzogJ+acrOapn+izh+aWmeabtOaWsOaZgumWk++8micsIGVuOiAnTGFzdCBVcGRhdGUgVGltZTogJyB9LAogICAgYXV0b0NoZWNrRm9sbG93aW5nTmV2ZXI6IHsgY246ICfmmoLml6DmlbDmja4nLCB0dzogJ+aaq+eEoeizh+aWmScsIGVuOiAnTmV2ZXInIH0sCiAgICBhdXRvQ2hlY2tGb2xsb3dpbmdEb3dubG9hZDogeyBjbjogJ+WvvOWHuuWFs+azqOWIl+ihqCcsIHR3OiAn5Yyv5Ye66Zec5rOo5riF5ZauJywgZW46ICdFeHBvcnQgRm9sbG93IExpc3QnIH0sCiAgICBhdXRvQ2hlY2tGb2xsb3dpbmdDbGVhbjogeyBjbjogJ+a4hemZpOacrOWcsOaVsOaNricsIHR3OiAn5riF6Zmk5pys5qmf6LOH5paZJywgZW46ICdDbGVhciBEYXRhJyB9LAogICAgYXV0b0NoZWNrRm9sbG93aW5nTm93OiB7IGNuOiAn56uL5Y2z5pu05paw5pWw5o2uJywgdHc6ICfnq4vljbPmm7TmlrDos4fmlpknLCBlbjogJ1VwZGF0ZSBOb3cnIH0sCiAgICBhdXRvQ2hlY2tGb2xsb3dpbmdSdW5uaW5nOiB7IGNuOiAn77yI5q2j5Zyo5pu05paw77yaezF977yJJywgZW46ICcoVXBkYXRpbmc6IHsxfSknIH0sCiAgICBhdXRvQ2hlY2tGb2xsb3dpbmdEaWFsb2dUaXRsZTogeyBjbjogJ+WFs+azqOWIl+ihqOWPmOWMliAtIOiNr+aWuSAoWUFXRiknLCB0dzogJ+mXnOazqOa4heWWruiuiuWMliAtIOiXpeaWuSAoWUFXRiknLCBlbjogJ0ZvbGxvd2luZyBMaXN0IENoYW5nZXMgLSBZQVdGJyB9LAogICAgYXV0b0NoZWNrRm9sbG93aW5nVGlwOiB7CiAgICAgIGNuOiAn5oKo55qE5YWz5rOo5YiX6KGo6Ieq5LuO5LiK5qyh5qOA5p+l5bm256Gu6K6k6Iez5LuK5Y+R55Sf5LqG5aaC5LiL5Y+Y5YyW77yM6K+35oKo5aSN5p+l5bm256Gu6K6k77yaJywKICAgICAgdHc6ICfmgqjnmoTpl5zms6jmuIXllq7oh6rlvp7kuIrmrKHmqqLmn6XkuKbnorroqo3oh7Pku4rnmbznlJ/kuoblpoLkuIvororljJbvvIzoq4vmgqjopIfmn6XkuKbnorroqo3vvJonLAogICAgICBlbjogJ1lvdXIgZm9sbG93aW5nIGxpc3QgaGFkIGJlZW4gY2hhbmdlZCBzaW5jZSBsYXN0IGNoZWNraW5nLCBwbGVhc2UgcmV2aWV3IGFuZCBjb25maXJtOiAnLAogICAgfSwKICAgIGF1dG9DaGVja0ZvbGxvd2luZ0FkZDogeyBjbjogJ+aWsOWinuWmguS4i+WFs+azqCcsIHR3OiAn5paw5aKe5aaC5LiL6Zec5rOoJywgZW46ICdSZWNlbnQgRm9sbG93aW5nJyB9LAogICAgYXV0b0NoZWNrRm9sbG93aW5nTG9zdDogeyBjbjogJ+WHj+WwkeWmguS4i+WFs+azqCcsIHR3OiAn5rib5bCR5aaC5LiL6Zec5rOoJywgZW46ICdSZWNlbnQgVW5mb2xsb3dlZCcgfSwKICAgIGF1dG9DaGVja0ZvbGxvd2luZ1JlbmFtZTogeyBjbjogJ+WmguS4i+WFs+azqOS/ruaUueS6huaYteensCcsIHR3OiAn5aaC5LiL6Zec5rOo5L+u5pS55LqG5pqx56ixJywgZW46ICdSZWNlbnQgUmVuYW1lZCcgfSwKICAgIGF1dG9DaGVja0ZvbGxvd2luZ0NvbmZpcm1lZDogeyBjbjogJ+W3suehruiupCcsIHR3OiAn5bey56K66KqNJywgZW46ICdDb25maXJtZWQnIH0sCiAgICBjaGVja2luZ1Byb2dyZXNzOiB7CiAgICAgIGNuOiAn44CQe3N0YXR1c33jgJF7Y3VycmVudH0ve3RvdGFsfemhte+8jHtyZXN1bHR95YWz5rOoJywKICAgICAgdHc6ICfjgJB7c3RhdHVzfeOAkXtjdXJyZW50fS97dG90YWx96aCB77yMe3Jlc3VsdH3pl5zms6gnLAogICAgICBlbjogJ1t7c3RhdHVzfV0ge2N1cnJlbnR9L3t0b3RhbH0gcGFnZXPvvIx7cmVzdWx0fSBmb2xsb3dpbmdzJywKICAgIH0sCiAgICBjaGVja2luZ1Byb2dyZXNzSW5hY3RpdmU6IHsgY246ICflsJrmnKrlkK/liqgnLCB0dzogJ+WwmuacquWVn+WLlScsIGVuOiAnSW5hY3RpdmUnIH0sCiAgICBjaGVja2luZ1Byb2dyZXNzV2FpdGluZzogeyBjbjogJ+etieW+heW8gOWniycsIHR3OiAn562J5b6F6ZaL5aeLJywgZW46ICdXYWl0IHRvIFN0YXJ0JyB9LAogICAgY2hlY2tpbmdQcm9ncmVzc1N0YXJ0aW5nOiB7IGNuOiAn5q2j5Zyo5Yid5aeL5YyWJywgdHc6ICfmraPlnKjliJ3mnJ/ljJYnLCBlbjogJ0luaXRpYWxpemluZycgfSwKICAgIGNoZWNraW5nUHJvZ3Jlc3NQZW5kaW5nOiB7IGNuOiAn5q2j55Sx5YW25LuW6aG16Z2i6LSf6LSj5pu05pawJywgdHc6ICfmraPnlLHlhbbku5bpoIHpnaLosqDosqzmm7TmlrAnLCBlbjogJ1VwZGF0aW5nIGJ5IE90aGVyIFBhZ2VzJyB9LAogICAgY2hlY2tpbmdQcm9ncmVzc1J1bm5pbmc6IHsgY246ICfmraPlnKjojrflj5bmlbDmja4nLCB0dzogJ+ato+WcqOaTt+WPluizh+aWmScsIGVuOiAnRmV0Y2hpbmcnIH0sCiAgICBjaGVja2luZ1Byb2dyZXNzQ2hlY2tpbmc6IHsgY246ICfmraPlnKjmr5Tlr7nnu5PmnpwnLCB0dzogJ+ato+WcqOavlOWwjee1kOaenCcsIGVuOiAnQ29tcGFyaW5nIExpc3QnIH0sCiAgICBjaGVja2luZ1Byb2dyZXNzUnVubmluZ0ZhaWw6IHsgY246ICfmlbDmja7ojrflj5blh7rplJknLCB0dzogJ+izh+aWmeaTt+WPluWHuumMrycsIGVuOiAnRXJyb3IgV2hpbGUgRmV0Y2hpbmcnIH0sCiAgICBjaGVja2luZ1Byb2dyZXNzQ2hlY2tpbmdGYWlsOiB7IGNuOiAn57uT5p6c5q+U5a+55Ye66ZSZJywgdHc6ICfntZDmnpzmr5TlsI3lh7rpjK8nLCBlbjogJ0Vycm9yIFdoaWxlIENvbXBhcmluZycgfSwKICB9KTsKCiAgLyoqCiAgICogQHR5cGVkZWYge3sgaWQ6IHN0cmluZywgdHlwZTogJ3VzZXInfCdzdG9jayd8J3RvcGljJ3wndW5rbm93bicsIHVybDogc3RyaW5nLCBhdmF0YXI6IHN0cmluZywgbmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nIH19IEZvbGxvd0luZm8KICAgKiBAcGFyYW0ge3sgdGltZXN0YW1wOiBudW1iZXIsIGFkZDogRm9sbG93SW5mb1tdLCBsb3N0OiBGb2xsb3dJbmZvW10gfX0KICAgKi8KICBjb25zdCBzaG93Q2hhbmdlTGlzdCA9IGZ1bmN0aW9uICh7IHRpbWVzdGFtcCwgYWRkID0gW10sIGxvc3QgPSBbXSwgcmVuYW1lID0gW10gfSkgewogICAgbGV0IHJlc29sdmU7CiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UociA9PiB7IHJlc29sdmUgPSByOyB9KTsKICAgIGNvbnN0IGZvbGxvd0NoYW5nZURpYWxvZyA9IHVpLmRpYWxvZyh7CiAgICAgIGlkOiAneWF3Zi1mb2xsb3ctY2hhbmdlJywKICAgICAgdGl0bGU6IGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nRGlhbG9nVGl0bGUsCiAgICAgIC8qKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRhaW5lciAqLwogICAgICByZW5kZXIoY29udGFpbmVyLCB7IG9rOiBva0J1dHRvbiB9KSB7CiAgICAgICAgb2tCdXR0b24udGV4dENvbnRlbnQgPSBpMThuLmF1dG9DaGVja0ZvbGxvd2luZ0NvbmZpcm1lZDsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9Inlhd2YtZm9sbG93aW5nLW5vdGljZS1oZWFkZXIiPjwvZGl2PjxkaXYgY2xhc3M9Inlhd2YtZm9sbG93aW5nLW5vdGljZS1ib2R5Ij48ZGl2IGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1hZGQiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+PGRpdiBjbGFzcz0ieWF3Zi1mb2xsb3dpbmctYWRkLXRpdGxlIj48L2Rpdj48ZGl2IGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1hZGQtaXRlbXMiPjx1bCBjbGFzcz0ieWF3Zi1jb25maWctY29sbGVjdGlvbi1saXN0IHlhd2YtY29uZmlnLWNvbGxlY3Rpb24tdXNlci1pZCI+PC91bD48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1sb3N0IiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPjxkaXYgY2xhc3M9Inlhd2YtZm9sbG93aW5nLWxvc3QtdGl0bGUiPjwvZGl2PjxkaXYgY2xhc3M9Inlhd2YtZm9sbG93aW5nLWxvc3QtaXRlbXMiPjx1bCBjbGFzcz0ieWF3Zi1jb25maWctY29sbGVjdGlvbi1saXN0IHlhd2YtY29uZmlnLWNvbGxlY3Rpb24tdXNlci1pZCI+PC91bD48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1yZW5hbWUiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+PGRpdiBjbGFzcz0ieWF3Zi1mb2xsb3dpbmctcmVuYW1lLXRpdGxlIj48L2Rpdj48ZGl2IGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1yZW5hbWUtaXRlbXMiPjx1bCBjbGFzcz0ieWF3Zi1jb25maWctY29sbGVjdGlvbi1saXN0IHlhd2YtY29uZmlnLWNvbGxlY3Rpb24tdXNlci1pZCI+PC91bD48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1ub3RpY2UtZm9vdGVyIj48c3BhbiBjbGFzcz0ieWF3Zi1mb2xsb3dpbmctbm90aWNlLWxhc3QtdGltZS10ZXh0Ij48L3NwYW4+PHNwYW4gY2xhc3M9Inlhd2YtZm9sbG93aW5nLW5vdGljZS1sYXN0LXRpbWUiPjwvc3Bhbj48L2Rpdj4nOwogICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mb2xsb3dpbmctbm90aWNlLWhlYWRlcicpLnRleHRDb250ZW50ID0gaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmdUaXA7CiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1hZGQtdGl0bGUnKS50ZXh0Q29udGVudCA9IGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nQWRkOwogICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mb2xsb3dpbmctbG9zdC10aXRsZScpLnRleHRDb250ZW50ID0gaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmdMb3N0OwogICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mb2xsb3dpbmctcmVuYW1lLXRpdGxlJykudGV4dENvbnRlbnQgPSBpMThuLmF1dG9DaGVja0ZvbGxvd2luZ1JlbmFtZTsKICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtZm9sbG93aW5nLW5vdGljZS1sYXN0LXRpbWUtdGV4dCcpLnRleHRDb250ZW50ID0gaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmdMYXN0VGltZTsKICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtZm9sbG93aW5nLW5vdGljZS1sYXN0LXRpbWUnKS50ZXh0Q29udGVudCA9IGZvcm1hdExhc3RUaW1lKHRpbWVzdGFtcCk7CiAgICAgICAgWwogICAgICAgICAgeyBhcmVhOiBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtZm9sbG93aW5nLWFkZCcpLCBsaXN0OiBhZGQgfSwKICAgICAgICAgIHsgYXJlYTogY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1sb3N0JyksIGxpc3Q6IGxvc3QgfSwKICAgICAgICAgIHsgYXJlYTogY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1yZW5hbWUnKSwgbGlzdDogcmVuYW1lIH0sCiAgICAgICAgXS5mb3JFYWNoKCh7IGFyZWEsIGxpc3QgfSkgPT4gewogICAgICAgICAgaWYgKCFsaXN0IHx8ICFBcnJheS5pc0FycmF5KGxpc3QpIHx8ICFsaXN0Lmxlbmd0aCkgcmV0dXJuOwogICAgICAgICAgYXJlYS5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgICBjb25zdCB1bCA9IGFyZWEucXVlcnlTZWxlY3RvcigndWwnKTsKICAgICAgICAgIGxpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICAgICAgICAgIHdyYXAuaW5uZXJIVE1MID0gJzxsaSBjbGFzcz0ieWF3Zi1jb25maWctY29sbGVjdGlvbi1pdGVtIFdfYnRuX2IgV19idG5fdGFnIj48ZGl2IGNsYXNzPSJ5YXdmLWNvbmZpZy1jb2xsZWN0aW9uLWl0ZW0tY29udGVudCI+PGRpdiBjbGFzcz0ieWF3Zi1jb25maWctdXNlci1pdGVtIj48ZGl2IGNsYXNzPSJ5YXdmLWNvbmZpZy11c2VyLWF2YXRhciI+PGltZyBjbGFzcz0ieWF3Zi1jb25maWctdXNlci1hdmF0YXItaW1nIiAvPjwvZGl2PjxkaXY+PGEgY2xhc3M9Inlhd2YtY29uZmlnLXVzZXItbmFtZSIgdGFyZ2V0PSJfYmxhbmsiPjwvYT48L2Rpdj48ZGl2PjxzcGFuIGNsYXNzPSJ5YXdmLWNvbmZpZy11c2VyLWRldGFpbCBTX3R4dDIiPjwvc3Bhbj48L2Rpdj48L2Rpdj48L2Rpdj48L2xpPic7CiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd1c2VyJykgd3JhcC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1jb25maWctdXNlci1pdGVtJykuc2V0QXR0cmlidXRlKCd1c2VyY2FyZCcsIGBpZD0ke2l0ZW0udXNlcn1gKTsKICAgICAgICAgICAgd3JhcC5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGl0ZW0uYXZhdGFyKTsKICAgICAgICAgICAgY29uc3QgbmFtZSA9IHdyYXAucXVlcnlTZWxlY3RvcignLnlhd2YtY29uZmlnLXVzZXItbmFtZScpOwogICAgICAgICAgICBuYW1lLnRleHRDb250ZW50ID0gaXRlbS5kZXNjcmlwdGlvbjsKICAgICAgICAgICAgbmFtZS5ocmVmID0gaXRlbS51cmw7CiAgICAgICAgICAgIGlmIChpdGVtLm9sZCkgewogICAgICAgICAgICAgIGNvbnN0IGRldGFpbCA9IHdyYXAucXVlcnlTZWxlY3RvcignLnlhd2YtY29uZmlnLXVzZXItZGV0YWlsJyk7CiAgICAgICAgICAgICAgZGV0YWlsLnRpdGxlID0gZGV0YWlsLnRleHRDb250ZW50ID0gJ0AnICsgaXRlbS5vbGQubmFtZS5yZXBsYWNlKC9AfFxzKlwoLipcKS9nLCAnJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgbGkgPSB3cmFwLmZpcnN0Q2hpbGQ7CiAgICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGxpKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9LAogICAgICBidXR0b246IHsKICAgICAgICBvaygpIHsgcmVzb2x2ZSh0cnVlKTsgZm9sbG93Q2hhbmdlRGlhbG9nLmhpZGUoKTsgfSwKICAgICAgICBjYW5jZWwoKSB7IHJlc29sdmUobnVsbCk7IGZvbGxvd0NoYW5nZURpYWxvZy5oaWRlKCk7IH0sCiAgICAgIH0sCiAgICB9KTsKICAgIGZvbGxvd0NoYW5nZURpYWxvZy5zaG93KCk7CiAgICByZXR1cm4gcHJvbWlzZTsKICB9OwoKICBmb2xsb3dpbmcuYXV0b0NoZWNrRm9sbG93aW5nID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmaWx0ZXJfZm9sbG93X2NoZWNrJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGZvbGxvd2luZy5mb2xsb3dpbmcsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmcsCiAgICByZWY6IHsKICAgICAgZnJlcXVlbmN5OiB7CiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgaW5pdGlhbDogMyAqIDg2NDAwZTMsCiAgICAgICAgc2VsZWN0OiBbCiAgICAgICAgICB7IHRleHQ6ICgpID0+IGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nMSwgdmFsdWU6IDEgKiA4NjQwMGUzIH0sCiAgICAgICAgICB7IHRleHQ6ICgpID0+IGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nMywgdmFsdWU6IDMgKiA4NjQwMGUzIH0sCiAgICAgICAgICB7IHRleHQ6ICgpID0+IGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nNywgdmFsdWU6IDcgKiA4NjQwMGUzIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmF1dG9DaGVja0ZvbGxvd2luZ0RldGFpbCB9LAogICAgICBmZXRjaGluZzogewogICAgICAgIHByZXBhckNvbmZpZygpIHsKICAgICAgICAgIGNvbnN0IHsgZmV0Y2hEYXRhIH0gPSBmb2xsb3dpbmdDb250ZXh0OwogICAgICAgICAgdGhpcy5jb25maWcgPSBmZXRjaERhdGEucHJlcGFyQ29uZmlnKCk7CiAgICAgICAgICByZXR1cm4gZmV0Y2hEYXRhOwogICAgICAgIH0sCiAgICAgICAgcmVuZGVyKCkgewogICAgICAgICAgdGhpcy5nZXRDb25maWcoKTsKICAgICAgICAgIGNvbnN0IGJ1dHRvbkFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICBidXR0b25BcmVhLnNldEF0dHJpYnV0ZSgneWF3Zi1jb25maWctaXRlbScsIHRoaXMuY29uZmlnSWQpOwogICAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgICAgICBidXR0b25BcmVhLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz0ieWF3Zi1mb2xsb3dpbmctY2hlY2tpbmciPjwvc3Bhbj48YSBocmVmPSJqYXZhc2NyaXB0OjsiIGNsYXNzPSJXX2J0bl9iIHlhd2YtZm9sbG93aW5nLWNoZWNrLW5vdyI+PHNwYW4gY2xhc3M9IldfZjE0Ij48L3NwYW4+PC9hPic7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBidXR0b25BcmVhLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz0ieWF3Zi1mb2xsb3dpbmctY2hlY2tpbmciPjwvc3Bhbj48YnV0dG9uIGNsYXNzPSJ3b28tYnV0dG9uLW1haW4gd29vLWJ1dHRvbi1mbGF0IHdvby1idXR0b24tcHJpbWFyeSB3b28tYnV0dG9uLXMgd29vLWJ1dHRvbi1yb3VuZCB3b28tZGlhbG9nLWJ0biB5YXdmLWZvbGxvd2luZy1jaGVjay1ub3ciPjxzcGFuIGNsYXNzPSJ3b28tYnV0dG9uLXdyYXAiPjxzcGFuIGNsYXNzPSJ3b28tYnV0dG9uLWNvbnRlbnQiPjwvc3Bhbj48L3NwYW4+PC9idXR0b24+JzsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IGNoZWNrTm93QnV0dG9uID0gYnV0dG9uQXJlYS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mb2xsb3dpbmctY2hlY2stbm93Jyk7CiAgICAgICAgICBjaGVja05vd0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICAgICAgdXBkYXRlRm9sbG93TGlzdCgpOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICAgIGNoZWNrTm93QnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS50ZXh0Q29udGVudCA9IGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nTm93OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2hlY2tOb3dCdXR0b24ucXVlcnlTZWxlY3RvcignLndvby1idXR0b24tY29udGVudCcpLnRleHRDb250ZW50ID0gaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmdOb3c7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnJlbmRlclZhbHVlKGJ1dHRvbkFyZWEpOwogICAgICAgICAgcmV0dXJuIGJ1dHRvbkFyZWE7CiAgICAgICAgfSwKICAgICAgICByZW5kZXJWYWx1ZShidXR0b25BcmVhKSB7CiAgICAgICAgICBjb25zdCBmZXRjaERhdGEgPSB0aGlzLmdldENvbmZpZygpOwogICAgICAgICAgY29uc3QgY2hlY2tpbmdUZXh0ID0gYnV0dG9uQXJlYS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mb2xsb3dpbmctY2hlY2tpbmcnKTsKICAgICAgICAgIGNvbnN0IGNoZWNrTm93QnV0dG9uID0gYnV0dG9uQXJlYS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mb2xsb3dpbmctY2hlY2stbm93Jyk7CiAgICAgICAgICBpZiAoZmV0Y2hEYXRhICYmIGZldGNoRGF0YS5sb2NrKSB7CiAgICAgICAgICAgIGNoZWNrTm93QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGNoZWNraW5nVGV4dC5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gewogICAgICAgICAgICAgIHN0YXR1czogewogICAgICAgICAgICAgICAgd2FpdGluZzogaTE4bi5jaGVja2luZ1Byb2dyZXNzV2FpdGluZywKICAgICAgICAgICAgICAgIHN0YXJ0aW5nOiBpMThuLmNoZWNraW5nUHJvZ3Jlc3NTdGFydGluZywKICAgICAgICAgICAgICAgIGluYWN0aXZlOiBpMThuLmNoZWNraW5nUHJvZ3Jlc3NJbmFjdGl2ZSwKICAgICAgICAgICAgICAgIHBlbmRpbmc6IGkxOG4uY2hlY2tpbmdQcm9ncmVzc1BlbmRpbmcsCiAgICAgICAgICAgICAgICBydW5uaW5nOiBpMThuLmNoZWNraW5nUHJvZ3Jlc3NSdW5uaW5nLAogICAgICAgICAgICAgICAgcnVubmluZ19mYWlsOiBpMThuLmNoZWNraW5nUHJvZ3Jlc3NSdW5uaW5nRmFpbCwKICAgICAgICAgICAgICAgIGNoZWNraW5nOiBpMThuLmNoZWNraW5nUHJvZ3Jlc3NDaGVja2luZywKICAgICAgICAgICAgICAgIGNoZWNraW5nX2ZhaWw6IGkxOG4uY2hlY2tpbmdQcm9ncmVzc0NoZWNraW5nRmFpbCwKICAgICAgICAgICAgICB9W3VwZGF0ZVN0YXR1cy5zdGF0dXNdLAogICAgICAgICAgICAgIHRvdGFsOiB1cGRhdGVTdGF0dXMudG90YWwsCiAgICAgICAgICAgICAgY3VycmVudDogdXBkYXRlU3RhdHVzLmN1cnJlbnQsCiAgICAgICAgICAgICAgcmVzdWx0OiB1cGRhdGVTdGF0dXMucmVzdWx0LAogICAgICAgICAgICB9OwogICAgICAgICAgICBjb25zdCBzdGF0dXNUZXh0ID0gaTE4bi5jaGVja2luZ1Byb2dyZXNzLnJlcGxhY2UoL1x7KFx3KylcfS9nLCAoXywgdykgPT4gcHJvZ3Jlc3Nbd10pOwogICAgICAgICAgICBjaGVja2luZ1RleHQudGV4dENvbnRlbnQgPSBpMThuLmF1dG9DaGVja0ZvbGxvd2luZ1J1bm5pbmcucmVwbGFjZSgvXHsxXH0vLCAoKSA9PiBzdGF0dXNUZXh0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNoZWNraW5nVGV4dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBjaGVja05vd0J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgfSwKICAgICAgYnV0dG9uczogewogICAgICAgIHByZXBhckNvbmZpZygpIHsKICAgICAgICAgIGNvbnN0IHsgbGFzdExpc3QgfSA9IGZvbGxvd2luZ0NvbnRleHQ7CiAgICAgICAgICB0aGlzLmNvbmZpZyA9IGxhc3RMaXN0LnByZXBhckNvbmZpZygpOwogICAgICAgICAgcmV0dXJuIGxhc3RMaXN0OwogICAgICAgIH0sCiAgICAgICAgcmVuZGVyKCkgewogICAgICAgICAgY29uc3QgYnV0dG9uQXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgIGJ1dHRvbkFyZWEuc2V0QXR0cmlidXRlKCd5YXdmLWNvbmZpZy1pdGVtJywgdGhpcy5jb25maWdJZCk7CiAgICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICAgIGJ1dHRvbkFyZWEuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1sYXN0LXRleHQiPjwvc3Bhbj48c3BhbiBjbGFzcz0ieWF3Zi1mb2xsb3dpbmctbGFzdC10aW1lIj48L3NwYW4+PGEgaHJlZj0iamF2YXNjcmlwdDo7IiBjbGFzcz0iV19idG5fYiB5YXdmLWZvbGxvd2luZy1leHBvcnQiIHN0eWxlPSJtYXJnaW4tbGVmdDoxZW07Ij48c3BhbiBjbGFzcz0iV19mMTQiPjwvc3Bhbj48L2E+PGEgaHJlZj0iamF2YXNjcmlwdDo7IiBjbGFzcz0iV19idG5fYiB5YXdmLWZvbGxvd2luZy1jbGVhciIgc3R5bGU9Im1hcmdpbi1sZWZ0OjFlbTsiPjxzcGFuIGNsYXNzPSJXX2YxNCI+PC9zcGFuPjwvYT4nOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYnV0dG9uQXJlYS5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9Inlhd2YtZm9sbG93aW5nLWxhc3QtdGV4dCI+PC9zcGFuPjxzcGFuIGNsYXNzPSJ5YXdmLWZvbGxvd2luZy1sYXN0LXRpbWUiPjwvc3Bhbj48YnV0dG9uIGNsYXNzPSJ3b28tYnV0dG9uLW1haW4gd29vLWJ1dHRvbi1mbGF0IHdvby1idXR0b24tcHJpbWFyeSB3b28tYnV0dG9uLXMgd29vLWJ1dHRvbi1yb3VuZCB3b28tZGlhbG9nLWJ0biB5YXdmLWZvbGxvd2luZy1leHBvcnQiPjxzcGFuIGNsYXNzPSJ3b28tYnV0dG9uLXdyYXAiPjxzcGFuIGNsYXNzPSJ3b28tYnV0dG9uLWNvbnRlbnQiPjwvc3Bhbj48L3NwYW4+PC9idXR0b24+PGJ1dHRvbiBjbGFzcz0id29vLWJ1dHRvbi1tYWluIHdvby1idXR0b24tZmxhdCB3b28tYnV0dG9uLXByaW1hcnkgd29vLWJ1dHRvbi1zIHdvby1idXR0b24tcm91bmQgd29vLWRpYWxvZy1idG4geWF3Zi1mb2xsb3dpbmctY2xlYXIiPjxzcGFuIGNsYXNzPSJ3b28tYnV0dG9uLXdyYXAiPjxzcGFuIGNsYXNzPSJ3b28tYnV0dG9uLWNvbnRlbnQiPjwvc3Bhbj48L3NwYW4+PC9idXR0b24+JzsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IGxhc3RUaW1lVGV4dCA9IGJ1dHRvbkFyZWEucXVlcnlTZWxlY3RvcignLnlhd2YtZm9sbG93aW5nLWxhc3QtdGV4dCcpOwogICAgICAgICAgY29uc3QgbGFzdFRpbWUgPSBidXR0b25BcmVhLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1sYXN0LXRpbWUnKTsKICAgICAgICAgIGNvbnN0IGV4cG9ydEJ1dHRvbiA9IGJ1dHRvbkFyZWEucXVlcnlTZWxlY3RvcignLnlhd2YtZm9sbG93aW5nLWV4cG9ydCcpOwogICAgICAgICAgY29uc3QgY2xlYXJGb2xsb3dpbmcgPSBidXR0b25BcmVhLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1jbGVhcicpOwogICAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgICAgICBleHBvcnRCdXR0b24ucXVlcnlTZWxlY3Rvcignc3BhbicpLnRleHRDb250ZW50ID0gaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmdEb3dubG9hZDsKICAgICAgICAgICAgY2xlYXJGb2xsb3dpbmcucXVlcnlTZWxlY3Rvcignc3BhbicpLnRleHRDb250ZW50ID0gaTE4bi5hdXRvQ2hlY2tGb2xsb3dpbmdDbGVhbjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGV4cG9ydEJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcud29vLWJ1dHRvbi1jb250ZW50JykudGV4dENvbnRlbnQgPSBpMThuLmF1dG9DaGVja0ZvbGxvd2luZ0Rvd25sb2FkOwogICAgICAgICAgICBjbGVhckZvbGxvd2luZy5xdWVyeVNlbGVjdG9yKCcud29vLWJ1dHRvbi1jb250ZW50JykudGV4dENvbnRlbnQgPSBpMThuLmF1dG9DaGVja0ZvbGxvd2luZ0NsZWFuOwogICAgICAgICAgfQogICAgICAgICAgZXhwb3J0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgICAgICBleHBvcnRGb2xsb3dMaXN0KHRoaXMuZ2V0Q29uZmlnKCkpOwogICAgICAgICAgfSk7CiAgICAgICAgICBjbGVhckZvbGxvd2luZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICAgICAgY2xlYXJGb2xsb3dMaXN0KCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGxhc3RUaW1lVGV4dC50ZXh0Q29udGVudCA9IGkxOG4uYXV0b0NoZWNrRm9sbG93aW5nTGFzdFRpbWU7CiAgICAgICAgICBjb25zdCBsYXN0TGlzdCA9IHRoaXMuZ2V0Q29uZmlnKCk7CiAgICAgICAgICBsYXN0VGltZS50ZXh0Q29udGVudCA9IGZvcm1hdExhc3RUaW1lKGxhc3RMaXN0ICYmIGxhc3RMaXN0LnRpbWVzdGFtcCk7CiAgICAgICAgICBpZiAoIWxhc3RMaXN0IHx8ICFsYXN0TGlzdC50aW1lc3RhbXApIHsKICAgICAgICAgICAgZXhwb3J0QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGNsZWFyRm9sbG93aW5nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gYnV0dG9uQXJlYTsKICAgICAgICB9LAogICAgICAgIHJlbmRlclZhbHVlKGJ1dHRvbkFyZWEpIHsKICAgICAgICAgIGNvbnN0IGxhc3RMaXN0ID0gdGhpcy5nZXRDb25maWcoKTsKICAgICAgICAgIGNvbnN0IGxhc3RUaW1lID0gYnV0dG9uQXJlYS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mb2xsb3dpbmctbGFzdC10aW1lJyk7CiAgICAgICAgICBjb25zdCBleHBvcnRCdXR0b24gPSBidXR0b25BcmVhLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZvbGxvd2luZy1leHBvcnQnKTsKICAgICAgICAgIGNvbnN0IGNsZWFyRm9sbG93aW5nID0gYnV0dG9uQXJlYS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mb2xsb3dpbmctY2xlYXInKTsKICAgICAgICAgIGxhc3RUaW1lLnRleHRDb250ZW50ID0gZm9ybWF0TGFzdFRpbWUobGFzdExpc3QgJiYgbGFzdExpc3QudGltZXN0YW1wKTsKICAgICAgICAgIGlmICghbGFzdExpc3QgfHwgIWxhc3RMaXN0LnRpbWVzdGFtcCkgewogICAgICAgICAgICBleHBvcnRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgY2xlYXJGb2xsb3dpbmcuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGV4cG9ydEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgICAgIGNsZWFyRm9sbG93aW5nLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IGVuYWJsZWQgPSB0aGlzLmlzRW5hYmxlZCgpOwogICAgICBjb25zdCBmcmVxdWVuY3kgPSB0aGlzLnJlZi5mcmVxdWVuY3kuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IHsgZmV0Y2hEYXRhLCBsYXN0TGlzdCwgbGFzdENoYW5nZSB9ID0gZm9sbG93aW5nQ29udGV4dDsKICAgICAgbGV0IHNob3VsZFVwZGF0ZSA9IGZhbHNlOwogICAgICBjb25zdCBmZXRjaENvbnRleHQgPSBmZXRjaERhdGEuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGxpc3QgPSBsYXN0TGlzdC5nZXRDb25maWcoKTsKICAgICAgaWYgKGZldGNoQ29udGV4dC5sb2NrKSBzaG91bGRVcGRhdGUgPSB0cnVlOwogICAgICBpZiAoZW5hYmxlZCAmJiAoIWxpc3QgfHwgIWxpc3QubGlzdCkpIHNob3VsZFVwZGF0ZSA9IHRydWU7CiAgICAgIGlmIChlbmFibGVkICYmIGxpc3QgJiYgbGlzdC50aW1lc3RhbXAgPCBEYXRlLm5vdygpIC0gZnJlcXVlbmN5KSBzaG91bGRVcGRhdGUgPSB0cnVlOwogICAgICBpZiAoc2hvdWxkVXBkYXRlKSB7CiAgICAgICAgcmVwb3J0VXBkYXRlU3RhdHVzKCd3YWl0aW5nJyk7CiAgICAgICAgc2V0VGltZW91dCh1cGRhdGVGb2xsb3dMaXN0LCAxMGUzKTsKICAgICAgfQogICAgICBjb25zdCBjaGFuZ2UgPSBsYXN0Q2hhbmdlLmdldENvbmZpZygpOwogICAgICBpZiAoY2hhbmdlICYmIGNoYW5nZS50aW1lc3RhbXApIHsKICAgICAgICBpZiAoaW5pdC5wYWdlLnR5cGUoKSA9PT0gJ3NlYXJjaCcpIHJldHVybjsKICAgICAgICBzaG93Q2hhbmdlTGlzdChjaGFuZ2UpLnRoZW4oY29uZmlybSA9PiBjb25maXJtICYmIGxhc3RDaGFuZ2Uuc2V0Q29uZmlnKG51bGwpKTsKICAgICAgfQogICAgfSwKICB9KTsKCiAgY3NzLmFwcGVuZChgCi55YXdmLVdCVjYgLnlhd2YtZm9sbG93aW5nLWFkZC10aXRsZSwKLnlhd2YtV0JWNiAueWF3Zi1mb2xsb3dpbmctbG9zdC10aXRsZSwKLnlhd2YtV0JWNiAueWF3Zi1mb2xsb3dpbmctcmVuYW1lLXRpdGxlIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbjogMTBweCAwIDVweDsgfSAKLnlhd2YtV0JWNiAueWF3Zi1mb2xsb3dpbmctbm90aWNlLWhlYWRlciB7IHBhZGRpbmc6IDIwcHg7IH0KLnlhd2YtV0JWNiAueWF3Zi1mb2xsb3dpbmctbm90aWNlLWJvZHkgeyBwYWRkaW5nOiAwIDIwcHg7IHdpZHRoOiA2MDBweDsgbWF4LWhlaWdodDogMzIwcHg7IG92ZXJmbG93OiBhdXRvOyB9IAoueWF3Zi1XQlY2IC55YXdmLWZvbGxvd2luZy1ub3RpY2UtZm9vdGVyIHsgcGFkZGluZzogMjBweDsgfSAKLnlhd2YtV0JWNiAueWF3Zi1mb2xsb3dpbmctbm90aWNlLWJvZHkgYS55YXdmLWNvbmZpZy11c2VyLW5hbWUgeyBjb2xvcjogaW5oZXJpdDsgfQoueWF3Zi1XQlY2IC55YXdmLWZvbGxvd2luZy1yZW5hbWUgLnlhd2YtY29uZmlnLXVzZXItbmFtZSwKLnlhd2YtV0JWNiAueWF3Zi1mb2xsb3dpbmctcmVuYW1lIC55YXdmLWNvbmZpZy11c2VyLWRldGFpbCB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IHdoaXRlLXNwYWNlOiBub3dyYXA7IHZlcnRpY2FsLWFsaWduOiB0b3A7IH0KLnlhd2YtV0JWNiAueWF3Zi1jb25maWctdXNlci1hdmF0YXItaW1nIHsgbWF4LXdpZHRoOiA1MHB4OyBtYXgtaGVpZ2h0OiA1MHB4OyB9CmApOwoKICBjc3MuYXBwZW5kKGAKLnlhd2YtV0JWNyAjeWF3Zi1mb2xsb3ctY2hhbmdlIC53b28tZGlhbG9nLXRpdGxlIHsgbWFyZ2luLWJvdHRvbTogMDsgfQoueWF3Zi1XQlY3ICN5YXdmLWZvbGxvdy1jaGFuZ2UgLndvby1kaWFsb2ctYm9keSB7IHBhZGRpbmc6IDA7IH0KLnlhd2YtV0JWNyAueWF3Zi1mb2xsb3dpbmctYWRkLXRpdGxlLAoueWF3Zi1XQlY3IC55YXdmLWZvbGxvd2luZy1sb3N0LXRpdGxlLAoueWF3Zi1XQlY3IC55YXdmLWZvbGxvd2luZy1yZW5hbWUtdGl0bGUgeyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luOiAxMHB4IDAgNXB4OyB9IAoueWF3Zi1XQlY3IC55YXdmLWZvbGxvd2luZy1ub3RpY2UtaGVhZGVyIHsgcGFkZGluZzogMjBweDsgfQoueWF3Zi1XQlY3IC55YXdmLWZvbGxvd2luZy1ub3RpY2UtYm9keSB7IHBhZGRpbmc6IDAgMjBweDsgd2lkdGg6IDYwMHB4OyBtYXgtaGVpZ2h0OiAzMjBweDsgb3ZlcmZsb3c6IGF1dG87IH0gCi55YXdmLVdCVjcgLnlhd2YtZm9sbG93aW5nLW5vdGljZS1mb290ZXIgeyBwYWRkaW5nOiAyMHB4OyB9IAoueWF3Zi1XQlY3IC55YXdmLWZvbGxvd2luZy1ub3RpY2UtYm9keSBhLnlhd2YtY29uZmlnLXVzZXItbmFtZSB7IGNvbG9yOiBpbmhlcml0OyB9Ci55YXdmLVdCVjcgLnlhd2YtZm9sbG93aW5nLXJlbmFtZSAueWF3Zi1jb25maWctdXNlci1uYW1lLAoueWF3Zi1XQlY3IC55YXdmLWZvbGxvd2luZy1yZW5hbWUgLnlhd2YtY29uZmlnLXVzZXItZGV0YWlsIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgdmVydGljYWwtYWxpZ246IHRvcDsgfQpgKTsKCiAgaTE4bi51bmNoZWNrRm9sbG93UHJlc2VudGVyID0gewogICAgY246ICfor53popjpobXpnaLlj5HluIPmoYblj5bmtojpu5jorqTli77pgInlhbPms6jkuLvmjIHkuronLAogICAgdHc6ICfoqbHpoYzpoIHpnaLnmbzkvYjmoYblj5bmtojpoJDoqK3li77pgbjpl5zms6jkuLvmjIHkuronLAogICAgZW46ICdVbmNoZWNrIGZvbGxvdyBwcmVzZW50ZXIgaW4gdG9waWMgcGFnZScsCiAgfTsKCiAgZm9sbG93aW5nLnVuY2hlY2tGb2xsb3dQcmVzZW50ZXIgPSBydWxlLlJ1bGUoewogICAgaWQ6ICd1bmNoZWNrX2ZvbGxvd19wcmVzZW50ZXInLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogZm9sbG93aW5nLmZvbGxvd2luZywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnVuY2hlY2tGb2xsb3dQcmVzZW50ZXIsCiAgICBpbml0aWFsOiB0cnVlLAogICAgYWluaXQoKSB7CiAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gdW5jaGVja0ZvbGxvd1ByZXNlbnRlcigpIHsKICAgICAgICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9ImNoZWNrYm94Il1bY2hlY2tlZF1bYWN0aW9uLWRhdGEqPSJmb2xsb3ciXTpub3QoW3lhd2YtdW5jaGVjay1mb2xsb3ddKScpKTsKICAgICAgICBpbnB1dHMuZm9yRWFjaChjaGVja2JveCA9PiB7CiAgICAgICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ3lhd2YtdW5jaGVjaycsICcnKTsKICAgICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSBjaGVja2JveC5jbGljaygpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4uc2hvd0FydGljbGVXaXRob3V0Rm9sbG93ID0gewogICAgY246ICflpLTmnaHmlofnq6DkuI3lhbPms6jkvZzogIXnm7TmjqXmmL7npLrlhajmlocnLAogICAgdHc6ICfpoK3mop3mlofnq6DkuI3pl5zms6jkvZzogIXnm7TmjqXpoa/npLrlhajmlocnLAogICAgZW46ICdTaG93IHdob2xlIGFydGljbGUgd2l0aG91dCBmb2xsb3cgdGhlIGF1dGhvcicsCiAgfTsKCiAgZm9sbG93aW5nLnNob3dBcnRpY2xlV2l0aG91dEZvbGxvdyA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ3Nob3dfYXJ0aWNsZV93aXRob3V0X2ZvbGxvdycsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBmb2xsb3dpbmcuZm9sbG93aW5nLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2hvd0FydGljbGVXaXRob3V0Rm9sbG93LAogICAgaW5pdGlhbDogdHJ1ZSwKICAgIGFpbml0KCkgewogICAgICBjb25zdCBzaG93QXJ0aWNsZUNzcyA9IGAKLldCX2VkaXRvcl9pZnJhbWUsIC5XQl9lZGl0b3JfaWZyYW1lX25ldywgLldCX2VkaXRvcl9pZnJhbWVfd29yZCB7IGhlaWdodDogYXV0byAhaW1wb3J0YW50OyB9Ci5hcnRpY2FsX2FkZF9ib3ggW25vZGUtdHlwZT0ibWFza0NvbnRlbnQiXSB7IGRpc3BsYXk6IG5vbmU7IH0KYDsKICAgICAgY3NzLmFwcGVuZChzaG93QXJ0aWNsZUNzcyk7CiAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gYXJ0aWNsZUZyYW1lU3R5bGUoKSB7CiAgICAgICAgLyoqIEB0eXBle05vZGVMaXN0T2Y8SFRNTElGcmFtZUVsZW1lbnQ+fSAqLwogICAgICAgIGNvbnN0IGZyYW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lmcmFtZVtzcmMqPSJ0dGFydGljbGUvcC9zaG93Il0nKTsKICAgICAgICBpZiAoIWZyYW1lcy5sZW5ndGgpIHJldHVybjsKICAgICAgICBBcnJheS5mcm9tKGZyYW1lcykuZm9yRWFjaChmdW5jdGlvbiBpbmplY3RTdHlsZShmcmFtZSkgewogICAgICAgICAgY29uc3QgZG9jdW1lbnQgPSBmcmFtZS5jb250ZW50RG9jdW1lbnQ7CiAgICAgICAgICBpZiAoIWRvY3VtZW50KSBzZXRUaW1lb3V0KGluamVjdFN0eWxlLCAxMCwgZnJhbWUpOwogICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gc2hvd0FydGljbGVDc3M7CiAgICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2ZpbHRlci9ob21lcGFnZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBlbnYgPSB5YXdmLmVudjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IHJlcXVlc3QgPSB5YXdmLnJlcXVlc3Q7CiAgY29uc3QgYnJvd3NlckluZm8gPSB5YXdmLmJyb3dzZXJJbmZvOwogIGNvbnN0IHN0ayA9IHlhd2Yuc3RrOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CiAgY29uc3Qgbm90aWZpY2F0aW9ucyA9IHlhd2Yubm90aWZpY2F0aW9uczsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwoKICBjb25zdCBmaWx0ZXIgPSB5YXdmLnJ1bGVzLmZpbHRlcjsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBrZXlib2FyZCA9IHV0aWwua2V5Ym9hcmQ7CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgZmVlZHNIb21lcGFnZUdyb3VwVGl0bGU6IHsKICAgICAgY246ICfpppbpobUnLAogICAgICB0dzogJ+mmlumggScsCiAgICAgIGVuOiAnSG9tZXBhZ2UnLAogICAgfSwKICAgIGZlZWRzSG9tZXBhZ2VOZXdlc3Q6IHsKICAgICAgY246ICfkvb/nlKjmnIDmlrDlvq7ljZrku6Pmm7/pppbpobXvvIjpppbpobXlvq7ljZrml7bpl7Tpobrluo/mjpLliJfvvInvvIjmjqjojZDvvIknLAogICAgICB0dzogJ+S9v+eUqOacgOaWsOW+ruWNmuS7o+abv+mmlumgge+8iOmmlumggeW+ruWNmuaZgumWk+mghuW6j+aOkuWIl++8ie+8iOaOqOiWpu+8iScsCiAgICAgIGVuOiAnVXNlIG5ld2VzdCBmZWVkcyBmb3IgaG9tZSBwYWdlIChob21lIHBhZ2UgdGltZWxpbmUgb3JkZXIpIChzdWdnZXN0ZWQpJywKICAgIH0sCiAgICBmZWVkc0hvbWVwYWdlU2luZ2xlR3JvdXA6IHsKICAgICAgY246ICfkvb/nlKjljZXkuKrliIbnu4TpobXku6Pmm7/pppbpobXvvIjpppbpobXlvq7ljZrml7bpl7Tpobrluo/mjpLliJfvvIl7e2l9fXx85YiG57uEe3tncm91cH19JywKICAgICAgdHc6ICfkvb/nlKjllq7lgIvliIbntYTpoIHku6Pmm7/pppbpoIHvvIjpppbpoIHlvq7ljZrmmYLplpPpoIbluo/mjpLliJfvvIl7e2l9fXx85YiG57WEe3tncm91cH19JywKICAgICAgZW46ICdVc2Ugc2luZ2xlIGZlZWQgbGlzdCBieSBncm91cCBmb3IgaG9tZSBwYWdlIChob21lIHBhZ2UgdGltZWxpbmUgb3JkZXIpIHt7aX19fHxHcm91cHt7Z3JvdXB9fScsCiAgICB9LAogICAgZmVlZHNIb21lcGFnZVNpbmdsZUdyb3VwRGV0YWlsOiB7CiAgICAgIGNuOiAn5b6u5Y2a55qE5YiG57uE6aG16Z2i5oyJ5pe26Ze06aG65bqP5q2j5bi45o6S5YiX44CC5YiG57uE5Lq65pWw5pyJ6ZmQ5Yi277yM6Z2e5Lya5ZGY6Iez5aSaIDIwMCDkurov57uE44CC5aaC5p6c5oKo55qE5YWz5rOo6L6D5bCR77yM5bu66K6u5L2/55So5YiG57uE5Luj5pu/6aaW6aG144CC5rOo5oSP77yM5YiG57uE6aG16Z2i5Lit5oyJ5L2c6ICF6L+H5ruk55qE6KeE5YiZ5bCG5LiN5Lya55Sf5pWI77yM5aaC5p6c5oKo5LiN5biM5pyb55yL5Yiw5p+Q5Lq655qE5b6u5Y2a77yM5oKo5Y+v5Lul5bCG5YW256e75Ye65YiG57uE44CCJywKICAgIH0sCiAgICBmZWVkc0hvbWVwYWdlTXVsdGlHcm91cDogewogICAgICBjbjogJ+S9v+eUqOWkmuS4quWIhue7hOmhteS7o+abv+mmlumhte+8iOmmlumhteW+ruWNmuaXtumXtOmhuuW6j+aOkuWIl++8iXt7aX19fHzmr4/mrKHlsZXnpLp7e2NvdW50fX3mnaF854K55Ye75p+l55yL5pu05aSa5pe2e3ttb3JlfX18fHt7dW5yZWFkfX3oh6rliqjmo4Dmn6Xlkozmj5DnpLrmnKror7vlvq7ljZp7e2lpfX18fOWIhue7hHt7Z3JvdXBzfX0nLAogICAgICB0dzogJ+S9v+eUqOWkmuWAi+WIhue1hOmggeS7o+abv+mmlumgge+8iOmmlumggeW+ruWNmuaZgumWk+mghuW6j+aOkuWIl++8iXt7aX19fHzmr4/mrKHlsZXnpLp7e2NvdW50fX3mop186bue5pOK5p+l55yL5pu05aSa5pmCe3ttb3JlfX18fHt7dW5yZWFkfX3oh6rli5XmqqLmn6Xlkozmj5DnpLrmnKroroDlvq7ljZp7e2lpfX18fOWIhue1hHt7Z3JvdXBzfX0nLAogICAgICBlbjogJ1VzZSBtdWx0aXBsZSBmZWVkIGxpc3RzIGJ5IGdyb3VwIGZvciBob21lIHBhZ2UgKGhvbWUgcGFnZSB0aW1lbGluZSBvcmRlcikge3tpfX18fHNob3cge3tjb3VudH19IGZlZWRzIHBlciBwYWdlfHt7bW9yZX19IGJlZm9yZSBzaG93IG5leHQgcGFnZXx8e3t1bnJlYWR9fSBTaG93IHRpcHMgZm9yIHVucmVhZCBmZWVkcyB7e2lpfX18fEdyb3Vwc3t7Z3JvdXBzfX0nLAogICAgfSwKICAgIGZlZWRzSG9tZXBhZ2VNdWx0aUdyb3VwRGV0YWlsOiB7CiAgICAgIGNuOiAn5b6u5Y2a55qE5YiG57uE6aG16Z2i5oyJ5pe26Ze06aG65bqP5o6S5YiX77yM5aaC5p6c5oKo55qE5YWz5rOo6L6D5bCR77yM5bu66K6u5oKo5bCG5LuW5Lus5pS+5YWl5LiA5Liq5YiG57uE5ZCO5ZCv55So5L2/55So4oCc5Y2V5Liq4oCd5YiG57uE55qE6YCJ6aG544CC5aaC5p6c5oKo5YWz5rOo55qE5Lq65pWw6L6D5aSa77yM5oKo5Y+v5Lul6YCJ5oup5aSa5Liq5YiG57uE77yM5YiG57uE6L+H5aSa5Y+v6IO96YCg5oiQ5pu06ZW/55qE5Yqg6L295pe26Ze077yM5Lul5Y+K5Yqg6L295pe255qE5Y2h6aG/77yM5bu66K6u5bC96YeP5YeP5bCR6YCJ5oup55qE5YiG57uE5pWw6YeP44CCJywKICAgIH0sCiAgICBmZWVkc0hvbWVwYWdlTXVsdGlHcm91cERldGFpbDI6IHsKICAgICAgY246ICfmo4Dmn6XmnKror7vlvq7ljZrku4Xlr7nkuIDoiKznmoTliIbnu4TmnInmlYjvvIzlr7nmgoTmgoTlhbPms6jliIbnu4Tml6DmlYjjgIInLAogICAgfSwKICAgIGZlZWRzSG9tZXBhZ2VLZWVwT2xkOiB7CiAgICAgIGNuOiAn5L+d55WZ5bey5bGV56S65b6u5Y2aJywKICAgICAgZW46ICdrZWVwIHNob3duIGZlZWRzJywKICAgIH0sCiAgICBmZWVkc0hvbWVwYWdlQ2xlYW5PbGQ6IHsKICAgICAgY246ICfmuIXnqbrlt7LlsZXnpLrlvq7ljZonLAogICAgICBlbjogJ2NsZWFuIHVwIHNob3duIGZlZWRzJywKICAgIH0sCiAgICBmZWVkc0hvbWVQYWdlRG9uZUdyb3VwOiB7CiAgICAgIGNuOiAn5YiG57uEIHsxfSDnmoTmnIDov5Hlvq7ljZrlt7Llhajpg6jlsZXnpLonLAogICAgICB0dzogJ+WIhue1hCB7MX0g55qE5pyA6L+R5b6u5Y2a5bey5YWo6YOo5bGV56S6JywKICAgICAgZW46ICdBbGwgcmVjZW50IGZlZWRzIGZyb20gZ3JvdXAgezF9IGhhZCBiZWVuIHNob3duJywKICAgIH0sCiAgICBmZWVkc011bHRpR3JvdXBMb2FkaW5nOiB7CiAgICAgIGNuOiAn5q2j5Zyo5Yqg6L294oCm4oCmJywKICAgICAgdHc6ICfmraPlnKjovInlhaXigKbigKYnLAogICAgICBlbjogJ0xvYWRpbmcgLi4uJywKICAgIH0sCiAgICBmZWVkc011bHRpR3JvdXBMb2FkTW9yZTogewogICAgICBjbjogJ+afpeeci+abtOWkmuW+ruWNmicsCiAgICAgIGVuOiAnU2hvdyBtb3JlIGZlZWRzJywKICAgIH0sCiAgICBmZWVkc1VucmVhZFRpcFdpdGhDb3VudDogewogICAgICBjbjogJ+aciSB7MX0g5p2h5paw5b6u5Y2a77yM54K55Ye75p+l55yLJywKICAgICAgdHc6ICfmnIkgezF9IOaineaWsOW+ruWNmu+8jOm7nuaTiuafpeeciycsCiAgICAgIGVuOiAnezF9IG5ldyBmZWVkcycsCiAgICB9LAogICAgZmVlZHNVbnJlYWRUaXA6IHsKICAgICAgY246ICfmnInmlrDlvq7ljZrvvIzngrnlh7vmn6XnnIsnLAogICAgICB0dzogJ+acieaWsOW+ruWNmu+8jOm7nuaTiuafpeeciycsCiAgICAgIGVuOiAnc2hvdyBuZXcgZmVlZHMnLAogICAgfSwKICAgIGZlZWRzVW5yZWFkTG9hZGluZzogewogICAgICBjbjogJ+ato+WcqOWKoOi9veKApuKApicsCiAgICAgIHR3OiAn5q2j5Zyo6LyJ5YWl4oCm4oCmJywKICAgICAgZW46ICdMb2FkaW5nIC4uLicsCiAgICB9LAogIH0pOwoKICBjb25zdCBob21lcGFnZSA9IGZpbHRlci5ob21lcGFnZSA9IHt9OwogIGhvbWVwYWdlLmhvbWVwYWdlID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGZpbHRlci5maWx0ZXIsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkc0hvbWVwYWdlR3JvdXBUaXRsZSwKICB9KTsKCiAgLy8g5Zug5Li6IFlBV0Yg6ISa5pys55So55qEIC0x77yM6L+Z6YeM5Li65LqG6YG/5YWN5Y+v6IO955qE5Yay56qB77yI6Jm954S25Yir55qE5Yqf6IO96L+Y5piv5Lya5Yay56qB77yJ77yM5omA5Lul55SoIC0yCiAgY29uc3QgQ1VTVE9NX0dJRCA9IC0yOwoKICBjb25zdCBmaXhIb21lVXJsVjYgPSBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICBjb25zdCBzZXRQYXJhbSA9IGZ1bmN0aW9uICh1cmwpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gJ25ld2VzdCcpIHsKICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLmRlbGV0ZSgnZ2lkJyk7CiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2lzX25ldycsIDEpOwogICAgICB9IGVsc2UgaWYgKHRhcmdldCA9PT0gJ2N1c3RvbScpIHsKICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnZ2lkJywgQ1VTVE9NX0dJRCk7CiAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LnN0YXJ0c1dpdGgoJ2cnKSkgewogICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdnaWQnLCB0YXJnZXQuc2xpY2UoMSkpOwogICAgICB9IGVsc2UgaWYgKHRhcmdldCA9PT0gJ3doaXNwZXInKSB7CiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5kZWxldGUoJ2dpZCcpOwogICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCd3aGlzcGVyJywgMSk7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCB1cGRhdGVMb2NhdGlvbiA9IGZ1bmN0aW9uIHVwZGF0ZUxvY2F0aW9uKCkgewogICAgICBjb25zdCBpc0hvbWVGZWVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Y2X3BsX2NvbnRlbnRfaG9tZWZlZWQnKTsKICAgICAgY29uc3Qgbm90SG9tZUZlZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndjZfcGxfY29udGVudF9jb21tZW50bGlzdCcpIHx8CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2lkXj0iUGxfT2ZmaWNpYWxfTXlQcm9maWxlRmVlZF9fIl0nKTsKICAgICAgaWYgKCFpc0hvbWVGZWVkICYmICFub3RIb21lRmVlZCkgcmV0dXJuOwogICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGxvY2F0aW9uLmhyZWYpOwogICAgICBjb25zdCBoYXNHaWQgPSBCb29sZWFuKCt1cmwuc2VhcmNoUGFyYW1zLmdldCgnZ2lkJykpOwogICAgICBjb25zdCBpc05ldyA9IEJvb2xlYW4oK3VybC5zZWFyY2hQYXJhbXMuZ2V0KCdpc19uZXcnKSk7CiAgICAgIGNvbnN0IGlzU2VhcmNoID0gQm9vbGVhbigrdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2lzX3NlYXJjaCcpKTsKICAgICAgY29uc3QgaXNTcGVjaWFsID0gWydpc2ZyaWVuZHMnLCAndnBsdXMnLCAnaXNmcmllbmRzJywgJ2lzZ3JvdXBzZmVlZCcsICd3aGlzcGVyJ10KICAgICAgICAuc29tZShrZXkgPT4gK3VybC5zZWFyY2hQYXJhbXMuZ2V0KGtleSkpOwogICAgICBjb25zdCBpc0N1c3RvbUdpZCA9IGhhc0dpZCAmJiB1cmwuc2VhcmNoUGFyYW1zLmdldCgnZ2lkJykgPCAwOwogICAgICBjb25zdCBzaG91bGRCZUZpeGVkID0gaXNIb21lRmVlZCAmJiAhaXNTZWFyY2ggJiYgIWlzU3BlY2lhbDsKICAgICAgY29uc3Qgc2hvdWxkUmVtb3ZlR2lkID0gbm90SG9tZUZlZWQgJiYgaXNDdXN0b21HaWQ7CiAgICAgIGNvbnN0IGluY29ycmVjdEdpZCA9IGlzQ3VzdG9tR2lkICYmIHRhcmdldCAhPT0gJ2N1c3RvbSc7CiAgICAgIGlmICgoIWhhc0dpZCB8fCBpbmNvcnJlY3RHaWQpICYmICFpc05ldyAmJiBzaG91bGRCZUZpeGVkKSB7CiAgICAgICAgc2V0UGFyYW0odXJsKTsKICAgICAgICBvYnNlcnZlci5kb20ucmVtb3ZlKHVwZGF0ZUxvY2F0aW9uKTsKICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKHVybC5ocmVmKTsKICAgICAgfSBlbHNlIGlmIChoYXNHaWQgJiYgc2hvdWxkUmVtb3ZlR2lkKSB7CiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5kZWxldGUoJ2dpZCcpOwogICAgICAgIG9ic2VydmVyLmRvbS5yZW1vdmUodXBkYXRlTG9jYXRpb24pOwogICAgICAgIGxvY2F0aW9uLnJlcGxhY2UodXJsKTsKICAgICAgfQogICAgfTsKICAgIG9ic2VydmVyLmRvbS5hZGQodXBkYXRlTG9jYXRpb24pOwoKICAgIGNvbnN0IHVwZGF0ZUhvbWVMaW5rcyA9IGZ1bmN0aW9uIHVwZGF0ZUhvbWVMaW5rcygpIHsKICAgICAgLyoqIEB0eXBlIHtIVE1MQW5jaG9yRWxlbWVudFtdfSAqLwogICAgICBjb25zdCBsaW5rcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChbCiAgICAgICAgJy5nbl9sb2dvIGEnLCAvLyDlr7zoiKrmoI9sb2dvCiAgICAgICAgJ2Fbc3VkYS11YXRyYWNrKj0iaG9tZXBhZ2UiXScsIC8vIOmmlumhtemTvuaOpe+8jOagueaNrui3n+i4quagh+ivhuivhuWIq++8m+mAgueUqOS6jumhtuagj+WSjOW3puagjwogICAgICAgICcjdjZfcGxfY29udGVudF9ob21lZmVlZCBhW2FjdGlvbi10eXBlPSJzZWFyY2hfdHlwZSJdW2FjdGlvbi1kYXRhPSJ0eXBlPTAiXScsIC8vIOmmlumhtea2iOaBr+a1gemhtumDqOeahOKAnOWFqOmDqOKAnemTvuaOpQogICAgICBdLm1hcChzZWxlY3RvciA9PiBzZWxlY3RvciArICc6bm90KFtocmVmKj0iaXNfc2VhcmNoIl0pJykuam9pbignLCcpKSk7CiAgICAgIGxpbmtzLmZvckVhY2gobGluayA9PiB7CiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChsaW5rLmhyZWYpOwogICAgICAgIHNldFBhcmFtKHVybCk7CiAgICAgICAgbGluay5ocmVmID0gdXJsLmhyZWY7CiAgICAgIH0pOwogICAgfTsKICAgIG9ic2VydmVyLmRvbS5hZGQodXBkYXRlSG9tZUxpbmtzKTsKICB9OwoKICBjb25zdCBmaXhIb21lVXJsVjcgPSBmdW5jdGlvbiAoY29uZmlnKSB7CiAgICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSwgeyBnaWQsIG5hbWUsIGFwaSwgaW5kZXgsIHNvdXJjZSB9KSB7CiAgICAgIGNvbnN0IHlhd2YgPSB3aW5kb3dbcm9vdEtleV07CiAgICAgIGNvbnN0IHZ1ZVNldHVwID0geWF3Zi52dWVTZXR1cDsKCiAgICAgIGNvbnN0IHJvb3QgPSB2dWVTZXR1cC5nZXRSb290Vm0oKTsKICAgICAgY29uc3Qgcm91dGVyID0gcm9vdC4kcm91dGVyOwogICAgICByb3V0ZXIuYmVmb3JlRWFjaCgodG8sIGZyb20sIG5leHQpID0+IHsKICAgICAgICBpZiAodG8ubmFtZSA9PT0gJ2hvbWUnKSB7CiAgICAgICAgICBuZXh0KCcvbXlncm91cHM/Z2lkPScgKyBnaWQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBuZXh0KCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKHJvdXRlci5jdXJyZW50Um91dGUubmFtZSA9PT0gJ2hvbWUnKSB7CiAgICAgICAgcm91dGVyLnJlcGxhY2UoJy9teWdyb3Vwcz9naWQ9JyArIGdpZCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGJ1cyA9IHJvb3QuJEJ1czsKICAgICAgYnVzLiRvbignaGFuZGxlSG9tZU5hdicsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgaWYgKGRhdGEuZ2lkLnN0YXJ0c1dpdGgoJzEwMDAxJykpIHsKICAgICAgICAgIGJ1cy4kZW1pdCgnaGFuZGxlSG9tZU5hdicsIHsgZ2lkLCB0aXRsZTogbmFtZSwgYXBpLCB5YXdmX1RyaWdnZXI6IHRydWUgfSwgaW5kZXgsIHNvdXJjZSk7CiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnlhd2ZfVHJpZ2dlcikgewogICAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdob21lJywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICAgIGlmICh2bS5nZXRDdXJJbmRleCkgdm0uZ2V0Q3VySW5kZXgoKTsgLy8g5Yir5L+h5LuW5Y+rIGdldO+8jOimgeiwg+S7luadpeabtOaWsOW9k+WJjemrmOS6ruWFg+e0oAogICAgICAgICAgfSwgeyB3YXRjaDogZmFsc2UgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIHV0aWwuaW5qZWN0LnJvb3RLZXksIGNvbmZpZyk7CiAgfTsKCiAgaG9tZXBhZ2UubmV3ZXN0RmVlZHMgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ2ZpbHRlcl9ob21lcGFnZV9uZXdlc3RfZmVlZHMnLAogICAgdmVyc2lvbjogMjEsCiAgICBwYXJlbnQ6IGhvbWVwYWdlLmhvbWVwYWdlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZHNIb21lcGFnZU5ld2VzdCwKICAgIGluaXQoKSB7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoY29uZmlnID0+IHsKICAgICAgICBpZiAoY29uZmlnKSB7CiAgICAgICAgICBob21lcGFnZS5zaW5nbGVHcm91cC5zZXRDb25maWcoZmFsc2UpOwogICAgICAgICAgaG9tZXBhZ2UubXVsdGlHcm91cC5zZXRDb25maWcoZmFsc2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBmaXhIb21lVXJsVjYoJ25ld2VzdCcpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHVpZCA9IGluaXQucGFnZS5jb25maWcudXNlci5pZHN0cjsKICAgICAgICBmaXhIb21lVXJsVjcoewogICAgICAgICAgZ2lkOiAnMTEwMDAnICsgdWlkLAogICAgICAgICAgYXBpOiAnL2FqYXgvZmVlZC9mcmllbmRzdGltZWxpbmUnLAogICAgICAgICAgbmFtZTogJ+acgOaWsOW+ruWNmicsCiAgICAgICAgICBpbmRleDogMSwKICAgICAgICAgIHNvdXJjZTogJ2xlZnQnLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogIH0pOwoKICBsZXQgZ3JvdXBMaXN0TGF6eVByb21pc2VSZXNvbHZlOwogIGNvbnN0IGdyb3VwTGlzdExhenlQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICBncm91cExpc3RMYXp5UHJvbWlzZVJlc29sdmUgPSByZXNvbHZlOwogIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICBjb25zdCBncm91cHMgPSBhd2FpdCByZXF1ZXN0Lmdyb3VwTGlzdCgpOwogICAgICByZXR1cm4gZ3JvdXBzLm1hcCgoeyBuYW1lLCBpZCB9KSA9PiAoeyB0ZXh0OiBuYW1lLCB2YWx1ZTogaWQgfSkpOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgZ3JvdXBzID0gYXdhaXQgcmVxdWVzdC5ncm91cExpc3RWNygpOwogICAgICByZXR1cm4gZ3JvdXBzLm1hcCgoeyBnaWQsIHRpdGxlIH0pID0+ICh7IHRleHQ6IHRpdGxlLCB2YWx1ZTogZ2lkIH0pKTsKICAgIH0KICB9KTsKICBob21lcGFnZS5zaW5nbGVHcm91cCA9IHJ1bGUuUnVsZSh7CiAgICB3ZWlib1ZlcnNpb246IFs2LCA3XSwKICAgIGlkOiAnZmlsdGVyX2hvbWVwYWdlX3NpbmdsZV9ncm91cCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBob21lcGFnZS5ob21lcGFnZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRzSG9tZXBhZ2VTaW5nbGVHcm91cCwKICAgIHJlZjogewogICAgICBncm91cDogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIHNlbGVjdDogZ3JvdXBMaXN0TGF6eVByb21pc2UsCiAgICAgICAgYWZ0ZXJSZW5kZXI6IGZ1bmN0aW9uIChjb250YWluZXIpIHsKICAgICAgICAgIGdyb3VwTGlzdExhenlQcm9taXNlUmVzb2x2ZSgpOwogICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgICAgICB9LAogICAgICB9LAogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZHNIb21lcGFnZVNpbmdsZUdyb3VwRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcihjb25maWcgPT4gewogICAgICAgIGlmIChjb25maWcpIHsKICAgICAgICAgIGhvbWVwYWdlLm5ld2VzdEZlZWRzLnNldENvbmZpZyhmYWxzZSk7CiAgICAgICAgICBob21lcGFnZS5tdWx0aUdyb3VwLnNldENvbmZpZyhmYWxzZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBhaW5pdCgpIHsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGxldCBncm91cCA9IHRoaXMucmVmLmdyb3VwLmdldENvbmZpZygpOwogICAgICAgIGlmIChncm91cCA9PSBudWxsKSB7CiAgICAgICAgICBhd2FpdCBncm91cExpc3RMYXp5UHJvbWlzZTsKICAgICAgICAgIGdyb3VwID0gdGhpcy5yZWYuZ3JvdXAuZ2V0Q29uZmlnKCk7CiAgICAgICAgfQogICAgICAgIGZpeEhvbWVVcmxWNihncm91cCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgZ2lkID0gdGhpcy5yZWYuZ3JvdXAuZ2V0Q29uZmlnKCk7CiAgICAgICAgY29uc3QgZ3JvdXBzID0gYXdhaXQgcmVxdWVzdC5ncm91cExpc3RWNygpOwogICAgICAgIGNvbnN0IGluZGV4ID0gZ3JvdXBzLmZpbmRJbmRleChnID0+IGcuZ2lkID09PSBnaWQpOwogICAgICAgIGNvbnN0IG5hbWUgPSBncm91cHNbaW5kZXhdLnRpdGxlOwogICAgICAgIGNvbnN0IGFwaSA9ICcvYWpheC9mZWVkL2dyb3Vwc3RpbWVsaW5lJzsKICAgICAgICBmaXhIb21lVXJsVjcoeyBnaWQsIGFwaSwgbmFtZSwgaW5kZXgsIHNvdXJjZTogJ2N1c3RvbScgfSk7CiAgICAgIH0KICAgIH0sCiAgfSk7CgogIGhvbWVwYWdlLm11bHRpR3JvdXAgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfaG9tZXBhZ2VfbXVsdGlfZ3JvdXAnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogaG9tZXBhZ2UuaG9tZXBhZ2UsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkc0hvbWVwYWdlTXVsdGlHcm91cCwKICAgIHJlZjogewogICAgICBjb3VudDogewogICAgICAgIHR5cGU6ICdyYW5nZScsCiAgICAgICAgbWluOiAyMCwKICAgICAgICBtYXg6IDIwMCwKICAgICAgICBpbml0aWFsOiA1MCwKICAgICAgICBzdGVwOiAxMCwKICAgICAgfSwKICAgICAgbW9yZTogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIHNlbGVjdDogWwogICAgICAgICAgeyB2YWx1ZTogJ2tlZXAnLCB0ZXh0OiAoKSA9PiBpMThuLmZlZWRzSG9tZXBhZ2VLZWVwT2xkIH0sCiAgICAgICAgICB7IHZhbHVlOiAnY2xlYXInLCB0ZXh0OiAoKSA9PiBpMThuLmZlZWRzSG9tZXBhZ2VDbGVhbk9sZCB9LAogICAgICAgIF0sCiAgICAgICAgaW5pdGlhbDogJ2NsZWFyJywKICAgICAgfSwKICAgICAgdW5yZWFkOiB7CiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLAogICAgICB9LAogICAgICBncm91cHM6IHsKICAgICAgICB0eXBlOiAnZ3JvdXBzJywgLy8g5LiN5pSv5oyBIFY3CiAgICAgIH0sCiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkc0hvbWVwYWdlTXVsdGlHcm91cERldGFpbCB9LAogICAgICBpaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ3dhcm4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkc0hvbWVwYWdlTXVsdGlHcm91cERldGFpbDIgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKGNvbmZpZyA9PiB7CiAgICAgICAgaWYgKGNvbmZpZykgewogICAgICAgICAgaG9tZXBhZ2UubmV3ZXN0RmVlZHMuc2V0Q29uZmlnKGZhbHNlKTsKICAgICAgICAgIGhvbWVwYWdlLnNpbmdsZUdyb3VwLnNldENvbmZpZyhmYWxzZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIGNvbnN0IGNvdW50ID0gcnVsZS5yZWYuY291bnQuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IHVucmVhZCA9IHJ1bGUucmVmLnVucmVhZC5nZXRDb25maWcoKTsKICAgICAgY29uc3QgZ3JvdXBzID0gcnVsZS5yZWYuZ3JvdXBzLmdldENvbmZpZygpLnNsaWNlKDApOwogICAgICBjb25zdCBjbGVhciA9IHJ1bGUucmVmLm1vcmUuZ2V0Q29uZmlnKCkgPT09ICdjbGVhcic7CiAgICAgIGNvbnN0IGF1dG9Mb2FkID0gaG9tZXBhZ2UuYXV0b0xvYWQuaXNFbmFibGVkKCk7CgogICAgICBpZiAoZ3JvdXBzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwoKICAgICAgZml4SG9tZVVybFY2KCdjdXN0b20nKTsKCiAgICAgIC8vIOajgOafpeW9k+WJjemhtemdouaYr+WQpumcgOimgeWQr+eUqOWIhue7hOaLvOWHkemmlumhteWKn+iDvQogICAgICBjb25zdCBjaGVja1BhZ2UgPSBmdW5jdGlvbiBjaGVja011bHRpR3JvdXBQYWdlKCkgewogICAgICAgIGNvbnN0IHF1ZXJ5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhdGlvbi5zZWFyY2gpOwogICAgICAgIGNvbnN0IGdpZCA9ICtxdWVyeS5nZXQoJ2dpZCcpOwogICAgICAgIGlmIChnaWQgIT09IENVU1RPTV9HSUQpIHJldHVybjsKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZ3JvdXBzKSkgcmV0dXJuOwogICAgICAgIGlmIChncm91cHMubGVuZ3RoIDwgMikgcmV0dXJuOwogICAgICAgIHF1ZXJ5LmRlbGV0ZSgnZ2lkJyk7CiAgICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBtdWx0aUdyb3VwUGFnZUZpeCgpIHsKICAgICAgICAgIHdhdGNoRmVlZExpc3QocXVlcnkpOwogICAgICAgICAgd2F0Y2hNZW1iZXJzKCk7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBjb25zdCBnZXRMb2FkaW5nVGlwID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iV0JfY2FyZHdyYXAgU19iZzIiPjxkaXYgY2xhc3M9IldCX2VtcHR5IFdCX2VtcHR5X25hcnJvdyI+PGRpdiBjbGFzcz0iV0JfaW5uZXJ3cmFwIj48ZGl2IGNsYXNzPSJlbXB0eV9jb24gY2xlYXJmaXgiPjxwIGNsYXNzPSJ0ZXh0Ij48aSBjbGFzcz0iV19sb2FkaW5nIj48L2k+PC9wPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2Pic7CiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50ZXh0JykuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaTE4bi5mZWVkc011bHRpR3JvdXBMb2FkaW5nKSk7CiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5maXJzdENoaWxkOwogICAgICB9OwogICAgICBjb25zdCBnZXRTaG93TW9yZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9IldCX2NhcmR3cmFwIFNfYmcyIHlhd2YtbXVsdGlHcm91cE1vcmUiPjxhIGNsYXNzPSJXQl9jYXJkbW9yZSBXQl9jYXJkbW9yZV9ub2JvcmRlciBjbGVhcmZpeCIgaHJlZj0iamF2YXNjcmlwdDo7Ij48c3BhbiBjbGFzcz0ibW9yZV90eHQgV19mMTQiPjxlbSBjbGFzcz0iV19maWNvbiBmaWNvbl9hcnJvd19kb3duIj5jPC9lbT48L3NwYW4+PC9hPjwvZGl2Pic7CiAgICAgICAgY29uc3QgdGV4dENvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzcGFuJyk7CiAgICAgICAgdGV4dENvbnRhaW5lci5pbnNlcnRCZWZvcmUoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaTE4bi5mZWVkc011bHRpR3JvdXBMb2FkTW9yZSksIHRleHRDb250YWluZXIuZmlyc3RDaGlsZCk7CiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5maXJzdENoaWxkOwogICAgICB9OwoKICAgICAgLy8g5om+5Yiw5raI5oGv5rWB55qE5a655Zmo77yM5bm25Yid5aeL5YyW5aW95a6DCiAgICAgIGNvbnN0IHdhdGNoRmVlZExpc3QgPSBmdW5jdGlvbiAocXVlcnkpIHsKICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl9mZWVkID4gLldCX3Jlc3VsdF9udWxsJyk7CiAgICAgICAgaWYgKCFwbGFjZWhvbGRlcikgcmV0dXJuOwogICAgICAgIGxldCBmZWVkbGlzdCA9IHBsYWNlaG9sZGVyLnBhcmVudEVsZW1lbnQ7CiAgICAgICAgZmVlZGxpc3QucmVtb3ZlQ2hpbGQocGxhY2Vob2xkZXIpOwogICAgICAgIGZpbGxGZWVkTGlzdChmZWVkbGlzdCwgcXVlcnkpOwogICAgICB9OwoKICAgICAgLy8g5Yid5aeL5YyW5raI5oGv5rWB5a655ZmoCiAgICAgIGNvbnN0IGZpbGxGZWVkTGlzdCA9IGZ1bmN0aW9uIChmZWVkbGlzdCwgcXVlcnkpIHsKICAgICAgICBmZWVkbGlzdC5jbGFzc0xpc3QuYWRkKCdXQl9mZWVkX3YzJywgJ1dCX2ZlZWRfdjQnKTsKICAgICAgICBjb25zdCBsb2FkaW5nID0gZ2V0TG9hZGluZ1RpcCgpOwogICAgICAgIGZlZWRsaXN0LmFwcGVuZENoaWxkKGxvYWRpbmcpOwogICAgICAgIGNvbnN0IHNob3dtb3JlID0gZ2V0U2hvd01vcmUoKTsKICAgICAgICBzaG93bW9yZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGZlZWRsaXN0LmFwcGVuZENoaWxkKHNob3dtb3JlKTsKCiAgICAgICAgY29uc3QgZ2V0dGVyID0gc2hvd0ZlZWRzKGdyb3VwcywgcXVlcnksIHsgZmVlZGxpc3QsIGxvYWRpbmcsIHNob3dtb3JlIH0pOwogICAgICAgIGlmICh1bnJlYWQpIHsKICAgICAgICAgIGluaXRVbnJlYWQoZ3JvdXBzLCBxdWVyeSwgZ2V0dGVyLCB7IGZlZWRsaXN0IH0pOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8vIOS4i+aOiei+ueagj+e7hOWGheeUqOaIt+eahOe7hOS7tgogICAgICBjb25zdCB3YXRjaE1lbWJlcnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc3QgbWVtYmVycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2Nl9wbF9yaWdodG1vZF9ncm91cHMnKTsKICAgICAgICBpZiAobWVtYmVycykgbWVtYmVycy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG1lbWJlcnMpOwogICAgICB9OwoKICAgICAgLy8g5Yid5aeL5YyW5ou85YeR6aaW6aG155qE6YC76L6RCiAgICAgIGNvbnN0IHNob3dGZWVkcyA9IGZ1bmN0aW9uIChncm91cHMsIHF1ZXJ5LCBkb20pIHsKICAgICAgICBjb25zdCBnZXR0ZXIgPSByZXF1ZXN0LmZlZWRzQnlHcm91cHMoZ3JvdXBzLCBxdWVyeSk7CiAgICAgICAgc2hvd01vcmVGZWVkcyhnZXR0ZXIsIGNvdW50LCBkb20pOwogICAgICAgIHJldHVybiBnZXR0ZXI7CiAgICAgIH07CgogICAgICAvLyDkuIDmnaHkuIDmnaHlvoDmtojmga/mtYHph4zpnaLloZ7lhoXlrrkKICAgICAgY29uc3Qgc2hvd01vcmVGZWVkcyA9IGFzeW5jIGZ1bmN0aW9uIChnZXR0ZXIsIHJlbWFpbiwgZG9tKSB7CiAgICAgICAgY29uc3QgaGFzTmV4dCA9IGF3YWl0IGdldHRlci5oYXNOZXh0KCk7CiAgICAgICAgaWYgKCFoYXNOZXh0KSB7CiAgICAgICAgICBldmVyeXRoaW5nRG9uZShkb20pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAocmVtYWluID09PSAwKSB7CiAgICAgICAgICBhd2FpdCB3YWl0U2hvd01vcmUoZG9tKTsKICAgICAgICAgIHJlbWFpbiA9IGNvdW50OwogICAgICAgIH0KICAgICAgICBjb25zdCBmZWVkID0gYXdhaXQgZ2V0dGVyLm5leHQoKTsKICAgICAgICBpZiAoZmVlZC50eXBlID09PSAnZmVlZCcpIHsKICAgICAgICAgIHJlbmRlckZlZWQoZmVlZC5kb20sIGRvbSk7CiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTsKICAgICAgICAgIHJlbWFpbi0tOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZW5kZXJEb25lKGZlZWQuZ3JvdXAsIGRvbSk7CiAgICAgICAgfQogICAgICAgIHNob3dNb3JlRmVlZHMoZ2V0dGVyLCByZW1haW4sIGRvbSk7CiAgICAgIH07CgogICAgICAvLyDlrozmiJDkuIDnu4TmmL7npLrlkI7nrYnnlKjmiLfnmoTmk43kvZzlho3nu6fnu60KICAgICAgY29uc3Qgd2FpdFNob3dNb3JlID0gYXN5bmMgZnVuY3Rpb24gKHsgZmVlZGxpc3QsIGxvYWRpbmcsIHNob3dtb3JlIH0pIHsKICAgICAgICBsb2FkaW5nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgc2hvd21vcmUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICBjb25zdCBsaXN0ZW5lciA9ICgpID0+IHsKICAgICAgICAgICAgc2hvd21vcmUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsaXN0ZW5lcik7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH07CiAgICAgICAgICBzaG93bW9yZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxpc3RlbmVyKTsKICAgICAgICB9KTsKICAgICAgICBsb2FkaW5nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIHNob3dtb3JlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgaWYgKGNsZWFyKSB7CiAgICAgICAgICBjb25zdCBuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuV0JfZ2xvYmFsX25hdicpOwogICAgICAgICAgY29uc3QgbmF2Qm90dG9tID0gbmF2LmNsaWVudFRvcCArIG5hdi5jbGllbnRIZWlnaHQ7CiAgICAgICAgICBjb25zdCBmZWVkbGlzdFRvcCA9IGZlZWRsaXN0LnBhcmVudE5vZGUub2Zmc2V0VG9wOwogICAgICAgICAgY29uc3QgbWFyZ2luID0gMTA7CiAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gZmVlZGxpc3RUb3AgLSAobmF2Qm90dG9tICsgbWFyZ2luKTsKICAgICAgICAgIHdoaWxlIChmZWVkbGlzdC5maXJzdENoaWxkICE9PSBsb2FkaW5nKSB7CiAgICAgICAgICAgIGZlZWRsaXN0LnJlbW92ZUNoaWxkKGZlZWRsaXN0LmZpcnN0Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8vIOaYvuekuuS4gOadoea2iOaBrwogICAgICBjb25zdCByZW5kZXJGZWVkID0gZnVuY3Rpb24gKGZlZWQsIHsgZmVlZGxpc3QsIGxvYWRpbmcgfSkgewogICAgICAgIGZlZWRsaXN0Lmluc2VydEJlZm9yZShmZWVkLCBsb2FkaW5nKTsKICAgICAgfTsKCiAgICAgIC8vIOWujOaIkOS4gOS4quWIhue7hOeahOWKoOi9vQogICAgICBjb25zdCByZW5kZXJEb25lID0gZnVuY3Rpb24gKGdyb3VwLCB7IGZlZWRsaXN0LCBsb2FkaW5nIH0pIHsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9IldCX2NhcmR3cmFwIFNfYmcyIHlhd2YtbXVsdGlHcm91cERvbmUiPjxkaXYgY2xhc3M9IldCX2NhcmR0aXRsZV9hIFdfdGMgeWF3Zi1tdWx0aUdyb3VwRG9uZVRpdGxlIj48L2Rpdj48L2Rpdj4nOwogICAgICAgIGNvbnN0IHRpdGxlQ29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLW11bHRpR3JvdXBEb25lVGl0bGUnKTsKICAgICAgICBjb25zdCBbdGV4dEJlZm9yZSwgdGV4dEFmdGVyXSA9IGkxOG4uZmVlZHNIb21lUGFnZURvbmVHcm91cC5zcGxpdCgnezF9Jyk7CiAgICAgICAgdGl0bGVDb250YWluZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dEJlZm9yZSkpOwogICAgICAgIGNvbnN0IGdyb3VwTmFtZUNvbnRhaW5lciA9IHRpdGxlQ29udGFpbmVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSk7CiAgICAgICAgdGl0bGVDb250YWluZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dEFmdGVyKSk7CiAgICAgICAgcmVxdWVzdC5ncm91cExpc3QoKS50aGVuKGdyb3VwTGlzdCA9PiB7CiAgICAgICAgICBjb25zdCBnb3RHcm91cCA9IGdyb3VwTGlzdC5maW5kKCh7IGlkIH0pID0+IGlkID09PSBncm91cC5pZCk7CiAgICAgICAgICBpZiAoZ290R3JvdXApIGdyb3VwTmFtZUNvbnRhaW5lci50ZXh0Q29udGVudCA9IGdvdEdyb3VwLm5hbWU7CiAgICAgICAgfSk7CiAgICAgICAgZmVlZGxpc3QuaW5zZXJ0QmVmb3JlKGNvbnRhaW5lciwgbG9hZGluZyk7CiAgICAgIH07CgogICAgICAvLyDmiYDmnInliIbnu4Tpg73lrozmiJDliqDovb0KICAgICAgY29uc3QgZXZlcnl0aGluZ0RvbmUgPSBmdW5jdGlvbiAoeyBmZWVkbGlzdCwgbG9hZGluZywgc2hvd21vcmUgfSkgewogICAgICAgIGZlZWRsaXN0LnJlbW92ZUNoaWxkKGxvYWRpbmcpOwogICAgICAgIGZlZWRsaXN0LnJlbW92ZUNoaWxkKHNob3dtb3JlKTsKICAgICAgfTsKCiAgICAgIGNvbnN0IHNob3dVbnJlYWRGZWVkcyA9IGFzeW5jIGZ1bmN0aW9uIChncm91cHMsIHF1ZXJ5LCBnZXR0ZXIsIHVucmVhZENoZWNrZXIsIHsgbmV3ZmVlZHRpcCwgZmVlZGxpc3QgfSwgc3RhdHVzKSB7CiAgICAgICAgdW5yZWFkQ2hlY2tlci5wYXVzZSgpOwogICAgICAgIGlmIChzdGF0dXMgPiBjb3VudCAmJiAhYXV0b0xvYWQpIHsKICAgICAgICAgIC8vIOacquivu+a2iOaBr+WkquWkmuS6hu+8jOaIkeS7rOebtOaOpeWIt+aWsOeul+S6hgogICAgICAgICAgZmVlZGxpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICBuZXdmZWVkdGlwLnJlbW92ZSgpOwogICAgICAgICAgZmlsbEZlZWRMaXN0KGZlZWRsaXN0LCBxdWVyeSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICghYXV0b0xvYWQpIHsKICAgICAgICAgICAgY29uc3QgbGluayA9IG5ld2ZlZWR0aXAucXVlcnlTZWxlY3RvcignYScpOwogICAgICAgICAgICBsaW5rLnRleHRDb250ZW50ID0gaTE4bi5mZWVkc1VucmVhZExvYWRpbmc7CiAgICAgICAgICAgIGNvbnN0IGxvYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7CiAgICAgICAgICAgIGxvYWRpbmcuY2xhc3NOYW1lID0gJ1dfbG9hZGluZyc7CiAgICAgICAgICAgIGxpbmsuaW5zZXJ0QmVmb3JlKGxvYWRpbmcsIGxpbmsuZmlyc3RDaGlsZCk7CiAgICAgICAgICAgIGZlZWRsaXN0Lmluc2VydEJlZm9yZShuZXdmZWVkdGlwLCBmZWVkbGlzdC5maXJzdENoaWxkKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IGZyYWdlbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKICAgICAgICAgIGNvbnN0IG5ld0dldHRlciA9IHJlcXVlc3QuZmVlZHNCeUdyb3Vwcyhncm91cHMsIHF1ZXJ5KTsKICAgICAgICAgIGZvciAobGV0IGxpbWl0ID0gY291bnQ7IGxpbWl0OyBsaW1pdC0tKSB7CiAgICAgICAgICAgIGNvbnN0IGZlZWQgPSBhd2FpdCBuZXdHZXR0ZXIubmV4dCgpOwogICAgICAgICAgICBpZiAoZmVlZC50eXBlICE9PSAnZmVlZCcpIGNvbnRpbnVlOwogICAgICAgICAgICBpZiAoZ2V0dGVyLmlzU2hvd24oZmVlZCkpIGJyZWFrOwogICAgICAgICAgICBjb25zdCBmZWVkRG9tID0gZnJhZ2VtZW50LmFwcGVuZENoaWxkKGZlZWQuZG9tKTsKICAgICAgICAgICAgaWYgKGF1dG9Mb2FkKSB7CiAgICAgICAgICAgICAgZmVlZERvbS5zZXRBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1wcmVsb2FkJywgJ3VucmVhZCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGdldHRlci5hZGRTaG93bihmZWVkKTsKICAgICAgICAgIH0KICAgICAgICAgIGZlZWRsaXN0Lmluc2VydEJlZm9yZShmcmFnZW1lbnQsIGZlZWRsaXN0LmZpcnN0Q2hpbGQpOwogICAgICAgICAgaWYgKCFhdXRvTG9hZCkgewogICAgICAgICAgICBuZXdmZWVkdGlwLnJlbW92ZSgpOwogICAgICAgICAgfQogICAgICAgICAgdW5yZWFkQ2hlY2tlci5ydW4oKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyDmmL7npLrmlrDmtojmga/mj5DnpLrmqKrluYUKICAgICAgY29uc3Qgbm90aWNlVW5yZWFkID0gZnVuY3Rpb24gKGRhdGEsIGdyb3VwcywgcXVlcnksIGdldHRlciwgeyBmZWVkbGlzdCB9LCB1bnJlYWRDaGVja2VyKSB7CiAgICAgICAgY29uc3Qgc3RhdHVzID0gZGF0YS5zdGF0dXM7CiAgICAgICAgaWYgKCFzdGF0dXMpIHsKICAgICAgICAgIGNvbnN0IG5ld2ZlZWR0aXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneWF3Zi1ncm91cC1uZXctZmVlZC10aXAnKTsKICAgICAgICAgIGlmIChuZXdmZWVkdGlwKSBuZXdmZWVkdGlwLnJlbW92ZSgpOwogICAgICAgIH0gZWxzZSBpZiAoYXV0b0xvYWQpIHsKICAgICAgICAgIHNob3dVbnJlYWRGZWVkcyhncm91cHMsIHF1ZXJ5LCBnZXR0ZXIsIHVucmVhZENoZWNrZXIsIHsgbmV3ZmVlZHRpcDogbnVsbCwgZmVlZGxpc3QgfSwgc3RhdHVzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneWF3Zi1ncm91cC1uZXctZmVlZC10aXAnKSkgewogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJXQl9jYXJkd3JhcCBXQl9ub3RlcyIgaWQ9Inlhd2YtZ3JvdXAtbmV3LWZlZWQtdGlwIj48YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij48L2E+PC9kaXY+JzsKICAgICAgICAgICAgY29uc3QgbmV3ZmVlZHRpcCA9IGNvbnRhaW5lci5maXJzdENoaWxkOwogICAgICAgICAgICBmZWVkbGlzdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdmZWVkdGlwLCBmZWVkbGlzdCk7CiAgICAgICAgICAgIGNvbnN0IGNsaWNrVG9TaG93VW5yZWFkRmVlZHMgPSAoKSA9PiB7CiAgICAgICAgICAgICAgc2hvd1VucmVhZEZlZWRzKGdyb3VwcywgcXVlcnksIGdldHRlciwgdW5yZWFkQ2hlY2tlciwgeyBuZXdmZWVkdGlwLCBmZWVkbGlzdCB9LCBuZXdmZWVkdGlwLmRhdGFzZXQuc3RhdHVzKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgbmV3ZmVlZHRpcC5xdWVyeVNlbGVjdG9yKCdhJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja1RvU2hvd1VucmVhZEZlZWRzKTsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiBsb2FkQ29udGVudEtleShldmVudCkgewogICAgICAgICAgICAgIGlmIChrZXlib2FyZC5ldmVudChldmVudCkgIT09IGtleWJvYXJkLmNvZGUuUEVSSU9EKSByZXR1cm47CiAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBsb2FkQ29udGVudEtleSk7CiAgICAgICAgICAgICAgY2xpY2tUb1Nob3dVbnJlYWRGZWVkcygpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IG5ld2ZlZWR0aXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneWF3Zi1ncm91cC1uZXctZmVlZC10aXAnKTsKICAgICAgICAgIGlmIChOdW1iZXIobmV3ZmVlZHRpcC5kYXRhc2V0LnN0YXR1cykgIT09IHN0YXR1cykgewogICAgICAgICAgICBuZXdmZWVkdGlwLmRhdGFzZXQuc3RhdHVzID0gc3RhdHVzOwogICAgICAgICAgICBuZXdmZWVkdGlwLnF1ZXJ5U2VsZWN0b3IoJ2EnKS50ZXh0Q29udGVudCA9IGkxOG4uZmVlZHNVbnJlYWRUaXBXaXRoQ291bnQucmVwbGFjZSgnezF9Jywgc3RhdHVzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyDliJ3lp4vljJbmnKror7vmj5DnpLoKICAgICAgY29uc3QgaW5pdFVucmVhZCA9IGFzeW5jIGZ1bmN0aW9uIChncm91cHMsIHF1ZXJ5LCBnZXR0ZXIsIHsgZmVlZGxpc3QgfSkgewogICAgICAgIGlmICghZW52LmNvbmZpZy5zdGtJbmZvU3VwcG9ydGVkKSByZXR1cm47CiAgICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gWydpc19vcmknLCAnaXNfZm9yd2FyZCcsICdpc190ZXh0JywgJ2lzX3BpYycsICdpc192aWRlbycsICdpc19tdXNpYycsICdpc19hcnRpY2xlJywgJ2tleV93b3JkJywgJ3N0YXJ0X3RpbWUnLCAnZW5kX3RpbWUnLCAnaXNfc2VhcmNoJywgJ2lzX3NlYXJjaGFkdiddOwogICAgICAgIC8vIOS4jeaUr+aMgeaQnOe0oumhtemdogogICAgICAgIGlmIChzZWFyY2hQYXJhbXMuc29tZShwYXJhbSA9PiBxdWVyeS5oYXMocGFyYW0pKSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHN0a0luZm8gPSBhd2FpdCBzdGsuaW5mbzsKICAgICAgICBjb25zdCB1bnJlYWRDaGVja2VyID0gcmVxdWVzdC51bnJlYWRCeUdyb3Vwcyhncm91cHMsIHN0a0luZm8pOwogICAgICAgIGNvbnN0IGNhbGxiYWNrID0gZGF0YSA9PiB7CiAgICAgICAgICBub3RpY2VVbnJlYWQoZGF0YSwgZ3JvdXBzLCBxdWVyeSwgZ2V0dGVyLCB7IGZlZWRsaXN0IH0sIHVucmVhZENoZWNrZXIpOwogICAgICAgIH07CiAgICAgICAgdW5yZWFkQ2hlY2tlci53YXRjaChjYWxsYmFjayk7CiAgICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiB3YWl0RmVlZExpc3RSZW1vdmVkKCkgewogICAgICAgICAgaWYgKGRvY3VtZW50LmNvbnRhaW5zKGZlZWRsaXN0KSkgcmV0dXJuOwogICAgICAgICAgdW5yZWFkQ2hlY2tlci51bndhdGNoKGNhbGxiYWNrKTsKICAgICAgICAgIG9ic2VydmVyLmRvbS5yZW1vdmUod2FpdEZlZWRMaXN0UmVtb3ZlZCk7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBjaGVja1BhZ2UoKTsKCiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGZlZWRzQXV0b0xvYWQ6IHsgY246ICfoh6rliqjovb3lhaXmlrDlvq7ljZp7e2l9fScsIHR3OiAn6Ieq5YuV6LyJ5YWl5paw5b6u5Y2ae3tpfX0nLCBlbjogJ0xvYWQgbmV3IGZlZWRzIGF1dG9tYXRpY2FsbHkge3tpfX0nIH0sCiAgICBmZWVkc0F1dG9Mb2FkRGV0YWlsOiB7CiAgICAgIGNuOiAn5ZCv55So6K+l6YCJ6aG55Y+v5Lul5Zyo5pi+56S64oCc5pyJ5paw5b6u5Y2a4oCd55qE5o+Q56S65qiq5bmF5Ye6546w5YmN6L+H5ruk5b6u5Y2a77yM6YG/5YWN54K55byA5o+Q56S677yM5L2G5piv5bm25rKh5pyJ5Yi35Ye65p2l5b6u5Y2a55qE5oOF5Ya177yb5Zug5Li65omp5bGV5Lya6K+75Y+W5a+55bqU5b6u5Y2a5Lul5L6/6L+H5ruk77yM6L+Z5Lqb5b6u5Y2a5Lya6KKr5qCH6K6w5Li64oCc5bey6K+74oCd77yM5Zug5q2k5Yu+6YCJ5q2k6aG55Lya5a+86Ie05Zyo5YW25LuW6K6+5aSH5LiK5pS25LiN5Yiw5pyJ5paw5b6u5Y2a5o+Q56S644CCJywKICAgIH0sCiAgICBmZWVkc0F1dG9TaG93OiB7CiAgICAgIGNuOiAn5Yqg6L295ZCO6Ieq5Yqo5bGV56S6fHt7YmFja2dyb3VuZH196aG16Z2i5rS75Yqo5pe25pqC5YGcJywKICAgICAgdHc6ICfovInlhaXlvozoh6rli5XlsZXnpLp8e3tiYWNrZ3JvdW5kfX3poIHpnaLmtLvouo3mmYLmmqvlgZwnLAogICAgICBlbjogJ1Nob3cgZmVlZHMgYWZ0ZXIgYXV0b21hdGljYWxseSBsb2FkZWR8IHt7YmFja2dyb3VuZH19IHBhdXNlIHdoZW4gcGFnZSBhY3RpdmUnLAogICAgfSwKICAgIGZlZWRzRGVza3RvcE5vdGlmeTogewogICAgICBjbjogJ+iHquWKqOi9veWFpeWQjuaYvuekuuahjOmdouaPkOekunx8e3t3aGl0ZWxpc3R9feS7heWvueWRveS4reaAu+aYr+aYvuekuuinhOWImeeahOW+ruWNmueUn+aViCcsCiAgICAgIHR3OiAn6Ieq5YuV6LyJ5YWl5b6M5pi+56S65qGM6Z2i5o+Q56S6fHx7e3doaXRlbGlzdH195YOF5bCN5ZG95Lit57i95piv6aGv56S66KaP5YmH55qE5b6u5Y2a55Sf5pWIJywKICAgICAgZW46ICdTaG93IGRlc2t0b3Agbm90aWZpY2F0aW9uIGFmdGVyIGF1dG9tYXRpY2FsbHkgbG9hZGVkfHx7e3doaXRlbGlzdH19IG9ubHkgYXBwbHkgdG8gZmVlZHMgaGl0IGFsd2F5cyBzaG93IHJ1bGVzJywKICAgIH0sCiAgfSk7CgogIGNvbnN0IHNob3dVbnJlYWRGZWVkcyA9IGZ1bmN0aW9uICgpIHsKICAgIGxldCBuZXdmZWVkdGlwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3lhd2YtbmV3LWZlZWQtdGlwJyk7CiAgICBpZiAoIW5ld2ZlZWR0aXApIHJldHVybjsKICAgIG5ld2ZlZWR0aXAucmVtb3ZlKCk7CiAgICBjb25zdCB1bnJlYWRGZWVkcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3lhd2YtZmVlZC1wcmVsb2FkPSJ1bnJlYWQiXScpKTsKICAgIHVucmVhZEZlZWRzLmZvckVhY2goZmVlZCA9PiB7CiAgICAgIGZlZWQuc2V0QXR0cmlidXRlKCd5YXdmLWZlZWQtcHJlbG9hZCcsICdzaG93Jyk7CiAgICB9KTsKICB9OwoKICBob21lcGFnZS5hdXRvTG9hZCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl9ob21lcGFnZV9hdXRvX2xvYWQnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogaG9tZXBhZ2UuaG9tZXBhZ2UsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkc0F1dG9Mb2FkLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkc0F1dG9Mb2FkRGV0YWlsIH0sCiAgICB9LAogICAgYWluaXQoKSB7CgogICAgICAvLyDlrozmiJDov4fmu6TlkI7lho3mj5DnpLrmnInmnKror7vmtojmga8KICAgICAgb2JzZXJ2ZXIuZmVlZC5vbkZpbmFsbHkoZnVuY3Rpb24gY291bnRVbnJlYWRGZWVkcygpIHsKICAgICAgICBjb25zdCB1bnJlYWRGZWVkcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3lhd2YtZmVlZC1wcmVsb2FkPSJ1bnJlYWQiXScpKTsKICAgICAgICBjb25zdCBzdGF0dXMgPSB1bnJlYWRGZWVkcy5sZW5ndGg7CiAgICAgICAgbGV0IG5ld2ZlZWR0aXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneWF3Zi1uZXctZmVlZC10aXAnKTsKICAgICAgICBpZiAoc3RhdHVzID09PSAwICYmIG5ld2ZlZWR0aXApIHsKICAgICAgICAgIG5ld2ZlZWR0aXAucmVtb3ZlKCk7CiAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMgIT09IDApIHsKICAgICAgICAgIGlmICghbmV3ZmVlZHRpcCkgewogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJXQl9jYXJkd3JhcCBXQl9ub3RlcyIgaWQ9Inlhd2YtbmV3LWZlZWQtdGlwIj48YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij48L2E+PC9kaXY+JzsKICAgICAgICAgICAgbmV3ZmVlZHRpcCA9IGNvbnRhaW5lci5maXJzdENoaWxkOwogICAgICAgICAgICBjb25zdCBmZWVkbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl9mZWVkJyk7CiAgICAgICAgICAgIGZlZWRsaXN0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5ld2ZlZWR0aXAsIGZlZWRsaXN0KTsKICAgICAgICAgICAgbmV3ZmVlZHRpcC5xdWVyeVNlbGVjdG9yKCdhJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93VW5yZWFkRmVlZHMpOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgbGluayA9IG5ld2ZlZWR0aXAucXVlcnlTZWxlY3RvcignYScpOwogICAgICAgICAgaWYgKHN0YXR1cyA+IDAgJiYgc3RhdHVzIDwgMTAwKSB7CiAgICAgICAgICAgIGxpbmsudGV4dENvbnRlbnQgPSBpMThuLmZlZWRzVW5yZWFkVGlwV2l0aENvdW50LnJlcGxhY2UoJ3sxfScsIHN0YXR1cyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsaW5rLnRleHRDb250ZW50ID0gaTE4bi5mZWVkc1VucmVhZFRpcDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgLy8g5ZON5bqU6ZSu55uY5pON5L2cCiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gbG9hZFByZWxvYWRlZENvbnRlbnRLZXkoZXZlbnQpIHsKICAgICAgICBpZiAoa2V5Ym9hcmQuZXZlbnQoZXZlbnQpICE9PSBrZXlib2FyZC5jb2RlLlBFUklPRCkgcmV0dXJuOwogICAgICAgIHNob3dVbnJlYWRGZWVkcygpOwogICAgICB9KTsKCiAgICAgIC8vIOmakOiXj+mihOWKoOi9veeahOWGheWuuQogICAgICBjc3MuYXBwZW5kKGAKI3Y2X3BsX2NvbnRlbnRfaG9tZWZlZWQgW3lhd2YtZmVlZC1wcmVsb2FkPSJ1bnJlYWQiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQojaG9tZV9uZXdfZmVlZF90aXAgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KLldCX2ZlZWQgW25vZGUtdHlwZT0ieWF3Zi1mZWVkX2xpc3RfdGltZVRpcCJdLCAuV0JfZmVlZCBbbm9kZS10eXBlPSJmZWVkX2xpc3RfdGltZVRpcCJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Ci5XQl9mZWVkIGEubm90ZXNbYWN0aW9uLXR5cGU9ImZlZWRfbGlzdF9uZXdCYXIiXVtub2RlLXR5cGU9ImZlZWRfbGlzdF9uZXdCYXIiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQouV0JfZmVlZCBkaXYuV19sb2FkaW5nW3JlcXVlc3R0eXBlPSJuZXdGZWVkIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KLldCX2ZlZWQgLldCX25vdGVzW3JlcXVlc3R0eXBlPSJuZXdGZWVkIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KLldCX2ZlZWQgW25vZGUtdHlwZT0ibGF6eWxvYWQiXTpub3QoOmxhc3QtY2hpbGQpIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CmApOwoKICAgICAgLy8g5qOA5p+l5pyJ5paw5YaF5a656L295YWl77yM5bm26ZqQ6JeP5a6D5LusCiAgICAgIG9ic2VydmVyLmZlZWQub25CZWZvcmUoZnVuY3Rpb24gaGlkZUF1dG9Mb2FkRmVlZHMoZmVlZCkgewogICAgICAgIGlmIChmZWVkLmhhc0F0dHJpYnV0ZSgneWF3Zi1mZWVkLXByZWxvYWQnKSkgcmV0dXJuOwogICAgICAgIGxldCBpc1VucmVhZCA9IHRydWU7CiAgICAgICAgLy8g5aaC5p6c5LiA5aSp5LiA5p2h5b6u5Y2a5Ye6546w5Zyo5LqG546w5pyJ55qE5b6u5Y2a55qE5ZCO6Z2i77yM6YKj5LmI5Y+v6IO95piv5Zug5Li65Yqo5oCB5Yqg6L295aGe6L+b5p2l55qECiAgICAgICAgaWYgKGZlZWQubWF0Y2hlcygnLldCX2ZlZWRfdHlwZVt5YXdmLWZlZWQtcHJlbG9hZD0ic2hvdyJdIH4gKicpKSBpc1VucmVhZCA9IGZhbHNlOwogICAgICAgIC8vIOS9huaYr+WcqOWQjumdouS4jeS4gOWumuaYr+eOsOWcqOeahOW+ruWNmueahOW8n+W8n+WmueWmue+8jOi/mOWPr+iDveaYr+W8n+W8n+WmueWmueeahOWtqeWtkAogICAgICAgIC8vIOi/meaYr+WboOS4uuS7luS7rOWcqOWHuueOsOaXtuS8muacieS4gOS4quWHuueOsOeahOWKqOeUu++8jOS4uuS6huWBmui/meS4quWKqOeUu+aKiuS7luS7rOWll+WcqOS4gOS4queItuWvueixoemHjOmdouS6hgogICAgICAgIC8vIOWKqOeUu+aSreaUvuWujOaIkOS5i+WQjuS8muiiq+aLv+WHuuadpeeahO+8iOS4jei/h+ivtOWunuivne+8jOi/meWKqOeUu+S4gOiIrOS6uuazqOaEj+S4jeWIsO+8iQogICAgICAgIGlmIChmZWVkLm1hdGNoZXMoJy5XQl9mZWVkX3R5cGVbeWF3Zi1mZWVkLXByZWxvYWQ9InNob3ciXSB+ICogKicpKSBpc1VucmVhZCA9IGZhbHNlOwogICAgICAgIC8vIOacgOaXqeWHuueOsOeahOWHoOadoeS4jeeul+W7tui/n+WKoOi9veeahAogICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZmVlZF90eXBlW3lhd2YtZmVlZC1wcmVsb2FkXScpLmxlbmd0aCA8IDUpIGlzVW5yZWFkID0gZmFsc2U7CiAgICAgICAgLy8g5aaC5p6c5L2c6ICF5piv6Ieq5bex6YKj5LmI5LiN566X5bu26L+f5Yqg6L2955qE77yI5Y+R5b6u6JaE55qE5pe25YCZ5Lya5o+S5YWl5Yiw5pyA5YmN6Z2i77yJCiAgICAgICAgY29uc3QgW2F1dGhvcl0gPSBmZWVkUGFyc2VyLmF1dGhvci5pZChmZWVkKTsKICAgICAgICBjb25zdCBbZmF1dGhvcl0gPSBmZWVkUGFyc2VyLmZhdXRob3IuaWQoZmVlZCk7CiAgICAgICAgaWYgKGluaXQucGFnZS4kQ09ORklHLnVpZCA9PT0gKGZhdXRob3IgfHwgYXV0aG9yKSkgaXNVbnJlYWQgPSBmYWxzZTsKICAgICAgICBmZWVkLnNldEF0dHJpYnV0ZSgneWF3Zi1mZWVkLXByZWxvYWQnLCBpc1VucmVhZCA/ICd1bnJlYWQnIDogJ3Nob3cnKTsKICAgICAgfSk7CgogICAgICAvLyDoh6rliqjovb3lhaXmlrDlhoXlrrkKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiB3YXRjaE5ld0ZlZWRUaXAoKSB7CiAgICAgICAgY29uc3QgdGlwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hvbWVfbmV3X2ZlZWRfdGlwJyk7CiAgICAgICAgaWYgKCF0aXApIHJldHVybjsKICAgICAgICAvLyDlpoLmnpzkuI3lnKjnrKzkuIDpobXmiJbogIXmnInnibnmrornmoTov4fmu6TmnaHku7bpgqPkuYjmsqHms5Xoh6rliqjovb3lhaUKICAgICAgICBjb25zdCBzZWFyY2ggPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2F0aW9uLnNlYXJjaCk7CiAgICAgICAgY29uc3QgY2Fubm90TG9hZCA9IHNlYXJjaC5nZXQoJ3BhZ2UnKSA+IDEgfHwgWydpc19vcmknLCAnaXNfcGljJywgJ2lzX3ZpZGVvJywgJ2lzX211c2ljJywgJ2lzX3NlYXJjaCddLnNvbWUoa2V5ID0+IHNlYXJjaC5nZXQoa2V5KSk7CiAgICAgICAgaWYgKGNhbm5vdExvYWQpIHJldHVybjsKICAgICAgICAvLyDlvq7ljZroh6rlt7Hmiormj5DnpLrnmoTnirbmgIHlkozmlbDph4/lhpnlnKjkuobmj5DnpLrmqKrluYXpgqPkuKrlr7nosaHkuIoKICAgICAgICBjb25zdCAkdGlwID0gdGlwICYmIGJyb3dzZXJJbmZvLm5hbWUgPT09ICdGaXJlZm94JyAmJiB0aXAud3JhcHBlZEpTT2JqZWN0IHx8IHRpcDsKICAgICAgICAvLyBzdGF0dXMg5LiN5pivIGZvbGxvd0hvdCDogIzkuJQgY291bnQgPiAwIOWwseivtOaYjuacieaWsOa2iOaBrwogICAgICAgIGlmICghJHRpcCB8fCAkdGlwLnN0YXR1cyA9PT0gJ2ZvbGxvd0hvdCcpIHJldHVybjsKICAgICAgICBpZiAoISR0aXAuY291bnQpIHJldHVybjsKICAgICAgICAvLyDlpoLmnpzotoXov4cgNTAg5p2h5LuW5Lya6Ieq5Yqo6YeN5paw5Yqg6L2977yM5oiR5Lus6aqX5LuW5LiA5LiLCiAgICAgICAgaWYgKCR0aXAuY291bnQgPiA1MCkgJHRpcC5jb3VudCA9IDUwOwogICAgICAgIHRpcC5jbGljaygpOwogICAgICAgIGlmICh0aXAucGFyZW50Tm9kZSkgdGlwLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGlwKTsKICAgICAgfSk7CgogICAgfSwKICB9KTsKCiAgaG9tZXBhZ2UuZGVza3RvcE5vdGlmeSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl9ob21lcGFnZV9kZXNrdG9wX25vdGlmeScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBob21lcGFnZS5ob21lcGFnZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRzRGVza3RvcE5vdGlmeSwKICAgIHJlZjogeyB3aGl0ZWxpc3Q6IHsgdHlwZTogJ2Jvb2xlYW4nIH0gfSwKICAgIGFpbml0KCkgewogICAgICBjb25zdCB3aGl0ZWxpc3QgPSB0aGlzLnJlZi53aGl0ZWxpc3QuZ2V0Q29uZmlnKCk7CgogICAgICAvLyDlrozmiJDov4fmu6TlkI7lho3mj5DnpLrmnInmnKror7vmtojmga8KICAgICAgb2JzZXJ2ZXIuZmVlZC5vbkZpbmFsbHkoZnVuY3Rpb24gY291bnRVbnJlYWRGZWVkcygpIHsKICAgICAgICBjb25zdCB1bnJlYWRGZWVkcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3lhd2YtZmVlZC1wcmVsb2FkPSJ1bnJlYWQiXTpub3QoW3lhd2YtZmVlZC1ub3RpZnldKScpKTsKICAgICAgICB1bnJlYWRGZWVkcy5mb3JFYWNoKGFzeW5jIGZlZWQgPT4gewogICAgICAgICAgZmVlZC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1ub3RpZnknLCAnJyk7CiAgICAgICAgICBpZiAod2hpdGVsaXN0ICYmIGZlZWQuZ2V0QXR0cmlidXRlKCd5YXdmLWZlZWQtZGlzcGxheScpICE9PSAnc2hvdycpIHJldHVybjsKICAgICAgICAgIGNvbnN0IHRleHQgPSBmZWVkUGFyc2VyLnRleHQuc2ltcGxlKGZlZWQpOwogICAgICAgICAgY29uc3QgW2F1dGhvcl0gPSBmZWVkUGFyc2VyLmF1dGhvci5uYW1lKGZlZWQpOwogICAgICAgICAgY29uc3QgYXZhdGFyID0gZmVlZFBhcnNlci5hdXRob3IuYXZhdGFyKGZlZWQpOwogICAgICAgICAgaWYgKCF0ZXh0IHx8ICFhdXRob3IgfHwgIWF2YXRhcikgcmV0dXJuOwogICAgICAgICAgY29uc3QgdHJ1bmNrZWQgPSB0ZXh0Lmxlbmd0aCA+IDMwMCA/IHRleHQuc2xpY2UoMCwgMjUwKSArICfigKbigKYnIDogdGV4dDsKICAgICAgICAgIGNvbnN0IHVzZXJSZXNwb25zZSA9IGF3YWl0IG5vdGlmaWNhdGlvbnMuc2hvdyh7CiAgICAgICAgICAgIHRpdGxlOiBhdXRob3IsCiAgICAgICAgICAgIGNvbnRlbnQ6IHRydW5ja2VkLAogICAgICAgICAgICBpY29uOiBhdmF0YXIsCiAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAwICsgMTUgKiB0cnVuY2tlZC5sZW5ndGgsCiAgICAgICAgICB9KTsKICAgICAgICAgIGlmICghdXNlclJlc3BvbnNlKSByZXR1cm47CiAgICAgICAgICBzaG93VW5yZWFkRmVlZHMoKTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wICs9IGZlZWQuZ2V0Q2xpZW50UmVjdHMoKVswXS50b3AgLSA4MDsKICAgICAgICAgICAgY29uc3QgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0tleWJvYXJkRXZlbnQnKTsKICAgICAgICAgICAgZXZ0LmluaXRLZXlFdmVudCgna2V5ZG93bicsIHRydWUsIHRydWUsIG51bGwsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCB1dGlsLmtleWJvYXJkLmNvZGUuSiwgMCk7CiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2dCk7CiAgICAgICAgICAgIC8vIOiBiuWkqeeql+WPo++8iOaJk+W8gOWwhuiBiuWkqeeql+WPo+WGheW1jOeahOWKn+iDveWQju+8ieWxleW8gOeahOaXtuWAmeW+iOW9seWTjeW+ruWNmumYheivuwogICAgICAgICAgICAvLyDmiYDku6Xov5nph4zpgIHkuIDkuKogY2xpY2sg5Y+v5Lul5oqK6IGK5aSp56qX5Y+j5pS26LW35p2lCiAgICAgICAgICAgIGZlZWQuY2xpY2soKTsKICAgICAgICAgIH0sIDApOwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9maWx0ZXIvcHJvZmlsZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwoKICBjb25zdCBmaWx0ZXIgPSB5YXdmLnJ1bGVzLmZpbHRlcjsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgaTE4bi5mZWVkc1Byb2ZpbGVHcm91cFRpdGxlID0gewogICAgY246ICfnlKjmiLfkuLvpobUnLAogICAgdHc6ICfnlKjmiLbkuLvpoIEnLAogICAgZW46ICdQcm9maWxlJywKICB9OwoKICBjb25zdCBwcm9maWxlID0gZmlsdGVyLnByb2ZpbGUgPSB7fTsKICBwcm9maWxlLnByb2ZpbGUgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogZmlsdGVyLmZpbHRlciwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRzUHJvZmlsZUdyb3VwVGl0bGUsCiAgfSk7CgogIGkxOG4ucHJvZmlsZVNob3dBbGwgPSB7CiAgICBjbjogJ+eUqOaIt+S4u+mhtem7mOiupOaYvuekuuWFqOmDqOW+ruWNmuiAjOmdnueDremXqOW+ruWNmicsCiAgICB0dzogJ+eUqOaItuS4u+mggem7mOiqjemhr+ekuuWFqOmDqOW+ruWNmuiAjOmdnueDremXqOW+ruWNmicsCiAgICBlbjogJ1BlcnNvbmFsIHBhZ2Ugc2hvdyBhbGwgV2VpYm8gaW5zdGVhZCBvZiBob3QgYnkgZGVmYXVsdCcsCiAgfTsKCiAgcHJvZmlsZS5wcm9maWxlU2hvd0FsbCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl9wcm9maWxlX3Nob3dfYWxsJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IHByb2ZpbGUucHJvZmlsZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnByb2ZpbGVTaG93QWxsLAogICAgYWluaXQoKSB7CiAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gcmVkaXJlY3RQZXJzaW9uYWxXZWlib1JlZGlyZWN0KCkgewogICAgICAgIGNvbnN0IHByb2ZpbGVOYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbaWRePSJQbF9PZmZpY2lhbF9Qcm9maWxlRmVlZE5hdiJdJyk7CiAgICAgICAgaWYgKCFwcm9maWxlTmF2KSByZXR1cm47CiAgICAgICAgY29uc3QgaG90QnV0dG9uID0gcHJvZmlsZU5hdi5xdWVyeVNlbGVjdG9yKCdsaVthY3Rpb24tdHlwZT0ic2VhcmNoX3R5cGUiXVthY3Rpb24tZGF0YSo9ImlzX2hvdD0xIl06bm90KFthY3Rpb24tZGF0YSo9Inlhd2Zfbm90YWxsPTEiXSknKTsKICAgICAgICBpZiAoaG90QnV0dG9uKSBob3RCdXR0b24uc2V0QXR0cmlidXRlKCdhY3Rpb24tZGF0YScsIGhvdEJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJykgKyAnJnlhd2Zfbm90YWxsPTEnKTsKICAgICAgICBjb25zdCBzZWFyY2ggPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2F0aW9uLnNlYXJjaCk7CiAgICAgICAgaWYgKHNlYXJjaC5nZXQoJ2lzX2hvdCcpID09PSAnMScgJiYgc2VhcmNoLmdldCgneWF3Zl9ub3RhbGwnKSAhPT0gJzEnKSB7CiAgICAgICAgICBjb25zdCBhbGwgPSBwcm9maWxlTmF2LnF1ZXJ5U2VsZWN0b3IoJ2xpW2FjdGlvbi10eXBlPSJzZWFyY2hfdHlwZSJdW2FjdGlvbi1kYXRhKj0iaXNfYWxsPTEiXScpOwogICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCgnI18wJywgbG9jYXRpb24uaHJlZik7CiAgICAgICAgICB1cmwuc2VhcmNoID0gYWxsLmdldEF0dHJpYnV0ZSgnYWN0aW9uLWRhdGEnKTsKICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKCdZQVdGXycgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArICdfJyArIChNYXRoLnJhbmRvbSgpICsgJycpLnNsaWNlKDIpLCBudWxsLCB1cmwuaHJlZik7CiAgICAgICAgICBhbGwuY2xpY2soKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIHVwZGF0ZVVzZXJMaW5rc1dpdGhJc0FsbCgpIHsKICAgICAgICBjb25zdCBsaW5rcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChbCiAgICAgICAgICAnYVt1c2VyY2FyZF0nLCAvLyDkuIDoiKznmoTnlKjmiLfpk77mjqUKICAgICAgICAgICcuV0JfZmFjZSBhJywgLy8g5b6u5Y2a55So5oi35aS05YOP77yIdXNlcmNhcmTliqDlnKjpk77mjqXph4zpnaLnmoTlm77niYfkuIrkuobvvIkKICAgICAgICAgICcucGljX2JveCBhW3N1ZGEtdWF0cmFjayo9InVzZXJfcGljIl0nLCAvLyDljZXmnaHlvq7ljZrkuIrmlrnnmoTnlKjmiLcKICAgICAgICAgICcuV0JfYXJ0aWNhbCAubWFpbl9lZGl0b3IgLmF1dGhvcmluZm8gYScsIC8vIOWktOadoeaWh+eroOeahOS9nOiAheS/oeaBrwogICAgICAgICAgJy53ZWJpbV9jaGF0X3dpbmRvdyAuY2hhdF90aXRsZSBhW25vZGUtdHlwZT0iX2NoYXRVc2VyTmFtZSJdJywgLy8g6IGK5aSp56qX5Y+j5LiK55qE55So5oi35ZCNCiAgICAgICAgXS5tYXAoeCA9PiB4ICsgJ1tocmVmXTpub3QoW2hyZWYqPSJpc19hbGwiXSknKS5qb2luKCcsJykpKTsKICAgICAgICBsaW5rcy5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7CiAgICAgICAgICBjb25zdCBzZWFyY2ggPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGwuc2VhcmNoKTsKICAgICAgICAgIHNlYXJjaC5zZXQoJ2lzX2FsbCcsIDEpOwogICAgICAgICAgbC5zZWFyY2ggPSBzZWFyY2g7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvZmlsdGVyL21hbnVhbGx5LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGNvbmZpZyA9IHlhd2YuY29uZmlnOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKICBjb25zdCBmZWVkUGFyc2VyID0geWF3Zi5mZWVkOwoKICBjb25zdCBmaWx0ZXIgPSB5YXdmLnJ1bGVzLmZpbHRlcjsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCB1aSA9IHV0aWwudWk7CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CgogIGkxOG4uZmVlZHNNYW51YWxseUdyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+aJi+WKqOmakOiXjycsCiAgICB0dzogJ+aJi+WLlemaseiXjycsCiAgICBlbjogJ01hbnVhbGx5JywKICB9OwoKICBjb25zdCBtYW51YWxseSA9IGZpbHRlci5tYW51YWxseSA9IHt9OwogIG1hbnVhbGx5Lm1hbnVhbGx5ID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGZpbHRlci5maWx0ZXIsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkc01hbnVhbGx5R3JvdXBUaXRsZSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBtYW51YWxseUhpZGVGZWVkOiB7CiAgICAgIGNuOiAn5Zyo5b6u5Y2a5Y+z5LiK6KeS5pi+56S66ZqQ6JeP5Y2V5p2h5b6u5Y2a55qE5oyJ6ZKufHt7cmVzZXR9fXx7e2l9fScsCiAgICAgIHR3OiAn5Zyo5b6u5Y2a5Y+z5LiK6KeS6aGv56S66Zqx6JeP5Zau5qKd5b6u5Y2a55qE5oyJ6YiVfHt7cmVzZXR9fXx7e2l9fScsCiAgICAgIGVuOiAnU2hvdyBidXR0b25zIGF0IHJpZ2h0IHRvcCBvZiBlYWNoIGZlZWRzIGZvciBoaWRpbmd8e3tyZXNldH19fHt7aX19JywKICAgIH0sCiAgICBtYW51YWxseUhpZGVGZWVkUmVzZXQ6IHsKICAgICAgY246ICfph43nva4nLAogICAgICB0dzogJ+mHjeiorScsCiAgICAgIGVuOiAnUmVzZXQnLAogICAgfSwKICAgIG1hbnVhbGx5SGlkZUZlZWREZXRhaWw6IHsKICAgICAgY246ICfmianlsZXkvJrkv53lrZjmnIDov5HkuIDkuIfmnaHooqvpmpDol4/nmoTlvq7ljZrnmoTnvJblj7fvvIzlubblnKjpgYfliLDov5nkupvlvq7ljZrml7blsIbku5bku6zpmpDol4/jgILov5nkupvlvq7ljZrnmoTnvJblj7flsIbkuI3kvJrljIXlkKvlnKjlr7zlh7rnmoTorr7nva7kuK3vvIzkuJTkuI3kvJrpmo/nnYDlr7zlhaXnmoTorr7nva7ogIzlpLHmlYjjgILph43nva7orr7nva7miJblnKjmraTph43nva7lj6/ku6XmuIXnqbrov5nkuKrliJfooajjgIInLAogICAgfSwKICAgIG1hbnVhbGx5SGlkZUZlZWREaWFsb2dUaXRsZTogewogICAgICBjbjogJ+mHjee9rumakOiXjycsCiAgICAgIHR3OiAn6YeN6Kit6Zqx6JePJywKICAgICAgZW46ICdSZXNldCBIaWRpbmcnLAogICAgfSwKICAgIG1hbnVhbGx5SGlkZUZlZWREaWFsb2dUZXh0OiB7CiAgICAgIGNuOiAn56Gu5a6a5riF6Zmk6ZqQ6JeP5b6u5Y2a55qE5Y6G5Y+y6K6w5b2V5ZCX77yM5riF6Zmk5ZCO5LmL5YmN6ZqQ6JeP55qE5b6u5Y2a5Lya6YeN5paw5pi+56S644CCJywKICAgICAgdHc6ICfnorrlrprmuIXpmaTpmrHol4/lvq7ljZrnmoTmrbflj7LoqJjpjITll47vvIzmuIXpmaTlvozkuYvliY3pmrHol4/nmoTlvq7ljZrmnIPph43mlrDpoa/npLrjgIInLAogICAgICBlbjogJ0NsZWFyIGhpc3Rvcnkgb2YgaGlkaW5nIHdpbGwgbWFrZSB0aGVzZSBmZWVkcyBzaG93biBhZ2Fpbi4gQ2xlYXIgaGlkZGVuIGhpc3Rvcnk/JywKICAgIH0sCiAgICBoaWRlVGhpc0ZlZWQ6IHsKICAgICAgY246ICfpmpDol48nLAogICAgICB0dzogJ+maseiXjycsCiAgICAgIGVuOiAnSGlkZScsCiAgICB9LAogIH0pOwoKICBjb25zdCBoaWRlTGlzdFByb21pc2UgPSBhc3luYyBmdW5jdGlvbiAoKSB7CgogICAgY29uc3QgbWFudWFsbHlIaWRlQ29uZmlnID0gYXdhaXQgY29uZmlnLnBvb2woJ0hpZGUnLCB7CiAgICAgIHVpZDogaW5pdC5wYWdlLiRDT05GSUcudWlkLAogICAgICBpc0xvY2FsOiB0cnVlLAogICAgfSk7CgogICAgcmV0dXJuIG5ldyBydWxlLmNsYXNzLk9mZnNjcmVlbkNvbmZpZ0l0ZW0oewogICAgICBpZDogJ2hpZGVMaXN0JywKICAgICAgY29uZmlnUG9vbDogbWFudWFsbHlIaWRlQ29uZmlnLAogICAgICBnZXQgaW5pdGlhbCgpIHsgcmV0dXJuIFtdOyB9LAogICAgICBub3JtYWxpemUodmFsdWUpIHsKICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm4gW107CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIFtdOwogICAgICAgIHJldHVybiB2YWx1ZS5zbGljZSgwLCAxMDAwKTsKICAgICAgfSwKICAgIH0pOwoKICB9OwoKICBsZXQgaGlkZUxpc3QgPSBudWxsOwogIGluaXQub25SZWFkeShhc3luYyBmdW5jdGlvbiAoKSB7CiAgICBoaWRlTGlzdCA9IGF3YWl0IGhpZGVMaXN0UHJvbWlzZSgpOwogIH0sIHsgcHJpb3JpdHk6IHV0aWwucHJpb3JpdHkuQkVGT1JFIH0pOwoKICBtYW51YWxseS5tYW51YWxseUhpZGVGZWVkID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmlsdGVyX21hbnVhbGx5X2hpZGUnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogbWFudWFsbHkubWFudWFsbHksCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5tYW51YWxseUhpZGVGZWVkLAogICAgcmVmOiB7CiAgICAgIHJlc2V0OiB7CiAgICAgICAgcmVuZGVyKCkgewogICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxhIGNsYXNzPSJXX2J0bl9iIHlhd2YtbWFudWFsbHktaGlkZS1yZXNldCIgaHJlZj0iamF2YXNjcmlwdDo7Ij48c3BhbiBjbGFzcz0iV19mMTQiPjwvc3Bhbj48L2E+JzsKICAgICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQgPSBpMThuLm1hbnVhbGx5SGlkZUZlZWRSZXNldDsKICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdhJyk7CiAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBldmVudCA9PiB7CiAgICAgICAgICAgIGlmICghZXZlbnQuaXNUcnVzdGVkKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IGFuc3dlciA9IGF3YWl0IHVpLmNvbmZpcm0oewogICAgICAgICAgICAgIGlkOiAneWF3Zi1pbXBvcnQtZmFpbGVkJywKICAgICAgICAgICAgICB0aXRsZTogaTE4bi5tYW51YWxseUhpZGVGZWVkRGlhbG9nVGl0bGUsCiAgICAgICAgICAgICAgdGV4dDogaTE4bi5tYW51YWxseUhpZGVGZWVkRGlhbG9nVGV4dCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmICghYW5zd2VyKSByZXR1cm47CiAgICAgICAgICAgIGF3YWl0IGhpZGVMaXN0LmNvbmZpZ1Bvb2wucmVzZXQoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGJ1dHRvbjsKICAgICAgICB9LAogICAgICB9LAogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4ubWFudWFsbHlIaWRlRmVlZERldGFpbCB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICBjb25zdCBjcmVhdGVTY3JlZW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc3Qgc2NyZWVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgc2NyZWVuLmNsYXNzTGlzdCA9ICdXQl9zY3JlZW4gV19mcic7CiAgICAgICAgcmV0dXJuIHNjcmVlbjsKICAgICAgfTsKICAgICAgY29uc3QgY3JlYXRlSGlkZUJveCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zdCBoaWRlQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgaGlkZUJveC5jbGFzc0xpc3QgPSAneWF3Zi1oaWRlLWJveCc7CiAgICAgICAgaGlkZUJveC5pbm5lckhUTUwgPSAnPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+PGkgY2xhc3M9IldfZmljb24gZmljb25fY2xvc2UgU19maWNvbiI+WDwvaT48L2E+JzsKICAgICAgICBoaWRlQm94LnF1ZXJ5U2VsZWN0b3IoJ2EnKS50aXRsZSA9IGkxOG4uaGlkZVRoaXNGZWVkOwogICAgICAgIHJldHVybiBoaWRlQm94OwogICAgICB9OwogICAgICBjb25zdCBoaWRlRmVlZEV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uIChmZWVkLCBtaWQpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgICAgZmVlZC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ3RyYW5zaXRpb246IG1heC1oZWlnaHQgb3BhY2l0eSAwLjJzOyBtYXgtaGVpZ2h0OiAnICsgZmVlZC5jbGllbnRIZWlnaHQgKyAncHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsnKTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyBmZWVkLnN0eWxlLm1heEhlaWdodCA9ICcyMHB4JzsgfSwgMCk7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgZmVlZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGZlZWQpOyB9LCAxMDApOwogICAgICAgICAgY29uc3QgbGlzdCA9IGhpZGVMaXN0LmdldENvbmZpZygpOwogICAgICAgICAgbGlzdC51bnNoaWZ0KG1pZCk7CiAgICAgICAgICBsaXN0LnNwbGljZSgxZTQpOwogICAgICAgICAgaGlkZUxpc3Quc2V0Q29uZmlnKGxpc3QpOwogICAgICAgIH07CiAgICAgIH07CiAgICAgIG9ic2VydmVyLmZlZWQub25GaW5hbGx5KGZ1bmN0aW9uIChmZWVkKSB7CiAgICAgICAgY29uc3QgW2F1dGhvcl0gPSBmZWVkUGFyc2VyLmF1dGhvci5pZChmZWVkKTsKICAgICAgICBjb25zdCBbZmF1dGhvcl0gPSBmZWVkUGFyc2VyLmZhdXRob3IuaWQoZmVlZCk7CiAgICAgICAgY29uc3QgYXV0aG9ySWQgPSBmYXV0aG9yIHx8IGF1dGhvcjsKICAgICAgICBpZiAoIWF1dGhvcklkIHx8IGF1dGhvcklkID09PSBpbml0LnBhZ2UuJENPTkZJRy51aWQpIHJldHVybjsgLy8g6Ieq5bex55qE5b6u5Y2a77yM5LiN5pi+56S65oyJ6ZKuCiAgICAgICAgaWYgKGZlZWQubWF0Y2hlcygnI3Y2X3BsX2NvbnRlbnRfYXRtZXdlaWJvIConKSkgcmV0dXJuOyAvLyDkuI3lnKjmj5DliLDpobXpnaLmmL7npLrvvIzpgb/lhY3kuI7igJzlsY/olL1hdOKAneWPkeeUn+atp+S5iQogICAgICAgIGlmIChmZWVkLmhhc0F0dHJpYnV0ZSgneWF3Zi1oaWRlLWJveCcpKSByZXR1cm47IC8vIOW3sue7j+acieS6huaMiemSru+8jOS4jeaYvuekuuaMiemSrgogICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5zY3JlZW5fYm94IC5maWNvbl9jbG9zZScpKSByZXR1cm47IC8vIOW5v+WRiuW+ruWNmuWPs+S4iuinkuW3sue7j+acieS4quWPieS6hu+8jOWwseS4jeWGjeW8hOS4gOS4quS6hgogICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbaWRePSJQbF9PZmZpY2lhbF9XZWlib0RldGFpbF9fIl0nKSkgcmV0dXJuOyAvLyDljZXmnaHlvq7ljZrpobXpnaLvvIzkuI3mmL7npLrmjInpkq4KICAgICAgICBpZiAoIWZlZWQuaGFzQXR0cmlidXRlKCdtaWQnKSkgcmV0dXJuOyAvLyDkuI3mmK/lvq7ljZrvvIzkuI3mmL7npLrmjInpkq4KICAgICAgICBmZWVkLnNldEF0dHJpYnV0ZSgneWF3Zi1oaWRlLWJveCcsICd5YXdmLWhpZGUtYm94Jyk7CiAgICAgICAgY29uc3QgbWlkID0gZmVlZC5nZXRBdHRyaWJ1dGUoJ21pZCcpOwogICAgICAgIGNvbnN0IHNjcmVlbkJveCA9IGZlZWQucXVlcnlTZWxlY3RvcignLldCX3NjcmVlbiAuc2NyZWVuX2JveCcpOwogICAgICAgIGlmIChtaWQgJiYgc2NyZWVuQm94KSB7CiAgICAgICAgICBjb25zdCBoaWRlQm94ID0gc2NyZWVuQm94LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNyZWF0ZUhpZGVCb3goKSwgc2NyZWVuQm94KTsKICAgICAgICAgIGhpZGVCb3gucXVlcnlTZWxlY3RvcignYScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZUZlZWRFdmVudEhhbmRsZXIoZmVlZCwgbWlkKSk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IG9taWQgPSBmZWVkLmdldEF0dHJpYnV0ZSgnb21pZCcpOwogICAgICAgIGNvbnN0IGV4cGFuZCA9IGZlZWQucXVlcnlTZWxlY3RvcignLldCX2V4cGFuZCcpOwogICAgICAgIGlmIChvbWlkICYmIGV4cGFuZCkgewogICAgICAgICAgY29uc3Qgc2NyZWVuID0gZXhwYW5kLmluc2VydEJlZm9yZShjcmVhdGVTY3JlZW4oKSwgZXhwYW5kLmZpcnN0Q2hpbGQpOwogICAgICAgICAgY29uc3QgaGlkZUJveCA9IHNjcmVlbi5hcHBlbmRDaGlsZChjcmVhdGVIaWRlQm94KCkpOwogICAgICAgICAgaGlkZUJveC5xdWVyeVNlbGVjdG9yKCdhJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlRmVlZEV2ZW50SGFuZGxlcihmZWVkLCBvbWlkKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgY3NzLmFwcGVuZChgCi5XQl9zY3JlZW4gLnlhd2YtaGlkZS1ib3ggeyBtYXJnaW46IC0xMHB4IDAgMCAtMTdweDsgcG9zaXRpb246IGFic29sdXRlOyB9Ci5XQl9zY3JlZW4gLnlhd2YtaGlkZS1ib3ggLldfZmljb24geyBmb250LXNpemU6IDE4cHg7IGhlaWdodDogMTZweDsgcGFkZGluZzogNHB4IDAgNnB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0KLldCX3NjcmVlbiAueWF3Zi1oaWRlLWJveCB+IC5zY3JlZW5fYm94IHsgbWFyZ2luOiAtMTBweCAwIDAgLTM3cHg7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgfQouV0Jfc2NyZWVuIC55YXdmLWhpZGUtYm94IH4gLnNjcmVlbl9ib3ggLldfZmljb24sIC5XQl9zY3JlZW4gLnlhd2YtaGlkZV9ib3ggLldfZmljb24geyB3aWR0aDogMjBweDsgfQouV0Jfc2NyZWVuIC55YXdmLWhpZGUtYm94IH4gLnNjcmVlbl9ib3ggLmxheWVyX21lbnVfbGlzdCB7IHJpZ2h0OiAtNHB4OyB9Ci5XQl9leHBhbmQgLldCX3NjcmVlbiB7IG1hcmdpbi10b3A6IDVweDsgfQpgKTsKICAgIH0sCiAgICBpbml0KCkgewogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiBzaG93TXlGZWVkKGZlZWQpIHsKICAgICAgICAvLyDpgInpobnnmoTlvIDlhbPlj6rlvbHlk43mmK/lkKbmmL7npLrmjInpkq7vvIzov4fmu6Top4TliJnmgLvmmK/miafooYwKICAgICAgICBjb25zdCBtaWQgPSBmZWVkLmdldEF0dHJpYnV0ZSgnbWlkJyk7CiAgICAgICAgY29uc3Qgb21pZCA9IGZlZWQuZ2V0QXR0cmlidXRlKCdvbWlkJyk7CiAgICAgICAgY29uc3QgbWlkTGlzdCA9IGhpZGVMaXN0LmdldENvbmZpZygpOwogICAgICAgIGlmIChtaWRMaXN0LmluY2x1ZGVzKG1pZCkpIHJldHVybiAnaGlkZSc7CiAgICAgICAgaWYgKG1pZExpc3QuaW5jbHVkZXMob21pZCkpIHJldHVybiAnaGlkZSc7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0sIHsgcHJpb3JpdHk6IDFlNCB9KTsKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2ZpbHRlci9wYXVzZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgcGFnZW1lbnUgPSB5YXdmLnBhZ2VtZW51OwoKICBjb25zdCBmaWx0ZXIgPSB5YXdmLnJ1bGVzLmZpbHRlcjsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgaTE4bi5mZWVkc1BhdXNlR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn5pqC5YGc6L+H5rukJywKICAgIHR3OiAn5pqr5YGc56+p6YG4JywKICAgIGVuOiAnUGF1c2UgRmlsdGVyJywKICB9OwoKICBjb25zdCBwYXVzZSA9IGZpbHRlci5wYXVzZSA9IHt9OwogIHBhdXNlLnBhdXNlID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGZpbHRlci5maWx0ZXIsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkc1BhdXNlR3JvdXBUaXRsZSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBwYXVzZUZpbHRlcjogewogICAgICBjbjogJ+S4tOaXtuemgeeUqOaJgOacieW+ruWNmui/h+a7pOinhOWImXx7e2l9fScsCiAgICAgIHR3OiAn5pqr5pmC5YGc55So5omA5pyJ5b6u5Y2a56+p6YG46KaP5YmHfHt7aX19JywKICAgICAgZW46ICdEaXNhYmxlIGFsbCBmZWVkIGZpbHRlcnMgdGVtcG9yYXJpbHl8e3tpfX0nLAogICAgfSwKICAgIHBhdXNlRmlsdGVyRGV0YWlsOiB7CiAgICAgIGNuOiAn6YCJ5oup5ZCO5bCG5Lya5pqC5YGc5omA5pyJ5b6u5Y2a6L+H5ruk55u45YWz55qE5Yqf6IO977yM6KaB5p+l55yL5bey6KKr6ZqQ6JeP55qE6KeE5YiZ6ZyA6KaB5Yi35paw6aG16Z2i44CC5YW25LuW5Yqf6IO95LiN5Y+X5b2x5ZON44CCJywKICAgIH0sCiAgICBwYXVzZUZpbHRlck1lbnU6IHsKICAgICAgY246ICfmmoLlgZzlvq7ljZrov4fmu6QnLAogICAgICB0dzogJ+aaq+WBnOW+ruWNmuevqemBuCcsCiAgICAgIGVuOiAnUGF1c2UgRmlsdGVyJywKICAgIH0sCiAgICBwYXVzZUZpbHRlckNvbmZpZ1dhcm5pbmc6IHsKICAgICAgY246ICfmgqjlt7LnpoHnlKjlvq7ljZrov4fmu6Tlip/og73vvIzpg6jliIborr7nva7lsIbkuI3nlJ/mlYgnLAogICAgICB0dzogJ+aCqOW3suWBnOeUqOW+ruWNmuevqemBuOWKn+iDve+8jOmDqOWIhuioreWumuWwh+S4jeeUn+aViCcsCiAgICAgIGVuOiAnRmlsdGVycyBoYXMgYmVlbiBwYXVzZWQuIFNvbWUgc2V0dGluZ3MgbWF5IG5vdCB0YWtlIGVmZmVjdC4nLAogICAgfSwKICAgIHBhdXNlRmlsdGVyQ29uZmlnRW5hYmxlOiB7CiAgICAgIGNuOiAn5ZCv55So6L+H5ruk6KeE5YiZJywKICAgICAgdHc6ICfllZ/nlKjpgY7mv77opo/liYcnLAogICAgICBlbjogJ0VuYWJsZSBGaWx0ZXJzJywKICAgIH0sCiAgICBwYXVzZUZpbHRlck1lbnVFbmFibGVkOiB7CiAgICAgIGNuOiAn5ZCv55So5b6u5Y2a6L+H5rukJywKICAgICAgdHc6ICfllZ/nlKjlvq7ljZrpgY7mv74nLAogICAgICBlbjogJ0VuYWJsZSBGaWx0ZXJzJywKICAgIH0sCiAgICBwYXVzZUZpbHRlck1lbnVEaXNhYmxlZDogewogICAgICBjbjogJ+aaguWBnOW+ruWNmui/h+a7pCcsCiAgICAgIHR3OiAn5pqr5YGc5b6u5Y2a56+p6YG4JywKICAgICAgZW46ICdQYXVzZSBGaWx0ZXJzJywKICAgIH0sCiAgICBwYXVzZUZpbHRlckZlZWRXYXJuaW5nOiB7CiAgICAgIGNuOiAn5b6u5Y2a6L+H5ruk6KeE5YiZ5bey5pqC5YGc77yM5Lul5LiL5b6u5Y2a5Y+v6IO95pyq57uP6L+H5ruk77yM54K55q2k5ZCv55So6L+H5ruk6KeE5YiZJywKICAgICAgdHc6ICflvq7ljZrnr6npgbjopo/liYflt7LmmqvlgZzvvIzku6XkuIvlvq7ljZrlj6/og73mnKrntpPnr6npgbjvvIzmjInmraTllZ/nlKjnr6npgbjopo/liYcnLAogICAgICBlbjogJ0ZlZWQgZmlsdGVycyBoYXMgYmVlbiBkaXNhYmxlZC4gQ2xpY2sgaGVyZSB0byBlbmFibGUgZmlsdGVycy4nLAogICAgfSwKICB9KTsKCgogIHBhdXNlLnBhdXNlRmlsdGVyID0gcnVsZS5SdWxlKHsKICAgIGlkOiAncGF1c2VfZmlsdGVyJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IHBhdXNlLnBhdXNlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ucGF1c2VGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnBhdXNlRmlsdGVyRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CgogICAgICAvLyDlhbblrp7lrp7njrDpgLvovpHlvojnroDljZXvvIzlsLHmmK/lo7DmmI7kuIDkuKrkvJjlhYjnuqflvojpq5jnmoTov4fmu6Top4TliJnvvIzml6DorrrnnIvliLDku4DkuYjvvIzpg73or7TkuI3nlKjnu6fnu63ov4fmu6TkuoYKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gcGF1c2VGaWx0ZXJGaWx0ZXIoLyoqIEB0eXBlIHtFbGVtZW50fSAqL2ZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIHJldHVybiAndW5zZXQnOyAvLyDml6LkuI3mmK/nmb3lkI3ljZXvvIzkuZ/kuI3pmpDol48KICAgICAgfSwgeyBwcmlvcml0eTogMWU2IH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKCiAgICAgIC8vIOWcqOiuvue9rueql+WPo+S4iuaYvuekuuWkp+Wkp+eahOaPkOekuuaWh+Wtl++8jOivtOaYjui/h+a7pOWKn+iDveiiq+aaguWBnOS6hgogICAgICBjb25zdCBhZGROb3RpY2VJbkNvbmZpZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHsKICAgICAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueWF3Zi1jb25maWctYm9keS55YXdmLWNvbmZpZy1maWx0ZXItcGF1c2UnKTsKICAgICAgICAgIGlmICghYm9keSkgcmV0dXJuOwogICAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCd5YXdmLWNvbmZpZy1maWx0ZXItcGF1c2UnKTsKICAgICAgICAgIGNvbnN0IG5vdGljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWNvbmZpZy1maWx0ZXItcGF1c2Utbm90aWNlJyk7CiAgICAgICAgICBub3RpY2UucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub3RpY2UpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnlhd2YtY29uZmlnLWJvZHk6bm90KC55YXdmLWNvbmZpZy1maWx0ZXItcGF1c2UpJyk7CiAgICAgICAgaWYgKCFib2R5KSByZXR1cm47CiAgICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKCd5YXdmLWNvbmZpZy1maWx0ZXItcGF1c2UnKTsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9Inlhd2YtY29uZmlnLWZpbHRlci1wYXVzZS1ub3RpY2UgU19saW5rMV9iciI+PHNwYW4+PC9zcGFuPjxhIGhyZWY9ImphdmFzY3JpcHQ6OyIgY2xhc3M9IldfYnRuX2IgeWF3Zi1jb25maWctZmlsdGVyLWVuYWJsZSI+PHNwYW4gY2xhc3M9IldfZjE0Ij48L3NwYW4+PC9hPjwvZGl2Pic7CiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS50ZXh0Q29udGVudCA9IGkxOG4ucGF1c2VGaWx0ZXJDb25maWdXYXJuaW5nOwogICAgICAgIGNvbnN0IGJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdhJyk7CiAgICAgICAgYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS50ZXh0Q29udGVudCA9IGkxOG4ucGF1c2VGaWx0ZXJDb25maWdFbmFibGU7CiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICAgIHJ1bGUuc2V0Q29uZmlnKGZhbHNlKTsKICAgICAgICB9KTsKICAgICAgICBib2R5Lmluc2VydEJlZm9yZShjb250YWluZXIuZmlyc3RDaGlsZCwgYm9keS5maXJzdENoaWxkKTsKICAgICAgfTsKCiAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gY29uZmlnTm90aWNlKCkgewogICAgICAgIGFkZE5vdGljZUluQ29uZmlnKCk7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgYWRkTm90aWNlSW5Db25maWcoKTsgfSk7CgogICAgICAvLyDlnKjmvI/mlpflm77moIfkuIvpnaLnmoToj5zljZXph4zpnaLvvIzkuZ/mlL7kuIrov5nkuKoKICAgICAgY29uc3QgbWVudVRleHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBpMThuLnBhdXNlRmlsdGVyTWVudUVuYWJsZWQ7CiAgICAgICAgcmV0dXJuIGkxOG4ucGF1c2VGaWx0ZXJNZW51RGlzYWJsZWQ7CiAgICAgIH07CiAgICAgIGNvbnN0IG1lbnVpdGVtID0gcGFnZW1lbnUuYWRkKHsKICAgICAgICB0aXRsZTogbWVudVRleHQsCiAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc3Qgb2xkQ29uZmlnID0gcnVsZS5nZXRDb25maWcoKTsKICAgICAgICAgIHJ1bGUuc2V0Q29uZmlnKCFvbGRDb25maWcpOwogICAgICAgIH0sCiAgICAgICAgc2VjdGlvbjogMTAsCiAgICAgICAgb3JkZXI6IDEsCiAgICAgIH0pOwogICAgICA7IChhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc3QgaXRlbSA9IGF3YWl0IG1lbnVpdGVtOwogICAgICAgIHJ1bGUuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBpdGVtLnRleHQobWVudVRleHQpOyB9KTsKICAgICAgICBpdGVtLnRleHQobWVudVRleHQpOwogICAgICB9KCkpOwoKICAgICAgLy8g5Zyo5raI5oGv5rWB6aG256uv77yM5YaN5pS+5LiK6L+Z5LiqCiAgICAgIG9ic2VydmVyLmZlZWQub25CZWZvcmUoZnVuY3Rpb24gKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybjsKICAgICAgICBjb25zdCB0eXBlID0gaW5pdC5wYWdlLnR5cGUoKTsKICAgICAgICBpZiAodHlwZSA9PT0gJ2ZhdicgfHwgdHlwZSA9PT0gJ2xpa2UnKSByZXR1cm47CiAgICAgICAgY29uc3QgbGlzdCA9IGZlZWQuY2xvc2VzdCgnLldCX2ZlZWQnKTsKICAgICAgICBpZiAoIWxpc3QpIHJldHVybjsgLy8g5pCc57Si6aG16Z2iCiAgICAgICAgY29uc3QgY29udGFpbmVyID0gbGlzdC5wYXJlbnROb2RlOwogICAgICAgIGNvbnN0IHNpYmxpbmcgPSBjb250YWluZXIucHJldmlvdXNTaWJsaW5nOwogICAgICAgIGlmIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7CiAgICAgICAgICBpZiAoc2libGluZy5tYXRjaGVzKCcueWF3Zi1mZWVkLWZpbHRlci1wYXVzZS1ub3RpY2UnKSkgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgd3JhcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ieWF3Zi1mZWVkLWZpbHRlci1wYXVzZS1ub3RpY2UgU19iZzIiPjxhIGNsYXNzPSJTX3R4dDEiPjwvYT48L2Rpdj4nOwogICAgICAgIGNvbnN0IGJ1dHRvbiA9IHdyYXAucXVlcnlTZWxlY3RvcignYScpOwogICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGkxOG4ucGF1c2VGaWx0ZXJGZWVkV2FybmluZzsKICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgICAgcnVsZS5zZXRDb25maWcoZmFsc2UpOwogICAgICAgIH0pOwogICAgICAgIGNvbnRhaW5lci5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwLmZpcnN0Q2hpbGQsIGNvbnRhaW5lcik7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsKICAgICAgICBpZiAocnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuOwogICAgICAgIGNvbnN0IG5vdGljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZlZWQtZmlsdGVyLXBhdXNlLW5vdGljZScpOwogICAgICAgIGlmIChub3RpY2UpIG5vdGljZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vdGljZSk7CiAgICAgIH0pOwoKICAgICAgY3NzLmFwcGVuZChgCi55YXdmLWNvbmZpZy1maWx0ZXItcGF1c2Utbm90aWNlIHsgYm9yZGVyLXdpZHRoOiA1cHg7IGJvcmRlci1zdHlsZTogc29saWQ7IHBhZGRpbmc6IDEwcHg7IGZvbnQtc2l6ZTogMTE1JTsgfQoueWF3Zi1jb25maWctZmlsdGVyLWVuYWJsZSB7IGZsb2F0OiByaWdodDsgbWFyZ2luOiAtMnB4OyB9Ci55YXdmLWZlZWQtZmlsdGVyLXBhdXNlLW5vdGljZSB7IHRleHQtYWxpZ246IGNlbnRlcjsgbGluZS1oZWlnaHQ6IDMxcHg7IG1hcmdpbi1ib3R0b206IDEwcHg7IGJvcmRlci1yYWRpdXM6IDNweDsgZm9udC1zaXplOiAxMTUlOyB9CmApOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvY29udGVudC9jb250ZW50LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgaTE4bi5jb250ZW50VGFiVGl0bGUgPSB7CiAgICBjbjogJ+WGheWuuScsCiAgICB0dzogJ+WFp+WuuScsCiAgICBlbjogJ0NvbnRlbnQnLAogIH07CgogIGNvbnN0IGNvbnRlbnQgPSB5YXdmLnJ1bGVzLmNvbnRlbnQgPSB7fTsKICBjb250ZW50LmNvbnRlbnQgPSBydWxlLlRhYih7CiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jb250ZW50VGFiVGl0bGUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2NvbnRlbnQvdGV4dC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY29udGVudFRleHRHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ5YaF5a655YWz6ZSu6K+N6L+H5rukJywKICAgICAgdHc6ICfmjInlhaflrrnpl5zpjbXlrZfnr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBDb250ZW50IEtleXdvcmRzJywKICAgIH0sCiAgICB0ZXh0Q29udGVudFNob3c6IHsKICAgICAgY246ICfmgLvmmK/mmL7npLrljIXlkKvku6XkuIvlhoXlrrnnmoTlvq7ljZp8fOWFs+mUruivjXt7aXRlbXN9fScsCiAgICAgIHR3OiAn5oC75piv5pi+56S65YyF5ZCr5Lul5LiL5YWn5a6555qE5b6u5Y2afHzpl5zpjbXlrZd7e2l0ZW1zfX0nLAogICAgICBlbjogJ0Fsd2F5cyBzaG93IGZlZWRzIHdpdGggdGhlc2UgY29udGVudHx8a2V5d29yZCB7e2l0ZW1zfX0nLAogICAgfSwKICAgIHRleHRDb250ZW50SGlkZTogewogICAgICBjbjogJ+makOiXj+WMheWQq+S7peS4i+WGheWuueeahOW+ruWNmnx85YWz6ZSu6K+Ne3tpdGVtc319JywKICAgICAgdHc6ICfpmrHol4/ljIXlkKvku6XkuIvlhaflrrnnmoTlvq7ljZp8fOmXnOmNteWtl3t7aXRlbXN9fScsCiAgICAgIGVuOiAnSGlkZSBmZWVkcyB3aXRoIHRoZXNlIGNvbnRlbnR8fGtleXdvcmQge3tpdGVtc319JywKICAgIH0sCiAgICB0ZXh0Q29udGVudEZvbGQ6IHsKICAgICAgY246ICfmipjlj6DljIXlkKvku6XkuIvlhoXlrrnnmoTlvq7ljZp8fOWFs+mUruivjXt7aXRlbXN9fScsCiAgICAgIHR3OiAn5oqY55aK5YyF5ZCr5Lul5LiL5YWn5a6555qE5b6u5Y2afHzpl5zpjbXlrZd7e2l0ZW1zfX0nLAogICAgICBlbjogJ0ZvbGQgZmVlZHMgd2l0aCB0aGVzZSBjb250ZW50fHxrZXl3b3JkIHt7aXRlbXN9fScsCiAgICB9LAogICAgdGV4dENvbnRlbnRSZWFzb246IHsKICAgICAgY246ICflhbPplK7or43igJx7MX3igJ0nLAogICAgICB0dzogJ+WFs+mUruWtl+OAjHsxfeOAjScsCiAgICAgIGVuOiAnY29udGVudCAiezF9IicsCiAgICB9LAogIH0pOwoKICBjbGFzcyBUZXh0RmVlZFJ1bGUgZXh0ZW5kcyBydWxlLmNsYXNzLlJ1bGUgewogICAgZ2V0IHdlaWJvVmVyc2lvbigpIHsgcmV0dXJuIHRoaXMuZmVlZEFjdGlvbiA9PT0gJ2ZvbGQnID8gWzZdIDogWzYsIDddOyB9CiAgICBjb25zdHJ1Y3RvcihpdGVtKSB7CiAgICAgIHN1cGVyKGl0ZW0pOwogICAgfQogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHRleHRGZWVkRmlsdGVyKC8qKiBAdHlwZSB7RWxlbWVudH0gKi9mZWVkKSB7CiAgICAgICAgY29uc3QgdGV4dCA9IGZlZWRQYXJzZXIudGV4dC5zaW1wbGUoZmVlZCkudG9Mb3dlckNhc2UoKTsKICAgICAgICBjb25zdCBrZXl3b3JkcyA9IHJ1bGUucmVmLml0ZW1zLmdldENvbmZpZygpOwogICAgICAgIGNvbnN0IGNvbnRhaW4gPSBrZXl3b3Jkcy5maW5kKGtleXdvcmQgPT4gdGV4dC5pbmNsdWRlcyhrZXl3b3JkLnRvTG93ZXJDYXNlKCkpKTsKICAgICAgICBpZiAoIWNvbnRhaW4pIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHJlYXNvblRleHQgPSBjb250YWluLmxlbmd0aCA+IDggPyBjb250YWluLnNsaWNlKDAsIDYpICsgJ+KApicgOiBjb250YWluOwogICAgICAgIGNvbnN0IHJlYXNvbiA9IGkxOG4udGV4dENvbnRlbnRSZWFzb24ucmVwbGFjZSgnezF9JywgKCkgPT4gcmVhc29uVGV4dCk7CiAgICAgICAgcmV0dXJuIHsgcmVzdWx0OiBydWxlLmZlZWRBY3Rpb24sIHJlYXNvbiB9OwogICAgICB9LCB7IHByaW9yaXR5OiB0aGlzLnByaW9yaXR5IH0pOwogICAgICB0aGlzLnJlZi5pdGVtcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9CiAgfQoKICBydWxlLmdyb3Vwcyh7CiAgICBiYXNlQ2xhc3M6IFRleHRGZWVkUnVsZSwKICAgIHRhYjogJ2NvbnRlbnQnLAogICAga2V5OiAndGV4dCcsCiAgICB2ZXJzaW9uOiAxLAogICAgdHlwZTogJ3N0cmluZ3MnLAogICAgdGl0bGU6ICgpID0+IGkxOG4uY29udGVudFRleHRHcm91cFRpdGxlLAogICAgZGV0YWlsczogewogICAgICBoaWRlOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4udGV4dENvbnRlbnRIaWRlLAogICAgICB9LAogICAgICBzaG93OiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4udGV4dENvbnRlbnRTaG93LAogICAgICB9LAogICAgICBmb2xkOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4udGV4dENvbnRlbnRGb2xkLAogICAgICB9LAogICAgfSwKICAgIGZhc3Q6IHsKICAgICAgdHlwZXM6IFtbJ3RleHQnXSwgWydjb21tZW50J11dLAogICAgICByYWRpb0dyb3VwOiAndGV4dCcsCiAgICAgIHJlbmRlcjogZmVlZFBhcnNlci5mYXN0LnJlbmRlci50ZXh0LAogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvY29udGVudC9yZWdleC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgaTE4bi5jb250ZW50UmVnZXhHcm91cFRpdGxlID0gewogICAgY246ICfmjInlhoXlrrnmraPliJnlvI/ov4fmu6QnLAogICAgaGs6ICfmjInlhaflrrnmraPliYflvI/nr6npgbgnLAogICAgdHc6ICfmjInlhaflrrnmraPopo/lvI/nr6npgbgnLAogICAgZW46ICdGaWx0ZXIgYnkgQ29udGVudCBSZWdleCcsCiAgfTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICByZWdleENvbnRlbnRTaG93OiB7CiAgICAgIGNuOiAn5oC75piv5pi+56S65Yy56YWN5Lul5LiL5q2j5YiZ6KGo6L6+5byP55qE5b6u5Y2afHzmraPliJnlvI97e2l0ZW1zfX0nLAogICAgICBoazogJ+aAu+aYr+aYvuekuuWMuemFjeS7peS4i+ato+WJh+ihqOmBlOW8j+eahOW+ruWNmnx85q2j5YmH5byPe3tpdGVtc319JywKICAgICAgdHc6ICfmgLvmmK/mmL7npLrljLnphY3ku6XkuIvmraPopo/ooajnpLrlvI/nmoTlvq7ljZp8fOato+imj+W8j3t7aXRlbXN9fScsCiAgICAgIGVuOiAnQWx3YXlzIHNob3cgZmVlZHMgbWF0Y2ggdGhlc2UgcmVnZXhlbnx8UmVnZXhlbiB7e2l0ZW1zfX0nLAogICAgfSwKICAgIHJlZ2V4Q29udGVudEhpZGU6IHsKICAgICAgY246ICfpmpDol4/ljLnphY3ku6XkuIvmraPliJnooajovr7lvI/nmoTlvq7ljZp8fOato+WImeW8j3t7aXRlbXN9fScsCiAgICAgIGhrOiAn6Zqx6JeP5Yy56YWN5Lul5LiL5q2j5YmH6KGo6YGU5byP55qE5b6u5Y2afHzmraPliYflvI97e2l0ZW1zfX0nLAogICAgICB0dzogJ+maseiXj+WMuemFjeS7peS4i+ato+imj+ihqOekuuW8j+eahOW+ruWNmnx85q2j6KaP5byPe3tpdGVtc319JywKICAgICAgZW46ICdIaWRlIGZlZWRzIG1hdGNoIHRoZXNlIHJlZ2V4ZW58fFJlZ2V4ZW4ge3tpdGVtc319JywKICAgIH0sCiAgICByZWdleENvbnRlbnRGb2xkOiB7CiAgICAgIGNuOiAn5oqY5Y+g5Yy56YWN5Lul5LiL5q2j5YiZ6KGo6L6+5byP55qE5b6u5Y2afHzmraPliJnlvI97e2l0ZW1zfX0nLAogICAgICBoazogJ+aKmOWPoOWMuemFjeS7peS4i+ato+WJh+ihqOmBlOW8j+eahOW+ruWNmnx85q2j5YmH5byPe3tpdGVtc319JywKICAgICAgdHc6ICfmipjlj6DljLnphY3ku6XkuIvmraPopo/ooajnpLrlvI/nmoTlvq7ljZp8fOato+imj+W8j3t7aXRlbXN9fScsCiAgICAgIGVuOiAnRm9sZCBmZWVkcyBtYXRjaCB0aGVzZSByZWdleGVufHxSZWdleGVuIHt7aXRlbXN9fScsCiAgICB9LAogICAgcmVnZXhDb250ZXh0UmVhc29uOiB7CiAgICAgIGNuOiAn5q2j5YiZ5Yy56YWNJywKICAgICAgaGs6ICfmraPliYfnrKblkIgnLAogICAgICB0dzogJ+ato+imj+espuWQiCcsCiAgICAgIGVuOiAncmVnZXhwIG1hdGNoZWQnLAogICAgfSwKICB9KTsKCiAgY2xhc3MgUmVnZXhGZWVkUnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gdGhpcy5mZWVkQWN0aW9uID09PSAnZm9sZCcgPyBbNl0gOiBbNiwgN107IH0KICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gcmVnZXhGZWVkRmlsdGVyKC8qKiBAdHlwZSB7RWxlbWVudH0gKi9mZWVkKSB7CiAgICAgICAgY29uc3QgdGV4dCA9IGZlZWRQYXJzZXIudGV4dC5kZXRhaWwoZmVlZCk7CiAgICAgICAgY29uc3QgcmVnZXhlbiA9IHJ1bGUucmVmLml0ZW1zLmdldENvbmZpZ0NvbXBpbGVkKCk7CiAgICAgICAgY29uc3QgbWF0Y2hSZWcgPSByZWdleGVuLmZpbmQocmVnZXggPT4gcmVnZXgudGVzdCh0ZXh0KSk7CiAgICAgICAgaWYgKCFtYXRjaFJlZykgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgcmVhc29uID0gKChtYXRjaFJlZyArICcnKS5tYXRjaCgvXChcPz1cfCgoW14pXXxcXFwpKSopXCkvKSB8fCBbXSlbMV0gfHwgaTE4bi5yZWdleENvbnRleHRSZWFzb247CiAgICAgICAgcmV0dXJuIHsgcmVzdWx0OiBydWxlLmZlZWRBY3Rpb24sIHJlYXNvbiB9OwogICAgICB9LCB7IHByaW9yaXR5OiB0aGlzLnByaW9yaXR5IH0pOwogICAgICB0aGlzLnJlZi5pdGVtcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9CiAgfQoKICBydWxlLmdyb3Vwcyh7CiAgICBiYXNlQ2xhc3M6IFJlZ2V4RmVlZFJ1bGUsCiAgICB0YWI6ICdjb250ZW50JywKICAgIGtleTogJ3JlZ2V4JywKICAgIHZlcnNpb246IDEsCiAgICB0eXBlOiAncmVnZXhlbicsCiAgICB0aXRsZTogKCkgPT4gaTE4bi5jb250ZW50UmVnZXhHcm91cFRpdGxlLAogICAgZGV0YWlsczogewogICAgICBoaWRlOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4ucmVnZXhDb250ZW50SGlkZSwKICAgICAgfSwKICAgICAgc2hvdzogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLnJlZ2V4Q29udGVudFNob3csCiAgICAgIH0sCiAgICAgIGZvbGQ6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi5yZWdleENvbnRlbnRGb2xkLAogICAgICB9LAogICAgfSwKICAgIGZhc3Q6IHsKICAgICAgdHlwZXM6IFtbJ211bHRpdGV4dCddLCBbJ3RleHQnLCAnY29tbWVudCcsICdtdWx0aXRleHRjb21tZW50J11dLAogICAgICByYWRpb0dyb3VwOiAndGV4dCcsCiAgICAgIHJlbmRlcjogZmVlZFBhcnNlci5mYXN0LnJlbmRlci5yZWdleCwKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2FjY291bnQvYWNjb3VudC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGkxOG4uYXV0aG9yVGFiVGl0bGUgPSB7IGNuOiAn5L2c6ICFJywgdHc6ICfkvZzogIUnLCBlbjogJ0F1dGhvcicgfTsKICBjb25zdCBhdXRob3IgPSB5YXdmLnJ1bGVzLmF1dGhvciA9IHt9OwogIGF1dGhvci5hdXRob3IgPSBydWxlLlRhYih7CiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5hdXRob3JUYWJUaXRsZSwKICB9KTsKCiAgaTE4bi5vcmlnaW5hbFRhYlRpdGxlID0geyBjbjogJ+WOn+S9nCcsIHR3OiAn5Y6f5L2cJywgZW46ICdPcmlnaW5hbCcgfTsKICBjb25zdCBvcmlnaW5hbCA9IHlhd2YucnVsZXMub3JpZ2luYWwgPSB7fTsKICBvcmlnaW5hbC5vcmlnaW5hbCA9IHJ1bGUuVGFiKHsKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLm9yaWdpbmFsVGFiVGl0bGUsCiAgfSk7CgogIGkxOG4ubWVudGlvblRhYlRpdGxlID0geyBjbjogJ+aPkOWIsCcsIHR3OiAn5o+Q5YiwJywgZW46ICdNZW50aW9uJyB9OwogIGNvbnN0IG1lbnRpb24gPSB5YXdmLnJ1bGVzLm1lbnRpb24gPSB7fTsKICBtZW50aW9uLm1lbnRpb24gPSBydWxlLlRhYih7CiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5tZW50aW9uVGFiVGl0bGUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2FjY291bnQvYXV0aG9yLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGFjY291bnRBdXRob3JHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ5L2c6ICF6L+H5rukJywKICAgICAgdHc6ICfmjInkvZzogIXnr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBBdXRob3InLAogICAgfSwKICAgIGFjY291bnRBdXRob3JTaG93OiB7CiAgICAgIGNuOiAn5oC75piv5pi+56S65Lul5LiL5L2c6ICF55qE5b6u5Y2afHzkvZzogIV7e2l0ZW1zfX0nLAogICAgICB0dzogJ+e4veaYr+mhr+ekuuS7peS4i+S9nOiAheeahOW+ruWNmnx85L2c6ICFe3tpdGVtc319JywKICAgICAgZW46ICdBbHdheXMgc2hvdyBmZWVkcyBmcm9tIHRoZXNlIGF1dGhvcnN8fGF1dGhvciB7e2l0ZW1zfX0nLAogICAgfSwKICAgIGFjY291bnRBdXRob3JIaWRlOiB7CiAgICAgIGNuOiAn6ZqQ6JeP5Lul5LiL5L2c6ICF55qE5b6u5Y2afHzkvZzogIV7e2l0ZW1zfX0nLAogICAgICB0dzogJ+maseiXj+S7peS4i+S9nOiAheeahOW+ruWNmnx85L2c6ICFe3tpdGVtc319JywKICAgICAgZW46ICdIaWRlIGZlZWRzIGZyb20gdGhlc2UgYXV0aG9yc3x8YXV0aG9yIHt7aXRlbXN9fScsCiAgICB9LAogICAgYWNjb3VudEF1dGhvckZvbGQ6IHsKICAgICAgY246ICfmipjlj6Dku6XkuIvkvZzogIXnmoTlvq7ljZp8fOS9nOiAhXt7aXRlbXN9fScsCiAgICAgIHR3OiAn5oqY55aK5Lul5LiL5L2c6ICF55qE5b6u5Y2afHzkvZzogIV7e2l0ZW1zfX0nLAogICAgICBlbjogJ0ZvbGQgZmVlZHMgZnJvbSB0aGVzZSBhdXRob3JzfHxhdXRob3Ige3tpdGVtc319JywKICAgIH0sCiAgICBhY2NvdW50QXV0aG9yUmVhc29uOiB7CiAgICAgIGNuOiAn5L2c6ICFIEB7MX0nLAogICAgICB0dzogJ+S9nOiAhSBAezF9JywKICAgICAgZW46ICdwb3N0ZWQgYnkgQHsxfScsCiAgICB9LAogIH0pOwoKICBjbGFzcyBBdXRob3JGZWVkUnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gdGhpcy5mZWVkQWN0aW9uID09PSAnZm9sZCcgPyBbNl0gOiBbNiwgN107IH0KICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gYXV0aG9yRmlsdGVyRmVlZEZpbHRlcigvKiogQHR5cGUge0VsZW1lbnR9ICovZmVlZCkgewogICAgICAgIGNvbnN0IG9pZCA9IHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/IGluaXQucGFnZS4kQ09ORklHLm9pZCA6IGluaXQucGFnZS5vaWQoKTsKICAgICAgICBjb25zdCBbYXV0aG9yXSA9IGZlZWRQYXJzZXIuYXV0aG9yLmlkKGZlZWQpOwogICAgICAgIGNvbnN0IFtmYXV0aG9yXSA9IGZlZWRQYXJzZXIuZmF1dGhvci5pZChmZWVkKTsKICAgICAgICAvLyDkuKrkurrkuLvpobXkuI3mjInnhafkvZzogIXpmpDol4/vvIjlkKbliJnlsLHkvJrmiormiYDmnInkuJzopb/pg73ol4/otbfmnaXigKbigKbvvIkKICAgICAgICBjb25zdCBwYWdlVHlwZSA9IGluaXQucGFnZS50eXBlKCk7CiAgICAgICAgY29uc3QgaXNTaG93UnVsZSA9IHJ1bGUuZmVlZEFjdGlvbiA9PT0gJ3Nob3cnOwogICAgICAgIGNvbnN0IGlzUHJvZmlsZSA9IHBhZ2VUeXBlID09PSAncHJvZmlsZSc7CiAgICAgICAgY29uc3QgaXNHcm91cCA9IHBhZ2VUeXBlID09PSAnZ3JvdXAnOwogICAgICAgIGlmICgoZmF1dGhvciB8fCBhdXRob3IpID09PSBvaWQgJiYgIWlzU2hvd1J1bGUgJiYgaXNQcm9maWxlKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBhY2NvdW50cyA9IHJ1bGUucmVmLml0ZW1zLmdldENvbmZpZygpOwogICAgICAgIGNvbnN0IGlnbm9yZUZhc3RBdXRob3IgPSBpc0dyb3VwICYmICFpc1Nob3dSdWxlOwogICAgICAgIGNvbnN0IGlnbm9yZUF1dGhvciA9IGlnbm9yZUZhc3RBdXRob3IgJiYgIWZlZWRQYXJzZXIuaXNGYXN0KGZlZWQpOwogICAgICAgIGlmICghaWdub3JlQXV0aG9yKSB7CiAgICAgICAgICBjb25zdCBjb250YWluID0gYWNjb3VudHMuZmluZChhY2NvdW50ID0+IGFjY291bnQuaWQgPT09IGF1dGhvcik7CiAgICAgICAgICBpZiAoY29udGFpbikgewogICAgICAgICAgICBjb25zdCByZWFzb24gPSBpMThuLmFjY291bnRBdXRob3JSZWFzb24ucmVwbGFjZSgnezF9JywgKCkgPT4gZmVlZFBhcnNlci5hdXRob3IubmFtZShmZWVkKSk7CiAgICAgICAgICAgIHJldHVybiB7IHJlc3VsdDogcnVsZS5mZWVkQWN0aW9uLCByZWFzb24gfTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFpZ25vcmVGYXN0QXV0aG9yKSB7CiAgICAgICAgICBjb25zdCBmY29udGFpbiA9IGFjY291bnRzLmZpbmQoYWNjb3VudCA9PiBhY2NvdW50LmlkID09PSBmYXV0aG9yKTsKICAgICAgICAgIGlmIChmY29udGFpbikgewogICAgICAgICAgICBjb25zdCByZWFzb24gPSBpMThuLmFjY291bnRBdXRob3JSZWFzb24ucmVwbGFjZSgnezF9JywgKCkgPT4gZmVlZFBhcnNlci5mYXV0aG9yLm5hbWUoZmVlZCkpOwogICAgICAgICAgICByZXR1cm4geyByZXN1bHQ6IHJ1bGUuZmVlZEFjdGlvbiwgcmVhc29uIH07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9LCB7IHByaW9yaXR5OiB0aGlzLnByaW9yaXR5IH0pOwogICAgICB0aGlzLnJlZi5pdGVtcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9CiAgfQoKICBydWxlLmdyb3Vwcyh7CiAgICBiYXNlQ2xhc3M6IEF1dGhvckZlZWRSdWxlLAogICAgdGFiOiAnYXV0aG9yJywKICAgIGtleTogJ2lkJywKICAgIHZlcnNpb246IDEsCiAgICB0eXBlOiAndXNlcnMnLAogICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudEF1dGhvckdyb3VwVGl0bGUsCiAgICBkZXRhaWxzOiB7CiAgICAgIGhpZGU6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi5hY2NvdW50QXV0aG9ySGlkZSwKICAgICAgfSwKICAgICAgc2hvdzogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRBdXRob3JTaG93LAogICAgICB9LAogICAgICBmb2xkOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudEF1dGhvckZvbGQsCiAgICAgIH0sCiAgICB9LAogICAgZmFzdDogewogICAgICB0eXBlczogW1snYXV0aG9yJywgJ2FjY291bnQnXSwgWydvcmlnaW5hbCcsICdtZW50aW9uJywgJ2NvbW1lbnR1c2VyJ11dLAogICAgICByYWRpb0dyb3VwOiAnYXV0aG9yJywKICAgICAgcmVuZGVyOiBmZWVkUGFyc2VyLmZhc3QucmVuZGVyLmF1dGhvciwKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2FjY291bnQvZm9yd2FyZC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgYWNjb3VudEF1dGhvckZvcndhcmRHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ5L2c6ICF6L+H5ruk6L2s5Y+R5b6u5Y2aJywKICAgICAgdHc6ICfmjInkvZzogIXnr6npgbjovYnnmbzlvq7ljZonLAogICAgICBlbjogJ0ZpbHRlciBieSBGb3J3YXJkaW5nIEF1dGhvcicsCiAgICB9LAogICAgYWNjb3VudEF1dGhvckZvcndhcmRTaG93OiB7CiAgICAgIGNuOiAn5oC75piv5pi+56S65Lul5LiL5L2c6ICF6L2s5Y+R55qE5b6u5Y2afHzluJDlj7d7e2l0ZW1zfX0nLAogICAgICB0dzogJ+aAu+aYr+aYvuekuuS7peS4i+S9nOiAhei9ieeZvOeahOW+ruWNmnx85biz6Jmfe3tpdGVtc319JywKICAgICAgZW46ICdBbHdheXMgc2hvdyBmZWVkcyBmcm9tIHRoZXNlIGF1dGhvcnNcJyBmb3J3YXJkaW5nfHxhdXRob3Ige3tpdGVtc319JywKICAgIH0sCiAgICBhY2NvdW50QXV0aG9yRm9yd2FyZEhpZGU6IHsKICAgICAgY246ICfmgLvmmK/pmpDol4/ku6XkuIvkvZzogIXovazlj5HnmoTlvq7ljZp8fOW4kOWPt3t7aXRlbXN9fScsCiAgICAgIHR3OiAn5oC75piv6Zqx6JeP5Lul5LiL5L2c6ICF6L2J55m855qE5b6u5Y2afHzluLPomZ97e2l0ZW1zfX0nLAogICAgICBlbjogJ0hpZGUgZmVlZHMgZnJvbSB0aGVzZSBhdXRob3JzXCcgZm9yd2FyZGluZ3x8YXV0aG9yIHt7aXRlbXN9fScsCiAgICB9LAogICAgYWNjb3VudEF1dGhvckZvcndhcmRGb2xkOiB7CiAgICAgIGNuOiAn5oqY5Y+g5Lul5LiL5L2c6ICF6L2s5Y+R55qE5b6u5Y2afHzluJDlj7d7e2l0ZW1zfX0nLAogICAgICB0dzogJ+aKmOWPoOS7peS4i+S9nOiAhei9ieeZvOeahOW+ruWNmnx85biz6Jmfe3tpdGVtc319JywKICAgICAgZW46ICdGb2xkIGZlZWRzIGZyb20gdGhlc2UgYXV0aG9yc1wnIGZvcndhcmRpbmd8fGF1dGhvciB7e2l0ZW1zfX0nLAogICAgfSwKICAgIGFjY291bnRBdXRob3JGb3J3YXJkUmVhc29uOiB7CiAgICAgIGNuOiAn55SxIEB7MX0g6L2s5Y+RJywKICAgICAgdHc6ICfnlLEgQHsxfSDovYnnmbwnLAogICAgICBlbjogJ2ZvcndhcmRlZCBieSBAezF9JywKICAgIH0sCiAgfSk7CgogIGNsYXNzIEF1dGhvckZvcndhcmRGZWVkUnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gdGhpcy5mZWVkQWN0aW9uID09PSAnZm9sZCcgPyBbNl0gOiBbNiwgN107IH0KICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gYXV0aG9yRmlsdGVyRmVlZEZpbHRlcigvKiogQHR5cGUge0VsZW1lbnR9ICovZmVlZCkgewogICAgICAgIGNvbnN0IGF1dGhvcnMgPSBbXTsKICAgICAgICAvLyDlpoLmnpzkuIDmnaHlvq7ljZrmmK/kvKDnu5/nmoTovazlj5Hlvq7ljZrvvIzovazlj5HkvZzogIXorqHlhaXlnKjlhoUKICAgICAgICAvLyDlpoLmnpzkuIDmnaHlvq7ljZrmmK/lv6vovazlvq7ljZrvvIzooqvlv6vovaznmoTlvq7ljZrlpoLmnpzmmK/ovazlj5Hlvq7ljZrvvIzooqvlv6vovaznmoTlvq7ljZrnmoTkvZzogIXlkIzmoLforqHlhaXlnKjlhoUKICAgICAgICBpZiAoZmVlZFBhcnNlci5pc0ZvcndhcmQoZmVlZCkpIHsKICAgICAgICAgIGNvbnN0IFtpZF0gPSBmZWVkUGFyc2VyLmF1dGhvci5pZChmZWVkKTsKICAgICAgICAgIGNvbnN0IFtuYW1lXSA9IGZlZWRQYXJzZXIuYXV0aG9yLm5hbWUoZmVlZCk7CiAgICAgICAgICBhdXRob3JzLnB1c2goeyBpZCwgbmFtZSB9KTsKICAgICAgICB9CiAgICAgICAgLy8g5aaC5p6c5LiA5p2h5b6u5Y2a5piv5b+r6L2s5b6u5Y2a77yM5b+r6L2s55qE5L2c5Lia6K6h5YWl5Zyo5YaFCiAgICAgICAgaWYgKGZlZWRQYXJzZXIuaXNGYXN0KGZlZWQpKSB7CiAgICAgICAgICBjb25zdCBbaWRdID0gZmVlZFBhcnNlci5mYXV0aG9yLmlkKGZlZWQpOwogICAgICAgICAgY29uc3QgW25hbWVdID0gZmVlZFBhcnNlci5mYXV0aG9yLm5hbWUoZmVlZCk7CiAgICAgICAgICBhdXRob3JzLnB1c2goeyBpZCwgbmFtZSB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKCFhdXRob3JzLmxlbmd0aCkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgYWNjb3VudHMgPSBydWxlLnJlZi5pdGVtcy5nZXRDb25maWcoKTsKICAgICAgICBjb25zdCByZWFzb25Vc2VyID0gYXV0aG9ycy5maW5kKGF1dGhvciA9PiBhY2NvdW50cy5zb21lKGFjY291bnQgPT4gYXV0aG9yLmlkID09PSBhY2NvdW50LmlkKSk7CiAgICAgICAgaWYgKCFyZWFzb25Vc2VyKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCByZWFzb24gPSBpMThuLmFjY291bnRBdXRob3JGb3J3YXJkUmVhc29uLnJlcGxhY2UoJ3sxfScsICgpID0+IHJlYXNvblVzZXIubmFtZSk7CiAgICAgICAgcmV0dXJuIHsgcmVzdWx0OiBydWxlLmZlZWRBY3Rpb24sIHJlYXNvbiB9OwogICAgICB9LCB7IHByaW9yaXR5OiB0aGlzLnByaW9yaXR5IH0pOwogICAgICB0aGlzLnJlZi5pdGVtcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9CiAgfQoKICBydWxlLmdyb3Vwcyh7CiAgICBiYXNlQ2xhc3M6IEF1dGhvckZvcndhcmRGZWVkUnVsZSwKICAgIHRhYjogJ2F1dGhvcicsCiAgICBrZXk6ICdmb3J3YXJkX2lkJywKICAgIHZlcnNpb246IDEsCiAgICB0eXBlOiAndXNlcnMnLAogICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudEF1dGhvckZvcndhcmRHcm91cFRpdGxlLAogICAgZGV0YWlsczogewogICAgICBoaWRlOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudEF1dGhvckZvcndhcmRIaWRlLAogICAgICB9LAogICAgICBzaG93OiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudEF1dGhvckZvcndhcmRTaG93LAogICAgICB9LAogICAgICBmb2xkOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudEF1dGhvckZvcndhcmRGb2xkLAogICAgICB9LAogICAgfSwKICAgIGZhc3Q6IHsKICAgICAgdHlwZXM6IFtbXSwgWydhdXRob3InLCAnb3JpZ2luYWwnLCAnbWVudGlvbicsICdhY2NvdW50JywgJ2NvbW1lbnR1c2VyJ11dLAogICAgICByYWRpb0dyb3VwOiAnYXV0aG9yJywKICAgICAgcmVuZGVyOiBmZWVkUGFyc2VyLmZhc3QucmVuZGVyLmZvcndhcmQsCiAgICB9LAogIH0pOwoKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvYWNjb3VudC9vcmlnaW5hbC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0OwoKICBjb25zdCBydWxlcyA9IHlhd2YucnVsZXM7CiAgY29uc3Qgb3JpZ2luYWwgPSBydWxlcy5vcmlnaW5hbDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBhY2NvdW50T3JpZ2luYWxHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ5Y6f5L2c6ICF6L+H5rukJywKICAgICAgdHc6ICfmjInljp/kvZzogIXnr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBPcmlnaW5hbCcsCiAgICB9LAogICAgYWNjb3VudE9yaWdpbmFsU2hvdzogewogICAgICBjbjogJ+aAu+aYr+aYvuekuui9rOWPkeiHquS7peS4i+W4kOWPt+eahOW+ruWNmnx85Y6f5L2c6ICFe3tpdGVtc319JywKICAgICAgdHc6ICfnuL3mmK/poa/npLrovYnnmbzoh6rku6XkuIvluLPomZ/nmoTlvq7ljZp8fOWOn+S9nOiAhXt7aXRlbXN9fScsCiAgICAgIGVuOiAnQWx3YXlzIHNob3cgZmVlZHMgZm9yd2FyZGVkIGZyb20gdGhlc2UgYXV0aG9yc3x8b3JpZ2luYWwge3tpdGVtc319JywKICAgIH0sCiAgICBhY2NvdW50T3JpZ2luYWxIaWRlOiB7CiAgICAgIGNuOiAn6ZqQ6JeP6L2s5Y+R6Ieq5Lul5LiL5biQ5Y+355qE5b6u5Y2afHzljp/kvZzogIV7e2l0ZW1zfX0nLAogICAgICB0dzogJ+maseiXj+i9ieeZvOiHquS7peS4i+W4s+iZn+eahOW+ruWNmnx85Y6f5L2c6ICFe3tpdGVtc319JywKICAgICAgZW46ICdIaWRlIGZlZWRzIGZvcndhcmRlZCBmcm9tIHRoZXNlIGF1dGhvcnN8fG9yaWdpbmFsIHt7aXRlbXN9fScsCiAgICB9LAogICAgYWNjb3VudE9yaWdpbmFsRm9sZDogewogICAgICBjbjogJ+aKmOWPoOi9rOWPkeiHquS7peS4i+W4kOWPt+eahOW+ruWNmnx85Y6f5L2c6ICFe3tpdGVtc319JywKICAgICAgdHc6ICfmipjnlorovYnnmbzoh6rku6XkuIvluLPomZ/nmoTlvq7ljZp8fOWOn+S9nOiAhXt7aXRlbXN9fScsCiAgICAgIGVuOiAnRm9sZCBmZWVkcyBmb3J3YXJkZWQgZnJvbSB0aGVzZSBhdXRob3JzfHxvcmlnaW5hbCB7aXRlbXN9fScsCiAgICB9LAogICAgYWNjb3VudE9yaWdpbmFsRGlzY292ZXI6IHsKICAgICAgY246ICfmjInljp/liJvkvZzogIXov4fmu6TnmoTop4TliJnlr7nlj5HnjrDpobXpnaLnmoTkvZzogIXnlJ/mlYgnLAogICAgICB0dzogJ+aMieWOn+WJteS9nOiAhemBjua/vueahOimj+WJh+WwjeeZvOePvumggemdoueahOS9nOiAheeUn+aViCcsCiAgICAgIGVuOiAnUnVsZXMgZmlsdGVyIGJ5IG9yaWdpbmFscyBhcHBseSB0byBhdXRob3JzIGluIGRpc2NvdmVyeSBwYWdlcycsCiAgICB9LAogICAgYWNjb3VudE9yaWdpbmFsUmVhc29uOiB7CiAgICAgIGNuOiAn6L2s5Y+R6IeqIEB7MX0nLAogICAgICB0dzogJ+i9ieeZvOiHqiBAezF9JywKICAgICAgZW46ICdmb3J3YXJkZWQgZnJvbSBAezF9JywKICAgIH0sCiAgICBhY2NvdW50T3JpZ2luYWxEaXNjb3ZlclJlYXNvbjogewogICAgICBjbjogJ+S9nOiAhSBAezF9JywKICAgICAgdHc6ICfkvZzogIUgQHsxfScsCiAgICAgIGVuOiAnYXV0aG9yIEB7MX0nLAogICAgfSwKICAgIGFjY291bnRPcmlnaW5hbEZhc3RGb3J3YXJkUmVhc29uOiB7CiAgICAgIGNuOiAn5b+r6L2s6IeqIEB7MX0nLAogICAgICB0dzogJ+W/q+i9ieiHqiBAezF9JywKICAgICAgZW46ICdmYXN0IGZvcndhcmRlZCBmcm9tIEB7MX0nLAogICAgfSwKICAgIGFjY291bnRPcmlnaW5hbEZvbGxvd2VyOiB7CiAgICAgIGNuOiAn6ZqQ6JeP6L2s5Y+R6IeqfOeyieS4neaVsOmHj+i2hei/h3t7Y291bnR9feS4h+eahOWNmuS4u+eahOW+ruWNmnx85L6L5aSW5biQ5Y+3e3thY2NvdW50fX0nLAogICAgICB0dzogJ+maseiXj+i9ieeZvOiHqnznsonntbLmlbjph4/otoXpgY57e2NvdW50fX3okKznmoTljZrkuLvnmoTlvq7ljZp8fOS+i+WkluW4kOWPt3t7YWNjb3VudH19JywKICAgICAgZW46ICdIaWRlIGZlZWRzIGZvcndhcmRlZCBmcm9tIGF1dGhvcnMgd2l0aCB8IG1vcmUgdGhhbiB7e2NvdW50fX0wLDAwMCBmYW5zfHxFeGNlcHRpb24ge3thY2NvdW50fX0nLAogICAgfSwKICB9KTsKCiAgY29uc3QgYWRkaXRpb25hbFJ1bGVzID0gZnVuY3Rpb24gKCkgewogICAgb3JpZ2luYWwuaWQuZGlzY292ZXIgPSBydWxlLlJ1bGUoewogICAgICBpZDogJ2ZpbHRlcl9vcmlnaW5hbF9kaXNjb3ZlcicsCiAgICAgIHZlcnNpb246IDEsCiAgICAgIHBhcmVudDogb3JpZ2luYWwuaWQuaWQsCiAgICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmFjY291bnRPcmlnaW5hbERpc2NvdmVyLAogICAgfSk7CiAgfTsKCiAgY2xhc3MgT3JpZ2luYWxGZWVkUnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gdGhpcy5mZWVkQWN0aW9uID09PSAnZm9sZCcgPyBbNl0gOiBbNiwgN107IH0KICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gb3JpZ2luYWxGaWx0ZXJGZWVkRmlsdGVyKC8qKiBAdHlwZSB7RWxlbWVudH0gKi9mZWVkKSB7CiAgICAgICAgY29uc3QgYWNjb3VudHMgPSBydWxlLnJlZi5pdGVtcy5nZXRDb25maWcoKTsKCiAgICAgICAgY29uc3QgW29yaWdpbmFsXSA9IGZlZWRQYXJzZXIub3JpZ2luYWwuaWQoZmVlZCk7CiAgICAgICAgaWYgKGFjY291bnRzLmZpbmQoYWNjb3VudCA9PiBhY2NvdW50LmlkID09PSBvcmlnaW5hbCkpIHsKICAgICAgICAgIGNvbnN0IG5hbWUgPSBmZWVkUGFyc2VyLm9yaWdpbmFsLm5hbWUoZmVlZCk7CiAgICAgICAgICBjb25zdCByZWFzb24gPSBpMThuLmFjY291bnRPcmlnaW5hbFJlYXNvbi5yZXBsYWNlKCd7MX0nLCAoKSA9PiBuYW1lKTsKICAgICAgICAgIHJldHVybiB7IHJlc3VsdDogcnVsZS5mZWVkQWN0aW9uLCByZWFzb24gfTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHBhZ2VUeXBlID0geWF3Zi5XRUlCT19WRVJTSU9OID09PSA2ID8gaW5pdC5wYWdlLnR5cGUoKSA6IG51bGw7IC8vIFY3IFRPRE8KICAgICAgICBjb25zdCBpc0Rpc2NvdmVyID0gcGFnZVR5cGUgPT09ICdkaXNjb3Zlcic7CiAgICAgICAgY29uc3QgYXNEaXNjb3ZlciA9IHJ1bGVzLm9yaWdpbmFsLmlkLmRpc2NvdmVyLmlzRW5hYmxlZCgpICYmIGlzRGlzY292ZXI7CiAgICAgICAgY29uc3QgYXNGYXN0Rm9yd2FyZCA9IGZlZWRQYXJzZXIuaXNGYXN0KGZlZWQpOwogICAgICAgIGlmIChhc0Rpc2NvdmVyIHx8IGFzRmFzdEZvcndhcmQpIHsKICAgICAgICAgIGNvbnN0IFthdXRob3JdID0gZmVlZFBhcnNlci5hdXRob3IuaWQoZmVlZCk7CiAgICAgICAgICBpZiAoYWNjb3VudHMuZmluZChhY2NvdW50ID0+IGF1dGhvciA9PT0gYWNjb3VudC5pZCkpIHsKICAgICAgICAgICAgY29uc3QgbmFtZSA9IGZlZWRQYXJzZXIuYXV0aG9yLm5hbWUoZmVlZCk7CiAgICAgICAgICAgIGlmIChhc0Rpc2NvdmVyKSB7CiAgICAgICAgICAgICAgY29uc3QgcmVhc29uID0gaTE4bi5hY2NvdW50T3JpZ2luYWxEaXNjb3ZlclJlYXNvbi5yZXBsYWNlKCd7MX0nLCAoKSA9PiBuYW1lKTsKICAgICAgICAgICAgICByZXR1cm4geyByZXN1bHQ6IHJ1bGUuZmVlZEFjdGlvbiwgcmVhc29uIH07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc3QgcmVhc29uID0gaTE4bi5hY2NvdW50T3JpZ2luYWxGYXN0Rm9yd2FyZFJlYXNvbi5yZXBsYWNlKCd7MX0nLCAoKSA9PiBuYW1lKTsKICAgICAgICAgICAgICByZXR1cm4geyByZXN1bHQ6IHJ1bGUuZmVlZEFjdGlvbiwgcmVhc29uIH07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBudWxsOwogICAgICB9LCB7IHByaW9yaXR5OiB0aGlzLnByaW9yaXR5IH0pOwogICAgICB0aGlzLnJlZi5pdGVtcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9CiAgfQoKICBydWxlLmdyb3Vwcyh7CiAgICBiYXNlQ2xhc3M6IE9yaWdpbmFsRmVlZFJ1bGUsCiAgICB0YWI6ICdvcmlnaW5hbCcsCiAgICBrZXk6ICdpZCcsCiAgICB0eXBlOiAndXNlcnMnLAogICAgdmVyc2lvbjogMSwKICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRPcmlnaW5hbEdyb3VwVGl0bGUsCiAgICBkZXRhaWxzOiB7CiAgICAgIGhpZGU6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi5hY2NvdW50T3JpZ2luYWxIaWRlLAogICAgICB9LAogICAgICBzaG93OiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4uYWNjb3VudE9yaWdpbmFsU2hvdywKICAgICAgfSwKICAgICAgZm9sZDogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRPcmlnaW5hbEZvbGQsCiAgICAgIH0sCiAgICB9LAogICAgYmVmb3JlOiB7CiAgICAgIHNob3c6IGFkZGl0aW9uYWxSdWxlcywKICAgIH0sCiAgICBmYXN0OiB7CiAgICAgIHR5cGVzOiBbWydvcmlnaW5hbCcsICdhY2NvdW50J10sIFsnYXV0aG9yJywgJ21lbnRpb24nLCAnY29tbWVudHVzZXInXV0sCiAgICAgIHJhZGlvR3JvdXA6ICdvcmlnaW5hbCcsCiAgICAgIHJlbmRlcjogZmVlZFBhcnNlci5mYXN0LnJlbmRlci5vcmlnaW5hbCwKICAgIH0sCiAgfSk7CgogIG9yaWdpbmFsLmlkLmZvbGxvd2VyID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmaWx0ZXJfb3JpZ2luYWxfZm9sbG93ZXInLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogb3JpZ2luYWwuaWQuaWQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5hY2NvdW50T3JpZ2luYWxGb2xsb3dlciwKICAgIHJlZjogewogICAgICBjb3VudDogeyB0eXBlOiAncmFuZ2UnLCBtaW46IDEsIG1heDogMTAwLCBpbml0aWFsOiAxMCB9LAogICAgICBhY2NvdW50OiB7IHR5cGU6ICd1c2VycycgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoYXN5bmMgZnVuY3Rpb24gb3JpZ2luYWxGb2xsb3dlckZlZWRGaWx0ZXIoLyoqIEB0eXBlIHtFbGVtZW50fSAqL2ZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IG9yaWdpbmFsID0gZmVlZFBhcnNlci5vcmlnaW5hbC5pZChmZWVkKTsKICAgICAgICBpZiAoZmVlZFBhcnNlci5pc0Zhc3QoZmVlZCkpIHsKICAgICAgICAgIG9yaWdpbmFsLnB1c2goZmVlZFBhcnNlci5hdXRob3IuaWQoZmVlZCkpOwogICAgICAgIH0KICAgICAgICBjb25zdCBhY2NvdW50cyA9IHJ1bGUucmVmLmFjY291bnQuZ2V0Q29uZmlnKCk7CiAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBvcmlnaW5hbC5maWx0ZXIoaWQgPT4gIWFjY291bnRzLmZpbmQodXNlciA9PiB1c2VyLmlkID09PSBpZCkpOwogICAgICAgIGNvbnN0IGZvbGxvd2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGZpbHRlcmVkCiAgICAgICAgICAubWFwKGlkID0+IHJlcXVlc3QudXNlckluZm8oeyBpZCB9KS50aGVuKHVzZXIgPT4gdXNlci5mb2xsb3dlcikpCiAgICAgICAgKTsKICAgICAgICBjb25zdCBsaW1pdCA9IHJ1bGUucmVmLmNvdW50LmdldENvbmZpZygpICogMWU0OwogICAgICAgIGNvbnN0IG1hdGNoID0gZm9sbG93ZXJzLnNvbWUoaSA9PiBpID49IGxpbWl0KTsKICAgICAgICBpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4geyByZXN1bHQ6ICdoaWRlJyB9OwogICAgICB9LCB7IHByaW9yaXR5OiB0aGlzLnByaW9yaXR5IH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgICAgdGhpcy5yZWYuYWNjb3VudC5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICAgIHRoaXMucmVmLmNvdW50LmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2FjY291bnQvbWVudGlvbi5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgYWNjb3VudE1lbnRpb25Hcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ5o+Q5Yiw6L+H5rukJywKICAgICAgdHc6ICfmjInmj5DliLDnr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBNZW50aW9uJywKICAgIH0sCiAgICBhY2NvdW50TWVudGlvblNob3c6IHsKICAgICAgY246ICfmgLvmmK/mmL7npLrmj5DliLDku6XkuIvluJDlj7fnmoTlvq7ljZp8fOS9nOiAhXt7aXRlbXN9fScsCiAgICAgIHR3OiAn57i95piv6aGv56S65o+Q5Yiw5Lul5LiL5biz6Jmf55qE5b6u5Y2afHzkvZzogIV7e2l0ZW1zfX0nLAogICAgICBlbjogJ0Fsd2F5cyBzaG93IGZlZWRzIG1lbnRpb25lZCB0aGVzZSBhY2NvdW50c3x8bWVudGlvbiB7e2l0ZW1zfX0nLAogICAgfSwKICAgIGFjY291bnRNZW50aW9uSGlkZTogewogICAgICBjbjogJ+makOiXj+aPkOWIsOS7peS4i+W4kOWPt+eahOW+ruWNmnx85L2c6ICFe3tpdGVtc319JywKICAgICAgdHc6ICfpmrHol4/mj5DliLDku6XkuIvluLPomZ/nmoTlvq7ljZp8fOS9nOiAhXt7aXRlbXN9fScsCiAgICAgIGVuOiAnSGlkZSBmZWVkcyBtZW50aW9uZWQgdGhlc2UgYWNjb3VudHN8fG1lbnRpb24ge3tpdGVtc319JywKICAgIH0sCiAgICBhY2NvdW50TWVudGlvbkZvbGQ6IHsKICAgICAgY246ICfmipjlj6Dmj5DliLDku6XkuIvluJDlj7fnmoTlvq7ljZp8fOS9nOiAhXt7aXRlbXN9fScsCiAgICAgIHR3OiAn5oqY55aK5o+Q5Yiw5Lul5LiL5biz6Jmf55qE5b6u5Y2afHzkvZzogIV7e2l0ZW1zfX0nLAogICAgICBlbjogJ0ZvbGQgZmVlZHMgbWVudGlvbmVkIHRoZXNlIGFjY291bnRzfHxtZW50aW9uIHt7aXRlbXN9fScsCiAgICB9LAogICAgYWNjb3VudE1lbnRpb25SZWFzb246IHsKICAgICAgY246ICfmj5DliLDkuoYgQHsxfScsCiAgICAgIHR3OiAn5o+Q5Yiw5LqGIEB7MX0nLAogICAgICBlbjogJ21lbnRpb25lZCBAezF9JywKICAgIH0sCiAgfSk7CgogIGNsYXNzIE1lbnRpb25GZWVkUnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gdGhpcy5mZWVkQWN0aW9uID09PSAnZm9sZCcgPyBbNl0gOiBbNiwgN107IH0KICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gbWVudGlvbkZpbHRlckZlZWRGaWx0ZXIoLyoqIEB0eXBlIHtFbGVtZW50fSAqL2ZlZWQpIHsKICAgICAgICBjb25zdCBtZW50aW9ucyA9IG5ldyBTZXQoZmVlZFBhcnNlci5tZW50aW9uLm5hbWUoZmVlZCkpOwogICAgICAgIGNvbnN0IGFjY291bnRzID0gcnVsZS5yZWYuaXRlbXMuZ2V0Q29uZmlnKCk7CiAgICAgICAgY29uc3QgY29udGFpbiA9IGFjY291bnRzLmZpbmQoYWNjb3VudCA9PiBtZW50aW9ucy5oYXMoYWNjb3VudCkpOwogICAgICAgIGlmICghY29udGFpbikgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgcmVhc29uID0gaTE4bi5hY2NvdW50TWVudGlvblJlYXNvbi5yZXBsYWNlKCd7MX0nLCAoKSA9PiBjb250YWluKTsKICAgICAgICByZXR1cm4geyByZXN1bHQ6IHJ1bGUuZmVlZEFjdGlvbiwgcmVhc29uIH07CiAgICAgIH0sIHsgcHJpb3JpdHk6IHRoaXMucHJpb3JpdHkgfSk7CiAgICAgIHRoaXMucmVmLml0ZW1zLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0KICB9CgogIHJ1bGUuZ3JvdXBzKHsKICAgIGJhc2VDbGFzczogTWVudGlvbkZlZWRSdWxlLAogICAgdGFiOiAnbWVudGlvbicsCiAgICBrZXk6ICduYW1lJywKICAgIHZlcnNpb246IDEsCiAgICB0eXBlOiAndXNlcm5hbWVzJywKICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRNZW50aW9uR3JvdXBUaXRsZSwKICAgIGRldGFpbHM6IHsKICAgICAgaGlkZTogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRNZW50aW9uSGlkZSwKICAgICAgfSwKICAgICAgc2hvdzogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRNZW50aW9uU2hvdywKICAgICAgfSwKICAgICAgZm9sZDogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLmFjY291bnRNZW50aW9uRm9sZCwKICAgICAgfSwKICAgIH0sCiAgICBmYXN0OiB7CiAgICAgIHR5cGVzOiBbWydtZW50aW9uJywgJ2FjY291bnQnXSwgWydhdXRob3InLCAnb3JpZ2luYWwnXV0sCiAgICAgIHJhZGlvR3JvdXA6ICdtZW50aW9uJywKICAgICAgcmVuZGVyOiBmZWVkUGFyc2VyLmZhc3QucmVuZGVyLm1lbnRpb24sCiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci90b3BpYy90b3BpYy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGkxOG4udG9waWNUYWJUaXRsZSA9IHsKICAgIGNuOiAn6K+d6aKYJywKICAgIHR3OiAn6Kmx6aGMJywKICAgIGVuOiAnVG9waWMnLAogIH07CgogIGNvbnN0IHRvcGljID0geWF3Zi5ydWxlcy50b3BpYyA9IHt9OwogIHRvcGljLnRvcGljID0gcnVsZS5UYWIoewogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udG9waWNUYWJUaXRsZSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvdG9waWMvdGV4dC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgdG9waWNHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ6K+d6aKY6L+H5rukJywKICAgICAgdHc6ICfmjInoqbHpoYznr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBUb3BpY3MnLAogICAgfSwKICAgIHRvcGljU2hvdzogewogICAgICBjbjogJ+aAu+aYr+aYvuekuuWMheWQq+S7peS4i+ivnemimOeahOW+ruWNmnx86K+d6aKYe3tpdGVtc319JywKICAgICAgdHc6ICfmgLvmmK/mmL7npLrljIXlkKvku6XkuIvoqbHpoYznmoTlvq7ljZp8fOipsemhjHt7aXRlbXN9fScsCiAgICAgIGVuOiAnQWx3YXlzIHNob3cgZmVlZHMgd2l0aCB0aGVzZSB0b3BpY3N8fHRvcGljIHt7aXRlbXN9fScsCiAgICB9LAogICAgdG9waWNIaWRlOiB7CiAgICAgIGNuOiAn6ZqQ6JeP5YyF5ZCr5Lul5LiL6K+d6aKY55qE5b6u5Y2afHzor53poph7e2l0ZW1zfX0nLAogICAgICB0dzogJ+maseiXj+WMheWQq+S7peS4i+ipsemhjOeahOW+ruWNmnx86Kmx6aGMe3tpdGVtc319JywKICAgICAgZW46ICdIaWRlIGZlZWRzIHdpdGggdGhlc2UgdG9waWNzfHx0b3BpYyB7e2l0ZW1zfX0nLAogICAgfSwKICAgIHRvcGljRm9sZDogewogICAgICBjbjogJ+aKmOWPoOWMheWQq+S7peS4i+ivnemimOeahOW+ruWNmnx86K+d6aKYe3tpdGVtc319JywKICAgICAgdHc6ICfmipjnlorljIXlkKvku6XkuIvoqbHpoYznmoTlvq7ljZp8fOipsemhjHt7aXRlbXN9fScsCiAgICAgIGVuOiAnRm9sZCBmZWVkcyB3aXRoIHRoZXNlIHRvcGljc3x8dG9waWMge3tpdGVtc319JywKICAgIH0sCiAgICB0b3BpY1JlYXNvbjogewogICAgICBjbjogJ+aPkOWIsOivnemimCB7MX0nLAogICAgICB0dzogJ+aPkOWIsOipsemhjCB7MX0nLAogICAgICBlbjogJ21lbnRpb25lZCB0b3BpYyB7MX0nLAogICAgfSwKICB9KTsKCiAgY2xhc3MgVG9waWNGZWVkUnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBnZXQgd2VpYm9WZXJzaW9uKCkgeyByZXR1cm4gdGhpcy5mZWVkQWN0aW9uID09PSAnZm9sZCcgPyBbNl0gOiBbNiwgN107IH0KICAgIGNvbnN0cnVjdG9yKGl0ZW0pIHsKICAgICAgc3VwZXIoaXRlbSk7CiAgICB9CiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gdG9waWNGZWVkRmlsdGVyKC8qKiBAdHlwZSB7RWxlbWVudH0gKi9mZWVkKSB7CiAgICAgICAgY29uc3QgdGV4dCA9IGZlZWRQYXJzZXIudG9waWMudGV4dChmZWVkKTsKICAgICAgICBjb25zdCB0b3BpY3MgPSBydWxlLnJlZi5pdGVtcy5nZXRDb25maWcoKTsKICAgICAgICBjb25zdCBjb250YWluID0gdG9waWNzLmZpbmQodG9waWMgPT4gdGV4dC5pbmNsdWRlcyh0b3BpYykpOwogICAgICAgIGlmICghY29udGFpbikgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgcmVhc29uID0gaTE4bi50b3BpY1JlYXNvbi5yZXBsYWNlKCd7MX0nLCAoKSA9PiBjb250YWluKTsKICAgICAgICByZXR1cm4geyByZXN1bHQ6IHJ1bGUuZmVlZEFjdGlvbiwgcmVhc29uIH07CiAgICAgIH0sIHsgcHJpb3JpdHk6IHRoaXMucHJpb3JpdHkgfSk7CiAgICAgIHRoaXMucmVmLml0ZW1zLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0KICB9CgogIHJ1bGUuZ3JvdXBzKHsKICAgIGJhc2VDbGFzczogVG9waWNGZWVkUnVsZSwKICAgIHRhYjogJ3RvcGljJywKICAgIGtleTogJ3RleHQnLAogICAgdmVyc2lvbjogMSwKICAgIHR5cGU6ICd0b3BpY3MnLAogICAgdGl0bGU6ICgpID0+IGkxOG4udG9waWNHcm91cFRpdGxlLAogICAgZGV0YWlsczogewogICAgICBoaWRlOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4udG9waWNIaWRlLAogICAgICB9LAogICAgICBzaG93OiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4udG9waWNTaG93LAogICAgICB9LAogICAgICBmb2xkOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4udG9waWNGb2xkLAogICAgICB9LAogICAgfSwKICAgIGZhc3Q6IHsKICAgICAgdHlwZXM6IFtbJ3RvcGljJ10sIFtdXSwKICAgICAgcmFkaW9Hcm91cDogJ3RvcGljJywKICAgICAgcmVuZGVyOiBmZWVkUGFyc2VyLmZhc3QucmVuZGVyLnRvcGljLAogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvc291cmNlL3NvdXJjZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGkxOG4uc291cmNlVGFiVGl0bGUgPSB7CiAgICBjbjogJ+adpea6kCcsCiAgICB0dzogJ+S+hua6kCcsCiAgICBlbjogJ1NvdXJjZScsCiAgfTsKCiAgY29uc3Qgc291cmNlID0geWF3Zi5ydWxlcy5zb3VyY2UgPSB7fTsKICBzb3VyY2Uuc291cmNlID0gcnVsZS5UYWIoewogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc291cmNlVGFiVGl0bGUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL3NvdXJjZS90ZXh0LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBzb3VyY2VHcm91cFRpdGxlOiB7CiAgICAgIGNuOiAn5oyJ5p2l5rqQ6L+H5rukJywKICAgICAgdHc6ICfmjInkvobmupDnr6npgbgnLAogICAgICBlbjogJ0ZpbHRlciBieSBTb3VyY2VzJywKICAgIH0sCiAgICBzb3VyY2VTaG93OiB7CiAgICAgIGNuOiAn5oC75piv5pi+56S65p2l6Ieq5Lul5LiL5p2l5rqQ55qE5b6u5Y2afHzmnaXmupB7e2l0ZW1zfX0nLAogICAgICB0dzogJ+aAu+aYr+aYvuekuuS+huiHquS7peS4i+S+hua6kOeahOW+ruWNmnx85L6G5rqQe3tpdGVtc319JywKICAgICAgZW46ICdBbHdheXMgc2hvdyBmZWVkcyBmcm9tIHRoZXNlIHNvdXJjZXN8fHNvdXJjZSB7e2l0ZW1zfX0nLAogICAgfSwKICAgIHNvdXJjZUhpZGU6IHsKICAgICAgY246ICfpmpDol4/mnaXoh6rku6XkuIvmnaXmupDnmoTlvq7ljZp8fOadpea6kHt7aXRlbXN9fScsCiAgICAgIHR3OiAn6Zqx6JeP5L6G6Ieq5Lul5LiL5L6G5rqQ55qE5b6u5Y2afHzkvobmupB7e2l0ZW1zfX0nLAogICAgICBlbjogJ0hpZGUgZmVlZHMgZnJvbSB0aGVzZSBzb3VyY2VzfHxzb3VyY2Uge3tpdGVtc319JywKICAgIH0sCiAgICBzb3VyY2VGb2xkOiB7CiAgICAgIGNuOiAn5oqY5Y+g5p2l6Ieq5Lul5LiL5p2l5rqQ55qE5b6u5Y2afHzmnaXmupB7e2l0ZW1zfX0nLAogICAgICB0dzogJ+aKmOeWiuS+huiHquS7peS4i+S+hua6kOeahOW+ruWNmnx85L6G5rqQe3tpdGVtc319JywKICAgICAgZW46ICdGb2xkIGZlZWRzIGZyb20gdGhlc2Ugc291cmNlc3x8c291cmNlIHt7aXRlbXN9fScsCiAgICB9LAogICAgc291cmNlUmVhc29uOiB7CiAgICAgIGNuOiAn5p2l6IeqIHsxfScsCiAgICAgIHR3OiAn5L6G6IeqIHsxfScsCiAgICAgIGVuOiAncG9zdGVkIHZpYSB7MX0nLAogICAgfSwKICB9KTsKCiAgY2xhc3MgU291cmNlRmVlZFJ1bGUgZXh0ZW5kcyBydWxlLmNsYXNzLlJ1bGUgewogICAgZ2V0IHdlaWJvVmVyc2lvbigpIHsgcmV0dXJuIHRoaXMuZmVlZEFjdGlvbiA9PT0gJ2ZvbGQnID8gWzZdIDogWzYsIDddOyB9CiAgICBjb25zdHJ1Y3RvcihpdGVtKSB7CiAgICAgIHN1cGVyKGl0ZW0pOwogICAgfQogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHNvdXJjZUZlZWRGaWx0ZXIoLyoqIEB0eXBlIHtFbGVtZW50fSAqL2ZlZWQpIHsKICAgICAgICBjb25zdCB0ZXh0ID0gZmVlZFBhcnNlci5zb3VyY2UudGV4dChmZWVkKTsKICAgICAgICBjb25zdCBzb3VyY2VzID0gcnVsZS5yZWYuaXRlbXMuZ2V0Q29uZmlnKCk7CiAgICAgICAgY29uc3QgY29udGFpbiA9IHNvdXJjZXMuc29tZShzb3VyY2UgPT4gdGV4dC5pbmNsdWRlcyhzb3VyY2UpKTsKICAgICAgICBpZiAoIWNvbnRhaW4pIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHJlYXNvbiA9IGkxOG4uc291cmNlUmVhc29uLnJlcGxhY2UoJ3sxfScsICgpID0+IHRleHQpOwogICAgICAgIHJldHVybiB7IHJlc3VsdDogcnVsZS5mZWVkQWN0aW9uLCByZWFzb24gfTsKICAgICAgfSwgeyBwcmlvcml0eTogdGhpcy5wcmlvcml0eSB9KTsKICAgICAgdGhpcy5yZWYuaXRlbXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfQogIH0KCiAgcnVsZS5ncm91cHMoewogICAgYmFzZUNsYXNzOiBTb3VyY2VGZWVkUnVsZSwKICAgIHRhYjogJ3NvdXJjZScsCiAgICBrZXk6ICd0ZXh0JywKICAgIHZlcnNpb246IDEsCiAgICB0eXBlOiAnc3RyaW5ncycsCiAgICB0aXRsZTogKCkgPT4gaTE4bi5zb3VyY2VHcm91cFRpdGxlLAogICAgZGV0YWlsczogewogICAgICBoaWRlOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4uc291cmNlSGlkZSwKICAgICAgfSwKICAgICAgc2hvdzogewogICAgICAgIHRpdGxlOiAoKSA9PiBpMThuLnNvdXJjZVNob3csCiAgICAgIH0sCiAgICAgIGZvbGQ6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi5zb3VyY2VGb2xkLAogICAgICB9LAogICAgfSwKICAgIGZhc3Q6IHsKICAgICAgdHlwZXM6IFtbJ3NvdXJjZSddLCBbXV0sCiAgICAgIHJhZGlvR3JvdXA6ICdzb3VyY2UnLAogICAgICByZW5kZXI6IGZlZWRQYXJzZXIuZmFzdC5yZW5kZXIuc291cmNlLAogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvbW9yZS9tb3JlLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgaTE4bi5tb3JlVGFiVGl0bGUgPSB7CiAgICBjbjogJ+abtOWkmicsCiAgICB0dzogJ+WFtuS7licsCiAgICBlbjogJ01vcmUnLAogIH07CgogIGNvbnN0IG1vcmUgPSB5YXdmLnJ1bGVzLm1vcmUgPSB7fTsKICBtb3JlLm1vcmUgPSBydWxlLlRhYih7CiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5tb3JlVGFiVGl0bGUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL21vcmUvbXlzZWxmLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwoKICBjb25zdCBtb3JlID0geWF3Zi5ydWxlcy5tb3JlOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGkxOG4ub3RoZXJXaGl0ZWxpc3RUaXRsZSA9IHsKICAgIGNuOiAn5pi+56S65Lul5LiL5YaF5a6577yI5LiN6K6h5YWl55m95ZCN5Y2V77yJJywKICAgIHR3OiAn6aGv56S65Lul5LiL5YWn5a6577yI5LiN6KiI5YWl55m95ZCN5Zau77yJJywKICAgIGVuOiAnU2hvdyBmb2xsb3dpbmcgY29udGVudCAobm90IHJlZ2FyZCBhcyB3aGl0ZWxpc3QpJywKICB9OwoKICBjb25zdCBzaG93dGhlc2UgPSBtb3JlLnNob3d0aGVzZSA9IHt9OwogIHNob3d0aGVzZS5zaG93dGhlc2UgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogbW9yZS5tb3JlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ub3RoZXJXaGl0ZWxpc3RUaXRsZSwKICB9KTsKCiAgaTE4bi5zaG93TXlGZWVkRGV0YWlsID0gewogICAgY246ICfoh6rlt7HnmoTlvq7ljZonLAogICAgdHc6ICfoh6rlt7HnmoTlvq7ljZonLAogICAgZW46ICdGZWVkcyBieSBteXNlbGYnLAogIH07CgogIHNob3d0aGVzZS5zaG93TXlGZWVkID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmaWx0ZXJfbXlfZmVlZCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBzaG93dGhlc2Uuc2hvd3RoZXNlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2hvd015RmVlZERldGFpbCwKICAgIGluaXRpYWw6IHRydWUsCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gc2hvd015RmVlZChmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBtZSA9IHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/IGluaXQucGFnZS4kQ09ORklHLnVpZCA6IGluaXQucGFnZS51aWQoKTsKICAgICAgICBjb25zdCBbYXV0aG9yXSA9IGZlZWRQYXJzZXIuYXV0aG9yLmlkKGZlZWQpOwogICAgICAgIGNvbnN0IFtmYXV0aG9yXSA9IGZlZWRQYXJzZXIuZmF1dGhvci5pZChmZWVkKTsKICAgICAgICBpZiAobWUgPT09IGF1dGhvciB8fCBtZSA9PT0gZmF1dGhvcikgcmV0dXJuICdzaG93bWUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9LCB7IHByaW9yaXR5OiAxZTQgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5zaG93TXlPcmlnaW5hbERldGFpbCA9IHsKICAgIGNuOiAn6Ieq5bex5b6u5Y2a55qE6L2s5Y+RJywKICAgIHR3OiAn6Ieq5bex5b6u5Y2a55qE6L2J55m8JywKICAgIGVuOiAnRm9yd2FyZCBvZiBteSBGZWVkcycsCiAgfTsKCiAgc2hvd3RoZXNlLnNob3dNeU9yaWdpbmFsID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmaWx0ZXJfbXlfb3JpZ2luYWwnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogc2hvd3RoZXNlLnNob3d0aGVzZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNob3dNeU9yaWdpbmFsRGV0YWlsLAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHNob3dNeU9yaWdpbmFsKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IG1lID0geWF3Zi5XRUlCT19WRVJTSU9OID09PSA2ID8gaW5pdC5wYWdlLiRDT05GSUcudWlkIDogaW5pdC5wYWdlLnVpZCgpOwogICAgICAgIGNvbnN0IFtvcmlnaW5hbF0gPSBmZWVkUGFyc2VyLm9yaWdpbmFsLmlkKGZlZWQpOwogICAgICAgIGNvbnN0IFthdXRob3JdID0gZmVlZFBhcnNlci5pc0Zhc3QoZmVlZCkgPyBmZWVkUGFyc2VyLmF1dGhvci5pZChmZWVkKSA6IFtdOwogICAgICAgIGlmIChtZSA9PT0gb3JpZ2luYWwgfHwgbWUgPT09IGF1dGhvcikgcmV0dXJuICdzaG93bWUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9LCB7IHByaW9yaXR5OiAxZTQgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5zaG93TWVudGlvbk1lRGV0YWlsID0gewogICAgY246ICfmj5DliLDoh6rlt7HnmoTlvq7ljZonLAogICAgdHc6ICfmj5DliLDoh6rlt7HnmoTlvq7ljZonLAogICAgZW46ICdGZWVkcyBtZW50aW9uZWQgbXlzZWxmJywKICB9OwoKICBzaG93dGhlc2Uuc2hvd01lbnRpb25NZSA9IHJ1bGUuUnVsZSh7CiAgICB3ZWlib1ZlcnNpb246IFs2LCA3XSwKICAgIGlkOiAnZmlsdGVyX21lbnRpb25fbWUnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogc2hvd3RoZXNlLnNob3d0aGVzZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNob3dNZW50aW9uTWVEZXRhaWwsCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gc2hvd01lbnRpb25NZShmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBtZSA9IHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/IGluaXQucGFnZS4kQ09ORklHLnVpZCA6IGluaXQucGFnZS51aWQoKTsKICAgICAgICBjb25zdCBtZW50aW9ucyA9IGZlZWRQYXJzZXIubWVudGlvbi5uYW1lKGZlZWQpOwogICAgICAgIGlmIChtZW50aW9ucy5pbmNsdWRlcyhtZSkpIHJldHVybiAnc2hvd21lJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSwgeyBwcmlvcml0eTogMWU0IH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHNob3dNeUZhdk9yTGlrZShmZWVkKSB7CiAgICBjb25zdCB0eXBlID0gaW5pdC5wYWdlLnR5cGUoKTsKICAgIGlmICh0eXBlID09PSAnZmF2JyB8fCB0eXBlID09PSAnbGlrZScpIHJldHVybiAnc2hvd2Zhdic7CiAgICByZXR1cm4gbnVsbDsKICB9LCB7IHByaW9yaXR5OiAxZTcgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL21vcmUvY29tbWVyY2lhbC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKCiAgY29uc3QgbW9yZSA9IHlhd2YucnVsZXMubW9yZTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBpMThuLm1vcmVDb21tZXJjaWFsR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn6ZqQ6JeP5Lul5LiL5b6u5Y2aIC0g5bm/5ZGKL+WVhuWTgS/mjqjojZAnLAogICAgdHc6ICfpmrHol4/ku6XkuIvlhaflrrkgLSDlu6PlkYov5ZWG5ZOBL+aOqOiWpicsCiAgICBlbjogJ0hpZGUgZm9sbG93aW5nIGNvbnRlbnQgLSBBZCAvIFByb21vdGlvbiAvIFJlY29tbWVuZCcsCiAgfTsKCiAgY29uc3QgY29tbWVyY2lhbCA9IG1vcmUuY29tbWVyY2lhbCA9IHt9OwogIGNvbW1lcmNpYWwuY29tbWVyY2lhbCA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBtb3JlLm1vcmUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5tb3JlQ29tbWVyY2lhbEdyb3VwVGl0bGUsCiAgfSk7CgogIGkxOG4uYWRGZWVkRmlsdGVyID0gewogICAgY246ICfmjqjlub/lvq7ljZov57KJ5Lid6YCa5b6u5Y2aL+WTgeeJjOmAn+mAki/lpb3lj4votZ7ov4fnmoTlvq7ljZoge3tpfX0nLAogICAgdHc6ICfmjqjlu6Plvq7ljZov57KJ57Wy6YCa5b6u5Y2aL+WTgeeJjOmAn+mBni/lpb3lj4votIrpgY7nmoTlvq7ljZoge3tpfX0nLAogICAgZW46ICdBZCBXZWlibyAvIEluc2VydGVkIG5vdCBmb2xsb3dlZCBXZWlibyB7e2l9fScsCiAgfTsKICBpMThuLmFkRmVlZEZpbHRlckRldGFpbCA9IHsKICAgIGNuOiAn6L+Z5Lqb5b6u5Y2a5LiA6Iis5Ye6546w5Zyo5oKo55qE6aaW6aG177yM5bim5pyJ4oCc5o6o6I2Q4oCd4oCc5aW95Y+L6LWe6L+H4oCd562J5qCH6K6w77yM5L2G5aSn5aSa5p2l6Ieq5oKo5bm25pyq5YWz5rOo55qE5Lq644CCJywKICB9OwoKICBjb21tZXJjaWFsLmFkID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmaWx0ZXJfYWRfZmVlZCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBjb21tZXJjaWFsLmNvbW1lcmNpYWwsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5hZEZlZWRGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmFkRmVlZEZpbHRlckRldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiBhZEZlZWRGaWx0ZXIoZmVlZCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgICAgLy8g5L+u5pS56L+Z6YeM5pe26K+35rOo5oSP77yM5oKE5oKE5YWz5rOo5Lmf5Lya5pi+56S65YWz5rOo5oyJ6ZKu77yM5L2G5piv55u45YWz5b6u5Y2a5LiN5bqU6KKr6ZqQ6JePCiAgICAgICAgICAvLyDlv6vovazkuZ/lj6/og73mnInlhbPms6jmjInpkq7vvIzkvYbmmK/lv6vovazkuI3lnKjov5nph4zpmpDol48KICAgICAgICAgIGlmIChmZWVkLmdldEF0dHJpYnV0ZSgnZmVlZHR5cGUnKSA9PT0gJ2FkJykgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1thY3Rpb24tdHlwZT0iZmVlZF9saXN0X2FkIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ2FbaHJlZio9Ii8vYWRpbnNpZGUud2VpYm8uY24vIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1tkaXNzLWRhdGEqPSJmZWVkYWQiXScpICYmICFmZWVkUGFyc2VyLmlzRmFzdEZvcndhcmQoZmVlZCkpIHJldHVybiAnaGlkZSc7CiAgICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCdbc3VkYS11YXRyYWNrKj0iaW5zZXJ0X2ZlZWQiXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignW3N1ZGEtdWF0cmFjayo9Im5lZ2F0aXZlZmVlZGJhY2siXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignW3N1ZGEtdWF0cmFjayo9IjEwMjItYWRGZWVkRXZlbnQiXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDmn5Dmn5DotZ7ov4fnmoTlvq7ljZoKICAgICAgICAgIGlmICgoZmVlZC50aXRsZSB8fCB7fSkudHlwZSA9PT0gJ2xpa2VyZWNvbW1lbmQnKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSwgeyBwcmlvcml0eTogMWU2IH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4uZmFuc1RvcEZlZWRGaWx0ZXIgPSB7CiAgICBjbjogJ+eyieS4neWktOadoSB7e2l9fScsCiAgICB0dzogJ+eyiee1sumgreainSB7e2l9fScsCiAgICBlbjogJ0ZhbnMgdG9wIChoZWFkbGluZSB3ZWlibykge3tpfX0nLAogIH07CiAgaTE4bi5mYW5zVG9wRmVlZEZpbHRlckRldGFpbCA9IHsKICAgIGNuOiAn57KJ5Lid5aS05p2h5Lya5pi+56S65Zyo6aaW6aG15raI5oGv5rWB55qE6aG26YOo77yM5LiA6Iis5bim5pyJ4oCc54Ot6Zeo4oCd562J5qCH6K6w44CC57KJ5Lid5aS05p2h5piv5paw5rWq5b6u5Y2a5a6Y5pa555qE5LiA6aG55o6o5bm/5Lqn5ZOB77yM5L2/55So57KJ5Lid5aS05p2h55qE5b6u5Y2a5Y+v5ZyoIDI0IOWwj+aXtuWGheWHuueOsOWcqOaJgOacieeyieS4nemmlumhteeahOesrOS4gOS9jeOAgueyieS4neWktOadoeW+ruWNmuaAu+aYr+adpeiHquS6juaCqOWFs+azqOeahOS6uuOAgicsCiAgfTsKCiAgY29tbWVyY2lhbC5mYW5zVG9wID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmlsdGVyX2ZhbnNfdG9wJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbW1lcmNpYWwuY29tbWVyY2lhbCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZhbnNUb3BGZWVkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mYW5zVG9wRmVlZEZpbHRlckRldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiBmYW5zVG9wRmVlZEZpbHRlcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCdbYWRjYXJkPSJmYW5zdG9wIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi53ZWlib1Byb2R1Y3RGZWVkRmlsdGVyID0gewogICAgY246ICfluKbmnInlvq7ljZrmqbHnqpfllYblk4Hpk77mjqXnmoTlvq7ljZp7e2l9fScsCiAgICB0dzogJ+W4tuacieW+ruWNmuarpeeql+WVhuWTgemAo+aOpeeahOW+ruWNmnt7aX19JywKICAgIGVuOiAnV2VpYm8gd2l0aCBsaW5rIHRvIHdlaWJvIHNob3Age3tpfX0nLAogIH07CiAgaTE4bi53ZWlib1Byb2R1Y3RGZWVkRmlsdGVyRGV0YWlsID0gewogICAgY246ICfluKbmnInlvq7ljZrmqbHnqpfllYblk4Hpk77mjqXnmoTlvq7ljZrvvIzngrnlh7vpk77mjqXlj6/ku6XliLDllYblk4HnmoTotK3kubDpobXpnaLjgILli77pgInku6XpmpDol4/mraTnsbvlvq7ljZrjgIInLAogIH07CgogIGNvbW1lcmNpYWwud2VpYm9Qcm9kdWN0ID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogNiwgLy8gVjcg5pyJ5Y+m5LiA5Liq6K6+572u6aG5CiAgICBpZDogJ2ZpbHRlcl93ZWlib19wcm9kdWN0JywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbW1lcmNpYWwuY29tbWVyY2lhbCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLndlaWJvUHJvZHVjdEZlZWRGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLndlaWJvUHJvZHVjdEZlZWRGaWx0ZXJEZXRhaWwgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gd2VpYm9Qcm9kdWN0RmVlZEZpbHRlcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCcuV0JfZmVlZF9zcGVjW2V4cC1kYXRhKj0ia2V5PXRibG9nX3dlaWJvY2FyZCJdW2V4cC1kYXRhKj0iMTAyMi1wcm9kdWN0Il0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCcuV0JfZmVlZF9zcGVjW2V4cC1kYXRhKj0ia2V5PXRibG9nX3dlaWJvY2FyZCJdW2V4cC1kYXRhKj0iMjAxNzg0NTAwMi1wcm9kdWN0Il0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCdhW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfdXJsIl1bc3VkYS11YXRyYWNrKj0iMjAxNzg0NTAwMi1wcm9kdWN0Il0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCdhW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfdXJsIl1bc3VkYS11YXRyYWNrKj0iMjAxNzg0NTAwMi1jb2xsZWN0aW9uIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCcubWVkaWFfYm94IC5idXlfbGlzdCcpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLnRhb2Jhb1Byb2R1Y3RGZWVkRmlsdGVyID0gewogICAgY246ICfluKbmnInmt5jlrp3jgIHlpKnnjKvmiJbogZrliJLnrpfllYblk4HnmoTlvq7ljZp7e2l9fScsCiAgICB0dzogJ+W4tuaciea3mOWvtuOAgeWkqeiyk+aIluiBmuWIkueul+WVhuWTgeeahOW+ruWNmnt7aX19JywKICAgIGVuOiAnV2VpYm8gd2l0aCBUYW9iYW8gLyBUbWFsbCAvIEp1aHVhc3VhbiBjb21tb2RpdHl7e2l9fScsCiAgfTsKICBpMThuLnRhb2Jhb1Byb2R1Y3RGZWVkRmlsdGVyRGV0YWlsID0gewogICAgY246ICfluKbmnIl7e3Rhb2Jhb31944CBe3t0bWFsbH195oiWe3tqdWh1YXN1YW59feeahOW+ruWNmicsCiAgfTsKICBpMThuLnRhb2Jhb1Byb2R1Y3QgPSB7CiAgICBjbjogJ+a3mOWuneWVhuWTgScsCiAgfTsKICBpMThuLnRtYWxsUHJvZHVjdCA9IHsKICAgIGNuOiAn5aSp54yr5ZWG5ZOBJywKICB9OwogIGkxOG4uanVodWFzdWFuUHJvZHVjdCA9IHsKICAgIGNuOiAn6IGa5YiS566X5ZWG5ZOBJywKICB9OwoKICBjb21tZXJjaWFsLnRhb2Jhb1Byb2R1Y3QgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiA2LCAvLyBWNyDmnInlj6bkuIDkuKrorr7nva7pobkKICAgIGlkOiAnZmlsdGVyX3RiX3RtX2ZlZWQnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29tbWVyY2lhbC5jb21tZXJjaWFsLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udGFvYmFvUHJvZHVjdEZlZWRGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogewogICAgICAgIHR5cGU6ICdidWJibGUnLAogICAgICAgIGljb246ICdhc2snLAogICAgICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnRhb2Jhb1Byb2R1Y3RGZWVkRmlsdGVyRGV0YWlsLAogICAgICAgIHJlZjogT2JqZWN0LmFzc2lnbiguLi5bCiAgICAgICAgICB7IGlkOiAndGFvYmFvJywgY2xhc3NOYW1lOiAnaWNvbl9jZF90YicsIGNvbnRlbnQ6ICgpID0+IGkxOG4udGFvYmFvUHJvZHVjdCB9LAogICAgICAgICAgeyBpZDogJ3RtYWxsJywgY2xhc3NOYW1lOiAnaWNvbl9jZF90bWFsbCcsIGNvbnRlbnQ6ICgpID0+IGkxOG4udG1hbGxQcm9kdWN0IH0sCiAgICAgICAgICB7IGlkOiAnanVodWFzdWFuJywgY2xhc3NOYW1lOiAnaWNvbl9jZF9qdScsIGNvbnRlbnQ6ICgpID0+IGkxOG4uanVodWFzdWFuUHJvZHVjdCB9LAogICAgICAgIF0ubWFwKCh7IGlkLCBjbGFzc05hbWUsIGNvbnRlbnQgfSkgPT4gKHsKICAgICAgICAgIFtpZF06IHsKICAgICAgICAgICAgcmVuZGVyKCkgewogICAgICAgICAgICAgIGNvbnN0IHdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICB3cmFwLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz0iV19idG5fYiBXX2J0bl9jYXJkbGluayBidG5fMjJweCI+PHNwYW4gY2xhc3M9Imljb19zcGUiPjxpIGNsYXNzPSJXX2ljb24geWF3Zi1jYXJkLWljb24iPjwvaT48L3NwYW4+PHNwYW4gY2xhc3M9IldfYXV0b2N1dCB5YXdmLWNhcmQtY29udGVudCI+PC9zcGFuPjwvc3Bhbj4nOwogICAgICAgICAgICAgIGNvbnN0IGljb24gPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWNhcmQtaWNvbicpOwogICAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpOwogICAgICAgICAgICAgIGNvbnN0IHRleHQgPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWNhcmQtY29udGVudCcpOwogICAgICAgICAgICAgIHRleHQudGV4dENvbnRlbnQgPSBjb250ZW50KCk7CiAgICAgICAgICAgICAgcmV0dXJuIHdyYXAuZmlyc3RDaGlsZDsKICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgfSkpKSwKICAgICAgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gdGFvYmFvUHJvZHVjdEZlZWRGaWx0ZXIoZmVlZCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignLmljb25fY2RfdG1hbGwsIC5pY29uX2NkX3RiLCAuaWNvbl9jZF9qdScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ2FbaHJlZl49Imh0dHBzOi8vc2hvcHRiLnNjLndlaWJvLmNvbS8iXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLndlaWJvUHJvZHVjdExpa2VGZWVkRmlsdGVyID0gewogICAgY246ICfluKbmnInllYblk4Hpk77mjqXnmoTlvq7ljZp7e2l9fScsCiAgICB0dzogJ+W4tuacieWVhuWTgemPiOaOpeeahOW+ruWNmnt7aX19JywKICAgIGVuOiAnV2VpYm8gd2l0aCBsaW5rIHRvIHdlaWJvIHNob3AgLyB0YW9iYW8ge3tpfX0nLAogIH07CiAgaTE4bi53ZWlib1Byb2R1Y3RMaWtlRmVlZEZpbHRlckRldGFpbCA9IHsKICAgIGNuOiAn5bim5pyJ5b6u5Y2a5qmx56qX5ZWG5ZOB5oiW5reY5a6d5ZWG5ZOB6ZO+5o6l55qE5b6u5Y2a44CC6YCC6YWN5b6u5Y2aIFY377yM5a+55bqUIFY2IOeJiOeahOKAnOW+ruWNmuapseeql+KAneKAnOa3mOWuneWVhuWTgeKAneS4pOS4quiuvue9rumhueOAgicsCiAgfTsKCiAgY29tbWVyY2lhbC53ZWlib1Byb2R1Y3RMaWtlID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogNywKICAgIGlkOiAnZmlsdGVyX3dlaWJvX3Byb2R1Y3RfbGlrZScsCiAgICB2ZXJzaW9uOiA3NSwKICAgIHBhcmVudDogY29tbWVyY2lhbC5jb21tZXJjaWFsLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ud2VpYm9Qcm9kdWN0TGlrZUZlZWRGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLndlaWJvUHJvZHVjdExpa2VGZWVkRmlsdGVyRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHRhb2Jhb1Byb2R1Y3RGZWVkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGZlZWQudXJsX3N0cnVjdCkpIHsKICAgICAgICAgIGlmIChmZWVkLnVybF9zdHJ1Y3QuZmluZCh1cmwgPT4gL3Rhb2Jhb1wucG5nJC8udGVzdCh1cmwudXJsX3R5cGVfcGljKSkpIHJldHVybiAnaGlkZSc7CiAgICAgICAgICBpZiAoZmVlZC51cmxfc3RydWN0LmZpbmQodXJsID0+IHVybC5vYmplY3RfdHlwZSA9PT0gJ3Byb2R1Y3QnKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnVybF9zdHJ1Y3QuZmluZCh1cmwgPT4gL15odHRwczpcL1wvbVwudGJcLmNuXC8vLnRlc3QodXJsLmxvbmdfdXJsKSkpIHJldHVybiAnaGlkZSc7CiAgICAgICAgICBpZiAoZmVlZC51cmxfc3RydWN0LmZpbmQodXJsID0+IC9idXlcLnBuZyQvLnRlc3QodXJsLnVybF90eXBlX3BpYykpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgaWYgKGZlZWQudXJsX3N0cnVjdC5maW5kKHVybCA9PiAvXmh0dHBzOlwvXC9zaG9wXC5zY1wud2VpYm9cLmNvbVwvLy50ZXN0KHVybC5sb25nX3VybCkpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgaWYgKGZlZWQudXJsX3N0cnVjdC5maW5kKHVybCA9PiAvc2hvcF9zY193ZWliby8udGVzdCgodXJsLmFjdGlvbmxvZyB8fCB7fSkub2lkKSkpIHJldHVybiAnaGlkZSc7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLndlaWJvUGF5R2lmdEZlZWRGaWx0ZXIgPSB7CiAgICBjbjogJ+W4puacieW+ruWNmuaUr+S7mOenr+WIhuekvOWTgeWFkeaNouWNoeeJh+eahOW+ruWNmnt7aX19JywKICAgIHR3OiAn5bi25pyJ5b6u5Y2a5pSv5LuY56mN5YiG56au5ZOB5YWM5o+b5Y2h54mH55qE5b6u5Y2ae3tpfX0nLAogICAgZW46ICdXZWlibyB3aXRoIFdlaWJvIHBheSB3aXRoIHBvaW50cyBnaWZ0IGV4Y2hhbmdlIGNhcmR7e2l9fScsCiAgfTsKICBpMThuLndlaWJvUGF5R2lmdEZlZWRGaWx0ZXJEZXRhaWwgPSB7CiAgICBjbjogJ+W+ruWNmuaUr+S7mOenr+WIhuaMh+mAmui/h+WcqOW+ruWNmuS4rea2iOi0ue+8iOWmgui0reS5sOS8muWRmO+8ieS6p+eUn+eahOenr+WIhu+8jOW5tumdnuW+ruWNmuetiee6p+e7j+mqjOWAvO+8jOWPr+S7peeUqOS6juWFkeaNouekvOWTge+8iOekvOWTgeS4gOiIrOaYr+S8mOaDoOWIuOaIluaKveWllu+8ieOAguWLvumAieacrOmAiemhueS7pemakOiXj+W4puacieatpOexu+WFkeaNouS/oeaBr+eahOWNoeeJh+eahOW+ruWNmuOAgicsCiAgfTsKCiAgY29tbWVyY2lhbC53ZWlib1BheSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl93ZWlib19wYXknLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29tbWVyY2lhbC5jb21tZXJjaWFsLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ud2VpYm9QYXlHaWZ0RmVlZEZpbHRlciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4ud2VpYm9QYXlHaWZ0RmVlZEZpbHRlckRldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiB3ZWlib1Byb2R1Y3RGZWVkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ2RpdlthY3Rpb24tZGF0YSo9Im9iamVjdGlkPTEwNDIwMjU6Il0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCdhW3N1ZGEtdWF0cmFjayo9IjEwNDIwMjUtd2VicGFnZSJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4udXNlckxpa2VGZWVkRmlsdGVyID0gewogICAgY246ICfmt7flhaXkuKrkurrkuLvpobXnmoTotZ7ov4fnmoTlvq7ljZonLAogICAgaGs6ICfmt7flhaXlgIvkurrkuLvpoIHnmoTotIrpgY7nmoTlvq7ljZonLAogICAgdHc6ICfmt7flhaXlgIvkurrkuLvpoIHnmoTotIrpgY7nmoTlvq7ljZonLAogICAgZW46ICdXZWlibyBMaWtlZCBpbiBQZXJzb25hbCBwYWdlJywKICB9OwogIGkxOG4udXNlckxpa2VGZWVkRmlsdGVyRGV0YWlsID0gewogICAgY246ICfkuKrkurrkuLvpobXmtojmga/mtYHkuK3mt7flhaXnmoTlvq7ljZrjgIInLAogIH07CgogIGNvbW1lcmNpYWwudXNlckxpa2UgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfdXNlcl9saWtlJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbW1lcmNpYWwuY29tbWVyY2lhbCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnVzZXJMaWtlRmVlZEZpbHRlciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4udXNlckxpa2VGZWVkRmlsdGVyRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIHVzZXJMaWtlRmVlZEZpbHRlcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoaW5pdC5wYWdlLnR5cGUoKSAhPT0gJ3Byb2ZpbGUnKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCB7IG9pZCwgb25pY2sgfSA9IGluaXQucGFnZS4kQ09ORklHOwogICAgICAgIGlmICghb2lkIHx8ICFvbmljaykgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgW2F1dGhvcl0gPSBmZWVkUGFyc2VyLmF1dGhvci5pZChmZWVkKTsKICAgICAgICBjb25zdCBbZmF1dGhvcl0gPSBmZWVkUGFyc2VyLmZhdXRob3IuaWQoZmVlZCk7CiAgICAgICAgaWYgKChmYXV0aG9yIHx8IGF1dGhvcikgIT09IG9pZCkgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5mYWtlV2VpYm9GaWx0ZXIgPSB7CiAgICBjbjogJ+a3t+WFpeW+ruWNmuWIl+ihqOeahOaOqOiNkOWGheWuue+8iOWlveWPi+aOqOiNkOOAgeeDremXqOivnemimO+8iXt7PGk+fX0nLAogICAgaGs6ICfmt7flhaXlvq7ljZrliJfooajnmoTmjqjolqblhaflrrnvvIjlpb3lj4vmjqjolqbjgIHnhrHploDoqbHpoYzvvIl7ezxpPn19JywKICAgIHR3OiAn5re35YWl5b6u5Y2a5YiX6KGo55qE5o6o6Jam5YWn5a6577yI5aW95Y+L5o6o6Jam44CB54ax6ZaA6Kmx6aGM77yJe3s8aT59fScsCiAgICBlbjogJ090aGVyIGNvbnRlbnRzIGluIFdlaWJvIGxpc3R7ezxpPn19JywKICB9OwogIGkxOG4uZmFrZVdlaWJvRmlsdGVyRGV0YWlsID0gewogICAgY246ICfmiYDmnInlnKjlvq7ljZrkuI7lvq7ljZrkuYvpl7Tmt7flhaXnmoTlhbbku5blhoXlrrnvvIzov5nkupvlhoXlrrnlvoDlvoDkuI3mmK/lvq7ljZrmtojmga/vvIzmr5TlpoLigJzlpb3lj4vmjqjojZDigJ3igJzng63pl6jor53popjigJ3nrYnjgIInLAogIH07CgogIC8vIOi/meS6m+WGheWuueS4jeaYr+ecn+ato+eahOa2iOaBr++8jOWQhOexu+i/h+a7pOinhOWImeWkhOeQhui/meS6m+WGheWuueWPr+iDveacieWQhOenjemXrumimAogIC8vIOaJgOS7pei/meadoeinhOWImeiiq+iuvue9ruS4uuacgOmrmOeahOS8mOWFiOe6p++8jOiAjOS4lOWmguaenOWFs+mXreS6hui/meS4quiuvue9rumhue+8jOWwseebtOaOpeiuqei/meS6m+S4nOilv+aYvuekuuWHuuadpQogIGNvbW1lcmNpYWwuZmFrZVdlaWJvID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmlsdGVyX2Zha2Vfd2VpYm8nLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29tbWVyY2lhbC5jb21tZXJjaWFsLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmFrZVdlaWJvRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mYWtlV2VpYm9GaWx0ZXJEZXRhaWwgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gZmFrZVdlaWJvRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoZmVlZC5tYXRjaGVzKCdbaWRePSJQbF9Db3JlX1dlbmRhTGlzdF9fIl0gKicpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoZmVlZC5oYXNBdHRyaWJ1dGUoJ21pZCcpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAocnVsZS5pc0VuYWJsZWQoKSAmJiBpbml0LnBhZ2UudHlwZSgpICE9PSAnc2VhcmNoJykgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gJ3Vuc2V0JzsKICAgICAgfSwgeyBwcmlvcml0eTogMWU2IH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9tb3JlL2NvbnRlbnQuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKCiAgY29uc3QgbW9yZSA9IHlhd2YucnVsZXMubW9yZTsKCiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBpMThuLm1vcmVDb250ZW50R3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn6ZqQ6JeP5Lul5LiL5b6u5Y2aIC0g54m55a6a5YaF5a65JywKICAgIHR3OiAn6Zqx6JeP5Lul5LiL5YWn5a65IC0g5p+Q5Lqb5YaF5a65JywKICAgIGVuOiAnSGlkZSBmb2xsb3dpbmcgY29udGVudCAtIENlcnRhaW4gQ29udGVudCcsCiAgfTsKCiAgY29uc3QgY29udGVudCA9IG1vcmUuY29udGVudCA9IHt9OwogIGNvbnRlbnQuY29udGVudCA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBtb3JlLm1vcmUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5tb3JlQ29udGVudEdyb3VwVGl0bGUsCiAgfSk7CgogIGkxOG4uZGVsZXRlZEZvcndhcmRGaWx0ZXIgPSB7CiAgICBjbjogJ+W3suWIoOmZpOaIluaXoOazleafpeeci+eahOW+ruWNmueahOi9rOWPkXt7aX19JywKICAgIHR3OiAn5bey5Yiq6Zmk5oiW54Sh5rOV5p+l55yL55qE5b6u5Y2a55qE6L2J55m8e3tpfX0nLAogICAgZW46ICdGb3J3YXJkIG9mIGRlbGV0ZWQgLyBpbmFjY2Vzc2libGUgV2VpYm97e2l9fScsCiAgfTsKICBpMThuLmRlbGV0ZWRGb3J3YXJkRmlsdGVyRGV0YWlsID0gewogICAgY246ICfljIXmi6zlm6DkuLrliKDpmaTmiJblr7nlvq7ljZrorr7nva7kuobpmpDnp4HmnYPpmZDogIzkvb/mgqjml6Dms5XnnIvliLDljp/mlofnmoTlvq7ljZrjgILov5nkupvlvq7ljZrmgqjlj6rog73nnIvop4Hovazlj5HogIXnmoTor4TorrrvvIzkvYbmmK/ml6Dms5XnnIvliLDljp/lvq7ljZrnmoTlhoXlrrnjgIInLAogIH07CgogIGNvbnRlbnQuZGVsZXRlZEZvcndhcmQgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ2ZpbHRlcl9kZWxldGVkX2ZvcndhcmQnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZGVsZXRlZEZvcndhcmRGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmRlbGV0ZWRGb3J3YXJkRmlsdGVyRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIGRlbGV0ZWRGb3J3YXJkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IGlzRm9yd2FyZCA9IGZlZWRQYXJzZXIuaXNGb3J3YXJkKGZlZWQpOwogICAgICAgIGlmICghaXNGb3J3YXJkKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICBjb25zdCBmb3J3YXJkQ29udGVudCA9IGZlZWQucXVlcnlTZWxlY3RvcignLldCX21lZGlhX2V4cGFuZCAuV0JfaW5mbyAuV0JfbmFtZSwgLldCX2V4cGFuZCAuV0JfaW5mbyAuV19mYicpOwogICAgICAgICAgaWYgKGZvcndhcmRDb250ZW50KSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiAnaGlkZSc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChmZWVkLnJldHdlZXRlZF9zdGF0dXMpIHsKICAgICAgICAgICAgaWYgKChmZWVkLnJldHdlZXRlZF9zdGF0dXMudmlzaWJsZSB8fCB7fSkubGlzdF9pZCA+IDApIHJldHVybiAnaGlkZSc7CiAgICAgICAgICAgIGlmIChmZWVkLnJldHdlZXRlZF9zdGF0dXMuZGVsZXRlZCkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5jb21tZW50QW5kRm9yd2FyZEZpbHRlciA9IHsKICAgIGNuOiAn5Zue5aSN5bm26L2s5Y+R55qE5b6u5Y2ae3tpfX0nLAogICAgdHc6ICflm57opobkuKbovYnnmbznmoTlvq7ljZp7e2l9fScsCiAgICBlbjogJ1dlaWJvIGZvcndhcmRlZCBhcyByZXBseXt7aX19JywKICB9OwogIGkxOG4uY29tbWVudEFuZEZvcndhcmRGaWx0ZXJEZXRhaWwgPSB7CiAgICBjbjogJ+WcqOWbnuWkjeS7luS6uuW+ruWNmuaXtumAieaLqeKAnOWQjOaXtui9rOWPkeWIsOaIkeeahOW+ruWNmuKAneS8muWwhuWbnuWkjeWSjOiiq+WbnuWkjeeahOWGheWuuei9rOWPkeS4uuS4gOadoeW+ruWNmu+8jOWLvumAieWQjuS8mumakOiXj+WbnuWkjeaXtui9rOWPkeeahOW+ruWNmuOAgicsCiAgfTsKCiAgY29udGVudC5jb21tZW50QW5kRm9yd2FyZCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl9jb21tZW50X2FuZF9mb3J3YXJkJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmNvbW1lbnRBbmRGb3J3YXJkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jb21tZW50QW5kRm9yd2FyZEZpbHRlckRldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiBjb21tZW50QW5kRm9yd2FyZEZpbHRlcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCByZXBseVRleHQgPSBbJ+WbnuWkjScsICflm57lvqknLCAn5Zue6KaGJywgJ1JlcGx5JywgJ3JlcGx5J107CiAgICAgICAgaWYgKCFmZWVkUGFyc2VyLmlzRm9yd2FyZChmZWVkKSkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgY29udGVudCA9IGZlZWQucXVlcnlTZWxlY3RvcignW25vZGUtdHlwZT0iZmVlZF9saXN0X2NvbnRlbnQiXScpOyBpZiAoIWNvbnRlbnQpIHJldHVybiBudWxsOwogICAgICAgIGlmICghY29udGVudC5maXJzdENoaWxkIHx8ICFyZXBseVRleHQuaW5jbHVkZXMoY29udGVudC5maXJzdENoaWxkLnRleHRDb250ZW50LnRyaW0oKSkpIHJldHVybiBudWxsOwogICAgICAgIGlmICghY29udGVudC5jaGlsZE5vZGVzWzFdIHx8ICFjb250ZW50LmNoaWxkTm9kZXNbMV0uZ2V0QXR0cmlidXRlKCd1c2VyY2FyZCcpKSByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4gJ2hpZGUnOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLnZvdGVGZWVkRmlsdGVyID0gewogICAgY246ICfmipXnpajlvq7ljZp7e2l9fScsCiAgICB0dzogJ+aKleelqOW+ruWNmnt7aX19JywKICAgIGVuOiAnVm90aW5nIHdlaWJve3tpfX0nLAogIH07CiAgaTE4bi52b3RlRmVlZEZpbHRlckRldGFpbCA9IHsKICAgIGNuOiAn5YyF5ous5Zyo5Y+R5biD5b6u5Y2a5pe26YCJ5oup5oqV56Wo55qE5b6u5Y2a77yM5Lmf5YyF5ous5Zyo5oqV56Wo5pe26Ieq5Yqo5Y+R5Ye655qE5b6u5Y2a44CCJywKICB9OwoKICBjb250ZW50LnZvdGUgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ2ZpbHRlcl92b3RlJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnZvdGVGZWVkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi52b3RlRmVlZEZpbHRlckRldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiB2b3RlRmVlZEZpbHRlcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCcuV0JfZnJvbSBhW2hyZWYqPSIvL3ZvdGUud2VpYm8uY29tLyJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCcuV0JfZmVlZF9zcGVjX2NvbnQgYVthY3Rpb24tZGF0YSo9InZvdGUud2VpYm8uY29tIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ2Fbc3VkYS11YXRyYWNrKj0iMTAyMi12b3RlIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ2Fbc3VkYS11YXRyYWNrKj0iMTAyMi1odWRvbmd2b3RlIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5pY29uX3N3X3ZvdGUnKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkUGFyc2VyLnNvdXJjZS50ZXh0KGZlZWQpLmluY2x1ZGVzKCfmipXnpagnKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZmVlZC51cmxfc3RydWN0KSkgewogICAgICAgICAgICBpZiAoZmVlZC51cmxfc3RydWN0LmZpbmQodXJsID0+IC9eMTAyMjoyMzE3MTYvLnRlc3QoKHVybC5hY3Rpb25sb2cgfHwge30pLm9pZCkpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgICBpZiAoZmVlZC51cmxfc3RydWN0LmZpbmQodXJsID0+IC9odHRwczpcL1wvdm90ZVwud2VpYm9cLmNvbVwvLy50ZXN0KHVybC5sb25nX3VybCkpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgICBpZiAoZmVlZC51cmxfc3RydWN0LmZpbmQodXJsID0+IC9odHRwczpcL1wvdm90ZVwud2VpYm9cLmNvbVwvLy50ZXN0KHVybC5vcmlfdXJsKSkpIHJldHVybiAnaGlkZSc7CiAgICAgICAgICAgIGlmIChmZWVkLnVybF9zdHJ1Y3QuZmluZCh1cmwgPT4gL3NpbmF3ZWlibzpcL1wvYnJvd3Nlclw/dXJsPWh0dHBzJTNBJTJGJTJGdm90ZVwud2VpYm9cLmNvbSUyRi8udGVzdCh1cmwub3JpX3VybCkpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgfQogICAgICAgICAgaWYgKChmZWVkLnBhZ2VfaW5mbyB8fCB7fSkub2JqZWN0X3R5cGUgPT09ICdodWRvbmd2b3RlJykgcmV0dXJuICdoaWRlJzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4ucmVkUGFja0ZlZWRGaWx0ZXIgPSB7CiAgICBjbjogJ+aKoue6ouWMheW+ruWNmnt7aX19JywKICAgIHR3OiAn5pC257SF5YyF5b6u5Y2ae3tpfX0nLAogICAgZW46ICdXZWlibyB3aXRoIFJlZCBFbnZlbG9wZXMgUnVzaCB7e2l9fScsCiAgfTsKICBpMThuLnJlZFBhY2tGZWVkRmlsdGVyRGV0YWlsID0gewogICAgY246ICfmiqLnuqLljIXmtLvliqjoh6rliqjlj5HluIPnmoTlvq7ljZonLAogIH07CgogIGNvbnRlbnQucmVkUGFjayA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl9yZWRfcGFjaycsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBjb250ZW50LmNvbnRlbnQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5yZWRQYWNrRmVlZEZpbHRlciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4ucmVkUGFja0ZlZWRGaWx0ZXJEZXRhaWwgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gcmVkUGFja0ZlZWRGaWx0ZXIoZmVlZCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignLlBDRF9ldmVudF9yZWQyMDE0JykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignLldCX2ZlZWRfc3BlY19yZWQyMDE1JykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignLldCX2ZlZWRfc3BlY19yZWQxNicpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5tZWRpYS1yZWRwYWNrZXQnKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5pbWFnZVRhZ0ZlZWRGaWx0ZXIgPSB7CiAgICBjbjogJ+mFjeWbvuW4puacieagh+etvueahOW+ruWNmnt7aX19JywKICAgIHR3OiAn6YWN5ZyW5bi25pyJ5qiZ6KiY55qE5b6u5Y2ae3tpfX0nLAogICAgZW46ICdGZWVkcyB3aXRoIHRhZ3Mgb24gaW1hZ2VzIHt7aX19JywKICB9OwogIGkxOG4uaW1hZ2VUYWdGZWVkRmlsdGVyRGV0YWlsID0gewogICAgY246ICflvq7ljZrlhYHorrjnu5nphY3lm77mt7vliqDmoIfnrb7vvIzmoIfnrb7lj6/ku6XmmK/mlofmnKzjgIHor53popjjgIHnlKjmiLfku6Xlj4rllYblk4Hpk77mjqXjgILpgInmi6nov5nmnaHop4TliJnlkI7lsIbkuI3kvJrnnIvliLDlr7nlupTnmoTlvq7ljZrvvIzlj6blpJbmgqjlj6/ku6Xlj6rpmpDol49bW2NsZWFuX2ZlZWRfcGljX3RhZ11d44CCJywKICB9OwogIGNvbnRlbnQuaW1hZ2VUYWcgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sIC8vIOiZveeEtiBWNyDnvZHpobXnm67liY3ov5jkuI3mlK/mjIHmn6XnnIvmoIfnrb7vvIzkuI3ov4fmiJHlj6rnrqHmnInmsqHmnInvvIzkuI3nrqHnnIvlvpfop4HnnIvkuI3op4EKICAgIGlkOiAnZmlsdGVyX2ltYWdlX3RhZycsCiAgICB2ZXJzaW9uOiA0NywKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uaW1hZ2VUYWdGZWVkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5pbWFnZVRhZ0ZlZWRGaWx0ZXJEZXRhaWwgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gaW1hZ2VUYWdGZWVkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICAgIGNvbnN0IGxpc3QgPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5XQl9tZWRpYV9hW2FjdGlvbi1kYXRhKj0icGhvdG9fdGFnX3BpZHMiXScpOwogICAgICAgICAgaWYgKCFsaXN0KSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IHRhZ1BpZHNTdHIgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxpc3QuZ2V0QXR0cmlidXRlKCdhY3Rpb24tZGF0YScpKS5nZXQoJ3Bob3RvX3RhZ19waWRzJyk7CiAgICAgICAgICBpZiAoIXRhZ1BpZHNTdHIpIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgdGFnUGlkcyA9IHRhZ1BpZHNTdHIuc3BsaXQoJywnKTsKICAgICAgICAgIGNvbnN0IGl0ZW1zID0gZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCdbYWN0aW9uLXR5cGU9ImZsX3BpY3MiXVthY3Rpb24tZGF0YSo9InBpY19pZCJdJyk7CiAgICAgICAgICBjb25zdCBoYXNUYWcgPSBBcnJheS5mcm9tKGl0ZW1zKS5zb21lKGl0ZW0gPT4gewogICAgICAgICAgICBjb25zdCBpZCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoaXRlbS5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJykpLmdldCgncGljX2lkJyk7CiAgICAgICAgICAgIHJldHVybiB0YWdQaWRzLmluY2x1ZGVzKGlkKTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKCFoYXNUYWcpIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuICdoaWRlJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgcGljcyA9IGZlZWRQYXJzZXIucGljcy5pbmZvKGZlZWQpOwogICAgICAgICAgaWYgKHBpY3MuZmluZChwaWMgPT4gKHBpYy5waWNfdGFncyB8fCBbXSkubGVuZ3RoKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5rb2lGb3J3YXJkRmVlZEZpbHRlciA9IHsKICAgIGNuOiAn6L2s5Y+R5Zu+5qCH5piv6ZSm6bKk55qE5b6u5Y2a77yI6L2s5Y+R5oq95aWW5b6u5Y2a77yJJywKICAgIHR3OiAn6L2J55m85ZyW56S65piv6Yym6a+J55qE5b6u5Y2a77yI6L2J55m85oq9542O5b6u5Y2a77yJJywKICAgIGVuOiAnRm9yd2FyZCBpY29uIGFzIGEga29pIChmb3J3YXJkIHRoaXMgd2VpYm8gZm9yIGRyYXcpJywKICB9OwogIGkxOG4ua29pRm9yd2FyZEZlZWRGaWx0ZXJEZXRhaWwgPSB7CiAgICBjbjogJ+W+ruWNmuS8muWwhui9rOWPkeaKveWllueahOa2iOaBr+eahOi9rOWPkeaMiemSruaYvuekuuaIkOS4gOadoemxvOeahOWbvuagh+OAgui/memhueinhOWImeS8muagueaNrui/meS4quWbvuagh+S9nOS4uuWIpOaWreS+neaNrumakOiXj+WvueW6lOeahOW+ruWNmuOAgicsCiAgfTsKCiAgY29udGVudC5rb2lGb3J3YXJkID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmlsdGVyX2tvaV9mb3J3YXJkJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmtvaUZvcndhcmRGZWVkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5rb2lGb3J3YXJkRmVlZEZpbHRlckRldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiBrb2lGb3J3YXJkRmVlZEZpbHRlcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCdhW2FjdGlvbi10eXBlPSJmbF9mb3J3YXJkIl0gLmljb25famlubGknKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5hcHBJdGVtRmVlZEZpbHRlciA9IHsKICAgIGNuOiAn5LuL57uN5b6u5Y2a5bqU55So55qE5b6u5Y2ae3tpfX0nLAogICAgdHc6ICfku4vntLnlvq7ljZrmh4nnlKjnmoTlvq7ljZp7e2l9fScsCiAgICBlbjogJ1dlaWJvIHdpdGggYXBwIGl0ZW0ge3tpfX0nLAogIH07CiAgaTE4bi5hcHBJdGVtRmVlZEZpbHRlckRldGFpbCA9IHsKICAgIGNuOiAn5LuL57uN5b6u5Y2a5bqU55So55qE5b6u5Y2a77yM5YyF5ous5ZCr5pyJ5b6u5Y2a5bqU55So55qE6ZO+5o6l5oiW5ZCr5pyJ5b6u5Y2a5bqU55So55qE5Y2h54mH55qE5oOF5Ya144CC5b6u5Y2a5bqU55So55qE6ZO+5o6l5Lya5Lul5bqU55So5Zu+5qCH5qCH6K6w44CC5Yu+6YCJ5q2k6aG55Lul6ZqQ6JeP5q2k57G75b6u5Y2a44CCJywKICB9OwoKICBjb250ZW50LmFwcEl0ZW0gPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfYXBwX2l0ZW0nLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uYXBwSXRlbUZlZWRGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmFwcEl0ZW1GZWVkRmlsdGVyRGV0YWlsIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIGFwcEl0ZW1GZWVkRmlsdGVyKGZlZWQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5XQl9mZWVkX3NwZWNbZXhwLWRhdGEqPSJrZXk9dGJsb2dfd2VpYm9jYXJkIl1bZXhwLWRhdGEqPSIxMDQyMDA1LWFwcEl0ZW0iXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLndlbmRhRmVlZEZpbHRlciA9IHsKICAgIGNuOiAn5b6u5Y2a6Zeu562U55u45YWz55qE5o+Q6Zeu44CB5Zue562U5oiW5Zu06KeCe3tpfX0nLAogICAgdHc6ICflvq7ljZrllY/nrZTnm7jpl5znmoTmj5DllY/jgIHlm57nrZTmiJblnI3op4B7e2l9fScsCiAgICBlbjogJ1dlaWJvIGFza2luZywgYW5zd2VyaW5nLCBvciB2aWV3aW5nIFdlaWJvIFEgYW5kIEEge3tpfX0nLAogIH07CiAgaTE4bi53ZW5kYUZlZWRGaWx0ZXJEZXRhaWwgPSB7CiAgICBjbjogJ+W+ruWNmumXruetlOWKn+iDveeahOaPkOmXruOAgeWbnuetlOaIluWbtOingumDveS8muWPkeW4g+S4gOadoeaWsOW+ruWNmu+8jOWmguaenOaCqOS4jeW4jOacm+eci+WIsOebuOWFs+W+ruWNmu+8jOaCqOWPr+S7peWLvumAieatpOmAiemhueS7pemakOiXj+ebuOWFs+W+ruWNmuOAgicsCiAgfTsKCiAgY29udGVudC53ZW5kYSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl93ZW5kYScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBjb250ZW50LmNvbnRlbnQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi53ZW5kYUZlZWRGaWx0ZXIsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLndlbmRhRmVlZEZpbHRlckRldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiB3ZW5kYUZlZWRGaWx0ZXIoZmVlZCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgLy8g6L+Z5p2h6KeE5YiZ5LiN5Zyo5pi+56S65p+Q5Lq655qE5YWo6YOo6Zeu562U6aG16Z2i55Sf5pWI77yM6YG/5YWN5pi+56S656m66aG16Z2iCiAgICAgICAgaWYgKGZlZWQubWF0Y2hlcygnW2lkXj0iUGxfQ29yZV9XZW5kYUxpc3RfXyJdIConKSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignW3N1ZGEtdWF0cmFjayo9IjEwMjItd2VuZGEiXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLndlbndvRHJGZWVkRmlsdGVyID0gewogICAgY246ICflkKvmnInniLHpl67ljLvnlJ/lgaXlurfnp5Hmma7mlofnq6DnmoTlvq7ljZp7e2l9fScsCiAgICB0dzogJ+WQq+acieaEm+WVj+mGq+eUn+WBpeW6t+enkeaZruaWh+eroOeahOW+ruWNmnt7aX19JywKICAgIGVuOiAnV2VpYm8gd2l0aCDniLHpl67ljLvnlJ8gKGlhc2sgbWVkaWNhbCkgYXJ0aWNsZSB7e2l9fScsCiAgfTsKICBpMThuLndlbndvRHJGZWVkRmlsdGVyRGV0YWlsID0gewogICAgY246ICfniLHpl67ljLvnlJ/lgaXlurfnp5Hmma7mlofnq6DmmK/kuIDkupvmnaXoh6ogd2Vud28uY29tIOeahOWBpeW6t+OAgeWMu+eWl+ebuOWFs+aWh+eroOOAguaJk+W8gOeIsemXruWMu+eUn+WBpeW6t+enkeaZruaWh+eroOeahOe9keermeaXtu+8jOaCqOWPr+iDveS8muiHquWKqOWFs+azqOaWh+eroOS9nOiAheaIluebuOW6lOW4kOWPt+OAguW8gOWQr+S7pemakOiXj+WMheWQq+atpOexu+aWh+eroOeahOW+ruWNmuOAgicsCiAgfTsKCiAgY29udGVudC53ZW53b0RyID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmlsdGVyX3dlbndvX2RyJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLndlbndvRHJGZWVkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi53ZW53b0RyRmVlZEZpbHRlciB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiB3ZW53b0RyRmVlZEZpbHRlcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCdkaXZbYWN0aW9uLWRhdGEqPSJvYmplY3RpZD0yMDE3ODk2MDAxOiJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignYVtzdWRhLXVhdHJhY2sqPSIyMDE3ODk2MDAxLXByb2R1Y3QiXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1tleHAtZGF0YSo9IjIyNDM2MTUwMDEtcHJvZHVjdCJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgaWYgKGZlZWQucXVlcnlTZWxlY3RvcignYVtocmVmKj0iLy9kci53ZW53by5jb20vIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi55aXpoaWJvRmVlZEZpbHRlciA9IHsKICAgIGNuOiAn5ZCr5pyJ4oCc5LiA55u05pKt4oCd6KeG6aKR55u05pKt55qE5b6u5Y2afHt7dHlwZX19JywKICAgIHR3OiAn5ZCr5pyJ44CM5LiA55u05pKt44CN55u05pKt5b2x54mH55qE5b6u5Y2afHt7dHlwZX19JywKICAgIGVuOiAnV2VpYm8gd2l0aCBsaXZlIHZpZGVvIG9uIHlpemhpYm8gfCB7e3R5cGV9fScsCiAgfTsKICBpMThuLnlpemhpYm9GZWVkRmlsdGVyQWxsID0gewogICAgY246ICfpmpDol4/mraPlnKjnm7Tmkq3miJblt7Lnu5PmnZ/lm57mlL4nLAogICAgdHc6ICfpmrHol4/mraPlnKjnm7Tmkq3miJblt7LntZDmnZ/lm57mlL4nLAogICAgZW46ICdoaWRlIGxpdmUgYW5kIHJlcGxheScsCiAgfTsKICBpMThuLnlpemhpYm9GZWVkRmlsdGVyUmVwbGF5ID0gewogICAgY246ICfku4XpmpDol4/lt7Lnu5PmnZ/lm57mlL4nLAogICAgdHc6ICflg4XpmrHol4/lt7LntZDmnZ/lm57mlL4nLAogICAgZW46ICdoaWRlIHJlcGxheSBvbmx5JywKICB9OwoKICBjb250ZW50LnlpemhpYm8gPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfeWl6aGlibycsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBjb250ZW50LmNvbnRlbnQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi55aXpoaWJvRmVlZEZpbHRlciwKICAgIHJlZjogewogICAgICB0eXBlOiB7CiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgc2VsZWN0OiBbCiAgICAgICAgICB7IHZhbHVlOiAnYWxsJywgdGV4dDogKCkgPT4gaTE4bi55aXpoaWJvRmVlZEZpbHRlckFsbCB9LAogICAgICAgICAgeyB2YWx1ZTogJ3JlcGxheScsIHRleHQ6ICgpID0+IGkxOG4ueWl6aGlib0ZlZWRGaWx0ZXJSZXBsYXkgfSwKICAgICAgICBdLAogICAgICB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiB5aXpoaWJvRmVlZEZpbHRlcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCB0eXBlID0gcnVsZS5yZWYudHlwZS5nZXRDb25maWcoKTsKICAgICAgICBjb25zdCBsaXZlID0gZmVlZC5xdWVyeVNlbGVjdG9yKCcuV0JfdmlkZW9bYWN0aW9uLWRhdGEqPSJ0eXBlPWZlZWRsaXZlIl0nKTsKICAgICAgICBpZiAoIWxpdmUpIHJldHVybiBudWxsOwogICAgICAgIGlmICh0eXBlID09PSAnYWxsJykgcmV0dXJuICdoaWRlJzsKICAgICAgICBpZiAobGl2ZS5tYXRjaGVzKCdbYWN0aW9uLWRhdGEqPSJpc19yZXBsYXk9MSJdJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4ucGFpZEZlZWRGaWx0ZXIgPSB7CiAgICBjbjogJ+mcgOimgeS7mOi0ueafpeeci+eahOW+ruWNmnt7aX19JywKICAgIHR3OiAn6ZyA6KaB5LuY6LK75p+l55yL55qE5b6u5Y2ae3tpfX0nLAogICAgZW46ICdGZWVkRmlsdGVyIHJlcXVpcmUgcGFpZCB0byB2aWV3IHt7aX19JywKICB9OwogIGkxOG4ucGFpZEZlZWRGaWx0ZXJEZXRhaWwgPSB7CiAgICBjbjogJ+WNmuS4u+WcqOWPkeW4g+W+ruWNmuaXtu+8jOWPr+S7pemAieaLqeaMh+WumuWGheWuuemcgOimgeS7mOi0ueaJjeiDveafpeeci+OAguWcqOaCqOWQkeWNleadoeWGheWuueaIluWNmuS4u+S7mOi0ueWQju+8jOaJjeWPr+afpeeci+ebuOWFs+WGheWuueOAguaJgOS7mOi0ueeUqOmZpOWNmuS4u+eahOaUtuebiuWklu+8jOi/mOWPr+iDveWMheWQq+mDqOWIhua4oOmBk+WVhuWIhuaIkOWSjOeojumHkeOAgicsCiAgfTsKCiAgY29udGVudC5wYWlkID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmaWx0ZXJfcGFpZCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBjb250ZW50LmNvbnRlbnQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5wYWlkRmVlZEZpbHRlciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4ucGFpZEZlZWRGaWx0ZXJEZXRhaWwgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gcGFpZEZlZWRGaWx0ZXIoZmVlZCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhdGlvbi5zZWFyY2gpOwogICAgICAgICAgY29uc3QgcGFpZE9ubHkgPSArc2VhcmNoUGFyYW1zLmdldCgndnBsdXMnKSB8fCBzZWFyY2hQYXJhbXMuZ2V0KCdpc192Y2x1YicpOwogICAgICAgICAgaWYgKHBhaWRPbmx5KSByZXR1cm4gbnVsbDsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJy5pY29uX3ZwbHVzJykpIHJldHVybiAnaGlkZSc7CiAgICAgICAgICBpZiAoZmVlZC5xdWVyeVNlbGVjdG9yKCcuV0JfbWVkaWFfYVthY3Rpb24tZGF0YSo9ImlzUHJpdmF0ZT0xIl0nKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoJ1thY3Rpb24tdHlwZT0iZmxfcGljcyJdW2FjdGlvbi1kYXRhKj0iaXNQcml2YXRlPTEiXScpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBwaWNzID0gZmVlZFBhcnNlci5waWNzLmluZm8oZmVlZCk7CiAgICAgICAgICAvLyDku5jotLnlm77niYcKICAgICAgICAgIGlmIChwaWNzLmZpbmQocGljID0+IChwaWMuYmx1ciB8fCB7fSkuaXNQYXkpKSByZXR1cm4gJ2hpZGUnOwogICAgICAgICAgLy8g5LuY6LS55paH56ug55qE54m55b6B5om+5LiN5Yiw77yBCiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLm11bHRpcGxlVG9waWNzRmVlZEZpbHRlciA9IHsKICAgIGNuOiAn5q2j5paH5Lit5o+Q5YiwfOiHs+WwkXt7bnVtfX3kuKror53popjnmoTlvq7ljZp7e2l9fScsCiAgICB0dzogJ+ato+aWh+S4reaPkOWIsHzoh7PlsJF7e251bX195YCL6Kmx6aGM55qE5b6u5Y2ae3tpfX0nLAogICAgZW46ICdGZWVkcyB3aXRoIHwgYXQgbGVhc3Qge3tudW19fSB0b3BpY3MgaW4gaXRzIGNvbnRlbnQge3tpfX0nLAogIH07CiAgaTE4bi5tdWx0aXBsZVRvcGljc0ZlZWRGaWx0ZXJEZXRhaWxzID0gewogICAgY246ICfnlLHkuo7lvq7ljZrng63pl6jor53popjmkJzntKLjgIHor53popjkuLvmjIHkurrnrYnlip/og73kvJrlop7liqDluKbmnInmn5Dkupvor53popjnmoTlvq7ljZrnmoTmm53lhYnph4/jgILmiYDku6XlrZjlnKjkuIDkupvpgJrov4fnvZfliJfoi6XlubLng63pl6jor53popjmnaXlop7liqDlub/lkYrlhoXlrrnmm53lhYnph4/nmoTlvq7ljZrjgILmgqjlj6/ku6XpmpDol4/kuIDmrKHmgKfmj5DliLDkuoblpKrlpJror53popjnmoTlvq7ljZrku6XlhY3nnIvliLDku5bku6zjgIInLAogIH07CgogIGNvbnRlbnQubXVsdGlwbGVUb3BpY3MgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfbXVsdGlwbGVfdG9waWNzX2ZlZWQnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ubXVsdGlwbGVUb3BpY3NGZWVkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIG51bTogeyB0eXBlOiAncmFuZ2UnLCBtaW46IDMsIG1heDogMTAsIGluaXRpYWw6IDUgfSwKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLm11bHRpcGxlVG9waWNzRmVlZEZpbHRlckRldGFpbHMgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gbXVsdGlwbGVUb3BpY3NGaWx0ZXIoZmVlZCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgbGltaXQgPSBydWxlLnJlZi5udW0uZ2V0Q29uZmlnKCk7CiAgICAgICAgY29uc3QgdG9waWNzID0gZmVlZFBhcnNlci50b3BpYy5kb20oZmVlZCk7CiAgICAgICAgaWYgKHRvcGljcy5sZW5ndGggPj0gbGltaXQpIHJldHVybiAnaGlkZSc7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuZmVlZC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4uZmFzdEZvcndhcmRGZWVkRmlsdGVyID0gewogICAgY246ICfkvb/nlKjlv6vovazovazlj5HnmoTlvq7ljZonLAogICAgdHc6ICfkvb/nlKjlv6vovYnovYnnmbznmoTlvq7ljZonLAogICAgZW46ICdGYXN0IGZvcndhcmRlZCBmZWVkcycsCiAgfTsKICBpMThuLmZhc3RGb3J3YXJkRmVlZEZpbHRlckRldGFpbCA9IHsKICAgIGNuOiAn5L2/55So5b+r6L2s6L2s5Y+R5b6u5Y2a5pe277yM6L2s5Y+R5b6X5Yiw55qE5b6u5Y2a55qE6K+E6K665ZKM6L2s5Y+R5LiN5Y+v55So77yM5bGV56S65pe25LuF5pi+56S66KKr6L2s5Y+R55qE6YKj5p2h5b6u5Y2a5bm25qCH5rOo4oCc6KKrw5fDl+W/q+i9rOS6huKAneOAguS7u+S9lemSiOWvueivpeW+ruWNmueahOivhOiuuuWunumZheS4iuaYr+mSiOWvueiiq+i9rOWPkeeahOW+ruWNmueahOivhOiuuuOAgicsCiAgfTsKCiAgY29udGVudC5mYXN0Rm9yd2FyZCA9IHJ1bGUuUnVsZSh7CiAgICB3ZWlib1ZlcnNpb246IFs2LCA3XSwKICAgIGlkOiAnZmlsdGVyX2Zhc3RfZm9yd2FyZCcsCiAgICB2ZXJzaW9uOiA2NywKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmFzdEZvcndhcmRGZWVkRmlsdGVyLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mYXN0Rm9yd2FyZEZlZWRGaWx0ZXJEZXRhaWwgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gZmFzdEZvcndhcmRGaWx0ZXIoZmVlZCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGZlZWRQYXJzZXIuaXNGYXN0Rm9yd2FyZChmZWVkKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9maWx0ZXIvbW9yZS9saW5rLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKCiAgY29uc3QgbW9yZSA9IHlhd2YucnVsZXMubW9yZTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBpMThuLm1vcmVMaW5rR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn6ZqQ6JeP5Lul5LiL5b6u5Y2aIC0g5q2j5paH6ZO+5o6lJywKICAgIHR3OiAn6Zqx6JeP5Lul5LiL5YWn5a65IC0g5q2j5paH6YCj57WQJywKICAgIGVuOiAnSGlkZSBmb2xsb3dpbmcgbGluayAtIENvbnRlbnQgTGlua3MnLAogIH07CgogIGNvbnN0IGxpbmsgPSBtb3JlLmxpbmsgPSB7fTsKICBsaW5rLmxpbmsgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogbW9yZS5tb3JlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ubW9yZUxpbmtHcm91cFRpdGxlLAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGZlZWRXaXRoTGluazogeyBjbjogJ+W4puaciXt955qE5b6u5Y2aJywgdHc6ICfluLbmnIl7feeahOW+ruWNmicsIGVuOiAnRmVlZHMgY29udGFpbiB7fScgfSwKICAgIGZlZWRXaXRoTGlua1BsYWNlOiB7IGNuOiAn5L2N572u6ZO+5o6lJywgdHc6ICfkvY3nva7pgKPntZAnLCBlbjogJ2xpbmtzIG9mIHBsYWNlcycgfSwKICAgIGZlZWRXaXRoTGlua01vdmllOiB7IGNuOiAn55S15b2x6ZO+5o6lJywgdHc6ICfpm7vlvbHpgKPntZAnLCBlbjogJ2xpbmtzIG9mIG1vdmllcycgfSwKICAgIGZlZWRXaXRoTGlua0Jvb2s6IHsgY246ICflm77kuabpk77mjqUnLCB0dzogJ+WcluabuOmAo+e1kCcsIGVuOiAnbGlua3Mgb2YgYm9va3MnIH0sCiAgICBmZWVkV2l0aExpbmtUb3BpYzogeyBjbjogJ+i2heivnemTvuaOpScsIHR3OiAn6LaF6Kmx6YCj57WQJywgZW46ICdsaW5rcyBvZiBzdXBlciB0b3BpY3MnIH0sCiAgICBmZWVkV2l0aExpbmtNdXNpYzogeyBjbjogJ+mfs+S5kOmTvuaOpScsIHR3OiAn6Z+z5qiC6YCj57WQJywgZW46ICdsaW5rcyBvZiBtdXNpY3MnIH0sCiAgICBmZWVkV2l0aExpbmtTdG9jazogeyBjbjogJ+iCoeelqOmTvuaOpScsIHR3OiAn6IKh56Wo6YCj57WQJywgZW46ICdsaW5rcyBvZiBzdG9ja3MnIH0sCiAgfSk7CgogIDsgKGZ1bmN0aW9uIChsaW5rVHlwZXMpIHsKICAgIE9iamVjdC5rZXlzKGxpbmtUeXBlcykuc29ydCgpLmZvckVhY2goaWQgPT4gewogICAgICBjb25zdCB7IHR5cGUsIG5hbWUsIHJlY29nbml6ZXIgfSA9IGxpbmtUeXBlc1tpZF07CiAgICAgIGNvbnN0IHBhc2NhbENhc2VUeXBlID0gdHlwZS5yZXBsYWNlKC9eLi8sIGMgPT4gYy50b1VwcGVyQ2FzZSgpKTsKICAgICAgbGlua1t0eXBlXSA9IHJ1bGUuUnVsZSh7CiAgICAgICAgaWQ6IGBmaWx0ZXJfJHtwYXNjYWxDYXNlVHlwZX1gLAogICAgICAgIHZlcnNpb246IDMwLAogICAgICAgIHBhcmVudDogbGluay5saW5rLAogICAgICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRXaXRoTGluay5yZXBsYWNlKCd7fScsIG5hbWUpLAogICAgICAgIGluaXQoKSB7CiAgICAgICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgICAgIG9ic2VydmVyLmZlZWQuZmlsdGVyKGZ1bmN0aW9uIGZlZWRXaXRoU3BlY2lhbExpbmtGaWx0ZXIoZmVlZCkgewogICAgICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgICAgICBpZiAoaW5pdC5wYWdlLnR5cGUoKSA9PT0gdHlwZSkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIGlmIChmZWVkLnF1ZXJ5U2VsZWN0b3IoYGFbc3VkYS11YXRyYWNrKj0iMTAyMi0ke3R5cGV9Il1gKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgICAgaWYgKHJlY29nbml6ZXIgJiYgcmVjb2duaXplcihmZWVkKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgICAgIH0sCiAgICAgIH0pOwogICAgfSk7CiAgfSh7CiAgICAxMDAxMDE6IHsKICAgICAgdHlwZTogJ3BsYWNlJywKICAgICAgbmFtZTogKCkgPT4gaTE4bi5mZWVkV2l0aExpbmtQbGFjZSwKICAgIH0sCiAgICAxMDAxMjA6IHsKICAgICAgdHlwZTogJ21vdmllJywKICAgICAgbmFtZTogKCkgPT4gaTE4bi5mZWVkV2l0aExpbmtNb3ZpZSwKICAgIH0sCiAgICAxMDAyMDI6IHsKICAgICAgdHlwZTogJ2Jvb2snLAogICAgICBuYW1lOiAoKSA9PiBpMThuLmZlZWRXaXRoTGlua0Jvb2ssCiAgICB9LAogICAgMTAwODA4OiB7CiAgICAgIHR5cGU6ICd0b3BpYycsCiAgICAgIG5hbWU6ICgpID0+IGkxOG4uZmVlZFdpdGhMaW5rVG9waWMsCiAgICAgIHJlY29nbml6ZXI6IGZlZWQgPT4gewogICAgICAgIGNvbnN0IHNvdXJjZSA9IGZlZWQucXVlcnlTZWxlY3RvcignLldCX2Zyb20gYVtocmVmXj0iaHR0cHM6Ly9odWF0aS53ZWliby5jb20vay8iXScpOwogICAgICAgIGlmIChzb3VyY2UpIHJldHVybiB0cnVlOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSwKICAgIH0sCiAgICAxMDE1MTU6IHsKICAgICAgdHlwZTogJ211c2ljJywKICAgICAgbmFtZTogKCkgPT4gaTE4bi5mZWVkV2l0aExpbmtNdXNpYywKICAgIH0sCiAgICAyMzA2Nzc6IHsKICAgICAgdHlwZTogJ3N0b2NrJywKICAgICAgbmFtZTogKCkgPT4gaTE4bi5mZWVkV2l0aExpbmtTdG9jaywKICAgIH0sCiAgfSkpOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9tb3JlL3Rvb21hbnkuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKICBjb25zdCBmZWVkUGFyc2VyID0geWF3Zi5mZWVkOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CgogIGNvbnN0IG1vcmUgPSB5YXdmLnJ1bGVzLm1vcmU7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgaTE4bi5vdGhlckZsb29kaW5nVGl0bGUgPSB7CiAgICBjbjogJ+WIt+WxjycsCiAgICB0dzogJ+a0l+eJiCcsCiAgICBlbjogJ0Zsb29kaW5nJywKICB9OwoKICBjb25zdCBmbG9vZGluZyA9IG1vcmUuZmxvb2RpbmcgPSB7fTsKICBmbG9vZGluZy5mbG9vZGluZyA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBtb3JlLm1vcmUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5vdGhlckZsb29kaW5nVGl0bGUsCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgZmxvb2RpbmdGZWVkSGlkZTogeyBjbjogJ+makOiXjycsIHR3OiAn6Zqx6JePJywgZW46ICdoaWRkZW4nIH0sCiAgICBmbG9vZGluZ0ZlZWRGb2xkOiB7IGNuOiAn5oqY5Y+gJywgdHc6ICfmipjnloonLCBlbjogJ2ZvbGRlZCcgfSwKICAgIGZsb29kaW5nQXV0aG9yOiB7CiAgICAgIGNuOiAn55u45ZCM5L2c6ICFfOi2hei/h3t7bnVtYmVyfX3mnaHlvq7ljZp85pe26LaF5Ye655qEe3thY3Rpb259fXx8e3tncm91cH195Zyo5YiG57uE6aG16Z2i5ZCM5qC355Sf5pWIJywKICAgICAgdHc6ICfnm7jlkIzkvZzogIV86LaF6YGOe3tudW1iZXJ9feaineW+ruWNmnzmmYLotoXlh7rnmoR7e2FjdGlvbn19fHx7e2dyb3VwfX3lnKjliIbntYTpoIHpnaLlkIzmqKPnlJ/mlYgnLAogICAgICBlbjogJ0ZlZWRzIGJ5IHNhbWUgYXV0aG9yIHdpbGwgfCBiZSB7e2FjdGlvbn19IHwgd2hlbiBtb3JlIHRoYW4ge3tudW1iZXJ9fSBzZWVufHx7e2dyb3VwfX0gQWxzbyBhcHBseSB0byBncm91cGluZyBwYWdlcycsCiAgICB9LAogICAgZmxvb2RpbmdBdXRob3JSZWFzb246IHsKICAgICAgY246ICfliLflsY8nLAogICAgICB0dzogJ+a0l+eJiCcsCiAgICAgIGVuOiAnZmxvb2RpbmcnLAogICAgfSwKICAgIGZsb29kaW5nRm9yd2FyZDogewogICAgICBjbjogJ+ebuOWQjOW+ruWNmueahOi9rOWPkXzotoXov4d7e251bWJlcn195p2hfOaXtui2heWHuueahHt7YWN0aW9ufX0nLAogICAgICB0dzogJ+ebuOWQjOW+ruWNmueahOi9ieeZvHzotoXpgY57e251bWJlcn195qKdfOaZgui2heWHuueahHt7YWN0aW9ufX0nLAogICAgICBlbjogJ0ZlZWRzIGZvcndhcmRlZCBmb3JtIHNhbWUgb25lIHdpbGwgfCBiZSB7e2FjdGlvbn19IHwgd2hlbiBtb3JlIHRoYW4ge3tudW1iZXJ9fSBzZWVuJywKICAgIH0sCiAgICBmbG9vZGluZ0ZvcndhcmRSZWFzb246IHsKICAgICAgY246ICfpopHnuYHovazlj5EnLAogICAgICB0dzogJ+mgu+e5gei9ieeZvCcsCiAgICAgIGVuOiAnZm9yd2FyZGVkIGZyZXF1ZW50bHknLAogICAgfSwKICB9KTsKCiAgZmxvb2RpbmcuZmxvb2RpbmdBdXRob3IgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmbG9vZGluZ19hdXRob3InLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogZmxvb2RpbmcuZmxvb2RpbmcsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mbG9vZGluZ0F1dGhvciwKICAgIHJlZjogewogICAgICBudW1iZXI6IHsKICAgICAgICB0eXBlOiAncmFuZ2UnLAogICAgICAgIG1pbjogMSwKICAgICAgICBtYXg6IDIwLAogICAgICAgIGluaXRpYWw6IDUsCiAgICAgIH0sCiAgICAgIGFjdGlvbjogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIGluaXRpYWw6ICdoaWRlJywKICAgICAgICBzZWxlY3Q6IFsKICAgICAgICAgIHsgdmFsdWU6ICdoaWRlJywgdGV4dDogKCkgPT4gaTE4bi5mbG9vZGluZ0ZlZWRIaWRlIH0sCiAgICAgICAgICB7IHZhbHVlOiAnZm9sZCcsIHRleHQ6ICgpID0+IGkxOG4uZmxvb2RpbmdGZWVkRm9sZCB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIGdyb3VwOiB7IHR5cGU6ICdib29sZWFuJyB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICAvKiogQHR5cGUge1dlYWtNYXA8RWxlbWVudCwgc3RyaW5nPn0gKi8KICAgICAgY29uc3QgcGFyc2VkID0gbmV3IFdlYWtNYXAoKTsKICAgICAgb2JzZXJ2ZXIuZmVlZC5maWx0ZXIoZnVuY3Rpb24gZmxvb2RpbmdBdXRob3IoZmVlZCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgLy8g5aaC5p6c5piv5Zug5Li65L+u5pS56KeE5YiZ5a+86Ie055qE6YeN5paw6K6h566X77yM6YKj5LmI5oiR5Lus5LiN5YaN5YGa5LiA5qyh5aSE55CGCiAgICAgICAgaWYgKHBhcnNlZC5oYXMoZmVlZCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IG1lID0gaW5pdC5wYWdlLiRDT05GSUcudWlkOwogICAgICAgIGNvbnN0IFthdXRob3JdID0gZmVlZFBhcnNlci5hdXRob3IuaWQoZmVlZCk7CiAgICAgICAgY29uc3QgW2ZhdXRob3JdID0gZmVlZFBhcnNlci5mYXV0aG9yLmlkKGZlZWQpOwogICAgICAgIGNvbnN0IGF1dGhvcklkID0gZmF1dGhvciB8fCBhdXRob3I7CiAgICAgICAgLy8g6Ieq5bex55qE5b6u5Y2a5Y+R5aSa5bCR5Lmf5LiN6Kem5Y+R6L+Z5Liq6KeE5YiZCiAgICAgICAgaWYgKG1lID09PSBhdXRob3JJZCkgcmV0dXJuIG51bGw7CiAgICAgICAgLy8g5Liq5Lq65Li76aG15LiN5bel5L2cCiAgICAgICAgaWYgKGluaXQucGFnZS50eXBlKCkgPT09ICdwcm9maWxlJykgcmV0dXJuIG51bGw7CiAgICAgICAgLy8g5YiG57uE6aG16Z2i5qC55o2u6K6+572u5Yaz5a6a5piv5ZCm55Sf5pWICiAgICAgICAgaWYgKGluaXQucGFnZS50eXBlKCkgPT09ICdncm91cCcpIHsKICAgICAgICAgIGlmIChydWxlLnJlZi5ncm91cC5nZXRDb25maWcoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIHBhcnNlZC5zZXQoZmVlZCwgYXV0aG9ySWQpOwogICAgICAgIGNvbnN0IGZlZWRzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9mZWVkX3R5cGUnKV07CiAgICAgICAgY29uc3QgY291bnQgPSBmZWVkcy5maWx0ZXIoZmVlZCA9PiBwYXJzZWQuZ2V0KGZlZWQpID09PSBhdXRob3JJZCkubGVuZ3RoOwogICAgICAgIGlmIChjb3VudCA8PSBydWxlLnJlZi5udW1iZXIuZ2V0Q29uZmlnKCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHJlc3VsdCA9IHJ1bGUucmVmLmFjdGlvbi5nZXRDb25maWcoKTsKICAgICAgICBjb25zdCByZWFzb24gPSBpMThuLmZsb29kaW5nQXV0aG9yUmVhc29uOwogICAgICAgIHJldHVybiB7IHJlc3VsdCwgcmVhc29uIH07CiAgICAgIH0sIHsgcHJpb3JpdHk6IC0xZTYgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5mZWVkLnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgZmxvb2RpbmcuZmxvb2RpbmdGb3J3YXJkID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmxvb2RpbmdfZm9yd2FyZCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBmbG9vZGluZy5mbG9vZGluZywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZsb29kaW5nRm9yd2FyZCwKICAgIHJlZjogewogICAgICBudW1iZXI6IHsKICAgICAgICB0eXBlOiAncmFuZ2UnLAogICAgICAgIG1pbjogMSwKICAgICAgICBtYXg6IDIwLAogICAgICAgIGluaXRpYWw6IDMsCiAgICAgIH0sCiAgICAgIGFjdGlvbjogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIGluaXRpYWw6ICdoaWRlJywKICAgICAgICBzZWxlY3Q6IFsKICAgICAgICAgIHsgdmFsdWU6ICdoaWRlJywgdGV4dDogKCkgPT4gaTE4bi5mbG9vZGluZ0ZlZWRIaWRlIH0sCiAgICAgICAgICB7IHZhbHVlOiAnZm9sZCcsIHRleHQ6ICgpID0+IGkxOG4uZmxvb2RpbmdGZWVkRm9sZCB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIC8qKiBAdHlwZSB7V2Vha01hcDxFbGVtZW50LCBzdHJpbmc+fSAqLwogICAgICBjb25zdCBwYXJzZWQgPSBuZXcgV2Vha01hcCgpOwogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiBmbG9vZGluZ0F1dGhvcihmZWVkKSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAocGFyc2VkLmhhcyhmZWVkKSkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3Qgb21pZCA9IGZlZWRQYXJzZXIub21pZChmZWVkKSB8fCBudWxsOwogICAgICAgIHBhcnNlZC5zZXQoZmVlZCwgb21pZCk7CiAgICAgICAgaWYgKCFvbWlkKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBmZWVkcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbbWlkXScpXTsKICAgICAgICBjb25zdCBjb3VudCA9IGZlZWRzLmZpbHRlcihmZWVkID0+IHBhcnNlZC5nZXQoZmVlZCkgPT09IG9taWQpLmxlbmd0aDsKICAgICAgICBpZiAoY291bnQgPD0gcnVsZS5yZWYubnVtYmVyLmdldENvbmZpZygpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCByZXN1bHQgPSBydWxlLnJlZi5hY3Rpb24uZ2V0Q29uZmlnKCk7CiAgICAgICAgY29uc3QgcmVhc29uID0gaTE4bi5mbG9vZGluZ0ZvcndhcmRSZWFzb247CiAgICAgICAgcmV0dXJuIHsgcmVzdWx0LCByZWFzb24gfTsKICAgICAgfSwgeyBwcmlvcml0eTogLTFlNiB9KTsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcigoKSA9PiB7IG9ic2VydmVyLmZlZWQucmVydW4oKTsgfSk7CiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9jb21tZW50L2NvbW1lbnQuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBpMThuLmNvbW1lbnRUYWJUaXRsZSA9IHsKICAgIGNuOiAn6K+E6K666L+H5rukJywKICAgIHR3OiAn6KmV6KuW56+p6YG4JywKICAgIGVuOiAnQ29tbWVudCcsCiAgfTsKCiAgY29uc3QgY29tbWVudCA9IHlhd2YucnVsZXMuY29tbWVudCA9IHt9OwogIGNvbW1lbnQuY29tbWVudCA9IHJ1bGUuVGFiKHsKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmNvbW1lbnRUYWJUaXRsZSwKICAgIHBhZ2VtZW51OiB0cnVlLAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9jb21tZW50L2xheW91dC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwoKICBjb25zdCBjb21tZW50ID0geWF3Zi5ydWxlcy5jb21tZW50OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBpMThuLmNvbW1lbnRMYXlvdXRHcm91cFRpdGxlID0gewogICAgY246ICfor4TorrrlsZXnpLonLAogICAgdHc6ICfoqZXoq5blsZXnpLonLAogICAgZW46ICdDb21tZW50cyBMYXlvdXQnLAogIH07CgogIGNvbnN0IGxheW91dCA9IGNvbW1lbnQubGF5b3V0ID0ge307CiAgbGF5b3V0LmxheW91dCA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBjb21tZW50LmNvbW1lbnQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jb21tZW50TGF5b3V0R3JvdXBUaXRsZSwKICB9KTsKCiAgaTE4bi5jb21tZW50QnlUaW1lID0gewogICAgY246ICfmn6XnnIvor4Torrrml7bpu5jorqTmjInml7bpl7TmjpLluo/vvIjogIzpnZ7ng63luqbvvIknLAogICAgdHc6ICfmn6XplrHoqZXoq5bmmYLpoJDoqK3mjInmmYLplpPmjpLluo/vvIjogIzpnZ7nhrHluqbvvIknLAogICAgZW46ICdTaG93IG5ld2VzdCBjb21tZW50cyBieSBkZWZhdWx0IChpbnN0ZWFkIG9mIGhvdCBjb21tZW50cyknLAogIH07CgogIGxheW91dC5jb21tZW50QnlUaW1lID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnY29tbWVudF9sYXlvdXRfYnlfdGltZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBsYXlvdXQubGF5b3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uY29tbWVudEJ5VGltZSwKICAgIGFpbml0KCkgewogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIHN3aXRjaFRvQWxsQ29tbWVudCgpIHsKICAgICAgICBjb25zdCBhbGxCdXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFsKICAgICAgICAgICdhW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfY29tbWVudFNlYXJjaCJdW2FjdGlvbi1kYXRhKj0iZmlsdGVyPWFsbCJdOm5vdChbeWF3Zi1hbGwtY29tbWVudF0pJywKICAgICAgICAgICdhW2FjdGlvbi10eXBlPSJzZWFyY2hfdHlwZSJdW2FjdGlvbi1kYXRhKj0iZmlsdGVyPWFsbCJdOm5vdChbeWF3Zi1hbGwtY29tbWVudF0pJywKICAgICAgICBdLmpvaW4oJywnKSkpOwogICAgICAgIGFsbEJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gewogICAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgneWF3Zi1hbGwtY29tbWVudCcsICd5YXdmLWFsbC1jb21tZW50Jyk7CiAgICAgICAgICBpZiAoIWJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2N1cnInKSkgYnV0dG9uLmNsaWNrKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBvYnNlcnZlci5jb21tZW50Lm9uQmVmb3JlKGZ1bmN0aW9uIHN3aXRjaFRvQWxsQ29tbWVudChjb21tZW50KSB7CiAgICAgICAgY29uc3QgZmVlZCA9IGNvbW1lbnQuY2xvc2VzdCgnW21pZF0nKTsKICAgICAgICBpZiAoIWZlZWQpIHJldHVybjsKICAgICAgICBjb25zdCBidXR0b24gPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoWwogICAgICAgICAgJ2FbYWN0aW9uLXR5cGU9ImZlZWRfbGlzdF9jb21tZW50U2VhcmNoIl1bYWN0aW9uLWRhdGEqPSJmaWx0ZXI9YWxsIl06bm90KFt5YXdmLWFsbC1jb21tZW50LWFnYWluXSknLAogICAgICAgICAgJ2FbYWN0aW9uLXR5cGU9InNlYXJjaF90eXBlIl1bYWN0aW9uLWRhdGEqPSJmaWx0ZXI9YWxsIl06bm90KFt5YXdmLWFsbC1jb21tZW50LWFnYWluXSknLAogICAgICAgIF0uam9pbignLCcpKTsKICAgICAgICBpZiAoIWJ1dHRvbikgcmV0dXJuOwogICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3lhd2YtYWxsLWNvbW1lbnQtYWdhaW4nLCAneWF3Zi1hbGwtY29tbWVudC1hZ2FpbicpOwogICAgICAgIGlmICghYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnY3VycicpKSBidXR0b24uY2xpY2soKTsKICAgICAgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLmhpZGVTdWJDb21tZW50ID0gewogICAgY246ICfmipjlj6Dkuoznuqfor4TorronLAogICAgdHc6ICfmipjnlorkuozntJroqZXoq5YnLAogICAgZW46ICdIaWRlIHN1YiBjb21tZW50cyBieSBkZWZhdWx0JywKICB9OwoKICBsYXlvdXQuaGlkZVN1YkNvbW1lbnQgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdjb21tZW50X2xheW91dF9oaWRlX3N1YicsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBsYXlvdXQubGF5b3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uaGlkZVN1YkNvbW1lbnQsCiAgICBhaW5pdCgpIHsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBoaWRlU3ViQ29tbWVudCgpIHsKICAgICAgICBjb25zdCByb290Q29tbWVudExpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5saXN0X2xpW25vZGUtdHlwZT0icm9vdF9jb21tZW50Il06bm90KFt5YXdmLWZvbGRlZC1yb290LWNvbW1lbnRdKScpKTsKICAgICAgICByb290Q29tbWVudExpc3QuZm9yRWFjaChyb290Q29tbWVudCA9PiB7CiAgICAgICAgICByb290Q29tbWVudC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZm9sZGVkLXJvb3QtY29tbWVudCcsICd5YXdmLWZvbGRlZC1yb290LWNvbW1lbnQnKTsKCiAgICAgICAgICBjb25zdCBmZWVkID0gcm9vdENvbW1lbnQuY2xvc2VzdCgnW21pZF0nKTsKICAgICAgICAgIGNvbnN0IHJlcGx5ID0gcm9vdENvbW1lbnQucXVlcnlTZWxlY3RvcignYVthY3Rpb24tdHlwZT0icmVwbHkiXScpOwogICAgICAgICAgY29uc3QgY2hpbGRDb21tZW50TGlzdCA9IEFycmF5LmZyb20ocm9vdENvbW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxpc3RfdWxbbm9kZS10eXBlPSJjaGlsZF9jb21tZW50Il0nKSk7CgogICAgICAgICAgY29uc3QgY29tbWVudElkID0gcm9vdENvbW1lbnQuZ2V0QXR0cmlidXRlKCdjb21tZW50X2lkJyk7CiAgICAgICAgICBjb25zdCBtaWQgPSBmZWVkLmdldEF0dHJpYnV0ZSgnbWlkJyk7CiAgICAgICAgICBsZXQgY2hpbGRDb3VudCA9IDA7CgogICAgICAgICAgaWYgKCFjaGlsZENvdW50KSBkbyB7CiAgICAgICAgICAgIGNvbnN0IG1vcmVDaGlsZExpbmtzID0gcm9vdENvbW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW25vZGUtdHlwZT0ibW9yZV9jaGlsZF9jb21tZW50Il0gYScpOwogICAgICAgICAgICBjb25zdCBtb3JlQ2hpbGQgPSBtb3JlQ2hpbGRMaW5rc1ttb3JlQ2hpbGRMaW5rcy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgaWYgKCFtb3JlQ2hpbGQpIGJyZWFrOwogICAgICAgICAgICBjb25zdCBtb3JlQ2hpbGROdW1iZXIgPSBtb3JlQ2hpbGQudGV4dENvbnRlbnQubWF0Y2goL1xkKy8pOwogICAgICAgICAgICBpZiAoIW1vcmVDaGlsZE51bWJlciB8fCAhbW9yZUNoaWxkTnVtYmVyWzBdKSBicmVhazsKICAgICAgICAgICAgY2hpbGRDb3VudCA9IHBhcnNlSW50KG1vcmVDaGlsZE51bWJlclswXSwgMTApIHx8IDA7CiAgICAgICAgICB9IHdoaWxlIChmYWxzZSk7CgogICAgICAgICAgaWYgKCFjaGlsZENvdW50KSBkbyB7CiAgICAgICAgICAgIGNvbnN0IGNoaWxkQ29tbWVudEl0ZW1zID0gcm9vdENvbW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxpc3RfdWwgLmxpc3RfbGlbY29tbWVudF9pZF0nKTsKICAgICAgICAgICAgY2hpbGRDb3VudCA9IGNoaWxkQ29tbWVudEl0ZW1zLmxlbmd0aCB8fCAwOwogICAgICAgICAgfSB3aGlsZSAoZmFsc2UpOwoKICAgICAgICAgIGlmICghY2hpbGRDb3VudCkgcmV0dXJuOwoKICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8YSBjbGFzcz0iU190eHQxIiBhY3Rpb24tdHlwZT0iY2xpY2tfbW9yZV9jaGlsZF9jb21tZW50X2JpZyIgPjwvYT4nOwogICAgICAgICAgY29uc3QgdW5mb2xkID0gY29udGFpbmVyLmZpcnN0Q2hpbGQ7CiAgICAgICAgICB1bmZvbGQuc2V0QXR0cmlidXRlKCdhY3Rpb24tZGF0YScsIGBtb3JlX2NvbW1lbnQ9YmlnJnJvb3RfY29tbWVudF9pZD0ke2NvbW1lbnRJZH0maXNfY2hpbGRfY29tbWVudD10dXJlJmlkPSR7bWlkfWApOwogICAgICAgICAgdW5mb2xkLnRleHRDb250ZW50ID0gYCgke2NoaWxkQ291bnR9KWA7CiAgICAgICAgICByZXBseS5hZnRlcih1bmZvbGQpOwoKICAgICAgICAgIGNoaWxkQ29tbWVudExpc3QuZm9yRWFjaChjaGlsZENvbW1lbnQgPT4gewogICAgICAgICAgICBjaGlsZENvbW1lbnQucGFyZW50Tm9kZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgfSk7CiAgICAgICAgICB1bmZvbGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgICAgIGNoaWxkQ29tbWVudExpc3QuZm9yRWFjaChjaGlsZENvbW1lbnQgPT4gewogICAgICAgICAgICAgIGNoaWxkQ29tbWVudC5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2NvbW1lbnQvY29udGVudC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGNvbW1lbnRQYXJzZXIgPSB5YXdmLmNvbW1lbnQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY29udGVudFRleHRDb21tZW50R3JvdXBUaXRsZTogewogICAgICBjbjogJ+aMieWGheWuueWFs+mUruivjei/h+a7pCcsCiAgICAgIHR3OiAn5oyJ5YWn5a656Zec6Y215a2X56+p6YG4JywKICAgICAgZW46ICdGaWx0ZXIgYnkgQ29udGVudCBLZXl3b3JkcycsCiAgICB9LAogICAgdGV4dENvbnRlbnRDb21tZW50U2hvdzogewogICAgICBjbjogJ+aAu+aYr+aYvuekuuWMheWQq+S7peS4i+WGheWuueeahOivhOiuunx85YWz6ZSu6K+Ne3tpdGVtc319JywKICAgICAgdHc6ICfmgLvmmK/mmL7npLrljIXlkKvku6XkuIvlhaflrrnnmoToqZXoq5Z8fOmXnOmNteWtl3t7aXRlbXN9fScsCiAgICAgIGVuOiAnQWx3YXlzIHNob3cgZmVlZHMgd2l0aCB0aGVzZSBjb250ZW50fHxLZXl3b3JkIHt7aXRlbXN9fScsCiAgICB9LAogICAgdGV4dENvbnRlbnRDb21tZW50SGlkZTogewogICAgICBjbjogJ+makOiXj+WMheWQq+S7peS4i+WGheWuueeahOivhOiuunx85YWz6ZSu6K+Ne3tpdGVtc319JywKICAgICAgdHc6ICfpmrHol4/ljIXlkKvku6XkuIvlhaflrrnnmoToqZXoq5Z8fOmXnOmNteWtl3t7aXRlbXN9fScsCiAgICAgIGVuOiAnSGlkZSBmZWVkcyB3aXRoIHRoZXNlIGNvbnRlbnR8fEtleXdvcmQge3tpdGVtc319JywKICAgIH0sCiAgfSk7CgogIGNsYXNzIFRleHRDb21tZW50UnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBjb25zdHJ1Y3RvcihpdGVtKSB7CiAgICAgIHN1cGVyKGl0ZW0pOwogICAgfQogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmNvbW1lbnQuZmlsdGVyKGZ1bmN0aW9uIHRleHRDb21tZW50RmlsdGVyKC8qKiBAdHlwZSB7RWxlbWVudH0gKi9jb21tZW50KSB7CiAgICAgICAgY29uc3QgdGV4dCA9IGNvbW1lbnRQYXJzZXIudGV4dChjb21tZW50KTsKICAgICAgICBjb25zdCBrZXl3b3JkcyA9IHJ1bGUucmVmLml0ZW1zLmdldENvbmZpZygpOwogICAgICAgIGNvbnN0IGNvbnRhaW4gPSBrZXl3b3Jkcy5maW5kKGtleXdvcmQgPT4gdGV4dC5pbmNsdWRlcyhrZXl3b3JkKSk7CiAgICAgICAgaWYgKCFjb250YWluKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCByZWFzb25UZXh0ID0gY29udGFpbi5sZW5ndGggPiA4ID8gY29udGFpbi5zbGljZSgwLCA2KSArICfigKYnIDogY29udGFpbjsKICAgICAgICBjb25zdCByZWFzb24gPSBpMThuLnRleHRDb250ZW50UmVhc29uLnJlcGxhY2UoJ3sxfScsICgpID0+IHJlYXNvblRleHQpOwogICAgICAgIHJldHVybiB7IHJlc3VsdDogcnVsZS5mZWVkQWN0aW9uLCByZWFzb24gfTsKICAgICAgfSwgeyBwcmlvcml0eTogdGhpcy5wcmlvcml0eSB9KTsKICAgICAgdGhpcy5yZWYuaXRlbXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5jb21tZW50LnJlcnVuKCk7IH0pOwogICAgfQogIH0KCiAgcnVsZS5ncm91cHMoewogICAgYmFzZUNsYXNzOiBUZXh0Q29tbWVudFJ1bGUsCiAgICB0YWI6ICdjb21tZW50JywKICAgIGtleTogJ3RleHQnLAogICAgdmVyc2lvbjogMSwKICAgIHR5cGU6ICdzdHJpbmdzJywKICAgIHRpdGxlOiAoKSA9PiBpMThuLmNvbnRlbnRUZXh0Q29tbWVudEdyb3VwVGl0bGUsCiAgICBkZXRhaWxzOiB7CiAgICAgIGhpZGU6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi50ZXh0Q29udGVudENvbW1lbnRIaWRlLAogICAgICB9LAogICAgICBzaG93OiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4udGV4dENvbnRlbnRDb21tZW50U2hvdywKICAgICAgfSwKICAgIH0sCiAgICBmYXN0OiB7CiAgICAgIHR5cGVzOiBbWydjb21tZW50J10sIFsndGV4dCddXSwKICAgICAgcmFkaW9Hcm91cDogJ2NvbW1lbnQnLAogICAgICByZW5kZXI6IGNvbW1lbnRQYXJzZXIuZmFzdC5yZW5kZXIudGV4dCwKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY29udGVudFJlZ2V4Q29tbWVudEdyb3VwVGl0bGU6IHsKICAgICAgY246ICfmjInlhoXlrrnmraPliJnlvI/ov4fmu6QnLAogICAgICBoazogJ+aMieWFp+Wuueato+WJh+W8j+evqemBuCcsCiAgICAgIHR3OiAn5oyJ5YWn5a655q2j6KaP5byP56+p6YG4JywKICAgICAgZW46ICdGaWx0ZXIgYnkgQ29udGVudCBSZWdleCcsCiAgICB9LAogICAgcmVnZXhDb250ZW50Q29tbWVudFNob3c6IHsKICAgICAgY246ICfmgLvmmK/mmL7npLrljLnphY3ku6XkuIvmraPliJnooajovr7lvI/nmoTor4Torrp8fOWFs+mUruivjXt7aXRlbXN9fScsCiAgICAgIGhrOiAn5oC75piv5pi+56S65Yy56YWN5Lul5LiL5q2j5YmH6KGo6YGU5byP55qE6KmV6KuWfHzpl5zpjbXlrZd7e2l0ZW1zfX0nLAogICAgICB0dzogJ+aAu+aYr+aYvuekuuWMuemFjeS7peS4i+ato+imj+ihqOekuuW8j+eahOipleirlnx86Zec6Y215a2Xe3tpdGVtc319JywKICAgICAgZW46ICdBbHdheXMgc2hvdyBmZWVkcyBtYXRjaCB0aGVzZSByZWdleGVufHxSZWdleGVuIHt7aXRlbXN9fScsCiAgICB9LAogICAgcmVnZXhDb250ZW50Q29tbWVudEhpZGU6IHsKICAgICAgY246ICfpmpDol4/ljLnphY3ku6XkuIvmraPliJnooajovr7lvI/nmoTor4Torrp8fOWFs+mUruivjXt7aXRlbXN9fScsCiAgICAgIGhrOiAn6Zqx6JeP5Yy56YWN5Lul5LiL5q2j5YmH6KGo6YGU5byP55qE6KmV6KuWfHzpl5zpjbXlrZd7e2l0ZW1zfX0nLAogICAgICB0dzogJ+maseiXj+WMuemFjeS7peS4i+ato+imj+ihqOekuuW8j+eahOipleirlnx86Zec6Y215a2Xe3tpdGVtc319JywKICAgICAgZW46ICdIaWRlIGZlZWRzIG1hdGNoIHRoZXNlIHJlZ2V4ZW58fFJlZ2V4ZW4ge3tpdGVtc319JywKICAgIH0sCiAgfSk7CgogIGNsYXNzIFJlZ2V4Q29tbWVudFJ1bGUgZXh0ZW5kcyBydWxlLmNsYXNzLlJ1bGUgewogICAgY29uc3RydWN0b3IoaXRlbSkgewogICAgICBzdXBlcihpdGVtKTsKICAgIH0KICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5jb21tZW50LmZpbHRlcihmdW5jdGlvbiByZWdleENvbW1lbnRGaWx0ZXIoLyoqIEB0eXBlIHtFbGVtZW50fSAqL2NvbW1lbnQpIHsKICAgICAgICBjb25zdCB0ZXh0ID0gY29tbWVudFBhcnNlci50ZXh0KGNvbW1lbnQpOwogICAgICAgIGNvbnN0IHJlZ2V4ZW4gPSBydWxlLnJlZi5pdGVtcy5nZXRDb25maWdDb21waWxlZCgpOwogICAgICAgIGNvbnN0IG1hdGNoUmVnID0gcmVnZXhlbi5maW5kKHJlZ2V4ID0+IHJlZ2V4LnRlc3QodGV4dCkpOwogICAgICAgIGlmICghbWF0Y2hSZWcpIHJldHVybiBudWxsOwogICAgICAgIHJldHVybiB7IHJlc3VsdDogcnVsZS5mZWVkQWN0aW9uIH07CiAgICAgIH0sIHsgcHJpb3JpdHk6IHRoaXMucHJpb3JpdHkgfSk7CiAgICAgIHRoaXMucmVmLml0ZW1zLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuY29tbWVudC5yZXJ1bigpOyB9KTsKICAgIH0KICB9CgogIHJ1bGUuZ3JvdXBzKHsKICAgIGJhc2VDbGFzczogUmVnZXhDb21tZW50UnVsZSwKICAgIHRhYjogJ2NvbW1lbnQnLAogICAga2V5OiAncmVnZXgnLAogICAgdmVyc2lvbjogMSwKICAgIHR5cGU6ICdyZWdleGVuJywKICAgIHRpdGxlOiAoKSA9PiBpMThuLmNvbnRlbnRSZWdleENvbW1lbnRHcm91cFRpdGxlLAogICAgZGV0YWlsczogewogICAgICBoaWRlOiB7CiAgICAgICAgdGl0bGU6ICgpID0+IGkxOG4ucmVnZXhDb250ZW50Q29tbWVudEhpZGUsCiAgICAgIH0sCiAgICAgIHNob3c6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi5yZWdleENvbnRlbnRDb21tZW50U2hvdywKICAgICAgfSwKICAgIH0sCiAgICBmYXN0OiB7CiAgICAgIHR5cGVzOiBbWydtdWx0aXRleHRjb21tZW50J10sIFsndGV4dCcsICdtdWx0aXRleHQnLCAnY29tbWVudCddXSwKICAgICAgcmFkaW9Hcm91cDogJ2NvbW1lbnQnLAogICAgICByZW5kZXI6IGNvbW1lbnRQYXJzZXIuZmFzdC5yZW5kZXIucmVnZXgsCiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZpbHRlci9jb21tZW50L3VzZXIuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKICBjb25zdCBjb21tZW50UGFyc2VyID0geWF3Zi5jb21tZW50OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGFjY291bnRDb21tZW50R3JvdXBUaXRsZTogewogICAgICBjbjogJ+aMieeUqOaIt+i/h+a7pCcsCiAgICAgIHR3OiAn5oyJ55So5oi256+p6YG4JywKICAgICAgZW46ICdGaWx0ZXIgYnkgVXNlcnMnLAogICAgfSwKICAgIGFjY291bnRDb21tZW50U2hvdzogewogICAgICBjbjogJ+aAu+aYr+aYvuekuuWMheWQq+S7peS4i+eUqOaIt+eahOivhOiuunx855So5oi3e3tpdGVtc319JywKICAgICAgdHc6ICfmgLvmmK/mmL7npLrljIXlkKvku6XkuIvnlKjmiLbnmoToqZXoq5Z8fOeUqOaItnt7aXRlbXN9fScsCiAgICAgIGVuOiAnQWx3YXlzIHNob3cgZmVlZHMgd2l0aCB0aGVzZSB1c2Vyc3x8VXNlciB7e2l0ZW1zfX0nLAogICAgfSwKICAgIGFjY291bnRDb21tZW50SGlkZTogewogICAgICBjbjogJ+makOiXj+WMheWQq+S7peS4i+eUqOaIt+eahOivhOiuunx855So5oi3e3tpdGVtc319JywKICAgICAgdHc6ICfpmrHol4/ljIXlkKvku6XkuIvnlKjmiLbnmoToqZXoq5Z8fOeUqOaItnt7aXRlbXN9fScsCiAgICAgIGVuOiAnSGlkZSBmZWVkcyB3aXRoIHRoZXNlIHVzZXJzfHxVc2VyIHt7aXRlbXN9fScsCiAgICB9LAogIH0pOwoKCiAgY2xhc3MgQ29tbWVudFVzZXJGZWVkUnVsZSBleHRlbmRzIHJ1bGUuY2xhc3MuUnVsZSB7CiAgICBjb25zdHJ1Y3RvcihpdGVtKSB7CiAgICAgIHN1cGVyKGl0ZW0pOwogICAgfQogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmNvbW1lbnQuZmlsdGVyKGZ1bmN0aW9uIGNvbW1lbnRGaWx0ZXJGZWVkRmlsdGVyKC8qKiBAdHlwZSB7RWxlbWVudH0gKi9mZWVkKSB7CiAgICAgICAgY29uc3QgdXNlcnMgPSBuZXcgU2V0KGNvbW1lbnRQYXJzZXIudXNlci5uYW1lKGZlZWQpKTsKICAgICAgICBjb25zdCBhY2NvdW50cyA9IHJ1bGUucmVmLml0ZW1zLmdldENvbmZpZygpOwogICAgICAgIGNvbnN0IGNvbnRhaW4gPSBhY2NvdW50cy5maW5kKGFjY291bnQgPT4gdXNlcnMuaGFzKGFjY291bnQpKTsKICAgICAgICBpZiAoIWNvbnRhaW4pIHJldHVybiBudWxsOwogICAgICAgIHJldHVybiB7IHJlc3VsdDogcnVsZS5mZWVkQWN0aW9uIH07CiAgICAgIH0sIHsgcHJpb3JpdHk6IHRoaXMucHJpb3JpdHkgfSk7CiAgICAgIHRoaXMucmVmLml0ZW1zLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuY29tbWVudC5yZXJ1bigpOyB9KTsKICAgIH0KICB9CgogIHJ1bGUuZ3JvdXBzKHsKICAgIGJhc2VDbGFzczogQ29tbWVudFVzZXJGZWVkUnVsZSwKICAgIHRhYjogJ2NvbW1lbnQnLAogICAga2V5OiAnbmFtZScsCiAgICB0eXBlOiAndXNlcm5hbWVzJywKICAgIHZlcnNpb246IDEsCiAgICB0aXRsZTogKCkgPT4gaTE4bi5hY2NvdW50Q29tbWVudEdyb3VwVGl0bGUsCiAgICBkZXRhaWxzOiB7CiAgICAgIGhpZGU6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi5hY2NvdW50Q29tbWVudEhpZGUsCiAgICAgIH0sCiAgICAgIHNob3c6IHsKICAgICAgICB0aXRsZTogKCkgPT4gaTE4bi5hY2NvdW50Q29tbWVudFNob3csCiAgICAgIH0sCiAgICB9LAogICAgZmFzdDogewogICAgICB0eXBlczogW1snY29tbWVudHVzZXInLCAnYWNjb3VudCddLCBbJ29yaWdpbmFsJywgJ2F1dGhvcicsICdtZW50aW9uJ11dLAogICAgICByYWRpb0dyb3VwOiAnY29tbWVudHVzZXInLAogICAgICByZW5kZXI6IGNvbW1lbnRQYXJzZXIuZmFzdC5yZW5kZXIudXNlciwKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmlsdGVyL2NvbW1lbnQvbW9yZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGNvbW1lbnRQYXJzZXIgPSB5YXdmLmNvbW1lbnQ7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKCiAgY29uc3QgY29tbWVudCA9IHlhd2YucnVsZXMuY29tbWVudDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgaTE4bi5jb21tZW50TW9yZUdyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+abtOWkmicsCiAgICB0dzogJ+WFtuS7licsCiAgICBlbjogJ01vcmUnLAogIH07CgogIGNvbnN0IG1vcmUgPSBjb21tZW50Lm1vcmUgPSB7fTsKICBtb3JlLm1vcmUgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogY29tbWVudC5jb21tZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ubW9yZUNvbW1lcmNpYWxHcm91cFRpdGxlLAogIH0pOwoKCiAgaTE4bi5zaG93TXlDb21tZW50ID0gewogICAgY246ICfmgLvmmK/mmL7npLrmiJHoh6rlt7Hlj5HooajnmoTor4TorronLAogICAgdHc6ICfnuL3mmK/poa/npLrmiJHoh6rlt7HnmbzooajnmoToqZXoq5YnLAogICAgZW46ICdBbHdheXMgc2hvdyBteSBjb21tZW50cycsCiAgfTsKCiAgbW9yZS5zaG93TXlDb21tZW50ID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmlsdGVyX2NvbW1lbnRfc2hvd19teScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBtb3JlLm1vcmUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zaG93TXlDb21tZW50LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmNvbW1lbnQuZmlsdGVyKGZ1bmN0aW9uIHNob3dNeUNvbW1lbnQoY29tbWVudCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgYXV0aG9yID0gY29tbWVudFBhcnNlci51c2VyLm5hbWUoY29tbWVudClbMF07CiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSBpbml0LnBhZ2UuJENPTkZJRy5uaWNrOwogICAgICAgIGlmIChhdXRob3IgPT09IHVzZXJuYW1lKSByZXR1cm4gJ3Nob21tZSc7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuY29tbWVudC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4uY29tbWVudEZhY2VDb3VudCA9IHsKICAgIGNuOiAn6ZqQ6JeP6KGo5oOFfOaVsOmHj+i2hei/h3t7Y291bnR9feS4queahOivhOiuuicsCiAgICB0dzogJ+maseiXj+ihqOaDhXzmlbjph4/otoXpgY57e2NvdW50fX3lgIvnmoToqZXoq5YnLAogICAgZW46ICdIaWRlIGNvbW1lbnRzIHwgd2l0aCBtb3JlIHRoYW4ge3tjb3VudH19IGltYWdlIGVtb2ppJywKICB9OwoKICBtb3JlLmNvbW1lbnRGYWNlQ291bnQgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfY29tbWVudF9mYWNlX2NvdW50JywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IG1vcmUubW9yZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmNvbW1lbnRGYWNlQ291bnQsCiAgICByZWY6IHsKICAgICAgY291bnQ6IHsKICAgICAgICB0eXBlOiAncmFuZ2UnLAogICAgICAgIGluaXRpYWw6IDgsCiAgICAgICAgbWluOiAxLAogICAgICAgIG1heDogMjAsCiAgICAgIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmNvbW1lbnQuZmlsdGVyKGZ1bmN0aW9uIGNvbW1lbnRGYWNlQ291bnQoY29tbWVudCkgewogICAgICAgIGlmICghcnVsZS5pc0VuYWJsZWQoKSkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgZmFjZSA9IGNvbW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW1nW3R5cGU9ImZhY2UiXVthbHRdJyk7CiAgICAgICAgaWYgKGZhY2UgPiBydWxlLnJlZi5jb3VudC5nZXRDb25maWcoKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5jb21tZW50LnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5jb21tZW50RmFjZVR5cGVzID0gewogICAgY246ICfpmpDol4/ooajmg4V856eN57G76LaF6L+He3tjb3VudH1956eN55qE6K+E6K66JywKICAgIHR3OiAn6Zqx6JeP6KGo5oOFfOeorumhnui2hemBjnt7Y291bnR9feeorueahOipleirlicsCiAgICBlbjogJ0hpZGUgY29tbWVudHMgfCB3aXRoIG1vcmUgdGhhbiB7e2NvdW50fX0ga2luZHMgb2YgaW1hZ2UgZW1vamknLAogIH07CgogIG1vcmUuY29tbWVudEZhY2VUeXBlcyA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl9jb21tZW50X2ZhY2VfdHlwZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBtb3JlLm1vcmUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jb21tZW50RmFjZVR5cGVzLAogICAgcmVmOiB7CiAgICAgIGNvdW50OiB7CiAgICAgICAgdHlwZTogJ3JhbmdlJywKICAgICAgICBpbml0aWFsOiA0LAogICAgICAgIG1pbjogMSwKICAgICAgICBtYXg6IDIwLAogICAgICB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBvYnNlcnZlci5jb21tZW50LmZpbHRlcihmdW5jdGlvbiBjb21tZW50RmFjZVR5cGVzKGNvbW1lbnQpIHsKICAgICAgICBpZiAoIXJ1bGUuaXNFbmFibGVkKCkpIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IGZhY2UgPSBjb21tZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZ1t0eXBlPSJmYWNlIl1bYWx0XScpOwogICAgICAgIGNvbnN0IHR5cGVzID0gbmV3IFNldChBcnJheS5mcm9tKGZhY2UpLm1hcChmYWNlID0+IGZhY2UuYWx0KSkuc2l6ZTsKICAgICAgICBpZiAodHlwZXMgPiBydWxlLnJlZi5jb3VudC5nZXRDb25maWcoKSkgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5jb21tZW50LnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCiAgaTE4bi5jb21tZW50V2l0aG91dENvbnRlbnQgPSB7CiAgICBjbjogJ+makOiXj+ayoeacieWGheWuueeahOivhOiuuu+8iOWPquacieihqOaDheOAgeaPkOWIsOetie+8iScsCiAgICB0dzogJ+maseiXj+aykuacieWFp+WuueeahOipleirlu+8iOWPquacieihqOaDheOAgeaPkOWIsOetie+8iScsCiAgICBlbjogJ0NvbW1lbnRzIHdpdGhvdXQgYW55IHRleHQgY29udGVudCAob25seSBtZW50aW9ucyBhbmQgZW1vamkpJywKICB9OwoKICBtb3JlLmNvbW1lbnRXaXRob3V0Q29udGVudCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZpbHRlcl9jb21tZW50X3dvX2NvbnRlbnQnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogbW9yZS5tb3JlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uY29tbWVudFdpdGhvdXRDb250ZW50LAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmNvbW1lbnQuZmlsdGVyKGZ1bmN0aW9uIGNvbW1lbnRXaXRob3V0Q29udGVudChjb21tZW50KSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoY29tbWVudC5xdWVyeVNlbGVjdG9yKCcubWVkaWFfYm94IC5XQl9waWMnKSkgcmV0dXJuIG51bGw7IC8vIOacieWbvueJh+eahOS4jeeul+ayoeWGheWuuQogICAgICAgIGNvbnN0IHRleHRzID0gQXJyYXkuZnJvbShjb21tZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl90ZXh0JykuY2hpbGROb2RlcykKICAgICAgICAgIC5maWx0ZXIobiA9PiAhKChuIGluc3RhbmNlb2YgRWxlbWVudCkgJiYgbi5tYXRjaGVzKCdhW3VzZXJjYXJkXScpKSkgLy8g5o+Q5Yiw5Lq65LiN566X5YaF5a65CiAgICAgICAgICAubWFwKG4gPT4gbi50ZXh0Q29udGVudCkuam9pbignJykKICAgICAgICAgIC5yZXBsYWNlKC/lm55b5aSN5b6p6KaGXXxSZXBseXzlvq7ljZp8W+i9rOi9iV1b5Y+R55m8XXxbOi9cc++8mi5cdTIwMGJdL2lnLCAnJyk7IC8vIOepuuagvOOAgeKAnOWbnuWkjeKAneWSjOWGkuWPt+S4jeeul+WGheWuuQogICAgICAgIGlmICghdGV4dHMpIHJldHVybiAnaGlkZSc7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pOwogICAgICB0aGlzLmFkZENvbmZpZ0xpc3RlbmVyKCgpID0+IHsgb2JzZXJ2ZXIuY29tbWVudC5yZXJ1bigpOyB9KTsKICAgIH0sCiAgfSk7CgogIGkxOG4uY29tbWVudFdpdGhGb3J3YXJkID0gewogICAgY246ICfpmpDol4/lkKvmnInovazlj5Hmtojmga/nmoTlvq7ljZonLAogICAgdHc6ICfpmrHol4/lkKvmnInovYnnmbzmtojmga/nmoTlvq7ljZonLAogICAgZW46ICdDb21tZW50cyBjb250YWluIGZvcndhcmRlZCBtZXNzYWdlcycsCiAgfTsKCiAgbW9yZS5jb21tZW50V2l0aEZvcndhcmQgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmaWx0ZXJfY29tbWVudF93aXRoX2ZvcndhcmQnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogbW9yZS5tb3JlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uY29tbWVudFdpdGhGb3J3YXJkLAogICAgaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmNvbW1lbnQuZmlsdGVyKGZ1bmN0aW9uIGNvbW1lbnRXaXRoRm9yd2FyZChjb21tZW50KSB7CiAgICAgICAgaWYgKCFydWxlLmlzRW5hYmxlZCgpKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCB1c2VycyA9IGNvbW1lbnRQYXJzZXIudXNlci5kb20oY29tbWVudCk7CiAgICAgICAgY29uc3QgZm9yd2FyZHMgPSB1c2Vycy5maW5kKHUgPT4gdS5wcmV2aW91c1NpYmxpbmcudGV4dENvbnRlbnQubWF0Y2goL1wvXC8kLykpOwogICAgICAgIGlmIChmb3J3YXJkcykgcmV0dXJuICdoaWRlJzsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoKCkgPT4geyBvYnNlcnZlci5jb21tZW50LnJlcnVuKCk7IH0pOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9jbGVhbi9jbGVhbi5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CiAgY29uc3QgcHJpb3JpdHkgPSB1dGlsLnByaW9yaXR5OwoKICBpMThuLmNsZWFuVGFiVGl0bGUgPSB7CiAgICBjbjogJ+eVjOmdoua4heeQhicsCiAgICB0dzogJ+S7i+mdoua4heeQhicsCiAgICBlbjogJ0NsZWFuIFVwJywKICB9OwogIGkxOG4uY2xlYW5UYWJTZWxlY3RBbGwgPSB7CiAgICBjbjogJ+WFqOmAieacrOe7hCcsCiAgICB0dzogJ+WFqOmBuOacrOe1hCcsCiAgICBlbjogJ1NlbGVjdCBHcm91cCcsCiAgfTsKCiAgY29uc3QgY2xlYW4gPSB5YXdmLnJ1bGVzLmNsZWFuID0ge307CiAgY2xlYW4uY2xlYW4gPSBydWxlLlRhYih7CiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jbGVhblRhYlRpdGxlLAogICAgcGFnZW1lbnU6IHRydWUsCiAgfSk7CgogIGNvbnN0IHNlbGVjdEFsbEJ1dHRvbiA9IGlkID0+IHsKICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgIGJ1dHRvbi5jbGFzc05hbWUgPSAnV19idG5fYiB5YXdmLWNsZWFuLWdyb3VwLWFsbCc7CiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgY29udGVudC50ZXh0Q29udGVudCA9IGkxOG4uY2xlYW5UYWJTZWxlY3RBbGw7CiAgICBidXR0b24uYXBwZW5kQ2hpbGQoY29udGVudCk7CiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgIGlmICghZXZlbnQuaXNUcnVzdGVkKSByZXR1cm47CiAgICAgIGNvbnN0IGdyb3VwID0gY2xlYW5baWRdOwogICAgICBPYmplY3Qua2V5cyhncm91cCkuZm9yRWFjaChrZXkgPT4gewogICAgICAgIGNvbnN0IGl0ZW0gPSBncm91cFtrZXldOwogICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgcnVsZS5jbGFzcy5SdWxlKSB7CiAgICAgICAgICBpZiAoaXRlbS5zZXRDb25maWcpIGl0ZW0uc2V0Q29uZmlnKHRydWUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICAgIHJldHVybiBidXR0b247CiAgfTsKCiAgbGV0IGxhc3RDbGVhbkdyb3VwID0gbnVsbDsKICBjbGVhbi5DbGVhbkdyb3VwID0gZnVuY3Rpb24gKGlkLCB0ZW1wbGF0ZSkgewogICAgY29uc3QgZ3JvdXAgPSBydWxlLkdyb3VwKHsKICAgICAgaWQsCiAgICAgIHBhcmVudDogY2xlYW4uY2xlYW4sCiAgICAgIHRlbXBsYXRlLAogICAgICByZW5kZXIoLi4uYXJncykgewogICAgICAgIGNvbnN0IG5vZGUgPSBzdXBlci5yZW5kZXIoLi4uYXJncyk7CiAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCd5YXdmLWNsZWFuLWdyb3VwJyk7CiAgICAgICAgY29uc3QgYnV0dG9uID0gc2VsZWN0QWxsQnV0dG9uKGlkKTsKICAgICAgICBub2RlLmFwcGVuZENoaWxkKGJ1dHRvbik7CiAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0sCiAgICB9KTsKICAgIGNsZWFuW2lkXSA9IHsgW2lkXTogZ3JvdXAgfTsKICAgIGxhc3RDbGVhbkdyb3VwID0gaWQ7CiAgICByZXR1cm4gZ3JvdXA7CiAgfTsKCiAgY2xlYW4uQ2xlYW5SdWxlID0gZnVuY3Rpb24gKGlkLCB0ZW1wbGF0ZSwgdmVyc2lvbiwgYWN0aW9uLCAuLi5kZXRhaWxzKSB7CiAgICBjbGVhbltsYXN0Q2xlYW5Hcm91cF1baWRdID0gcnVsZS5SdWxlKE9iamVjdC5hc3NpZ24oewogICAgICBpZDogJ2NsZWFuXycgKyBsYXN0Q2xlYW5Hcm91cCArICdfJyArIGlkLAogICAgICB0ZW1wbGF0ZSwKICAgICAgcGFyZW50OiBjbGVhbltsYXN0Q2xlYW5Hcm91cF1bbGFzdENsZWFuR3JvdXBdLAogICAgICB2ZXJzaW9uLAogICAgfSwgdHlwZW9mIGFjdGlvbiA9PT0gJ3N0cmluZycgPyB7CiAgICAgIGFjc3M6IGFjdGlvbiwKICAgIH0gOiB0eXBlb2YgYWN0aW9uID09PSAnZnVuY3Rpb24nID8gewogICAgICBhaW5pdDogYWN0aW9uLAogICAgfSA6IHR5cGVvZiBhY3Rpb24gPT09ICdvYmplY3QnID8gYWN0aW9uIDoge30sIC4uLmRldGFpbHMpKTsKICAgIHJldHVybiBjbGVhbltsYXN0Q2xlYW5Hcm91cF1baWRdOwogIH07CgogIGkxOG4uY2xlYW5Db25maWdDb2x1bW5Db3VudCA9IHsKICAgIGNuOiAzLAogICAgZW46IDIsCiAgfTsKCiAgaW5pdC5vblJlYWR5KCgpID0+IHsKICAgIGNzcy5hcHBlbmQoYAoueWF3Zi1jbGVhbi1ncm91cCArIC55YXdmLWNvbmZpZy1ncm91cC1pdGVtcyB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KCR7aTE4bi5jbGVhbkNvbmZpZ0NvbHVtbkNvdW50fSwgMWZyKTsgZ3JpZC1nYXA6IDVweCAxMHB4OyBtYXJnaW46IDVweCAyMHB4OyB9Ci55YXdmLWNsZWFuLWdyb3VwICsgLnlhd2YtY29uZmlnLWdyb3VwLWl0ZW1zID4gLnlhd2YtY29uZmlnLXJ1bGUgeyBtYXJnaW46IDA7IH0KLnlhd2YtY2xlYW4tZ3JvdXAtYWxsIHsgZmxvYXQ6IHJpZ2h0OyBmb250LXdlaWdodDogbm9ybWFsOyBjdXJzb3I6IHBvaW50ZXI7IH0KLnlhd2Ytd2hhdHNuZXctZGlhbG9nIC55YXdmLWNsZWFuLWdyb3VwLWFsbCwgLnlhd2YtY29uZmlnLWxheWVyLXNlYXJjaCAueWF3Zi1jbGVhbi1ncm91cC1hbGwgeyBkaXNwbGF5OiBub25lOyB9CmApOwogIH0sIHsgcHJpb3JpdHk6IHByaW9yaXR5LkRFRkFVTFQgfSk7CgoKICBjbGVhbi50YWdFbGVtZW50cyA9IGZ1bmN0aW9uIChuYW1lLCBzZWxlY3RvciwgaWRlbnRpZmllcnMpIHsKICAgIGNvbnN0IHRhZ0VsZW1lbnRzID0gZnVuY3Rpb24gdGFnRWxlbWVudHMoKSB7CiAgICAgIGNvbnN0IGVsZW1lbnRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7CiAgICAgIGlmICghZWxlbWVudHMubGVuZ3RoKSByZXR1cm47CiAgICAgIGVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgneWF3Zi1pZCcsICcnKTsKICAgICAgICBjb25zdCBtYXRjaGVkID0gT2JqZWN0LmtleXMoaWRlbnRpZmllcnMpLmZpbmQoc2VsZWN0b3IgPT4gZWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSk7CiAgICAgICAgaWYgKG1hdGNoZWQpIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd5YXdmLWlkJywgaWRlbnRpZmllcnNbbWF0Y2hlZF0pOwogICAgICB9KTsKICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFnRWxlbWVudHMsICduYW1lJywgeyB2YWx1ZTogYHRhZ0VsZW1lbnRzJHtuYW1lfWAgfSk7CiAgICBvYnNlcnZlci5kb20uYWRkKHRhZ0VsZW1lbnRzKTsKICB9OwoKICBjb25zdCBncm91cE9uTG9hZCA9IFtdOwogIGNsZWFuLkNsZWFuUnVsZUdyb3VwID0gZnVuY3Rpb24gKHJ1bGVzLCBjYWxsYmFjaykgewogICAgZ3JvdXBPbkxvYWQucHVzaCh7IHJ1bGVzLCBjYWxsYmFjayB9KTsKICB9OwogIGluaXQub25Mb2FkKGZ1bmN0aW9uICgpIHsKICAgIGdyb3VwT25Mb2FkLnNwbGljZSgwKS5mb3JFYWNoKCh7IHJ1bGVzLCBjYWxsYmFjayB9KSA9PiB7CiAgICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIC4uLk9iamVjdC5rZXlzKHJ1bGVzKS5tYXAoa2V5ID0+ICh7IFtrZXldOiBydWxlc1trZXldLmlzRW5hYmxlZCgpIH0pKSk7CiAgICAgIGNhbGxiYWNrKGNvbmZpZyk7CiAgICB9KTsKICB9LCB7IHByaW9yaXR5OiBwcmlvcml0eS5BRlRFUiB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9jbGVhbi9pY29ucy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgY2xlYW4gPSB5YXdmLnJ1bGVzLmNsZWFuOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGNsZWFuSWNvbnNHcm91cFRpdGxlOiB7IGNuOiAn6ZqQ6JeP5qih5Z2XIC0g5qCH6K+GL+WbvuaghycsIHR3OiAn6Zqx6JeP5qih57WEIC0g5qiZ6KqML+WcluekuicsIGVuOiAnSGlkZSBNb2R1bGVzIC0gTG9nbyAvIEljb25zJyB9LAogICAgY2xlYW5JY29uc01lbWJlcjogeyBjbjogJ+W+ruWNmuS8muWRmCcsIHR3OiAn5b6u5Y2a5pyD5ZOhJywgZW46ICdXZWlibyBWSVAgLyBNZW1iZXInIH0sCiAgICBjbGVhbkljb25zTGV2ZWw6IHsgY246ICfnrYnnuqcnLCB0dzogJ+etiee0micsIGVuOiAnTGV2ZWwnIH0sCiAgICBjbGVhbkljb25zQXBwcm92ZTogeyBjbjogJ+S4quS6uuiupOivgScsIHR3OiAn5YCL5Lq66KqN6K2JJywgZW46ICdQZXJzb25hbCBBdXRoZW50aWNhdGlvbicgfSwKICAgIGNsZWFuSWNvbnNBcHByb3ZlQ286IHsgY246ICfmnLrmnoTorqTor4EnLCB0dzogJ+S8gealreiqjeitiScsIGVuOiAnV2VpYm8gVmVyaWZpY2F0aW9uJyB9LAogICAgY2xlYW5JY29uc0FwcHJvdmVEZWFkOiB7IGNuOiAn5aSx5pWI6K6k6K+BJywgdHc6ICflpLHmlYjoqo3orYknLCBlbjogJ0ZhaWxlZCB2ZXJpZmljYXRpb24nIH0sCiAgICBjbGVhbkljb25zQmlnRnVuOiB7IGNuOiAn6ZOB57KJJywgdHc6ICfpkLXnsoknLCBlbjogJ+mTgeeyiSAoYmlnIGZhbnMpJyB9LAogICAgY2xlYW5JY29uc0NsdWI6IHsgY246ICflvq7ljZrovr7kuronLCB0dzogJ+W+ruWNmumBlOS6uicsIGVuOiAnUGlvbmVlcicgfSwKICAgIGNsZWFuSWNvbnNWR2lybDogeyBjbjogJ+W+ruWNmuWls+mDjicsIGVuOiAnV2VpYm8gZ2lybCcgfSwKICAgIGNsZWFuSWNvbnNTdXBlcnZpc29yOiB7IGNuOiAn5b6u5Y2a55uR552j5ZGYJywgdHc6ICflvq7ljZrnm6PnnaPlk6EnLCBlbjogJ1dlaWJvIFN1cGVydmlzb3InIH0sCiAgICBjbGVhbkljb25zVGFvYmFvOiB7IGNuOiAn5reY5a6dL+WkqeeMq+WVhuaItycsIHR3OiAn5reY5a+2L+Wkqeiyk+WVhuaIticsIGVuOiAnVGFvYmFvIC8gVG1hbGwgTWVyY2hhbnQnIH0sCiAgICBjbGVhbkljb25zQ2hlbmc6IHsgY246ICfpmL/ph4zor5rkv6HpgJonLCB0dzogJ+mYv+mHjOiqoOS/oemAmicsIGVuOiAnQWxpYmFiYSDor5rkv6HpgJonIH0sCiAgICBjbGVhbkljb25zR29uZ3lpOiB7IGNuOiAn5YWs55uKJywgZW46ICdQdWJsaWMgSW50ZXJlc3QnIH0sCiAgICBjbGVhbkljb25zWm9uZ3lpa2E6IHsgY246ICfnu7zoibonLCBlbjogJ1ZhcmlldHknIH0sCiAgICBjbGVhbkljb25zWW91amk6IHsgY246ICfml4XooYwnLCBlbjogJ1RyYXZlbCcgfSwKICAgIGNsZWFuSWNvbnNPdGhlcnM6IHsgY246ICfmm7TlpJonLCB0dzogJ+WFtuS7licsIGVuOiAnTW9yZScgfSwKICB9KTsKCiAgY29uc3Qgc2hvd0ljb25zID0gY2xhc3NOYW1lcyA9PiAoewogICAgYWZ0ZXJSZW5kZXI6IGNvbnRhaW5lciA9PiB7CiAgICAgIGNvbnN0IGxhYmVsID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJyk7CiAgICAgIGNsYXNzTmFtZXMuZm9yRWFjaChjbGFzc05hbWUgPT4gewogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJXX2ljb24iIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jayFpbXBvcnRhbnQiPjwvaT4nOwogICAgICAgIGNvbnN0IGkgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignaScpOwogICAgICAgIGlmICh0eXBlb2YgY2xhc3NOYW1lID09PSAnc3RyaW5nJykgewogICAgICAgICAgaS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7CiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNsYXNzTmFtZSkpIHsKICAgICAgICAgIGkuY2xhc3NOYW1lID0gY2xhc3NOYW1lLmpvaW4oJyAnKTsKICAgICAgICB9CiAgICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBjb250YWluZXI7CiAgICB9LAogIH0pOwoKICBjbGVhbi5DbGVhbkdyb3VwKCdpY29ucycsICgpID0+IGkxOG4uY2xlYW5JY29uc0dyb3VwVGl0bGUpOwogIGNsZWFuLkNsZWFuUnVsZSgnbGV2ZWwnLCAoKSA9PiBpMThuLmNsZWFuSWNvbnNMZXZlbCwgMSwgJy5pY29uX2JlZFtub2RlLXR5cGU9ImxldmVsIl0sIC5XX2xldmVsX2ljbywgLldfaWNvbl9sZXZlbCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNvbnN0IG1lbWJlciA9IGNsZWFuLkNsZWFuUnVsZSgnbWVtYmVyJywgKCkgPT4gaTE4bi5jbGVhbkljb25zTWVtYmVyLCAxLCAnW2NsYXNzKj0iaWNvbl9tZW1iZXIiXSwgW2NsYXNzKj0iaWNvX21lbWJlciJdLCBbY2xhc3MqPSJpY29fdmlwIl0sIFtjbGFzcyo9Imljb25fdmlwIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLCBzaG93SWNvbnMoWydpY29uX21lbWJlcjEnXSksIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSk7CiAgY29uc3QgYXBwcm92ZSA9IGNsZWFuLkNsZWFuUnVsZSgnYXBwcm92ZScsICgpID0+IGkxOG4uY2xlYW5JY29uc0FwcHJvdmUsIDEsICcuYXBwcm92ZSwgLmljb25fYXBwcm92ZSwgLmljb25fcGZfYXBwcm92ZSwgLmljb25fYXBwcm92ZV9nb2xkLCAuaWNvbl9wZl9hcHByb3ZlX2dvbGQgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLCBzaG93SWNvbnMoWydpY29uX2FwcHJvdmUnLCAnaWNvbl9hcHByb3ZlX2dvbGQnXSksIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSk7CiAgY29uc3QgYXBwcm92ZUNvID0gY2xlYW4uQ2xlYW5SdWxlKCdhcHByb3ZlX2NvJywgKCkgPT4gaTE4bi5jbGVhbkljb25zQXBwcm92ZUNvLCAxLCAnLmFwcHJvdmVfY28sIC5pY29uX2FwcHJvdmVfY28sIC5pY29uX3BmX2FwcHJvdmVfY28sIFtjbGFzc149IldfaWNvbl9jbyJdLCBbY2xhc3NePSIuaWNvbl9hcHByb3ZlX2NvXyJdLCBbY2xhc3NePSIuaWNvbl9wZl9hcHByb3ZlX2NvXyJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jywgc2hvd0ljb25zKFsnaWNvbl9hcHByb3ZlX2NvJ10pLCB7IHdlaWJvVmVyc2lvbjogWzYsIDddIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnYXBwcm92ZV9kZWFkJywgKCkgPT4gaTE4bi5jbGVhbkljb25zQXBwcm92ZURlYWQsIDEsICcuaWNvbl9hcHByb3ZlX2RlYWQsIC5pY29uX3BmX2FwcHJvdmVfZGVhZCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsIHNob3dJY29ucyhbJ2ljb25fYXBwcm92ZV9kZWFkJ10pKTsKICBjb25zdCBiaWdGYW4gPSBjbGVhbi5DbGVhblJ1bGUoJ2JpZ2Z1bicsICgpID0+IGkxOG4uY2xlYW5JY29uc0JpZ0Z1biwgMjYsICcuV19pY29uX2JmIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jywgc2hvd0ljb25zKFtbJ1dfaWNvbl9iZicsICdpY29uX2JpZ2ZhbnMnXV0pLCB7IHdlaWJvVmVyc2lvbjogWzYsIDddIH0pOwogIGNvbnN0IGNsdWIgPSBjbGVhbi5DbGVhblJ1bGUoJ2NsdWInLCAoKSA9PiBpMThuLmNsZWFuSWNvbnNDbHViLCAxLCAnLmljb19jbHViLCAuaWNvbl9wZl9jbHViLCAuaWNvbl9jbHViIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jywgc2hvd0ljb25zKFsnaWNvbl9jbHViJ10pLCB7IHdlaWJvVmVyc2lvbjogWzYsIDddIH0pOwogIGNvbnN0IHZHaXJsID0gY2xlYW4uQ2xlYW5SdWxlKCd2X2dpcmwnLCAoKSA9PiBpMThuLmNsZWFuSWNvbnNWR2lybCwgMSwgJy5pY29fdmxhZHksIC5pY29uX3BmX3ZsYWR5LCAuaWNvbl92bGFkeSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsIHNob3dJY29ucyhbJ2ljb25fdmxhZHknXSksIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdzdXBlcnZpc29yJywgKCkgPT4gaTE4bi5jbGVhbkljb25zU3VwZXJ2aXNvciwgMSwgJy5pY29uX3N1cGVydmlzb3IgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLCBzaG93SWNvbnMoWydpY29uX3N1cGVydmlzb3InXSkpOwogIGNsZWFuLkNsZWFuUnVsZSgndGFvYmFvJywgKCkgPT4gaTE4bi5jbGVhbkljb25zVGFvYmFvLCAxLCAnLmljb190YW9iYW8sIC5pY29uX3RtYWxsLCAuaWNvbl90YW9iYW8sIC5pY29uX3RtYWxsIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jywgc2hvd0ljb25zKFsnaWNvbl90YW9iYW8nLCAnaWNvbl90bWFsbCddKSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdjaGVuZycsICgpID0+IGkxOG4uY2xlYW5JY29uc0NoZW5nLCAxLCAnLmljb25fY2hlbmcgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLCBzaG93SWNvbnMoWydpY29uX2NoZW5nJ10pKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2dvbmd5aScsICgpID0+IGkxOG4uY2xlYW5JY29uc0dvbmd5aSwgMSwgJy5pY29fZ29uZ3lpLCAuaWNvX2dvbmd5aTEsIC5pY29fZ29uZ3lpMiwgLmljb19nb25neWkzLCAuaWNvX2dvbmd5aTQsIC5pY29fZ29uZ3lpNSwgLmljb25fZ29uZ3lpLCAuaWNvbl9nb25neWkyLCAuaWNvbl9nb25neWkzLCAuaWNvbl9nb25neWk0LCAuaWNvbl9nb25neWk1IHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jywgc2hvd0ljb25zKFsnaWNvbl9nb25neWknXSkpOwogIGNsZWFuLkNsZWFuUnVsZSgnem9uZ3lpa2EnLCAoKSA9PiBpMThuLmNsZWFuSWNvbnNab25neWlrYSwgMSwgJy56b25neWlrYTIwMTQsIC5pY29uX3pvbmd5aWthMjAxNCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsIHNob3dJY29ucyhbJ2ljb25fem9uZ3lpa2EyMDE0J10pKTsKICBjbGVhbi5DbGVhblJ1bGUoJ290aGVycycsICgpID0+IGkxOG4uY2xlYW5JY29uc090aGVycywgMSwgKCkgPT4gewogICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IGljb25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhID4gLldfaWNvbl95eXN0eWxlJykpOwogICAgICBpY29ucy5mb3JFYWNoKGZ1bmN0aW9uIChpY29uKSB7CiAgICAgICAgY29uc3QgbGluayA9IGljb24ucGFyZW50Tm9kZTsKICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICByZXBsYWNlbWVudC50aXRsZSA9IGxpbmsudGl0bGU7CiAgICAgICAgbGluay5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChyZXBsYWNlbWVudCwgbGluayk7CiAgICAgIH0pOwogICAgfSk7CiAgICBjc3MuYXBwZW5kKCcuV19pY29uX3l5c3R5bGUsIC5XX2ljb25feXkgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICB9LCBzaG93SWNvbnMoWydpY29uX3l5X3NzcDEnLCAnaWNvbl95eV9ncXQnLCAnaWNvbl95eV9sb2wnXSkpOwoKICBjbGVhbi5DbGVhblJ1bGVHcm91cCh7CiAgICAndnllbGxvdyx2Z29sZCc6IGFwcHJvdmUsCiAgICB2Ymx1ZTogYXBwcm92ZUNvLAogICAgdmdpcmw6IHZHaXJsLAogICAgY2x1YjogY2x1YiwKICAgICd2aXAsdmlwZXgnOiBtZW1iZXIsCiAgICBiaWdmYW46IGJpZ0ZhbiwKICB9LCBmdW5jdGlvbiAob3B0aW9ucykgewogICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiAhPT0gNykgcmV0dXJuOwogICAgY29uc3QgaGlkZVN5bWJvbCA9IE9iamVjdC5rZXlzKG9wdGlvbnMpLmZpbHRlcihrZXkgPT4gb3B0aW9uc1trZXldKS5qb2luKCcsJykuc3BsaXQoJywnKTsKCiAgICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSwgaGlkZVN5bWJvbCkgewogICAgICBjb25zdCB5YXdmID0gd2luZG93W3Jvb3RLZXldOwogICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICBjb25zdCB3b29JY29uID0gdnVlU2V0dXAuZ2V0Um9vdFZtKCkuJG9wdGlvbnMuX2Jhc2UuY29tcG9uZW50KCd3b28taWNvbicpOwogICAgICB3b29JY29uLm9wdGlvbnMucmVuZGVyID0gKGZ1bmN0aW9uIChyZW5kZXIpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGgpIHsKICAgICAgICAgIGlmIChoaWRlU3ltYm9sLmluY2x1ZGVzKHRoaXMuc3ltYm9sKSkgewogICAgICAgICAgICByZXR1cm4gaCgnc3BhbicsIHsgcmVmOiAnZnJhbWVzJywgc3R5bGU6ICdkaXNwbGF5OiBub25lOycgfSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcmVuZGVyLmNhbGwodGhpcywgaCk7CiAgICAgICAgfTsKICAgICAgfSh3b29JY29uLm9wdGlvbnMucmVuZGVyKSk7CgogICAgICB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0oJ3dvby1pY29uJywgdm0gPT4geyB2bS4kZm9yY2VVcGRhdGUoKTsgfSwgeyB3YXRjaDogZmFsc2UgfSk7CiAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgnaWNvbicsIHZtID0+IHsKICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHZtKSA9PT0gd29vSWNvbi5wcm90b3R5cGUpIHZtLiRmb3JjZVVwZGF0ZSgpOwogICAgICB9LCB7IHdhdGNoOiBmYWxzZSB9KTsKCiAgICAgIGNvbnN0IGhpZGVWaXAgPSBoaWRlU3ltYm9sLmluY2x1ZGVzKCd2aXAnKTsKICAgICAgY29uc3QgaGlkZUJpZ2ZhbiA9IGhpZGVTeW1ib2wuaW5jbHVkZXMoJ2JpZ2ZhbicpOwogICAgICBpZiAoaGlkZVZpcCB8fCBoaWRlQmlnZmFuKSB7CiAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdpY29uLWZhbnMnLCBmdW5jdGlvbiAodm0pIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdpY29uLWZhbnM6ICVvJywgdm0pOwogICAgICAgICAgaWYgKGhpZGVWaXApIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModm0sIHsgaXNWaXA6IHsgZ2V0OiAoKSA9PiBmYWxzZSB9IH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGhpZGVCaWdmYW4pIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModm0sIHsgaWNvbk5hbWU6IHsgZ2V0OiAoKSA9PiBudWxsIH0gfSk7CiAgICAgICAgICB9CiAgICAgICAgICB2bS4kZm9yY2VVcGRhdGUoKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgIH0sIHV0aWwuaW5qZWN0LnJvb3RLZXksIGhpZGVTeW1ib2wpOwogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2NsZWFuL2ZvbGxvdy5qcwoKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKCiAgY29uc3QgY2xlYW4gPSB5YXdmLnJ1bGVzLmNsZWFuOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGNsZWFuRm9sbG93R3JvdXBUaXRsZTogeyBjbjogJ+makOiXj+aooeWdlyAtIOWFs+azqOaMiemSricsIHR3OiAn6Zqx6JeP5qih57WEIC0g6Zec5rOo5oyJ6YiVJywgZW46ICdIaWRlIE1vZHVsZXMgLSBGb2xsb3cgQnV0dG9uJyB9LAogICAgY2xlYW5Gb2xsb3dTaW5nbGU6IHsgY246ICflvq7ljZror6bmg4XpobUnLCB0dzogJ+W+ruWNmuips+aDhemggScsIGVuOiAnV2VpYm8gZGV0YWlsJyB9LAogICAgY2xlYW5Gb2xsb3dBdE1lOiB7IGNuOiAn5o+Q5Yiw5oiR55qE5b6u5Y2aJywgZW46ICdXZWlibyBtZW50aW9uZWQgbWUnIH0sCiAgICBjbGVhbkZvbGxvd0Rpc2NvdmVyOiB7IGNuOiAn54Ot6Zeo5b6u5Y2aJywgdHc6ICfnhrHploDlvq7ljZonLCBlbjogJ0hvdCBXZWlibycgfSwKICAgIGNsZWFuRm9sbG93RmFzdEZvcndhcmQ6IHsgY246ICflv6vovawnLCB0dzogJ+W/q+i9iScsIGVuOiAnRmFzdCBGb3J3YXJkJyB9LAogICAgY2xlYW5Gb2xsb3dWaWRlbzogeyBjbjogJ+inhumikeW8ueWxgicsIGhrOiAn6KaW6aC75b2I5bGkJywgdHc6ICflvbHniYflv6vpoa/lsaQnLCBlbjogJ1ZpZGVvIHBvcC11cCBsYXllcicgfSwKICAgIGNsZWFuRm9sbG93UmVjb21tZW5kOiB7IGNuOiAn5YWz5rOo5o6o6I2QJywgdHc6ICfpl5zms6jmjqjolqYnLCBlbjogJ0ZvbGxvdyBSZWNvbW1lbmQnIH0sCiAgfSk7CgogIGNsZWFuLkNsZWFuR3JvdXAoJ2ZvbGxvdycsICgpID0+IGkxOG4uY2xlYW5Gb2xsb3dHcm91cFRpdGxlKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3NpbmdsZScsICgpID0+IGkxOG4uY2xlYW5Gb2xsb3dTaW5nbGUsIDEsICdbaWRePSJQbF9PZmZpY2lhbF9XZWlib0RldGFpbF9fIl0gW25vZGUtdHlwZSo9ImZlZWRfcmVjb21tZW5kX2ZvbGxvdyJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdhdF9tZScsICgpID0+IGkxOG4uY2xlYW5Gb2xsb3dBdE1lLCAxLCAnI3Y2X3BsX2NvbnRlbnRfYXRtZXdlaWJvIFtub2RlLXR5cGUqPSJmZWVkX3JlY29tbWVuZF9mb2xsb3ciXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnZGlzY292ZXInLCAoKSA9PiBpMThuLmNsZWFuRm9sbG93RGlzY292ZXIsIDEsICcjcGxjX2Rpc2NvdmVyIFtub2RlLXR5cGUqPSJmZWVkX3JlY29tbWVuZF9mb2xsb3ciXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnZmFzdF9mb3J3YXJkJywgKCkgPT4gaTE4bi5jbGVhbkZvbGxvd0Zhc3RGb3J3YXJkLCAxLCAnI3Y2X3BsX2NvbnRlbnRfaG9tZWZlZWQgW25vZGUtdHlwZSo9ImZlZWRfcmVjb21tZW5kX2ZvbGxvdyJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCd2aWRlbycsICgpID0+IGkxOG4uY2xlYW5Gb2xsb3dWaWRlbywgMSwgJy5XQl9oNXZpZGVvIC5jb24tMTEsIC53YnYtYWRkLWJveCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgncmVjb21tZW5kJywgKCkgPT4gaTE4bi5jbGVhbkZvbGxvd1JlY29tbWVuZCwgMSwgJ1thY3Rpb24tdHlwZT0iZm9sbG93X3JlY29tbWVuZF9hcnIiXSwgW25vZGUtdHlwZT0iZm9sbG93X3JlY29tbWVuZF9ib3giXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2NsZWFuL25hdi5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBlbnYgPSB5YXdmLmVudjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IGJhY2tlbmQgPSB5YXdmLmJhY2tlbmQ7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwoKICBjb25zdCBjbGVhbiA9IHlhd2YucnVsZXMuY2xlYW47CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY2xlYW5OYXZHcm91cFRpdGxlOiB7IGNuOiAn6ZqQ6JeP5qih5Z2XIC0g5a+86Iiq5qCPJywgdHc6ICfpmrHol4/mqKHntYQgLSDlsI7opr3liJcnLCBlbjogJ0hpZGUgTW9kdWxlcyAtIE5hdmlnYXRpb24gQmFyJyB9LAogICAgY2xlYW5OYXZMb2dvSW1nOiB7IGNuOiAn6IqC5pel5b695qCHJywgdHc6ICfnr4Dml6Xlvr3mqJknLCBlbjogJ0hvbGlkYXkgbG9nbycgfSwKICAgIGNsZWFuTmF2TWFpbjogeyBjbjogJ+mmlumhtScsIHR3OiAn6aaW6aCBJywgZW46ICdIb21lJyB9LAogICAgY2xlYW5OYXZUVjogeyBjbjogJ+inhumikScsIGVuOiAn6KeG6aKRIChWaWRlbyknIH0sCiAgICBjbGVhbk5hdkhvdDogeyBjbjogJ+eDremXqO+8iOWPkeeOsO+8iScsIGVuOiAnRGlzY292ZXInIH0sCiAgICBjbGVhbk5hdkdhbWU6IHsgY246ICfmuLjmiI8nLCB0dzogJ+mBiuaIsicsIGVuOiAnR2FtZScgfSwKICAgIGNsZWFuTmF2SG90U2VhcmNoOiB7IGNuOiAn5aSn5a625q2j5Zyo5pCcJywgdHc6ICflpKflrrbmraPlnKjnhrHmkJwnLCBlbjogJ0hvdCBzZWFyY2gnIH0sCiAgICBjbGVhbk5hdk5vdGljZU5ldzogeyBjbjogJ+aWsOa2iOaBr+iuoeaVsCcsIHR3OiAn5paw5raI5oGv6KiI5pW4JywgZW46ICdDb3VudCBmb3IgbmV3IG5vdGljZScgfSwKICAgIGNsZWFuTmF2TmV3OiB7IGNuOiAn5o+Q56S657qi54K5JywgdHc6ICfmj5DnpLrntIXpu54nLCBlbjogJ1JlZCBkb3QgdGlwcycgfSwKICB9KTsKCiAgY2xlYW4uQ2xlYW5Hcm91cCgnbmF2JywgKCkgPT4gaTE4bi5jbGVhbk5hdkdyb3VwVGl0bGUpOwogIGNsZWFuLkNsZWFuUnVsZSgnbG9nb19pbWcnLCAoKSA9PiBpMThuLmNsZWFuTmF2TG9nb0ltZywgMSwgewogICAgYWluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiByZXBsYWNlTG9nbygpIHsKICAgICAgICBjb25zdCBib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuV0JfZ2xvYmFsX25hdiAuZ25fbG9nbyAuYm94Jyk7CiAgICAgICAgaWYgKCFib3gpIHsgc2V0VGltZW91dChyZXBsYWNlTG9nbywgMTAwKTsgcmV0dXJuOyB9CiAgICAgICAgY29uc3QgaW1nID0gYm94LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbWcnKVswXTsKICAgICAgICBpZiAoIWltZykgcmV0dXJuOwogICAgICAgIGNvbnN0IGxvZ28gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgbG9nby5jbGFzc0xpc3QuYWRkKCdsb2dvJyk7CiAgICAgICAgaW1nLnJlcGxhY2VXaXRoKGxvZ28pOwogICAgICB9KTsKICAgIH0sCiAgICBhY3NzOiAnLldCX2dsb2JhbF9uYXYgLmduX2xvZ28gLmJveCBpbWcgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLAogIH0pOwogIGNsZWFuLkNsZWFuUnVsZUdyb3VwKHsKICAgIC8vIFY3OiDpgqPmrrUgQ1NTIOaYryBWNiDnmoTvvIzkuYvlkI7lupTor6Xnm7TmjqXliKDmjokKICAgIGhvbWU6IGNsZWFuLkNsZWFuUnVsZSgnbWFpbicsICgpID0+IGkxOG4uY2xlYW5OYXZNYWluLCAxLCAnLmduX25hdl9saXN0PmxpOm50aC1jaGlsZCgxKSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSksCiAgICB0djogY2xlYW4uQ2xlYW5SdWxlKCd0dicsICgpID0+IGkxOG4uY2xlYW5OYXZUViwgMSwgJy5nbl9uYXZfbGlzdD5saTpudGgtY2hpbGQoMikgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLCB7IHdlaWJvVmVyc2lvbjogWzYsIDddIH0pLAogICAgaG90OiBjbGVhbi5DbGVhblJ1bGUoJ2hvdCcsICgpID0+IGkxOG4uY2xlYW5OYXZIb3QsIDEsICcuZ25fbmF2X2xpc3Q+bGk6bnRoLWNoaWxkKDMpIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywgeyB3ZWlib1ZlcnNpb246IFs2LCA3XSB9KSwKICAgIGdhbWU6IGNsZWFuLkNsZWFuUnVsZSgnZ2FtZScsICgpID0+IGkxOG4uY2xlYW5OYXZHYW1lLCAxLCAnLmduX25hdl9saXN0PmxpOm50aC1jaGlsZCg0KSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSksCiAgfSwgZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gIT09IDcpIHJldHVybjsKICAgIHV0aWwuaW5qZWN0KGZ1bmN0aW9uIChyb290S2V5LCBvcHRpb25zKSB7CiAgICAgIGNvbnN0IHlhd2YgPSB3aW5kb3dbcm9vdEtleV07CiAgICAgIGNvbnN0IHZ1ZVNldHVwID0geWF3Zi52dWVTZXR1cDsKCiAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgnd2VpYm8tdG9wLW5hdicsIGZ1bmN0aW9uICh2bSkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZtLmNoYW5uZWxzKSkgewogICAgICAgICAgdm0uY2hhbm5lbHMgPSB2bS5jaGFubmVscy5maWx0ZXIoY2hhbm5lbCA9PiAhb3B0aW9uc1tjaGFubmVsLm5hbWVdKTsKICAgICAgICB9CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodm0ubGlua3MpKSB7CiAgICAgICAgICB2bS5saW5rcyA9IHZtLmxpbmtzLmZpbHRlcihsaW5rID0+ICFvcHRpb25zW2xpbmsubmFtZV0pOwogICAgICAgIH0KICAgICAgfSk7CgogICAgfSwgdXRpbC5pbmplY3Qucm9vdEtleSwgb3B0aW9ucyk7CiAgfSk7CiAgaWYgKGVudi5jb25maWcucmVxdWVzdEJsb2NraW5nU3VwcG9ydGVkKSB7CiAgICBjbGVhbi5DbGVhblJ1bGUoJ2hvdF9zZWFyY2gnLCAoKSA9PiBpMThuLmNsZWFuTmF2SG90U2VhcmNoLCAxLCB7CiAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICBiYWNrZW5kLm9uUmVxdWVzdCgnaG90U2VhcmNoJywgZGV0YWlscyA9PiB7CiAgICAgICAgICBpZiAodGhpcy5pc0VuYWJsZWQoKSkgcmV0dXJuIHsgY2FuY2VsOiB0cnVlIH07CiAgICAgICAgICByZXR1cm4ge307CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICB9KTsKICB9IGVsc2UgaWYgKGZ1bmN0aW9uIHN1cHBvcnRNdXRhdGlvbkV2ZW50KCkgewogICAgLy8g55So5oi36ISa5pys54mI5peg5rOV55SoIGJhY2tncm91bmQg6ISa5pys5oum5oiq572R57uc6K+35rGCCiAgICAvLyBNdXRhdGlvbiBFdmVudCDkvJrlnKjoioLngrnmj5LlhaXkuYvliY3op6blj5HvvIzpmLvmraLmj5LlhaXlsLHlj6/ku6XpmLvmraLohJrmnKzov5DooYwKICAgIC8vIE11dGF0aW9uT2JzZXJ2ZXIg5Lya5Zyo6IqC54K55o+S5YWl5LmL5ZCO6Kem5Y+R77yM5bm25LiN6IO95L+d6K+B6Zi75q2iIEpTT05QIOivt+axguaIkOWKn+i/m+ihjAogICAgLy8g5q2k5aSW6Zmk5LqGIEdNMyDmhI/lpJbnmoTnjLTlrZDvvIznlKjmiLfohJrmnKzml6Dms5Xkv53or4EgZG9jdW1lbnQtc3RhcnTvvIzmiYDku6XkuZ/kuI3og73pnaDmi6bmiKogU1RLIOazqOWGjOadpeWunueOsOi/meS4quWKn+iDvQogICAgLy8g5oiR5Lus5bqU6K+l5Lmf5rKh5pyJ5Yeg5LiqIEdNMyDnmoTnlKjmiLfvvIzmiYDku6XkuI3miZPnrpfkuLogR00zIOWBmueJueauiuWkhOeQhgogICAgLy8gTXV0YXRpb24gRXZlbnQg5Li65b6F5bqf5byD5Yqf6IO977yM5aaC5p6c5p+Q5aSp5rWP6KeI5Zmo5YGc5q2i5pSv5oyB6L+Z5Liq5Yqf6IO977yM6L+Z6YeM5Y+q6IO95Yig5o6JCiAgICBjb25zdCBwbGFjZWhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgbGV0IHN1cHBvcnRlZCA9IGZhbHNlOwogICAgcGxhY2Vob2xkZXIuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgKCkgPT4geyBzdXBwb3J0ZWQgPSB0cnVlOyB9KTsKICAgIHBsYWNlaG9sZGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSk7CiAgICByZXR1cm4gc3VwcG9ydGVkOwogIH0oKSkgewogICAgY2xlYW4uQ2xlYW5SdWxlKCdob3Rfc2VhcmNoJywgKCkgPT4gaTE4bi5jbGVhbk5hdkhvdFNlYXJjaCwgMSwgewogICAgICBhaW5pdDogZnVuY3Rpb24gKCkgewogICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Ob2RlSW5zZXJ0ZWQnLCBldmVudCA9PiB7CiAgICAgICAgICBjb25zdCBzY3JpcHQgPSBldmVudC50YXJnZXQ7CiAgICAgICAgICBpZiAoIXNjcmlwdCB8fCAoc2NyaXB0LnRhZ05hbWUgfHwgJycpLnRvTG93ZXJDYXNlKCkgIT09ICdzY3JpcHQnKSByZXR1cm47CiAgICAgICAgICBjb25zdCBwYXR0ZXJuID0gL15odHRwcz86XC9cL3Mud2VpYm8uY29tXC9hamF4XC9qc29ucFwvZ2V0dG9wc3VnXD8oPzouKiYpP19jYj0oU1RLX1xkKykvOwogICAgICAgICAgY29uc3QgbWF0Y2ggPSBzY3JpcHQuc3JjLm1hdGNoKHBhdHRlcm4pOwogICAgICAgICAgaWYgKCFtYXRjaCB8fCAhbWF0Y2hbMV0pIHJldHVybjsKICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gbWF0Y2hbMV07CiAgICAgICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAoY2FsbGJhY2spIHsgZGVsZXRlIHdpbmRvd1tjYWxsYmFja107IH0sIGNhbGxiYWNrKTsKICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBpZiAoc2NyaXB0LnBhcmVudE5vZGUpIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICB9KTsKICB9CiAgY2xlYW4uQ2xlYW5SdWxlKCdub3RpY2VfbmV3JywgKCkgPT4gaTE4bi5jbGVhbk5hdk5vdGljZU5ldywgMSwgJy5XQl9nbG9iYWxfbmF2IC5nbl9zZXRfbGlzdCAuV19uZXdfY291bnQgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ25ldycsICgpID0+IGkxOG4uY2xlYW5OYXZOZXcsIDEsICcuV0JfZ2xvYmFsX25hdiAuV19uZXcgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9jbGVhbi9sZWZ0LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CiAgY29uc3QgcHJpb3JpdHkgPSB1dGlsLnByaW9yaXR5OwoKICBjb25zdCBjbGVhbiA9IHlhd2YucnVsZXMuY2xlYW47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY2xlYW5MZWZ0R3JvdXBUaXRsZTogeyBjbjogJ+makOiXj+aooeWdlyAtIOW3puagjycsIHR3OiAn6Zqx6JeP5qih57WEIC0g5bem5qyEJywgZW46ICdIaWRlIG1vZHVsZXMgLSBMZWZ0IENvbHVtbicgfSwKICAgIGNsZWFuTGVmdEhvbWU6IHsgY246ICflhajpg6jlhbPms6jvvIjpppbpobXvvIknLCB0dzogJ+mmlumggScsIGVuOiAnSG9tZScgfSwKICAgIGNsZWFuTGVmdEZhdjogeyBjbjogJ+aIkeeahOaUtuiXjycsIHR3OiAn5oiR55qE5pS26JePJywgZW46ICdGYXZvcml0ZScgfSwKICAgIGNsZWFuTGVmdExpa2U6IHsgY246ICfmiJHnmoTotZ4nLCB0dzogJ+aIkeeahOiumicsIGVuOiAnTGlrZScgfSwKICAgIGNsZWFuTGVmdEhvdDogeyBjbjogJ+eDremXqOW+ruWNmicsIHR3OiAn54ax6ZaA5b6u5Y2aJywgZW46ICdIb3QgRmVlZHMnIH0sCiAgICBjbGVhbkxlZnRUVjogeyBjbjogJ+eDremXqOinhumikScsIHR3OiAn54ax6ZaA6KaW6aC7JywgZW46ICdIb3QgVmlkZW8nIH0sCiAgICBjbGVhbkxlZnROZXdGZWVkOiB7IGNuOiAn5pyA5paw5b6u5Y2aJywgdHc6ICfmnIDmlrDlvq7ljZonLCBlbjogJ+acgOaWsOW+ruWNmiAoTmV3ZXN0IEZlZWRzKScgfSwKICAgIGNsZWFuTGVmdEZyaWVuZHM6IHsgY246ICflpb3lj4vlnIgnLCB0dzogJ+WlveWPi+WciCcsIGVuOiAnRnJpZW5kcycgfSwKICAgIGNsZWFuTGVmdEdyb3VwVG9NZTogeyBjbjogJ+e+pOW+ruWNmicsIHR3OiAn576k5b6u5Y2aJywgZW46ICfnvqTlvq7ljZogKEdyb3VwKScgfSwKICAgIGNsZWFuTGVmdFNwZWNpYWw6IHsgY246ICfnibnliKvlhbPms6gnLCB0dzogJ+eJueWIq+mXnOazqCcsIGVuOiAnU3BlY2lhbCBGb2N1cycgfSwKICAgIGNsZWFuTGVmdFdoaXNwZXI6IHsgY246ICfmgoTmgoTlhbPms6gnLCB0dzogJ+aChOaChOmXnOazqCcsIGVuOiAnU2VjcmV0IEZvbGxvd2luZycgfSwKICAgIGNsZWFuTGVmdFZQbHVzOiB7IGNuOiAn5LuY6LS56K6i6ZiF77yIVivvvIknLCB0dzogJ+S7mOiyu+iogumWse+8iFYr77yJJywgZW46ICdQYWlkIFN1YnNjcmliZSAoVispJyB9LAogICAgY2xlYW5MZWZ0TmV3OiB7IGNuOiAn5paw5b6u5Y2a5o+Q56S657qi54K5JywgdHc6ICfmlrDlvq7ljZrmj5DnpLrntIXpu54nLCBlbjogJ1JlZCBkb3QgZm9yIG5ldyBGZWVkcycgfSwKICAgIGNsZWFuTGVmdE5ld3M6IHsgY246ICfmlrDmtojmga/orqHmlbAnLCB0dzogJ+aWsOa2iOaBr+ioiOaVuCcsIGVuOiAnQ291bnRzIGZvciBOZXdzJyB9LAogICAgY2xlYW5MZWZ0Q291bnQ6IHsgY246ICfmlrDliIbnu4Tlvq7ljZrorqHmlbAnLCB0dzogJ+aWsOWIhue1hOW+ruWNmuioiOaVuCcsIGVuOiAnQ291bnRzIG9mIEZlZWRzIGJ5IEdyb3VwJyB9LAogIH0pOwoKICBjb25zdCBsZWZ0SGlkZSA9IChmdW5jdGlvbiAoKSB7CiAgICBjb25zdCBpZHMgPSBbXTsKICAgIC8vIOenu+mZpOS4gOS4quW3puagj+mTvuaOpeaIluebuOWFs+WFg+e0oAogICAgY29uc3QgcmVtb3ZlTm9kZSA9IGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkgewogICAgICBjb25zdCBjb250YWluZXIgPSBub2RlLnBhcmVudE5vZGU7CiAgICAgIGxldCBwcmV2LCBuZXh0OwogICAgICBjb25zdCByZW1vdmVCbGFuayA9IGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUgJiYgbm9kZS5kYXRhLm1hdGNoKC9eXHMqJC8pKSB7CiAgICAgICAgICByZXR1cm4gY29udGFpbmVyLnJlbW92ZUNoaWxkKG5vZGUpOwogICAgICAgIH0KICAgICAgICBpZiAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSBOb2RlLkNPTU1FTlRfTk9ERSkgewogICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5yZW1vdmVDaGlsZChub2RlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH07CiAgICAgIGNvbnN0IHJlbW92ZUJsYW5rU2libGluZyA9IGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgd2hpbGUgKHJlbW92ZUJsYW5rKG5vZGUucHJldmlvdXNTaWJsaW5nKSk7CiAgICAgICAgd2hpbGUgKHJlbW92ZUJsYW5rKG5vZGUubmV4dFNpYmxpbmcpKTsKICAgICAgfTsKICAgICAgcmVtb3ZlQmxhbmtTaWJsaW5nKG5vZGUpOwogICAgICBwcmV2ID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7IG5leHQgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICAvLyDlpoLmnpzliY3lkI7pg73mmK/liIblibLnur/vvIjov57nu63nmoTliIblibLnur/vvInpgqPkuYjlupTlvZPliKDmjonkuIDkuKrvvIjliKDmjonliY3pnaLkuIDkuKrvvIkKICAgICAgLy8g5aaC5p6c5YiG5Ymy57q/5Zyo5byA5aS05oiW5pyr5bC+77yM6YKj5LmI5bqU6K+l5Yig5o6J5YiG5Ymy57q/CiAgICAgIC8vIOWmguaenOWJjeWQjumDveayoeacieS4nOilv++8jOmCo+S5iOW6lOivpei/nuWQjOWuueWZqOS4gOi1t+WIoOmZpAogICAgICB3aGlsZSAoKCFwcmV2IHx8IHByZXYubWF0Y2hlcygnLmxldl9saW5lJykpICYmCiAgICAgICAgKCFuZXh0IHx8IG5leHQubWF0Y2hlcygnLmxldl9saW5lJykpKSB7CiAgICAgICAgbGV0IGxpbmUgPSBudWxsOwogICAgICAgIGlmIChwcmV2ICYmIHByZXYubWF0Y2hlcygnLmxldl9saW5lJykpIGxpbmUgPSBwcmV2OwogICAgICAgIGlmIChuZXh0ICYmIG5leHQubWF0Y2hlcygnLmxldl9saW5lJykpIGxpbmUgPSBuZXh0OwogICAgICAgIGlmIChsaW5lKSB7CiAgICAgICAgICBsaW5lID0gcHJldiB8fCBuZXh0OwogICAgICAgICAgcmVtb3ZlQmxhbmtTaWJsaW5nKGxpbmUpOwogICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGxpbmUpOwogICAgICAgICAgcHJldiA9IG5vZGUucHJldmlvdXNTaWJsaW5nOwogICAgICAgICAgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7CiAgICAgICAgfSBlbHNlIGJyZWFrOwogICAgICB9CiAgICAgIGlmIChub2RlLnBhcmVudE5vZGUpIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTsKICAgICAgaWYgKCFwcmV2ICYmICFuZXh0KSByZW1vdmVOb2RlKGNvbnRhaW5lcik7CiAgICB9OwogICAgLy8g5qOA5p+l5piv5ZCm5pyJ5pyq562b6YCJ55qE5bem5qCP6ZO+5o6l5bm25qC55o2u5ZCN56ew5Yik5patCiAgICBjb25zdCBsaXN0ZW5lciA9IGZ1bmN0aW9uIGxlZnROYXZSZW1vdmUoKSB7CiAgICAgIGNvbnN0IGxldnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyN2Nl9wbF9sZWZ0bmF2X2dyb3VwIC5sZXZbeWF3Zi1pZF06bm90KFt5YXdmLWNoZWNrZWQtbGV2XSknKSk7CiAgICAgIGxldnMuZm9yRWFjaChmdW5jdGlvbiAobGV2KSB7CiAgICAgICAgY29uc3QgaWQgPSBsZXYuZ2V0QXR0cmlidXRlKCd5YXdmLWlkJyk7CiAgICAgICAgaWYgKGlkcy5pbmNsdWRlcyhpZCkpIHJlbW92ZU5vZGUobGV2KTsKICAgICAgICBlbHNlIGxldi5zZXRBdHRyaWJ1dGUoJ3lhd2YtY2hlY2tlZC1sZXYnLCAnJyk7CiAgICAgIH0pOwogICAgfTsKICAgIGNzcy5hcHBlbmQoJyN2Nl9wbF9sZWZ0bmF2X2dyb3VwIC5sZXY6bm90KFt5YXdmLWNoZWNrZWQtbGV2XSkgeyB2aXNpYmlsaXR5OiBoaWRkZW47IH0nKTsKICAgIGluaXQub25Mb2FkKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiAhPT0gNikgcmV0dXJuOwogICAgICBvYnNlcnZlci5kb20uYWRkKGxpc3RlbmVyKTsKICAgICAgbGlzdGVuZXIoKTsKICAgIH0sIHsgcHJpb3JpdHk6IHByaW9yaXR5LkxBU1QgfSk7CiAgICByZXR1cm4gZnVuY3Rpb24gKGlkKSB7CiAgICAgIHJldHVybiAoKSA9PiB7IGlkcy5wdXNoKCdsZWZ0bmF2XycgKyBpZCk7IH07CiAgICB9OwogIH0oKSk7CgogIGNsZWFuLkNsZWFuR3JvdXAoJ2xlZnQnLCAoKSA9PiBpMThuLmNsZWFuTGVmdEdyb3VwVGl0bGUpOwogIGNsZWFuLkNsZWFuUnVsZSgnbGV2ZWwnLCAoKSA9PiBpMThuLmNsZWFuSWNvbnNMZXZlbCwgMSwgJy5pY29uX2JlZFtub2RlLXR5cGU9ImxldmVsIl0sIC5XX2xldmVsX2ljbywgLldfaWNvbl9sZXZlbCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnaG9tZScsICgpID0+IGkxOG4uY2xlYW5MZWZ0SG9tZSwgMSwgbGVmdEhpZGUoJ2hvbWUnKSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdmYXYnLCAoKSA9PiBpMThuLmNsZWFuTGVmdEZhdiwgMSwgbGVmdEhpZGUoJ2ZhdicpKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2xpa2UnLCAoKSA9PiBpMThuLmNsZWFuTGVmdExpa2UsIDEsIGxlZnRIaWRlKCdsaWtlJykpOwogIGNsZWFuLkNsZWFuUnVsZSgnaG90JywgKCkgPT4gaTE4bi5jbGVhbkxlZnRIb3QsIDEsIGxlZnRIaWRlKCdob3QnKSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCd0dicsICgpID0+IGkxOG4uY2xlYW5MZWZ0VFYsIDEsIGxlZnRIaWRlKCd0dicpKTsKICBjb25zdCBuZXdfZmVlZCA9IGNsZWFuLkNsZWFuUnVsZSgnbmV3X2ZlZWQnLCAoKSA9PiBpMThuLmNsZWFuTGVmdE5ld0ZlZWQsIDIxLCBsZWZ0SGlkZSgnbmV3JyksIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSk7CiAgY29uc3QgZnJpZW5kcyA9IGNsZWFuLkNsZWFuUnVsZSgnZnJpZW5kcycsICgpID0+IGkxOG4uY2xlYW5MZWZ0RnJpZW5kcywgMSwgbGVmdEhpZGUoJ2ZyaWVuZHMnKSwgeyB3ZWlib1ZlcnNpb246IFs2LCA3XSB9KTsKICBjbGVhbi5DbGVhblJ1bGUoJ2dyb3VwX3RvX21lJywgKCkgPT4gaTE4bi5jbGVhbkxlZnRHcm91cFRvTWUsIDEsIGxlZnRIaWRlKCdncm91cHNmZWVkJykpOwogIGNvbnN0IHNwZWNpYWwgPSBjbGVhbi5DbGVhblJ1bGUoJ3NwZWNpYWwnLCAoKSA9PiBpMThuLmNsZWFuTGVmdFNwZWNpYWwsIDEsIGxlZnRIaWRlKCdzcGVjaWFsJyksIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCd3aGlzcGVyJywgKCkgPT4gaTE4bi5jbGVhbkxlZnRXaGlzcGVyLCAxLCBsZWZ0SGlkZSgnd2hpc3BlcicpKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3ZfcGx1cycsICgpID0+IGkxOG4uY2xlYW5MZWZ0VlBsdXMsIDEsIGxlZnRIaWRlKCd2cGx1cycpKTsKICBjbGVhbi5DbGVhblJ1bGUoJ25ldycsICgpID0+IGkxOG4uY2xlYW5MZWZ0TmV3LCAxLCAnLldCX2xlZnRfbmF2IC5sZXYgLldfbmV3LCAueWF3Zi1XQl9sZWZ0X25hdiAubGV2IC5XX25ldyB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnbmV3cycsICgpID0+IGkxOG4uY2xlYW5MZWZ0TmV3cywgMSwgJy5XQl9sZWZ0X25hdiAubGV2ZWxfMV9Cb3ggLldfbmV3X2NvdW50LCAueWF3Zi1XQl9sZWZ0X25hdiAubGV2ZWxfMV9Cb3ggLldfbmV3X2NvdW50IHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdjb3VudCcsICgpID0+IGkxOG4uY2xlYW5MZWZ0Q291bnQsIDEsICcuV0JfbGVmdF9uYXYgLnBsX2xlZnRuYXZfZ3JvdXAgLldfbmV3X2NvdW50LCAuV0JfbGVmdF9uYXYgLmxldiAuV19uZXdfY291bnQsIC55YXdmLVdCX2xlZnRfbmF2IC5wbF9sZWZ0bmF2X2dyb3VwIC5XX25ld19jb3VudCwgLnlhd2YtV0JfbGVmdF9uYXYgLmxldiAuV19uZXdfY291bnQgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKCiAgY2xlYW4udGFnRWxlbWVudHMoJ0xlZnQnLCBbCiAgICAnI3Y2X3BsX2xlZnRuYXZfZ3JvdXAgLmxldjpub3QoW3lhd2YtaWRdKScsCiAgXS5qb2luKCcsJyksIHsKICAgICdhW2hyZWYqPSJrcmNvbS5jbiJdJzogJ2xlZnRuYXZfdHYnLAogICAgJ2FbaHJlZio9ImlzX25ldz0xIl0nOiAnbGVmdG5hdl9uZXcnLAogICAgJ2FbaHJlZio9Ii9ob21lPyJdJzogJ2xlZnRuYXZfaG9tZScsCiAgICAnYVtocmVmXj0iL2F0LyJdJzogJ2xlZnRuYXZfbWVzc2FnZScsCiAgICAnYVtocmVmXj0iL2ZhdiJdJzogJ2xlZnRuYXZfZmF2JywKICAgICdhW2hyZWZePSIvbGlrZSJdJzogJ2xlZnRuYXZfbGlrZScsCiAgICAnYVtocmVmXj0iL2ZyaWVuZHMiXSc6ICdsZWZ0bmF2X2ZyaWVuZHMnLAogICAgJ2FbaHJlZl49Ii9ncm91cHNmZWVkIl0nOiAnbGVmdG5hdl9ncm91cHNmZWVkJywKICAgICdhW2hyZWYqPSIvL2Qud2VpYm8uY29tIl0nOiAnbGVmdG5hdl9ob3QnLAogICAgJ2FbaHJlZio9Ii8vd2VpYm8uY29tL3R2Il0nOiAnbGVmdG5hdl90dicsCiAgICAnYVtocmVmXj0iL215Z3JvdXBzIl1baHJlZio9Imlzc3BlY2lhbGdyb3VwPTEiXSc6ICdsZWZ0bmF2X3NwZWNpYWwnLAogICAgJ2FbaHJlZl49Ii9teWdyb3VwcyJdW2hyZWYqPSJ3aGlzcGVyPTEiXSc6ICdsZWZ0bmF2X3doaXNwZXInLAogICAgJ2FbaHJlZl49Ii9teWdyb3VwcyJdW2hyZWYqPSJ2cGx1cz0xIl0nOiAnbGVmdG5hdl92cGx1cycsCiAgICAnYVtocmVmXj0iL215Z3JvdXBzIl0nOiAnbGVmdG5hdl9teWdyb3VwcycsCiAgfSk7CgogIGNsZWFuLkNsZWFuUnVsZUdyb3VwKHsKICAgIG5ld19mZWVkLAogICAgc3BlY2lhbCwKICAgIGZyaWVuZHMsCiAgfSwgZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gIT09IDcpIHJldHVybjsKCiAgICBpZiAoeWF3Zi5ydWxlcy5maWx0ZXIuaG9tZXBhZ2UubmV3ZXN0RmVlZHMuZ2V0Q29uZmlnKCkpIHsKICAgICAgb3B0aW9ucy5uZXdfZmVlZCA9IGZhbHNlOwogICAgfQoKICAgIHV0aWwuaW5qZWN0KGZ1bmN0aW9uIChyb290S2V5LCBvcHRpb25zKSB7CiAgICAgIGNvbnN0IHlhd2YgPSB3aW5kb3dbcm9vdEtleV07CiAgICAgIGNvbnN0IHZ1ZVNldHVwID0geWF3Zi52dWVTZXR1cDsKCiAgICAgIGNvbnN0IGljb25zID0gewogICAgICAgIG5hdk5ldzogJ25ld19mZWVkJywKICAgICAgICBuYXZTcGVjaWFsOiAnc3BlY2lhbCcsCiAgICAgICAgbmF2TXV0dWFsOiAnZnJpZW5kcycsCiAgICAgIH07CiAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgnaG9tZScsIGZ1bmN0aW9uICh2bSkgewogICAgICAgIHZtLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmxlZnRUYWJzOyB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2bS5sZWZ0VGFicykpIHsKICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSB2bS5sZWZ0VGFicy5maWx0ZXIodGFiID0+ICFvcHRpb25zW2ljb25zW3RhYi5pY29uXV0pOwogICAgICAgICAgICBpZiAodm0ubGVmdFRhYnMubGVuZ3RoICE9PSBmaWx0ZXJlZC5sZW5ndGgpIHZtLmxlZnRUYWJzID0gZmlsdGVyZWQ7CiAgICAgICAgICB9CiAgICAgICAgfSwgeyBpbW1lZGlhdGU6IHRydWUgfSk7CiAgICAgIH0pOwoKICAgIH0sIHV0aWwuaW5qZWN0LnJvb3RLZXksIG9wdGlvbnMpOwogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2NsZWFuL21pZGRsZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBjb25zdCBjbGVhbiA9IHlhd2YucnVsZXMuY2xlYW47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY2xlYW5NaWRkbGVHcm91cFRpdGxlOiB7IGNuOiAn6ZqQ6JeP5qih5Z2XIC0g5Lit5qCPJywgdHc6ICfpmrHol4/mqKHntYQgLSDkuK3mrIQnLCBlbjogJ0hpZGUgbW9kdWxlcyAtIE1pZGRsZSBDb2x1bW4nIH0sCiAgICBjbGVhbk1pZGRsZVJlY29tbWVuZGVkVG9waWM6IHsgY246ICfng63pl6jlvq7ljZrvvIjlj5HluIPmoYbkuIrmlrnvvIknLCBoazogJ+eDremXqOW+ruWNmu+8iOeZvOW4g+ahhuS4iuaWue+8iScsIHR3OiAn54ax6ZaA5b6u5Y2a77yI55m85biD5qGG5LiK5pa577yJJywgZW46ICdIb3QgZmVlZHMsIG9uIHRvcCBvZiBwdWJsaXNoZXInIH0sCiAgICBjbGVhbk1pZGRsZUZlZWRSZWNvbW1lbmQ6IHsgY246ICflvq7ljZrlhbTotqPmjqjojZDvvIjpobbpg6jvvIknLCB0dzogJ+W+ruWNmuiIiOi2o+aOqOiWpu+8iOmggumDqO+8iScsIGVuOiAnRmVlZCBSZWNvbW1lbmRhdGlvbiwgdG9wJyB9LAogICAgY2xlYW5NaWRkbGVNZW1iZXJUaXA6IHsgY246ICflvIDpgJrkvJrlkZjmj5DnpLrvvIjlupXpg6jvvIknLCB0dzogJ+mWi+mAmuacg+WToeaPkOekuu+8iOW6lemDqO+8iScsIGVuOiAnVGlwIG9mIEpvaW5pbmcgV2VpYm8gVklQLCBib3R0b20nIH0sCiAgfSk7CgogIGNsZWFuLkNsZWFuR3JvdXAoJ21pZGRsZScsICgpID0+IGkxOG4uY2xlYW5NaWRkbGVHcm91cFRpdGxlKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3JlY29tbWVuZGVkX3RvcGljJywgKCkgPT4gaTE4bi5jbGVhbk1pZGRsZVJlY29tbWVuZGVkVG9waWMsIDEsICcjdjZfcGxfY29udGVudF9wdWJsaXNoZXJ0b3AgZGl2W25vZGUtdHlwZT0icmVjb21tZW5kVG9waWMiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnZmVlZF9yZWNvbW1lbmQnLCAoKSA9PiBpMThuLmNsZWFuTWlkZGxlRmVlZFJlY29tbWVuZCwgMSwgJ2Eubm90ZXNbbm9kZS10eXBlPSJmZWVkX2xpc3RfbmV3QmFyIl1baHJlZl49Imh0dHAiXTpub3QoW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfbmV3QmFyIl0pLCAuV0JfZmVlZF9uZXd1c2VyW25vZGUtdHlwZT0icmVjb21tZmVlZCJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdtZW1iZXJfdGlwJywgKCkgPT4gaTE4bi5jbGVhbk1pZGRsZU1lbWJlclRpcCwgMSwgJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF9zaGllbGRLZXl3b3JkIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9jbGVhbi9yaWdodC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBjb25zdCBjbGVhbiA9IHlhd2YucnVsZXMuY2xlYW47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY2xlYW5SaWdodEdyb3VwVGl0bGU6IHsgY246ICfpmpDol4/mqKHlnZcgLSDlj7PmoI8nLCB0dzogJ+maseiXj+aooee1hCAtIOWPs+ashCcsIGVuOiAnSGlkZSBtb2R1bGVzIC0gUmlnaHQgQ29sdW1uJyB9LAogICAgY2xlYW5SaWdodEluZm86IHsgY246ICfkuKrkurrkv6Hmga8nLCB0dzogJ+S4quS6uuS/oeaBrycsIGVuOiAnUGVyc29uYWwgSW5mbycgfSwKICAgIGNsZWFuUmlnaHRSYW5rczogeyBjbjogJ+amnOWNle+8iOaWsOatjOamnOetie+8iScsIHR3OiAn5qac5Zau77yI5paw5q2M5qac562J77yJJywgZW46ICdSYW5rIExpc3QgKFNvbmcgbGlzdCwgZXRjLiknIH0sCiAgICBjbGVhblJpZ2h0SG90VG9waWM6IHsgY246ICfng63pl6jor53popggLyDlvq7ljZrng63mkJwnLCB0dzogJ+eGsemWgOipsemhjCcsIGVuOiAnSG90IFRvcGljJyB9LAogICAgY2xlYW5SaWdodEludGVyZXN0OiB7IGNuOiAn5Y+v6IO95oSf5YW06Laj55qE5Lq6JywgdHc6ICflj6/og73mhJ/oiIjotqPnmoTkuronLCBlbjogJ1lvdSBtYXkga25vdycgfSwKICAgIGNsZWFuUmlnaHRNZW1iZXI6IHsgY246ICfkvJrlkZjkuJPljLonLCB0dzogJ+acg+WToeWwiOWNgCcsIGVuOiAnV2VpYm8gVklQJyB9LAogICAgY2xlYW5SaWdodEdyb3VwczogeyBjbjogJ+WIhue7hOaIkOWRmOWIl+ihqCcsIHR3OiAn5YiG57WE5oiQ5ZOh5YiX6KGoJywgZW46ICdNZW1iZXJzIG9mIGdyb3VwJyB9LAogICAgY2xlYW5SaWdodFJlY29tR3JvdXBVc2VyOiB7IGNuOiAn5bu66K6u5Yqg5YWl6K+l5YiG57uEJywgdHc6ICflu7rorbDliqDlhaXoqbLliIbntYQnLCBlbjogJ1N1Z2dlc3QgdG8gYWRkIHRvIHRoaXMgZ3JvdXAnIH0sCiAgICBjbGVhblJpZ2h0SG9uZ2Jhb1Jhbms6IHsgY246ICforqnnuqLljIXpo54nLCB0dzogJ+iuk+e0heWMhemjmycsIGVuOiAn6K6p57qi5YyF6aOeIChSZWQgRW52ZWxvcGUpJyB9LAogICAgY2xlYW5SaWdodEF0dEZlZWQ6IHsgY246ICflpb3lj4vlhbPms6jliqjmgIEge3tpfX0nLCB0dzogJ+WlveWPi+mXnOazqOWLleaFiyB7e2l9fScsIGVuOiAiRnJpZW5kcycgQXR0ZW50aW9uIHt7aX19IiB9LAogICAgY2xlYW5SaWdodEF0dEZlZWREZXRhaWw6IHsKICAgICAgY246ICflvIDlkK/or6XpmpDol4/pgInpobnlj6rog73orqnmgqjoh6rlt7HkuI3lho3nnIvliLDigJzlpb3lj4vlhbPms6jliqjmgIHigJ3mqKHlnZfvvIzlubbkuI3og73pmLvmraLmgqjlh7rnjrDlnKjliKvkurrnmoTigJzlpb3lj4vlhbPms6jliqjmgIHigJ3kuK3jgIInLAogICAgfSwKICAgIGNsZWFuUmlnaHROb3RpY2U6IHsgY246ICflhazlkYrmoI8nLCB0dzogJ+WFrOWRiuashCcsIGVuOiAnQnVsbGV0aW4gQm9hcmQnIH0sCiAgfSk7CgogIGNsZWFuLkNsZWFuR3JvdXAoJ3JpZ2h0JywgKCkgPT4gaTE4bi5jbGVhblJpZ2h0R3JvdXBUaXRsZSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdpbmZvJywgKCkgPT4gaTE4bi5jbGVhblJpZ2h0SW5mbywgMSwgJyN2Nl9wbF9yaWdodG1vZF9teWluZm8geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3JhbmtzJywgKCkgPT4gaTE4bi5jbGVhblJpZ2h0UmFua3MsIDEsICcjdjZfcGxfcmlnaHRtb2RfcmFuaywgW3lhd2YtaWQ9InJpZ2h0bW9kX3Rhb2Jhb19tb3ZpZSJdLCBbeWF3Zi1pZD0icmlnaHRtb2RfcmVjb21fbW92aWUiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNvbnN0IGhvdFNlYXJjaCA9IGNsZWFuLkNsZWFuUnVsZSgnaG90X3RvcGljJywgKCkgPT4gaTE4bi5jbGVhblJpZ2h0SG90VG9waWMsIDEsICdbeWF3Zi1pZD0icmlnaHRtb2RfenRfaG90dG9waWMiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScsIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSk7CiAgY29uc3QgaW50ZXJlc3RlZCA9IGNsZWFuLkNsZWFuUnVsZSgnaW50ZXJlc3QnLCAoKSA9PiBpMThuLmNsZWFuUmlnaHRJbnRlcmVzdCwgMSwgJ1t5YXdmLWlkPSJyaWdodG1vZF9yZWNvbV9pbnRlcmVzdCJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywgeyB3ZWlib1ZlcnNpb246IFs2LCA3XSB9KTsKICBjbGVhbi5DbGVhblJ1bGUoJ21lbWJlcicsICgpID0+IGkxOG4uY2xlYW5SaWdodE1lbWJlciwgMSwgJyN2Nl90cnVzdFBhZ2VsZXRfcmVjb21fbWVtYmVyIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdncm91cHMnLCAoKSA9PiBpMThuLmNsZWFuUmlnaHRHcm91cHMsIDEsICcjdjZfcGxfcmlnaHRtb2RfZ3JvdXBzIHsgZGlzcGxheTogbm9uZTsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgncmVjb21fZ3JvdXBfdXNlcicsICgpID0+IGkxOG4uY2xlYW5SaWdodFJlY29tR3JvdXBVc2VyLCAxLCAnI3Y2X3BsX3JpZ2h0bW9kX3JlY29tZ3JvdXB1c2VyIHsgZGlzcGxheTogbm9uZTsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnaG9uZ2Jhb19yYW5rJywgKCkgPT4gaTE4bi5jbGVhblJpZ2h0SG9uZ2Jhb1JhbmssIDEsICcjdjZfcGxfcmlnaHRtb2RfaG9uZ2JhbyB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnYXR0X2ZlZWQnLCAoKSA9PiBpMThuLmNsZWFuUmlnaHRBdHRGZWVkLCAxLCB7CiAgICBhY3NzOiAnI3Y2X3BsX3JpZ2h0bW9kX2F0dGZlZWQgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLAogICAgcmVmOiB7IGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5SaWdodEF0dEZlZWREZXRhaWwgfSB9LAogIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnbm90aWNlJywgKCkgPT4gaTE4bi5jbGVhblJpZ2h0Tm90aWNlLCAxLCAnI3Y2X3BsX3JpZ2h0bW9kX25vdGljZWJvYXJkIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CgogIGNsZWFuLnRhZ0VsZW1lbnRzKCdSaWdodCcsIFsKICAgICcjdHJ1c3RQYWdlbGV0X2luZGV4cmlnaHRfcmVjb20gLldCX3JpZ2h0X21vZHVsZTpub3QoW3lhd2YtaWRdKScsCiAgICAnI3Y2X3BsX3JpZ2h0bW9kX3JlY29taW5mbyAuV0JfY2FyZHdyYXA6bm90KFt5YXdmLWlkXSknLAogICAgJyN2Nl9wbF9yaWdodG1vZF9yYW5rIC5XQl9jYXJkd3JhcDpub3QoW3lhd2YtaWRdKScsCiAgXS5qb2luKCcsJyksIHsKICAgICdbY2hhbmdlLWRhdGEqPSJrZXk9aG90dG9waWNfcjIiXSc6ICdyaWdodG1vZF96dF9ob3R0b3BpYycsCiAgICAnW2NoYW5nZS1kYXRhKj0ia2V5PWludGVyZXN0X3IyIl0nOiAncmlnaHRtb2RfcmVjb21faW50ZXJlc3QnLAogICAgJ2g0Lm9ial9uYW1lIGFbaHJlZio9Im1vdmllLndlaWJvLmNvbSJdJzogJ3JpZ2h0bW9kX3JlY29tX21vdmllJywKICAgICdoNC5vYmpfbmFtZSBhW2hyZWYqPSJ0YW9iYW8uY29tIl1baHJlZio9ImRpYW55aW5nIl0nOiAncmlnaHRtb2RfdGFvYmFvX21vdmllJywKICAgICdoMi5tYWluX3RpdGxlIGFbaHJlZio9ImJvb2sud2VpYm8uY29tL3RvcCJdJzogJ3Y2X3BsX3JpZ2h0bW9kX3JhbmtfYm9vaycsCiAgICAnaDQub2JqX25hbWUgYVtocmVmKj0icG9wLndlaWJvLmNvbSJdJzogJ3Y2X3BsX3JpZ2h0bW9kX3JhbmtfcG9wJywKICAgICdkaXYub2JqX25hbWUgYVtocmVmKj0iMTAwODA4ZmFlY2ViZmY4YTU0Yjk3YTkxNjk5YzY1NGU1ZjRjZGEiXSc6ICd2Nl9wbF9yaWdodG1vZF9yYW5rX2hvbmcnLAogIH0pOwoKICBjbGVhbi5DbGVhblJ1bGVHcm91cCh7CiAgICBjYXJkSG90U2VhcmNoOiBob3RTZWFyY2gsCiAgICBjYXJkSW50ZXJlc3RlZDogaW50ZXJlc3RlZCwKICB9LCBmdW5jdGlvbiAob3B0aW9ucykgewogICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiAhPT0gNykgcmV0dXJuOwogICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHJvb3RLZXksIG9wdGlvbnMpIHsKICAgICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgICAgY29uc3QgdnVlU2V0dXAgPSB5YXdmLnZ1ZVNldHVwOwoKICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdzaWRlJywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgdm0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuY2FyZHNEYXRhOyB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2bS5jYXJkc0RhdGEpKSB7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdm0uY2FyZHNEYXRhLmxlbmd0aDspIHsKICAgICAgICAgICAgICBpZiAob3B0aW9uc1t2bS5jYXJkc0RhdGFbaV0uY2FyZF90eXBlXSkgewogICAgICAgICAgICAgICAgdm0uY2FyZHNEYXRhLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICB9IGVsc2UgaSsrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgeyBpbW1lZGlhdGU6IHRydWUgfSk7CiAgICAgIH0pOwogICAgfSwgdXRpbC5pbmplY3Qucm9vdEtleSwgb3B0aW9ucyk7CiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvY2xlYW4vZmVlZC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgY2xlYW4gPSB5YXdmLnJ1bGVzLmNsZWFuOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGNsZWFuRmVlZEdyb3VwVGl0bGU6IHsgY246ICfpmpDol4/mqKHlnZcgLSDlvq7ljZrlhoUnLCB0dzogJ+maseiXj+aooee1hCAtIOW+ruWNmuWFpycsIGVuOiAnSGlkZSBtb2R1bGVzIC0gV2VpYm8nIH0sCiAgICBjbGVhbkZlZWRSZWNvbW1lbmQ6IHsgY246ICfnsr7lvanlvq7ljZrmjqjojZAnLCB0dzogJ+eyvuW9qeW+ruWNmuaOqOiWpicsIGVuOiAnRmVlZCB5b3UgbWF5IGludGVyZXN0ZWQgaW4nIH0sCiAgICBjbGVhbkZlZWRPdXRlclRpcDogeyBjbjogJ+a2iOaBr+a1geaPkOekuuaoquW5hSB7e2l9fScsIHR3OiAn5raI5oGv5rWB5o+Q56S65qmr5bmFIHt7aX19JywgZW46ICdUaXBzIGZvciBmZWVkIHt7aX19JyB9LAogICAgY2xlYW5GZWVkT3V0ZXJUaXBEZXRhaWw6IHsKICAgICAgY246ICfmtojmga/mtYHlhoXpg6jnmoTmj5DnpLrmqKrluYXvvIzlpoLigJwg57O757uf5o+Q56S677ya5qC55o2u5L2g55qE5bGP6JS96K6+572u77yM57O757uf5bey6L+H5ruk5o6J6YOo5YiG5b6u5Y2a44CC4oCd562J5YaF5a6544CCJywKICAgIH0sCiAgICBjbGVhbkZlZWRDb21tZW50VGlwOiB7IGNuOiAn6K+E6K665qGG5o+Q56S65qiq5bmFIHt7aX19JywgdHc6ICfoqZXoq5bmoYbmj5DnpLrmqavluYUge3tpfX0nLCBlbjogJ1RpcHMgZm9yIGNvbW1lbnQge3tpfX0nIH0sCiAgICBjbGVhbkZlZWRDb21tZW50VGlwRGV0YWlsOiB7CiAgICAgIGNuOiAn57uP5bi45Ye6546w5Zyo6K+E6K665qGG5LiK5pa555qE5qiq5bmF77yM6YCa5bi45YyF5ZCr5aaC4oCc5b6u5Y2a56S+5Yy6566h55CG5Lit5b+D5Li+5oql5aSE55CG5aSn5Y6F77yM5qyi6L+O5p+l6ZiF77yB4oCd562J5YaF5a6544CCJywKICAgIH0sCiAgICBjbGVhbkZlZWRHcm91cFRpcDogeyBjbjogJ+mhtumDqOWIhue7hOaIluWlveWPi+WciOaPkOmGkicsIHR3OiAn6aCC6YOo5YiG57WE5oiW5aW95Y+L5ZyI5o+Q6YaSJywgZW46ICdUaXBzIGZvciBGZWVkIGZvciBncm91cHMgb3IgZnJpZW5kcycgfSwKICAgIGNsZWFuRmVlZFZJUEJhY2tncm91bmQ6IHsgY246ICfoh6rlrprkuYnljaHniYfog4zmma8nLCB0dzogJ+iHquioguWNoeeJh+iDjOaZrycsIGVuOiAnQ3VzdG9taXplZCBDYXJkIEJhY2tncm91bmQnIH0sCiAgICBjbGVhbkZlZWRMYXN0UGljOiB7IGNuOiAn5Zu+54mH5YiX6KGo5bCB5bqVJywgdHc6ICflnJbniYfmuIXllq7lsIHlupUnLCBlbjogJ0JhY2sgY292ZXIgb2YgcGljdHVyZSBsaXN0JyB9LAogICAgY2xlYW5GZWVkUGljVGFnOiB7IGNuOiAn5Zu+54mH5qCH562+JywgdHc6ICflnJbniYfmqJnnsaQnLCBlbjogJ1RhZ3MgZm9yIHBpY3R1cmUnIH0sCiAgICBjbGVhbkZlZWRTb25UaXRsZTogeyBjbjogJ+WQjOa6kOi9rOWPkeWQiOW5tuaPkOekuicsIHR3OiAn5ZCM5rqQ6L2s5Y+R5ZCI5bm25o+Q56S6JywgZW46ICdNZXJnZWQgZm9yd2FyZHMnIH0sCiAgICBjbGVhbkZlZWRDYXJkOiB7IGNuOiAn5b6u5Y2a5Y2h54mHIHt7aX19JywgdHc6ICflvq7ljZrljaHniYcge3tpfX0nLCBlbjogJ0ZlZWQgQ2FyZHMge3tpfX0nIH0sCiAgICBjbGVhbkZlZWRDYXJkRGV0YWlsOiB7CiAgICAgIGNuOiAn5b6u5Y2a5YaF5a+55YiG5Lqr5YaF5a6555qE5pGY6KaB5o+P6L+w77yM5aaC6K+d6aKY5Y2h54mH44CB6ZW/5b6u5Y2a5Y2h54mH44CB5YiG5Lqr5YaF5a655Y2h54mH562J44CCJywKICAgIH0sCiAgICBjbGVhbkZlZWRBcnRpY2xlUGF5OiB7IGNuOiAn5b6u5Y2a5omT6LWPJywgdHc6ICflvq7ljZrmiZPotY8nLCBlbjogJ0ZlZWQgQWN0aWNsZSBQYXknIH0sCiAgICBjbGVhbkZlZWRUYWc6IHsgY246ICflvq7ljZrmoIfnrb4nLCB0dzogJ+W+ruWNmuaomeexpCcsIGVuOiAnVGFncyBmb3IgRmVlZCcgfSwKICAgIGNsZWFuRmVlZFJlbGF0ZWRMaW5rOiB7IGNuOiAn55u45YWz5b6u5Y2a6ZO+5o6lIHt7aX19JywgdHc6ICfnm7jpl5zlvq7ljZrpgKPntZAge3tpfX0nLCBlbjogJ1JlbGF0ZWQgZmVlZHMgTGluayB7e2l9fScgfSwKICAgIGNsZWFuRmVlZFJlbGF0ZWRMaW5rRGV0YWlsOiB7IGNuOiAn5L2N5LqO5b6u5Y2a5bqV6YOo55qE5qC55o2u5b6u5Y2a5q2j5paH5YaF5a6555qE5YWz6ZSu5a2X6Ieq5Yqo55Sf5oiQ55qE6K+d6aKY44CB55S15b2x562J55qE6ZO+5o6l44CCJyB9LAogICAgY2xlYW5GZWVkU291cmNlOiB7IGNuOiAn5p2l5rqQJywgdHc6ICfkvobmupAnLCBlbjogJ1NvdXJjZScgfSwKICAgIGNsZWFuRmVlZFNvdXJjZURldGFpbDogewogICAgICBjbjogJ+W7uuiuruaCqOS/neeVmea2iOaBr+adpea6kOS7peaWueS+v+aMieeFp+a2iOaBr+adpea6kOi/h+a7pOW+ruWNmuOAgumakOiXj+a2iOaBr+adpea6kOS4jeS8muW9seWTjeWvueW6lOi/h+a7pOinhOWImeeahOW3peS9nOOAgicsCiAgICB9LAogICAgY2xlYW5GZWVkUG9wOiB7IGNuOiAn6ZiF6K+75pWw5ZKM5o6o5bm/JywgdHc6ICfplrHoroDmlbjlkozmjqjlu6MnLCBlbjogJ1JlYWRpbmcgQ291bnQgJmFtcDsgUHJvbW90ZScgfSwKICAgIGNsZWFuRmVlZExpa2U6IHsgY246ICfotZ4gLSDlvq7ljZonLCB0dzogJ+iumiAtIOW+ruWNmicsIGVuOiAnTGlrZSAtIEZlZWQnIH0sCiAgICBjbGVhbkZlZWRMaWtlQ29tbWVudDogeyBjbjogJ+i1niAtIOivhOiuuicsIHR3OiAn6K6aIC0g6KmV6KuWJywgZW46ICdMaWtlIC0gQ29tbWVudCcgfSwKICAgIGNsZWFuRmVlZExpa2VBdHRpdHVkZTogeyBjbjogJ+i1niAtIOihqOaDhScsIHR3OiAn6K6aIC0g6KGo5oOFJywgZW46ICdMaWtlIC0gQXR0aXR1ZGUnIH0sCiAgICBjbGVhbkZlZWRGb3J3YXJkOiB7IGNuOiAn6L2s5Y+RJywgdHc6ICfovYnnmbwnLCBlbjogJ0ZvcndhcmQnIH0sCiAgICBjbGVhbkZlZWRGYXN0UmVwb3N0OiB7IGNuOiAn5b+r6L2sJyB9LAogICAgY2xlYW5GZWVkRmF2b3JpdGU6IHsgY246ICfmlLbol48nLCB0dzogJ+aUtuiXjycsIGVuOiAnRmF2b3JpdGUnIH0sCiAgICBjbGVhbkZlZWRQcm9tb3RlT3RoZXI6IHsgY246ICfluK7kuIrlpLTmnaEnLCB0dzogJ+W4ruS4iuWktOadoScsIGVuOiAn5biu5LiK5aS05p2hJyB9LAogICAgY2xlYW5GZWVkUmVwb3J0OiB7IGNuOiAn5Li+5oqlJywgaGs6ICfoiInloLEnLCB0dzogJ+iIieWgsS/mqqLoiIknLCBlbjogJ1JlcG9ydCcgfSwKICAgIGNsZWFuRmVlZFVzZUNhcmRCYWNrZ3JvdW5kOiB7IGNuOiAn5L2/55So5q2k5Y2h54mH6IOM5pmvJywgdHc6ICfkvb/nlKjmraTljaHniYfog4zmma8nLCBlbjogJ+S9v+eUqOatpOWNoeeJh+iDjOaZrycgfSwKICB9KTsKCiAgY2xlYW4uQ2xlYW5Hcm91cCgnZmVlZCcsICgpID0+IGkxOG4uY2xlYW5GZWVkR3JvdXBUaXRsZSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdyZWNvbW1lbmQnLCAoKSA9PiBpMThuLmNsZWFuRmVlZFJlY29tbWVuZCwgMSwgJ1tub2RlLXR5cGU9InJlY29tbWZlZWQiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnZmVlZF9vdXRlcl90aXAnLCAoKSA9PiBpMThuLmNsZWFuRmVlZE91dGVyVGlwLCAxLCB7CiAgICBhY3NzOiAnLldCX2ZlZWQgPiAuV190aXBzIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywKICAgIHJlZjogeyBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5GZWVkT3V0ZXJUaXAgfSB9LAogIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnZmVlZF90aXAnLCAoKSA9PiBpMThuLmNsZWFuRmVlZENvbW1lbnRUaXAsIDEsIHsKICAgIGFjc3M6ICdbbm9kZS10eXBlPSJmZWVkX3ByaXZhdGVzZXRfdGlwIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLAogICAgcmVmOiB7IGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jbGVhbkZlZWRDb21tZW50VGlwRGV0YWlsIH0gfSwKICB9KTsKICBjbGVhbi5DbGVhblJ1bGUoJ2dyb3VwX3RpcCcsICgpID0+IGkxOG4uY2xlYW5GZWVkR3JvdXBUaXAsIDEsICcuV0JfZmVlZF90eXBlIC5XQl9jYXJkdGl0bGVfYiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgndmlwX2JhY2tncm91bmQnLCAoKSA9PiBpMThuLmNsZWFuRmVlZFZJUEJhY2tncm91bmQsIDEsIGAKLldCX2ZlZWRfZGV0YWlsW3N0eWxlKj0iZmVlZF9jb3Zlci9zdGFyXyJdLAouV0JfZmVlZF9kZXRhaWxbc3R5bGUqPSJmZWVkX2NvdmVyL3ZpcF8iXSB7IGJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDsgfQouV0JfdmlwY292ZXIsIC5XQl9zdGFyY292ZXIgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KLldCX2ZlZWRfdmlwY292ZXIgLldCX2ZlZWRfZGV0YWlsIHsgcGFkZGluZy10b3A6IDEwcHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF92aXBjb3ZlciAuV0JfZmVlZF9kZXRhaWwgeyBwYWRkaW5nLXRvcDogMjBweDsgfQpgKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2xhc3RfcGljJywgKCkgPT4gaTE4bi5jbGVhbkZlZWRMYXN0UGljLCAxLCBmdW5jdGlvbiAoKSB7CiAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIGhpZGVMYXN0UGljKCkgewogICAgICBjb25zdCBsYXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLldCX2ZlZWRfdHlwZSAuV0JfZXhwYW5kX21lZGlhIC5XQl9tZWRpYV92aWV3Om5vdChbeWF3Zi1waWNsYXN0XSkgLnBpY19jaG9vc2VfYm94IGxpOmxhc3QtY2hpbGQgYS5jdXJyZW50Jyk7CiAgICAgIGlmIChsYXN0KSBsYXN0LmNsb3Nlc3QoJy5XQl9tZWRpYV92aWV3Jykuc2V0QXR0cmlidXRlKCd5YXdmLXBpY2xhc3QnLCAneWF3Zi1waWNsYXN0Jyk7CiAgICAgIGNvbnN0IG5vdExhc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuV0JfZmVlZF90eXBlIC5XQl9leHBhbmRfbWVkaWEgLldCX21lZGlhX3ZpZXdbeWF3Zi1waWNsYXN0XSAucGljX2Nob29zZV9ib3ggbGk6bm90KDpsYXN0LWNoaWxkKSBhLmN1cnJlbnQnKTsKICAgICAgaWYgKG5vdExhc3QpIG5vdExhc3QuY2xvc2VzdCgnLldCX21lZGlhX3ZpZXcnKS5yZW1vdmVBdHRyaWJ1dGUoJ3lhd2YtcGljbGFzdCcpOwogICAgICBjb25zdCBjbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl9mZWVkX3R5cGUgLldCX2V4cGFuZF9tZWRpYSAuV0JfbWVkaWFfdmlldyAuYXJ0d29ya19ib3ggLmZpY29uX2Nsb3NlICcpOwogICAgICBpZiAoY2xvc2UpIGNsb3NlLmNsaWNrKCk7CiAgICB9KTsKICAgIGNzcy5hcHBlbmQoJy5XQl9mZWVkX3R5cGUgLldCX2V4cGFuZF9tZWRpYSAuV0JfbWVkaWFfdmlld1t5YXdmLXBpY2xhc3RdIC5yaWdodGN1cnNvciB7IGN1cnNvcjogdXJsKCIvL2ltZy50LnNpbmFqcy5jbi90Ni9zdHlsZS9pbWFnZXMvY29tbW9uL3NtYWxsLmN1ciIpLCBhdXRvICFpbXBvcnRhbnQ7IH0nKTsKICB9KTsKICBjbGVhbi5DbGVhblJ1bGUoJ3BpY190YWcnLCAoKSA9PiBpMThuLmNsZWFuRmVlZFBpY1RhZywgMSwgJy5XQl9tZWRpYV92aWV3IC5tZWRpYV9zaG93X2JveCAuYXJ0d29ya19ib3ggLnRhZ19zaG93cGljTCwgLldCX21lZGlhX3ZpZXcgLm1lZGlhX3Nob3dfYm94IC5hcnR3b3JrX2JveCAudGFnX3Nob3dwaWNSLCAuaWNvbl90YWdlZF9waWMgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3Nvbl90aXRsZScsICgpID0+IGkxOG4uY2xlYW5GZWVkU29uVGl0bGUsIDEsICcuV0JfZmVlZF90eXBlIC5XQl9mZWVkX3RvZ2V0aGVyIC53ZnRfaGQgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2NhcmQnLCAoKSA9PiBpMThuLmNsZWFuRmVlZENhcmQsIDEsIHsKICAgIGFjc3M6ICcuV0JfcGljX2FwcCwgLldCX2ZlZWRfc3BlYywgLldCX211c2ljIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywKICAgIHJlZjogeyBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5GZWVkQ2FyZERldGFpbCB9IH0sCiAgfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdhcnRpY2xlX3BheScsICgpID0+IGkxOG4uY2xlYW5GZWVkQXJ0aWNsZVBheSwgMSwgZnVuY3Rpb24gKCkgewogICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBoaWRlQXJ0aWNsZVBheSgpIHsKICAgICAgY29uc3QgZWxlbWVudDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVlZF9hcHBfYnRuX2EgYVthY3Rpb24tZGF0YSo9InB4LmUud2VpYm8uY29tIl0nKTsKICAgICAgaWYgKGVsZW1lbnQxKSBlbGVtZW50MS5jbG9zZXN0KCcuZmVlZF9hcHBfYnRuX2EnKS5yZW1vdmUoKTsKICAgICAgY29uc3QgZWxlbWVudDIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuV0JfY2FyZHdyYXAgI3BsX2FydGljbGVfYXJ0aWNsZVBheScpOwogICAgICBpZiAoZWxlbWVudDIpIGVsZW1lbnQyLmNsb3Nlc3QoJy5XQl9jYXJkd3JhcCcpLnJlbW92ZSgpOwogICAgICBjb25zdCBlbGVtZW50MyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZXdhcmRjb21wb25lbnQgYVthY3Rpb24tdHlwZT0iYnV5V3JhcCJdW2FjdGlvbi1kYXRhKj0idHlwZT1yZXdhcmQiXScpOwogICAgICBpZiAoZWxlbWVudDMpIGVsZW1lbnQzLmNsb3Nlc3QoJy5yZXdhcmRjb21wb25lbnQnKS5jbG9zZXN0KCc6bm90KDpvbmx5LWNoaWxkKScpLnJlbW92ZSgpOwogICAgfSk7CiAgfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCd0YWcnLCAoKSA9PiBpMThuLmNsZWFuRmVlZFRhZywgMSwgJy5XQl90YWcgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3JlbGF0ZWRfbGluaycsICgpID0+IGkxOG4uY2xlYW5GZWVkUmVsYXRlZExpbmssIDEsIHsKICAgIGFjc3M6ICcuV0JfZmVlZF90eXBlIC5XQl90YWdfcmVjIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywKICAgIHJlZjogeyBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5GZWVkUmVsYXRlZExpbmtEZXRhaWwgfSB9LAogIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnc291cmNlJywgKCkgPT4gaTE4bi5jbGVhbkZlZWRTb3VyY2UsIDEsIHsKICAgIGFjc3M6IGAKLnlhd2YtV0JWNyAueWF3Zi1mZWVkLXNvdXJjZS1jb250YWluZXIgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KCi55YXdmLVdCVjYgLldCX2ZlZWRfZGV0YWlsIC5XQl9mcm9tIHsgaGVpZ2h0OiAyNnB4OyBvdmVyZmxvdzogaGlkZGVuOyB9Ci55YXdmLVdCVjYgLldCX2ZlZWRfZGV0YWlsIC5XQl9mZWVkX2V4cGFuZCAuV0JfZnJvbSB7IGhlaWdodDogMTZweDsgfQoueWF3Zi1XQlY2IC5XQl9mZWVkX2RldGFpbCAuV0JfZnJvbTo6YmVmb3JlIHsgY29udGVudDogIiAiOyBkaXNwbGF5OiBibG9jazsgZmxvYXQ6IGxlZnQ7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDMwcHg7IH0KLnlhd2YtV0JWNiAuV0JfZmVlZF9kZXRhaWwgLldCX2Zyb20gYVtkYXRlXSwKLnlhd2YtV0JWNiAuV0JfZmVlZF9kZXRhaWwgLldCX2Zyb20gYVt5YXdmLWRhdGVdLAoueWF3Zi1XQlY2IC5XQl9mZWVkX2RldGFpbCAuV0JfZnJvbSBzcGFuW3RpdGxlXSwKLnlhd2YtV0JWNiAuV0JfZmVlZF9kZXRhaWwgLldCX2Zyb20gLnlhd2YtZWRpdGVkIHsgZmxvYXQ6IGxlZnQ7IHBvc2l0aW9uOiByZWxhdGl2ZTsgdG9wOiAtMzBweDsgfQoueWF3Zi1XQlY2IC5XQl9mZWVkX2RldGFpbCAuV0JfZnJvbSBhW2RhdGVdOjphZnRlciwKLnlhd2YtV0JWNiAuV0JfZmVlZF9kZXRhaWwgLldCX2Zyb20gYVt5YXdmLWRhdGVdOjphZnRlciB7IGNvbnRlbnQ6ICIgIjsgfQpgLAogICAgcmVmOiB7IGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5GZWVkU291cmNlRGV0YWlsIH0gfSwKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgncG9wJywgKCkgPT4gaTE4bi5jbGVhbkZlZWRQb3AsIDEsIGAKLldCX2ZlZWRfZGF0YWlsIGFbYWN0aW9uLXR5cGU9ImZsX3BvcCJdLCAuV0JfZmVlZF9kYXRhaWwgYVthY3Rpb24tdHlwZT0iZmxfcG9wIl0rLlNfdHh0MywgCi5XQl9oYW5kbGUgbGlbeWF3Zi1oYW5kbGUtdHlwZT0iZmxfcG9wIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH1gKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2xpa2UnLCAoKSA9PiBpMThuLmNsZWFuRmVlZExpa2UsIDEsIGAKLnlhd2YtV0JWNyAueWF3Zi1mZWVkLXRvb2xiYXItbGlrZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQoKLnlhd2YtV0JWNiBhW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfbGlrZSJdLAoueWF3Zi1XQlY2IGFbYWN0aW9uLXR5cGU9ImZlZWRfbGlzdF9saWtlIl0rLlNfdHh0MywgCi55YXdmLVdCVjYgW25vZGUtdHlwZT0ibXVsdGlfaW1hZ2VfbGlrZSJdLAoueWF3Zi1XQlY2IFthY3Rpb24tdHlwZT0iZmVlZF9saXN0X2ltYWdlX2xpa2UiXSwgCi55YXdmLVdCVjYgW2FjdGlvbi10eXBlPSJvYmplY3RfbGlrZSJdLCBbYWN0aW9uLXR5cGU9Imxpa2Vfb2JqZWN0Il0sIAoueWF3Zi1XQlY2IC5XQl9mZWVkX2RhdGFpbCBhW2FjdGlvbi10eXBlPSJmbF9saWtlIl0sCi55YXdmLVdCVjYgLldCX2ZlZWRfZGF0YWlsIGFbYWN0aW9uLXR5cGU9ImZsX2xpa2UiXSsuU190eHQzLCAKLnlhd2YtV0JWNiAuV0JfZXhwYW5kIC5XQl9oYW5kbGUuV19mciBsaTpudGgtY2hpbGQoMyksIAoueWF3Zi1XQlY2IC5XQl9oYW5kbGUgbGlbeWF3Zi1oYW5kbGUtdHlwZT0iZmxfbGlrZSJdLAoueWF3Zi1XQlY2IC5XQl9oYW5kbGUgbGlbeWF3Zi1oYW5kbGUtdHlwZT0ibGlrZSJdIC5sYXllcl9tdWx0aXBpY19wcmV2aWV3IC5wb3NfaWNvbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfWAsIHsgd2VpYm9WZXJzaW9uOiBbNiwgN10gfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdsaWtlX2NvbW1lbnQnLCAoKSA9PiBpMThuLmNsZWFuRmVlZExpa2VDb21tZW50LCAxLCBgCi55YXdmLVdCVjcgLnlhd2YtZmVlZC1jb21tZW50LWljb24tbGlzdCBbeWF3Zi1pY29uLWxpc3QtbmFtZT0ibGlrZSJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CgoueWF3Zi1XQlY2IC5XQl9oYW5kbGUgbGlbeWF3Zi1jb21tZW50LWhhbmRsZS10eXBlPSJsaWtlIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH1gLCB7IHdlaWJvVmVyc2lvbjogWzYsIDddIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnbGlrZV9hdHRpdHVkZScsICgpID0+IGkxOG4uY2xlYW5GZWVkTGlrZUF0dGl0dWRlLCAxLCAnLldfbGF5ZXJfYXR0aXR1ZGUgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2ZvcndhcmQnLCAoKSA9PiBpMThuLmNsZWFuRmVlZEZvcndhcmQsIDEsIGAKLnlhd2YtV0JWNyAueWF3Zi1mZWVkLXRvb2xiYXItcmV0d2VldCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQoKLnlhd2YtV0JWNiBhW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfZm9yd2FyZCJdLCBhW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfZm9yd2FyZCJdKy5TX3R4dDMsCi55YXdmLVdCVjYgLldCX21lZGlhX2V4cGFuZCAuV0JfaGFuZGxlIGEuU19mdW5jNFtocmVmJD0iP3R5cGU9cmVwb3N0Il0sIC5XQl9tZWRpYV9leHBhbmQgLldCX2hhbmRsZSBhLlNfZnVuYzRbaHJlZiQ9Ij90eXBlPXJlcG9zdCJdKy5TX3R4dDMsIAoueWF3Zi1XQlY2IC5XQl9mZWVkX2RhdGFpbCBhW2FjdGlvbi10eXBlPSJmbF9mb3J3YXJkIl0sIC5XQl9mZWVkX2RhdGFpbCBhW2FjdGlvbi10eXBlPSJmbF9mb3J3YXJkIl0rLlNfdHh0MywgCi55YXdmLVdCVjYgLldCX2V4cGFuZCAuV0JfaGFuZGxlLldfZnIgbGk6bnRoLWNoaWxkKDEpLCAKLnlhd2YtV0JWNiAuV0JfaGFuZGxlIGxpW3lhd2YtaGFuZGxlLXR5cGU9ImZsX2ZvcndhcmQiXSwgLldCX2hhbmRsZSBsaVt5YXdmLWhhbmRsZS10eXBlPSJ0YWIiXTpudGgtY2hpbGQoMikgCi55YXdmLVdCVjYgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH1gLCB7IHdlaWJvVmVyc2lvbjogWzYsIDddIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnZmFzdF9yZXBvc3QnLCAoKSA9PiBpMThuLmNsZWFuRmVlZEZhc3RSZXBvc3QsIDgzLCB7IHdlaWJvVmVyc2lvbjogNyB9KTsgLy8g5a6e546w5ZyoIHJlbmRlcgogIGNsZWFuLkNsZWFuUnVsZSgnZmF2b3JpdGUnLCAoKSA9PiBpMThuLmNsZWFuRmVlZEZhdm9yaXRlLCAxLCBgCmFbYWN0aW9uLXR5cGU9ImZlZWRfbGlzdF9mYXZvcml0ZSJdLCBhW2FjdGlvbi10eXBlPSJmZWVkX2xpc3RfZmF2b3JpdGUiXSsuU190eHQzLAouV0JfZmVlZF9kYXRhaWwgYVthY3Rpb24tdHlwZT0iZmxfZmF2b3JpdGUiXSwgLldCX2ZlZWRfZGF0YWlsIGFbYWN0aW9uLXR5cGU9ImZsX2Zhdm9yaXRlIl0rLlNfdHh0MywgCi5XQl9oYW5kbGUgLldCX3Jvd19saW5lIGxpW3lhd2YtaGFuZGxlLXR5cGU9ImZsX2Zhdm9yaXRlIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH1gKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3Byb21vdGVfb3RoZXInLCAoKSA9PiBpMThuLmNsZWFuRmVlZFByb21vdGVPdGhlciwgMSwgJy5zY3JlZW5fYm94IC5sYXllcl9tZW51X2xpc3QgYVthY3Rpb24tZGF0YSo9InByb21vdGUudmlwLndlaWJvLmNvbSJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdyZXBvcnQnLCAoKSA9PiBpMThuLmNsZWFuRmVlZFJlcG9ydCwgMSwgJy5zY3JlZW5fYm94IC5sYXllcl9tZW51X2xpc3QgYVtvbmNsaWNrKj0ic2VydmljZS5hY2NvdW50LndlaWJvLmNvbS9yZXBvcnRzcGFtIl0sIC5XQl9oYW5kbGUgdWwgbGlbeWF3Zi1jb21tZW50LWhhbmRsZS10eXBlPSJyZXBvcnQiXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgndXNlX2NhcmRfYmFja2dyb3VuZCcsICgpID0+IGkxOG4uY2xlYW5GZWVkVXNlQ2FyZEJhY2tncm91bmQsIDEsICcuc2NyZWVuX2JveCAubGF5ZXJfbWVudV9saXN0IGFbYWN0aW9uLXR5cGU9ImZsX2NhcmRDb3ZlciJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CgogIG9ic2VydmVyLmZlZWQub25CZWZvcmUoZnVuY3Rpb24gKGZlZWQpIHsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gIT09IDYpIHJldHVybjsKICAgIGNvbnN0IGxpcyA9IEFycmF5LmZyb20oZmVlZC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZmVlZF90eXBlIC5XQl9oYW5kbGUgLldCX3Jvd19saW5lIGxpLCAuV0JfZmVlZF90b2dldGhlciAuV0JfZnVuYyAuV0JfaGFuZGxlIGxpJykpOwogICAgbGlzLmZvckVhY2gobGkgPT4gewogICAgICBsZXQgdHlwZSA9IGxpLnF1ZXJ5U2VsZWN0b3IoJ2EnKS5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi10eXBlJyk7CiAgICAgIGlmICghdHlwZSAmJiBsaS5xdWVyeVNlbGVjdG9yKCdhW3N1ZGEtdWF0cmFjaz0ia2V5PXByb2ZpbGVfZmVlZCZ2YWx1ZT1wb3B1bGFyaXplX2hvc3QiXScpKSB0eXBlID0gJ2ZsX3BvcCc7CiAgICAgIGlmICghdHlwZSAmJiBsaS5xdWVyeVNlbGVjdG9yKCdzcGFuW3RpdGxlKj0i6K+E6K66Il0sIHNwYW5bdGl0bGUqPSLoqZXoq5YiXSwgc3Bhblt0aXRsZSo9ImNvbW1lbnQiXScpKSB0eXBlID0gJ2ZsX2NvbW1lbnQnOyAvLyDnlLHkuo7nlKjmiLforr7nva7vvIzml6Dms5Xov5vooYzor4TorroKICAgICAgbGkuc2V0QXR0cmlidXRlKCd5YXdmLWhhbmRsZS10eXBlJywgdHlwZSk7CiAgICB9KTsKICAgIGNvbnN0IGZ3bGkgPSBBcnJheS5mcm9tKGZlZWQucXVlcnlTZWxlY3RvckFsbCgnLldCX2ZlZWRfZXhwYW5kIC5XQl9mdW5jIC5XQl9oYW5kbGUgbGknKSk7CiAgICBpZiAoZndsaS5sZW5ndGggPT09IDMpIGZ3bGkuZm9yRWFjaChmdW5jdGlvbiAobGksIGluZGV4KSB7CiAgICAgIGxpLnNldEF0dHJpYnV0ZSgneWF3Zi1oYW5kbGUtdHlwZScsIFsnZmxfZm9yd2FyZCcsICdmbF9jb21tZW50JywgJ2ZsX2xpa2UnXVtpbmRleF0pOwogICAgfSk7IGVsc2UgaWYgKGZ3bGkubGVuZ3RoID09PSA0KSBmd2xpLmZvckVhY2goZnVuY3Rpb24gKGxpLCBpbmRleCkgewogICAgICBsaS5zZXRBdHRyaWJ1dGUoJ3lhd2YtaGFuZGxlLXR5cGUnLCBbJ2ZsX3JlYWQnLCAnZmxfZm9yd2FyZCcsICdmbF9jb21tZW50JywgJ2ZsX2xpa2UnXVtpbmRleF0pOwogICAgfSk7CiAgfSk7CgogIC8vIOagh+iusOW+ruWNmuivhOiuuuaMiemSrgogIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gbWFya0NvbW1lbnRCdXR0b24oKSB7CiAgICBjb25zdCBjbGkgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoWwogICAgICAnLmxpc3RfdWxbbm9kZS10eXBlPSJmZWVkX2xpc3RfY29tbWVudExpc3QiXSAuV0JfaGFuZGxlIHVsIGxpOm5vdChbeWF3Zi1jb21tZW50LWhhbmRsZS10eXBlXSknLAogICAgICAnLmxpc3RfdWxbbm9kZS10eXBlPSJjb21tZW50X2xpc3QiXSAuV0JfaGFuZGxlIHVsIGxpOm5vdChbeWF3Zi1jb21tZW50LWhhbmRsZS10eXBlXSknLAogICAgICAnLldCX2ZlZWRfY29tbWVudCAuV0JfaGFuZGxlIHVsIGxpOm5vdChbeWF3Zi1jb21tZW50LWhhbmRsZS10eXBlXSknLAogICAgXS5qb2luKCcsJykpKTsKICAgIGNsaS5mb3JFYWNoKGxpID0+IHsKICAgICAgY29uc3QgYSA9IGxpLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsKICAgICAgbGV0IHR5cGUgPSBudWxsOwogICAgICBpZiAoYS5tYXRjaGVzKCdbb25jbGljayo9InNlcnZpY2UuYWNjb3VudC53ZWliby5jb20vcmVwb3J0c3BhbSJdJykpIHR5cGUgPSAncmVwb3J0JzsKICAgICAgZWxzZSBpZiAoYS5tYXRjaGVzKCdbYWN0aW9uLXR5cGU9ImRlbGV0ZSJdJykpIHR5cGUgPSAnZGVsZXRlJzsKICAgICAgZWxzZSBpZiAoYS5tYXRjaGVzKCdbYWN0aW9uLXR5cGU9ImNvbW1lbnREaWFsb2d1ZSJdJykpIHR5cGUgPSAnY29udmVyc2l0aW9uJzsKICAgICAgZWxzZSBpZiAoYS5tYXRjaGVzKCdbYWN0aW9uLXR5cGU9InJlcGx5Il0nKSkgdHlwZSA9ICdyZXBseSc7CiAgICAgIGVsc2UgaWYgKGEubWF0Y2hlcygnW2FjdGlvbi10eXBlPSJyZXBseWNvbW1lbnQiXScpKSB0eXBlID0gJ3JlcGx5JzsKICAgICAgZWxzZSBpZiAoYS5tYXRjaGVzKCdbYWN0aW9uLXR5cGU9ImZsX2xpa2UiXScpKSB0eXBlID0gJ2xpa2UnOwogICAgICBsaS5zZXRBdHRyaWJ1dGUoJ3lhd2YtY29tbWVudC1oYW5kbGUtdHlwZScsIHR5cGUgfHwgJycpOwogICAgfSk7CiAgfSk7CgogIGNzcy5hcHBlbmQoYApib2R5IC5XQl9oYW5kbGUgdWwgeyBkaXNwbGF5OiBmbGV4OyBmbGV4LXdyYXA6IG5vd3JhcDsgYWxpZ24taXRlbXM6IHN0cmV0Y2g7IG1hcmdpbi1sZWZ0OiAtNHB4OyB9CmJvZHkgLldCX2hhbmRsZSB1bCBsaSB7IGZsZXg6IDEgMSBhdXRvOyBmbG9hdDogbm9uZTsgd2lkdGg6IGF1dG87IH0KYCk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvY2xlYW4vcHJvZmlsZS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgY2xlYW4gPSB5YXdmLnJ1bGVzLmNsZWFuOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGNsZWFuUHJvZmlsZUdyb3VwVGl0bGU6IHsgY246ICfpmpDol4/mqKHlnZcgLSDkuKrkurrkuLvpobUnLCB0dzogJ+maseiXj+aooee1hCAtIOWAi+S6uuS4u+mggScsIGVuOiAnSGlkZSBtb2R1bGVzIC0gUGVyc29uYWwgaG9tZSBwYWdlJyB9LAogICAgY2xlYW5Qcm9maWxlTW92ZVRoaW5nczogeyBjbjogJ+enu+WKqOmDqOS7tu+8iOS8muWRmOaooeadv++8iScsIHR3OiAn56e75YuV6YOo5Lu277yI5pyD5ZOh5qih5p2/77yJJywgZW46ICdNb3ZpbmcgVGhpbmdzIChWSVAgVGVtcGxhdGUpJyB9LAogICAgY2xlYW5Qcm9maWxlQ292ZXI6IHsgY246ICflsIHpnaLlm74nLCB0dzogJ+WwgemdouWclicsIGVuOiAnQ292ZXIgUGljdHVyZScgfSwKICAgIGNsZWFuUHJvZmlsZUJHSW1nOiB7IGNuOiAn6IOM5pmv5Zu+JywgdHc6ICfog4zmma/lnJYnLCBlbjogJ0JhY2tncm91bmQgUGljdHVyZScgfSwKICAgIGNsZWFuUHJvZmlsZUJhZGdlSWNvbjogeyBjbjogJ+WLi+eroCcsIHR3OiAn5Yuz56ugJywgZW46ICdCYWRnZXMnIH0sCiAgICBjbGVhblByb2ZpbGVWZXJpZnk6IHsgY246ICfkuKrkurrotYTmlpnorqTor4EnLCB0dzogJ+WAi+S6uuizh+aWmeiqjeitiScsIGVuOiAnUGVyc29uIEluZm8gVmVyaWZpY2F0aW9uJyB9LAogICAgY2xlYW5Qcm9maWxlRWRpdFBlcnNvbkluZm86IHsgY246ICfnvJbovpHkuKrkurrotYTmlpknLCB0dzogJ+e8lui+keS4quS6uui1hOaWmScsIGVuOiAnRWRpdCBwZXJzb25hbCBpbmZvJyB9LAogICAgY2xlYW5Qcm9maWxlU3RhdHM6IHsgY246ICflhbPms6gv57KJ5LidL+W+ruWNmuaVsCcsIHR3OiAn6Zec5rOoL+eyiee1si/lvq7ljZrmlbgnLCBlbjogJ051bWJlcnMgb2YgRm9sbG93aW5nL0ZvbGxvd2Vycy9XZWlibycgfSwKICAgIGNsZWFuUHJvZmlsZU15RGF0YTogeyBjbjogJ+aIkeeahOW+ruWNmuS6uuawlCcsIHR3OiAn5oiR55qE5b6u5Y2a5Lq65rCjJywgZW46ICdXZWlibyBQb3B1bGFyaXR5JyB9LAogICAgY2xlYW5Qcm9maWxlU3VnZ2VzdFVzZXI6IHsgY246ICflj6/og73mhJ/lhbTotqPnmoTkuronLCB0dzogJ+WPr+iDveaEn+iIiOi2o+eahOS6uicsIGVuOiAnU3VnZ2VzdGVkJyB9LAogICAgY2xlYW5Qcm9maWxlR3JvdXA6IHsgY246ICflhazlvIDliIbnu4QnLCB0dzogJ+WFrOmWi+WIhue1hCcsIGVuOiAnUHVibGljIEdyb3VwcycgfSwKICAgIGNsZWFuUHJvZmlsZVJlbGF0aW9uOiB7IGNuOiAn5b6u5YWz57O7JywgdHc6ICflvq7pl5zkv4InLCBlbjogJ1dlaWJvIHJlbGF0aW9ucycgfSwKICAgIGNsZWFuUHJvZmlsZUFsYnVtOiB7IGNuOiAn55u45YaMJywgdHc6ICfnm7jlhoonLCBlbjogJ0FsYnVtJyB9LAogICAgY2xlYW5Qcm9maWxlSG90VG9waWM6IHsgY246ICfor53popgnLCB0dzogJ+ipsemhjCcsIGVuOiAnVG9waWMnIH0sCiAgICBjbGVhblByb2ZpbGVIb3RXZWlibzogeyBjbjogJ+eDremXqOW+ruWNmicsIHR3OiAn54ax6ZaA5b6u5Y2aJywgZW46ICdIb3QgRmVlZHMnIH0sCiAgICBjbGVhblByb2ZpbGVSZWNvbW1lbmRGZWVkOiB7IGNuOiAn55u45YWz5o6o6I2QJywgdHc6ICfnm7jpl5zmjqjolqYnLCBlbjogJ1JlY29tbWVuZCBGZWVkcycgfSwKICAgIGNsZWFuUHJvZmlsZVVzZXJMaXN0OiB7IGNuOiAn5LiO5LuWL+WlueebuOS8vOeahOS6uicsIHR3OiAn6IiH5LuWL+WlueebuOS8vOeahOS6uicsIGVuOiAnU2ltaWxhciBQZW9wbGUnIH0sCiAgICBjbGVhblByb2ZpbGVIb25nYmFvOiB7IGNuOiAn5b6u5Y2a57qi5YyFJywgdHc6ICflvq7ljZrntIXljIUnLCBlbjogJ1JlZCBwYWNrJyB9LAogICAgY2xlYW5Qcm9maWxlV2Vud29EcjogeyBjbjogJ+eIsemXruWMu+eUnycsIHR3OiAn5oSb5ZWP6Yar55SfJywgZW46ICdJYXNrIG1lZGljYWwnIH0sCiAgICBjbGVhblByb2ZpbGVUaW1lbGluZTogeyBjbjogJ+aXtumXtOi9tCcsIHR3OiAn5pmC6ZaT6Lu4JywgZW46ICdUaW1lbGluZScgfSwKICB9KTsKCiAgY2xlYW4uQ2xlYW5Hcm91cCgncHJvZmlsZScsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlR3JvdXBUaXRsZSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdtb3ZlX3RoaW5ncycsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlTW92ZVRoaW5ncywgMSwgJy5wcm9maWxlX21vdmVfdGhpbmdzIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdjb3ZlcicsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlQ292ZXIsIDEsIGZ1bmN0aW9uICgpIHsKICAgIGNzcy5hcHBlbmQoYAouUENEX2hlYWRlci5QQ0RfaGVhZGVyLCAuUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5wZl93cmFwLCAuUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5zaGFkb3cgeyBoZWlnaHQ6IDEzMHB4OyB9Ci5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLnBmX3Bob3RvIHsgbWFyZ2luOiAxMHB4IDIwcHggMTBweCBjYWxjKDUwJSAtIDI4MHB4KTsgZmxvYXQ6IGxlZnQ7IH0KLlBDRF9oZWFkZXIuUENEX2hlYWRlciAucGZfdXNlcm5hbWUsIC5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLnBmX2ludHJvIHsgdGV4dC1zaGFkb3c6IDAgMCA0cHggIzAwMDsgfQouUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5wZl91c2VybmFtZSwgLlBDRF9oZWFkZXIuUENEX2hlYWRlciAucGZfaW50cm8sIC5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLnBmX29wdCB7IHRleHQtYWxpZ246IGxlZnQ7IG1hcmdpbi1sZWZ0OiAxNDBweDsgfQouUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5wZl93cmFwIC5wZl91c2VfbnVtLCAuUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5wZl93cmFwIC5wZl9jb3B5X2ljb24sIC5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLnVwY292ZXIgeyBkaXNwbGF5OiBub25lOyB9Ci5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLlNfc2hhZG93LCAuUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5jb3Zlcl93cmFwLCAuUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5wZl93cmFwIHsgYmFja2dyb3VuZDogbm9uZSAhaW1wb3J0YW50OyB9Ci5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLnNoYWRvdyB7IG1hcmdpbjogMCBjYWxjKDUwJSAtIDMwMHB4KTsgd2lkdGg6IDYwMHB4OyB9Ci5QQ0RfaGVhZGVyLlBDRF9oZWFkZXIgLnBmX2ludHJvIHsgaGVpZ2h0OiAzNnB4OyBsaW5lLWhlaWdodDogMThweDsgdGV4dC1hbGlnbjogbGVmdDsgdGV4dC1zaGFkb3c6IDAgMCA0cHggIzAwMDsgfQouUENEX2hlYWRlci5QQ0RfaGVhZGVyIC5wZl9vcHQgeyBtYXJnaW4tdG9wOiA4cHg7IHRleHQtYWxpZ246IGxlZnQ7IH0KICAgIGApOwogICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBmdWxsUHJvZmlsZUludHJvZHVjdGlvbigpIHsKICAgICAgY29uc3QgaW50cm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuUENEX2hlYWRlciAucGZfaW50cm86bm90KFt5YXdmLWZ1bGwtaW50cm9dKScpOwogICAgICBpZiAoIWludHJvKSByZXR1cm47CiAgICAgIGludHJvLnNldEF0dHJpYnV0ZSgneWF3Zi1mdWxsLWludHJvJywgKGludHJvLnRleHRDb250ZW50ID0gaW50cm8udGl0bGUpKTsKICAgIH0pOwogIH0pOwogIGNsZWFuLkNsZWFuUnVsZSgnYmdfaW1nJywgKCkgPT4gaTE4bi5jbGVhblByb2ZpbGVCR0ltZywgMSwgJy5TX3BhZ2UsIC5TX3BhZ2UgLldCX21pbmlibG9nIHsgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJcJ1wnIikgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnYmFkZ2VfaWNvbicsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlQmFkZ2VJY29uLCAxLCAnLnBmX2JhZGdlX2ljb24geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3ZlcmlmeScsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlVmVyaWZ5LCAxLCAnW3lhd2YtaWQ9Inlhd2YtcHItcGNkLXBlcnNvbi1pbmZvLW15Il0gLnZlcmlmeV9hcmVhLCBbeWF3Zi1pZD0ieWF3Zi1wci1wY2QtcGVyc29uLWluZm8iXSAudmVyaWZ5X2FyZWEgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2VkaXRfcGVyc29uX2luZm8nLCAoKSA9PiBpMThuLmNsZWFuUHJvZmlsZUVkaXRQZXJzb25JbmZvLCAxLCAnW3lhd2YtaWQ9Inlhd2YtcHItcGNkLXBlcnNvbi1pbmZvLW15Il0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3N0YXRzJywgKCkgPT4gaTE4bi5jbGVhblByb2ZpbGVTdGF0cywgMSwgJ1t5YXdmLWlkPSJ5YXdmLXByLXBjZC1jb3VudGVyIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ215X2RhdGEnLCAoKSA9PiBpMThuLmNsZWFuUHJvZmlsZU15RGF0YSwgMSwgJ1tpZF49IlBsX09mZmljaWFsX015TWljcm93b3JsZF9fIl0sIC5XQl9mcmFtZV9iIFtpZF49IlBsX09mZmljaWFsX015UG9wdWxhcml0eV9fIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3N1Z2dlc3RfdXNlcicsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlU3VnZ2VzdFVzZXIsIDEsICdbaWRePSJQbF9Db3JlX1JpZ2h0VXNlckxpc3RfXyJdLCAuV0JfZnJhbWVfYiBbaWRePSJQbF9Db3JlX1JpZ2h0VXNlckxpc3RfXyJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdncm91cCcsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlR3JvdXAsIDEsICdbaWRePSJQbF9Db3JlX1VzZXJHcmlkX18iXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgncmVsYXRpb24nLCAoKSA9PiBpMThuLmNsZWFuUHJvZmlsZVJlbGF0aW9uLCAxLCAnW2lkXj0iUGxfQ29yZV9SaWdodFVzZXJHcmlkX18iXSwgLldCX2ZyYW1lX2IgW2lkXj0iUGxfQ29yZV9SaWdodFVzZXJHcmlkX18iXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnYWxidW0nLCAoKSA9PiBpMThuLmNsZWFuUHJvZmlsZUFsYnVtLCAxLCAnW2lkXj0iUGxfQ29yZV9SaWdodFBpY011bHRpX18iXSwgLldCX2ZyYW1lX2IgW2lkXj0iUGxfQ29yZV9SaWdodFBpY011bHRpX18iXSwgW3lhd2Ytb2JqLW5hbWU9IuebuOWGiiJdLCBbeWF3Zi1vYmotbmFtZT0i55u45YaMIl0sIFt5YXdmLWlkPSJ5YXdmLWNvcmUtcmlnaHQtcGljLW11bHRpIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2hvdF90b3BpYycsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlSG90VG9waWMsIDEsICdbaWRePSJQbF9Db3JlX1JpZ2h0VGV4dFNpbmdsZV9fIl0sIC5XQl9mcmFtZV9iIFtpZF49IlBsX0NvcmVfUmlnaHRUZXh0U2luZ2xlX18iXSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnaG90X3dlaWJvJywgKCkgPT4gaTE4bi5jbGVhblByb2ZpbGVIb3RXZWlibywgMSwgJ1tpZF49IlBsX0NvcmVfUmlnaHRQaWNUZXh0X18iXSwgLldCX2ZyYW1lX2IgW2lkXj0iUGxfQ29yZV9SaWdodFBpY1RleHRfXyJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdyZWNvbW1lbmRfZmVlZCcsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlUmVjb21tZW5kRmVlZCwgMSwgJy5XQl9mcmFtZV9iIFtpZF49IlBsX0NvcmVfUmVjb21tZW5kRmVlZF9fIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3VzZXJfbGlzdCcsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlVXNlckxpc3QsIDEsICdbaWRePSJQbF9Db3JlX1V0MVVzZXJMaXN0X18iXSwgLldCX2ZyYW1lX2IgW2lkXj0iUGxfQ29yZV9SaWdodFBpY1RleHRfXyJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdob25nYmFvJywgKCkgPT4gaTE4bi5jbGVhblByb2ZpbGVIb25nYmFvLCAxLCAnW3lhd2YtaWQ9Inlhd2YtcHItaG9uZ2JhbyJdLCAuV0JfcmVkMjAxNyB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnd2Vud29fZHInLCAoKSA9PiBpMThuLmNsZWFuUHJvZmlsZVdlbndvRHIsIDEsICdbeWF3Zi1vYmotbmFtZT0i54ix6Zeu5Yy755SfIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsgLy8g5a+55bqU5qih5Z2X5rKh5pyJ57mB5L2T5oiW6Iux5paH57+76K+RCiAgY2xlYW4uQ2xlYW5SdWxlKCd0aW1lbGluZScsICgpID0+IGkxOG4uY2xlYW5Qcm9maWxlVGltZWxpbmUsIDEsICdbaWRePSJQbF9PZmZpY2lhbF9UaW1lQmFzZV9fIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKCiAgY2xlYW4udGFnRWxlbWVudHMoJ1Byb2ZpbGUnLCBbCiAgICAnLldCX2ZyYW1lX2IgPiBkaXY6bm90KDplbXB0eSk6bm90KFt5YXdmLWlkXSknLAogIF0uam9pbignLCcpLCB7CiAgICAnLlBDRF9jb3VudGVyJzogJ3lhd2YtcHItcGNkLWNvdW50ZXInLAogICAgJy5QQ0RfcGVyc29uX2luZm8nOiAneWF3Zi1wci1wY2QtcGVyc29uLWluZm8nLAogICAgJy5QQ0RfcGhvdG9saXN0JzogJ3lhd2YtY29yZS1yaWdodC1waWMtbXVsdGknLAogICAgJy5XQl9jYXJkd3JhcFthY3Rpb24tZGF0YSo9IndlaWJvLmNvbSUyRmhvbmdiYW8iXSc6ICd5YXdmLXByLWhvbmdiYW8nLAogICAgJy5XQl9jYXJkd3JhcFthY3Rpb24tZGF0YSo9InNpbmEuY29tLmNuJTJGaG9uZ2JhbyJdJzogJ3lhd2YtcHItaG9uZ2JhbycsCiAgICAnYVtocmVmKj0iLy9ob25nYmFvLndlaWJvLmNvbS9ob25nYmFvIl0nOiAneWF3Zi1wci1ob25nYmFvJywKICAgICcuUENEX3BlcnNvbl9pbmZvIGEuV0JfY2FyZG1vcmVbaHJlZl49Ii9wLyJdW2hyZWYkPSJpbmZvP21vZD1wZWRpdCJdJzogJ3lhd2YtcHItcGNkLXBlcnNvbi1pbmZvLW15JywKICB9KTsKCiAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiB0YWdQcm9maWxlTGVmdE5hbWVzKCkgewogICAgY29uc3QgdGl0bGVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFsKICAgICAgJy5XQl9mcmFtZV9iID4gZGl2Om5vdChbeWF3Zi1vYmotbmFtZV0pIC5tYWluX3RpdGxlJywKICAgICAgJy5XQl9mcmFtZV9jID4gZGl2Om5vdChbeWF3Zi1vYmotbmFtZV0pIC5tYWluX3RpdGxlJywKICAgIF0uam9pbignLCcpKSk7CiAgICBpZiAoIXRpdGxlcy5sZW5ndGgpIHJldHVybjsKICAgIHRpdGxlcy5mb3JFYWNoKGZ1bmN0aW9uICh0aXRsZSkgewogICAgICBjb25zdCBuYW1lID0gdGl0bGUgJiYgdGl0bGUudGV4dENvbnRlbnQudHJpbSgpIHx8ICcnOwogICAgICBjb25zdCBjb250YWluZXIgPSB0aXRsZS5jbG9zZXN0KCcuV0JfZnJhbWVfYiA+IGRpdiwgLldCX2ZyYW1lX2MgPiBkaXYnKTsKICAgICAgaWYgKCFjb250YWluZXIuaGFzQXR0cmlidXRlKCd5YXdmLW9iai1uYW1lJykpIHsKICAgICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCd5YXdmLW9iai1uYW1lJywgbmFtZSk7CiAgICAgIH0KICAgIH0pOwogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2NsZWFuL21lc3NhZ2UuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgY29uc3QgY2xlYW4gPSB5YXdmLnJ1bGVzLmNsZWFuOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGNsZWFuTWVzc2FnZUdyb3VwVGl0bGU6IHsgY246ICfpmpDol4/mqKHlnZcgLSDmtojmga/pobXpnaInLCB0dzogJ+maseiXj+aooee1hCAtIOa2iOaBr+e2sumggScsIGVuOiAnSGlkZSBtb2R1bGVzIC0gTmV3cyBwYWdlJyB9LAogICAgY2xlYW5NZXNzYWdlSGVscDogeyBjbjogJ+S9v+eUqOWwj+W4ruWKqScsIHR3OiAn5L2/55So5bCP5bmr5YqpJywgZW46ICdUaXBzJyB9LAogICAgY2xlYW5NZXNzYWdlRmVlZGJhY2s6IHsgY246ICflvq7ljZrmhI/op4Hlj43ppognLCB0dzogJ+W+ruWNmuaEj+imi+WPjemliycsIGVuOiAnRmVlZGJhY2snIH0sCiAgfSk7CgogIGNsZWFuLkNsZWFuR3JvdXAoJ21lc3NhZ2UnLCAoKSA9PiBpMThuLmNsZWFuTWVzc2FnZUdyb3VwVGl0bGUpOwogIGNsZWFuLkNsZWFuUnVsZSgnaGVscCcsICgpID0+IGkxOG4uY2xlYW5NZXNzYWdlSGVscCwgMSwgJyN2Nl9wbF9yaWdodG1vZF9oZWxwYXQsICN2Nl9wbF9yaWdodG1vZF9oZWxwY29tbWVudCwgI3Y2X3BsX3JpZ2h0bW9kX2hlbHBsaWtlLCAjdjZfcGxfcmlnaHRtb2RfaGVscG5vdGVib3gsICN2Nl9wbF9yaWdodG1vZF9oZWxwZmF2LCAjdjZfcGxfcmlnaHRtb2RfaGVscGdyb3VwY2hhdG5vdGljZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnZmVlZGJhY2snLCAoKSA9PiBpMThuLmNsZWFuTWVzc2FnZUZlZWRiYWNrLCAxLCAnI3Y2X3BsX3JpZ2h0bW9kX2ZlZWRiYWNrIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvY2xlYW4vb3RoZXIuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgZW52ID0geWF3Zi5lbnY7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBiYWNrZW5kID0geWF3Zi5iYWNrZW5kOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBjb25zdCBjbGVhbiA9IHlhd2YucnVsZXMuY2xlYW47CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY2xlYW5PdGhlckdyb3VwVGl0bGU6IHsgY246ICfpmpDol4/mqKHlnZcgLSDmnYLpobknLCB0dzogJ+maseiXj+aooee1hCAtIOmbnOmghScsIGVuOiAnSGlkZSBtb2R1bGVzIC0gT3RoZXJzJyB9LAogICAgY2xlYW5PdGhlckFkczogeyBjbjogJ+W5v+WRiicsIHR3OiAn5buj5ZGKJywgZW46ICdBZHZlcnRpc2VtZW50JyB9LAogICAgY2xlYW5PdGhlclRyYWNrZXI6IHsgY246ICfov73ouKrlmajvvIjpg6jliIbvvIknLCBlbjogJ1RyYWNrZXJzIChQYXJ0aWFsKScgfSwKICAgIGNsZWFuT3RoZXJNdXNpYzogeyBjbjogJ+W+rumfs+S5kCcsIHR3OiAn5b6u6Z+z5qiCJywgZW46ICdXZWlibyBNdXNpYycgfSwKICAgIGNsZWFuT3RoZXJUZW1wbGF0ZTogeyBjbjogJ+iuvue9ruaooeadvycsIHR3OiAn6IOM5pmv6Kit5a6aJywgZW46ICdUZW1wbGF0ZSBTZXR0aW5ncycgfSwKICAgIGNsZWFuT3RoZXJIb21lVGlwOiB7IGNuOiAn6aG26YOo5o+Q56S65qiq5bmFIHt7aX19JywgdHc6ICfpoILpg6jmj5DnpLrmqavluYUge3tpfX0nLCBlbjogJ1RvcCB0aXBzIGJhbm5lciB7e2l9fScgfSwKICAgIGNsZWFuT3RoZXJIb21lVGlwRGV0YWlsOiB7CiAgICAgIGNuOiAn5Ye6546w5Zyo5a+86Iiq5qCP5LiL5pa55YW25LuW5omA5pyJ5YaF5a6555qE5LiK5pa555qE5qiq5bmF44CC5LiA6Iis55So5p2l5o6o6I2Q5b6u5Y2a6YeN6KaB55qE5paw5Yqf6IO944CCJywKICAgIH0sCiAgICBjbGVhbk90aGVyRm9vdGVyOiB7IGNuOiAn6aG16Z2i5bqV6YOoIHt7aX19JywgdHc6ICfpoIHpnaLlupXpg6gge3tpfX0nLCBlbjogJ0Zvb3RlciB7e2l9fScgfSwKICAgIGNsZWFuT3RoZXJGb290ZXJEZXRhaWw6IHsKICAgICAgY246ICfpobXpnaLlupXpg6jnmoTlr7zoiKrpk77mjqXjgIInLAogICAgfSwKICAgIGNsZWFuT3RoZXJJTTogeyBjbjogJ+engeS/oeiBiuWkqe+8iOWPs+S4i++8iSB7e2l9fScsIGVuOiAnQ2hhdCAoYm90dG9tIHJpZ2h0KSB7e2l9fScgfSwKICAgIGNsZWFuT3RoZXJJTURldGFpbDogewogICAgICBjbjogJ+makOiXj+WQjuaCqOi/mOWPr+S7peWcqOengeS/oemhtemdouaUtuWPkeengeS/oe+8mum8oOagh+aMh+WQkeWPs+S4iuinkua2iOaBr+Wbvuagh+WcqOS4i+aLieiPnOWNleS4remAieaLqeKAnOengeS/oeKAneWNs+WPr+aJk+W8gOengeS/oemhtemdouOAgicgKwogICAgICAgIChlbnYuY29uZmlnLmNoYXRJblBhZ2VTdXBwb3J0ZWQgPyAn6YWN5ZCI4oCcW1tsYXlvdXRfY2hhdF9pbl9wYWdlXV3igJ3kvb/nlKjml7blj6rpmpDol4/lnKjmlrDmoIfnrb7pobXmiZPlvIDogYrlpKnpobXpnaLnmoTmjInpkq7jgIInIDogJycpLAogICAgfSwKICAgIGNsZWFuT3RoZXJJTU5ld3M6IHsgY246ICfng63ngrnmj5DphpLvvIjlj7PkuIvvvIknLCB0dzogJ+eGsem7nuaPkOmGku+8iOWPs+S4i++8iScsIGVuOiAnTmV3cywgYm90dG9tIHJpZ2h0JyB9LAogICAgY2xlYW5PdGhlckJhY2tUb3A6IHsgY246ICfov5Tlm57pobbpg6gnLCB0dzogJ+i/lOWbnumggumDqCcsIGVuOiAnQmFjayB0byBUb3AnIH0sCiAgICBjbGVhbk90aGVyVGlwOiB7IGNuOiAn5Yqf6IO95o+Q56S65qGGIHt7aX19JywgdHc6ICflip/og73mj5DnpLrmoYYge3tpfX0nLCBlbjogJ0Z1bmN0aW9uIFRpcHMge3tpfX0nIH0sCiAgICBjbGVhbk90aGVyVGlwRGV0YWlsOiB7CiAgICAgIGNuOiAn5YG25bCU5Lya5Ye6546w55qE5paw5Yqf6IO95o6o6I2Q55qE5by55qGG77yM5aaC5p6c6ZqQ6JeP5LqG5a+55bqU5Yqf6IO955qE55WM6Z2i5Y+v6IO95by55qGG5Lya5pi+56S65Yiw5aWH5oCq55qE5Zyw5pa544CCJywKICAgIH0sCiAgICBjbGVhbk90aGVyUmVsYXRlZEZlZWRzOiB7IGNuOiAn55u45YWz5b6u5Y2a5o6o6I2QIHt7aX19JywgdHc6ICfnm7jpl5zlvq7ljZrmjqjolqYge3tpfX0nLCBlbjogJ1JlbGF0ZWQgV2VpYm8ge3tpfX0nIH0sCiAgICBjbGVhbk90aGVyUmVsYXRlZEZlZWRzRGV0YWlsOiB7CiAgICAgIGNuOiAn5Zyo5Y2V5p2h5b6u5Y2a6aG16Z2i5Y+v5Lul55yL5Yiw55qE55u45YWz5b6u5Y2a5o6o6I2QJywKICAgIH0sCiAgICBjbGVhbk90aGVyUmVsYXRlZFZpZGVvOiB7IGNuOiAn55u45YWz6KeG6aKR5o6o6I2QJywgdHc6ICfnm7jpl5zoppbpoLvmjqjolqYnLCBlbjogJ1JlbGF0ZWQgVmlkZW9zJyB9LAogICAgY2xlYW5PdGhlclJlbGF0ZWRBcnRpY2xlOiB7IGNuOiAn5aS05p2h5paH56ug6aG15o6o6I2Q6ZiF6K+7JywgdHc6ICfpoK3mop3mlofnq6DpoIHmjqjolqbplrHoroAnLCBlbjogJ1N1Z2dlc3RlZCBBcnRpY2xlJyB9LAogICAgY2xlYW5PdGhlclNlbmRXZWlibzogeyBjbjogJ+mmlumhteWklueahOW+ruWNmuWPkeW4g+ahhiB7e2l9fScsIHR3OiAn6aaW6aCB5aSW55qE5b6u5Y2a55m85L2I5qGGIHt7aX19JywgZW46ICdBbGwgb3RoZXIgV2VpYm8gcHVibGlzaGVycyB7e2l9fScgfSwKICAgIGNsZWFuT3RoZXJTZW5kV2VpYm9EZXRhaWw6IHsKICAgICAgY246ICfpmaTkuobpppbpobXnmoTlvq7ljZrlj5HluIPmoYbvvIzlj7PkuIrop5LmjInpkq7lvLnlh7rnmoTlv6vpgJ/lj5HluIPmoYblpJbvvJvlhbbku5bnmoTlkITnp43lj5HluIPmoYbjgILlpoLlvq7ljZrmlofnq6DkuIvmlrnovazlj5HnlKjnmoTlj5HluIPmoYbnrYnjgIInLAogICAgfSwKICB9KTsKCiAgY2xlYW4uQ2xlYW5Hcm91cCgnb3RoZXInLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJHcm91cFRpdGxlKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2FkcycsICgpID0+IGkxOG4uY2xlYW5PdGhlckFkcywgMSwgewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBpZiAoZW52LmNvbmZpZy5yZXF1ZXN0QmxvY2tpbmdTdXBwb3J0ZWQpIHsKICAgICAgICAgIGJhY2tlbmQub25SZXF1ZXN0KCdhZHMnLCBkZXRhaWxzID0+IHsKICAgICAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVkKCkpIHJldHVybiB7IGNhbmNlbDogdHJ1ZSB9OwogICAgICAgICAgICByZXR1cm4ge307CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhaW5pdDogZnVuY3Rpb24gKCkgewogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgdXRpbC5jc3MuYXBwZW5kKFsKICAgICAgICAgICdbYWQtZGF0YV0nLCAnW2ZlZWR0eXBlPSJhZCJdJywKICAgICAgICAgICdbaWRePSJhZHNfIl0nLCAnW2lkXj0iYWRfIl0nLAogICAgICAgICAgJ1tpZCo9InBsX3JpZ2h0bW9kX2FkcyJdJywgJ1tpZCo9InBsX2NvbnRlbnRfYml6Il0nLCAnW2lkKj0icGxfYWRfIl0nLCAnW2lkXj0ic2luYWFkVG9vbGtpdEJveCJdJywKICAgICAgICAgICdbY2xhc3MqPSJXQl9hZF8iXScsCiAgICAgICAgICAnI3RvcGljQUQnLCAnI3RvcGljQURCdXR0b20nLCAnLldCX2ZlZWQgLnBvcHVsYXJfYnVzcycsICcuZmVlZF9hcHBfYWRzJywgJy5XX2JpZ0RheScsCiAgICAgICAgICAnLldCX2ZlZWRfeXkyMDE2X3VwX2J1dCcsICcuV0JfZmVlZF95eTIwMTZfZG93bl9idXQnLCAnI3BsX2NvbW1vbl9hbGknLAogICAgICAgICAgJy5XX3NraW5fYmFubmVyJywKICAgICAgICAgICdbbm9kZS10eXBlPSJpbWdCdG4iXVthY3Rpb24tZGF0YT0iY2FuVXBsb2FkSW1hZ2U9MCJdJywKICAgICAgICBdLmpvaW4oJywnKSArICcgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0gJyArCiAgICAgICAgICAnI3dyYXBBRCwgLm5ld3NfbG9nbyB7IHZpc2liaWxpdHk6IGhpZGRlbiAhaW1wb3J0YW50OyB9Jyk7CgogICAgICAgIGxldCB2ZXJzaW9uID0gJyc7CiAgICAgICAgLy8g5qOA5p+l5bqU5b2T5pu/5o2i5Li65ZOq56eN55qu6IKkCiAgICAgICAgLy8g572R6aG15LitICRDT05GSUcuc2tpbiDnu5nlh7rkuobnlKjmiLfpgInmi6nnmoTnmq7ogqQKICAgICAgICBjb25zdCBkZWZhdWx0U2tpbiA9ICdza2luMDU4JzsKICAgICAgICBsZXQgdGFyZ2V0U2tpbiA9IGRlZmF1bHRTa2luOwogICAgICAgIHRyeSB7IHRhcmdldFNraW4gPSBpbml0LnBhZ2UuJENPTkZJRy5za2luIHx8IGRlZmF1bHRTa2luOyB9IGNhdGNoIChlKSB7IHRhcmdldFNraW4gPSBkZWZhdWx0U2tpbjsgfQogICAgICAgIGlmICgvc2tpbjNbNTZdXGQvLnRlc3QodGFyZ2V0U2tpbikpIHRhcmdldFNraW4gPSBkZWZhdWx0U2tpbjsKICAgICAgICAvLyDmo4Dmn6XnvZHpobXkuK3mmK/lkKbooqvmj5LlhaXkuoblub/lkYrnmq7ogqTvvIzlpoLmnpzmnInliJnmjaLmiJDnlKjmiLfpgInmi6nnmoTvvIjmiJbpu5jorqTnmoTvvInnmq7ogqQKICAgICAgICBjb25zdCB1cGRhdGVTa2luID0gZnVuY3Rpb24gdXBkYXRlU2tpbigpIHsKICAgICAgICAgIGNvbnN0IGFkc2tpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xpbmtbaHJlZio9Ii9za2luMzUiXSwgbGlua1tocmVmKj0iL3NraW4zNiJdJyk7CiAgICAgICAgICBpZiAoYWRza2luKSB7CiAgICAgICAgICAgIHZlcnNpb24gPSBuZXcgVVJMKGFkc2tpbi5ocmVmKS5zZWFyY2hQYXJhbXMuZ2V0KCd2ZXJzaW9uJyk7CiAgICAgICAgICAgIHV0aWwuZGVidWcoJ2FkIHNraW4gJW8odmVyc2lvbiAlbykgaGFzIGJlZW4gcmVwbGFjZWQnLCBhZHNraW4uaHJlZiwgdmVyc2lvbik7CiAgICAgICAgICAgIGFkc2tpbi5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBgLy9pbWcudC5zaW5hanMuY24vdDYvc2tpbi8ke3RhcmdldFNraW59L3NraW4uY3NzP3ZlcnNpb249JHtlbmNvZGVVUklDb21wb25lbnQodmVyc2lvbil9YCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBhZHNraW5jb3ZlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNza2luX2NvdmVyX3Nbc3R5bGUqPSIvc2tpbjM1Il0sICNza2luX2NvdmVyX3Nbc3R5bGUqPSIvc2tpbjM2Il0nKTsKICAgICAgICAgIGlmIChhZHNraW5jb3ZlcikgYWRza2luY292ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgiLy9pbWcudC5zaW5hanMuY24vdDYvc2tpbi8ke3RhcmdldFNraW59L2ltYWdlcy9wcm9maWxlX2NvdmVyX3MuanBnP3ZlcnNpb249JHtlbmNvZGVVUklDb21wb25lbnQodmVyc2lvbil9IilgOwogICAgICAgIH07CiAgICAgICAgb2JzZXJ2ZXIuZG9tLmFkZCh1cGRhdGVTa2luKTsKCiAgICAgICAgLy8g5LiA5Lqb5bm/5ZGK5YaF5a6555qEIGlmcmFtZe+8jOWmguaenOi/meS6m+S4nOilv+WPquaYr+makOiXj+ayoeacieiiq+aRmOaOieeahOivne+8jOmHjOmdoueahCBKYXZhU2NyaXB0IOS8muS4jeWBnOeahOaKpemUme+8jOebtOWIsOaKiuS9oOeahOaOp+WItuWPsOW8hOW0qQogICAgICAgIGNvbnN0IHJlbW92ZUFkSWZyYW1lcyA9IGZ1bmN0aW9uIHJlbW92ZUFkSWZyYW1lcygpIHsKICAgICAgICAgIGNvbnN0IGlmcmFtZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lmcmFtZVtzcmMqPSJzLmFsaXR1aS53ZWliby5jb20iXScpKTsKICAgICAgICAgIGlmcmFtZXMuZm9yRWFjaChmdW5jdGlvbiAoaWZyYW1lKSB7CiAgICAgICAgICAgIGlmcmFtZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGlmcmFtZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIG9ic2VydmVyLmRvbS5hZGQocmVtb3ZlQWRJZnJhbWVzKTsKCiAgICAgICAgLy8g6KeG6aKR5pKt5pS+5a6M5q+V5LmL5ZCO5Lya6Ieq5Yqo5o6o6I2Q5LiL5LiA5Liq6KeG6aKR77yM5LmL5YmN5b6I5aSa5piv55u45YWz5o6o6I2Q77yM5L2G546w5Zyo5Lmf5pyJ5LiN5bCR5piv5bm/5ZGK77yM5omA5Lul5LiN5Y2V54us5YGa5LiA5Liq6YCJ6aG577yM55u05o6l5pS+5Zyo6L+Z6YeM5LqGCiAgICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiB2aWRlb05vQXV0b05leHQoKSB7CiAgICAgICAgICBjb25zdCBjbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19ib3hfbmV4dCBbYWN0aW9uLXR5cGU9Im5leHRfY2xvc2UiXTpub3QoW3lhd2Ytbm8tYXV0by1uZXh0XSknKTsKICAgICAgICAgIGlmICghY2xvc2UpIHJldHVybjsKICAgICAgICAgIGNsb3NlLnNldEF0dHJpYnV0ZSgneWF3Zi1uby1hdXRvLW5leHQnLCAnJyk7CiAgICAgICAgICBjbG9zZS5jbGljaygpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHV0aWwuaW5qZWN0KGZ1bmN0aW9uIChyb290S2V5KSB7CiAgICAgICAgICBjb25zdCB5YXdmID0gd2luZG93W3Jvb3RLZXldOwogICAgICAgICAgY29uc3QgdnVlU2V0dXAgPSB5YXdmLnZ1ZVNldHVwOwoKICAgICAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgnY2FyZC1ob3Qtc2VhcmNoJywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICAgIHZtLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmJhbmRMaXN0OyB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgY29uc3QgY2xlYW5VcCA9IHZtLmJhbmRMaXN0LmZpbHRlcihpID0+ICFpLmlzX2FkKTsKICAgICAgICAgICAgICBpZiAodm0uYmFuZExpc3QubGVuZ3RoICE9PSBjbGVhblVwLmxlbmd0aCkgdm0uYmFuZExpc3QgPSBjbGVhblVwOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdm0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuVG9wV29yZDsgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmICh2bS5Ub3BXb3JkLmlzX2FkKSB2bS5Ub3BXb3JkID0gbnVsbDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LCB7IGltbWVkaWF0ZTogdHJ1ZSB9KTsKCiAgICAgICAgfSwgdXRpbC5pbmplY3Qucm9vdEtleSk7CiAgICAgIH0KICAgIH0sCiAgfSk7CiAgaWYgKGVudi5jb25maWcucmVxdWVzdEJsb2NraW5nU3VwcG9ydGVkKSB7CiAgICBjbGVhbi5DbGVhblJ1bGUoJ3RyYWNrZXInLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJUcmFja2VyLCAxLCB7CiAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICBiYWNrZW5kLm9uUmVxdWVzdCgndHJhY2tlcicsIGRldGFpbHMgPT4gewogICAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVkKCkpIHJldHVybiB7IGNhbmNlbDogdHJ1ZSB9OwogICAgICAgICAgcmV0dXJuIHt9OwogICAgICAgIH0pOwogICAgICB9LAogICAgfSk7CiAgfQogIGNsZWFuLkNsZWFuUnVsZSgnbXVzaWMnLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJNdXNpYywgMSwgJy5QQ0RfbXBsYXllciB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgndGVtcGxhdGUnLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJUZW1wbGF0ZSwgMSwgJy5pY29uX3NldHNraW4geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ2hvbWVfdGlwJywgKCkgPT4gaTE4bi5jbGVhbk90aGVySG9tZVRpcCwgMSwgJyN2Nl9wbF9jb250ZW50X2hvbWV0aXAgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnZm9vdGVyJywgKCkgPT4gaTE4bi5jbGVhbk90aGVyRm9vdGVyLCAxLCB7CiAgICAvLyDnm7TmjqUgZGlzcGxheTogbm9uZSDnmoTor53vvIzlj5HnjrDpobXpnaLnmoTlt6bovrnmoI/kvJrpo5jotbAKICAgIGFjc3M6ICcuZ2xvYmFsX2Zvb3RlciwgLldCX2Zvb3RlciB7IGhlaWdodDogMDsgb3ZlcmZsb3c6IGhpZGRlbjsgfScsCiAgICByZWY6IHsgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ3dhcm4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jbGVhbk90aGVyRm9vdGVyRGV0YWlsIH0gfSwKICB9KTsKICBjbGVhbi5DbGVhblJ1bGUoJ2ltJywgKCkgPT4gaTE4bi5jbGVhbk90aGVySU0sIDEsIHsKICAgIGFjc3M6ICcuV0Jfd2ViaW0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLAogICAgcmVmOiB7IGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5PdGhlcklNRGV0YWlsIH0gfSwKICB9KTsKICBjbGVhbi5DbGVhblJ1bGUoJ2ltX25ld3MnLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJJTU5ld3MsIDEsICcud2ViaW1fbmV3cyB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfScpOwogIGNsZWFuLkNsZWFuUnVsZSgnYmFja190b3AnLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJCYWNrVG9wLCAxLCAnLldfZ290b3AgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKTsKICBjbGVhbi5DbGVhblJ1bGUoJ3RpcCcsICgpID0+IGkxOG4uY2xlYW5PdGhlclRpcCwgMSwgewogICAgYWNzczogJy5XX2xheWVyX3RpcHMgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLAogICAgcmVmOiB7IGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5PdGhlclRpcERldGFpbCB9IH0sCiAgfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdyZWxhdGVkX2ZlZWRzJywgKCkgPT4gaTE4bi5jbGVhbk90aGVyUmVsYXRlZEZlZWRzLCAxLCB7CiAgICBhY3NzOiAnW3lhd2Ytb2JqLW5hbWU9IuebuOWFs+aOqOiNkCJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9ICNXQl93ZWJpbSAud2JpbV9jaGF0X2JveCwgI1dCX3dlYmltIC53YmltX21pbl9jaGF0ICB7IHJpZ2h0OiAyMHB4ICFpbXBvcnRhbnQ7IH0nLAogICAgcmVmOiB7IGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uY2xlYW5PdGhlclJlbGF0ZWRGZWVkc0RldGFpbCB9IH0sCiAgfSk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdyZWxhdGVkX3ZpZGVvJywgKCkgPT4gaTE4bi5jbGVhbk90aGVyUmVsYXRlZFZpZGVvLCAxLCAnLnZpZGVvX2JveF9tb3JlIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdyZWxhdGVkX2FydGljbGUnLCAoKSA9PiBpMThuLmNsZWFuT3RoZXJSZWxhdGVkQXJ0aWNsZSwgMSwgJy5XQl9hcnRpY2FsIFtub2RlLXR5cGU9InJlY29tbWVuZCJdIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgY2xlYW4uQ2xlYW5SdWxlKCdzZW5kX3dlaWJvJywgKCkgPT4gaTE4bi5jbGVhbk90aGVyU2VuZFdlaWJvLCAxLCB7CiAgICBhY3NzOiAnLnNlbmRfd2VpYm9fc2ltcGxlIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9JywKICAgIHJlZjogeyBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnd2FybicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmNsZWFuT3RoZXJTZW5kV2VpYm9EZXRhaWwgfSB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2xheW91dC9sYXlvdXQuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBpMThuLmxheW91dFRhYlRpdGxlID0gewogICAgY246ICfniYjpnaLlsZXnpLonLAogICAgZW46ICdMYXlvdXQnLAogIH07CgogIGNvbnN0IGxheW91dCA9IHlhd2YucnVsZXMubGF5b3V0ID0ge307CiAgbGF5b3V0LmxheW91dCA9IHJ1bGUuVGFiKHsKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmxheW91dFRhYlRpdGxlLAogICAgcGFnZW1lbnU6IHRydWUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvbGF5b3V0L25hdmJhci5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwoKICBjb25zdCBsYXlvdXQgPSB5YXdmLnJ1bGVzLmxheW91dDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgbmF2YmFyID0gbGF5b3V0Lm5hdmJhciA9IHt9OwoKICBpMThuLm5hdmJhclRvb2xHcm91cFRpdGxlID0gewogICAgY246ICflr7zoiKrmoI8nLAogICAgdHc6ICflsI7opr3liJcnLAogICAgZW46ICdOYXZiYXInLAogIH07CgogIG5hdmJhci5uYXZiYXIgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogbGF5b3V0LmxheW91dCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLm5hdmJhclRvb2xHcm91cFRpdGxlLAogIH0pOwoKICBpMThuLm5hdmJhckF1dG9IaWRlID0gewogICAgY246ICfoh6rliqjpmpDol4/lr7zoiKrmoI8nLAogICAgdHc6ICfoh6rli5XpmrHol4/lsI7opr3liJcnLAogICAgZW46ICdOYXZiYXIgaGlkZSBhdXRvbWF0aWNhbGx5JywKICB9OwoKICBuYXZiYXIuYXV0b0hpZGUgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsYXlvdXRfbmF2X2F1dG9faGlkZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBuYXZiYXIubmF2YmFyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ubmF2YmFyQXV0b0hpZGUsCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgYXR0ciA9ICd5YXdmLW5hdmJhci1hdXRvaGlkZSc7CiAgICAgIGNvbnN0IHVwZGF0ZU5hdkZsb2F0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IG5hdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZ2xvYmFsX25hdicpOwogICAgICAgIGlmICghbmF2cy5sZW5ndGgpIHJldHVybjsKICAgICAgICAvLyDkvaDog73nm7jkv6HlkJfvvJ/lr7zoiKrmoI/kuI3kuIDlrprmnInkuIDkuKrjgILlvojnpZ7lpYfnmoTlkaIKICAgICAgICBjb25zdCB5ID0gd2luZG93LnNjcm9sbFk7CiAgICAgICAgQXJyYXkuZnJvbShuYXZzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYXYpIHsKICAgICAgICAgIGNvbnN0IGYgPSBuYXYuaGFzQXR0cmlidXRlKGF0dHIpLCByID0gNDI7CiAgICAgICAgICBpZiAoeSA8IHIgJiYgZikgbmF2LnJlbW92ZUF0dHJpYnV0ZShhdHRyKTsKICAgICAgICAgIGlmICh5ID49IHIgJiYgIWYpIG5hdi5zZXRBdHRyaWJ1dGUoYXR0ciwgJycpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB1cGRhdGVOYXZGbG9hdCk7CiAgICAgIHVwZGF0ZU5hdkZsb2F0KCk7CiAgICAgIGNzcy5hcHBlbmQoYAouV0JfZ2xvYmFsX25hdjpub3QoWyR7YXR0cn1dKSwgLldCX2dsb2JhbF9uYXZbJHthdHRyfV0geyBtYXJnaW4tdG9wOiAtNTBweDsgdG9wOiA1MHB4OyBib3gtc2hhZG93OiBub25lOyB9Ci5XQl9nbG9iYWxfbmF2WyR7YXR0cn1dIHsgdG9wOiAwOyB0cmFuc2l0aW9uOiB0b3AgZWFzZS1pbi1vdXQgMC4xcyAwLjMzczsgfQouV0JfZ2xvYmFsX25hdlske2F0dHJ9XTpob3ZlciB7IHRvcDogNTBweDsgdHJhbnNpdGlvbjogdG9wIGVhc2UtaW4tb3V0IDAuMXMgMHM7IH0KLldCX2dsb2JhbF9uYXZbJHthdHRyfV06Zm9jdXMtd2l0aGluIHsgdG9wOiA1MHB4OyB0cmFuc2l0aW9uOiB0b3AgZWFzZS1pbi1vdXQgMC4xcyAwczsgfQouV0JfZ2xvYmFsX25hdlske2F0dHJ9XTo6YWZ0ZXIgeyBjb250ZW50OiAiICI7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDhweDsgY2xlYXI6IGJvdGg7IGZsb2F0OiBsZWZ0OyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCByZ2JhKDAsIDAsIDAsIDAuMykgMCUsIHRyYW5zcGFyZW50IDc1JSwgdHJhbnNwYXJlbnQgMTAwJSk7IH0KLyog5Zu65a6a5bCP6buE562+5L2N572uICovCi5XQl9nbG9iYWxfbmF2WyR7YXR0cn1dIC5nbl90b3BtZW51bGlzdF90aXBzIHsgcGFkZGluZy10b3A6IDUycHg7IHRyYW5zaXRpb246IHBhZGRpbmctdG9wIGVhc2UtaW4tb3V0IDAuMXMgMC4zM3M7IH0KLldCX2dsb2JhbF9uYXZbJHthdHRyfV06aG92ZXIgLmduX3RvcG1lbnVsaXN0X3RpcHMgeyBwYWRkaW5nLXRvcDogMnB4OyB0cmFuc2l0aW9uOiBwYWRkaW5nLXRvcCBlYXNlLWluLW91dCAwLjFzIDBzOyB9Ci5XQl9nbG9iYWxfbmF2WyR7YXR0cn1dIC5nbl90b3BtZW51bGlzdF90aXBzIC5maWNvbl9jbG9zZSB7IHRvcDogNTZweDsgdHJhbnNpdGlvbjogdG9wIGVhc2UtaW4tb3V0IDAuMXMgMC4zM3M7IH0KLldCX2dsb2JhbF9uYXZbJHthdHRyfV06aG92ZXIgLmduX3RvcG1lbnVsaXN0X3RpcHMgLmZpY29uX2Nsb3NlIHsgdG9wOiA2cHg7IHRyYW5zaXRpb246IHRvcCBlYXNlLWluLW91dCAwLjFzIDBzOyB9Ci8qIOa1ruWKqOWFg+e0oCAqLwouV19maXhlZF90b3AgeyB0b3A6IDEwcHggIWltcG9ydGFudDsgfQpgKTsKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgcmVvcmRlck5hdmJhcjogewogICAgICBjbjogJ+aBouWkjeaXp+W8j+WvvOiIquagj+aOkuWIlyB7e2l9fScsCiAgICAgIGhrOiAn5oGi5b6p5pen5byP5a+86KeI5YiX5o6S5YiXIHt7aX19JywKICAgICAgZW46ICdSZXN0b3JlIG9sZCBuYXZiYXIgbGF5b3V0IHt7aX19JywKICAgIH0sCiAgICByZW9yZGVyTmF2YmFyRGV0YWlsOiB7CiAgICAgIGNuOiAn5b6u5Y2a5a2X5qC357Sn6LS05Zyo5qCH6K+G5Y+z5L6n5pi+56S677yM4oCc6aaW6aG14oCd4oCc54Ot6Zeo4oCd4oCc5ri45oiP4oCd55qE6ZO+5o6l5Ye6546w5Zyo5pCc57Si5qGG55qE5bem5L6n44CCJywKICAgIH0sCiAgfSk7CgogIG5hdmJhci5vbGRMYXlvdXQgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsYXlvdXRfbmF2X2NsYXNzaWNhbCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBuYXZiYXIubmF2YmFyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ucmVvcmRlck5hdmJhciwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4ucmVvcmRlck5hdmJhckRldGFpbCB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICBjb25zdCBtb3ZlTmF2TGlzdCA9IGZ1bmN0aW9uIG1vdmVOYXZMaXN0KCkgewogICAgICAgIGNvbnN0IHNlYXJjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2gsIC5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2hfdjInKTsKICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLldCX2dsb2JhbF9uYXYgLmduX2hlYWRlciAuZ25fcG9zaXRpb24gLmduX25hdiAuZ25fbmF2X2xpc3QnKTsKICAgICAgICBpZiAoIXNlYXJjaCB8fCAhbGlzdCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJykpLnNsaWNlKDAsIC0xKTsKICAgICAgICBjb25zdCBnbmxpc3RXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgZ25saXN0V3JhcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iZ25fbmF2Ij48dWwgY2xhc3M9ImduX25hdl9saXN0Ij48L3VsPjwvZGl2Pic7CiAgICAgICAgY29uc3Qgbmxpc3QgPSBnbmxpc3RXcmFwLnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7CiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAobCkgeyBubGlzdC5hcHBlbmRDaGlsZChsKTsgfSk7CiAgICAgICAgc2VhcmNoLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdubGlzdFdyYXAuZmlyc3RDaGlsZCwgc2VhcmNoKTsKICAgICAgICBzZWFyY2gucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChzZWFyY2gpOwogICAgICAgIGNzcy5hcHBlbmQoYAouV0JfZ2xvYmFsX25hdi5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2gsCi5XQl9nbG9iYWxfbmF2LldCX2dsb2JhbF9uYXYgLmduX3NlYXJjaF92MiB7IGZsb2F0OiByaWdodDsgfQouV0JfZ2xvYmFsX25hdi5XQl9nbG9iYWxfbmF2IC5nbl9oZWFkZXIgeyB0ZXh0LWFsaWduOiByaWdodDsgfQouV0JfZ2xvYmFsX25hdi5XQl9nbG9iYWxfbmF2IC5nbl9oZWFkZXIgPiAqIHsgdGV4dC1hbGlnbjogbGVmdDsgfQouV0JfZ2xvYmFsX25hdi5XQl9nbG9iYWxfbmF2IC5nbl9oZWFkZXIgPiAuZ25fbmF2IHsgbWFyZ2luLXJpZ2h0OiAwOyB9Ci5XQl9nbG9iYWxfbmF2X3VzLldCX2dsb2JhbF9uYXZfdXMgLmduX2hlYWRlciB7IGJhY2tncm91bmQtaW1hZ2U6IG5vbmU7IH0KLldCX2dsb2JhbF9uYXZfdXMuV0JfZ2xvYmFsX25hdl91cyAuZ25fbG9nbywKLldCX2dsb2JhbF9uYXZfdXMuV0JfZ2xvYmFsX25hdl91cyAuZ25fbG9nbyAuYm94LAouV0JfZ2xvYmFsX25hdi5XQl9nbG9iYWxfbmF2IC5nbl9sb2dvLAouV0JfZ2xvYmFsX25hdi5XQl9nbG9iYWxfbmF2IC5nbl9sb2dvIGEgeyB3aWR0aDogMTQwcHggIWltcG9ydGFudDsgbGVmdDogMCAhaW1wb3J0YW50OyB9Ci5XQl9nbG9iYWxfbmF2X3VzLldCX2dsb2JhbF9uYXZfdXMgLmduX2xvZ28gLmJveCAubG9nbywKLldCX2dsb2JhbF9uYXZfdXMuV0JfZ2xvYmFsX25hdl91cyAuZ25fbG9nbyAuYm94IGltZyB7IGRpc3BsYXk6IGJsb2NrOyB9Ci5XQl9nbG9iYWxfbmF2LldCX2dsb2JhbF9uYXYgLmduX2xvZ28gLmJveCAubG9nbyB7IG1hcmdpbi1sZWZ0OiAwOyB9Ci5XQl9nbG9iYWxfbmF2X3VzLldCX2dsb2JhbF9uYXZfdXMgLmduX3Bvc2l0aW9uIHsgbWFyZ2luLXJpZ2h0OiAwOyB9CmApOwogICAgICAgIG9ic2VydmVyLmRvbS5yZW1vdmUobW92ZU5hdkxpc3QpOwogICAgICB9OwogICAgICBvYnNlcnZlci5kb20uYWRkKG1vdmVOYXZMaXN0KTsKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgbmF2SGlkZU5hbWU6IHsgY246ICflr7zoiKrmoI/kuIrnmoTnlKjmiLflkI18e3thY3R9fSAoVjYpe3tpfX0nLCB0dzogJ+WwjuimveWIl+S4iueahOeUqOaItuWQjXx7e2FjdH19IChWNil7e2l9fScsIGVuOiAnVXNlcm5hbWUgb24gbmF2IGJhciB3b3VsZCBiZSB8IHt7YWN0fX0gKFY2KXt7aX19JyB9LAogICAgbmF2SGlkZU5hbWVSZXBsYWNlOiB7IGNuOiAn5pu/5o2i5Li64oCc5Liq5Lq65Li76aG14oCdJywgdHc6ICfmm7/mj5vngrrjgIzlgIvkurrkuLvpoIHjgI0nLCBlbjogJ3JlcGxhY2VkIGJ5IHRleHQgIk15IFByb2ZpbGUiJyB9LAogICAgbmF2SGlkZU5hbWVIaWRkZW46IHsgY246ICfpmpDol48nLCB0dzogJ+maseiXjycsIGVuOiAnaGlkZGVuJyB9LAogICAgbmF2SGlkZU5hbWVEZXRhaWw6IHsKICAgICAgY246ICfmraTlpJbmgqjov5jlj6/ku6XpmpDol4/pmpDol4/lj7PmoI/nmoQgW1tjbGVhbl9yaWdodF9pbmZvXV0g5qih5Z2X44CC5Lul5Y+K5omT5byAIFtbbGF5b3V0X25hdl9hdXRvX2hpZGVdXSDjgIInLAogICAgfSwKICAgIG5hdkhpZGVOYW1lUmVwbGFjZVRleHQ6IHsgY246ICfkuKrkurrkuLvpobUnLCB0dzogJ+WAi+S6uuS4u+mggScsIGVuOiAnTXkgUHJvZmlsZScgfSwKICB9KTsKCiAgY29uc3QgaGlkZU5hdk5hbWUgPSBjc3MuYWRkKCcueWF3Zi1XQlY2IC5XQl9nbG9iYWxfbmF2IC5nbl9uYXZfbGlzdCBsaS5nbl9uYW1lLlNfdHh0MSB7IGRpc3BsYXk6IG5vbmU7IH0nKTsKICBuYXZiYXIubmF2SGlkZU5hbWUgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsYXlvdXRfbmF2X2hpZGVfbmFtZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBuYXZiYXIubmF2YmFyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ubmF2SGlkZU5hbWUsCiAgICByZWY6IHsKICAgICAgYWN0OiB7CiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgc2VsZWN0OiBbCiAgICAgICAgICB7IHZhbHVlOiAnaGlkZGVuJywgdGV4dDogKCkgPT4gaTE4bi5uYXZIaWRlTmFtZUhpZGRlbiB9LAogICAgICAgICAgeyB2YWx1ZTogJ3JlcGxhY2UnLCB0ZXh0OiAoKSA9PiBpMThuLm5hdkhpZGVOYW1lUmVwbGFjZSB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5uYXZIaWRlTmFtZURldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGlmICh0aGlzLmdldENvbmZpZygpKSB7CiAgICAgICAgaWYgKHRoaXMucmVmLmFjdC5nZXRDb25maWcoKSA9PT0gJ3JlcGxhY2UnKSB7CiAgICAgICAgICBjc3MuYXBwZW5kKGAKLldCX2dsb2JhbF9uYXYgLmduX25hdl9saXN0IGxpIC5nbl9uYW1lIC5TX3R4dDE6OmJlZm9yZSB7IGNvbnRlbnQ6ICIke2kxOG4ubmF2SGlkZU5hbWVSZXBsYWNlVGV4dH0iOyBkaXNwbGF5OiBibG9jazsgfQouV0JfZ2xvYmFsX25hdiAuZ25fbmF2X2xpc3QgbGkgLmduX25hbWUgLlNfdHh0MSB7IGhlaWdodDogMjZweDsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aWR0aDogNGVtOyB9CmApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjc3MuYXBwZW5kKCcuV0JfZ2xvYmFsX25hdiAuZ25fbmF2X2xpc3QgbGkgYS5nbl9uYW1lIC5TX3R4dDEgeyBkaXNwbGF5OiBub25lOyB9Jyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGhpZGVOYXZOYW1lLnJlbW92ZSgpOwogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBuYXZIaWRlQXZhdGFyOiB7IGNuOiAn5a+86Iiq5qCP5LiN5pi+56S65Liq5Lq65aS05YOPIChWNyknIH0sCiAgfSk7CiAgY29uc3QgaGlkZU5hdkF2YXRhciA9IGNzcy5hZGQoJy55YXdmLVdCVjcgW2NsYXNzKj0iQ3RybHNfYXZhdGFySXRlbV8iXSB7IHZpc2liaWxpdHk6IGhpZGRlbjsgfScpOwogIG5hdmJhci5uYXZIaWRlQXZhdGFyID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogNywKICAgIGlkOiAnbGF5b3V0X25hdl9oaWRlX2F2YXRhcicsCiAgICB2ZXJzaW9uOiA4NSwKICAgIHBhcmVudDogbmF2YmFyLm5hdmJhciwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLm5hdkhpZGVBdmF0YXIsCiAgICBpbml0KCkgewogICAgICBoaWRlTmF2QXZhdGFyLnJlbW92ZSgpOwogICAgICBpZiAoIXRoaXMuZ2V0Q29uZmlnKCkpIHJldHVybjsKICAgICAgY29uc3Qgc3ByaXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ19fU1ZHX1NQUklURV9OT0RFX18nKTsKICAgICAgY29uc3Qgc3ZnID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhgPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8c3ltYm9sIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAzMCAzMCIgaWQ9Im5hdi1wcm9maWxlIj4KPHBhdGggZD0ibTIxLjkxNiAxMC40cTAtMS44NTg5LTAuOTMxNTktMy40NS0wLjkzMTU3LTEuNTkxMS0yLjUyNjMtMi41MjA1LTEuNTk0Ny0wLjkyOTQ2LTMuNDU3OS0wLjkyOTQ2LTEuODYzMiAwLTMuNDU3OSAwLjkyOTQ2LTEuNTk0NyAwLjkyOTQzLTIuNTI2MyAyLjUyMDUtMC45MzE1OCAxLjU5MTEtMC45MzE1OCAzLjQ1IDAgMS43MzI5IDAuODIxMDUgMy4yNDUyIDAuODIxMDYgMS41MTIzIDIuMjEwNSAyLjQ1NzUtMS44NjMyIDAuNzU2MTYtMy4yODQyIDIuMTc0LTEuNDIxMSAxLjQxNzgtMi4yMTA1IDMuMjQ1Mi0wLjgyMTA1IDEuODkwNC0wLjgyMTA1IDMuOTY5OSAwIDAuNDA5NTggMC4yODQyMSAwLjcwODkgMC4yODQyIDAuMjk5MzIgMC42OTQ3NCAwLjI5OTMyaDE4LjQ0MnEwLjQxMDUyIDAgMC42OTQ3NC0wLjI5OTMyIDAuMjg0MjEtMC4yOTkzMiAwLjI4NDIxLTAuNzA4OSAwLTIuMDc5NS0wLjgyMTA1LTMuOTY5OS0wLjc4OTQ4LTEuODI3NC0yLjIxMDUtMy4yNDUyLTEuNDIxMS0xLjQxNzgtMy4yODQyLTIuMTc0IDEuMzg5NS0wLjk0NTIxIDIuMjEwNS0yLjQ1NzUgMC44MjEwNi0xLjUxMjMgMC44MjEwNi0zLjI0NTJ6bS02LjkxNTggNC42NjNxLTEuMjYzMiAwLTIuMzM2OC0wLjYzMDE0LTEuMDczNy0wLjYzMDE0LTEuNzA1My0xLjcwMTQtMC42MzE1OC0xLjA3MTItMC42MzE1OC0yLjMzMTUgMC0xLjI2MDMgMC42MzE1OC0yLjMzMTUgMC42MzE1OC0xLjA3MTIgMS43MDUzLTEuNzAxNCAxLjA3MzctMC42MzAxNCAyLjMzNjgtMC42MzAxNCAxLjI2MzIgMCAyLjMzNjggMC42MzAxNCAxLjA3MzcgMC42MzAxNCAxLjcwNTMgMS43MDE0IDAuNjMxNTggMS4wNzEyIDAuNjMxNTggMi4zMzE1IDAgMS4yNjAzLTAuNjMxNTggMi4zMzE1LTAuNjMxNTggMS4wNzEyLTEuNzA1MyAxLjcwMTQtMS4wNzM3IDAuNjMwMTQtMi4zMzY4IDAuNjMwMTR6bS04LjE3ODkgOS40NTJxMC4yNTI2NC0yLjAxNjQgMS40MDUzLTMuNjcwNSAxLjE1MjYtMS42NTQxIDIuOTM2OC0yLjU5OTMgMS43ODQyLTAuOTQ1MjEgMy44MzY4LTAuOTQ1MjEgMi4wNTI2IDAgMy44MzY4IDAuOTQ1MjEgMS43ODQyIDAuOTQ1MTkgMi45MzY4IDIuNTk5MyAxLjE1MjYgMS42NTQxIDEuNDA1MyAzLjY3MDV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAzMCAzMCIgaWQ9Im5hdi1wcm9maWxlRmxhdCI+CjxwYXRoIGQ9Im0yMS45MTYgMTAuNGMwLTEuMjM5My0wLjMxMDUzLTIuMzg5My0wLjkzMTU5LTMuNDUtMC42MjEwNC0xLjA2MDctMS40NjMyLTEuOTAwOS0yLjUyNjMtMi41MjA1LTEuMDYzMi0wLjYxOTY0LTIuMjE1OC0wLjkyOTQ2LTMuNDU3OS0wLjkyOTQ2LTEuMjQyMSAwLTIuMzk0NyAwLjMwOTgyLTMuNDU3OSAwLjkyOTQ2LTEuMDYzMiAwLjYxOTYyLTEuOTA1MyAxLjQ1OTgtMi41MjYzIDIuNTIwNS0wLjYyMTA2IDEuMDYwNy0wLjkzMTU4IDIuMjEwOC0wLjkzMTU4IDMuNDUgMCAxLjE1NTIgMC4yNzM2OCAyLjIzNyAwLjgyMTA1IDMuMjQ1MiAwLjU0NzM3IDEuMDA4MiAxLjI4NDIgMS44Mjc0IDIuMjEwNSAyLjQ1NzUtMS4yNDIxIDAuNTA0MTEtMi4zMzY4IDEuMjI4OC0zLjI4NDIgMi4xNzQtMC45NDczNyAwLjk0NTIxLTEuNjg0MiAyLjAyNjktMi4yMTA1IDMuMjQ1Mi0wLjU0NzM3IDEuMjYwMy0wLjgyMTA1IDIuNTgzNS0wLjgyMTA1IDMuOTY5OSAwIDAuMjczMDYgMC4wOTQ3MzcgMC41MDkzNiAwLjI4NDIxIDAuNzA4OSAwLjE4OTQ3IDAuMTk5NTUgMC40MjEwNSAwLjI5OTMyIDAuNjk0NzQgMC4yOTkzMmgxOC40NDJjMC4yNzM2OCAwIDAuNTA1MjYtMC4wOTk3NyAwLjY5NDc0LTAuMjk5MzIgMC4xODk0Ny0wLjE5OTU1IDAuMjg0MjEtMC40MzU4NSAwLjI4NDIxLTAuNzA4OSAwLTEuMzg2My0wLjI3MzY4LTIuNzA5Ni0wLjgyMTA1LTMuOTY5OS0wLjUyNjMyLTEuMjE4My0xLjI2MzItMi4zLTIuMjEwNS0zLjI0NTItMC45NDczNy0wLjk0NTIxLTIuMDQyMS0xLjY2OTktMy4yODQyLTIuMTc0IDAuOTI2MzItMC42MzAxNCAxLjY2MzItMS40NDkzIDIuMjEwNS0yLjQ1NzUgMC41NDczNy0xLjAwODIgMC44MjEwNi0yLjA4OTkgMC44MjEwNi0zLjI0NTJ6IiBmaWxsPSJjdXJyZW50Q29sb3IiLz4KPC9zeW1ib2w+Cjwvc3ZnPmAsICdpbWFnZS9zdmcreG1sJyk7CiAgICAgIFsuLi5zdmcucXVlcnlTZWxlY3RvckFsbCgnc3ltYm9sJyldLmZvckVhY2goc3ltYm9sID0+IHNwcml0ZS5hcHBlbmRDaGlsZChzeW1ib2wpKTsKICAgICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHJvb3RLZXkpIHsKICAgICAgICBjb25zdCB5YXdmID0gd2luZG93W3Jvb3RLZXldOwogICAgICAgIGNvbnN0IHZ1ZVNldHVwID0geWF3Zi52dWVTZXR1cDsKCiAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdjdHJscycsIGZ1bmN0aW9uICh2bSkgewogICAgICAgICAgdm0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubmF2SXRlbXM7IH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY29uc3QgcHJvZmlsZSA9IHZtLm5hdkl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLm5hbWUgPT09ICdwcm9maWxlJyk7CiAgICAgICAgICAgIGlmIChwcm9maWxlICYmIHByb2ZpbGUuc3JjKSBwcm9maWxlLnNyYyA9ICcnOwogICAgICAgICAgICB2bS4kZm9yY2VVcGRhdGUoKTsKICAgICAgICAgIH0sIHsgZGVlcDogdHJ1ZSwgaW1tZWRpYXRlOiB0cnVlIH0pOwogICAgICAgIH0pOwogICAgICB9LCB1dGlsLmluamVjdC5yb290S2V5KTsKICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvbGF5b3V0L3NpZGViYXIuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwogIGNvbnN0IHJ1bGVzID0geWF3Zi5ydWxlczsKCiAgY29uc3QgbGF5b3V0ID0geWF3Zi5ydWxlcy5sYXlvdXQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CiAgY29uc3QgcHJpb3JpdHkgPSB1dGlsLnByaW9yaXR5OwoKICBjb25zdCBzaWRlYmFyID0gbGF5b3V0LnNpZGViYXIgPSB7fTsKCiAgaTE4bi5zaWRlYmFyVG9vbEdyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+i+ueagjycsCiAgICB0dzogJ+mCiuashCcsCiAgICBlbjogJ1NpZGViYXInLAogIH07CgogIHNpZGViYXIuc2lkZWJhciA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBsYXlvdXQubGF5b3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2lkZWJhclRvb2xHcm91cFRpdGxlLAogIH0pOwoKICBjb25zdCBzaWRlYmFyT24gPSBjb25maWcgPT4gewogICAgaWYgKHNpZGViYXIubWVyZ2UucmVmLnNpZGUuZ2V0Q29uZmlnKCkgIT09IGNvbmZpZykgewogICAgICBzaWRlYmFyLm1lcmdlLnJlZi5zaWRlLnNldENvbmZpZyhjb25maWcpOwogICAgfQogICAgaWYgKHNpZGViYXIuYWxsU2lkZWJhck9uLnJlZi5zaWRlLmdldENvbmZpZygpICE9PSBjb25maWcpIHsKICAgICAgc2lkZWJhci5hbGxTaWRlYmFyT24ucmVmLnNpZGUuc2V0Q29uZmlnKGNvbmZpZyk7CiAgICB9CiAgfTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBzaWRlYmFyU2hvd01lc3NhZ2VzOiB7CiAgICAgIGNuOiAn5Zyo6aaW6aG15bem5qCP5pi+56S65raI5oGv5YiG57uE77yM5YyF5ous5Lul5LiL6ZO+5o6le3tpfX18fHt7YXRtZX19fHt7Y210fX18e3tsaWtlfX18e3tkbX19fHt7bXNnYm94fX18e3tncm91cH19fHt7ZG1zdWJ9fScsCiAgICAgIHR3OiAn5Zyo6aaW6aCB5bem5qyE6aGv56S65raI5oGv5YiG57WE77yM5YyF5ous5Lul5LiL6YCj57WQe3tpfX18fHt7YXRtZX19fHt7Y210fX18e3tsaWtlfX18e3tkbX19fHt7bXNnYm94fX18e3tncm91cH19fHt7ZG1zdWJ9fScsCiAgICAgIGVuOiAnU2hvdyBhIGxpbmsgdG8gbmV3IG1lc3NhZ2VzIGluIGxlZnQgY29sdW1uIG9mIGhvbWUgcGFnZSB3aXRoIGZvbGxvd2luZyBpdGVtcyB7e2l9fXx8e3thdG1lfX18e3tjbXR9fXx7e2xpa2V9fXx8e3tkbX19fHt7bXNnYm94fX18e3tncm91cH19fHt7ZG1zdWJ9fScsCiAgICB9LAogICAgc2lkZWJhclNob3dNZXNzYWdlc1dhcm5pbmc6IHsKICAgICAgY246ICflnKjliIbovqjnjofovoPlsI/nmoTlsY/luZXkuIrmt7vliqDov4flpJrpobnnm67lj6/og73lr7zoh7TmmL7npLrkuI3lrozlhajjgIInLAogICAgICB0dzogJ+eGkuW5leino+aekOW6pumBjuWwj+aZguWKoOWFpemBjuWkmumAo+aOpeWPr+iHtOeEoeazleWujOWFqOmhr+ekuuOAgicsCiAgICAgIGVuOiAnSXQgbWF5IG5vdCBkaXNwbGF5ZWQgY29ycmVjdGx5IGlmIHRvbyBtYW55IGxpbmtzIGFkZGVkIG9uIGEgbG93IHJlc29sdXRpb24gbW9uaXRvci4nLAogICAgfSwKICAgIHNpZGViYXJTaG93TWVzc2FnZXNNc2c6IHsgY246ICfmtojmga8nLCBlbjogJ05ld3MnIH0sCiAgICBzaWRlYmFyU2hvd01lc3NhZ2VzQXRNZTogeyBjbjogJ0DmiJHnmoQnLCB0dzogJ0DmiJHnmoQnLCBlbjogJ01lbnRpb25lZCcgfSwKICAgIHNpZGViYXJTaG93TWVzc2FnZXNDbXQ6IHsgY246ICfor4TorronLCB0dzogJ+ipleirlicsIGVuOiAnQ29tbWVudCcgfSwKICAgIHNpZGViYXJTaG93TWVzc2FnZXNMaWtlOiB7IGNuOiAn6LWeJywgdHc6ICforponLCBlbjogJ0xpa2UnIH0sCiAgICBzaWRlYmFyU2hvd01lc3NhZ2VzRE06IHsgY246ICfnp4Hkv6EnLCBlbjogJ01lc3NhZ2UnIH0sCiAgICBzaWRlYmFyU2hvd01lc3NhZ2VzTXNnQm94OiB7IGNuOiAn5pyq5YWz5rOo5Lq656eB5L+hJywgdHc6ICfmnKrpl5zms6jkurrnp4Hkv6EnLCBlbjogIlN0cmFuZ2VycycgTWVzc2FnZXMiIH0sCiAgICBzaWRlYmFyU2hvd01lc3NhZ2VzR3JvdXA6IHsgY246ICfnvqTpgJrnn6UnLCBlbjogJ0dyb3VwIG1lc3NhZ2UnIH0sCiAgICBzaWRlYmFyU2hvd01lc3NhZ2VzRE1TdWI6IHsgY246ICforqLpmIXmtojmga8nLCB0dzogJ+iogumWsea2iOaBrycsIGVuOiAnU3Vic2NyaWJlJyB9LAogIH0pOwoKICBzaWRlYmFyLm1lc3NhZ2VzID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnbGF5b3V0X2xlZnRfbWVzc2FnZXMnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogc2lkZWJhci5zaWRlYmFyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2lkZWJhclNob3dNZXNzYWdlcywKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnd2FybicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNpZGViYXJTaG93TWVzc2FnZXNXYXJuaW5nIH0sCiAgICAgIGF0bWU6IHsgdHlwZTogJ2Jvb2xlYW4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zaWRlYmFyU2hvd01lc3NhZ2VzQXRNZSwgaW5pdGlhbCgpIHsgcmV0dXJuIHRydWU7IH0gfSwKICAgICAgY210OiB7IHR5cGU6ICdib29sZWFuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2lkZWJhclNob3dNZXNzYWdlc0NtdCwgaW5pdGlhbCgpIHsgcmV0dXJuIHRydWU7IH0gfSwKICAgICAgbGlrZTogeyB0eXBlOiAnYm9vbGVhbicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNpZGViYXJTaG93TWVzc2FnZXNMaWtlIH0sCiAgICAgIGRtOiB7IHR5cGU6ICdib29sZWFuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2lkZWJhclNob3dNZXNzYWdlc0RNIH0sCiAgICAgIG1zZ2JveDogeyB0eXBlOiAnYm9vbGVhbicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNpZGViYXJTaG93TWVzc2FnZXNNc2dCb3ggfSwKICAgICAgZ3JvdXA6IHsgdHlwZTogJ2Jvb2xlYW4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zaWRlYmFyU2hvd01lc3NhZ2VzR3JvdXAgfSwKICAgICAgZG1zdWI6IHsgdHlwZTogJ2Jvb2xlYW4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zaWRlYmFyU2hvd01lc3NhZ2VzRE1TdWIgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIGNvbnN0IGh0bWwgPSB7CiAgICAgICAgbXNnOiB0ZW1wbGF0ZSA9PiB0ZW1wbGF0ZS5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ibGV2X0JveCBsZXZfQm94X25vYm9yZGVyIHlhd2YtbGVmdE1zZyI+PGgzIGNsYXNzPSJsZXYiPjxhIGhyZWY9Ii9hdC93ZWlibz9sZWZ0bmF2PTEiIGNsYXNzPSJTX3R4dDEiIG5vZGUtdHlwZT0iaXRlbSIgc3VkYS11YXRyYWNrPSJrZXk9VjZ1cGRhdGVfbGVmdG5hdmlnYXRlJmFtcDt2YWx1ZT1tZXNzYWdlIiBicGZpbHRlcj0ibWVzc2FnZSI+PHNwYW4gY2xhc3M9ImxldnR4dCB5YXdmLWxldnR4dCI+PC9zcGFuPjwvYT48L2gzPjwvZGl2PicsCiAgICAgICAgYXRtZTogdGVtcGxhdGUgPT4gdGVtcGxhdGUuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImxldiIgeWF3Zi1pZD0ibGVmdG5hdl9tc2dfYXQiPjxhIGNsYXNzPSJTX3R4dDEiIG5tPSJtZW50aW9uX2FsbCIgYnBmaWx0ZXI9Im1lc3NhZ2UiIGhyZWZleHRyYT0iL2F0L3dlaWJvfC9hdC9jb21tZW50IiBudD0ibWVudGlvbiIgbm9kZS10eXBlPSJpdGVtIiBocmVmPSIvYXQvd2VpYm8/bGVmdG5hdj0xJmFtcDt3dnI9NiZhbXA7bm9maWx0ZXI9MSI+PHNwYW4gY2xhc3M9Imljb19ibG9jayI+PGVtIG5vZGUtdHlwZT0ibGVmdF9pdGVtIiBjbGFzcz0iV19maWNvbiBmaWNvbl9kb3QgU19maWNvbiI+RDwvZW0+PC9zcGFuPjxzcGFuIGNsYXNzPSJsZXZ0eHQgeWF3Zi1sZXZ0eHQiPjwvc3Bhbj48L2E+PC9kaXY+JywKICAgICAgICBjbXQ6IHRlbXBsYXRlID0+IHRlbXBsYXRlLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJsZXYiIHlhd2YtaWQ9ImxlZnRuYXZfbXNnX2NtdCI+PGEgY2xhc3M9IlNfdHh0MSIgbm09ImNtdF9hbGwiIGJwZmlsdGVyPSJtZXNzYWdlIiBocmVmZXh0cmE9Ii9jb21tZW50L2luYm94fC9jb21tZW50L291dGJveCIgbm9kZS10eXBlPSJpdGVtIiBocmVmPSIvY29tbWVudC9pbmJveD9sZWZ0bmF2PTEmYW1wO3d2cj02Ij48c3BhbiBjbGFzcz0iaWNvX2Jsb2NrIj48ZW0gbm9kZS10eXBlPSJsZWZ0X2l0ZW0iIGNsYXNzPSJXX2ZpY29uIGZpY29uX2RvdCBTX2ZpY29uIj5EPC9lbT48L3NwYW4+PHNwYW4gY2xhc3M9ImxldnR4dCB5YXdmLWxldnR4dCI+PC9zcGFuPjwvYT48L2Rpdj4nLAogICAgICAgIGxpa2U6IHRlbXBsYXRlID0+IHRlbXBsYXRlLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJsZXYiIHlhd2YtaWQ9ImxlZnRuYXZfbXNnX2xpa2UiPjxhIGNsYXNzPSJTX3R4dDEiIG5tPSJhdHRpdHVkZSIgYnBmaWx0ZXI9Im1lc3NhZ2UiIG5vZGUtdHlwZT0iaXRlbSIgaHJlZj0iL2xpa2UvaW5ib3g/bGVmdG5hdj0xJmFtcDt3dnI9NiI+PHNwYW4gY2xhc3M9Imljb19ibG9jayI+PGVtIG5vZGUtdHlwZT0ibGVmdF9pdGVtIiBjbGFzcz0iV19maWNvbiBmaWNvbl9kb3QgU19maWNvbiI+RDwvZW0+PC9zcGFuPjxzcGFuIGNsYXNzPSJsZXZ0eHQgeWF3Zi1sZXZ0eHQiPjwvc3Bhbj48L2E+PC9kaXY+JywKICAgICAgICBkbTogdGVtcGxhdGUgPT4gdGVtcGxhdGUuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImxldiIgeWF3Zi1pZD0ibGVmdG5hdl9tc2dfZG0iPjxhIGNsYXNzPSJTX3R4dDEiIG5tPSJkbSIgYnBmaWx0ZXI9Im1lc3NhZ2UiIGhyZWZleHRyYT0iL21lc3NhZ2VzfC9tZXNzYWdlL2hpc3RvcnkiIG5vZGUtdHlwZT0iaXRlbSIgaHJlZj0iL21lc3NhZ2VzP2xlZnRuYXY9MSZhbXA7d3ZyPTYiPjxzcGFuIGNsYXNzPSJpY29fYmxvY2siPjxlbSBub2RlLXR5cGU9ImxlZnRfaXRlbSIgY2xhc3M9IldfZmljb24gZmljb25fZG90IFNfZmljb24iPkQ8L2VtPjwvc3Bhbj48c3BhbiBjbGFzcz0ibGV2dHh0IHlhd2YtbGV2dHh0Ij48L3NwYW4+PC9hPjwvZGl2PicsCiAgICAgICAgbXNnYm94OiB0ZW1wbGF0ZSA9PiB0ZW1wbGF0ZS5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ibGV2IiB5YXdmLWlkPSJsZWZ0bmF2X21zZ19tc2dib3giPjxhIGNsYXNzPSJTX3R4dDEiIG5tPSJtc2dib3hfYyIgYnBmaWx0ZXI9Im1lc3NhZ2UiIG5vZGUtdHlwZT0iaXRlbSIgaHJlZj0iL25vdGVzYm9hcmQ/bGVmdG5hdj0xJmFtcDt3dnI9NiI+PHNwYW4gY2xhc3M9Imljb19ibG9jayI+PGVtIG5vZGUtdHlwZT0ibGVmdF9pdGVtIiBjbGFzcz0iV19maWNvbiBmaWNvbl9kb3QgU19maWNvbiI+RDwvZW0+PC9zcGFuPjxzcGFuIGNsYXNzPSJsZXZ0eHQgeWF3Zi1sZXZ0eHQiPjwvc3Bhbj48L2E+PC9kaXY+JywKICAgICAgICBncm91cDogdGVtcGxhdGUgPT4gdGVtcGxhdGUuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImxldiIgeWF3Zi1pZD0ibGVmdG5hdl9tc2dfZ3JvdXAiPjxhIGNsYXNzPSJTX3R4dDEiIG5tPSJjaGF0X2dyb3VwX25vdGljZSIgYnBmaWx0ZXI9Im1lc3NhZ2UiIG5vZGUtdHlwZT0iaXRlbSIgaHJlZj0iL21lc3NhZ2VzP2xlZnRuYXY9MSZhbXA7d3ZyPTYmYW1wO2lzX25vdGljZT0xIj48c3BhbiBjbGFzcz0iaWNvX2Jsb2NrIj48ZW0gbm9kZS10eXBlPSJsZWZ0X2l0ZW0iIGNsYXNzPSJXX2ZpY29uIGZpY29uX2RvdCBTX2ZpY29uIj5EPC9lbT48L3NwYW4+PHNwYW4gY2xhc3M9ImxldnR4dCB5YXdmLWxldnR4dCI+PC9zcGFuPjwvYT48L2Rpdj4nLAogICAgICAgIGRtc3ViOiB0ZW1wbGF0ZSA9PiB0ZW1wbGF0ZS5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ibGV2IiB5YXdmLWlkPSJsZWZ0bmF2X21zZ19kbXN1YiI+PGEgY2xhc3M9IlNfdHh0MSIgbm09ImRtX2dyb3VwIiBicGZpbHRlcj0ibWVzc2FnZSIgbm9kZS10eXBlPSJpdGVtIiBocmVmPSIvbWVzc2FnZS9zdWI/bGVmdG5hdj0xJnd2cj02Ij48c3BhbiBjbGFzcz0iaWNvX2Jsb2NrIj48ZW0gY2xhc3M9IldfZmljb24gZmljb25fZG90IFNfZmljb24iIG5vZGUtdHlwZT0ibGVmdF9pdGVtIj5EPC9lbT48L3NwYW4+PHNwYW4gY2xhc3M9ImxldnR4dCB5YXdmLWxldnR4dCI+PC9zcGFuPjwvYT48L2Rpdj4nLAogICAgICB9OwogICAgICBjb25zdCBsZWZ0TmF2SXRlbSA9IGZ1bmN0aW9uICh0eXBlLCB0ZXh0KSB7CiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBodG1sW3R5cGVdKHRlbXBsYXRlKTsKICAgICAgICBjb25zdCB0ZXh0Q29udGFpbmVyID0gdGVtcGxhdGUucXVlcnlTZWxlY3RvcignLnlhd2YtbGV2dHh0Jyk7CiAgICAgICAgdGV4dENvbnRhaW5lci50ZXh0Q29udGVudCA9IHRleHQ7CiAgICAgICAgcmV0dXJuIHRlbXBsYXRlLmZpcnN0Q2hpbGQ7CiAgICAgIH07CiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gbGVmdE5hdkl0ZW0oJ21zZycsIGkxOG4uc2lkZWJhclNob3dNZXNzYWdlc01zZyk7CiAgICAgIFsnYXRtZScsICdjbXQnLCAnbGlrZScsICdkbScsICdtc2dib3gnLCAnZ3JvdXAnLCAnZG1zdWInXS5mb3JFYWNoKHR5cGUgPT4gewogICAgICAgIGNvbnN0IGNvbmZpZ0l0ZW0gPSBydWxlLnJlZlt0eXBlXTsKICAgICAgICBpZiAoIWNvbmZpZ0l0ZW0uaXNFbmFibGVkKCkpIHJldHVybjsKICAgICAgICBjb25zdCBpdGVtID0gbGVmdE5hdkl0ZW0odHlwZSwgY29uZmlnSXRlbS50ZXh0KCkpOwogICAgICAgIG1lc3NhZ2VzLmFwcGVuZENoaWxkKGl0ZW0pOwogICAgICB9KTsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBzaWRlYmFyU2hvd01lc3NhZ2VzKCkgewogICAgICAgIGNvbnN0IGdyb3VwTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN2Nl9wbF9sZWZ0bmF2X2dyb3VwIFtub2RlLXR5cGU9Imdyb3VwTGlzdCJdOm5vdChbeWF3Zi1tZXNzYWdlXSknKTsKICAgICAgICBpZiAoIWdyb3VwTGlzdCkgcmV0dXJuOwogICAgICAgIGxldCBob21lID0gZ3JvdXBMaXN0LnF1ZXJ5U2VsZWN0b3IoJy5sZXYgYVtocmVmKj0iL2hvbWU/Il0nKTsKICAgICAgICB3aGlsZSAoaG9tZSAmJiBob21lLnBhcmVudE5vZGUgIT09IGdyb3VwTGlzdCkgaG9tZSA9IGhvbWUucGFyZW50Tm9kZTsKICAgICAgICBpZiAoIWhvbWUpIHJldHVybjsKICAgICAgICBjb25zdCByZWYgPSBob21lID8gaG9tZS5uZXh0U2libGluZyA6IGdyb3VwTGlzdC5maXJzdENoaWxkOwogICAgICAgIGlmICghcmVmKSByZXR1cm47CiAgICAgICAgZ3JvdXBMaXN0LnNldEF0dHJpYnV0ZSgneWF3Zi1tZXNzYWdlJywgJycpOwogICAgICAgIHJlZi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShtZXNzYWdlcywgcmVmKTsKICAgICAgfSk7CiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIHNpZGViYXJTaG93TGlrZWQ6IHsgY246ICflnKjpppbpobXlt6bkvqfmoI/lop7liqAgKFY3KXx8e3tmYXZ9feaIkeeahOaUtuiXj3x7e2xpa2V9feaIkeeahOi1nicgfSwKICB9KTsKICBzaWRlYmFyLmxpa2VkID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogNywKICAgIGlkOiAnbGF5b3V0X2xlZnRfbGlrZWQnLAogICAgdmVyc2lvbjogODUsCiAgICBwYXJlbnQ6IHNpZGViYXIuc2lkZWJhciwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNpZGViYXJTaG93TGlrZWQsCiAgICByZWY6IHsKICAgICAgZmF2OiB7IHR5cGU6ICdib29sZWFuJywgaW5pdGlhbCgpIHsgcmV0dXJuIHRydWU7IH0gfSwKICAgICAgbGlrZTogeyB0eXBlOiAnYm9vbGVhbicsIG5pdGlhbCgpIHsgcmV0dXJuIHRydWU7IH0gfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgY29uZmlncyA9IHsKICAgICAgICBmYXY6IHRoaXMucmVmLmZhdi5nZXRDb25maWcoKSwKICAgICAgICBsaWtlOiB0aGlzLnJlZi5saWtlLmdldENvbmZpZygpLAogICAgICB9OwogICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSwgY29uZmlncykgewogICAgICAgIGNvbnN0IHlhd2YgPSB3aW5kb3dbcm9vdEtleV07CiAgICAgICAgY29uc3QgdnVlU2V0dXAgPSB5YXdmLnZ1ZVNldHVwOwoKICAgICAgICB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRzUmVuZGVyQnlUYWdOYW1lKCdsZWZ0LW5hdi1ob21lJywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgICAgICBjb25zdCB7IGgsIGluc2VydEJlZm9yZSB9ID0gTm9kZXM7CgogICAgICAgICAgY29uc3QgZGl2aWRlciA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcigneC13b28tZGl2aWRlcicpOwogICAgICAgICAgaWYgKCFkaXZpZGVyKSByZXR1cm47CiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkaXZpZGVyLnBhcmVudE5vZGU7CgogICAgICAgICAgY29uc3Qgb25DbGljayA9IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgICAgICAgICAgY29uc3Qgdm0gPSB0aGlzOwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgnd2VpYm8tdG9wLW5hdicsIGZ1bmN0aW9uICh2bSkgewogICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB2bS5jaGFubmVscy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLm5hbWUgPT09ICdwcm9maWxlJyk7CiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB2bS50YXBIYW5kbGUoaW5kZXgpOwogICAgICAgICAgICAgIH0sIHsgd2F0Y2g6IGZhbHNlIH0pOwogICAgICAgICAgICAgIHZ1ZVNldHVwLmNsb3Nlc3Qodm0sICduYXYnKS5nZXRNb2R1bGUoJ3Byb2ZpbGUnKTsKICAgICAgICAgICAgICB2bS4kcm91dGVyLnB1c2godGFyZ2V0KTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0uYmluZCh0aGlzKTsKCiAgICAgICAgICBpZiAoY29uZmlncy5mYXYpIHsKICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0geyBuYW1lOiAnY29sbGVjdCcsIHBhcmFtczogeyBpZDogdGhpcy4kcm9vdC5jb25maWcudWlkIH0gfTsKICAgICAgICAgICAgY29uc3QgbmF2SXRlbSA9IGgoJ25hdi1pdGVtJywgewogICAgICAgICAgICAgIGtleTogJ3lhd2YtZmF2JywKICAgICAgICAgICAgICBjbGFzczogJ3lhd2YtbmF2LWl0ZW0nLAogICAgICAgICAgICAgIGF0dHJzOiB7IGljb246ICduYXZDb2xsZWN0JywgdGV4dDogJ+aIkeeahOaUtuiXjycgfSwKICAgICAgICAgICAgICBvbjogeyBjbGljazogb25DbGljayh0YXJnZXQpIH0sCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdCBuYXZMaW5rID0gaCgnYScsIHsKICAgICAgICAgICAgICBjbGFzczogJ3lhd2YtbmF2LWxpbmsgeWF3Zi1leHRyYS1saW5rIHlhd2YtbGluay1tZnNwIHlhd2YtbGluay1ubWZwZCcsCiAgICAgICAgICAgICAgYXR0cnM6IHsgaHJlZjogdGhpcy4kcm91dGVyLnJlc29sdmUodGFyZ2V0KS5ocmVmIH0sCiAgICAgICAgICAgIH0sIFtuYXZJdGVtXSk7CiAgICAgICAgICAgIGluc2VydEJlZm9yZShjb250YWluZXIsIG5hdkxpbmssIGRpdmlkZXIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNvbmZpZ3MubGlrZSkgewogICAgICAgICAgICBjb25zdCB0YXJnZXQgPSB7IG5hbWU6ICdsaWtlJywgcGFyYW1zOiB7IGlkOiB0aGlzLiRyb290LmNvbmZpZy51aWQgfSB9OwogICAgICAgICAgICBsZXQgbmF2SXRlbSA9IGgoJ25hdi1pdGVtJywgewogICAgICAgICAgICAgIGtleTogJ3lhd2YtbGlrZScsCiAgICAgICAgICAgICAgY2xhc3M6ICd5YXdmLW5hdi1pdGVtJywKICAgICAgICAgICAgICBhdHRyczogeyBpY29uOiAnbmF2TGlrZScsIHRleHQ6ICfmiJHnmoTotZ4nIH0sCiAgICAgICAgICAgICAgb246IHsgY2xpY2s6IG9uQ2xpY2sodGFyZ2V0KSB9LAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKGNvbmZpZ3MubGluaykgewogICAgICAgICAgICAgIG5hdkl0ZW0gPSBoKCdhJywgewogICAgICAgICAgICAgICAgY2xhc3M6ICd5YXdmLW5hdi1saW5rIHlhd2YtZXh0cmEtbGluayB5YXdmLWxpbmstbWZzcCB5YXdmLWxpbmstbm1mcGQnLAogICAgICAgICAgICAgICAgYXR0cnM6IHsgaHJlZjogdGhpcy4kcm91dGVyLnJlc29sdmUodGFyZ2V0KS5ocmVmIH0sCiAgICAgICAgICAgICAgfSwgW25hdkl0ZW1dKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpbnNlcnRCZWZvcmUoY29udGFpbmVyLCBuYXZJdGVtLCBkaXZpZGVyKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSwgdXRpbC5pbmplY3Qucm9vdEtleSwgY29uZmlncyk7CiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIHNpZGViYXJNZXJnZTogeyBjbjogJ+WQiOW5tuW3puWPs+i+ueagj3zliLB7e3NpZGV9fXt7aX19JywgaGs6ICflkIjkvbXlt6blj7PpgormrIR85Yiwe3tzaWRlfX17e2l9fScsIHR3OiAn5ZCI5L215bem5Y+z6YKK5qyEfOWIsHt7c2lkZX19e3tpfX0nLCBlbjogJ01lcmdlIGxlZnQgJmFtcDsgcmlnaHQgY29sdW1uIHwgdG8ge3tzaWRlfX17e2l9fScgfSwKICAgIHNpZGViYXJNZXJnZVRvTGVmdDogeyBjbjogJ+W3puS+pycsIGhrOiAn5bem5YG0JywgdHc6ICflt6blgbQnLCBlbjogJ2xlZnQgc2lkZScgfSwKICAgIHNpZGViYXJNZXJnZVRvUmlnaHQ6IHsgY246ICflj7PkvqcnLCBoazogJ+WPs+WBtCcsIHR3OiAn5Y+z5YG0JywgZW46ICdyaWdodCBzaWRlJyB9LAogICAgc2lkZWJhck1lcmdlRGV0YWlsOiB7CiAgICAgIGNuOiAn5byA5ZCv5q2k6YCJ6aG55ZCO77yM5bem5qCP5YiH5o2i6aG16Z2i5Y+v6IO95Lya5a+86Ie05b6u6Z+z5LmQ5pKt5pS+5Lit5pat44CCJywKICAgIH0sCiAgfSk7CgogIHNpZGViYXIubWVyZ2UgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsYXlvdXRfc2lkZV9tZXJnZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBzaWRlYmFyLnNpZGViYXIsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zaWRlYmFyTWVyZ2UsCiAgICByZWY6IHsKICAgICAgc2lkZTogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIHNlbGVjdDogWwogICAgICAgICAgeyB2YWx1ZTogJ2xlZnQnLCB0ZXh0OiAoKSA9PiBpMThuLnNpZGViYXJNZXJnZVRvTGVmdCB9LAogICAgICAgICAgeyB2YWx1ZTogJ3JpZ2h0JywgdGV4dDogKCkgPT4gaTE4bi5zaWRlYmFyTWVyZ2VUb1JpZ2h0IH0sCiAgICAgICAgXSwKICAgICAgICBkZWZhdWx0OiAncmlnaHQnLAogICAgICB9LAogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnd2FybicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNpZGViYXJNZXJnZURldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIobmV3VmFsdWUgPT4gewogICAgICAgIGlmICghbmV3VmFsdWUpIHJldHVybjsKICAgICAgICBpZiAoIWxheW91dC5zY3JvbGwuc2Nyb2xsTGVmdC5nZXRDb25maWcoKSkgcmV0dXJuOwogICAgICAgIGlmICghbGF5b3V0LnNjcm9sbC5zY3JvbGxSaWdodC5nZXRDb25maWcoKSkgcmV0dXJuOwogICAgICAgIGxheW91dC5zY3JvbGwuc2Nyb2xsUmlnaHQuc2V0Q29uZmlnKGZhbHNlKTsKICAgICAgfSk7CiAgICAgIHRoaXMucmVmLnNpZGUuYWRkQ29uZmlnTGlzdGVuZXIoc2lkZWJhck9uKTsKICAgIH0sCiAgICBhaW5pdDogZnVuY3Rpb24gbWVyZ2VMZWZ0UmlnaHQoKSB7CiAgICAgIC8vIOWPkeeOsOmhtemdoueahOmAu+i+keS4jeS4gOagt++8jOWBmuWkhOeQhuW+iOm6u+eDpu+8jOaJgOS7peS4jeWBmuWkhOeQhgogICAgICBpZiAoaW5pdC5wYWdlLnR5cGUoKSA9PT0gJ2Rpc2NvdmVyJykgcmV0dXJuOwoKICAgICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmJvZHk7CiAgICAgIGNvbnN0IHNpZGUgPSB0aGlzLnJlZi5zaWRlLmdldENvbmZpZygpID09PSAncmlnaHQnID8gJ3JpZ2h0JyA6ICdsZWZ0JzsKICAgICAgbGV0IGxlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuV0JfbWFpbl9sJyk7CiAgICAgIGlmICghbGVmdCkgeyBzZXRUaW1lb3V0KG1lcmdlTGVmdFJpZ2h0LmJpbmQodGhpcyksIDEwMCk7IHJldHVybjsgfQoKICAgICAgY29uc3QgbGVmdFBsYWNlaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGxlZnRQbGFjZWhvbGRlci5jbGFzc05hbWUgPSAneWF3Zi1sZWZ0LWZha2UnOwogICAgICBsZWZ0UGxhY2Vob2xkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lICFpbXBvcnRhbnQnOwogICAgICBsZWZ0LmJlZm9yZShsZWZ0UGxhY2Vob2xkZXIpOwogICAgICBsZWZ0LnJlbW92ZSgpOwoKICAgICAgLy8g5ZyoIGJvZHkg5LiK6K6+572u5b2T5YmN5ZCI5bm254q25oCB77yM5L6b5YW25LuW6K6+572u6aG55oiW6ICF5YW25LuW6ISa5pys5L2/55SoCiAgICAgIGNvbnN0IHVwZGF0ZU1haW5BdHRyID0gZnVuY3Rpb24gKHNpZGUpIHsKICAgICAgICBpZiAoc2lkZSAmJiBtYWluLmdldEF0dHJpYnV0ZSgneWF3Zi1tZXJnZS1sZWZ0JykgIT09IHNpZGUpIHsKICAgICAgICAgIG1haW4uc2V0QXR0cmlidXRlKCd5YXdmLW1lcmdlLWxlZnQnLCBzaWRlKTsKICAgICAgICB9CiAgICAgICAgaWYgKCFzaWRlICYmIG1haW4uaGFzQXR0cmlidXRlKCd5YXdmLW1lcmdlLWxlZnQnKSkgewogICAgICAgICAgbWFpbi5yZW1vdmVBdHRyaWJ1dGUoJ3lhd2YtbWVyZ2UtbGVmdCcpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8vIOWwhuW3puagj+eahOagt+W8j+aUueS4uuWNoeeJh+aViOaenO+8iOaIluaUueWbnu+8iQogICAgICAvLyDnlLHkuo7lt6bmoI/moLflvI/pg73liqDlnKggLldCX2xlZnRfbmF2IOS4iu+8jOaJgOS7peS9v+eUqCAueWF3Zi1XQl9sZWZ0X25hdiDmnaXourLlvIDov5nkupvmoLflvI8KICAgICAgLy8g5L2G55u45YWz6ZyA6KaB5L+d55WZ55qE5qC35byP77yM5Zyo5LiK6Z2i6YeN5paw5re75YqgCiAgICAgIGNvbnN0IGZpeFN0eWxpc2ggPSAoZnVuY3Rpb24gKCkgewogICAgICAgIGxldCBsYXN0T25SaWdodCA9IGZhbHNlOwogICAgICAgIC8vIOW3puagj+WQiOW5tui/h+WOu+S5i+WQjuimgeaUueS4gOS4i+agt+W8jwogICAgICAgIC8vIOiAg+iZkeWIsOimgeiDvemAguW6lOWQhOenjeaooeadv++8jOaJgOS7peWwseaUueW+l+eojeW+ruacieeCuei/h+WIhgogICAgICAgIC8vIOavlOWmguivtOWOi+agueWwseayoeaciSAuV0JfbGVmdF9uYXYg6L+Z5Liq5bGe5oCn5LqG77yM5YWN5b6X6aKc6Imy5Lmx5o6JCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvblJpZ2h0KSB7CiAgICAgICAgICBpZiAob25SaWdodCA9PSBudWxsKSBvblJpZ2h0ID0gbGFzdE9uUmlnaHQ7IGVsc2UgbGFzdE9uUmlnaHQgPSBvblJpZ2h0OwogICAgICAgICAgY29uc3QgbmF2ID0gbGVmdC5xdWVyeVNlbGVjdG9yKCcuV0JfbGVmdF9uYXYsIC55YXdmLVdCX2xlZnRfbmF2Jyk7CiAgICAgICAgICBpZiAoIW5hdikgcmV0dXJuOwogICAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gb25SaWdodCA/ICd5YXdmLVdCX2xlZnRfbmF2IFdCX2NhcmR3cmFwIFNfYmcyJyA6ICdXQl9sZWZ0X25hdic7CiAgICAgICAgICBpZiAobmF2LmNsYXNzTmFtZSAhPT0gY2xhc3NOYW1lKSBuYXYuY2xhc3NOYW1lID0gY2xhc3NOYW1lOwogICAgICAgIH07CiAgICAgIH0oKSk7CgogICAgICAvLyDmm7TmlrDlt6bkvqfmoI/kvY3nva4KICAgICAgY29uc3QgcG9zaXRpb25MZWZ0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IHJlZiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN2Nl9wbF9yaWdodG1vZF9teWluZm8nKTsKICAgICAgICBjb25zdCByaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl9tYWluX3InKTsKICAgICAgICBjb25zdCBsZWZ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl9tYWluX2wnKTsKICAgICAgICBpZiAobGVmdG4gJiYgbGVmdCAhPT0gbGVmdG4pIHsgbGVmdCA9IGxlZnRuOyB9CiAgICAgICAgaWYgKHJlZikgewogICAgICAgICAgaWYgKHJlZi5uZXh0U2libGluZyAhPT0gbGVmdCkgewogICAgICAgICAgICByZWYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobGVmdCwgcmVmLm5leHRTaWJsaW5nKTsKICAgICAgICAgICAgdXBkYXRlTWFpbkF0dHIoc2lkZSk7CiAgICAgICAgICAgIGZpeFN0eWxpc2godHJ1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChyaWdodCkgewogICAgICAgICAgaWYgKHJpZ2h0LmZpcnN0Q2hpbGQgIT09IGxlZnQpIHsKICAgICAgICAgICAgcmlnaHQuaW5zZXJ0QmVmb3JlKGxlZnQsIHJpZ2h0LmZpcnN0Q2hpbGQpOwogICAgICAgICAgICB1cGRhdGVNYWluQXR0cihzaWRlKTsKICAgICAgICAgICAgZml4U3R5bGlzaCh0cnVlKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGxlZnRQbGFjZWhvbGRlci5wcmV2aW91c1NpYmxpbmcgIT09IGxlZnQpIHsKICAgICAgICAgICAgbGVmdFBsYWNlaG9sZGVyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGxlZnQsIGxlZnRQbGFjZWhvbGRlcik7CiAgICAgICAgICAgIHVwZGF0ZU1haW5BdHRyKCk7CiAgICAgICAgICAgIGZpeFN0eWxpc2goZmFsc2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGNzcy5hcHBlbmQoYApbeWF3Zi1tZXJnZS1sZWZ0XSAuV0JfZnJhbWUgLldCX21haW5fbCwKW3lhd2YtbWVyZ2UtbGVmdF0gLldCX2ZyYW1lIC55YXdmLVdCX2xlZnRfbmF2LApbeWF3Zi1tZXJnZS1sZWZ0XSAuV0JfZnJhbWUgLldCX2xlZnRfbmF2IHsgd2lkdGg6IDIyOXB4OyBwYWRkaW5nOiAwOyBmbG9hdDogbm9uZTsgfQpbeWF3Zi1tZXJnZS1sZWZ0XSAuV0JfZnJhbWUgeyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzAwcHggY2VudGVyOyBwYWRkaW5nLWxlZnQ6IDEwcHg7IH0KW3lhd2YtbWVyZ2UtbGVmdF0gLldCX2ZyYW1lIC55YXdmLVdCX2xlZnRfbmF2IC5sZXZfbGluZSBmaWVsZHNldCwKW3lhd2YtbWVyZ2UtbGVmdF0gLldCX2ZyYW1lIC5XQl9sZWZ0X25hdiAubGV2X2xpbmUgZmllbGRzZXQgeyBwYWRkaW5nLWxlZnQ6IDE5MHB4OyB9Clt5YXdmLW1lcmdlLWxlZnRdIC5XQl9sZWZ0X25hdiAubGV2IGE6aG92ZXIsIC5XQl9sZWZ0X25hdiAubGV2X2N1cnIsClt5YXdmLW1lcmdlLWxlZnRdIC5XQl9sZWZ0X25hdiAubGV2X2N1cnI6aG92ZXIsClt5YXdmLW1lcmdlLWxlZnRdIC5XQl9sZWZ0X25hdiAubGV2bW9yZSAubW9yZSB7IGJhY2tncm91bmQ6IHJnYmEoMTI4LCAxMjgsIDEyOCwgMC4xKSAhaW1wb3J0YW50OyB9Clt5YXdmLW1lcmdlLWxlZnRdIC5XQl9sZWZ0X25hdiAubGV2X0JveCwKW3lhd2YtbWVyZ2UtbGVmdF0gLldCX2xlZnRfbmF2IGZpZWxkc2V0IHsgYm9yZGVyLWNvbG9yOiByZ2JhKDEyOCwgMTI4LCAxMjgsIDAuNSkgIWltcG9ydGFudDsgfQpbeWF3Zi1tZXJnZS1sZWZ0XSAuV0JfZnJhbWUgLldCX21haW5fbCAjdjZfcGxfbGVmdG5hdl9tc2dib3gueWF3Zi1jYXJkd3JhcCBoMyB7IHBhZGRpbmc6IDAgMTZweDsgfQpbeWF3Zi1tZXJnZS1sZWZ0XSAuV0Jfd2ViaW1fcGFnZSAjd2VpYm9jaGF0IHsgcG9zaXRpb246IHN0YXRpYyAhaW1wb3J0YW50OyB9Clt5YXdmLW1lcmdlLWxlZnRdIC5XQl93ZWJpbV9wYWdlIC53ZWJpbV9jb250YWN0c19tb2QgeyBwb3NpdGlvbjogc3RhdGljICFpbXBvcnRhbnQ7IG1heC1oZWlnaHQ6IGNhbGMoMTAwdmggLSA0MTBweCk7IH0KW3lhd2YtbWVyZ2UtbGVmdF0gLldCX3dlYmltX3BhZ2UgLndlYmltX2NvbnRhY3RzX2JkIHsgbWF4LWhlaWdodDogY2FsYygxMDB2aCAtIDQ3MHB4KTsgfQpbeWF3Zi1tZXJnZS1sZWZ0XSAud2ViaW1fY2hhdF93aW5kb3cgLldCX3dlYmltX3BhZ2UgLndlYmltX2NvbnRhY3RzX21vZCwKW3lhd2YtbWVyZ2UtbGVmdF0gLndlYmltX2NoYXRfd2luZG93IC5XQl93ZWJpbV9wYWdlIC53ZWJpbV9jb250YWN0c19iZCB7IG1heC1oZWlnaHQ6IG5vbmU7IH0KW3lhd2YtbWVyZ2UtbGVmdF0gYm9keSAuV19nb3RvcCB7IG1hcmdpbi1sZWZ0OiBjYWxjKGNhbGModmFyKC0teWF3Zi1mZWVkLXdpZHRoKSArIDI2MHB4KSAvIDIpOyB9Clt5YXdmLW1lcmdlLWxlZnRdIC51bmxvZ2luX2xlZnRfbmF2IC5sZXZfQm94IHsgcG9zaXRpb246IHN0YXRpYyAhaW1wb3J0YW50OyB3aWR0aDogMjMwcHg7IH0KW3lhd2YtbWVyZ2UtbGVmdD0ibGVmdCJdIC5XQl9mcmFtZSAuV0JfbWFpbl9yIHsgZmxvYXQ6IGxlZnQ7IH0KW3lhd2YtbWVyZ2UtbGVmdD0ibGVmdCJdIC5XQl9mcmFtZSAuV0JfbWFpbl9jIHsgZmxvYXQ6IHJpZ2h0OyB9CgpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxMDA2cHgpIHsKICBib2R5W3lhd2YtbWVyZ2UtbGVmdF0gYS5XX2dvdG9wIHsgbWFyZ2luLWxlZnQ6IGNhbGMoY2FsYyh2YXIoLS15YXdmLWZlZWQtd2lkdGgpICsgMjBweCkgLyAyKTsgfQogIGJvZHlbeWF3Zi1tZXJnZS1sZWZ0PSJsZWZ0Il0gLldCX21haW4gLldCX21haW5fYyB7IGZsb2F0OiBub25lOyB9CiAgYm9keVt5YXdmLW1lcmdlLWxlZnQ9ImxlZnQiXSAuV19mb2xkIHsgcmlnaHQ6IGF1dG87IGxlZnQ6IDA7IC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZVgoLTEpOyB0cmFuc2Zvcm06IHNjYWxlWCgtMSk7IH0KICBib2R5W3lhd2YtbWVyZ2UtbGVmdD0ibGVmdCJdIC5XX2ZvbGQuV19mb2xkX291dCB7IGxlZnQ6IDI2OXB4OyB9CiAgYm9keVt5YXdmLW1lcmdlLWxlZnQ9ImxlZnQiXSAuV0JfbWFpbl9yIHsgcmlnaHQ6IGF1dG87IGxlZnQ6IDBweDsgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpIHRyYW5zbGF0ZVooMHB4KTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xMDAlKSB0cmFuc2xhdGVaKDBweCk7IH0KICBib2R5W3lhd2YtbWVyZ2UtbGVmdD0ibGVmdCJdIC5XQl9tYWluX3IuV19mb2xkX2xheWVyIHsgbGVmdDogMjY5cHg7IH0KICBib2R5W3lhd2YtbWVyZ2UtbGVmdD0ibGVmdCJdIC5XQl9tYWluX3IgeyBkaXJlY3Rpb246IHJ0bDsgfQogIGJvZHlbeWF3Zi1tZXJnZS1sZWZ0PSJsZWZ0Il0gLldCX21haW5fciAuV0JfY2FyZHdyYXAgeyBkaXJlY3Rpb246IGx0cjsgfQp9CgpgKTsKCiAgICAgIC8vIGZvbGxvd2luZyBjb2RlcyBhcmUgY29waWVkIGFuZCBtb2RpZmllZCBmcm9tIHdlaWJvLCBzb21lIG9uZSBlbHNlIG1heSBob2xkIGNvcHlyaWdodAogICAgICAvLyBjb2RlcyBtb2RpZmllZCBmcm9tIGh0dHA6Ly9pbWcudC5zaW5hanMuY24vdDYvc3R5bGUvY3NzL21vZHVsZS9jb21iaW5hdGlvbi9ob21lX0EuY3NzIGJlZ2luCiAgICAgIGNzcy5hcHBlbmQoYAoueWF3Zi1XQl9sZWZ0X25hdiB7IHdpZHRoOiAxNTBweDsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2X0JveCB7IC8qIGJvcmRlci1ib3R0b20td2lkdGg6IDFweDsgYm9yZGVyLWJvdHRvbS1zdHlsZTogc29saWQ7ICovIH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldl9Cb3hfbm9ib3JkZXIgeyBib3JkZXItYm90dG9tOiBub25lOyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXZfbGluZSBmaWVsZHNldCB7IGRpc3BsYXk6IGJsb2NrOyBoZWlnaHQ6IDIycHg7IHBhZGRpbmc6IDAgMCAwIDEyMHB4OyB6b29tOiAxOyBjbGVhcjogYm90aDsgYm9yZGVyLXRvcC13aWR0aDogMXB4OyBib3JkZXItdG9wLXN0eWxlOiBzb2xpZDsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2X2xpbmUgbGVnZW5kIHsgbGluZS1oZWlnaHQ6IDIycHg7IGZvbnQtc2l6ZTogMTRweDsgcGFkZGluZzogMCAzcHggMCA0cHg7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldl9saW5lIGxlZ2VuZCAuZmljb25fc2V0dXA6aG92ZXIgeyB0ZXh0LXNoYWRvdzogMHB4IDBweCA0cHggcmdiYSgwLCAwLCAwLCAuNCk7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldl9saW5lX3YyIGZpZWxkc2V0IHsgaGVpZ2h0OiAxMXB4OyBtYXJnaW4tdG9wOiAxMXB4OyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXZfQm94IGgzIHsgZGlzcGxheTogYmxvY2s7IGhlaWdodDogMzRweDsgbGluZS1oZWlnaHQ6IDM0cHg7IGZvbnQtc2l6ZTogMTRweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2X0JveCBoMy5sZXYgYSB7IGZvbnQtc2l6ZTogMTRweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IHBhZGRpbmc6IDAgMCAwIDE1cHg7IGhlaWdodDogMzRweDsgbGluZS1oZWlnaHQ6IDM0cHg7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldl9Cb3ggaDMubGV2IGEgLnBpYyB7IHdpZHRoOiAxOHB4OyBoZWlnaHQ6IDE4cHg7IGZsb2F0OiBsZWZ0OyBtYXJnaW46IDhweCA1cHggMCAwOyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXZfQm94IGgzLmxldiBhIC5XX2ZpY29uIHsgZmxvYXQ6IHJpZ2h0OyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXZfQm94IGgzLlNfdHh0MSB7IHBhZGRpbmc6IDAgMCAwIDE1cHg7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldl9Cb3ggaDMgLmZpY29uX2FkZCwgLldCX2xlZnRfbmF2IC5sZXZfQm94IGgzIC5maWNvbl9zZXR1cCB7IGRpc3BsYXk6IGJsb2NrOyBmbG9hdDogcmlnaHQ7IGZvbnQtc2l6ZTogMTRweDsgbWFyZ2luLXJpZ2h0OiAxMHB4OyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXZfQm94IGgzIC5maWNvbl9hZGQ6aG92ZXIsIC5XQl9sZWZ0X25hdiAubGV2X0JveCBoMyAuZmljb25fc2V0dXA6aG92ZXIgeyB0ZXh0LXNoYWRvdzogMHB4IDBweCA0cHggcmdiYSgwLCAwLCAwLCAuNCk7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldiBhIHsgZGlzcGxheTogYmxvY2s7IGhlaWdodDogMzRweDsgbGluZS1oZWlnaHQ6IDM0cHg7IGZvbnQtc2l6ZTogMTJweDsgcGFkZGluZzogMCAwIDAgMTNweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldiAubGV2X2N1cnIgLmxldnR4dCB7IGZvbnQtd2VpZ2h0OiBib2xkOyB9IAoueWF3Zi1XQl9sZWZ0X25hdiAubGV2IC5sZXZfY3VyciAuZmljb25fZG90LCAuV0JfbGVmdF9uYXYgLmxldiAubGV2X2N1cnIgLmZpY29uX2ZyaWVuZHMsIC5XQl9sZWZ0X25hdiAubGV2IC5sZXZfY3VyciAuZmljb25fZ3JvdXB3YiwgLldCX2xlZnRfbmF2IC5sZXYgLmxldl9jdXJyIC5maWNvbl9wX2ludGVyZXN0LCAuV0JfbGVmdF9uYXYgLmxldiAubGV2X2N1cnIgLmZpY29uX3Bfcm1kLCAuV0JfbGVmdF9uYXYgLmxldiAubGV2X2N1cnIgLmZpY29uX3BfcXVpZXRmb2xsb3csIC5XQl9sZWZ0X25hdiAubGV2IC5sZXZfY3VyciAuZmljb25fdnBsdXMgeyB3aWR0aDogMTJweDsgbGV0dGVyLXNwYWNpbmc6IDE4cHg7IHRleHQtaW5kZW50OiAtMzBweDsgfSAKLnlhd2YtV0JfbGVmdF9uYXYgLmxldiAubGV2X2N1cnIgLmZpY29uX2RvdDphZnRlciwgLldCX2xlZnRfbmF2IC5sZXYgLmxldl9jdXJyIC5maWNvbl9mcmllbmRzOmFmdGVyLCAuV0JfbGVmdF9uYXYgLmxldiAubGV2X2N1cnIgLmZpY29uX2dyb3Vwd2I6YWZ0ZXIsIC5XQl9sZWZ0X25hdiAubGV2IC5sZXZfY3VyciAuZmljb25fcF9pbnRlcmVzdDphZnRlciwgLldCX2xlZnRfbmF2IC5sZXYgLmxldl9jdXJyIC5maWNvbl9wX3JtZDphZnRlciwgLldCX2xlZnRfbmF2IC5sZXYgLmxldl9jdXJyIC5maWNvbl9wX3F1aWV0Zm9sbG93OmFmdGVyLCAuV0JfbGVmdF9uYXYgLmxldiAubGV2X2N1cnIgLmZpY29uX3ZwbHVzOmFmdGVyIHsgY29udGVudDogIkIiOyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXYgLmZpY29uX2dvdG9wIHsgZGlzcGxheTogbm9uZTsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2X2dvdG9wIGE6aG92ZXIgLmZpY29uX2dvdG9wIHsgZGlzcGxheTogYmxvY2s7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldl9nb3RvcCBhOmhvdmVyIC5maWNvbl9nb3RvcDpob3ZlciB7IHRleHQtc2hhZG93OiAwcHggMHB4IDRweCByZ2JhKDAsIDAsIDAsIC40KTsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2IC5sZXZ0eHQgeyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IG1heC13aWR0aDogODJweDsgb3ZlcmZsb3c6IGhpZGRlbjsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IHdoaXRlLXNwYWNlOiBub3dyYXA7IGN1cnNvcjogcG9pbnRlcjsgfQoueWF3Zi1XQl9sZWZ0X25hdiAubGV2IC5XX25ld19jb3VudCB7IGZsb2F0OiByaWdodDsgbWFyZ2luOiAxMHB4IDEwcHggMCAwOyAqbWFyZ2luOiAtMjVweCAxMHB4IDAgMDsgYmFja2dyb3VuZDogI2VkNzQxYzsgY29sb3I6ICNmZmY7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldiAuV19uZXcgeyBmbG9hdDogcmlnaHQ7IG1hcmdpbjogMTJweCA4cHggMCAwOyB9IAoueWF3Zi1XQl9sZWZ0X25hdiAubGV2IC5pY29fYmxvY2sgeyBmbG9hdDogbGVmdDsgd2lkdGg6IDE3cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAwIDNweCAwIDA7IH0KLnlhd2YtV0JfbGVmdF9uYXYgLmxldiAuaWNvX2Jsb2NrIC5waWMgeyB3aWR0aDogMTZweDsgaGVpZ2h0OiAxNnB4OyBmbG9hdDogbGVmdDsgbWFyZ2luLXRvcDogN3B4OyB9IAoueWF3Zi1XQl9sZWZ0X25hdiAubGV2IC5maWNvbl9ob3QsIC5XQl9sZWZ0X25hdiAubGV2IC5maWNvbl92aWRlbyB7IG1hcmdpbjogMDsgZm9udC1zaXplOiAxNHB4OyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXZtb3JlIHsgZGlzcGxheTogYmxvY2s7IGhlaWdodDogMzBweDsgbGluZS1oZWlnaHQ6IDMwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfSAKLnlhd2YtV0JfbGVmdF9uYXYgLmxldm1vcmUgLm1vcmUgeyBwb3NpdGlvbjogcmVsYXRpdmU7IGhlaWdodDogMTRweDsgbGluZS1oZWlnaHQ6IDE0cHg7IHBhZGRpbmc6IDJweCA2cHg7IGJvcmRlci1yYWRpdXM6IDNweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyB6b29tOiAxOyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5sZXZtb3JlIC5XX2J0bl9iIHsgbWFyZ2luOiA4cHggMTBweCA4cHggMDsgfSAKLnlhd2YtV0JfbGVmdF9uYXYgLmxldm1vcmUgLldfbmV3IHsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IHJpZ2h0OiAtMXB4OyB9Ci55YXdmLVdCX2xlZnRfbmF2IC5VSV9zY3JvbGxWaWV3IHsgcG9zaXRpb246IHJlbGF0aXZlOyB9IAoueWF3Zi1XQl9sZWZ0X25hdiAuV19zY3JvbGxfeSB7IHJpZ2h0OiAwOyB9IApgKTsKICAgICAgLy8gY29kZXMgbW9kaWZpZWQgZnJvbSBodHRwOi8vaW1nLnQuc2luYWpzLmNuL3Q2L3N0eWxlL2Nzcy9tb2R1bGUvY29tYmluYXRpb24vaG9tZV9BLmNzcyBlbmQKCiAgICAgIC8vIOW8uuWItueCueWHu+mTvuaOpeaXtuWIt+aWsOmhtemdou+8jOS7peino+WGs+WboOaatOWKm+S/ruaUuemAoOaIkOeahOmXrumimAogICAgICBjb25zdCBmb3JjZVJlZmx1c2ggPSAoZnVuY3Rpb24gKCkgewogICAgICAgIGxldCBsID0gbnVsbDsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKGwgPT09IGxlZnQpIHJldHVybjsgZWxzZSBsID0gbGVmdDsKICAgICAgICAgIGxlZnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gZS50YXJnZXQuY2xvc2VzdCgnYScpOyBpZiAoIXQpIHJldHVybjsKICAgICAgICAgICAgY29uc3QgaHJlZiA9IHQuaHJlZjsgaWYgKCFocmVmLm1hdGNoKC9eKD86aHR0cHM/OilcL1wvLykpIHJldHVybjsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAoaHJlZikgeyBsb2NhdGlvbi5hc3NpZ24oaHJlZik7IH0sIGhyZWYpOwogICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgfTsKICAgICAgfSgpKTsKCiAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gc2lkZWJhck1lcmdlKCkgewogICAgICAgIHBvc2l0aW9uTGVmdCgpOwogICAgICAgIGZpeFN0eWxpc2goKTsKICAgICAgICBmb3JjZVJlZmx1c2goKTsKICAgICAgfSk7CiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGFsbFNpZGViYXJPbjogeyBjbjogJ+e7n+S4gOWQhOexu+mhtemdouS+p+agj3zliLB7e3NpZGV9fScsIHR3OiAn57Wx5LiA5ZCE6aGe6aCB6Z2i5YG05qyEfOWIsHt7c2lkZX19JywgZW46ICdSZWxvY2F0ZSBzaWRlIGJhciBmb3IgYWxsIHBhZ2VzIHwgdG8ge3tzaWRlfX0nIH0sCiAgICBhbGxTaWRlYmFyT25MZWZ0OiB7IGNuOiAn5bem5L6nJywgdHc6ICflt6blgbQnLCBlbjogJ2xlZnQgc2lkZScgfSwKICAgIGFsbFNpZGViYXJPblJpZ2h0OiB7IGNuOiAn5Y+z5L6nJywgdHc6ICflj7PlgbQnLCBlbjogJ3JpZ2h0IHNpZGUnIH0sCiAgfSk7CgogIHNpZGViYXIuYWxsU2lkZWJhck9uID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnbGF5b3V0X3NpZGVfcG9zaXRpb24nLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogc2lkZWJhci5zaWRlYmFyLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uYWxsU2lkZWJhck9uLAogICAgcmVmOiB7CiAgICAgIHNpZGU6IHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBzZWxlY3Q6IFsKICAgICAgICAgIHsgdmFsdWU6ICdsZWZ0JywgdGV4dDogKCkgPT4gaTE4bi5hbGxTaWRlYmFyT25MZWZ0IH0sCiAgICAgICAgICB7IHZhbHVlOiAncmlnaHQnLCB0ZXh0OiAoKSA9PiBpMThuLmFsbFNpZGViYXJPblJpZ2h0IH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIH0sCiAgICBpbml0KCkgewogICAgICB0aGlzLnJlZi5zaWRlLmFkZENvbmZpZ0xpc3RlbmVyKHNpZGViYXJPbik7CiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIGNvbnN0IHNpZGUgPSB0aGlzLnJlZi5zaWRlLmdldENvbmZpZygpOwogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIGNob3NlU2lkZVJ1bm5lcigpIHsKICAgICAgICBsZXQgYiwgYywgcDsKICAgICAgICBpZiAoc2lkZSA9PT0gJ2xlZnQnKSB7CiAgICAgICAgICBiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsY19tYWluPi5XQl9mcmFtZV9jOmZpcnN0LWNoaWxkKy5XQl9mcmFtZV9iOmxhc3QtY2hpbGQnKTsgaWYgKCFiKSByZXR1cm47CiAgICAgICAgICBwID0gYi5wYXJlbnROb2RlOwogICAgICAgICAgcC5pbnNlcnRCZWZvcmUoYiwgcC5maXJzdENoaWxkKTsKICAgICAgICB9IGVsc2UgaWYgKHNpZGUgPT09ICdyaWdodCcpIHsKICAgICAgICAgIGMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxjX21haW4+LldCX2ZyYW1lX2I6Zmlyc3QtY2hpbGQrLldCX2ZyYW1lX2M6bGFzdC1jaGlsZCcpOyBpZiAoIWMpIHJldHVybjsKICAgICAgICAgIHAgPSBjLnBhcmVudE5vZGU7CiAgICAgICAgICBiID0gcC5maXJzdEVsZW1lbnRDaGlsZDsKICAgICAgICAgIHAuYXBwZW5kQ2hpbGQoYik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgfSk7CgogIC8vIOS9v+eUqOWFs+mUruWtl+OAgeato+WImeW8j+WSjOivnemimOi/h+a7pOeDremXqOivnemimOaooeWdlwogIC8vIOi/meS4quWKn+iDveayoeacieWBmuW8gOWFs++8jOWboOS4uuWFs+mUruWtl+etiemDveaYr+eUqOaIt+iHquW3seiuvue9rueahO+8jOebuOW9k+S6juW8gOWFs+S6hgogIGluaXQub25Mb2FkKCgpID0+IHsKICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gZmlsdGVSaWdodFRvcGljKCkgewogICAgICBjb25zdCBsaW5rcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhvdF90b3BpYyBsaTpub3QoW3lhd2YtcnRvcGljXSkgYVtzdWRhLXVhdHJhY2sqPSJob3R0b3BpY19yIl0nKSk7CiAgICAgIGlmICghbGlua3MubGVuZ3RoKSByZXR1cm47CiAgICAgIGNvbnN0IHRvcGljcyA9IHJ1bGVzLnRvcGljLnRleHQuaGlkZS5yZWYuaXRlbXMuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IHRleHRzID0gcnVsZXMuY29udGVudC50ZXh0LmhpZGUucmVmLml0ZW1zLmdldENvbmZpZygpOwogICAgICBjb25zdCByZWdleGVuID0gcnVsZXMuY29udGVudC5yZWdleC5oaWRlLnJlZi5pdGVtcy5nZXRDb25maWdDb21waWxlZCgpOwogICAgICBsaW5rcy5mb3JFYWNoKHRvcGljID0+IHsKICAgICAgICBjb25zdCB0ZXh0ID0gdG9waWMudGl0bGUucmVwbGFjZSgvIy9nLCAnJyk7CiAgICAgICAgZG8gewogICAgICAgICAgaWYgKHRvcGljcy5pbmNsdWRlcyh0ZXh0KSkgYnJlYWs7CiAgICAgICAgICBpZiAodGV4dHMuc29tZSh0ID0+IHRleHQuaW5jbHVkZXModCkpKSBicmVhazsKICAgICAgICAgIGlmIChyZWdleGVuLnNvbWUociA9PiByLnRlc3QodGV4dCkpKSBicmVhazsKICAgICAgICAgIHRvcGljLmNsb3Nlc3QoJ2xpJykuc2V0QXR0cmlidXRlKCd5YXdmLXJ0b3BpYycsICcnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IHdoaWxlIChmYWxzZSk7CiAgICAgICAgdG9waWMuY2xvc2VzdCgnbGknKS5yZW1vdmUoKTsKICAgICAgfSk7CiAgICB9KTsKICB9LCB7IHByaW9yaXR5OiBwcmlvcml0eS5MQVNUIH0pOwoKICBpMThuLnNob3dBbGxHcm91cHMgPSB7CiAgICBjbjogJ+WxleW8gOW3puagj+WIhue7hCcsCiAgICB0dzogJ+WxlemWi+W3puashOWIhue1hCcsCiAgICBlbjogJ1Nob3cgYWxsIGdyb3VwcyBpbiBsZWZ0IHNpZGViYXInLAogIH07CgogIHNpZGViYXIuc2hvd0FsbEdyb3VwcyA9IHJ1bGUuUnVsZSh7CiAgICB3ZWlib1ZlcnNpb246IFs2LCA3XSwKICAgIGlkOiAnbGF5b3V0X3NpZGVfc2hvd19hbGxfZ3JvdXBzJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IHNpZGViYXIuc2lkZWJhciwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNob3dBbGxHcm91cHMsCiAgICBhaW5pdCgpIHsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGNzcy5hcHBlbmQoYAoubGV2X0JveCAubGV2bW9yZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQoubGV2X0JveCBbbm9kZS10eXBlPSJtb3JlTGlzdCJdIHsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IH0KYCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHJvb3RLZXkpIHsKICAgICAgICAgIGNvbnN0IHlhd2YgPSB3aW5kb3dbcm9vdEtleV07CiAgICAgICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICAgICAgdnVlU2V0dXAuZWFjaENvbXBvbmVudFZNKCdsZWZ0LW5hdi1ob21lJywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2bS5jdXN0b21MaXN0KSkgcmV0dXJuOwogICAgICAgICAgICB2bS5jdXN0b21TaG93Q291bnQgPSBJbmZpbml0eTsKICAgICAgICAgICAgaWYgKHZtLmN1c3RvbVRhYnMgJiYgQXJyYXkuaXNBcnJheSh2bS5jdXN0b21UYWJzLmxpc3QpKSB7CiAgICAgICAgICAgICAgdm0uY3VzdG9tTGlzdCA9IFsuLi52bS5jdXN0b21UYWJzLmxpc3RdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudFJlbmRlcih2bSwgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgICAgICAgICAgY29uc3QgeyByZW1vdmVDaGlsZCB9ID0gTm9kZXM7CgogICAgICAgICAgICAgIGNvbnN0IG1vcmVCdXR0b24gPSBub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3IoJ3gtd29vLWJveDpsYXN0LWNoaWxkJyk7CiAgICAgICAgICAgICAgaWYgKG5vZGVTdHJ1Y3QubGFzdENoaWxkID09PSBtb3JlQnV0dG9uKSB7CiAgICAgICAgICAgICAgICByZW1vdmVDaGlsZChub2RlU3RydWN0LCBtb3JlQnV0dG9uKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSwgdXRpbC5pbmplY3Qucm9vdEtleSk7CiAgICAgIH0KICAgIH0sCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvbGF5b3V0L3Njcm9sbC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwoKICBjb25zdCBsYXlvdXQgPSB5YXdmLnJ1bGVzLmxheW91dDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3Qgc2Nyb2xsID0gbGF5b3V0LnNjcm9sbCA9IHt9OwoKICBpMThuLnNjcm9sbFRvb2xHcm91cFRpdGxlID0gewogICAgY246ICfpmo/pobXpnaLmu5rliqjlhYPntKAnLAogICAgdHc6ICfpmqjpoIHpnaLmjbLli5XlhYPntKAnLAogICAgZW46ICdFbGVtZW50cyBTY3JvbGwgd2l0aCBQYWdlJywKICB9OwoKICBzY3JvbGwuc2Nyb2xsID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGxheW91dC5sYXlvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zY3JvbGxUb29sR3JvdXBUaXRsZSwKICB9KTsKCiAgY29uc3Qgc2Nyb2xsQWZ0ZXJNZXJnZSA9IChwcmVmZXIgPSAnbGVmdCcpID0+ICgpID0+IHsKICAgIGlmICghc2Nyb2xsLnNjcm9sbExlZnQuZ2V0Q29uZmlnKCkpIHJldHVybjsKICAgIGlmICghc2Nyb2xsLnNjcm9sbFJpZ2h0LmdldENvbmZpZygpKSByZXR1cm47CiAgICBpZiAoIWxheW91dC5zaWRlYmFyLm1lcmdlLmdldENvbmZpZygpKSByZXR1cm47CiAgICBpZiAocHJlZmVyID09PSAnbGVmdCcpIHsKICAgICAgc2Nyb2xsLnNjcm9sbFJpZ2h0LnNldENvbmZpZyhmYWxzZSk7CiAgICB9IGVsc2UgewogICAgICBzY3JvbGwuc2Nyb2xsTGVmdC5zZXRDb25maWcoZmFsc2UpOwogICAgfQogIH07CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgc2Nyb2xsTGVmdDogeyBjbjogJ+WFgeiuuOmmlumhteW3pui+ueagj+maj+mhtemdoua7muWKqOWni+e7iOaYvuekuicsIHR3OiAn5YWB6Kix6aaW6aCB5bem6YKK5qyE6Zqo6aCB6Z2i5o2y5YuV5aeL57WC6aGv56S6JywgZW46ICdGbG9hdGluZyBsZWZ0IGNvbHVtbicgfSwKICAgIHNjcm9sbFJpZ2h0OiB7IGNuOiAn5YWB6K646aaW6aG15Y+z6L655qCP6ZqP6aG16Z2i5rua5Yqo5aeL57uI5pi+56S6JywgdHc6ICflhYHoqLHpppbpoIHlj7PpgormrITpmqjpoIHpnaLmjbLli5Xlp4vntYLpoa/npLonLCBlbjogJ0Zsb2F0aW5nIHJpZ2h0IGNvbHVtbicgfSwKICAgIHNjcm9sbE90aGVyczogeyBjbjogJ+WFgeiuuOWFtuS7luWFg+e0oOmaj+mhtemdoua7muWKqOWni+e7iOaYvuekuicsIHR3OiAn5YWB6Kix5YW25LuW5YWD57Sg6Zqo6aCB6Z2i5o2y5YuV5aeL57WC6aGv56S6JywgZW46ICdGbG9hdGluZyBvdGhlciBlbGVtZW50cycgfSwKICB9KTsKCiAgc2Nyb2xsLnNjcm9sbExlZnQgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdsYXlvdXRfbGVmdF9tb3ZlJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IHNjcm9sbC5zY3JvbGwsCiAgICBpbml0aWFsOiB0cnVlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2Nyb2xsTGVmdCwKICAgIC8vIOWmguaenOWQiOW5tuS6huW3puWPs+i+ueagj++8jOmCo+S5iOW3puagj+a1ruWKqOeahOaXtuWAmeWPs+agj+S4jeiDvea1ruWKqAogICAgaW5pdCgpIHsKICAgICAgdGhpcy5hZGRDb25maWdMaXN0ZW5lcihzY3JvbGxBZnRlck1lcmdlKCdsZWZ0JykpOwogICAgfSwKICAgIGFpbml0KCkgewogICAgICAvLyDnpoHnlKjlt6bmoI/mta7liqjnmoTnm7jlhbPku6PnoIHlnKjnpoHnlKjlj7PovrnmoI/mta7liqjnmoTpgLvovpHpgqPph4znu5/kuIDlpITnkIYKICAgICAgLy8g5aaC5p6c5ZCI5bm25LqG6L655qCP77yM6YKj5LmI5Lya5Zug5Li656aB55So5Y+z5qCP5rWu5Yqo6ICM5ZCM5pe256aB55So5Zyo5Y+z5qCP6YeM6Z2i55qE5bem5qCPCiAgICAgIC8vIOi/meaXtuWAmeW3puagj+WmguaenOi/mOimgea1ruWKqO+8jOmCo+S5iOWwseimgemHjeaWsOiuqeS7luWKqOi1t+adpQogICAgICAvLyDov5nph4znmoTnqIvluo/mmK/kuLrkuoborqnlt6bmoI/lho3liqjotbfmnaXnmoQKICAgICAgaWYgKCFsYXlvdXQuc2lkZWJhci5tZXJnZS5nZXRDb25maWcoKSkgcmV0dXJuOwogICAgICBjc3MuYXBwZW5kKGAKLldCX21haW5fciAuV0JfbWFpbl9sIHsgd2lsbC1jaGFuZ2U6IHNjcm9sbC1wb3NpdGlvbjsgfQouV0JfbWFpbl9yW3lhd2YtZml4ZWRdIC5XQl9tYWluX2wgeyBwb3NpdGlvbjogZml4ZWQ7IHRvcDogNjBweCAhaW1wb3J0YW50OyBvdmVyZmxvdzogaGlkZGVuOyBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsgd2lkdGg6IDE1MHB4OyB9CmJvZHlbeWF3Zi1tZXJnZS1sZWZ0XSAuV0JfbWFpbl9yW3lhd2YtZml4ZWRdIC5XQl9tYWluX2wgeyB3aWR0aDogMjI5cHg7IH0KYCk7CiAgICAgIGlmIChsYXlvdXQubmF2YmFyLmF1dG9IaWRlLmdldENvbmZpZygpKSB7CiAgICAgICAgdXRpbC5jc3MuYXBwZW5kKCcuV0JfbWFpbl9yW3lhd2YtZml4ZWRdIC5XQl9tYWluX2wgeyB0b3A6IDEwcHggIWltcG9ydGFudDsgfScpOwogICAgICB9CgogICAgICAvLyDpmZDliLblt6bmoI/mnIDlpKfpq5jluqbvvIzpgb/lhY3otoXlh7rkuK3pl7TljLrln58KICAgICAgY29uc3QgdXBkYXRlTWF4SGVpZ2h0ID0gZnVuY3Rpb24gKGxlZnQsIG1heEhlaWdodCkgewogICAgICAgIGNvbnN0IG5vbmUgPSBtYXhIZWlnaHQgPT0gbnVsbDsKICAgICAgICBjb25zdCB0ZXh0ID0gbm9uZSA/ICdub25lJyA6IG1heEhlaWdodCArICdweCc7CiAgICAgICAgY29uc3Qgc3JsID0gbGVmdC5xdWVyeVNlbGVjdG9yKCdbbm9kZS10eXBlPSJsZWZ0bmF2X3Njcm9sbCJdJyk7CiAgICAgICAgaWYgKCFzcmwpIHJldHVybjsKICAgICAgICBpZiAoKGxlZnQuc3R5bGUubWF4SGVpZ2h0IHx8ICdub25lJykgIT09IHRleHQpIHsKICAgICAgICAgIGxlZnQuc3R5bGUubWF4SGVpZ2h0ID0gdGV4dDsKICAgICAgICAgIGlmIChub25lKSBzcmwuc2V0QXR0cmlidXRlKCdzdHlsZScsICcnKTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBjb25zdCBsZXYgPSBBcnJheS5mcm9tKHNybC5xdWVyeVNlbGVjdG9yQWxsKCcubGV2X0JveCcpKTsKICAgICAgICAgICAgY29uc3QgY2ggPSBsZXYubWFwKGxiID0+IGxiLmNsaWVudEhlaWdodCkucmVkdWNlKCh4LCB5KSA9PiB4ICsgeSk7CiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWluKG1heEhlaWdodCAtIHNybC5vZmZzZXRUb3AsIGNoKSArICdweCc7CiAgICAgICAgICAgIGlmIChzcmwuc3R5bGUuaGVpZ2h0ICE9PSBoZWlnaHQpIHsKICAgICAgICAgICAgICBzcmwuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICAgICAgICAgIHNybC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyDmr4/lvZPmu5rliqjmu5rliqjmnaHmiJbosIPmlbTnqpflj6PlpKflsI/ml7bvvIzmm7TmlrDlt6bmoI/nirbmgIEKICAgICAgbGV0IGhhc1Njcm9sbCA9IGZhbHNlOwogICAgICBjb25zdCB1cGRhdGVMZWZ0UG9zaXRpb24gPSBmdW5jdGlvbiB1cGRhdGVMZWZ0UG9zaXRpb24oKSB7CiAgICAgICAgY29uc3QgbGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy55YXdmLVdCX2xlZnRfbmF2Jyk7CiAgICAgICAgY29uc3QgcmVmZXJlbmNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLldCX21haW5fcicpOwogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGNfbWFpbicpOwogICAgICAgIGlmICghbGVmdCB8fCAhcmVmZXJlbmNlKSByZXR1cm47CiAgICAgICAgY29uc3QgcmVmYyA9IHJlZmVyZW5jZS5nZXRDbGllbnRSZWN0cygpOwogICAgICAgIGlmICghcmVmYyB8fCAhcmVmY1swXSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHBvcyA9IHJlZmNbMF07CiAgICAgICAgaWYgKCFoYXNTY3JvbGwpIHsKICAgICAgICAgIGlmIChwb3MuYm90dG9tIDwgLTYwKSB7CiAgICAgICAgICAgIGhhc1Njcm9sbCA9IHRydWU7CiAgICAgICAgICAgIHJlZmVyZW5jZS5zZXRBdHRyaWJ1dGUoJ3lhd2YtZml4ZWQnLCAnJyk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChwb3MuYm90dG9tICsgbGVmdC5jbGllbnRIZWlnaHQgPiA2MCkgewogICAgICAgICAgICBoYXNTY3JvbGwgPSBmYWxzZTsKICAgICAgICAgICAgcmVmZXJlbmNlLnJlbW92ZUF0dHJpYnV0ZSgneWF3Zi1maXhlZCcpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoaGFzU2Nyb2xsKSB7CiAgICAgICAgICBjb25zdCBjaXAgPSBjb250YWluZXIuZ2V0Q2xpZW50UmVjdHMoKVswXTsKICAgICAgICAgIGNvbnN0IGZpcCA9IGxlZnQuZ2V0Q2xpZW50UmVjdHMoKVswXTsKICAgICAgICAgIGNvbnN0IG5vX3NwYWNlID0gZmFsc2U7IC8vIGZpbHRlci5pdGVtcy5zdHlsZS5zd2VpYm8ubm9fd2VpYm9fc3BhY2UuY29uZjsKICAgICAgICAgIGNvbnN0IG1heEhlaWdodEJvdHRvbSA9IGNpcC5ib3R0b20gLSBmaXAudG9wICsgKG5vX3NwYWNlID8gMCA6IC0xMCk7CiAgICAgICAgICBjb25zdCBtYXhIZWlnaHQgPSBNYXRoLm1heChNYXRoLm1pbihtYXhIZWlnaHRCb3R0b20sIHdpbmRvdy5pbm5lckhlaWdodCAtIDgwKSwgMCk7CiAgICAgICAgICBpZiAoY2lwICYmIGZpcCkgdXBkYXRlTWF4SGVpZ2h0KGxlZnQsIG1heEhlaWdodCk7CiAgICAgICAgfSBlbHNlIHsgdXBkYXRlTWF4SGVpZ2h0KGxlZnQpOyB9CiAgICAgIH07CgogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB1cGRhdGVMZWZ0UG9zaXRpb24pOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdXBkYXRlTGVmdFBvc2l0aW9uKTsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZCh1cGRhdGVMZWZ0UG9zaXRpb24pOwogICAgfSwKICB9KTsKCiAgc2Nyb2xsLnNjcm9sbFJpZ2h0ID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnbGF5b3V0X3JpZ2h0X21vdmUnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogc2Nyb2xsLnNjcm9sbCwKICAgIGluaXRpYWw6IHRydWUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zY3JvbGxSaWdodCwKICAgIGluaXQoKSB7CiAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoc2Nyb2xsQWZ0ZXJNZXJnZSgncmlnaHQnKSk7CgogICAgICBjb25zdCBtZXJnZSA9IGxheW91dC5zaWRlYmFyLm1lcmdlLmdldENvbmZpZygpOwogICAgICBjb25zdCBmbGVmdCA9IHNjcm9sbC5zY3JvbGxMZWZ0LmdldENvbmZpZygpOwogICAgICBjb25zdCBmcmlnaHQgPSBzY3JvbGwuc2Nyb2xsUmlnaHQuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGZvdGhlciA9IHNjcm9sbC5zY3JvbGxPdGhlcnMuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGl0ZW1BdHRycyA9IFsnZml4ZWQtaXRlbScsICdmaXhlZC1ib3gnXTsKICAgICAgY29uc3QgY29udGFpbmVyQXR0cnMgPSBbJ2ZpeGVkLWluYm94JywgJ2ZpeGVkLWlkJ107CiAgICAgIGNvbnN0IHdpdGhJbiA9IFtdOwogICAgICBjb25zdCBxdWVyeVN0cmluZyA9IGZ1bmN0aW9uIChjbGFzc05hbWVzLCBhdHRyaWJ1dGVzKSB7CiAgICAgICAgcmV0dXJuIGNsYXNzTmFtZXMubWFwKGNsYXNzTmFtZSA9PiAoCiAgICAgICAgICBhdHRyaWJ1dGVzLm1hcChhdHRyaWJ1dGUgPT4gYCR7Y2xhc3NOYW1lfSBbJHthdHRyaWJ1dGV9XWApLmpvaW4oJywnKQogICAgICAgICkpLmpvaW4oJywnKTsKICAgICAgfTsKICAgICAgaWYgKCFmcmlnaHQpIHdpdGhJbi5wdXNoKCcuV0JfbWFpbl9yJyk7CiAgICAgIGlmICghZmxlZnQgfHwgbWVyZ2UpIHdpdGhJbi5wdXNoKCcuV0JfbWFpbl9sJyk7CiAgICAgIGlmICghZm90aGVyKSB7IHdpdGhJbi5wdXNoKCcuV0JfZnJhbWVfYicsICcuV0JfZnJhbWVfYycpOyB9CiAgICAgIGlmICh3aXRoSW4ubGVuZ3RoID09PSAwKSByZXR1cm47CgogICAgICBjb25zdCByZW1vdmVGaXhlZCA9IGZ1bmN0aW9uIHJlbW92ZUZpeGVkKCkgewogICAgICAgIGNvbnN0IGl0ZW1RdWVyeSA9IHF1ZXJ5U3RyaW5nKHdpdGhJbiwgaXRlbUF0dHJzKTsKICAgICAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChpdGVtUXVlcnkpKTsKICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChmaXhlZCkgewogICAgICAgICAgY29uc3QgY2xvbmVkID0gZml4ZWQuY2xvbmVOb2RlKHRydWUpOwogICAgICAgICAgaXRlbUF0dHJzLmZvckVhY2goYXR0ciA9PiB7IGNsb25lZC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7IH0pOwogICAgICAgICAgZml4ZWQucmVwbGFjZVdpdGgoY2xvbmVkKTsKICAgICAgICB9KTsKICAgICAgICBjb25zdCBjb250YWluZXJRdWVyeSA9IHF1ZXJ5U3RyaW5nKHdpdGhJbiwgY29udGFpbmVyQXR0cnMpOwogICAgICAgIGNvbnN0IGNvbnRhaW5lcnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29udGFpbmVyUXVlcnkpKTsKICAgICAgICBjb250YWluZXJzLmZvckVhY2goZnVuY3Rpb24gKGNvbnRhaW5lcikgewogICAgICAgICAgY29uc3QgY2xvbmVkID0gY29udGFpbmVyLmNsb25lTm9kZSh0cnVlKTsKICAgICAgICAgIGNvbnRhaW5lckF0dHJzLmZvckVhY2goZnVuY3Rpb24gKGF0dHIpIHsgY2xvbmVkLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTsgfSk7CiAgICAgICAgICBjb25zdCBwYXJlbnQgPSBjb250YWluZXIucGFyZW50Tm9kZTsKICAgICAgICAgIGNvbnN0IHByZXYgPSBwYXJlbnQucHJldmlvdXNFbGVtZW50U2libGluZzsKICAgICAgICAgIGNvbnN0IGhhZFdyYXBlZCA9IHBhcmVudC5zdHlsZS53aWxsQ2hhbmdlICYmIHByZXYgJiYgcHJldi5pbm5lckhUTUwgPT09ICcnOwogICAgICAgICAgY29uc3QgcmVwbGFjZVRhcmdldCA9IGhhZFdyYXBlZCA/IHBhcmVudCA6IGNvbnRhaW5lcjsKICAgICAgICAgIGlmIChoYWRXcmFwZWQpIHByZXYucmVtb3ZlKCk7CiAgICAgICAgICByZXBsYWNlVGFyZ2V0LnJlcGxhY2VXaXRoKGNsb25lZCk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIG9ic2VydmVyLmRvbS5hZGQocmVtb3ZlRml4ZWQpOwogICAgfSwKICB9KTsKCiAgc2Nyb2xsLnNjcm9sbE90aGVycyA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2xheW91dF9vdGhlcl9tb3ZlJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IHNjcm9sbC5zY3JvbGwsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zY3JvbGxPdGhlcnMsCiAgICBpbml0aWFsOiB0cnVlLAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2xheW91dC9jaGF0LmpzCjsgKGZ1bmN0aW9uICgpIHsKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwoKICBjb25zdCBsYXlvdXQgPSB5YXdmLnJ1bGVzLmxheW91dDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgY29uc3QgY2hhdCA9IGxheW91dC5jaGF0ID0ge307CgogIGkxOG4uY2hhdFRvb2xHcm91cFRpdGxlID0gewogICAgY246ICfogYrlpKknLAogICAgZW46ICdDaGF0JywKICB9OwoKICBjaGF0LmNoYXQgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogbGF5b3V0LmxheW91dCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmNoYXRUb29sR3JvdXBUaXRsZSwKICB9KTsKCiAgaTE4bi5jaGF0UGFnZURpc2FibGVVbmxvYWRQcm9tcHQgPSB7CiAgICBjbjogJ+WFs+mXreiBiuWkqemhtemdouaXtuaXoOmcgOS6jOasoeehruiupCcsCiAgICB0dzogJ+mXnOmWieiBiuWkqemggemdouaZgueEoemcgOS6jOasoeeiuuiqjScsCiAgICBlbjogJ1ByZXZlbnQgcHJvbW9wdGluZyB3aGVuIGNsb3NlIGNoYXQgcGFnZScsCiAgfTsKCiAgY2hhdC5jaGF0UGFnZURpc2FibGVVbmxvYWRQcm9tcHQgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdjaGF0X3BhZ2VfZGlzYWJsZV91bmxvYWRfcHJvbXB0JywKICAgIHZlcnNpb246IDU3LAogICAgcGFyZW50OiBjaGF0LmNoYXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jaGF0UGFnZURpc2FibGVVbmxvYWRQcm9tcHQsCiAgICAvLyDlrp7njrDlnKggL2NvbnRlbnQvY2hhdC9ydWxlLmpzCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvbGF5b3V0L290aGVyLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGVudiA9IHlhd2YuZW52OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgZm9udExpc3QgPSB5YXdmLmZvbnRMaXN0OwogIGNvbnN0IGNoYXRmcmFtZSA9IHlhd2YuY2hhdGZyYW1lOwogIGNvbnN0IGJhY2tlbmQgPSB5YXdmLmJhY2tlbmQ7CiAgY29uc3QgZmVlZFBhcnNlciA9IHlhd2YuZmVlZDsKCiAgY29uc3QgbGF5b3V0ID0geWF3Zi5ydWxlcy5sYXlvdXQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CiAgY29uc3QgdGltZSA9IHV0aWwudGltZTsKICBjb25zdCBzdHJpbmdzID0gdXRpbC5zdHJpbmdzOwoKICBjb25zdCBkZXRhaWxzID0gbGF5b3V0LmRldGFpbHMgPSB7fTsKCiAgaTE4bi5kZXRhaWxzVG9vbEdyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+e7huiKgicsCiAgICB0dzogJ+e0sOevgCcsCiAgICBlbjogJ0RldGFpbHMnLAogIH07CgogIGRldGFpbHMuZGV0YWlscyA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBsYXlvdXQubGF5b3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZGV0YWlsc1Rvb2xHcm91cFRpdGxlLAogIH0pOwoKCiAgaTE4bi5zdHlsZVRleHRGb250RmFtaWx5ID0gewogICAgY246ICfmm7/mjaLnvZHpobXlrZfkvZPkuLp86KW/5paHe3t3ZXN0fX185Lit5paHe3tjaGluZXNlfX0nLAogICAgdHc6ICfmm7/mj5vntrLpoIHlrZflvaLngrp86KW/5paHe3t3ZXN0fX185Lit5paHe3tjaGluZXNlfX0nLAogICAgZW46ICdDdXN0b21pemUgZm9udHMgb24gd2VicGFnZSB8IFdlc3Rlcm4ge3t3ZXN0fX0gfCBDaGluZXNlIHt7Y2hpbmVzZX19JywKICB9OwoKICBjb25zdCBzdXBwb3J0ZWRGb250cyA9IGZvbnRMaXN0LmdldCgpOwoKICBsYXlvdXQuZm9udEZhbWlseSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZvbnRfZmFtaWx5JywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGRldGFpbHMuZGV0YWlscywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnN0eWxlVGV4dEZvbnRGYW1pbHksCiAgICByZWY6IHsKICAgICAgd2VzdDogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIHNlbGVjdDogc3VwcG9ydGVkRm9udHMudGhlbihmb250cyA9PiAoCiAgICAgICAgICBmb250cy53ZXN0Lm1hcCgoW2Nzc05hbWUsIG5hbWVdKSA9PiAoewogICAgICAgICAgICB2YWx1ZTogbmFtZSwKICAgICAgICAgICAgdGV4dDogbmFtZSwKICAgICAgICAgICAgc3R5bGU6IGBmb250LWZhbWlseTogJHtjc3NOYW1lfTsgZm9udC1zaXplOiAxMjAlO2AsCiAgICAgICAgICB9KSkKICAgICAgICApKSwKICAgICAgfSwKICAgICAgY2hpbmVzZTogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIHNlbGVjdDogc3VwcG9ydGVkRm9udHMudGhlbihmb250cyA9PiAoCiAgICAgICAgICBmb250cy5jaGluZXNlLm1hcCgoW2Nzc05hbWUsIG5hbWVdKSA9PiAoewogICAgICAgICAgICB2YWx1ZTogbmFtZSwKICAgICAgICAgICAgdGV4dDogbmFtZSwKICAgICAgICAgICAgc3R5bGU6IGBmb250LWZhbWlseTogJHtjc3NOYW1lfTsgZm9udC1zaXplOiAxMjAlO2AsCiAgICAgICAgICB9KSkKICAgICAgICApKSwKICAgICAgfSwKICAgIH0sCiAgICBhc3luYyBhaW5pdCgpIHsKICAgICAgY29uc3Qgd2VzdCA9IHRoaXMucmVmLndlc3QuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGNoaW5lc2UgPSB0aGlzLnJlZi5jaGluZXNlLmdldENvbmZpZygpOwogICAgICBjb25zdCBmb250cyA9IGF3YWl0IHN1cHBvcnRlZEZvbnRzOwogICAgICBjb25zdCBbd2VzdENzc25hbWVdID0gZm9udHMud2VzdC5maW5kKChbXywgbmFtZV0pID0+IG5hbWUgPT09IHdlc3QpOwogICAgICBjb25zdCBbY2hpbmVzZUNzc25hbWVdID0gZm9udHMuY2hpbmVzZS5maW5kKChbXywgbmFtZV0pID0+IG5hbWUgPT09IGNoaW5lc2UpOwogICAgICBjc3MuYXBwZW5kKGBodG1sIGJvZHksIGh0bWwgYm9keS5XQl9tYWNULCBodG1sIGJvZHkuV0JfeHBULCBodG1sIC5XQl93ZWJpbSB7IGZvbnQtZmFtaWx5OiAke3dlc3RDc3NuYW1lfSwgJHtjaGluZXNlQ3NzbmFtZX07IH1gKTsKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgYXZhdGFyU2hhcGU6IHsKICAgICAgY246ICfnu5/kuIDlpLTlg4/lvaLnirbkuLp8e3tzaGFwZX19JywKICAgICAgaGs6ICfntbHkuIDpoK3lg4/lvaLni4Dngrp8e3tzaGFwZX19JywKICAgICAgZW46ICdTaG93IGFsbCBhdmF0YXJzIGFzIHwge3tzaGFwZX19JywKICAgIH0sCiAgICBhdmF0YXJTaGFwZUNpcmNsZTogewogICAgICBjbjogJ+WchuW9oicsCiAgICAgIGhrOiAn5ZyT5b2iJywKICAgICAgZW46ICdDaXJjbGUnLAogICAgfSwKICAgIGF2YXRhclNoYXBlU3F1YXJlOiB7CiAgICAgIGNuOiAn5pa55b2iJywKICAgICAgZW46ICdTcXVhcmUnLAogICAgfSwKICB9KTsKCiAgZGV0YWlscy5hdmF0YXJTaGFwZSA9IHJ1bGUuUnVsZSh7CiAgICB3ZWlib1ZlcnNpb246IFs2LCA3XSwKICAgIGlkOiAnbGF5b3V0X2F2YXRhcl9zaGFwZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBkZXRhaWxzLmRldGFpbHMsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5hdmF0YXJTaGFwZSwKICAgIHJlZjogewogICAgICBzaGFwZTogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIGluaXRpYWw6ICdzcXVhcmUnLAogICAgICAgIHNlbGVjdDogWwogICAgICAgICAgeyB2YWx1ZTogJ2NpcmNsZScsIHRleHQ6ICgpID0+IGkxOG4uYXZhdGFyU2hhcGVDaXJjbGUgfSwKICAgICAgICAgIHsgdmFsdWU6ICdzcXVhcmUnLCB0ZXh0OiAoKSA9PiBpMThuLmF2YXRhclNoYXBlU3F1YXJlIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLnJlZi5zaGFwZS5nZXRDb25maWcoKTsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGlmIChzaGFwZSA9PT0gJ3NxdWFyZScpIHsKICAgICAgICAgIGNzcy5hcHBlbmQoYC5XX2ZhY2VfcmFkaXVzLCAuV19wZXJzb25faW5mbyAuY292ZXIgLmhlYWRwaWMsIC5QQ0RfaGVhZGVyIC5wZl9waG90bywgLlBDRF9oZWFkZXIgLnBob3RvX3dyYXAsIC5QQ0RfaGVhZGVyIC5wZl9waG90byAucGhvdG8sIC5QQ0RfdXNlcl9hIC5waWNpdGVtcyAucGljX2JveCwgLlBDRF9jb25uZWN0bGlzdCAuZm9sbG93X2JveCAubW9kX3BpYyBpbWcsIC5QQ0RfdXRfYSAucGljX2JveCwgLlBDRF9jb3VudGVyX2IgLnBpY19ib3gsIC5XQl9mZWVkX3YzIC5XQl9zb25GZWVkIC5XQl9mYWNlLCAuV0JfZmVlZF92MyAuV0Jfc29uRmVlZCAuV0JfZmFjZSAuZmFjZSBpbWcgeyBib3JkZXItcmFkaXVzOiAwICFpbXBvcnRhbnQ7IH1gKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY3NzLmFwcGVuZChgaW1nW3VzZXJjYXJkXSwgLldCX2ZhY2UgaW1nIHsgYm9yZGVyLXJhZGl1czogNTAlICFpbXBvcnRhbnQ7IH1gKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHNoYXBlID09PSAnY2lyY2xlJykgcmV0dXJuOwogICAgICAgIGNzcy5hcHBlbmQoYC53b28tYXZhdGFyLWhvdmVyTWFzaywgLndvby1hdmF0YXItaW1nIHsgYm9yZGVyLXJhZGl1czogMCAhaW1wb3J0YW50OyB9YCk7CiAgICAgIH0KICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgZmFzdEZhY2U6IHsgY246ICfooajmg4XpgInmi6nmoYbkvJjlhYjliJflh7rluLjnlKjlj4rnva7pobbooajmg4V8e3tjbGVhcn19JywgdHc6ICfooajmg4Xpgbjmk4fmoYblhKrlhYjliJflh7rluLjnlKjlj4rnva7poILooajmg4V8e3tjbGVhcn19JywgZW46ICdMaXN0IHRvcCBhbmQgcmVjZW50IGVtb2ppIG9uIHRoZSB0b3Agb2YgZW1vamkgc2VsZWN0b3IgfCB7e2NsZWFyfX0nIH0sCiAgICBmYXN0RmFjZVRvcDogeyBjbjogJ+e9rumhticsIHR3OiAn572u6aCCJywgZW46ICdUb3AnIH0sCiAgICBmYXN0RmFjZVRvcE5vdGljZTogeyBjbjogJ+WwhuS4i+aWueihqOaDheaLluaUvuiHs+atpOe9rumhticsIHR3OiAn5bCH5LiL5pa56KGo5oOF5ouW5pS+6Iez5q2k572u6aCCJywgZW46ICdEcmFnIGVtb2ppIGFuZCBkcm9wIGhlcmUgdG8gc3RpY2t5JyB9LAogICAgZmFzdEZhY2VSZWNlbnQ6IHsgY246ICfmnIDov5EnLCB0dzogJ+acgOi/kScsIGVuOiAnUmVjZW50JyB9LAogICAgZmFzdEZhY2VDbGVhcjogeyBjbjogJ+a4heepuuWIl+ihqCcsIHR3OiAn5riF6Zmk5riF5ZauJywgZW46ICdDbGVhciBMaXN0JyB9LAogIH0pOwoKICBkZXRhaWxzLmZhc3RGYWNlID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnbGF5b3V0X2Zhc3RfZmFjZScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBkZXRhaWxzLmRldGFpbHMsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mYXN0RmFjZSwKICAgIHJlZjogT2JqZWN0LmFzc2lnbih7fSwgLi4uWyd0b3AnLCAncmVjZW50J10ubWFwKGtleSA9PiAoewogICAgICBba2V5XTogewogICAgICAgIGluaXRpYWw6IFtdLAogICAgICAgIG5vcm1hbGl6ZSh2YWx1ZSkgewogICAgICAgICAgY29uc3QgZW1wdHlMaXN0ID0gQXJyYXkoMTApLmZpbGwobnVsbCk7CiAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gZW1wdHlMaXN0OwogICAgICAgICAgcmV0dXJuIHZhbHVlLmZpbHRlcihpdGVtID0+IHsKICAgICAgICAgICAgaWYgKGl0ZW0gPT09IG51bGwpIHJldHVybiB0cnVlOwogICAgICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLnRpdGxlICYmIGl0ZW0uaW1nICYmIGl0ZW0udGV4dCkgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0pLmNvbmNhdChlbXB0eUxpc3QpLnNsaWNlKDAsIDEwKTsKICAgICAgICB9LAogICAgICB9LAogICAgfSkpLCB7CiAgICAgIGNsZWFyOiB7CiAgICAgICAgcmVuZGVyKCkgewogICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxhIGNsYXNzPSJXX2J0bl9iIHlhd2YtY2xlYXItZmFjZSIgaHJlZj0iamF2YXNjcmlwdDo7Ij48c3BhbiBjbGFzcz0iV19mMTQiPjwvc3Bhbj48L2E+JzsKICAgICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQgPSBpMThuLmZhc3RGYWNlQ2xlYXI7CiAgICAgICAgICBjb250YWluZXIuZmlyc3RDaGlsZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICAgICAgZGV0YWlscy5mYXN0RmFjZS5yZWYudG9wLnNldENvbmZpZygpOwogICAgICAgICAgICBkZXRhaWxzLmZhc3RGYWNlLnJlZi5yZWNlbnQuc2V0Q29uZmlnKCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBjb250YWluZXIuZmlyc3RDaGlsZDsKICAgICAgICB9LAogICAgICB9LAogICAgfSksCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIC8vIOaYvuekuuS4gOS4quihqOaDhe+8m+iBiuWkqeeql+WPo+mHjOmdouihqOaDhei+k+WFpeeahOagvOW8j+WSjOWIq+eahOWcsOaWueS4jeS4gOagtwogICAgICBjb25zdCBjcmVhdGVGYWNlSXRlbSA9IGZ1bmN0aW9uIChmYWNlLCBpc0ltKSB7CiAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGlmICghZmFjZSkgcmV0dXJuIGxpOwogICAgICAgIGxpLnRpdGxlID0gZmFjZS50aXRsZTsKICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJywgYCR7aXNJbSA/ICd0ZXh0JyA6ICdpbnNlcnQnfT0ke2ZhY2UudGV4dH1gKTsKICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbi10eXBlJywgaXNJbSA/ICd3ZWJpbV9waGl6X2ZhY2UnIDogJ3NlbGVjdCcpOwogICAgICAgIGNvbnN0IGltZyA9IGxpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpKTsKICAgICAgICBpbWcuc3JjID0gZmFjZS5pbWc7CiAgICAgICAgcmV0dXJuIGxpOwogICAgICB9OwogICAgICAvKioKICAgICAgICog5bCG5YiX6KGo5pi+56S65Ye65p2l77yM6LCD5pW06aG65bqP5bC96YeP5L+d55WZ5bey5pyJ55qE6KGo5oOF55qE5L2N572uCiAgICAgICAqIEBwYXJhbSB7SFRNTFVMaXN0RWxlbWVudH0gdWwKICAgICAgICogQHBhcmFtIHt7dGl0bGUsIHRleHQsIGltZ31bXX0gZmFjZUxpc3QKICAgICAgICogQHBhcmFtIHtib29sZWFufSBpc0ltCiAgICAgICAqLwogICAgICBjb25zdCByZW5kZXJMaXN0S2VlcE9sZCA9IGZ1bmN0aW9uICh1bCwgZmFjZUxpc3QsIGlzSW0pIHsKICAgICAgICBjb25zdCBsaXN0SXRlbXMgPSBBcnJheS5mcm9tKHVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJykpOwogICAgICAgIGNvbnN0IG5ld0ZhY2VUaXRsZXMgPSBuZXcgU2V0KGZhY2VMaXN0Lm1hcChlID0+IGUgJiYgZS50aXRsZSkuZmlsdGVyKHQgPT4gdCkpOwogICAgICAgIGNvbnN0IGVtcHR5U2xvdHMgPSBbXTsKICAgICAgICBsaXN0SXRlbXMuZm9yRWFjaChsaSA9PiB7CiAgICAgICAgICBjb25zdCB0aXRsZSA9IGxpLnRpdGxlOwogICAgICAgICAgY29uc3QgZXhpc3RJbk5ldyA9IG5ld0ZhY2VUaXRsZXMuaGFzKHRpdGxlKTsKICAgICAgICAgIGlmIChleGlzdEluTmV3KSBuZXdGYWNlVGl0bGVzLmRlbGV0ZSh0aXRsZSk7CiAgICAgICAgICBlbHNlIGlmIChsaS50aXRsZSkgewogICAgICAgICAgICBjb25zdCBuZXdMaSA9IGNyZWF0ZUZhY2VJdGVtKG51bGwsIGlzSW0pOwogICAgICAgICAgICBsaS5yZXBsYWNlV2l0aChuZXdMaSk7CiAgICAgICAgICAgIGVtcHR5U2xvdHMucHVzaChuZXdMaSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlbXB0eVNsb3RzLnB1c2gobGkpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIFsuLi5uZXdGYWNlVGl0bGVzXS5mb3JFYWNoKHRpdGxlID0+IHsKICAgICAgICAgIGNvbnN0IGZhY2UgPSBmYWNlTGlzdC5maW5kKGZhY2UgPT4gZmFjZS50aXRsZSA9PT0gdGl0bGUpOwogICAgICAgICAgZW1wdHlTbG90cy5zaGlmdCgpLnJlcGxhY2VXaXRoKGNyZWF0ZUZhY2VJdGVtKGZhY2UsIGlzSW0pKTsKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIOWwhuWIl+ihqOaYvuekuuWHuuadpe+8jOS4jeiwg+aVtOmhuuW6j+WPr+iDveS/ruaUueW3suacieeahOihqOaDheS9jee9rgogICAgICAgKiBAcGFyYW0ge0hUTUxVTGlzdEVsZW1lbnR9IHVsCiAgICAgICAqIEBwYXJhbSB7e3RpdGxlLCB0ZXh0fVtdfSBmYWNlTGlzdAogICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzSW0KICAgICAgICovCiAgICAgIGNvbnN0IHJlbmRlckxpc3RLZWVwSW5kZXggPSBmdW5jdGlvbiAodWwsIGZhY2VMaXN0LCBpc0ltKSB7CiAgICAgICAgY29uc3QgbGlzdEl0ZW1zID0gQXJyYXkuZnJvbSh1bC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpKTsKICAgICAgICBmYWNlTGlzdC5mb3JFYWNoKChmYWNlLCBpbmRleCkgPT4gewogICAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSBsaXN0SXRlbXNbaW5kZXhdOwogICAgICAgICAgaWYgKGxpc3RJdGVtLnRpdGxlID09PSAoZmFjZSAmJiBmYWNlLnRpdGxlIHx8ICcnKSkgcmV0dXJuOwogICAgICAgICAgbGlzdEl0ZW0ucmVwbGFjZVdpdGgoY3JlYXRlRmFjZUl0ZW0oZmFjZSwgaXNJbSkpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBjb25zdCByZW5kZXJSZWNlbnRMaXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IGxpc3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnlhd2YtZmFjZS1yZWNlbnQgdWwnKTsKICAgICAgICBjb25zdCBmYWNlTGlzdCA9IHJ1bGUucmVmLnJlY2VudC5nZXRDb25maWcoKTsKICAgICAgICBsaXN0cy5mb3JFYWNoKGxpc3QgPT4gewogICAgICAgICAgcmVuZGVyTGlzdEtlZXBPbGQobGlzdCwgZmFjZUxpc3QsIGxpc3QubWF0Y2hlcygnLnlhd2YtZmFjZS1pbSAqJykpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBjb25zdCByZW5kZXJUb3BMaXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IGxpc3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnlhd2YtZmFjZS10b3AgdWwnKTsKICAgICAgICBjb25zdCBmYWNlTGlzdCA9IHJ1bGUucmVmLnRvcC5nZXRDb25maWcoKTsKICAgICAgICBsaXN0cy5mb3JFYWNoKGxpc3QgPT4gewogICAgICAgICAgcmVuZGVyTGlzdEtlZXBJbmRleChsaXN0LCBmYWNlTGlzdCwgbGlzdC5tYXRjaGVzKCcueWF3Zi1mYWNlLWltIConKSk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiDku47ooqvngrnlh7vnmoTlr7nosaHvvIjlm77niYfmiJbogIXliJfooajpobnvvInlvpfliLDooajmg4XnmoTnm7jlhbPkv6Hmga8KICAgICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0CiAgICAgICAqLwogICAgICBjb25zdCBnZXRGYWNlID0gZnVuY3Rpb24gKHRhcmdldCkgewogICAgICAgIGNvbnN0IGxpID0gdGFyZ2V0LmNsb3Nlc3QoJ2xpJyk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IGZhY2UgPSB7CiAgICAgICAgICAgIHRpdGxlOiBsaS50aXRsZSwKICAgICAgICAgICAgdGV4dDogbmV3IFVSTFNlYXJjaFBhcmFtcyhsaS5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJykpLmdldCgnaW5zZXJ0JyksCiAgICAgICAgICAgIGltZzogbGkucXVlcnlTZWxlY3RvcignaW1nJykuc3JjLAogICAgICAgICAgfTsKICAgICAgICAgIGlmICghZmFjZS50aXRsZSB8fCAhZmFjZS50ZXh0IHx8ICFmYWNlLmltZykgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4gZmFjZTsKICAgICAgICB9IGNhdGNoIChlKSB7IHJldHVybiBudWxsOyB9CiAgICAgIH07CiAgICAgIC8vIOS7juWIl+ihqOS4reenu+mZpOmHjeWkjeeahOmhue+8jOW5tuS/neeVmSAxMCDkuKoKICAgICAgY29uc3QgcmVtb3ZlRHVwbGljYXRlID0gZnVuY3Rpb24gKGZhY2VMaXN0KSB7CiAgICAgICAgY29uc3QgZmFjZVRpdGxlID0gbmV3IFNldCgpLCByZXN1bHQgPSBbXTsKICAgICAgICBmYWNlTGlzdC5mb3JFYWNoKGZhY2UgPT4gewogICAgICAgICAgaWYgKCFmYWNlIHx8IGZhY2VUaXRsZS5oYXMoZmFjZS50aXRsZSkpIHJldHVybjsKICAgICAgICAgIGZhY2VUaXRsZS5hZGQoZmFjZS50aXRsZSk7CiAgICAgICAgICByZXN1bHQucHVzaChmYWNlKTsKICAgICAgICB9KTsKICAgICAgICB3aGlsZSAocmVzdWx0Lmxlbmd0aCA8IDEwKSByZXN1bHQucHVzaChudWxsKTsKICAgICAgICByZXR1cm4gcmVzdWx0LnNsaWNlKDAsIDEwKTsKICAgICAgfTsKICAgICAgLy8g5Zyo55So5oi354K55Ye76KGo5oOF5ZCO5pu05paw5pyA6L+R5L2/55So55qE6KGo5oOFCiAgICAgIGNvbnN0IHVwZGF0ZVJlY2VudCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGNvbnN0IGZhY2UgPSBnZXRGYWNlKGV2ZW50LnRhcmdldCk7CiAgICAgICAgaWYgKCFmYWNlKSByZXR1cm47CiAgICAgICAgY29uc3QgcmVjZW50ID0gW2ZhY2VdLmNvbmNhdChydWxlLnJlZi5yZWNlbnQuZ2V0Q29uZmlnKCkpOwogICAgICAgIHJ1bGUucmVmLnJlY2VudC5zZXRDb25maWcocmVtb3ZlRHVwbGljYXRlKHJlY2VudCkpOwogICAgICAgIHJlbmRlclJlY2VudExpc3QoKTsKICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIOS9v+eUqOaLluaLvee9rumhtuihqOaDhQogICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIKICAgICAgICogQHBhcmFtIHtIVE1MVUxpc3RFbGVtZW50fSB1bAogICAgICAgKi8KICAgICAgY29uc3QgZHJhZ0ZhY2UgPSBmdW5jdGlvbiAoY29udGFpbmVyLCB1bCkgewogICAgICAgIC8vIOaYvuekuuWSjOmakOiXj+aPkOekuuaLluaLveeahOagh+ivrQogICAgICAgIGNvbnN0IG5vdGljZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mYWNlLWRyb3AtYXJlYScpOwogICAgICAgIGNvbnN0IHNob3dOb3RpY2UgPSBmdW5jdGlvbiAoKSB7IG5vdGljZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgfTsKICAgICAgICBjb25zdCBoaWRlTm90aWNlID0gZnVuY3Rpb24gKCkgeyBub3RpY2Uuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfTsKICAgICAgICAvLyDmi5bmi70KICAgICAgICBsZXQgZHJhZ2dpbmcgPSBudWxsLCBsaXN0SXRlbXM7CiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHsKICAgICAgICAgIGRyYWdnaW5nID0gZ2V0RmFjZShldmVudC50YXJnZXQpIHx8IG51bGw7CiAgICAgICAgICAvLyDlvIDlp4vmi5bmi73nmoTml7blgJnvvIzmoIforrDmiYDmnInnm67nmoTlnLDkuLrlj6/nvJbovpHnmoQKICAgICAgICAgIGxpc3RJdGVtcyA9IEFycmF5LmZyb20odWwuY2hpbGROb2Rlcyk7CiAgICAgICAgICBsaXN0SXRlbXMuZm9yRWFjaChsaSA9PiB7IGxpLnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgJ3RydWUnKTsgfSk7CiAgICAgICAgICBzaG93Tm90aWNlKCk7CiAgICAgICAgfSk7CiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7IGRyYWdnaW5nID0gbnVsbDsgfSk7CiAgICAgICAgbm90aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsICgpID0+IHsgaGlkZU5vdGljZSgpOyB9KTsKICAgICAgICB1bC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCAoKSA9PiB7IGhpZGVOb3RpY2UoKTsgfSk7CiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCAoKSA9PiB7IGhpZGVOb3RpY2UoKTsgfSk7CiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBldmVudCA9PiB7CiAgICAgICAgICAvLyDnu5PmnZ/mi5bmi73nmoTml7blgJnmgaLlpI3ljp/moLcKICAgICAgICAgIGlmIChsaXN0SXRlbXMpIGxpc3RJdGVtcy5mb3JFYWNoKGxpID0+IHsgbGkucmVtb3ZlQXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKTsgfSk7IGxpc3RJdGVtcyA9IG51bGw7CiAgICAgICAgICBjb25zdCBpbWdfdXBsb2FkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbmRfd2VpYm8gLmltZ191cGxvYWQnKTsKICAgICAgICAgIGlmIChpbWdfdXBsb2FkKSBpbWdfdXBsb2FkLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAvLyDnhLblkI7nnIvnnIvotbfmraLpg73lnKjlk6rph4wKICAgICAgICAgIGlmIChkcmFnZ2luZyA9PT0gbnVsbCkgcmV0dXJuOwogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgY29uc3QgY3VycmVudCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdsaScpOwogICAgICAgICAgY29uc3QgaW5kZXggPSBBcnJheS5mcm9tKHVsLmNoaWxkTm9kZXMpLmluZGV4T2YoY3VycmVudCk7CiAgICAgICAgICAvLyDmiormi73liLDnmoTkuJzopb/liqDliLDnva7pobbph4zpnaLljrsKICAgICAgICAgIGNvbnN0IGxpc3QgPSBydWxlLnJlZi50b3AuZ2V0Q29uZmlnKCksIG9sZCA9IGxpc3RbaW5kZXhdOwogICAgICAgICAgY29uc3QgbmV3TGlzdCA9IGxpc3QubWFwKChmYWNlLCBpKSA9PiB7CiAgICAgICAgICAgIGlmIChpID09PSBpbmRleCkgcmV0dXJuIGRyYWdnaW5nOwogICAgICAgICAgICBpZiAoIWZhY2UpIHJldHVybiBudWxsOwogICAgICAgICAgICBpZiAoZmFjZS50aXRsZSA9PT0gZHJhZ2dpbmcudGl0bGUpIHJldHVybiBvbGQ7CiAgICAgICAgICAgIHJldHVybiBmYWNlOwogICAgICAgICAgfSk7CiAgICAgICAgICBydWxlLnJlZi50b3Auc2V0Q29uZmlnKG5ld0xpc3QpOwogICAgICAgICAgcmVuZGVyVG9wTGlzdCgpOwogICAgICAgIH0pOwogICAgICAgIGlmIChydWxlLnJlZi50b3AuZ2V0Q29uZmlnKCkuc29tZShlID0+IGUpKSBoaWRlTm90aWNlKCk7CiAgICAgIH07CiAgICAgIC8vIOebkeinhuaWsOeahOihqOaDheahhgogICAgICBvYnNlcnZlci5kb20uYWRkKGZ1bmN0aW9uIGZhY2VGYXN0T2JzZXJ2ZXIoKSB7CiAgICAgICAgY29uc3QgdGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxheWVyX2ZhY2VzOm5vdChbbm9kZS10eXBlPSJodWF0aV90YWJzIl0pIC5XQl9taW5pdGFiOmZpcnN0LWNoaWxkJyk7CiAgICAgICAgaWYgKCF0YWIpIHJldHVybjsKICAgICAgICBjb25zdCBjb250YWluZXIgPSB0YWIucGFyZW50Tm9kZTsKICAgICAgICBjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgd3JhcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iZmFjZXNfbGlzdCB5YXdmLWZhY2UtbGlzdCIgbm9kZS10eXBlPSJzY3JvbGxWaWV3Ij48ZGl2IGNsYXNzPSJ5YXdmLWZhY2UtdG9wIHlhd2YtZmFjZS1yb3ciIG5vZGUtdHlwZT0ibGlzdCI+PHNwYW4gY2xhc3M9Inlhd2YtZmFjZS10aXRsZSI+PC9zcGFuPjx1bCBjbGFzcz0ieWF3Zi1mYWNlLWl0ZW1zIj48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48bGk+PC9saT48L3VsPjxzcGFuIGNsYXNzPSJ5YXdmLWZhY2UtZHJvcC1hcmVhIj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz0ieWF3Zi1mYWNlLXJlY2VudCB5YXdmLWZhY2Utcm93IiBub2RlLXR5cGU9Imxpc3QiPjxzcGFuIGNsYXNzPSJ5YXdmLWZhY2UtdGl0bGUiPjwvc3Bhbj48dWwgY2xhc3M9Inlhd2YtZmFjZS1pdGVtcyI+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PGxpPjwvbGk+PC91bD48L2Rpdj48L2Rpdj4nOwogICAgICAgIGNvbnN0IGFyZWEgPSBjb250YWluZXIuaW5zZXJ0QmVmb3JlKHdyYXAuZmlyc3RDaGlsZCwgdGFiKTsKICAgICAgICBhcmVhLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZhY2UtdG9wIHNwYW4nKS50ZXh0Q29udGVudCA9IGkxOG4uZmFzdEZhY2VUb3A7CiAgICAgICAgYXJlYS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mYWNlLWRyb3AtYXJlYScpLnRleHRDb250ZW50ID0gaTE4bi5mYXN0RmFjZVRvcE5vdGljZTsKICAgICAgICBhcmVhLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZhY2UtcmVjZW50IHNwYW4nKS50ZXh0Q29udGVudCA9IGkxOG4uZmFzdEZhY2VSZWNlbnQ7CiAgICAgICAgY29uc3QgdG9wTGlzdCA9IGFyZWEucXVlcnlTZWxlY3RvcignLnlhd2YtZmFjZS10b3AgdWwnKTsKICAgICAgICBjb25zdCByZWNlbnRMaXN0ID0gYXJlYS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mYWNlLXJlY2VudCB1bCcpOwogICAgICAgIGNvbnN0IGNoYXRMaXN0Tm9kZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCd1bFtub2RlLXR5cGU9Il9waGl6TGlzdE5vZGUiXScpOwogICAgICAgIGNvbnN0IGlzSW0gPSBjaGF0TGlzdE5vZGUgIT0gbnVsbDsKICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1cGRhdGVSZWNlbnQpOwogICAgICAgIGRyYWdGYWNlKGNvbnRhaW5lciwgdG9wTGlzdCk7CiAgICAgICAgaWYgKGlzSW0pIHsKICAgICAgICAgIGFyZWEuY2xhc3NMaXN0LmFkZCgneWF3Zi1mYWNlLWltJyk7CiAgICAgICAgICBmaXhDaGF0KFt0b3BMaXN0LCByZWNlbnRMaXN0XSwgY2hhdExpc3ROb2RlKTsKICAgICAgICB9CiAgICAgICAgcmVuZGVyVG9wTGlzdCgpOwogICAgICAgIHJlbmRlclJlY2VudExpc3QoKTsKICAgICAgfSk7CiAgICAgIC8vIOS/rueQhuS4gOS4i+iBiuWkqeeql+WPo+mHjOmdoueahOaDheWGtQogICAgICAvLyDmiJHkuI3noa7lrprov5nmrrXku6PnoIHov5jmnInmsqHmnInnlKjvvIzmgLvkuYvlhYjnlZnnnYAKICAgICAgY29uc3QgZml4Q2hhdCA9IGZ1bmN0aW9uIChsaXN0cywgY2hhdExpc3ROb2RlKSB7CiAgICAgICAgbGlzdHMuZm9yRWFjaChsaXN0ID0+IHsKICAgICAgICAgIGxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnbGknKTsKICAgICAgICAgICAgaWYgKCF0YXJnZXQudGl0bGUpIHJldHVybjsKICAgICAgICAgICAgLy8g5byE5LiA5Liq5YGH55qE5oyJ6ZKu77yM5pS+5Zyo5Y6f5pys55qE5YiX6KGo5pyr5bC+77yM6aqX5LuW6K+05oiR54K555qE5piv5Y6f5pys55qE5YiX6KGo6YeM6Z2i55qECiAgICAgICAgICAgIGNvbnN0IGZha2UgPSB0YXJnZXQuY2xvbmVOb2RlKHRydWUpOwogICAgICAgICAgICBmYWtlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGNoYXRMaXN0Tm9kZS5hcHBlbmRDaGlsZChmYWtlKTsKICAgICAgICAgICAgZmFrZS5jbGljaygpOwogICAgICAgICAgICBmYWtlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZmFrZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgY3NzLmFwcGVuZChgCi5sYXllcl9mYWNlcyAuZmFjZXNfbGlzdC55YXdmLWZhY2UtbGlzdCB7IGhlaWdodDogNzlweDsgfQoueWF3Zi1mYWNlLXJvdyB7IGRpc3BsYXk6IGJsb2NrOyBoZWlnaHQ6IDMycHg7IG1hcmdpbjogMCAwIDVweDsgfQoueWF3Zi1mYWNlLXRpdGxlIHsgZmxvYXQ6IGxlZnQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBsaW5lLWhlaWdodDogMzJweDsgcGFkZGluZzogMDsgdGV4dC1hbGlnbjogY2VudGVyOyB3aWR0aDogNTJweDsgbWFyZ2luOiAwIC04cHggMCAwOyB9Ci55YXdmLWZhY2UtaXRlbXMgeyBmbG9hdDogcmlnaHQ7IG1hcmdpbjogMCA4cHg7IH0KLnlhd2YtZmFjZS1pdGVtcyBsaSB7IGNvbG9yOiB0cmFuc3BhcmVudDsgfQoueWF3Zi1mYWNlLWRyb3AtYXJlYSB7IGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDEyNywgMC41KTsgY2xlYXI6IGJvdGg7IGZsb2F0OiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGhlaWdodDogMzZweDsgbGluZS1oZWlnaHQ6IDM2cHg7IG1hcmdpbjogLTM2cHggOHB4IDA7IG9wYWNpdHk6IDE7IHBhZGRpbmc6IDA7IHdpZHRoOiAzNDhweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9Ci5sYXllcl9mYWNlcyAuZmFjZXNfbGlzdCB7IC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IHVzZXItc2VsZWN0OiBub25lOyB9Ci5sYXllcl9mYWNlcyAuZmFjZXNfbGlzdCBsaSB7IG92ZXJmbG93OiBoaWRkZW47IH0KLmxheWVyX2ZhY2VzIC5mYWNlc19saXN0IGltZyB7IGJvcmRlcjogMTBweCB0cmFuc3BhcmVudCBzb2xpZDsgbWFyZ2luOiAtMTBweDsgfQpgKTsKICAgIH0sCiAgfSk7CgogIGlmIChlbnYuY29uZmlnLnJlcXVlc3RCbG9ja2luZ1N1cHBvcnRlZCkgewogICAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICAgIHRvcGljQ29tcGxldGVXaXRob3V0OiB7CiAgICAgICAgY246ICflnKjor53popjoh6rliqjlrozmiJDml7bkuI3ljIXmi6x8fHt7cGxhY2V9feWcsOeCuXx7e21vdmllfX3nlLXlvbF8e3tib29rfX3lm77kuaZ8e3t0b3BpY3196LaF6K+dfHt7bXVzaWN9femfs+S5kHx7e3N0b2NrfX3ogqHnpagnLAogICAgICAgIHR3OiAn5Zyo6Kmx6aGM6Ieq5YuV5a6M5oiQ5pmC5LiN5YyF5ousfHx7e3BsYWNlfX3lnLDpu558e3ttb3ZpZX196Zu75b2xfHt7Ym9va3195ZyW5pu4fHt7dG9waWN9fei2heipsXx7e211c2ljfX3pn7PmqIJ8e3tzdG9ja3196IKh56WoJywKICAgICAgICBlbjogJ0V4Y2x1ZGUgZm9sbG93aW5nIGl0ZW1zIGZyb20gdG9waWMgYXV0byBjb21wbGV0ZXx8e3twbGFjZX19IHBsYWNlfHt7bW92aWV9fSBtb3ZpZXx7e2Jvb2t9fSBib29rfHx7e3RvcGljfX0gc3VwZXIgdG9waWN8e3ttdXNpY319IG11c2ljfHt7c3RvY2t9fSBzdG9jaycsCiAgICAgIH0sCiAgICB9KTsKCiAgICBkZXRhaWxzLnRvcGljQ29tcGxldGVXaXRob3V0ID0gcnVsZS5SdWxlKHsKICAgICAgaWQ6ICdsYXlvdXRfdG9waWNfd2l0aG91dCcsCiAgICAgIHZlcnNpb246IDMwLAogICAgICBwYXJlbnQ6IGRldGFpbHMuZGV0YWlscywKICAgICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udG9waWNDb21wbGV0ZVdpdGhvdXQsCiAgICAgIHJlZjogT2JqZWN0LmFzc2lnbih7fSwgLi4uWydwbGFjZScsICdtb3ZpZScsICdib29rJywgJ3RvcGljJywgJ211c2ljJywgJ3N0b2NrJ10ubWFwKHR5cGUgPT4gKHsKICAgICAgICBbdHlwZV06IHsgdHlwZTogJ2Jvb2xlYW4nLCBpbml0aWFsOiB0cnVlIH0sCiAgICAgIH0pKSksCiAgICAgIGluaXQoKSB7CiAgICAgICAgYmFja2VuZC5vblJlcXVlc3QoJ3RvcGljJywgYXN5bmMgZGV0YWlscyA9PiB7CiAgICAgICAgICBpZiAoIXRoaXMuaXNFbmFibGVkKCkpIHJldHVybiB7fTsKICAgICAgICAgIGNvbnN0IGhpZGVJdGVtcyA9IFsncGxhY2UnLCAnbW92aWUnLCAnYm9vaycsICd0b3BpYycsICdtdXNpYycsICdzdG9jayddLmZpbHRlcih0eXBlID0+IHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmW3R5cGVdLmdldENvbmZpZygpOwogICAgICAgICAgfSk7CiAgICAgICAgICBhd2FpdCBiYWNrZW5kLnRvcGljRmlsdGVyKGRldGFpbHMsIGhpZGVJdGVtcyk7CiAgICAgICAgICByZXR1cm4ge307CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICB9KTsKICB9CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgdXNlTG9jYWxlVGltZXpvbmU6IHsKICAgICAgY246ICfkvb/nlKjmnKzmnLrml7bljLonLAogICAgICB0dzogJ+S9v+eUqOacrOapn+aZguWNgCcsCiAgICAgIGVuOiAnVXNlIGxvY2FsZSB0aW1lem9uZScsCiAgICB9LAogICAgZmVlZHNSZWFkOiB7IGNuOiAn5L2g55yL5Yiw6L+Z6YeMJywgdHc6ICfkvaDnnIvliLDpgJnoo6EnLCBlbjogJ3lvdSBnb3QgaGVyZScgfSwKICB9KTsKCiAgLy8g5L2/55So5pys5Zyw5pe25Yy6CiAgZGV0YWlscy50aW1lem9uZSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2xheW91dF9sb2NhbGVfdGltZXpvbmUnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogZGV0YWlscy5kZXRhaWxzLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udXNlTG9jYWxlVGltZXpvbmUsCiAgICBoaWRkZW46IHRpbWUuaXNDc3RFcXVpdmFsZW50KCksCiAgICBpbml0KCkgewoKICAgICAgY29uc3QgdXNlTG9jYWxlID0gdGhpcy5pc0VuYWJsZWQoKTsKICAgICAgY29uc3QgZmVlZFVzZVllYXIgPSB5YXdmLnJ1bGVzLmZlZWRzLmRldGFpbHMuZmVlZEFic29sdXRlVGltZS5pc0VuYWJsZWQoKTsKCiAgICAgIGlmICghdXNlTG9jYWxlICYmICFmZWVkVXNlWWVhcikgcmV0dXJuOwoKICAgICAgY29uc3QgdXBkYXRlRGF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgY29uc3QgZGF0ZSA9IHBhcnNlSW50KGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd5YXdmLWRhdGUnKSwgMTApOwogICAgICAgIGNvbnN0IGZvcm1hdCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd5YXdmLWRhdGUtZm9ybWF0JykgfHwgbnVsbDsKICAgICAgICBjb25zdCBsb2NhbGUgPSB1c2VMb2NhbGUgPyAnY3VycmVudCcgOiAnY3N0JzsKICAgICAgICBjb25zdCBmb3JtYXRUaW1lUmVzdWx0ID0gdXRpbC50aW1lLmZvcm1hdChkYXRlLCB7IGZvcm1hdCwgbG9jYWxlIH0pOwogICAgICAgIGlmIChlbGVtZW50LnRleHRDb250ZW50ICE9PSBmb3JtYXRUaW1lUmVzdWx0KSB7CiAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gZm9ybWF0VGltZVJlc3VsdDsKICAgICAgICB9CiAgICAgICAgaWYgKHVzZUxvY2FsZSkgewogICAgICAgICAgY29uc3QgZm9ybWF0VGltZURldGFpbFJlc3VsdCA9IHV0aWwudGltZS5mb3JtYXQoZGF0ZSwgeyBmb3JtYXQ6ICdmdWxsJywgbG9jYWxlOiAnY3VycmVudCcgfSk7CiAgICAgICAgICBpZiAoZWxlbWVudC50aXRsZSAhPT0gZm9ybWF0VGltZURldGFpbFJlc3VsdCkgewogICAgICAgICAgICBlbGVtZW50LnRpdGxlID0gZm9ybWF0VGltZURldGFpbFJlc3VsdDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICBjb25zdCB1cGRhdGVBbGxEYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IGRhdGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3lhd2YtZGF0ZV0nKTsKICAgICAgICBBcnJheS5mcm9tKGRhdGVzKS5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAgICAgdXBkYXRlRGF0ZShlbGVtZW50KTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIGlmICh1c2VMb2NhbGUpIHsKICAgICAgICBjb25zdCBoYW5kbGVEYXRlRWxlbWVudHMgPSBmdW5jdGlvbiBoYW5kbGVEYXRlRWxlbWVudHMoKSB7CiAgICAgICAgICBjb25zdCBbZmVlZExpc3RUaW1lVGlwLCAuLi5tb3JlRmVlZExpc3RUaW1lVGlwXSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tub2RlLXR5cGU9ImZlZWRfbGlzdF90aW1lVGlwIl1bZGF0ZV0nKTsKICAgICAgICAgIG1vcmVGZWVkTGlzdFRpbWVUaXAuZm9yRWFjaChlbGVtZW50ID0+IGVsZW1lbnQucmVtb3ZlKCkpOwogICAgICAgICAgaWYgKGZlZWRMaXN0VGltZVRpcCkgKGZ1bmN0aW9uICh0aXApIHsKICAgICAgICAgICAgY29uc3Qgb2xkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tub2RlLXR5cGU9Inlhd2YtZmVlZF9saXN0X3RpbWVUaXAiXVtkYXRlXScpOwogICAgICAgICAgICBBcnJheS5mcm9tKG9sZHMpLmZvckVhY2goZWxlbWVudCA9PiBlbGVtZW50LnJlbW92ZSgpKTsKICAgICAgICAgICAgdGlwLnNldEF0dHJpYnV0ZSgnbm9kZS10eXBlJywgJ3lhd2YtZmVlZF9saXN0X3RpbWVUaXAnKTsKICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHBhcnNlSW50KHRpcC5nZXRBdHRyaWJ1dGUoJ2RhdGUnKSwgMTApOwogICAgICAgICAgICB0aXAucmVtb3ZlQXR0cmlidXRlKCdkYXRlJyk7CiAgICAgICAgICAgIHRpcC5jbGFzc0xpc3QuYWRkKCd5YXdmLWZlZWRfbGlzdF90aW1lVGlwJyk7CiAgICAgICAgICAgIHRpcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iV0JfY2FyZHRpdGxlX2EgV190YyI+PGEgbm9kZS10eXBlPSJmZWVkX2xpc3RfaXRlbV9kYXRlIiBzdHlsZT0iY29sb3I6aW5oZXJpdCI+PC9hPjwvZGl2Pic7CiAgICAgICAgICAgIGNvbnN0IGlubmVyID0gdGlwLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZDsKICAgICAgICAgICAgaW5uZXIuc2V0QXR0cmlidXRlKCd5YXdmLWRhdGUnLCBkYXRlKTsKICAgICAgICAgICAgaW5uZXIuYWZ0ZXIoJyAnICsgaTE4bi5mZWVkc1JlYWQpOwogICAgICAgICAgfShmZWVkTGlzdFRpbWVUaXApKTsKCiAgICAgICAgICBjb25zdCBkYXRlRWxlbWVudHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRlXScpKTsKICAgICAgICAgIGRhdGVFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAgICAgICBjb25zdCBkYXRlID0gcGFyc2VJbnQoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGUnKSwgMTApOwogICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgneWF3Zi1kYXRlJywgZGF0ZSk7CiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRlJyk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoZmVlZExpc3RUaW1lVGlwIHx8IGRhdGVFbGVtZW50cy5sZW5ndGgpIHVwZGF0ZUFsbERhdGUoKTsKICAgICAgICB9OwoKICAgICAgICBvYnNlcnZlci5kb20uYWRkKGhhbmRsZURhdGVFbGVtZW50cyk7CgogICAgICAgIC8vIOWkhOeQhuaWh+acrOaYvuekuueahOaXtumXtAogICAgICAgIGNvbnN0IGhhbmRsZVRleHREYXRlRWxlbWVudHMgPSBmdW5jdGlvbiBjaGFuZ2VEYXRlVGV4dCgpIHsKICAgICAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IFsKICAgICAgICAgICAgJy5XQl9mcm9tOm5vdChbeWF3Zi1sb2NhbHRpbWVdKScsCiAgICAgICAgICAgICcuY29udF90b3AgLmRhdGE6bm90KFt5YXdmLWxvY2FsdGltZV0pJywKICAgICAgICAgICAgJ2xlZ2VuZDpub3QoW3lhd2YtbG9jYWx0aW1lXSknLAogICAgICAgICAgICAnLmxheWVyX2RpYWxvZ3VlX3Y1IC50aW1lX3MgcCcsCiAgICAgICAgICBdLmpvaW4oJywnKTsKICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycykpOwogICAgICAgICAgZWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3lhd2YtbG9jYWx0aW1lJywgJycpOwogICAgICAgICAgICAvLyDogYrlpKnnqpflj6PkuK3nmoTml7bpl7TmmK/mnKzlnLDnmoTml7bpl7TvvIzkvYbmmK/lhbblrp7njrDlnKjlt7Lnu4/msqHmnInogYrlpKnnqpflj6PkuoYKICAgICAgICAgICAgaWYgKGVsZW1lbnQubWF0Y2hlcygnLldCX3dlYmltIConKSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCB0ZXh0Tm9kZSA9IGVsZW1lbnQuZmlyc3RDaGlsZDsKICAgICAgICAgICAgaWYgKHRleHROb2RlLm5vZGVUeXBlICE9PSBOb2RlLlRFWFRfTk9ERSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCB0ZXh0ID0gdGV4dE5vZGUudGV4dENvbnRlbnQudHJpbSgpOwogICAgICAgICAgICBpZiAodGV4dCA9PT0gJycpIHJldHVybjsKICAgICAgICAgICAgY29uc3QgW19mdWxsLCBtYXRjaCwgdGFpbF0gPSB0ZXh0Lm1hdGNoKC9eKC4qPylccyoo5p2l6IeqfOS+huiHqnxjb21lIGZyb218KSQvKTsKICAgICAgICAgICAgY29uc3QgdGltZSA9IHV0aWwudGltZS5wYXJzZShtYXRjaCk7CiAgICAgICAgICAgIGlmICghdGltZSkgcmV0dXJuOwogICAgICAgICAgICB1dGlsLmRlYnVnKCdwYXJzZSB0aW1lICVvKCVzKSB0byAlbyglcyknLCB0ZXh0Tm9kZSwgdGV4dCwgdGltZSwgdGltZSk7CiAgICAgICAgICAgIHRleHROb2RlLnRleHRDb250ZW50ID0gdGFpbCA/IGAgJHt0YWlsfSBgIDogJyc7CiAgICAgICAgICAgIGNvbnN0IHRpbWVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICB0aW1lRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZGF0ZScsICt0aW1lKTsKICAgICAgICAgICAgdXBkYXRlRGF0ZSh0aW1lRWxlbWVudCk7CiAgICAgICAgICAgIHRleHROb2RlLnJlcGxhY2VXaXRoKHRpbWVFbGVtZW50KTsKICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChoYW5kbGVUZXh0RGF0ZUVsZW1lbnRzKTsKICAgICAgfQoKICAgICAgaWYgKGZlZWRVc2VZZWFyKSB7CiAgICAgICAgb2JzZXJ2ZXIuZmVlZC5vbkFmdGVyKGZ1bmN0aW9uIChmZWVkKSB7CiAgICAgICAgICBjb25zdCBkYXRlcyA9IGZlZWRQYXJzZXIuZGF0ZS5kb20oZmVlZCk7CiAgICAgICAgICBkYXRlcy5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAgICAgICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGUnKSkgewogICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBwYXJzZUludChlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0ZScpLCAxMCk7CiAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZGF0ZScsIGRhdGUpOwogICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRlJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZGF0ZS1mb3JtYXQnLCAneWVhcicpOwogICAgICAgICAgICB1cGRhdGVEYXRlKGVsZW1lbnQpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHNldEludGVydmFsKHVwZGF0ZUFsbERhdGUsIDFlMyk7CgogICAgICBjc3MuYXBwZW5kKGAKLldCX2ZlZWRfdjMgLldCX2Zyb20gc3Bhblt5YXdmLWRhdGVdIHsgbWFyZ2luLWxlZnQ6IDA7IH0KW3lhd2YtZGF0ZV06OmFmdGVyIHsgY29udGVudDogIiAiOyB9CmApOwogICAgfSwKICB9KTsKCiAgaWYgKGVudi5jb25maWcuY2hhdEluUGFnZVN1cHBvcnRlZCkgewoKICAgIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgICBjaGF0SW5QYWdlOiB7CiAgICAgICAgY246ICflnKjlvq7ljZrpobXpnaLlhoXmlbTlkIjogYrlpKnnqpflj6MnLAogICAgICAgIHR3OiAn5Zyo5b6u5Y2a6aCB6Z2i5YWn5pW05ZCI6IGK5aSp56qX5Y+jJywKICAgICAgICBlbjogJ1VzZSBjaGF0IGluIHBhZ2VzIG9mIGZlZWRzJywKICAgICAgfSwKICAgICAgY2hhdEJ1dHRvblRleHQ6IHsKICAgICAgICAvLyDov5nkuKrmnaHnm67msqHmnInnv7vor5HvvIzlm6DkuLrov5nkuKrlj6rmmK/lnKjlvq7ljZrnmoTliJ3lp4vljJbkuYvliY3nlKjnmoQKICAgICAgICAvLyDlvq7ljZrliJ3lp4vljJbkuYvlkI7kvJrnlKjlvq7ljZroh6rlt7HnmoTvvIzpgqPkuKrlsLHmsqHmnInnv7vor5EKICAgICAgICBjbjogJ+W+ruWNmuiBiuWkqScsCiAgICAgIH0sCiAgICB9KTsKCiAgICBkZXRhaWxzLmNoYXRGcmFtZSA9IHJ1bGUuUnVsZSh7CiAgICAgIGlkOiAnbGF5b3V0X2NoYXRfaW5fcGFnZScsCiAgICAgIHZlcnNpb246IDEsCiAgICAgIHBhcmVudDogZGV0YWlscy5kZXRhaWxzLAogICAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5jaGF0SW5QYWdlLAogICAgICByZWY6IHsKICAgICAgICB3aWR0aDogeyBpbml0aWFsOiA2NDAsIG1pbjogNjQwIH0sCiAgICAgICAgaGVpZ2h0OiB7IGluaXRpYWw6IDQ4MCwgbWluOiA0ODAgfSwKICAgICAgfSwKICAgICAgYWluaXQoKSB7CiAgICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgICAgY3NzLmFwcGVuZChgCiNXQl93ZWJjaGF0IHsgYm90dG9tOiAtMTAwcHggIWltcG9ydGFudDsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgfQojeWF3Zi13ZWJjaGF0IHsgcG9zaXRpb246IGZpeGVkOyBib3R0b206IDBweDsgcmlnaHQ6IDBweDsgei1pbmRleDogMTAyNDsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgYmFja2dyb3VuZDogI2QzZDZkZjsgfQojeWF3Zi13ZWJjaGF0IC53ZWJpbV9mb2xkIHsgdG9wOiAtNDBweDsgcmlnaHQ6IDBweDsgdmlzaWJpbGl0eTogdmlzaWJsZTsgfQojeWF3Zi13ZWJjaGF0IC5mb2xkX2NvbnQgZW0geyB3aWR0aDogMjAwcHg7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgaGVpZ2h0OiA0MHB4OyB9Ci55YXdmLXdlYmltLW1haW4geyBwb3NpdGlvbjogZml4ZWQ7IGJvdHRvbTogMDsgcmlnaHQ6IDA7IHotaW5kZXg6IDEwMDAwOyBib3gtc2hhZG93OiAwIDAgMTBweCBibGFjazsgYm9yZGVyLXJhZGl1czogM3B4IDAgMCAwOyBvdmVyZmxvdzogaGlkZGVuOyB9Ci55YXdmLXdlYmltLW1haW4gaWZyYW1lIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYm9yZGVyOiAwIG5vbmU7IH0KLnlhd2Ytd2ViaW0tcmVzaXplciB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEycHg7IGhlaWdodDogMTJweDsgbGVmdDogMDsgdG9wOiAwOyBtYXJnaW46IDA7IGN1cnNvcjogbndzZS1yZXNpemU7IG9wYWNpdHk6IDAuODsgfQoueWF3Zi13ZWJpbS1yZXNpemVyIGksIC55YXdmLXdlYmltLXJlc2l6ZXI6OmFmdGVyIHsgY29udGVudDogIiAiOyBwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMnB4OyBoZWlnaHQ6IDEycHg7IH0KLnlhd2Ytd2ViaW0tcmVzaXplciBpIHsgdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKTsgb3ZlcmZsb3c6IGhpZGRlbjsgcmVzaXplOiBib3RoOyB9Ci55YXdmLXdlYmltLXJlc2l6ZSAueWF3Zi13ZWJpbS1yZXNpemVyIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgfQpgKTsKCiAgICAgICAgbGV0IHNob3dDaGF0V2luZG93ID0gbnVsbDsKICAgICAgICBsZXQgZnJhbWVDb250ZW50UmVzb2x2ZTsKICAgICAgICAvKiogQHR5cGUge1Byb21pc2U8V2luZG93Pn0gKi8KICAgICAgICBsZXQgZnJhbWVDb250ZW50ID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7IGZyYW1lQ29udGVudFJlc29sdmUgPSByZXNvbHZlOyB9KTsKICAgICAgICBjb25zdCBpbml0Q2hhdEFyZWEgPSBmdW5jdGlvbiAob3JpKSB7CiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iV0Jfd2ViaW0iIGlkPSJ5YXdmLXdlYmNoYXQiIHN0eWxlPSIiPjxkaXYgY2xhc3M9IndlYmltX2ZvbGQgd2ViaW1fZm9sZF92MiBjbGVhcmZpeCI+PGRpdiBjbGFzcz0iZm9sZF9iZyI+PC9kaXY+PHAgY2xhc3M9ImZvbGRfY29udCBjbGVhcmZpeCI+PHNwYW4gY2xhc3M9ImZvbGRfaWNvbiBXX2ZsIiBkYXRhLXRhcmdldD0ibWluaWNoYXQiPjwvc3Bhbj48ZW0gY2xhc3M9ImZvbGRfZm9udCBXX2ZsIFdfZjE0Ij48L2VtPjwvcD48L2Rpdj48ZGl2IGNsYXNzPSJ5YXdmLXdlYmltLW1haW4iIHN0eWxlPSJ3aWR0aDogNjQwcHg7IGhlaWdodDogNDgwcHg7Ij48aWZyYW1lIHNyYz0iaHR0cHM6Ly9jaGF0LjIyMWVkYzNmLTllMTYtNDk3My1hNTIyLTRjYTIxZTdjODU0MC5pbnZhbGlkLyI+PC9pZnJhbWU+PGRpdiBjbGFzcz0ieWF3Zi13ZWJpbS1yZXNpemVyIj48aT48L2k+PC9kaXY+PC9kaXY+PC9kaXY+JzsKICAgICAgICAgIGNvbnN0IHdlYmltID0gY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkOwogICAgICAgICAgY29uc3QgZm9sZCA9IHdlYmltLnF1ZXJ5U2VsZWN0b3IoJy53ZWJpbV9mb2xkJyk7CiAgICAgICAgICBjb25zdCBtYWluID0gd2ViaW0ucXVlcnlTZWxlY3RvcignLnlhd2Ytd2ViaW0tbWFpbicpOwogICAgICAgICAgY29uc3QgZnJhbWUgPSB3ZWJpbS5xdWVyeVNlbGVjdG9yKCdpZnJhbWUnKTsKICAgICAgICAgIGNvbnN0IHJlc2l6ZXIgPSB3ZWJpbS5xdWVyeVNlbGVjdG9yKCcueWF3Zi13ZWJpbS1yZXNpemVyJyk7CiAgICAgICAgICBjb25zdCBtYWluQ29udGFpbmVyID0gbWFpbi5wYXJlbnROb2RlOwogICAgICAgICAgbWFpbkNvbnRhaW5lci5yZW1vdmVDaGlsZChtYWluKTsKICAgICAgICAgIGxldCBmb2xkZWQgPSB0cnVlOwogICAgICAgICAgc2hvd0NoYXRXaW5kb3cgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChtYWluLnBhcmVudE5vZGUgIT09IG1haW5Db250YWluZXIpIHsKICAgICAgICAgICAgICBtYWluQ29udGFpbmVyLmFwcGVuZENoaWxkKG1haW4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG1haW4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgIGZvbGQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgZm9sZGVkID0gZmFsc2U7CiAgICAgICAgICB9OwogICAgICAgICAgZm9sZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgc2hvd0NoYXRXaW5kb3coKTsKICAgICAgICAgIH0pOwogICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICAgIGlmIChmb2xkZWQpIHJldHVybjsKICAgICAgICAgICAgaWYgKHdlYmltLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHJldHVybjsKICAgICAgICAgICAgbWFpbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBmb2xkLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICBmb2xkZWQgPSB0cnVlOwogICAgICAgICAgfSk7CiAgICAgICAgICBmcmFtZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gewogICAgICAgICAgICBjb25zdCBjb250ZW50V2luZG93ID0gZnJhbWUuY29udGVudFdpbmRvdzsKICAgICAgICAgICAgZnJhbWVDb250ZW50UmVzb2x2ZShjb250ZW50V2luZG93KTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vIOacquivu+a2iOaBr+aVsOmHj+WcqOWOn+eJiOeahOiBiuWkqeaMiemSruS4iueahOWxleekuu+8jOaIkeS7rOaKiuWug+aLt+i0nei/h+adpQogICAgICAgICAgY29uc3QgZm9sZFRleHQgPSB3ZWJpbS5xdWVyeVNlbGVjdG9yKCcuZm9sZF9jb250IGVtJyk7CiAgICAgICAgICBjb25zdCBvcmlUZXh0ID0gb3JpLnF1ZXJ5U2VsZWN0b3IoJy5mb2xkX2NvbnQgZW0nKTsKICAgICAgICAgIGNvbnN0IHVwZGF0ZVRleHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZvbGRUZXh0LnRleHRDb250ZW50ID0gb3JpVGV4dC50ZXh0Q29udGVudDsKICAgICAgICAgIH07CiAgICAgICAgICAobmV3IE11dGF0aW9uT2JzZXJ2ZXIodXBkYXRlVGV4dCkpLm9ic2VydmUob3JpVGV4dCwgeyBjaGlsZExpc3Q6IHRydWUgfSk7CiAgICAgICAgICBmb2xkVGV4dC50ZXh0Q29udGVudCA9IGkxOG4uY2hhdEJ1dHRvblRleHQ7CgogICAgICAgICAgLyoKICAgICAgICAgICAqIOaOpeS4i+adpeWFgeiuuOiBiuWkqeahhue8qeaUvgogICAgICAgICAgICovCiAgICAgICAgICBsZXQgZHJhZ1N0YXJ0UG9zID0gW10sIGRyYWdTdGFydFNpemUgPSBbXTsKICAgICAgICAgIGNvbnN0IHNldFNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkgewogICAgICAgICAgICBsZXQgdGFyZ2V0VyA9IG51bGwsIHRhcmdldEggPSBudWxsOwogICAgICAgICAgICBpZiAod2lkdGggIT0gbnVsbCkgewogICAgICAgICAgICAgIHRhcmdldFcgPSBNYXRoLm1heCg2NDAsIE1hdGgubWluKHdpbmRvdy5pbm5lcldpZHRoLCB3aWR0aCkpOwogICAgICAgICAgICAgIG1haW4uc3R5bGUud2lkdGggPSB0YXJnZXRXICsgJ3B4JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaGVpZ2h0ICE9IG51bGwpIHsKICAgICAgICAgICAgICB0YXJnZXRIID0gTWF0aC5tYXgoNDgwLCBNYXRoLm1pbih3aW5kb3cuaW5uZXJIZWlnaHQgLSA0OCwgaGVpZ2h0KSk7CiAgICAgICAgICAgICAgbWFpbi5zdHlsZS5oZWlnaHQgPSB0YXJnZXRIICsgJ3B4JzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gW3RhcmdldFcsIHRhcmdldEhdOwogICAgICAgICAgfTsKICAgICAgICAgIGNvbnN0IGNhbGNTaXplID0gZnVuY3Rpb24gKGNsaWVudFgsIGNsaWVudFkpIHsKICAgICAgICAgICAgY29uc3QgW3N0YXJ0WCwgc3RhcnRZXSA9IGRyYWdTdGFydFBvczsKICAgICAgICAgICAgY29uc3QgW3N0YXJ0Vywgc3RhcnRIXSA9IGRyYWdTdGFydFNpemU7CiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gc3RhcnRYIC0gY2xpZW50WCArIHN0YXJ0VzsKICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gc3RhcnRZIC0gY2xpZW50WSArIHN0YXJ0SDsKICAgICAgICAgICAgcmV0dXJuIHNldFNpemUod2lkdGgsIGhlaWdodCk7CiAgICAgICAgICB9OwogICAgICAgICAgY29uc3QgZHJhZ01vdmUgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgY2FsY1NpemUoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgICAgICAgICB9OwogICAgICAgICAgY29uc3QgZHJhZ0NhbmNlbCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICBjYWxjU2l6ZShldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICAgICAgICAgIH07CiAgICAgICAgICBjb25zdCBkcmFnRW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIGNvbnN0IFt3aWR0aCwgaGVpZ2h0XSA9IGNhbGNTaXplKGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogICAgICAgICAgICBydWxlLnJlZi53aWR0aC5zZXRDb25maWcod2lkdGgpOwogICAgICAgICAgICBydWxlLnJlZi5oZWlnaHQuc2V0Q29uZmlnKGhlaWdodCk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgneWF3Zi13ZWJpbS1yZXNpemUnKTsKICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZHJhZ01vdmUpOwogICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZHJhZ0NhbmNlbCk7CiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBkcmFnRW5kKTsKICAgICAgICAgIH07CiAgICAgICAgICBjb25zdCBkcmFnU3RhcnQgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgZHJhZ1N0YXJ0UG9zID0gW2V2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFldOwogICAgICAgICAgICBkcmFnU3RhcnRTaXplID0gW21haW4uY2xpZW50V2lkdGgsIG1haW4uY2xpZW50SGVpZ2h0XTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCd5YXdmLXdlYmltLXJlc2l6ZScpOwogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkcmFnTW92ZSk7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBkcmFnQ2FuY2VsKTsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGRyYWdFbmQpOwogICAgICAgICAgfTsKICAgICAgICAgIHJ1bGUucmVmLndpZHRoLmFkZENvbmZpZ0xpc3RlbmVyKG5ld1dpZHRoID0+IHsKICAgICAgICAgICAgc2V0U2l6ZShuZXdXaWR0aCwgbnVsbCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJ1bGUucmVmLmhlaWdodC5hZGRDb25maWdMaXN0ZW5lcihuZXdIZWlnaHQgPT4gewogICAgICAgICAgICBzZXRTaXplKG51bGwsIG5ld0hlaWdodCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJlc2l6ZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZHJhZ1N0YXJ0KTsKICAgICAgICAgIHNldFNpemUocnVsZS5yZWYud2lkdGguZ2V0Q29uZmlnKCksIHJ1bGUucmVmLmhlaWdodC5nZXRDb25maWcoKSk7CiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gewogICAgICAgICAgICBzZXRTaXplKG1haW4uY2xpZW50V2lkdGgsIG1haW4uY2xpZW50SGVpZ2h0KTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQod2ViaW0pOwogICAgICAgIH07CgogICAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gY2hlY2tJbUFyZWEoKSB7CiAgICAgICAgICBjb25zdCB3ZWJpbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNXQl93ZWJjaGF0Om5vdChbeWF3Zi13ZWItY2hhdF0pJyk7CiAgICAgICAgICBpZiAoIXdlYmltKSByZXR1cm47CiAgICAgICAgICB3ZWJpbS5zZXRBdHRyaWJ1dGUoJ3lhd2Ytd2ViLWNoYXQnLCAnJyk7CiAgICAgICAgICBpbml0Q2hhdEFyZWEod2ViaW0pOwogICAgICAgIH0pOwoKICAgICAgICAvKgogICAgICAgICAqIOi/meS4gOauteaYr+iuqeKAnOiBiuWkqeKAnS/igJznp4Hkv6HigJ3mjInpkq7lj6/ku6Xmv4DmtLvogYrlpKnmoYblubbliIfmjaLliLDlr7nlupTnmoTkuroKICAgICAgICAgKi8KCiAgICAgICAgY29uc3QgY2hhdFRvVWlkID0gZnVuY3Rpb24gKHVpZCkgewogICAgICAgICAgZnJhbWVDb250ZW50LnRoZW4oY29udGVudFdpbmRvdyA9PiB7CiAgICAgICAgICAgIGNoYXRmcmFtZS5jaGF0VG9VaWQodWlkKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgICAgaWYgKCFzaG93Q2hhdFdpbmRvdykgcmV0dXJuOwogICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwogICAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybjsKICAgICAgICAgIGNvbnN0IHVpZCA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnN0IGNoYXRUbyA9IHRhcmdldC5jbG9zZXN0KCdhW2hyZWYqPSJhcGkud2VpYm8uY29tL2NoYXQiXScpOwogICAgICAgICAgICBpZiAoIWNoYXRUbykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVVJMKGNoYXRUby5oYXNoLnNsaWNlKDEpLCBsb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgY29uc3QgdWlkID0gTnVtYmVyKGRhdGEuc2VhcmNoUGFyYW1zLmdldCgndG9fdWlkJykpOwogICAgICAgICAgICBpZiAoIXVpZCkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHJldHVybiB1aWQ7CiAgICAgICAgICB9KCkpIHx8IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnN0IHRvRGlhbG9nID0gdGFyZ2V0LmNsb3Nlc3QoJ1thY3Rpb24tdHlwZT0idG9fZGlhbG9nIl0nKTsKICAgICAgICAgICAgaWYgKCF0b0RpYWxvZykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHRvRGlhbG9nLmdldEF0dHJpYnV0ZSgnYWN0aW9uLWRhdGEnKSk7CiAgICAgICAgICAgIGNvbnN0IHVpZCA9IE51bWJlcihkYXRhLmdldCgndWlkJykpOwogICAgICAgICAgICBpZiAoIXVpZCkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHJldHVybiB1aWQ7CiAgICAgICAgICB9KCkpOwogICAgICAgICAgaWYgKCF1aWQpIHJldHVybjsKICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIHNob3dDaGF0V2luZG93KCk7CiAgICAgICAgICBjaGF0VG9VaWQodWlkKTsKICAgICAgICB9LCB0cnVlKTsKCiAgICAgIH0sCiAgICB9KTsKCiAgfQoKICBpMThuLmhpZGVIb3RUb3BpY0xhcmdlUmVhZCA9IHsKICAgIGNuOiAn6ZqQ6JeP54Ot6Zeo6K+d6aKY5LitfOmYheivu+aVsOmHj+i2hei/h3t7cXVvdGF9feS6v+eahOivnemimCcsCiAgICB0dzogJ+maseiXj+eGsemWgOipsemhjOS4rXzplrHoroDmlbjph4/otoXpgY57e3F1b3RhfX3lhITnmoToqbHpoYwnLAogICAgZW46ICdIaWRlIFRvcGljcyBpbiBIb3QgVG9waWNzIHwgd2l0aCB7e3F1b3RhfX0wMCBtaWxsaW9uIHJlYWRpbmcgY291bnRzJywKICB9OwoKICBsYXlvdXQuaGlkZUhvdFRvcGljTGFyZ2VSZWFkID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnaGlkZV9ob3RfdG9waWNfbGFyZ2VfcmVhZCcsCiAgICB2ZXJzaW9uOiA2NSwKICAgIHBhcmVudDogZGV0YWlscy5kZXRhaWxzLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uaGlkZUhvdFRvcGljTGFyZ2VSZWFkLAogICAgcmVmOiB7CiAgICAgIHF1b3RhOiB7CiAgICAgICAgdHlwZTogJ3JhbmdlJywKICAgICAgICBtaW46IDEsCiAgICAgICAgbWF4OiAxMDAsCiAgICAgICAgaW5pdGlhbDogMjAsCiAgICAgIH0sCiAgICB9LAogICAgYXN5bmMgYWluaXQoKSB7CiAgICAgIHV0aWwuY3NzLmFkZCgnLmhvdF90b3BpYyBsaVt5YXdmLXJ0b3BpYy1jb3VudD0iaGlkZGVuIl0sICN0b3BpY0FEIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Jyk7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBmaWx0ZVJpZ2h0VG9waWNDb3VudCgpIHsKICAgICAgICBsZXQgY291bnRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaG90X3RvcGljIGxpOm5vdChbeWF3Zi1ydG9waWMtY291bnRdKSAudG90YWwnKSk7CiAgICAgICAgY291bnRzLmZvckVhY2goZnVuY3Rpb24gKGNvdW50KSB7CiAgICAgICAgICAvLyDnvZHnq5nkuK3mlbDlrZfnlLEgeHh45LiHIO+8jCB4eC545Lq/IOeahOaWueW8j+ihqOekuu+8m+S4lOayoeaciee5geS9k+aIluiLseaWh+eJiOacrAogICAgICAgICAgLy8g5rOo5oSP5pyJ5pe25YmN6Z2i55qE5pWw5a2X5Lya5pyJ5bCP5pWw54K577yM5omA5Lul6KaB5pu/5o2i5Li6IGU0LCBlOCDogIzpnZ4gMDAwMCwgMDAwMDAwMDAKICAgICAgICAgIGNvbnN0IG51bWJlciA9IHN0cmluZ3MucGFyc2VpbnQoY291bnQudGV4dENvbnRlbnQpOwogICAgICAgICAgY29uc3QgbGkgPSBjb3VudC5jbG9zZXN0KCdsaScpOwogICAgICAgICAgaWYgKE51bWJlci5pc05hTihudW1iZXIpIHx8IHRoYXQucmVmLnF1b3RhLmdldENvbmZpZygpICogMWU4IDw9IG51bWJlcikgewogICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ3lhd2YtcnRvcGljLWNvdW50JywgJ2hpZGRlbicpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKCd5YXdmLXJ0b3BpYy1jb3VudCcsICdzaG93Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9sYXlvdXQvdGhlbWUuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwoKICBjb25zdCBsYXlvdXQgPSB5YXdmLnJ1bGVzLmxheW91dDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKICBjb25zdCB1aSA9IHV0aWwudWk7CgogIGNvbnN0IHRoZW1lID0gbGF5b3V0LnRoZW1lID0ge307CgogIGkxOG4udGhlbWVHcm91cFRpdGxlID0gewogICAgY246ICfkuLvpopgnLAogICAgdHc6ICfkuLvpoYwnLAogICAgZW46ICdUaGVtZScsCiAgfTsKCiAgdGhlbWUudGhlbWUgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogbGF5b3V0LmxheW91dCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnRoZW1lR3JvdXBUaXRsZSwKICB9KTsKCiAgY29uc3Qgc2tpbnMgPSB7IHNraW46IHsgXzAwMTogJ+iTneiJsuW/g+aDhScsIF8wMDI6ICfntKvojYboirHnk6MnLCBfMDAzOiAn5rKZ5rup5ryr5q2lJywgXzAwNDogJ+WHjOaZqOS4pOeCueWNiicsIF8wMDU6ICfmoqblubvmmJ/nqbonLCBfMDA2OiAn5pqX5aSc55WZ6aaZJywgXzAwNzogJ+aIkeW/g+mjnue/lCcsIF8wMDg6ICdoYXBweSBmb3JldmVyJywgXzAwOTogJ+W9qeiZuScsIF8wMTA6ICfmoqblubvmuLjkuZDlnLonLCBfMDExOiAn5b2p6Imy5aSp56m6JywgXzAxMjogJ+WQjeS6uuS8micsIF8wMTM6ICflk4fll7cnLCBfMDE0OiAn5oiR5oS/5oSPJywgXzAxNTogJ+eMq+i2oycsIF8wMTY6ICfkv53miqTljJflhrDmtIsnLCBfMDE3OiAn6a2F5b2xJywgXzAxODogJ+erpei2o+W9qeiZuScsIF8wMTk6ICdraXNzJywgXzAyMDogJ+a8k+W9qScsIF8wMjE6ICfnlZnmspknLCBfMDIyOiAn5b+D5pm0JywgXzAyMzogJ2dyZWVud2F5JywgXzAyNDogJ0hlbGxvIFBpZycsIF8wMjU6ICdJYW0gODDlkI4nLCBfMDI2OiAn5a6J6Z2Z5aScJywgXzAyNzogJ+eZvueBtem4nycsIF8wMjg6ICfnoqfojYnok53lpKknLCBfMDI5OiAn56qX5Y+wJywgXzAzMDogJ+aipuW5uycsIF8wMzE6ICfpo57puJ/psbwnLCBfMDMyOiAn57KJ6Imy6aOO5L+h5a2QJywgXzAzNDogJ+WkjeWPpCcsIF8wMzU6ICfpu5Hmnb8nLCBfMDM2OiAn5ZKW5ZWhJywgXzAzNzogJ+aDhei/t+WuneS4veadpScsIF8wMzg6ICflpKrnqbonLCBfMDM5OiAn5raC6bim5p2/JywgXzA0MDogJ+aYn+epuicsIF8wNDE6ICfpm6jlpJwnLCBfMDQyOiAn57q46aOe5py6JywgXzA0MzogJ+mjmCcsIF8wNDU6ICdwb3AnLCBfMDQ2OiAn57Sr6Imy6aOO5oOFJywgXzA0NzogJ2NvZmZlZSBiYXInLCBfMDQ4OiAn6aOO6L275LqR5rehJywgXzA0OTogJ+mjjui9u+S6kea3oScsIF8wNTA6ICfmoqblubvmmJ/nqbonLCBfMDUxOiAn5L+d5oqk5YyX5Yaw5rSLJywgXzA1MjogJ+a8k+W9qScsIF8wNTM6ICfmg4Xov7flrp3kuL3mnaUnLCBfMDU0OiAn5aSq56m6JywgXzA1NTogJ+mbqOWknCcsIF8wNTg6ICfpu5jorqQnLCBfMjExOiAn5oiR5Lus57uT5ama5ZCnJywgXzIxMjogJ+W5uOemj+WcqOi6q+i+uScsIF8yMTQ6ICfmlrDlubTpl7nmmKUnLCBfMjUyOiAn546v5L+d55uK6LW35p2lJywgXzI1MzogJ+WcsOeQg+S4gOWwj+aXticsIF8yNTQ6ICfpmo/miYvmi40nLCBfMjU1OiAn5Li654ix55uK6LW36LeRJyB9LCBza2ludmlwOiB7IF8wMDE6ICfpuJ/kurrnmoTlvILmg7PkuJbnlYwnLCBfMDAyOiAn57q46Z2i5Lq655SfJywgXzAwNjogJ+eugOe6pueUn+a0uycsIF8wMDk6ICfmuLjmiI/ml7blhYknLCBfMDEwOiAn56eA5Ye655yf5oiRJywgXzAxMTogJ+ezluaenOe8pOe6tycsIF8wMTM6ICfmiJHnmoTnv4XohoAnLCBfMDE0OiAn6I6y6IqxJywgXzAxNjogJ+i2hee6p+eOm+S4vScsIF8wMTc6ICfmtarlsI/oirEnLCBfMDE4OiAnODDlkI4nLCBfMDE5OiAn5Y+v54ix5ru05YWU5a2QJywgXzAyMTogJ+a1t+W6leS4lueVjCcsIF8wMjI6ICfnu5noh6rlt7HmlL7kuKrlgYcnLCBfMDIzOiAnODDlkI7nmoTlm57lv4YnLCBfMDI0OiAn6ams5oiP5ZuiJywgXzAyNTogJ+WtpOeLrOeahOWknCcsIF8wMjY6ICfmmpbmmpYnLCBfMDI3OiAn5ZCD6LGG5Lq6JywgXzAyODogJ3JhaW5ib3cnLCBfMDMxOiAn5rW35LmL5qKm5aKDJywgXzAzMjogJ+aXi+i9rOaXtuWFiScsIF8wMzM6ICfljYjlkI7lt7Tlo6vmg4XnvJgnLCBfMDM0OiAn5bCP6buE6bitJywgXzAzNTogJ+Wkj+W+ruWHiScsIF8wMzY6ICfnoqfmsLTmmZroiJ8nLCBfMDM3OiAnTWFycnkgTWUnLCBfMDM4OiAn5rC05aKo6bG8JywgXzAzOTogJ+WkleW9sScsIF8wNDA6ICflv4PkuYvmgYsnLCBfMDQxOiAn5b+D5b+D55u45Y2wJywgXzA0MjogJ+aXheihjOaXtuWFiScsIF8wNDM6ICfmi6XmirHnvo7lpb0nLCBfMDQ0OiAn5a+QJywgXzA0NTogJ+eLl+eLl+a8q+atpScsIF8wNDY6ICfpmL/ni7jnmoTmtbfmtIsnLCBfMDQ3OiAn6JKy5YWs6Iux55qE5qKmJywgXzA0ODogJ+aSreenjemYs+WFiScsIF8wNDk6ICflsI/mg4XkuronLCBfMDUwOiAn5rW35rupJywgXzA1MTogJ+WkqeS9v+eIseS6uicsIF8wNTQ6ICfmgqDpl7LljYjlkI4nLCBfMDU2OiAn6KW/55Oc5aWz5a2pJywgXzA1NzogJ+mDiua4uCcsIF8wNTg6ICfljZfmnoHkvIHpuYUnLCBfMDU5OiAn6ICB5LiK5rW35bKB5pyIJywgXzA2MDogJ+mbvumDvScsIF8wNjE6ICfmtbfovrnluqblgYcnLCBfMDYyOiAn5LiA5Liq5Lq655qE5peF6KGMJywgXzA2MzogJ+eOr+a4uOWcsOeQgycsIF8wNjQ6ICfnvZflsI/pu5HnmoTlvILmg7PkuJbnlYwnLCBfMDY1OiAn5p2O6Zu35LiO6Z+p5qKFJywgXzA2ODogJ+iJvueOqeWFlC3lrojlgJknLCBfMDY5OiAn5L+P55qu5Za15pif5Lq6JywgXzA3MDogJ+aipua4uOS7meWigycsIF8wNzE6ICfniLHmg4XnlYXmg7MnLCBfMDcyOiAn6JCM54uX54uXJywgXzA3MzogJ+mprOiDjOS4iueahOWkqeepuicsIF8wNzQ6ICfmmpbpmLMnLCBfMDc1OiAn5riU6Iif5ZSx5pmaJywgXzA3NjogJ+Wwj+S8meS8tCcsIF8wNzg6ICfnroDljZXnlJ/mtLsnLCBfMDc5OiAn5a6I5pybJywgXzA4MDogJ+WlveWfuuWPiycsIF8wODE6ICfpg73luILmtYHmtaonLCBfMDgyOiAn6Lqy54yr54yrJywgXzA4MzogJ+mUruebmOS7lCcsIF8wODQ6ICfljZfnk5zlpLTlv6vot5EnLCBfMDg1OiAn6aOe5ZCR5pyI55CDJywgXzA4NjogJ+aeq+aelycsIF8wODc6ICfmn7/lrZDnuqLkuoYnLCBfMDg4OiAnVHJpY2sgb3IgVHJlYXQnLCBfMDg5OiAn6ams6YeM5aWlJywgXzA5MDogJ+WkqeepuicsIF8wOTE6ICfnpLznianovbDngrjmnLonLCBfMDkyOiAn6Zi/54u455qE56eL5aSpJywgXzA5MzogJ+WLh+Wjq+eLuCcsIF8wOTQ6ICfokIzlrqDlhazlr5MnLCBfMDk1OiAn5a6B6Z2Z55qE5rW3JywgXzA5NjogJ+aciOWFiScsIF8wOTc6ICdnb29kIG5pZ2h0JywgXzA5ODogJ+WWteaYn+S6uuWQkeWJjeWGsicsIF8wOTk6ICfmo5Lmo5Lns5YnLCBfMTAxOiAn56ul6K+dJywgXzEwMjogJ+eMq+WSquS5kOmYnycsIF8xMDU6ICfooajnmb0nLCBfMTA2OiAn6Ieq55Sx54yq56WeJywgXzEwNzogJ+aipuS4reeahOWwj+WxiycsIF8xMDg6ICdYT1hPJywgXzEwOTogJ+erpeW5tOeahOWwj+eGiicsIF8xMTA6ICfmiJHnmoTkuqTlk43kuZAnLCBfMTExOiAn5LuZ5LmQ6aOY6aOYJywgXzExMjogJ+S4i+mbquWVpicsIF8xMTM6ICflr5LlhqwnLCBfMTE0OiAn5ZCO5aSpJywgXzExNTogJ+ibh+W5tOelneemjycsIF8xMTY6ICflnKPor57ogIHkuronLCBfMTE3OiAn5rGf5Y2Xc3R5bGUnLCBfMTE4OiAn6b6E5a6YJywgXzEyMDogJ+i/quWjq+WwvC3lj7Lov6rlpYcnLCBfMTIxOiAn6L+q5aOr5bC8Lee7tOWwvOeGiicsIF8xMjI6ICfov6rlo6vlsLwt5bCP6aG955quJywgXzEyMzogJ+i/quWjq+WwvC3njpvkuL3njKsnLCBfMTI0OiAn6L+q5aOr5bC8Lee+juS6uumxvCcsIF8xMjU6ICfov6rlo6vlsLwt57Gz5aWH57Gz5aauJywgXzEyNjogJ+i/quWjq+WwvC3mrKLkuZDlnKPor54nLCBfMTI3OiAn6L+q5aOr5bC8LeWwj+S7meWlsycsIF8xMjg6ICflrojmnJsnLCBfMTI5OiAn5bm954G15Y+k5aChJywgXzEzMDogJ+i/t+mbvicsIF8xMzE6ICfph5HoibLpmLPlhYknLCBfMTMyOiAnSSBNaXNzIFUnLCBfMTMzOiAn5pyq5p2l44Gu5qCRJywgXzEzNDogJ+mHkeiJsua1t+a0iycsIF8xMzU6ICfpm6jlkI4nLCBfMTM2OiAn6I2J5Z2h5LiK55qE5aWz5a2pJywgXzEzNzogJ1NleHkgbXVzaWMnLCBfMTM4OiAn56e75Yqo5Z+O5aChJywgXzEzOTogJ+aLpeaKseeIsScsIF8xNDA6ICfmmKXojYknLCBfMTQxOiAn6Iqx5LiO6J22JywgXzE0MjogJ+aoseOBruiKsScsIF8xNDU6ICfpu5HmmpfpmLbmoq8nLCBfMTQ2OiAn6bG8JywgXzE0NzogJ+WFrOS4uycsIF8xNDk6ICfku5nlpbPnmoToo5nmkYYnLCBfMTUwOiAn5bCP5LuZ5aWzJywgXzE1MjogJ+aoseiKseiInicsIF8xNTM6ICfoh6rlqLHoh6rkuZAnLCBfMTU0OiAn5ZOl5ZOlJywgXzE1NjogJ+WutuaciemHkeavmycsIF8xNTg6ICfmt5jmsJTlsI/lk4gnLCBfMTU5OiAn5rW35Yab54uX54uXJywgXzE2MDogJ+W3tOWTpScsIF8xNjM6ICfov6rlo6vlsLwt6a2U5aKD5LuZ6LiqJywgXzE2NDogJ+i/quWjq+WwvC3lhazkuLsnLCBfMTY1OiAn6Z2S5pilJywgXzE2NjogJ+iKseakhScsIF8xNjk6ICfmi4nmi4knLCBfMTczOiAn5pen5Z+O5b6A5LqLJywgXzE3NDogJ+WKn+Wkq+S5i+eOiycsIF8xNzU6ICfkuI3mmI7po57ooYzniaknLCBfMTc2OiAn5pif6ZmF5o6i6ZmpJywgXzE3ODogJ+Wwj+azsOi/qicsIF8xNzk6ICfppbzlubLllrXmmJ/kuronLCBfMTgxOiAn5Za15pif5Lq65LiJ5YWE5byfJywgXzE4MjogJ+m6i+m5v+WWteaYn+S6uicsIF8xODU6ICflj6/niLHllrXmmJ/kuronLCBfMTg3OiAn5q+N54ixJywgXzE4ODogJ+Wkp+aJi+Wwj+aJiycsIF8xODk6ICfkuIDlrrbkuronLCBfMTkyOiAn6ZKi6ZOB5L6gJywgXzE5MzogJ+mSoumTgeS+oOWHuuWHuycsIF8xOTQ6ICfov6rlo6vlsLwt57Gz5aWHJywgXzE5NTogJ+i/quWjq+WwvC3nsbPogIHpvKAnLCBfMTk2OiAn6JCd6I6JJywgXzE5NzogJ+W+oeWnkCcsIF8xOTg6ICflh53mnJvlnLDnkIMnLCBfMTk5OiAn5L6d6Z2gJywgXzIwMTogJ0NT5oiY5aOrJywgXzIwMjogJ1Rha2UgTWUgSG9tZScsIF8yMDM6ICfnmbvoiLlzdHlsZScsIF8yMDQ6ICfnqLvojYnkuronLCBfMjA1OiAnaGFwcHkgZXZlcnlkYXknLCBfMjA2OiAn55Sc54K5JywgXzIwNzogJ+Wkp+mjjuWQuScsIF8yMDg6ICfng6TnuqLolq8nLCBfMjA5OiAnQmFsbCcsIF8yMTE6ICfotKrlkIPom4cnLCBfMjEyOiAn5Yqb5LqJ5LiK5ri4JywgXzIxMzogJ+aji+mAouWvueaJiycsIF8yMTQ6ICflm6Llm6LlnIblnIYnLCBfMjE2OiAn5bm05aSc6aWtJywgXzIyMTogJ+aYpembqCcsIF8yMjI6ICflsJjpo57miawnLCBfMjI0OiAn6Zu+6Zy+5Y6L5Z+OJywgXzIyNTogJ+S7meWls+eahOiInui5iCcsIF8yMjY6ICfml4XooYzotY/mmKUnLCBfMjI3OiAn6LWP5pil5Y67JywgXzIyODogJ+aegemAn+mjmei9picsIF8yMzQ6ICfllrXmmJ/kurrnmoTmgJ3lv7UnLCBfMjM1OiAn5LqM6LSn5Za15pif5Lq6JywgXzIzNjogJ+aAgOW/tScsIF8yMzc6ICfljZbokIzllrXmmJ/kuronLCBfMjM4OiAn6YeR5a2X5aGU55qE56eY5a+GJywgXzIzOTogJ+avjeS6suiKgicsIF8yNDA6ICfnq6/ljYjoioInLCBfMjQyOiAn55uS5a2Q5pif55CDJywgXzI0MzogJ+W/g+W/g+ebuOWNsCcsIF8yNDQ6ICfnsonoibLlv4Pmg4UnLCBfMjQ1OiAn5L6P572X57qq5YWs5ZutJywgXzI0NjogJ+S4lueVjOadrycsIF8yNDc6ICfngrnnkIPlpKfmiJgnLCBfMjUwOiAn5p2o5rSLJywgXzI1MTogJ+adqOa0i+eUn+aXpeS4k+WxnicsIF8zMDM6ICfnuqrlv7Xml6UnLCBfMzA0OiAn56qX5aSW55qE5pil5aSpJywgXzMwNTogJ+mAn+W6puS4jua/gOaDhScsIF8zMDY6ICfnu7/mhI/nm47nhLYnLCBfMzA3OiAn5Yqo55S75Z+OJywgXzMxMDogJ+eJp+S6uicsIF8zMTE6ICfnvo7lpb3po47lhYknLCBfMzEyOiAn5pil5aSp55qE5bm75oOzJywgXzMxODogJ+mHjei/lOWcsOeQgycsIF8zMTk6ICflhrLkuIrkupHpnIQnLCBfMzIwOiAn6Zmo55+zJywgXzMyNTogJ+eIseaDheS9v+iAhScsIF8zMjY6ICfmgKrlhb3lpKflraYnLCBfMzI4OiAn5q+b5oCq5ZKM5bCP5LyZ5Ly0JywgXzMzMDogJ+i/quWjq+WwvC3lpI3lj6TnsbPogIHpvKAnLCBfMzMyOiAn6bG86LeDJywgXzMzMzogJ+WknOiJsicsIF8zMzQ6ICfmtbfmtIsnLCBfMzM1OiAn56WI55u8JywgXzMzNzogJ+eOq+eRsOS7o+ihqOaIkeeahOeIsScsIF8zMzk6ICfnpZ7lgbflpbbniLgyJywgXzM0MjogJ+Wco+ivnumpr+m5vycsIF8zNDM6ICfmuKnmg4XlnKPor54nLCBfMzQ0OiAn5Yaw6Zuq5aWH57yYJywgXzM0NTogJ+mpr+m+memqkeWjqycsIF8zNDc6ICfonbTonbbmmKXlpKknLCBfMzQ4OiAn57u/6Imy55Sf5rS7JywgXzM0OTogJ+W9qeiJsuawlOeQgycsIF8zNTA6ICfpm6jmu7QnLCBfMzUxOiAn5pm056m65pqW6ZizJywgXzM1NDogJ+iKseeToycsIF8zNTU6ICfmmKXoibInLCBfMzU4OiAna2VlbnnnmoTlkpbllaEnLCBfMzU5OiAna2VlbnnnmoTpsrjpsbwnLCBfNDAwOiAn5pil5aSp55qE5rCU5oGvJywgXzQwMTogJ+msvOWog+WogycsIF80MDI6ICflr4blrqQnLCBfNDA0OiAn56u55p6X5ZCs6ZuoJywgXzQwNTogJ+S6kembvicsIF80MDc6ICfmsrnoj5zoirEnLCBfNDA4OiAn5peF6YCU5Lit55qE562J5b6FJywgXzQwOTogJ+aXheeoiycsIF80MTA6ICfmsb3ovabkuYvml4UnLCBfNDExOiAn6I235YWw6aOO6L2mJywgXzQxMjogJ+i/t+W9qeS5i+aImCcsIF80MTQ6ICfmiJjlnLDpo57ovaYnLCBfNDE1OiAn5oOF5L6j5Za15pif5Lq6JywgXzQxNjogJ+WWteaYn+S6uuWSjOmxvCcsIF80MTc6ICfkuIDotbfljYjop4knLCBfNDE5OiAn54ix5b+D56OB5bimJywgXzQyMDogJ+adpeiHquaYn+aYn+eahOaIkScsIF80MjI6ICfmrKLkuZDllrXmmJ/kuronLCBfNDIzOiAn56eB5a626aOe56KfJywgXzQyNTogJ+S5kOmYnycsIF82MDA6ICflrrYnLCBfNzAyOiAn57qq5b+15rOw5oiI5bCUJywgXzcwNDogJ1RGQk9ZU+WwkeW5tOW8uicsIF83MDk6ICdURkJPWVPpnZLmmKXkv67ngrzmiYvlhownLCBfNzExOiAn5paw54mI5b6u5Y2aJywgXzcxMzogJ+aOouWvu+W5uOemjycsIF83MTQ6ICflpI/lpKnkvaDlpb0nLCBfNzE1OiAn5oiR54ix54Gr6ZSFJywgXzcxNjogJ+e6ouiJsuW3tOWjqycsIF83MTc6ICfku7DmnJvmmJ/nqbonLCBfNzE4OiAnaGFwcHkgYmlydGhkYXknLCBfNzE5OiAn6ZO25p2P55+l56eLJywgXzcyMjogJ+eOqembquWSrycsIF83MjM6ICfllrXmmJ/kurrnmoTmmJ/pmYXnqb/otoonLCBfNzI0OiAnSmluZ2xlIGJlbGxzJywgXzcyNTogJ+mXueaWsOaYpScsIF83MjY6ICfkuInnvorlvIDms7AnLCBfNzMxOiAnN+aciOaXpeWOhicsIF83MzI6ICc45pyI5pel5Y6GJywgXzczMzogJznmnIjml6XljoYnLCBfNzM0OiAnMTDmnIjml6XljoYnLCBfNzM1OiAnMTHmnIjml6XljoYnLCBfNzM2OiAnMTLmnIjml6XljoYnLCBfNzM3OiAnMeaciOaXpeWOhicsIF83Mzg6ICcy5pyI5pel5Y6GJywgXzczOTogJzPmnIjml6XljoYnLCBfNzQwOiAn56Kn5rOiJywgXzc0MTogJ+S4gOeMq+S4gOS4lueVjCcsIF83NDI6ICflkZDllornmoTmsarmsaonLCBfNzQzOiAn5a625pyJ6aaL54yrJywgXzc0NDogJ+eLl+eLl+eIsee+juS4vScsIF83NDU6ICfmuKnmn5TlpoLllrUnLCBfNzQ2OiAn6JeP54yr54yrJywgXzc0NzogJ+S8tOWQm+aXheihjCcsIF83NDg6ICfmiJHmg7PpnZnpnZknLCBfNzQ5OiAn5YC+5oOFJywgXzc1MDogJ+eyvOeyvOa1t+WFiScsIF83NTE6ICfljY7mmajlrocnLCBfNzUyOiAnU05INDgnLCBfNzUzOiAn6K+66KiAJywgXzc1NDogJ+S5lOaMr+WuhycsIF83NTU6ICflpp7lpp7lkoznq6/ljYgnLCBfNzU2OiAn5pqW5pqW5bGLJywgXzc1NzogJ+S+neWBjml2dmknLCBfODAwOiAnVEZCT1lT5piT54OK5Y2D5466JywgXzgwMTogJ+WInembqicsIF84MDI6ICfmmpblv4Pmi7/pk4EnLCBfODAzOiAn6Zmq5Ly0JywgXzgwNDogJ01lcnJ5IFhtYXMnLCBfODA1OiAn6YCG5YWJ5qOu5p6XJywgXzgwNjogJ+aIkeeIseaKq+iQqCcsIF84MDc6ICfml4XooYzmiJDnmL4nLCBfODA4OiAn5oiR54ix55Sc54K5JywgXzgwOTogJ+e+iuW5tOWIsCcsIF84MTE6ICfluIzmnJvkuYvmoJEnLCBfODEyOiAn5rW35rSLJywgXzgxMzogJ+Wwj+Wym+WSjOiIuScsIF84MTQ6ICfpm6rmma8nLCBfODE1OiAn5b2p6Jm55LmL6LevJyB9LCBza2ludmlwZjogeyBfMDAxOiAn5aSn5rW3JywgXzAwMjogJ+S4i+mbqicsIF8wMDM6ICflpKnkvb8nLCBfMDA0OiAn5Y+M5a2Q5bqnJywgXzAwNTogJ+i/nOihjCcgfSwgc2tpbnZpcGc6IHsgXzAwMTogJ+avleS4muWtoycsIF8wMDI6ICfkuIrnj63ml4/nmoTlkajkuIAnLCBfMDAzOiAn5LiK54+t5peP55qE5ZGo5LqMJywgXzAwNDogJ+S4iuePreaXj+eahOWRqOS4iScsIF8wMDU6ICfkuIrnj63ml4/nmoTlkajlm5snLCBfMDA2OiAn5LiK54+t5peP55qE5ZGo5LqUJywgXzAwNzogJ+S4iuePreaXj+eahOWRqOWFrScsIF8wMDg6ICfkuIrnj63ml4/nmoTlkajlpKknIH0sIHNraW52aXBqOiB7IF8wMDE6ICfotoXnuqfnjpvkuL3liqjmgIHniYgnIH0sIHdlZWtza2luOiB7IF8wMDI6ICflvq7ljZrnu4/lhbgnIH0sIHdlZWtza2ludmlwOiB7IF8wMDE6ICfml4XooYzml7blhYknLCBfMDAyOiAn57u/5oSPJywgXzAwMzogJ+S4iuePreaXj+S4gOWRqOW/g+aDhScsIF8wMDQ6ICfov6rlo6vlsLwnIH0gfTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBzZXRTa2luOiB7CiAgICAgIGNuOiAn57uf5LiA5omA5pyJ6aG16Z2i55qE5qih5p2/fHt7c2tpbn19IHt7aX19JywKICAgICAgdHc6ICfntbHkuIDmiYDmnInpoIHpnaLnmoTmqKHmnb98e3tza2lufX0ge3tpfX0nLAogICAgICBlbjogJ1Nob3cgYWxsIHBhZ2VzIHdpdGggdGVtcGxhdGUgfCB7e3NraW59fSB7e2l9fScsCiAgICB9LAogICAgc2V0U2tpbkRldGFpbDogewogICAgICBjbjogJ+W8gOWQr+WQjuaJgOaciemhtemdouWwhuaYvuekuuaCqOmAieaLqeeahOaooeadv++8jOWMheaLrOWFtuS7lueUqOaIt+eahOS4quS6uuS4u+mhteOAguaooeadv+S4jeS8muimhuebluaCqOWcqOS4u+mhteiHquWumuS5ieeahOiDjOaZr+WbvuaIlumFjeiJsu+8jOS9huaYr+S8muimhuebluS4quS6uuS4u+mhteeahOiDjOaZr+WbvuaIlumFjeiJsuOAguaooeadv+aViOaenOS7heWcqOaCqOeahOa1j+iniOWZqOS4reeUn+aViO+8jOS7luS6uuiuv+mXruaCqOeahOS4quS6uuS4u+mhteaXtu+8jOS7jeS8mueci+WIsOaCqOWcqOW+ruWNmuS4reiuvue9rueahOaooeadv+OAguaooeadv+eahOmAieaLqeivt+WPguiAg3t7bGlzdHBhZ2V9fe+8jOWcqOaooeadv+WVhuW6l+S4reeCueWHu+WbvueJh+mihOiniOS4juW6lOeUqOaooeadv+OAgicsCiAgICB9LAogICAgc2V0U2tpbkxpc3RQYWdlVGl0bGU6IHsKICAgICAgY246ICfmqKHmnb/llYblupcnLAogICAgfSwKICAgIHNldFNraW5CeVByZXZpZXdUaXRsZTogewogICAgICBjbjogJ1lldCBBbm90aGVyIFdlaWJvIEZpbHRlciDmqKHmnb/orr7nva4nLAogICAgfSwKICAgIHNldFNraW5CeVByZXZpZXc6IHsKICAgICAgY246ICfmgqjopoHlnKjoja/mlrnmianlsZXkuK3kvb/nlKjigJx7MX3igJ3mqKHmnb/lkJfvvJ/lkK/nlKjlkI7mgqjorr/pl67lkITnp43pobXpnaLml7bpg73lsIbkvb/nlKjlvZPliY3nmoTmqKHmnb/jgILlnKjohJrmnKzkuK3kvb/nlKjnmq7ogqTkuI3kvJrlvbHlk43lhbbku5bnlKjmiLfmn6XnnIvmgqjkuKrkurrkuLvpobXml7bnmoTmqKHmnb/moLflvI/jgIInLAogICAgICB0dzogJ+aCqOimgeWcqOiXpeaWueaTtOWxleS4reS9v+eUqOOAjHsxfeOAjeaooeadv+WXju+8n+WVn+eUqOW+jOaCqOioquWVj+WQhOeorumggemdouaZgumDveWwh+S9v+eUqOeVtuWJjeeahOaooeadv+OAguWcqOiFs+acrOS4reS9v+eUqOearuiGmuS4jeacg+W9semfv+WFtuS7lueUqOaItuafpeeci+aCqOWAi+S6uuS4u+mggeaZgueahOaooeadv+aoo+W8j+OAgicsCiAgICAgIGVuOiAnRG8geW91IHdhbnQgdG8gZW5hYmxlIHRoZSB0ZW1wbGF0ZSAiezF9IiBpbiBZQVdGPyBBbGwgcGFnZXMgd2lsbCBzaG93IGN1cnJlbnQgdGVtcGxhdGUgaWYgeW91IGNob29zZSBlbmFibGUgaXQuIFRoZSB0ZW1wbGF0ZSBvbmx5IGFwcGxpZWQgb24geW91ciBicm93c2VyLicsCiAgICB9LAogIH0pOwoKICB0aGVtZS5hcHBseSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2xheW91dF90aGVtZV9hcHBseScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiB0aGVtZS50aGVtZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNldFNraW4sCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNldFNraW5EZXRhaWwgfSwKICAgICAgc2tpbjogewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIGluaXRpYWw6ICdza2luMDU4JywKICAgICAgICBzZWxlY3Q6IFtdLmNvbmNhdCguLi5PYmplY3Qua2V5cyhza2lucykuc29ydCgpLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICBjb25zdCB2YWwgPSBza2luc1trZXldOwogICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbCkubWFwKGluZGV4ID0+IHsKICAgICAgICAgICAgY29uc3QgbnVtID0gaW5kZXguc2xpY2UoMSksIHNraW5JZCA9IGtleSArIG51bTsKICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHNraW5JZCwgdGV4dDogdmFsW2luZGV4XSArICcgKCcgKyBza2luSWQgKyAnKScgfTsKICAgICAgICAgIH0pOwogICAgICAgIH0pKSwKICAgICAgfSwKICAgICAgbGlzdHBhZ2U6IHsKICAgICAgICByZW5kZXIoKSB7CiAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgbGluay5ocmVmID0gJy8vc2tpbi52aXAud2VpYm8uY29tL2xpc3Q/dG9wbmF2PTEmd3ZyPTYnOwogICAgICAgICAgbGluay50YXJnZXQgPSAnX2JsYW5rJzsKICAgICAgICAgIGxpbmsudGV4dENvbnRlbnQgPSBpMThuLnNldFNraW5MaXN0UGFnZVRpdGxlOwogICAgICAgICAgcmV0dXJuIGxpbms7CiAgICAgICAgfSwKICAgICAgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgdXNlckNvbmZpZ1NraW5JZCA9IHRoaXMucmVmLnNraW4uZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IHNraW5JZCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYXRpb24uc2VhcmNoKS5nZXQoJ3NraW5JZCcpIHx8IHVzZXJDb25maWdTa2luSWQ7CiAgICAgIGxldCB2ZXJzaW9uID0gJyc7CiAgICAgIGxldCBza2luU3R5bGUgPSBudWxsLCBjb3ZlclN0eWxlID0gbnVsbDsKICAgICAgY29uc3Qgc2V0U2tpbklkID0gZnVuY3Rpb24gKHNraW5JZCkgewogICAgICAgIHNraW5TdHlsZS5ocmVmID0gc2tpblN0eWxlLmhyZWYucmVwbGFjZSgvXC9za2luXC9bXi9dKlwvc2tpbi5jc3MvLCBgL3NraW4vJHtza2luSWR9L3NraW4uY3NzYCk7CiAgICAgICAgY29uc3QgY292ZXJDc3MgPSBgI3NraW5fY292ZXJfcyB7IGJhY2tncm91bmQtaW1hZ2U6IHVybCgiLy9pbWcudC5zaW5hanMuY24vdDYvc2tpbi8ke3NraW5JZH0vaW1hZ2VzL3Byb2ZpbGVfY292ZXJfcy5qcGc/dmVyc2lvbj0ke3ZlcnNpb259IikgIWltcG9ydGFudDsgfWA7CiAgICAgICAgKGNvdmVyU3R5bGUgfHwgKGNvdmVyU3R5bGUgPSBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJykpKSkudGV4dENvbnRlbnQgPSBjb3ZlckNzczsKICAgICAgfTsKICAgICAgY29uc3Qgc2V0U2tpbiA9IGZ1bmN0aW9uIHNldFNraW4oKSB7CiAgICAgICAgLy8g5aS05p2h5paH56ug6aG16Z2i6K6+572u5qih5p2/5Lya5a+86Ie055WM6Z2i5re35LmxCiAgICAgICAgaWYgKGluaXQucGFnZS50eXBlKCkgPT09ICd0dGFydGljbGUnKSByZXR1cm47CiAgICAgICAgaWYgKCFza2luU3R5bGUpIHsKICAgICAgICAgIGNvbnN0IHNraW5Dc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdsaW5rW2hyZWYqPSIvL2ltZy50LnNpbmFqcy5jbi90Ni9za2luLyJdW2hyZWYqPSIvc2tpbi5jc3M/Il0nKTsKICAgICAgICAgIGlmICghc2tpbkNzcykgcmV0dXJuOwogICAgICAgICAgdmVyc2lvbiA9ICgoc2tpbkNzcy5ocmVmLm1hdGNoKC92ZXJzaW9uPShbYS1mQS1GMC05XSopLykgfHwgW10pWzFdKSB8fCAnJzsKICAgICAgICAgIHNraW5TdHlsZSA9IHNraW5Dc3MuY2xvbmVOb2RlKCk7IHNraW5TdHlsZS5pZCA9ICd5YXdmLXNraW5fc3R5bGUnOwogICAgICAgICAgc2V0U2tpbklkKHNraW5JZCk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGlzSG9tZSA9IGRvY3VtZW50LmJvZHkubWF0Y2hlcygnLkZSQU1FX21haW4nKTsKICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd5YXdmLXNraW5fc3R5bGUnKSB8fAogICAgICAgICAgLy8g5b6u5Y2a5LiN6IO95L+d6K+BIGlkIOS4uiBza2luX3N0eWxlIOeahOWvueixoeWUr+S4gO+8jOaJgOS7peS4jeiDveeUqCAjc2tpbl9zdHlsZSDpgInmi6nlmajvvIznpZ7lpYflkKcKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN5YXdmLXNraW5fc3R5bGUgfiBbaWQ9InNraW5fc3R5bGUiXScpIHx8CiAgICAgICAgICAoIWlzSG9tZSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjeWF3Zi1za2luX3N0eWxlIH4gW2lkPSJjdXN0b21fc3R5bGUiXScpKQogICAgICAgICkgewogICAgICAgICAgc2V0U2tpbklkKHNraW5JZCk7CiAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNraW5TdHlsZSk7CiAgICAgICAgfQogICAgICAgIC8vIOWmguaenOaYr+mmlumhte+8jOiAjOS4lOS9v+eUqOS6huiHquWumuS5ieaooeadv++8m+S/neivgeiHquWumuS5ieaooeadv+S8mOWFiOe6p++8iOS9huaYr+WcqOS4quS6uuS4u+mhteS4iuimhuebluiHquWumuS5ieaooeadv++8iQogICAgICAgIGlmIChpc0hvbWUgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2lkPSJjdXN0b21fc3R5bGUiXSB+ICN5YXdmLXNraW5fc3R5bGUnKSkgewogICAgICAgICAgY29uc3QgY3VzdG9tU3R5bGVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2lkPSJjdXN0b21fc3R5bGUiXScpOwogICAgICAgICAgY29uc3QgY3VzdG9tU3R5bGUgPSBjdXN0b21TdHlsZUxpc3RbY3VzdG9tU3R5bGVMaXN0Lmxlbmd0aCAtIDFdOwogICAgICAgICAgc2tpblN0eWxlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGN1c3RvbVN0eWxlLCBza2luU3R5bGUubmV4dFNpYmxpbmcpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChzZXRTa2luKTsKICAgIH0sCiAgICBpbml0KCkgewogICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgKGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zdCBzZWFyY2ggPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2F0aW9uLnNlYXJjaCk7CiAgICAgICAgY29uc3Qgc2tpbklkID0gc2VhcmNoLmdldCgnc2tpbklkJyk7CiAgICAgICAgaWYgKCFza2luSWQpIHJldHVybjsKICAgICAgICBjb25zdCBuYW1lID0gc2tpbnNbc2tpbklkLnJlcGxhY2UoL1xkKyQvLCAnJyldWydfJyArIHNraW5JZC5yZXBsYWNlKC9eXEQrLywgJycpXTsKICAgICAgICBpZiAoIW5hbWUpIHJldHVybjsKICAgICAgICBjb25zdCBhbnN3ZXIgPSBhd2FpdCB1aS5jb25maXJtKHsKICAgICAgICAgIGlkOiAneWF3Zi11c2Utc2tpbicsCiAgICAgICAgICB0aXRsZTogaTE4bi5zZXRTa2luQnlQcmV2aWV3VGl0bGUsCiAgICAgICAgICB0ZXh0OiBpMThuLnNldFNraW5CeVByZXZpZXcucmVwbGFjZSgnezF9JywgKCkgPT4gbmFtZSksCiAgICAgICAgfSk7CiAgICAgICAgaWYgKGFuc3dlcikgewogICAgICAgICAgcnVsZS5yZWYuc2tpbi5zZXRDb25maWcoc2tpbklkKTsKICAgICAgICAgIHJ1bGUuc2V0Q29uZmlnKHRydWUpOwogICAgICAgICAgc2VhcmNoLmRlbGV0ZSgnc2tpbklkJyk7CiAgICAgICAgICBsb2NhdGlvbi5zZWFyY2ggPSBzZWFyY2g7CiAgICAgICAgfQogICAgICB9KCkpOwogICAgfSwKICB9KTsKCiAgaTE4bi5uYXZiYXJEYXJrID0gewogICAgY246ICfmt7HoibLkuLvpopjlr7zoiKrmoI8nLAogICAgdHc6ICfmt7HoibLkuLvpoYzlsI7opr3liJcnLAogICAgZW46ICdEYXJrIHRoZW1lIG5hdmJhcicsCiAgfTsKCiAgdGhlbWUuZGFya05hdiA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2xheW91dF9uYXZfZGFyaycsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiB0aGVtZS50aGVtZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLm5hdmJhckRhcmssCiAgICBhY3NzOiBgCi5XQl9nbG9iYWxfbmF2IHsgYmFja2dyb3VuZDogIzMzMzsgfQouV0JfZ2xvYmFsX25hdl9hbHBoYSB7IGJhY2tncm91bmQ6IHJnYmEoNTEsIDUxLCA1MSwgMC45NCk7IH0KLmduX2xvZ28gLmxvZ286ZW1wdHkgeyBiYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7IH0KLmduX2xvZ28gLmxvZ286ZW1wdHk6OmJlZm9yZSwgLmduX2xvZ28gLmxvZ286ZW1wdHk6OmFmdGVyIHsgY29udGVudDogIiAiOyBkaXNwbGF5OiBibG9jazsgYmFja2dyb3VuZDogdXJsKCIvL2ltZy50LnNpbmFqcy5jbi90Ni9zdHlsZS9pbWFnZXMvZ2xvYmFsX25hdi9XQl9sb2dvLnBuZz9pZD0xNDA0MjExMDQ3NzI3Iikgbm8tcmVwZWF0IDAgNDAlOyBoZWlnaHQ6IDQ4cHg7IH0KQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAyKSwgb25seSBzY3JlZW4gYW5kICgtbW96LW1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86IDIpLCBvbmx5IHNjcmVlbiBhbmQgKG1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86IDIpIHsKICAuZ25fbG9nbyAubG9nbzplbXB0eTo6YmVmb3JlLCAuZ25fbG9nbyAubG9nbzplbXB0eTo6YWZ0ZXIgeyBiYWNrZ3JvdW5kLWltYWdlOnVybCgiLy9pbWcudC5zaW5hanMuY24vdDYvc3R5bGUvaW1hZ2VzL2dsb2JhbF9uYXYvV0JfbG9nby14Mi5wbmc/aWQ9MTQwNDIxMTA0NzcyNyIpOyBiYWNrZ3JvdW5kLXNpemU6ODBweCAyN3B4OyB9Cn0KLmduX2xvZ28gLmxvZ286ZW1wdHk6OmJlZm9yZSB7IHdpZHRoOiAzNnB4OyBmbG9hdDogbGVmdDsgfQouZ25fbG9nbyAubG9nbzplbXB0eTo6YWZ0ZXIgeyB3aWR0aDogMTA0cHg7IGZsb2F0OiByaWdodDsgYmFja2dyb3VuZC1wb3NpdGlvbjogLTM2cHggNDAlOyB9Ci5nbl9sb2dvIC5sb2dvOmVtcHR5OjphZnRlciB7IGZpbHRlcjogdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnJTIwdmlld0JveD0lMjIwJTIwMCUyMDE4MyUyMDI3NiUyMiUyMGlkPSUyMmltZzMlMjIlMjB4bWxucz0lMjJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyUyMiUzRSUzQ2ZpbHRlciUyMGlkPSUyMmludmVydCUyMiUzRSUzQ2ZlQ29tcG9uZW50VHJhbnNmZXIlM0UlM0NmZUZ1bmNSJTIwdGFibGVWYWx1ZXM9JTIyMSUyMDAlMjIlMjB0eXBlPSUyMnRhYmxlJTIyLyUzRSUzQ2ZlRnVuY0clMjB0YWJsZVZhbHVlcz0lMjIxJTIwMCUyMiUyMHR5cGU9JTIydGFibGUlMjIvJTNFJTNDZmVGdW5jQiUyMHRhYmxlVmFsdWVzPSUyMjElMjAwJTIyJTIwdHlwZT0lMjJ0YWJsZSUyMi8lM0UlM0MvZmVDb21wb25lbnRUcmFuc2ZlciUzRSUzQy9maWx0ZXIlM0UlM0Mvc3ZnJTNFI2ludmVydCIpOyAtd2Via2l0LWZpbHRlcjogaW52ZXJ0KDEwMCUpOyBmaWx0ZXI6IGludmVydCgxMDAlKTsgfQouRlJBTUVfbWFpbiAuV0JfZ2xvYmFsX25hdiAuZ25fbmF2X2xpc3QgbGkgLmhvbWUgZW0geyBjb2xvcjogI2ZhN2QzYzsgfQouV0JfZ2xvYmFsX25hdiAuU19maWNvbiwgLldCX2dsb2JhbF9uYXYgLlNfZmljb25fZGlzLCAuV0JfZ2xvYmFsX25hdiBhLlNfZmljb25fZGlzOmhvdmVyLCAuV0JfZ2xvYmFsX25hdiBhOmhvdmVyIC5TX2ZpY29uX2RpcyB7IGNvbG9yOiAjYTZhZmJmOyB9Ci5XQl9nbG9iYWxfbmF2IC5TX3R4dDEsIC5XQl9nbG9iYWxfbmF2IC5TV19mdW4gLlNfZnVuYzEgeyBjb2xvcjogI2VlZTsgfQpgLAogIH0pOwoKICBpMThuLmNvbG9yT3ZlcnJpZGUgPSB7CiAgICBjbjogJ+S/ruaUuee9kemhtemFjeiJsu+8iOWNiumAj+aYjuiDjOaZr++8iXx85Li76IOM5pmv6Imye3tjb2xvcjJ9fXzpgI/mmI7luqZ7e3RyYW5zcGFyZW5jeTJ9fSV8fOWJr+iDjOaZr+iJsnt7Y29sb3IxfX186YCP5piO5bqme3t0cmFuc3BhcmVuY3kxfX0lfHzovpPlhaXmoYbog4zmma/oibJ7e2NvbG9yM319fOmAj+aYjuW6pnt7dHJhbnNwYXJlbmN5M319JScsCiAgICB0dzogJ+S/ruaUuee2sumggemFjeiJsu+8iOWNiumAj+aYjuiDjOaZr++8iXx85Li76IOM5pmv6Imye3tjb2xvcjJ9fXzpgI/mmI7luqZ7e3RyYW5zcGFyZW5jeTJ9fSV8fOWJr+iDjOaZr+iJsnt7Y29sb3IxfX186YCP5piO5bqme3t0cmFuc3BhcmVuY3kxfX0lfHzovLjlhaXmlrnloYrog4zmma/oibJ7e2NvbG9yM319fOmAj+aYjuW6pnt7dHJhbnNwYXJlbmN5M319JScsCiAgICBlbjogJ0NoYW5nZSBjb2xvcnMgb24gcGFnZSAoU2VtaS10cmFuc3BhcmVudCBiYWNrZ3JvdW5kKSB8fCBQcmltYXJ5IEJhY2tncm91bmQgQ29sb3Ige3tjb2xvcjJ9fSB8IHRyYW5zcGFyZW5jeSB7e3RyYW5zcGFyZW5jeTJ9fSUgfHwgU2Vjb25kYXJ5IEJhY2tncm91bmQgQ29sb3Ige3tjb2xvcjF9fSB8IHRyYW5zcGFyZW5jeSB7e3RyYW5zcGFyZW5jeTF9fSUgfHwgSW5wdXQgYm94IHt7Y29sb3IzfX0gfCB0cmFuc3BhcmVuY3kge3t0cmFuc3BhcmVuY3kzfX0lJywKICB9OwoKICB0aGVtZS5jb2xvciA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2xheW91dF90aGVtZV9jb2xvcicsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiB0aGVtZS50aGVtZSwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmNvbG9yT3ZlcnJpZGUsCiAgICByZWY6IHsKICAgICAgY29sb3IxOiB7IHR5cGU6ICdjb2xvcicsIGluaXRpYWw6ICcjZjZmNmY2JyB9LAogICAgICB0cmFuc3BhcmVuY3kxOiB7IHR5cGU6ICdyYW5nZScsIG1pbjogMCwgbWF4OiAxMDAsIGluaXRpYWw6IDMwIH0sCiAgICAgIGNvbG9yMjogeyB0eXBlOiAnY29sb3InLCBpbml0aWFsOiAnI2ZmZmZmZicgfSwKICAgICAgdHJhbnNwYXJlbmN5MjogeyB0eXBlOiAncmFuZ2UnLCBtaW46IDAsIG1heDogMTAwLCBpbml0aWFsOiAzMCB9LAogICAgICBjb2xvcjM6IHsgdHlwZTogJ2NvbG9yJywgaW5pdGlhbDogJyNmZmZmZmYnIH0sCiAgICAgIHRyYW5zcGFyZW5jeTM6IHsgdHlwZTogJ3JhbmdlJywgbWluOiAwLCBtYXg6IDEwMCwgaW5pdGlhbDogMzAgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgY29sb3JTdHIgPSAoY29sb3IsIHRyYW5zcGFyZW5jeSkgPT4gY29sb3IgKyAoMjU2IHwgMjU1ICogKDEgLSB0cmFuc3BhcmVuY3kgLyAxMDApKS50b1N0cmluZygxNikuc2xpY2UoLTIpOwogICAgICBjb25zdCBjb2xvcjEgPSBjb2xvclN0cih0aGlzLnJlZi5jb2xvcjEuZ2V0Q29uZmlnKCksIHRoaXMucmVmLnRyYW5zcGFyZW5jeTEuZ2V0Q29uZmlnKCkpOwogICAgICBjb25zdCBjb2xvcjIgPSBjb2xvclN0cih0aGlzLnJlZi5jb2xvcjIuZ2V0Q29uZmlnKCksIHRoaXMucmVmLnRyYW5zcGFyZW5jeTIuZ2V0Q29uZmlnKCkpOwogICAgICBjb25zdCBjb2xvcjMgPSBjb2xvclN0cih0aGlzLnJlZi5jb2xvcjMuZ2V0Q29uZmlnKCksIHRoaXMucmVmLnRyYW5zcGFyZW5jeTMuZ2V0Q29uZmlnKCkpOwogICAgICBjb25zdCBub3RlcyA9IGNvbG9yU3RyKCcjZmZmOGJmJywgTWF0aC5yb3VuZCgxMDAgLSAoMTAwIC0gdGhpcy5yZWYudHJhbnNwYXJlbmN5MS5nZXRDb25maWcoKSkgKiogMyAvIDFlNCkpOwogICAgICBjc3MuYXBwZW5kKGAKYm9keSAuU19iZzEsIGJvZHkgLlNXX2Z1bl9iZzpob3ZlciwgYm9keSAuU1dfZnVuX2JnX2FjdGl2ZSB7IGJhY2tncm91bmQtY29sb3I6ICR7Y29sb3IxfTsgfQpib2R5IC5TX2JnMiwgYm9keSBibG9ja3F1b3RlLCBib2R5IC5XX2J0bl9iLCBib2R5IC5XX2lucHV0LCBib2R5IC5TV19mdW5fYmcgeyBiYWNrZ3JvdW5kLWNvbG9yOiAke2NvbG9yMn07IH0KYm9keSAuU19iZzFfYnIgeyBib3JkZXItY29sb3I6ICR7Y29sb3IxfTsgfQpib2R5IC5TX2JnMl9iciB7IGJvcmRlci1jb2xvcjogJHtjb2xvcjJ9OyB9CmJvZHkgLldfaW5wdXQsIGJvZHkgLnNlbmRfd2VpYm8gLmlucHV0IHsgYmFja2dyb3VuZC1jb2xvcjogJHtjb2xvcjN9OyB9CgouU19iZzIgLnByaXZhdGVfbGlzdC5TV19mdW5fYmc6bm90KC5jdXIpLAouV0JfdGFiX2EgLnRhYiAuU19iZzIgLlNfYmcyLAouU19iZzIgLldCX3dlYmltX3BhZ2UgLndlYmltX2NvbnRhY3RzX21vZAp7IGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyB9CgouV0Jfbm90ZXMgeyBiYWNrZ3JvdW5kLWNvbG9yOiAke25vdGVzfSB9CgouV19hcnJvd19ib3JfdCBpLCAuV19hcnJvd19ib3JfdCBlbSB7IGJvcmRlci1sZWZ0LWNvbG9yOiB0cmFuc3BhcmVudDsgYm9yZGVyLXJpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDsgYm9yZGVyLXRvcC1jb2xvcjogdHJhbnNwYXJlbnQ7IH0KLldfYXJyb3dfYm9yX3IgaSwgLldfYXJyb3dfYm9yX3IgZW0geyBib3JkZXItYm90dG9tLWNvbG9yOiB0cmFuc3BhcmVudDsgYm9yZGVyLXJpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDsgYm9yZGVyLXRvcC1jb2xvcjogdHJhbnNwYXJlbnQ7IH0KLldfYXJyb3dfYm9yX2IgaSwgLldfYXJyb3dfYm9yX2IgZW0geyBib3JkZXItYm90dG9tLWNvbG9yOiB0cmFuc3BhcmVudDsgYm9yZGVyLWxlZnQtY29sb3I6IHRyYW5zcGFyZW50OyBib3JkZXItcmlnaHQtY29sb3I6IHRyYW5zcGFyZW50OyB9Ci5XX2Fycm93X2Jvcl9sIGksIC5XX2Fycm93X2Jvcl9sIGVtIHsgYm9yZGVyLWJvdHRvbS1jb2xvcjogdHJhbnNwYXJlbnQ7IGJvcmRlci1sZWZ0LWNvbG9yOiB0cmFuc3BhcmVudDsgYm9yZGVyLXRvcC1jb2xvcjogdHJhbnNwYXJlbnQ7IH0KCi5XQl90YWJfYSAudGFiX2JveF9hX3IyIC50YWIgLmxpX2ZpcnN0LCAuV0JfdGFiX2EgLnRhYl9ib3hfYV9yMiAudGFiIC5saV9sYXN0IHsgZGlzcGxheTogbm9uZTsgfQouV0JfdGFiX2EgLnRhYl9ib3hfYSAudGFiIHsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IHJvdzsgZmxleC13cmFwOiBub3dyYXA7IGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kOyBhbGlnbi1pdGVtczogc3RyZXRjaDsgfQoKLldCX3RhYl9hLldCX3RhYl9hIC50YWIgLnQgeyBoZWlnaHQ6IDM4cHg7IHdpZHRoOiBjYWxjKDEwMCUgLSAxNnB4KTsgfQouV0JfdGFiX2EuV0JfdGFiX2EgLnRhYiAuYiB7IGRpc3BsYXk6IG5vbmU7IH0KLldCX3RhYl9hLldCX3RhYl9hIC50YWJfYm94X2EgLnRhYi5jbGVhcmZpeDo6YWZ0ZXIgeyBkaXNwbGF5OiBub25lOyB9Ci5XQl90YWJfYS5XQl90YWJfYSAudGFiX2JveF9hIC50YWIgbGkgeyBtYXJnaW46IDA7IGZsZXgtZ3JvdzogMTsgfQouV0JfdGFiX2EuV0JfdGFiX2EgLnRhYl9ib3hfYV9yNiAudCB7IHdpZHRoOiBjYWxjKDEwMCUgLSAxNHB4KTsgfQoKLnNlYXJjaF9kaXJlY3RhcmVhLCAuV0JfZWRpdG9yX2lmcmFtZSB7IGJhY2tncm91bmQ6IG5vbmU7IH0KLnByaXZhdGVfbGlzdF9ib3ggLnByaXZhdGVfaGVhZCB7IHBhZGRpbmctYm90dG9tOiA4cHg7IH0KLnByaXZhdGVfbGlzdF9ib3ggLnByaXZhdGVfYm9keSB7IG1hcmdpbi10b3A6IDA7IH0KI3dlaWJvY2hhdCB7IGJhY2tncm91bmQ6IG5vbmU7IH0KYCk7CiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2xheW91dC91c2VyY3NzLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGVudiA9IHlhd2YuZW52OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBleHRlcm5hbE1lbnUgPSB5YXdmLmV4dGVybmFsTWVudTsKCiAgY29uc3QgbGF5b3V0ID0geWF3Zi5ydWxlcy5sYXlvdXQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgdWkgPSB1dGlsLnVpOwoKICBjb25zdCB1c2VyQ3NzID0gbGF5b3V0LnVzZXJDc3MgPSB7fTsKCiAgaTE4bi51c2VyQ3NzR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn6Ieq5a6a5LmJIENTUyDmoLflvI8nLAogICAgdHc6ICfoh6roqIIgQ1NTIOW8j+aooycsCiAgICBlbjogJ0N1c3RvbSBDU1MnLAogIH07CgogIHVzZXJDc3MudXNlckNzcyA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBsYXlvdXQubGF5b3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udXNlckNzc0dyb3VwVGl0bGUsCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgdXNlckNzczogewogICAgICBjbjogJ+S9v+eUqOiHquWumuS5iSBDU1Mg5qC35byPIHt7aX19fHx7e2Nzc319JywKICAgICAgdHc6ICfkvb/nlKjoh6roqIIgQ1NTIOW8j+aooyB7e2l9fXx8e3tjc3N9fScsCiAgICAgIGVuOiAnQXBwbHkgQ3VzdG9tIENTUyB7e2l9fXx8e3tjc3N9fScsCiAgICB9LAogICAgdXNlckNzc0RldGFpbDogewogICAgICBjbjogJ+mUmeivr+mFjee9rueahOiHquWumuS5ieagt+W8j+WPr+iDveWvvOiHtOaCqOeahOe9kemhteaYvuekuuS4jeato+W4uO+8jOS9v+eUqOadpea6kOS4jeaYjueahCBDU1Mg5Luj56CB5Y+v6IO95Y2x5a6z5oKo55qE6ZqQ56eB5a6J5YWo44CC5bu66K6u5oKo5LuF5re75Yqg5oKo5L+h5Lu755qEIENTUyDmoLflvI/jgILlpoLmnpzmgqjkvb/nlKjnmoTmoLflvI/lr7zoh7Torr7nva7nqpflj6Pml6Dms5XmraPluLjmmL7npLrvvIwnICsgKGVudi5uYW1lID09PSAnV2ViRXh0ZW5zaW9uJyA/ICfmgqjlj6/ku6XlnKjmoIfnrb7pobXkuIrlj7PplK7mib7liLDnpoHnlKjlip/og70nIDogJ+aCqOWPr+S7peWcqOKAnOeMtOWtkOKAneaJqeWxleeahOiPnOWNleS4reaJvuWIsOemgeeUqOWKn+iDvScpICsgJ+OAgicsCiAgICAgIHR3OiAn6Yyv6Kqk6Kit5a6a55qE6Ieq6KiC5byP5qij5Y+v5bCO6Ie05oKo55qE57ay6aCB5LiN6IO95q2j5bi46aGv56S677yM5L2/55So5L6G5rqQ5LiN5piO55qEIENTUyDnqIvlvI/norzlj6/og73lqIHohIXmgqjnmoTpmrHnp4HlronlhajjgILlu7rorbDmgqjlg4Xmt7vliqDmgqjkv6Hku7vnmoQgQ1NTIOW8j+aoo+OAguWmguaenOaCqOS9v+eUqOeahOW8j+aoo+WwjuiHtOioreWumuaWueahhueEoeazleato+W4uOmhr+ekuu+8jCcgKyAoZW52Lm5hbWUgPT09ICdXZWJFeHRlbnNpb24nID8gJ+aCqOWPr+S7peWcqOe0ouW8leaomeexpOS4iuaMieWPs+mNteaJvuWIsOWBnOeUqOWKn+iDvScgOiAn5oKo5Y+v5Lul5Zyo44CM54y05a2Q44CN5pO05bGV55qE5Yqf6IO95YiX5Lit5om+5Yiw5YGc55So5Yqf6IO9JykgKyAn44CCJywKICAgICAgZW46ICdNaXNjb25maWd1cmVkIGN1c3RvbSBDU1MgbWF5IG1ha2UgeW91ciB3ZWIgcGFnZSBiZWluZyByZW5kZXJlZCBpbmNvcnJlY3RseS4gVXNpbmcgQ1NTIGZyb20gdW50cnVzdGVkIHNvdXJjZSBtYXkgaGFybSB5b3VyIHByaXZhY3kuIE1ha2Ugc3VyZSBvbmx5IGFkZGluZyBDU1MgZnJvbSB5b3UgdHJ1c3RlZCBzb3VyY2UuIEluIGNhc2UgY3VzdG9tIENTUyBicmVha3MgdGhpcyBzZXR0aW5nIGRpYWxvZywgJyArIChlbnYubmFtZSA9PT0gJ1dlYkV4dGVuc2lvbicgPyAneW91IG1heSBkaXNhYmxlIGl0IGZyb20gY29udGV4dCBtZW51IG9mIGJyb3dzZXIgdGFiJyA6ICd5b3UgbWF5IGRpc2FibGUgaXQgZnJvbSB0aGUgbWVudSBpdGVtIGluICJtb25rZXkiIGV4dGVuc2lvbicpICsgJy4nLAogICAgfSwKICAgIGRpc2FibGVVc2VyQ3NzOiB7CiAgICAgIGNuOiAn56aB55So6Ieq5a6a5LmJIENTUyDmoLflvI8nLAogICAgICB0dzogJ+WBnOeUqOiHquiogiBDU1Mg5byP5qijJywKICAgICAgZW46ICdEaXNhYmxlIEN1c3RvbSBDU1MnLAogICAgfSwKICAgIGRpc2FibGVVc2VyQ3NzVGV4dDogewogICAgICBjbjogJ+W3suemgeeUqOiHquWumuS5iSBDU1Mg5qC35byP44CC5aaC5p6c5oKo6YWN572u55qE6Ieq5a6a5LmJIENTUyDmoLflvI/lr7zoh7TnlYzpnaLlh7rnjrDku7vkvZXpl67popjvvIzmgqjlj6/ku6XlnKjorr7nva7kuK3pgInmi6nlkK/nlKjlkI7vvIzliKDpmaTlr7zoh7Tpl67popjnmoTop4TliJnjgIInLAogICAgICB0dzogJ+W3suWBnOeUqOiHquiogiBDU1Mg5byP5qij44CC5aaC5p6c5oKo6Kit5a6a55qE6Ieq6KiCIENTUyDlvI/mqKPlsI7oh7Tku4vpnaLlh7rnj77ku7vkvZXllY/poYzvvIzmgqjlj6/ku6XlnKjpgJnlrprkuK3pgbjmk4fllZ/nlKjlvozvvIzliKrpmaTlsI7oh7TllY/poYznmoTopo/liYfjgIInLAogICAgICBlbjogJ0N1c3RvbSBDU1MgaGFkIGJlZW4gZGlzYWJsZWQuIEluIGNhc2UgYW55IGN1c3RvbSBDU1MgYnJlYWsgdGhlIHdlYnBhZ2UsIHlvdSBtYXkgZW5hYmxlIGFuZCB0aGVuIGVkaXQgaXQgaW4gdGhlIHNldHRpbmcgZGlhbG9nLicsCiAgICB9LAogIH0pOwoKICBpZiAoZW52LmNvbmZpZy5leHRlcm5hbE1lbnVTdXBwb3J0ZWQpIHsKICAgIHVzZXJDc3MuY3NzID0gcnVsZS5SdWxlKHsKICAgICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICAgIGlkOiAnY3VzdG9tX2NzcycsCiAgICAgIHZlcnNpb246IDEsCiAgICAgIHBhcmVudDogdXNlckNzcy51c2VyQ3NzLAogICAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi51c2VyQ3NzLAogICAgICBpbml0aWFsOiB0cnVlLAogICAgICByZWY6IHsKICAgICAgICBjc3M6IHsgdHlwZTogJ3RleHQnIH0sCiAgICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ3dhcm4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi51c2VyQ3NzRGV0YWlsIH0sCiAgICAgIH0sCiAgICAgIGFmdGVyUmVuZGVyKG5vZGUpIHsKICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IG5vZGUucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKTsKICAgICAgICBjb25zdCBsYWJlbCA9IHRleHRhcmVhLmNsb3Nlc3QoJ2xhYmVsJyk7CiAgICAgICAgaWYgKCF0aGlzLmlzRW5hYmxlZCgpKSBsYWJlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIHRoaXMuYWRkQ29uZmlnTGlzdGVuZXIoZW5hYmxlZCA9PiB7CiAgICAgICAgICBpZiAoZW5hYmxlZCkgewogICAgICAgICAgICBsYWJlbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgbGFiZWwuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnbmVhcmVzdCcgfSk7CiAgICAgICAgICAgIHRleHRhcmVhLmZvY3VzKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsYWJlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiBub2RlOwogICAgICB9LAogICAgICBhaW5pdCgpIHsKICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSB0aGlzLnJlZi5jc3MuZ2V0Q29uZmlnKCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiBhZGRTdHlsZSgpIHsKICAgICAgICAgIC8vIFRhbXBlcm1vbmtleSBCRVRBIOWkhOeQhiBzZXRUaW1lb3V0IDAg5Lya55yf55qEIDDvvIzkvJrljaHmrbvigKbigKYKICAgICAgICAgIC8vIOiZveeEtuaJqeWxleeJiOacrOS4jeWPl+W9seWTje+8jOS4jei/h+S4pOi+ueS7o+eggeaYr+WFseeUqOeahO+8jOaJgOS7pei/memHjOaUueS4gOS4i+S5n+S4jeS8muacieS7gOS5iOmXrumimAogICAgICAgICAgaWYgKCFkb2N1bWVudC5ib2R5KSBzZXRUaW1lb3V0KGFkZFN0eWxlLCAxNik7CiAgICAgICAgICBlbHNlIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgICAgIH0sIDApOwogICAgICAgIC8vIOaIkeS7rOa3u+WKoOS4gOS4quWPr+S7peemgeeUqOi/meS4quWKn+iDveeahOaWueW8j+S7pemYsuacieeUqOaIt+aKiuiuvue9ruWvueivneahhue7memakOiXj+S6huaIluiAheW8hOS5seS6huaUueS4jeWbnuWOuwogICAgICAgIGV4dGVybmFsTWVudS5hZGQoewogICAgICAgICAgdGl0bGU6IGkxOG4uZGlzYWJsZVVzZXJDc3MsCiAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4gewogICAgICAgICAgICB0aGlzLnNldENvbmZpZyhmYWxzZSk7CiAgICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gJyc7CiAgICAgICAgICAgIGF3YWl0IHVpLmFsZXJ0KHsKICAgICAgICAgICAgICBpZDogJ3lhd2YtZGlzYWJsZS11c2VyLWNzcycsCiAgICAgICAgICAgICAgaWNvbjogJ3N1Y2MnLAogICAgICAgICAgICAgIHRpdGxlOiBpMThuLmRpc2FibGVVc2VyQ3NzLAogICAgICAgICAgICAgIHRleHQ6IGkxOG4uZGlzYWJsZVVzZXJDc3NUZXh0LAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICB9LAogICAgfSk7CiAgfQoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZlZWRzL2ZlZWRzLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgaTE4bi5mZWVkc1RhYlRpdGxlID0gewogICAgY246ICflvq7ljZrlsZXnpLonLAogICAgZW46ICdGZWVkcycsCiAgfTsKCiAgY29uc3QgZmVlZHMgPSB5YXdmLnJ1bGVzLmZlZWRzID0ge307CiAgZmVlZHMuZmVlZHMgPSBydWxlLlRhYih7CiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkc1RhYlRpdGxlLAogICAgcGFnZW1lbnU6IHRydWUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmVlZHMvcmVuZGVyLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKCiAgY29uc3QgZmVlZHMgPSB5YXdmLnJ1bGVzLmZlZWRzOwogIGNvbnN0IGNsZWFuID0geWF3Zi5ydWxlcy5jbGVhbjsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgcmVuZGVyID0gZmVlZHMucmVuZGVyID0ge307CgogIGkxOG4uZmVlZFJlbmRlckdyb3VwVGl0bGUgPSB7IGNuOiAn5riy5p+TJyB9OwoKICByZW5kZXIucmVuZGVyID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGZlZWRzLmZlZWRzLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZFJlbmRlckdyb3VwVGl0bGUsCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgZmVlZFJlbmRlckZpeDogewogICAgICBjbjogJ+S/ruaUueW+ruWNmuaYvuekuumAu+i+keS7peWFgeiuuOebuOWFs+aUuemAoOWKn+iDvSB7e2l9fScsCiAgICB9LAogICAgZmVlZFJlbmRlckZpeERldGFpbDogewogICAgICBjbjogJ+WmguaenOWboOS4uuW+ruWNmueahOaUueeJiOWvvOiHtOivpeWKn+iDveaVhemanO+8jOivt+WBnOeUqOivpemAiemhueOAguWPquacieaJk+W8gOivpemAiemhueaJjeiDveS9v+eUqOWkp+mDqOWIhuWvueW+ruWNmueahOaUuemAoOWKn+iDveOAguaJk+W8gOWQjuS8muacieS4gOS6m+e7huiKguS4iueahOWPmOWMlu+8jOS9nOiAheetieWkhOS8muaYvuekuuS4uumTvuaOpe+8jOi9rOWPkeeahOWOn+W+ruWNmuS8muaYvuekuuadpea6kO+8jOW+ruWNmuS4i+eahOi9rOWPkeWIl+ihqOWPr+S7peeCueWHu+aXtumXtOi3s+i9rOWIsOivpeW+ruWNmuOAgicsCiAgICB9LAogIH0pOwoKICBjb25zdCByZW5kZXJNb2RpZnkgPSBmdW5jdGlvbiAocm9vdEtleSwgY29uZmlncykgewogICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgIGNvbnN0IHZ1ZVNldHVwID0geWF3Zi52dWVTZXR1cDsKCiAgICBjb25zdCB7IHNtYWxsSW1hZ2UsIG5ld1RhYiB9ID0gY29uZmlnczsKCiAgICBjb25zdCBhYnNvbHV0ZVVybCA9IGZ1bmN0aW9uICh1cmwpIHsKICAgICAgY29uc3QgYmFzZSA9IGxvY2F0aW9uLmhvc3QgPT09ICd3d3cud2VpYm8uY29tJyA/ICcvL3d3dy53ZWliby5jb20vJyA6ICcvL3dlaWJvLmNvbS8nOwogICAgICByZXR1cm4gbmV3IFVSTCh1cmwsIG5ldyBVUkwoYmFzZSwgbG9jYXRpb24uaHJlZikpLmhyZWY7CiAgICB9OwogICAgY29uc3Qgc2V0SHJlZiA9IGZ1bmN0aW9uICh2bm9kZSwgdXJsKSB7CiAgICAgIGlmICghdm5vZGUuZGF0YSkgdm5vZGUuZGF0YSA9IHt9OwogICAgICBpZiAoIXZub2RlLmRhdGEuYXR0cnMpIHZub2RlLmRhdGEuYXR0cnMgPSB7fTsKICAgICAgdm5vZGUuZGF0YS5hdHRycy5ocmVmID0gdXJsOwogICAgfTsKCiAgICBjb25zdCByZW1vdmVDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAodm5vZGUpIHsKICAgICAgaWYgKCF2bm9kZS5kYXRhIHx8ICF2bm9kZS5kYXRhLm9uKSByZXR1cm4gbnVsbDsKICAgICAgY29uc3Qgb25jbGljayA9IHZub2RlLmRhdGEub24uY2xpY2s7CiAgICAgIGRlbGV0ZSB2bm9kZS5kYXRhLm9uLmNsaWNrOwogICAgICByZXR1cm4gb25jbGljazsKICAgIH07CiAgICBjb25zdCBhZGRDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAodm5vZGUsIG9uY2xpY2spIHsKICAgICAgaWYgKCF2bm9kZS5kYXRhKSB2bm9kZS5kYXRhID0ge307CiAgICAgIGlmICghdm5vZGUuZGF0YS5vbikgdm5vZGUuZGF0YS5vbiA9IHt9OwogICAgICB2bm9kZS5kYXRhLm9uLmNsaWNrID0gb25jbGljazsKICAgIH07CiAgICBjb25zdCBtdXRlQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKHZub2RlKSB7CiAgICAgIGNvbnN0IG9uY2xpY2sgPSByZW1vdmVDbGlja0hhbmRsZXIodm5vZGUpOwogICAgICBpZiAoIW9uY2xpY2spIHJldHVybjsKICAgICAgYWRkQ2xpY2tIYW5kbGVyKHZub2RlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5zaGlmdEtleSB8fCBldmVudC5tZXRhS2V5IHx8IGV2ZW50LmFsdEtleSkgcmV0dXJuOwogICAgICAgIGlmIChldmVudC5idXR0b25zICE9PSAxKSByZXR1cm47CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICBvbmNsaWNrKGV2ZW50KTsKICAgICAgfSk7CiAgICB9OwogICAgY29uc3QgY29uZmlnQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKHZub2RlLCBsaW5rLCBuZXdUYWIpIHsKICAgICAgaWYgKG5ld1RhYikgewogICAgICAgIHJlbW92ZUNsaWNrSGFuZGxlcih2bm9kZSk7CiAgICAgICAgaWYgKCFsaW5rLmRhdGEpIGxpbmsuZGF0YSA9IHt9OwogICAgICAgIGlmICghbGluay5kYXRhLmF0dHJzKSBsaW5rLmRhdGEuYXR0cnMgPSB7fTsKICAgICAgICBsaW5rLmRhdGEuYXR0cnMudGFyZ2V0ID0gJ19ibGFuayc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbXV0ZUNsaWNrSGFuZGxlcih2bm9kZSk7CiAgICAgIH0KICAgIH07CgogICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybjsKICAgICAgY29uc3QgbGluayA9IHRhcmdldC5jbG9zZXN0KCcueWF3Zi1mZWVkLWRldGFpbC1jb250ZW50LWhhbmRsZXIgYVtocmVmXScpOwogICAgICBpZiAoIWxpbmspIHJldHVybjsKICAgICAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuc2hpZnRLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5hbHRLZXkpIHsKICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgfQogICAgICBjb25zdCBpc1BpY3R1cmUgPSBsaW5rLmhhc0F0dHJpYnV0ZSgnZGF0YS1waWQnKTsKICAgICAgY29uc3QgaXNNZW50aW9uID0gbGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKS5zdGFydHNXaXRoKCcvbi8nKTsKICAgICAgaWYgKGlzUGljdHVyZSA/IG5ld1RhYi5waWN0dXJlIDogaXNNZW50aW9uID8gbmV3VGFiLm1lbnRpb24gOiBuZXdUYWIudG9waWMpIHsKICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgfQogICAgfSwgeyBjYXB0dXJlOiB0cnVlIH0pOwoKICAgIC8vIOe7meaPkOWIsOWSjOivnemimOeahOmTvuaOpeWKoOS4iuaWsOagh+etvumhteaJk+W8gOeahOagh+iusAogICAgY29uc3QgaGFuZGxlQ29udGVudFJlbmRlciA9IGZ1bmN0aW9uIChjb250ZW50KSB7CiAgICAgIGlmICghKChjb250ZW50LmRhdGEgfHwge30pLmRvbVByb3BzIHx8IHt9KS5pbm5lckhUTUwpIHJldHVybjsKICAgICAgY29uc3QgdGFnID0gJ3gtY29udGVudC1wYXJzZS13cmFwLXgnICsgKE1hdGgucmFuZG9tKCkgKyAnJykuc2xpY2UoMik7CiAgICAgIGNvbnN0IHdyYXAgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGA8JHt0YWd9PmAgKyBjb250ZW50LmRhdGEuZG9tUHJvcHMuaW5uZXJIVE1MLCAndGV4dC9odG1sJykucXVlcnlTZWxlY3Rvcih0YWcpOwogICAgICBbLi4ud3JhcC5xdWVyeVNlbGVjdG9yQWxsKCdhJyldLmZvckVhY2gobGluayA9PiB7CiAgICAgICAgaWYgKGxpbmsudGFyZ2V0ID09PSAnX2JsYW5rJykgcmV0dXJuOwogICAgICAgIGNvbnN0IGlzUGljdHVyZSA9IGxpbmsuaGFzQXR0cmlidXRlKCdkYXRhLXBpZCcpOwogICAgICAgIGNvbnN0IGlzTWVudGlvbiA9IGxpbmsuZ2V0QXR0cmlidXRlKCdocmVmJykuc3RhcnRzV2l0aCgnL24vJyk7CiAgICAgICAgaWYgKGlzUGljdHVyZSA/IG5ld1RhYi5waWN0dXJlIDogaXNNZW50aW9uID8gbmV3VGFiLm1lbnRpb24gOiBuZXdUYWIudG9waWMpIHsKICAgICAgICAgIGxpbmsudGFyZ2V0ID0gJ19ibGFuayc7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgT2JqZWN0LmFzc2lnbihjb250ZW50LmRhdGEuZG9tUHJvcHMsIHsgaW5uZXJIVE1MOiB3cmFwLmlubmVySFRNTCB9KTsKICAgIH07CgogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgnZmVlZC1oZWFkJywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgIGNvbnN0IHsgYWRkQ2xhc3MsIHNldEF0dHJpYnV0ZSB9ID0gTm9kZXM7CgogICAgICBhZGRDbGFzcyhub2RlU3RydWN0LCAneWF3Zi1mZWVkLWhlYWQnKTsKCiAgICAgIC8vIOeUqOaIt+WktOWDjwogICAgICBjb25zdCBhdmF0YXIgPSBub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3IoJ3gtd29vLWF2YXRhcicpLnBhcmVudE5vZGU7CiAgICAgIGlmIChhdmF0YXIpIGFkZENsYXNzKGF2YXRhciwgJ3lhd2YtZmVlZC1hdmF0YXInKTsKICAgICAgaWYgKG5ld1RhYi5hdXRob3IpIHsKICAgICAgICBpZiAoYXZhdGFyKSBzZXRBdHRyaWJ1dGUoYXZhdGFyLCAndGFyZ2V0JywgJ19ibGFuaycpOwogICAgICB9CiAgICAgIC8vIOeUqOaIt+aYteensAogICAgICBjb25zdCB1c2VyTGluayA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3Rvcignc3BhbicpLmNsb3Nlc3QoJ3gtYS1saW5rJyk7CiAgICAgIGlmICh1c2VyTGluaykgYWRkQ2xhc3ModXNlckxpbmssICd5YXdmLWZlZWQtYXV0aG9yJyk7CiAgICAgIGlmIChuZXdUYWIuYXV0aG9yKSBzZXRBdHRyaWJ1dGUodXNlckxpbmssICd0YXJnZXQnLCAnX2JsYW5rJyk7CiAgICAgIGNvbnN0IHVzZXJMaW5lID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yKCdzcGFuJykuY2xvc2VzdCgneC13b28tYm94Jyk7CiAgICAgIGlmICh1c2VyTGluZSkgewogICAgICAgIGFkZENsYXNzKHVzZXJMaW5lLCAneWF3Zi1mZWVkLWF1dGhvci1saW5lJyk7CiAgICAgICAgYWRkQ2xhc3ModXNlckxpbmUucGFyZW50Tm9kZSwgJ3lhd2YtZmVlZC1hdXRob3ItYm94Jyk7CiAgICAgIH0KICAgICAgLy8g5b+r6L2sCiAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuc2NyZWVuX25hbWVfc3VmZml4X25ldykgJiYgdGhpcy5zY3JlZW5fbmFtZV9zdWZmaXhfbmV3Lmxlbmd0aCkgewogICAgICAgIC8vIFRPRE8g5b6u5Y2a55uu5YmN5b+r6L2s55qE5L2c6ICF5ZCN5LiN5piv6ZO+5o6l77yM5Lyw6K6h5pivIGJ1Z++8jOWFiOetieetieWGjeeci+aAjuS5iOWkhOeQhgogICAgICB9CiAgICAgIC8vIOagh+iusOS4gOS4i+aXtumXtOWSjOadpea6kAogICAgICBjb25zdCBoZWFkSW5mbyA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcigneC1oZWFkLWluZm8nKTsKICAgICAgYWRkQ2xhc3MoaGVhZEluZm8sICd5YXdmLWZlZWQtaGVhZC1pbmZvJyk7CiAgICB9KTsKCiAgICB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRzUmVuZGVyQnlUYWdOYW1lKCdoZWFkLWluZm8nLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29uc3QgeyBoLCBpbnNlcnRCZWZvcmUsIHJlbW92ZUNoaWxkLCBhZGRDbGFzcywgcmVtb3ZlRXZlbnRMaXN0ZW5lciwgc2V0QXR0cmlidXRlIH0gPSBOb2RlczsKCiAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QsICd5YXdmLWhlYWQtaW5mbycpOwogICAgICAvLyDlvq7ljZror6bmg4UKICAgICAgLyoqIEB0eXBlIHtIVE1MQW5jaG9yRWxlbWVudH0gKi8KICAgICAgY29uc3QgbGluayA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcignYScpOwogICAgICBhZGRDbGFzcyhsaW5rLCAneWF3Zi1mZWVkLXRpbWUnKTsKICAgICAgaWYgKG5ld1RhYi5kZXRhaWwpIHsKICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKGxpbmssICdjbGljaycpOwogICAgICAgIHNldEF0dHJpYnV0ZShsaW5rLCAndGFyZ2V0JywgJ19ibGFuaycpOwogICAgICB9CgogICAgICBjb25zdCB0YWcgPSBsaW5rLnByZXZpb3VzU2libGluZzsKICAgICAgaWYgKHRhZykgYWRkQ2xhc3ModGFnLCAneWF3Zi1mZWVkLXRhZycpOwoKICAgICAgY29uc3Qgc291cmNlQm94ID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yKCd4LXdvby1ib3gtaXRlbSB4LXdvby1ib3gnKTsKICAgICAgY29uc3QgW3NvdXJjZSwgZWRpdGVkXSA9IHNvdXJjZUJveC5jaGlsZE5vZGVzOwoKICAgICAgLy8g5pu/5o2i5o6J5Y6f5pyJ55qE5p2l5rqQ77yM5L+d6K+B5p2l5rqQ5pys6Lqr5pyJ5Liq5qCH562+77yM5ZCO57ut55So5p2l5YGa5ouW5ou96L+H5ruk55SoCiAgICAgIGlmIChzb3VyY2UgJiYgc291cmNlLm5vZGVUeXBlICE9PSBOb2RlLkNPTU1FTlRfTk9ERSkgewogICAgICAgIGNvbnN0IG5ld1NvdXJjZVZOb2RlID0gaCgnZGl2JywgewogICAgICAgICAgY2xhc3M6IFt0aGlzLiRzdHlsZS5zb3VyY2UsICd5YXdmLWZlZWQtc291cmNlLWNvbnRhaW5lciddLAogICAgICAgIH0sIFsn5p2l6IeqICcsIGgoJ3NwYW4nLCB7CiAgICAgICAgICBjbGFzczogWyd5YXdmLWZlZWQtc291cmNlJ10sCiAgICAgICAgICBhdHRyczogeyBkcmFnZ2FibGU6ICd0cnVlJyB9LAogICAgICAgIH0sIFt0aGlzLnNvdXJjZSB8fCAn5b6u5Y2aIHdlaWJvLmNvbSddKV0pOwogICAgICAgIGluc2VydEJlZm9yZShzb3VyY2VCb3gsIG5ld1NvdXJjZVZOb2RlLCBzb3VyY2UpOwogICAgICAgIHJlbW92ZUNoaWxkKHNvdXJjZUJveCwgc291cmNlKTsKICAgICAgfQoKICAgICAgLy8g5bey57yW6L6RCiAgICAgIGlmIChlZGl0ZWQgJiYgZWRpdGVkLm5vZGVUeXBlICE9PSBOb2RlLkNPTU1FTlRfTk9ERSkgewogICAgICAgIGFkZENsYXNzKGVkaXRlZCwgJ3lhd2YtZmVlZC1lZGl0ZWQnKTsKICAgICAgfQogICAgfSk7CgogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgnZmVlZC1jb250ZW50JywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgIGNvbnN0IHsgdk5vZGUsIGFkZENsYXNzLCB3cmFwTm9kZSwgaCB9ID0gTm9kZXM7CgogICAgICAvLyDkvZzogIXnrYkKICAgICAgY29uc3QgaGVhZEluZm8gPSBub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3IoJ3gtaGVhZC1pbmZvJyk7CiAgICAgIGlmIChoZWFkSW5mbykgewogICAgICAgIGFkZENsYXNzKGhlYWRJbmZvLCAneWF3Zi1mZWVkLWhlYWQtaW5mbyB5YXdmLWZlZWQtaGVhZC1pbmZvLXJldHdlZXQnKTsKICAgICAgICBjb25zdCBoZWFkSW5mb1ZOb2RlID0gdk5vZGUoaGVhZEluZm8pOwogICAgICAgIGlmIChoZWFkSW5mb1ZOb2RlLmNvbXBvbmVudE9wdGlvbnMucHJvcHNEYXRhKSB7CiAgICAgICAgICBoZWFkSW5mb1ZOb2RlLmNvbXBvbmVudE9wdGlvbnMucHJvcHNEYXRhLnNvdXJjZSA9IHRoaXMuZGF0YS5zb3VyY2U7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyDlhoXlrrkKICAgICAgYWRkQ2xhc3Mobm9kZVN0cnVjdCwgJ3lhd2YtZmVlZC1jb250ZW50Jyk7CiAgICAgIGlmIChoZWFkSW5mbykgewogICAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QsICd5YXdmLWZlZWQtY29udGVudC1yZXR3ZWV0Jyk7CiAgICAgIH0KCiAgICAgIC8vIOaPkOekuuaoquW5hQogICAgICBjb25zdCB0aXAgPSBub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3IoJ3gtd29vLXRpcCcpOwogICAgICBpZiAodGlwKSB7CiAgICAgICAgYWRkQ2xhc3ModGlwLCAneWF3Zi1mZWVkLWNvbnRlbnQtdGlwJyk7CiAgICAgICAgaWYgKHRoaXMuZGF0YS5jb21wbGFpbnQgJiYgdGhpcy5kYXRhLmNvbXBsYWludC51cmwpIHsKICAgICAgICAgIGNvbnN0IGxpbmtWTm9kZSA9IGgoJ2EnLCB7CiAgICAgICAgICAgIGNsYXNzOiAneWF3Zi1mZWVkLWNvbnRlbnQtdGlwLWxpbmsgeWF3Zi1leHRyYS1saW5rJywKICAgICAgICAgICAgYXR0cnM6IHsgaHJlZjogYWJzb2x1dGVVcmwodGhpcy5kYXRhLmNvbXBsYWludC51cmwpIH0sCiAgICAgICAgICB9KTsKICAgICAgICAgIHdyYXBOb2RlKHRpcCwgbGlua1ZOb2RlKTsKICAgICAgICAgIGNvbmZpZ0NsaWNrSGFuZGxlcih2Tm9kZSh0aXApLCBsaW5rVk5vZGUsIHRydWUpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgnZmVlZC1kZXRhaWwnLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29uc3QgeyB2Tm9kZSwgYWRkQ2xhc3MgfSA9IE5vZGVzOwogICAgICBjb25zdCBbYXV0aG9yQm94LCBjb250ZW50XSA9IG5vZGVTdHJ1Y3QuY2hpbGROb2RlczsKCiAgICAgIC8vIOWOn+S9nOiAhQogICAgICBpZiAoYXV0aG9yQm94ICYmIGF1dGhvckJveC5ub2RlVHlwZSAhPT0gTm9kZS5DT01NRU5UX05PREUpIHsKICAgICAgICBjb25zdCBhdXRob3IgPSBhdXRob3JCb3gucXVlcnlTZWxlY3RvcigneC1hLWxpbmsnKTsKICAgICAgICBhZGRDbGFzcyhhdXRob3IsICd5YXdmLWZlZWQtb3JpZ2luYWwnKTsKICAgICAgfQoKICAgICAgLy8g5YaF5a65CiAgICAgIGlmIChjb250ZW50ICYmIGNvbnRlbnQubm9kZVR5cGUgIT09IE5vZGUuQ09NTUVOVF9OT0RFKSB7CiAgICAgICAgYWRkQ2xhc3MoY29udGVudCwgJ3lhd2YtZmVlZC1kZXRhaWwtY29udGVudCcpOwogICAgICAgIGlmICh0aGlzLnJlcG9zdCkgewogICAgICAgICAgYWRkQ2xhc3MoY29udGVudCwgJ3lhd2YtZmVlZC1kZXRhaWwtY29udGVudC1yZXR3ZWV0Jyk7CiAgICAgICAgfQogICAgICAgIGhhbmRsZUNvbnRlbnRSZW5kZXIodk5vZGUoY29udGVudCkpOwogICAgICAgIGFkZENsYXNzKGNvbnRlbnQsICd5YXdmLWZlZWQtZGV0YWlsLWNvbnRlbnQtaGFuZGxlcicpOwogICAgICB9CiAgICB9KTsKCiAgICB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRzUmVuZGVyQnlUYWdOYW1lKCdmZWVkLXBpY3R1cmUnLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29uc3QgeyBhZGRDbGFzcywgdk5vZGUgfSA9IE5vZGVzOwogICAgICAvLyDlvq7ljZrphY3lm74KICAgICAgYWRkQ2xhc3Mobm9kZVN0cnVjdCwgJ3lhd2YtZmVlZC1waWN0dXJlJyk7CiAgICAgIC8vIOavj+ihjOS4ieW8oOWbvuaIluWbm+W8oOWbvgogICAgICBpZiAodGhpcy5pbmxpbmVOdW0gPT09IDMpIHsKICAgICAgICBhZGRDbGFzcyhub2RlU3RydWN0LCAneWF3Zi1mZWVkLXBpY3R1cmUtY29sMycpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5saW5lTnVtID09PSA0KSB7CiAgICAgICAgYWRkQ2xhc3Mobm9kZVN0cnVjdCwgJ3lhd2YtZmVlZC1waWN0dXJlLWNvbDQnKTsKICAgICAgfQogICAgICAvLyDljZXlvKDlm77niYcKICAgICAgaWYgKHRoaXMuaXNTaW5nbGVQaWMpIHsKICAgICAgICBhZGRDbGFzcyhub2RlU3RydWN0LCAneWF3Zi1mZWVkLXBpY3R1cmUtc2luZ2xlJyk7CiAgICAgICAgLy8g57yp5bCP5Y2V5byg5Zu+54mH77yMVjUg54mI5Y2V5byg5Zu+54mH55qE5bC65a+45LiN6LaF6L+HIDEyMHgxMjAKICAgICAgICBpZiAoc21hbGxJbWFnZSkgewogICAgICAgICAgY29uc3Qgb3JpV2lkdGggPSB0aGlzLmlzUGF5ICYmIHRoaXMucGljc1swXSAmJiB0aGlzLnBpY3NbMF0ud2lkdGggPyB0aGlzLnBpY3NbMF0ud2lkdGggOiB0aGlzLnBpY3NbMF0uZ2VvICYmIHRoaXMucGljc1swXS5nZW8ud2lkdGg7CiAgICAgICAgICBjb25zdCBvcmlIZWlnaHQgPSB0aGlzLmlzUGF5ICYmIHRoaXMucGljc1swXSAmJiB0aGlzLnBpY3NbMF0uaGVpZ2h0ID8gdGhpcy5waWNzWzBdLmhlaWdodCA6IHRoaXMucGljc1swXS5nZW8gJiYgdGhpcy5waWNzWzBdLmdlby5oZWlnaHQ7CiAgICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGgubWluKDEyMCwgTWF0aC5tYXgoMTIwIC8gb3JpSGVpZ2h0ICogb3JpV2lkdGgsIDMwKSk7CiAgICAgICAgICBjb25zdCBoZWlnaHQgPSBNYXRoLm1pbigxMjAsIE1hdGgubWF4KDEyMCAvIG9yaVdpZHRoICogb3JpSGVpZ2h0LCAzMCkpOwogICAgICAgICAgY29uc3Qgc3R5bGUgPSB2Tm9kZShub2RlU3RydWN0LmZpcnN0Q2hpbGQpLmRhdGEuc3R5bGU7CiAgICAgICAgICBzdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JzsKICAgICAgICAgIHN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICAvLyDop4bpopEKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ2ZlZWQtdmlkZW8nLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29uc3QgeyBhZGRDbGFzcyB9ID0gTm9kZXM7CiAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QsICd5YXdmLWZlZWQtdmlkZW8nKTsKICAgIH0pOwoKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ2ZlZWQtY2FyZC1saW5rJywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgIGNvbnN0IHsgYWRkQ2xhc3MsIHNldEF0dHJpYnV0ZSB9ID0gTm9kZXM7CiAgICAgIC8vIOWFtuS7luWNoeeJhwogICAgICBhZGRDbGFzcyhub2RlU3RydWN0LCAneWF3Zi1mZWVkLWNhcmQtbGluaycpOwogICAgICBpZiAobmV3VGFiLmNhcmQpIHNldEF0dHJpYnV0ZShub2RlU3RydWN0LCAndGFyZ2V0JywgJ19ibGFuaycpOwogICAgICBjb25zdCBjYXJkID0gbm9kZVN0cnVjdC5maXJzdENoaWxkOwogICAgICBhZGRDbGFzcyhjYXJkLCAneWF3Zi1mZWVkLWNhcmQnKTsKICAgICAgY29uc3QgW3BpY3R1cmUsIGNvbnRlbnRdID0gY2FyZC5jaGlsZE5vZGVzOwogICAgICBhZGRDbGFzcyhwaWN0dXJlLCAneWF3Zi1mZWVkLWNhcmQtcGljdHVyZScpOwogICAgICBhZGRDbGFzcyhjb250ZW50LCAneWF3Zi1mZWVkLWNhcmQtY29udGVudCcpOwogICAgfSk7CgogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgnZmVlZC1hcnRpY2xlJywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgIGNvbnN0IHsgYWRkQ2xhc3MsIHNldEF0dHJpYnV0ZSB9ID0gTm9kZXM7CiAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QsICd5YXdmLWZlZWQtY2FyZC1hcnRpY2xlLWxpbmsnKTsKICAgICAgYWRkQ2xhc3Mobm9kZVN0cnVjdC5maXJzdENoaWxkLCAneWF3Zi1mZWVkLWNhcmQtYXJ0aWNsZScpOwogICAgICBpZiAobmV3VGFiLmNhcmQpIHNldEF0dHJpYnV0ZShub2RlU3RydWN0LCAndGFyZ2V0JywgJ19ibGFuaycpOwogICAgfSk7CgogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgnZmVlZC12b3RlJywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgIGNvbnN0IHsgYWRkQ2xhc3MgfSA9IE5vZGVzOwogICAgICBhZGRDbGFzcyhub2RlU3RydWN0LCAneWF3Zi1mZWVkLWNhcmQtdm90ZScpOwogICAgfSk7CgogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgnZmVlZC10b29sYmFyJywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgIGNvbnN0IHsgYWRkQ2xhc3MsIHZOb2RlLCByZW1vdmVDaGlsZCwgaW5zZXJ0QmVmb3JlIH0gPSBOb2RlczsKCiAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QsICd5YXdmLWZlZWQtdG9vbGJhcicpOwoKICAgICAgLy8g5pON5L2c5oyJ6ZKuCiAgICAgIGNvbnN0IGJ1dHRvbnMgPSBbLi4ubm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yQWxsKCd4LXdvby1ib3gtaXRlbScpXTsKICAgICAgaWYgKGJ1dHRvbnMubGVuZ3RoID09PSAzKSB7CiAgICAgICAgY29uc3QgW3JldHdlZXQsIGNvbW1lbnQsIGxpa2VdID0gYnV0dG9uczsKICAgICAgICBhZGRDbGFzcyhyZXR3ZWV0LCAneWF3Zi1mZWVkLXRvb2xiYXItcmV0d2VldCcpOwogICAgICAgIGFkZENsYXNzKGNvbW1lbnQsICd5YXdmLWZlZWQtdG9vbGJhci1jb21tZW50Jyk7CiAgICAgICAgYWRkQ2xhc3MobGlrZSwgJ3lhd2YtZmVlZC10b29sYmFyLWxpa2UnKTsKCiAgICAgICAgaWYgKGNvbmZpZ3MuaGlkZUZhc3RSZXBvc3QpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHBvcCA9IHJldHdlZXQucXVlcnlTZWxlY3RvcigneC13b28tcG9wJyk7CiAgICAgICAgICAgIGNvbnN0IHBvcFZOb2RlID0gdk5vZGUocG9wKTsKICAgICAgICAgICAgY29uc3QgcmV0d2VldEJ1dHRvblZOb2RlID0gcG9wVk5vZGUuZGF0YS5zY29wZWRTbG90cy5jdHJsKClbMF07CiAgICAgICAgICAgIGNvbnN0IG9yaVJldHdlZXRCdXR0b24gPSBwb3AucXVlcnlTZWxlY3RvcigneC13b28tcG9wLWl0ZW06bnRoLWNoaWxkKDIpJyk7CiAgICAgICAgICAgIHJldHdlZXRCdXR0b25WTm9kZS5kYXRhLm9uID0gdk5vZGUob3JpUmV0d2VldEJ1dHRvbikuZGF0YS5vbjsKICAgICAgICAgICAgcmV0d2VldEJ1dHRvblZOb2RlLmRhdGEubmF0aXZlT24gPSB2Tm9kZShvcmlSZXR3ZWV0QnV0dG9uKS5kYXRhLm5hdGl2ZU9uOwogICAgICAgICAgICBjb25zdCBjb250YWluID0gcG9wLnBhcmVudE5vZGU7CiAgICAgICAgICAgIGluc2VydEJlZm9yZShjb250YWluLnBhcmVudE5vZGUsIHJldHdlZXRCdXR0b25WTm9kZSwgY29udGFpbik7CiAgICAgICAgICAgIHJlbW92ZUNoaWxkKGNvbnRhaW4ucGFyZW50Tm9kZSwgY29udGFpbik7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIC8vIGlnbm9yZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAgY29uc3QgcmVwb3N0Q29tbWVudExpc3RSYW5kZXJUcmFuc2Zvcm0gPSBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29uc3QgeyBhZGRDbGFzcywgc2V0QXR0cmlidXRlIH0gPSBOb2RlczsKCiAgICAgIC8vIOafpeeci+WFqOmDqOivhOiuugogICAgICBjb25zdCBtb3JlID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yKCd4LXdvby1kaXZpZGVyICsgeC1hLWxpbmsnKTsKICAgICAgaWYgKG1vcmUpIHsKICAgICAgICBhZGRDbGFzcyhtb3JlLCAneWF3Zi1mZWVkLWNvbW1lbnQtbW9yZScpOwogICAgICAgIGlmIChuZXdUYWIuY29tbWVudHMpIHNldEF0dHJpYnV0ZShtb3JlLCAndGFyZ2V0JywgJ19ibGFuaycpOwogICAgICB9CiAgICB9OwogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgncmVwb3N0LWNvbW1lbnQtZmVlZCcsIHJlcG9zdENvbW1lbnRMaXN0UmFuZGVyVHJhbnNmb3JtKTsKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ3JlcG9zdC1jb21tZW50LWxpc3QnLCByZXBvc3RDb21tZW50TGlzdFJhbmRlclRyYW5zZm9ybSk7CgogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgncmVwbHktbW9kYWwnLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29uc3QgcmVwbHkgPSB0aGlzOwogICAgICBjb25zdCB7IHRyYW5zZm9ybVNsb3QgfSA9IE5vZGVzOwogICAgICB0cmFuc2Zvcm1TbG90KG5vZGVTdHJ1Y3QsICdjb250ZW50JywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QpIHsKICAgICAgICBjb21tZW50UmVuZGVyVHJhbnNmb3JtSGVscGVyKG5vZGVTdHJ1Y3QsIHJlcGx5LnJvb3RDb21tZW50LCBOb2Rlcyk7CiAgICAgIH0pOwogICAgfSk7CgogICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50c1JlbmRlckJ5VGFnTmFtZSgncmVwbHknLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29tbWVudFJlbmRlclRyYW5zZm9ybUhlbHBlcihub2RlU3RydWN0LCB0aGlzLml0ZW0sIE5vZGVzKTsKICAgIH0pOwoKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ21haW4tY29tcG9zZXInLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29uc3QgeyBoLCB3cmFwTm9kZSwgdk5vZGUgfSA9IE5vZGVzOwoKICAgICAgLy8g5Y+R5biW5aS05YOPCiAgICAgIGNvbnN0IGF2YXRhciA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcigneC13b28tYXZhdGFyJyk7CiAgICAgIGlmIChhdmF0YXIpIHsKICAgICAgICBjb25zdCBsaW5rVk5vZGUgPSBoKCdhJywgewogICAgICAgICAgY2xhc3M6ICd5YXdmLWZlZWQtY29tcG9zZXItYXZhdGFyIHlhd2YtZXh0cmEtbGluaycsCiAgICAgICAgICBhdHRyczogeyBocmVmOiBhYnNvbHV0ZVVybCh0aGlzLmNvbmZpZy51c2VyLnByb2ZpbGVfdXJsKSB9LAogICAgICAgIH0pOwogICAgICAgIHdyYXBOb2RlKGF2YXRhciwgbGlua1ZOb2RlKTsKICAgICAgICBjb25maWdDbGlja0hhbmRsZXIodk5vZGUoYXZhdGFyKSwgbGlua1ZOb2RlLCBuZXdUYWIuYXV0aG9yKTsKICAgICAgfQogICAgfSk7CgogICAgY29uc3QgY29tbWVudFJlbmRlclRyYW5zZm9ybUhlbHBlciA9IGZ1bmN0aW9uIChub2RlU3RydWN0LCBjb21tZW50LCBOb2RlcykgewogICAgICBjb25zdCB7IHZOb2RlLCBhZGRDbGFzcywgc2V0QXR0cmlidXRlIH0gPSBOb2RlczsKCiAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QsICd5YXdmLWZlZWQtY29tbWVudCcpOwoKICAgICAgY29uc3QgW2F2YXRhciwgYXV0aG9yLCAuLi5yZXBseUF1dGhvcnNdID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yQWxsKCd4LWEtbGluaycpOwogICAgICBpZiAoYXZhdGFyKSB7CiAgICAgICAgYWRkQ2xhc3MoYXZhdGFyLCAneWF3Zi1mZWVkLWNvbW1lbnQtYXZhdGFyJyk7CiAgICAgICAgaWYgKG5ld1RhYi5jb21tZW50cykgc2V0QXR0cmlidXRlKGF2YXRhciwgJ3RhcmdldCcsICdfYmxhbmsnKTsKICAgICAgfQogICAgICAvLyDor4TorrrkvZzogIUKICAgICAgaWYgKGF1dGhvcikgewogICAgICAgIGFkZENsYXNzKGF1dGhvciwgJ3lhd2YtZmVlZC1jb21tZW50LWF1dGhvcicpOwogICAgICAgIGlmIChuZXdUYWIuY29tbWVudHMpIHNldEF0dHJpYnV0ZShhdXRob3IsICd0YXJnZXQnLCAnX2JsYW5rJyk7CiAgICAgIH0KICAgICAgLy8g5LqM57qn6K+E6K665L2c6ICFCiAgICAgIGlmIChyZXBseUF1dGhvcnMgJiYgcmVwbHlBdXRob3JzLmxlbmd0aCkgewogICAgICAgIHJlcGx5QXV0aG9ycy5mb3JFYWNoKChhdXRob3IsIGluZGV4KSA9PiB7CiAgICAgICAgICBpZiAoIWNvbW1lbnQuY29tbWVudHMgfHwgIWNvbW1lbnQuY29tbWVudHNbaW5kZXhdKSByZXR1cm47CiAgICAgICAgICBhZGRDbGFzcyhhdXRob3IsICd5YXdmLWZlZWQtY29tbWVudC1hdXRob3InLCAneWF3Zi1mZWVkLWNvbW1lbnQtcmVwbHktYXV0aG9yJyk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIC8vIOivhOiuuueahOWGheWuuQogICAgICBjb25zdCBjb250ZW50TGlzdCA9IFsuLi5ub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NwYW4nKV07CiAgICAgIGNvbnRlbnRMaXN0LmZvckVhY2goY29udGVudCA9PiB7CiAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoKHZOb2RlKGNvbnRlbnQpLmRhdGEgfHwge30pLmRvbVByb3BzIHx8IHt9LCAnaW5uZXJIVE1MJykpIHJldHVybjsKICAgICAgICBhZGRDbGFzcyhjb250ZW50LCAneWF3Zi1mZWVkLWNvbW1lbnQtY29udGVudCcpOwogICAgICAgIGFkZENsYXNzKGNvbnRlbnQucGFyZW50Tm9kZSwgJ3lhd2YtZmVlZC1jb21tZW50LXRleHQnKTsKICAgICAgICBoYW5kbGVDb250ZW50UmVuZGVyKHZOb2RlKGNvbnRlbnQpKTsKICAgICAgICBhZGRDbGFzcyhjb250ZW50LCAneWF3Zi1mZWVkLWRldGFpbC1jb250ZW50LWhhbmRsZXInKTsKICAgICAgfSk7CgogICAgICAvLyDluKblm77or4TorroKICAgICAgY29uc3QgcGljdHVyZSA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcigneC13b28tcGljdHVyZScpOwogICAgICBpZiAocGljdHVyZSkgYWRkQ2xhc3MocGljdHVyZSwgJ3lhd2YtZmVlZC1jb21tZW50LXBpY3R1cmUnKTsKCiAgICAgIC8vIOafkOadoeivhOiuuuS4i+eahOaJgOacieivhOiuugogICAgICBjb25zdCBtb3JlSWNvbiA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcignYSA+IHgtd29vLWZvbnRpY29uJyk7CiAgICAgIGlmIChtb3JlSWNvbikgewogICAgICAgIGFkZENsYXNzKG1vcmVJY29uLnBhcmVudE5vZGUsICd5YXdmLWZlZWQtY29tbWVudC1tb3JlJyk7CiAgICAgIH0KCiAgICAgIC8vIOivhOiuuueahOaTjeS9nOaMiemSrgogICAgICBjb25zdCBpY29uTGlzdHMgPSBBcnJheS5mcm9tKG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvckFsbCgneC1pY29uLWxpc3QnKSk7CiAgICAgIGljb25MaXN0cy5mb3JFYWNoKGljb25MaXN0ID0+IHsKICAgICAgICBhZGRDbGFzcyhpY29uTGlzdCwgJ3lhd2YtZmVlZC1jb21tZW50LWljb24tbGlzdCcpOwogICAgICB9KTsKICAgIH07CiAgICB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRzUmVuZGVyQnlUYWdOYW1lKCdjb21tZW50JywgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgIGNvbW1lbnRSZW5kZXJUcmFuc2Zvcm1IZWxwZXIobm9kZVN0cnVjdCwgdGhpcy5pdGVtLCBOb2Rlcyk7CiAgICB9KTsKCiAgICB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRzUmVuZGVyQnlUYWdOYW1lKCdyZXBvc3QnLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgY29uc3QgeyBoLCB3cmFwTm9kZSwgdk5vZGUsIGFkZENsYXNzIH0gPSBOb2RlczsKCiAgICAgIGFkZENsYXNzKG5vZGVTdHJ1Y3QsICd5YXdmLWZlZWQtcmVwb3N0Jyk7CgogICAgICAvLyDovazlj5HkvZzogIUKICAgICAgY29uc3QgYXV0aG9yID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yKCdhJyk7CiAgICAgIGlmIChhdXRob3IpIHsKICAgICAgICBzZXRIcmVmKHZOb2RlKGF1dGhvciksIGFic29sdXRlVXJsKHRoaXMuaXRlbS51c2VyLnByb2ZpbGVfdXJsKSk7CiAgICAgICAgY29uZmlnQ2xpY2tIYW5kbGVyKHZOb2RlKGF1dGhvciksIHZOb2RlKGF1dGhvciksIG5ld1RhYi5hdXRob3IpOwogICAgICB9CgogICAgICAvLyDlpLTlg48KICAgICAgY29uc3QgYXZhdGFyID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yKCd4LXdvby1hdmF0YXInKTsKICAgICAgaWYgKGF2YXRhcikgewogICAgICAgIGNvbnN0IGxpbmtWTm9kZSA9IGgoJ2EnLCB7CiAgICAgICAgICBjbGFzczogJ3lhd2YtZmVlZC1jb21tZW50LWF2YXRhciB5YXdmLWV4dHJhLWxpbmsnLAogICAgICAgICAgYXR0cnM6IHsgaHJlZjogYWJzb2x1dGVVcmwodGhpcy5pdGVtLnVzZXIucHJvZmlsZV91cmwpIH0sCiAgICAgICAgfSk7CiAgICAgICAgd3JhcE5vZGUoYXZhdGFyLCBsaW5rVk5vZGUpOwogICAgICAgIGNvbmZpZ0NsaWNrSGFuZGxlcih2Tm9kZShhdmF0YXIpLCBsaW5rVk5vZGUsIG5ld1RhYi5hdXRob3IpOwogICAgICB9CgogICAgICAvLyDovazlj5HmraPmlocKICAgICAgY29uc3QgY29udGVudCA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3Rvcignc3BhbicpOwogICAgICBpZiAoY29udGVudCkgewogICAgICAgIGFkZENsYXNzKGNvbnRlbnQsICd5YXdmLWZlZWQtcmVwb3N0LWNvbnRlbnQnKTsKICAgICAgICBhZGRDbGFzcyhjb250ZW50LnBhcmVudE5vZGUsICd5YXdmLWZlZWQtcmVwb3N0LXRleHQnKTsKICAgICAgICBoYW5kbGVDb250ZW50UmVuZGVyKHZOb2RlKGNvbnRlbnQpKTsKICAgICAgICBhZGRDbGFzcyhjb250ZW50LCAneWF3Zi1mZWVkLWRldGFpbC1jb250ZW50LWhhbmRsZXInKTsKICAgICAgfQoKICAgICAgLy8g6L2s5Y+R5b6u5Y2a5Y6f5p2l54K55ZOq6YeM6YO95Y+v5Lul77yM5oiR5Lus6K6p5LuW5Y+q54K55pe26Ze0CiAgICAgIGNvbnN0IHNob3dSZXBvc3QgPSByZW1vdmVDbGlja0hhbmRsZXIodk5vZGUobm9kZVN0cnVjdCkpOwoKICAgICAgLy8g6L2s5Y+R5b6u5Y2a55qE5pe26Ze0CiAgICAgIGNvbnN0IHRpbWUgPSBjb250ZW50ICYmIGNvbnRlbnQucGFyZW50Tm9kZS5uZXh0U2libGluZy5xdWVyeVNlbGVjdG9yKCdkaXYnKTsKICAgICAgYWRkQ2xpY2tIYW5kbGVyKHZOb2RlKHRpbWUpLCBzaG93UmVwb3N0KTsKICAgICAgaWYgKHRpbWUpIHsKICAgICAgICBjb25zdCBsaW5rVk5vZGUgPSBoKCdhJywgewogICAgICAgICAgY2xhc3M6ICd5YXdmLWZlZWQtcmVwb3N0LXRpbWUgeWF3Zi1leHRyYS1saW5rJywKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIGhyZWY6IGFic29sdXRlVXJsKGAvJHt0aGlzLml0ZW0udXNlci5pZH0vJHt0aGlzLml0ZW0ubWJsb2dpZH1gKSwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgICAgd3JhcE5vZGUodGltZSwgbGlua1ZOb2RlKTsKICAgICAgICBjb25maWdDbGlja0hhbmRsZXIodk5vZGUodGltZSksIGxpbmtWTm9kZSwgbmV3VGFiLmRldGFpbCk7CiAgICAgIH0KICAgIH0pOwoKICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ2ljb24tbGlzdCcsIGZ1bmN0aW9uIChub2RlU3RydWN0LCBOb2RlcykgewogICAgICBjb25zdCB7IHNldEF0dHJpYnV0ZSB9ID0gTm9kZXM7CgogICAgICBjb25zdCBpY29uc05hbWUgPSB0aGlzLmljb25zTmFtZTsKICAgICAgY29uc3QgaWNvbnNOb2RlID0gQXJyYXkuZnJvbShub2RlU3RydWN0LmNoaWxkTm9kZXMpOwogICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaWNvbnNOYW1lKSkgcmV0dXJuOwogICAgICBpZiAoaWNvbnNOYW1lLmxlbmd0aCAhPT0gaWNvbnNOb2RlLmxlbmd0aCkgcmV0dXJuOwogICAgICBpY29uc05vZGUuZm9yRWFjaCgobm9kZSwgaW5kZXgpID0+IHsKICAgICAgICBzZXRBdHRyaWJ1dGUobm9kZSwgJ3lhd2YtaWNvbi1saXN0LW5hbWUnLCBpY29uc05hbWVbaW5kZXhdLm5hbWUpOwogICAgICB9KTsKICAgIH0pOwogIH07CgogIHJlbmRlci5mZWVkUmVuZGVyRml4ID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogNywKICAgIGlkOiAnZmVlZF9yZW5kZXInLAogICAgdmVyc2lvbjogNzcsCiAgICBwYXJlbnQ6IHJlbmRlci5yZW5kZXIsCiAgICBpbml0aWFsOiB0cnVlLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZFJlbmRlckZpeCwKICAgIHJlZjogewogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnd2FybicsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRSZW5kZXJGaXhEZXRhaWwgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgY29uZmlncyA9IHt9OwoKICAgICAgY29uZmlncy5zbWFsbEltYWdlID0gZmVlZHMubGF5b3V0LnNtYWxsSW1hZ2UuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbmZpZ3MubmV3VGFiID0gT2JqZWN0LmFzc2lnbiguLi4nYXV0aG9yLG1lbnRpb24sdG9waWMsZGV0YWlsLGNvbW1lbnRzLHBpY3R1cmUsY2FyZCcuc3BsaXQoJywnKS5tYXAoaWQgPT4gKHsKICAgICAgICBbaWRdOiBmZWVkcy5kZXRhaWxzLmZlZWRMaW5rTmV3VGFiLmdldENvbmZpZygpICYmIGZlZWRzLmRldGFpbHMuZmVlZExpbmtOZXdUYWIucmVmW2lkXS5nZXRDb25maWcoKSwKICAgICAgfSkpKTsKICAgICAgY29uZmlncy5oaWRlRmFzdFJlcG9zdCA9IGNsZWFuLmZlZWQuZmFzdF9yZXBvc3QuZ2V0Q29uZmlnKCk7CiAgICAgIHV0aWwuZGVidWcoJ3JlbmRlciBjb25maWc6ICVvJywgY29uZmlncyk7CgogICAgICB1dGlsLmluamVjdChyZW5kZXJNb2RpZnksIHV0aWwuaW5qZWN0LnJvb3RLZXksIGNvbmZpZ3MpOwoKICAgICAgY3NzLmFwcGVuZChgCi55YXdmLWV4dHJhLWxpbmssIC55YXdmLWV4dHJhLWJveCB7IGFsbDogaW5oZXJpdDsgZGlzcGxheTogY29udGVudHM7IH0KLnlhd2YtZmVlZC1zb3VyY2UgeyBjdXJzb3I6IGRlZmF1bHQ7IH0KLnlhd2YtZmVlZC1yZXBvc3QueWF3Zi1mZWVkLXJlcG9zdCB7IGN1cnNvcjogYXV0bzsgfQoueWF3Zi1mZWVkLXJlcG9zdC10aW1lIHsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogdmFyKC0tdy1zdWIpOyB9Ci55YXdmLWZlZWQtc291cmNlOmhvdmVyLCAueWF3Zi1mZWVkLXJlcG9zdC10aW1lOmhvdmVyIHsgY29sb3I6IHZhcigtLXctYnJhbmQpOyB9Ci55YXdmLWZlZWQtaGVhZC1pbmZvLXJldHdlZXQgeyBvdmVyZmxvdzogaGlkZGVuOyB9Ci55YXdmLWZlZWQtaGVhZC1pbmZvLXJldHdlZXQgfiAueWF3Zi1mZWVkLXRvb2xiYXIgeyBmbGV4LXNocmluazogMDsgfQpgKTsKCiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZlZWRzL2xheW91dC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwoKICBjb25zdCBmZWVkcyA9IHlhd2YucnVsZXMuZmVlZHM7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CgogIGNvbnN0IGxheW91dCA9IGZlZWRzLmxheW91dCA9IHt9OwoKICBpMThuLmZlZWRMYXlvdXRHcm91cFRpdGxlID0gewogICAgY246ICflvq7ljZrluIPlsYAnLAogICAgdHc6ICflvq7ljZrkvYjlsYAnLAogICAgZW46ICdGZWVkIExheW91dCcsCiAgfTsKCiAgbGF5b3V0LmxheW91dCA9IHJ1bGUuR3JvdXAoewogICAgcGFyZW50OiBmZWVkcy5mZWVkcywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRMYXlvdXRHcm91cFRpdGxlLAogIH0pOwoKICBpMThuLmZlZWRGb2xkU3BhY2UgPSB7CiAgICBjbjogJ+WOu+mZpOW+ruWNmuWNoeeJh+S5i+mXtOeahOepuumamScsCiAgICB0dzogJ+WOu+mZpOW+ruWNmuWNoeeJh+S5i+mWk+eahOepuumamScsCiAgICBlbjogJ1JlbW92ZSBnYXBzIGJldHdlZW4gZmVlZHMnLAogIH07CgogIGxheW91dC5mb2xkU3BhY2UgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmZWVkX25vX3NwYWNlJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGxheW91dC5sYXlvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkRm9sZFNwYWNlLAogICAgYWNzczogYAouV0JfZmVlZC5XQl9mZWVkIHsgYm9yZGVyLXJhZGl1czogM3B4OyBib3gtc2hhZG93OiAwIDAgMnB4IHJnYmEoMCwgMCwgMCwgMC4yKTsgfQouV0JfZmVlZC5XQl9mZWVkIC5XQl9jYXJkd3JhcCB7IGJvcmRlci1yYWRpdXM6IDA7IGJveC1zaGFkb3c6IG5vbmU7IGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMyk7IG1hcmdpbjogLTFweCAwIDFweDsgfQouV0JfZmVlZCAuV0JfZGV0YWlsIHsgbWFyZ2luLWJvdHRvbTogNDBweDsgfQouV0JfZmVlZCAuV0JfZmVlZF9oYW5kbGUgeyBoZWlnaHQ6IDIwcHg7IG1hcmdpbi10b3A6IC0yMHB4OyBkaXNwbGF5OiBibG9jazsgcG9zaXRpb246IHJlbGF0aXZlOyB9Ci5XQl9mZWVkIC5XQl9mZWVkX2V4cGFuZCB7IG1hcmdpbi10b3A6IDVweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9leHBhbmQgeyBtYXJnaW4tYm90dG9tOiAwOyB9Ci5XQl9mZWVkIC5XQl9mZWVkX2hhbmRsZSAuV0JfaGFuZGxlIHsgZmxvYXQ6IHJpZ2h0OyBtYXJnaW4tcmlnaHQ6IDEwcHg7IGhlaWdodDogMjBweDsgcGFkZGluZzogMDsgcG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IC0yMHB4OyB9Ci5XQl9mZWVkIC5XQl9mZWVkX2hhbmRsZSAuV0Jfcm93X2xpbmUgeyBib3JkZXI6IG5vbmU7IG92ZXJmbG93OiBoaWRkZW47IGxpbmUtaGVpZ2h0OiAyNnB4OyB9Ci5XQl9mZWVkIC5XQl9mZWVkX2hhbmRsZSAuV0Jfcm93X2xpbmU6OmFmdGVyIHsgY29udGVudDogIiAiOyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWxlZnQ6IC0xcHg7IGZsZXg6IDAgMCAwOyBvcmRlcjogMTA7IH0KLldCX2ZlZWQgLldCX2ZlZWRfaGFuZGxlIC5XQl9yb3dfbGluZSBsaSB7IHBhZGRpbmc6IDAgMTFweCAwIDEwcHg7IGhlaWdodDogYXV0bzsgbWFyZ2luLXJpZ2h0OiAtMXB4OyB9Ci5XQl9mZWVkIC5XQl9yb3dfbGluZSAubGluZSB7IGRpc3BsYXk6IGlubGluZTsgYm9yZGVyLXdpZHRoOiAwOyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KLldCX2ZlZWQgLldCX3Jvd19saW5lIC5saW5lOjpiZWZvcmUgeyBjb250ZW50OiAiICI7IGRpc3BsYXk6IGJsb2NrOyB3aWR0aDogMDsgaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IHJpZ2h0OiAtMTBweDsgdG9wOiAwOyBib3JkZXItcmlnaHQ6IDFweCBzb2xpZDsgYm9yZGVyLWNvbG9yOiBpbmhlcml0OyB9Ci5XQl9mZWVkIC5XQl9yb3dfbGluZSAubGluZSBzcGFuIC5XX2ZpY29uIHsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgfQouV0JfZmVlZF9oYW5kbGUgLldCX3Jvd19saW5lIC5hcnJvdyB7IGRpc3BsYXk6IG5vbmU7IH0KLldCX2ZlZWRfcmVwZWF0IHsgbWFyZ2luLXRvcDogLTEwcHg7IH0KLldCX2ZlZWRfY29tbWVudC5XQl9mZWVkX2NvbW1lbnQgLldCX2ZlZWRfZGV0YWlsIHsgcG9zaXRpb246IHJlbGF0aXZlOyBwYWRkaW5nLWJvdHRvbTogNHB4OyB9Ci5XQl9mZWVkX2NvbW1lbnQuV0JfZmVlZF9jb21tZW50IC5XQl9mZWVkX2RldGFpbDo6YWZ0ZXIgeyBkaXNwbGF5OiBub25lOyB9Ci5XQl9mZWVkX3YzIC5XQl9leHBhbmQgLldCX2VtcHR5IC5XQl9pbm5lcndyYXAsIC5XQl9mZWVkX2NvbW1lbnQgLldCX2V4cGFuZCB7IG1hcmdpbi1ib3R0b206IDA7IH0KYCwKICB9KTsKCiAgaTE4bi5zb3VyY2VBdEJvdHRvbSA9IHsKICAgIGNuOiAn5bCG5b6u5Y2a55qE5Y+R5biD5pe26Ze05ZKM5p2l5rqQ56e75Yqo5Yiw5b6u5Y2a5pyr5bC+JywKICAgIHR3OiAn5bCH5b6u5Y2a55qE55m85biD5pmC6ZaT5ZKM5L6G5rqQ56e75YuV5Yiw5b6u5Y2a5pyr5bC+JywKICAgIGVuOiAnTW92ZSB0aW1lc3RhbXAgYW5kIHNvdXJjZSBvZiBXZWlibyB0byBib3R0b20nLAogIH07CgogIGxheW91dC5zb3VyY2VBdEJvdHRvbSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZlZWRfc291cmNlX2F0X2JvdHRvbScsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBsYXlvdXQubGF5b3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc291cmNlQXRCb3R0b20sCiAgICBhaW5pdCgpIHsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc3QgZnJvbUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9kZXRhaWwgPiAuV0JfaW5mbyArIC5XQl9mcm9tJykpOwogICAgICAgIGlmICghZnJvbUxpc3QubGVuZ3RoKSByZXR1cm47CiAgICAgICAgZnJvbUxpc3QuZm9yRWFjaChmcm9tID0+IHsKICAgICAgICAgIGZyb20ucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChmcm9tKTsKICAgICAgICAgIGZyb20uY2xhc3NMaXN0LmFkZCgneWF3Zi1ib3R0b20tV0JfZnJvbScpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgY29uc3QgZm9sZFNwYWNlID0gbGF5b3V0LmZvbGRTcGFjZS5nZXRDb25maWcoKTsKICAgICAgaWYgKGZvbGRTcGFjZSkgewogICAgICAgIGNzcy5hcHBlbmQoYAouV0JfZnJvbS5XQl9mcm9tLnlhd2YtYm90dG9tLVdCX2Zyb20geyBwb3NpdGlvbjogYWJzb2x1dGU7IGJvdHRvbTogNDBweDsgbWFyZ2luOiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLCAxMDAlKTsgbGluZS1oZWlnaHQ6IDI4cHg7IH0KYCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3NzLmFwcGVuZCgnLldCX2Zyb20uV0JfZnJvbS55YXdmLWJvdHRvbS1XQl9mcm9tIHsgbWFyZ2luOiAxMHB4IDAgN3B4OyB9Jyk7CiAgICAgIH0KICAgICAgY3NzLmFwcGVuZCgnLldCX2ZlZWQuV0JfZmVlZCAuV0JfZXhwYW5kX21lZGlhX2JveCB7IG1hcmdpbi1ib3R0b206IDEwcHg7IH0nKTsKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgbm93cmFwQWZ0ZXJBdXRob3I6IHsKICAgICAgY246ICflvq7ljZrkvZzogIXkuI7lhoXlrrnpl7TkuI3mi4booYwge3tpfX0nLAogICAgICB0dzogJ+W+ruWNmuS9nOiAheiIh+WFp+WuuemWk+S4jeaLhuihjCB7e2l9fScsCiAgICAgIGVuOiAnTm8gbGluZSBicmVha3MgYmV0d2VlbiBhdXRob3IgYW5kIGNvbnRlbnQge3tpfX0nLAogICAgfSwKICAgIG5vd3JhcEFmdGVyQXV0aG9yRGV0YWlsOiB7CiAgICAgIGNuOiAn5aaC5p6c5oKo5ZCv55So5pys5Yqf6IO95pe25pyq6YCJ5oup4oCcW1tmZWVkX3NvdXJjZV9hdF9ib3R0b21dXeKAne+8jOW+ruWNmueahOadpea6kOWwhuS8muiiq+makOiXj+OAgicsCiAgICB9LAogIH0pOwoKICBsYXlvdXQubm93cmFwQWZ0ZXJBdXRob3IgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmZWVkX2F1dGhvcl9jb250ZW50X25vd3JhcCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBsYXlvdXQubGF5b3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ubm93cmFwQWZ0ZXJBdXRob3IsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ3dhcm4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5ub3dyYXBBZnRlckF1dGhvckRldGFpbCB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICBjc3MuYXBwZW5kKGAKLldCX2luZm8sIC5XQl90ZXh0IHsgZGlzcGxheTogaW5saW5lOyB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7IH0KLldCX2luZm86OmFmdGVyIHsgY29udGVudDogIu+8miI7IH0KLldCX3RleHQ6OmJlZm9yZSB7IGNvbnRlbnQ6ICIgIjsgZGlzcGxheTogYmxvY2s7IGZsb2F0OiByaWdodDsgd2lkdGg6IDE0cHg7IGhlaWdodDogMXB4OyB9Ci5XQl9leHBhbmQgLldCX3RleHQ6OmJlZm9yZSB7IHdpZHRoOiAwOyB9Clt5YXdmLWhpZGUtYm94XSAuV0JfdGV4dDo6YmVmb3JlIHsgd2lkdGg6IDM3cHg7IH0KW3lhd2YtaGlkZS1ib3hdIC5XQl9leHBhbmQgLldCX3RleHQ6OmJlZm9yZSB7IHdpZHRoOiAxNHB4OyB9CgouV0JfaW5mbyArIC5XQl9mcm9tIHsgZGlzcGxheTogbm9uZTsgfQpib2R5IC5XQl9mZWVkX3YzIC5XQl9mYWNlIC5vcHQub3B0IHsgbWFyZ2luOiAxMHB4IDAgMCAwOyBwb3NpdGlvbjogc3RhdGljOyByaWdodDogYXV0bzsgdG9wOiBhdXRvOyB9CmJvZHkgLldCX2ZlZWRfdjMgLldCX2ZhY2UgLm9wdC5vcHQgLldfYnRuX2IgeyB3aWR0aDogNDhweDsgfQoKLldCX2ZhY2UgeyBsaW5lLWhlaWdodDogMDsgfQouV0JfZGV0YWlsIHsgbWluLWhlaWdodDogNTBweDsgfQoKW2lkXj0iUGxfQ29yZV9XZW5kYUxpc3RfXyJdIC5XQl90ZXh0OjpiZWZvcmUgeyB3aWR0aDogNjhweDsgfQoKLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZXhwYW5kX21lZGlhX2JveCB7IG1hcmdpbi10b3A6IDEwcHg7IH0KCi5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2luZm8gLnNwX2t6LCAKLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfaW5mbyAuV19hdXRvY3V0IHsgdmVydGljYWwtYWxpZ246IHRvcDsgfQpgKTsKICAgIH0sCiAgfSk7CgogIGkxOG4uc21hbGxJbWFnZSA9IHsKICAgIGNuOiAn57yp5bCP57yp55Wl5Zu+5bC65a+4IHt7aX19fHx7e3JlcG9zdH1957yp5bCP6L2s5Y+R5Y6f5paH5a695bqm77yI5LuF6ZmQVjbvvIknLAogICAgdHc6ICfnuK7lsI/nuK7nlaXlnJblsLrlr7gge3tpfX18fHt7cmVwb3N0fX3nuK7lsI/ovYnnmbzljp/mloflr6zluqbvvIjlg4XpmZBWNu+8iScsCiAgICBlbjogJ0RlY3JlYXNlIHRoZSBzaXplIG9mIGltYWdlIHt7aX19fHx7e3JlcG9zdH19IERlY3JlYXNlIHRoZSB3aWR0aCBvZiBvcmlnaW5hbCBmZWVkcyAoVjYgT25seSknLAogIH07CiAgaTE4bi5zbWFsbEltYWdlRGV0YWlsID0gewogICAgY246ICfnvKnlsI/lm77niYflsLrlr7jku4XlvbHlk43lm77niYflnKjmgqjnmoTnvZHpobXkuIrnmoTmmL7npLrmlYjmnpzvvIzkuI3og73pmY3kvY7nvZHnu5zmlbDmja7mtYHph4/nlKjph4/jgIInLAogIH07CgogIGxheW91dC5zbWFsbEltYWdlID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmZWVkX3NtYWxsX2ltYWdlJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGxheW91dC5sYXlvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zbWFsbEltYWdlLAogICAgcmVmOiB7CiAgICAgIHJlcG9zdDogeyB0eXBlOiAnYm9vbGVhbicgfSwKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ3dhcm4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zbWFsbEltYWdlRGV0YWlsIH0sCiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBjc3MuYXBwZW5kKGAKLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfYSB7IG1hcmdpbjogLTJweCAwIDAgNnB4OyB3aWR0aDogMjU4cHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfYV9tbiAuV0JfcGljIHsgd2lkdGg6IDgwcHg7IGhlaWdodDogODBweDsgfQouV0JfZmVlZC5XQl9mZWVkX3Y0IC5XQl9tZWRpYV9hX21uIC5XQl9waWMgeyB3aWR0aDogODBweCAhaW1wb3J0YW50OyBoZWlnaHQ6IDgwcHggIWltcG9ydGFudDsgfQouV0JfZmVlZC5XQl9mZWVkX3Y0IC5XQl9tZWRpYV9hX21uIC5XQl9waWMgaW1nIHsgdG9wOiA0MHB4ICFpbXBvcnRhbnQ7IGxlZnQ6IDQwcHggIWltcG9ydGFudDsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7IHBvc2l0aW9uOiByZWxhdGl2ZSAhaW1wb3J0YW50OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjQgLldCX21lZGlhX2FfbW4gLldCX3BpYyBpbWdbc3R5bGUqPSJsZWZ0OjAiXVtzdHlsZSo9IndpZHRoOjExMHB4Il0geyB3aWR0aDogMTAwJSAhaW1wb3J0YW50OyBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsgfQouV0JfZmVlZC5XQl9mZWVkX3Y0IC5XQl9tZWRpYV9hX21uIC5XQl9waWMgaW1nW3N0eWxlKj0idG9wOjAiXVtzdHlsZSo9ImhlaWdodDoxMTBweCJdIHsgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7IHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IH0KLldCX2ZlZWQuV0JfZmVlZF92NCAuV0JfbWVkaWFfYV9tbiAuV0JfcGljIGltZ1tzdHlsZSo9InRvcDowIl0geyB0b3A6IDAgIWltcG9ydGFudDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpICFpbXBvcnRhbnQ7IH0KLldCX2ZlZWQuV0JfZmVlZF92NCAuV0JfbWVkaWFfYV9tbiAuV0JfcGljIGltZ1tzdHlsZSo9ImxlZnQ6MCJdIHsgbGVmdDogMCAhaW1wb3J0YW50OyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSkgIWltcG9ydGFudDsgfQouV0JfZmVlZC5XQl9mZWVkX3Y0IC5XQl9tZWRpYV9hX21uIC5XQl9waWMgaW1nW3N0eWxlKj0idG9wOjAiXVtzdHlsZSo9ImxlZnQ6MCJdIHsgbGVmdDogMCAhaW1wb3J0YW50OyB0b3A6IDAgIWltcG9ydGFudDsgdHJhbnNmb3JtOiBub25lICFpbXBvcnRhbnQ7IH0KLldCX2ZlZWQuV0JfZmVlZF92NCAuV0JfbWVkaWFfYV9tbiAuV0JfcGljIGltZzpub3QoW3N0eWxlKj0idG9wIl0pIHsgbWF4LXdpZHRoOyAxMDAlOyBtYXgtaGVpZ2h0OiAxMDAlOyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX21lZGlhX2FfbTEgLldCX3BpYyB7IG1heC13aWR0aDogMTIwcHg7IG1heC1oZWlnaHQ6IDEyMHB4OyBtaW4td2lkdGg6IDM2cHg7IGhlaWdodDogYXV0byAhaW1wb3J0YW50OyB3aWR0aDogYXV0byAhaW1wb3J0YW50OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX21lZGlhX2FfbTEgLldCX3BpYyBpbWcgeyBtYXgtaGVpZ2h0OiAxMjBweDsgbWF4LXdpZHRoOiAxMjBweDsgd2lkdGg6IGF1dG8gIWltcG9ydGFudDsgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IHBvc2l0aW9uOiBzdGF0aWM7IC13ZWJraXQtdHJhbnNmb3JtOiBub25lOyB0cmFuc2Zvcm06IG5vbmU7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfYV9tMSAuV0JfdmlkZW86bm90KC55YXdmLVdCX3ZpZGVvKTpub3QoLldCX3ZpZGVvX2g1X3YyKSB7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA4MHB4OyBtaW4td2lkdGg6IDM2cHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfYV9tNCB7IHdpZHRoOiAxNzJweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3JlcGVhdCAuV0JfbWVkaWFfYV9tMSAuV0JfcGljOjpiZWZvcmUgeyBkaXNwbGF5OiBub25lOyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfcmVwZWF0IC5XQl9tZWRpYV9hX20xIC5XQl9waWMgaW1nIHsgbWF4LXdpZHRoOiAxMjBweDsgbWF4LWhlaWdodDogMTIwcHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjIHsgaGVpZ2h0OiAxMDBweDsgd2lkdGg6IDMxNnB4OyBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDEyNywxMjcsMTI3LDAuMyk7IGJveC1zaGFkb3c6IDAgMCAycHggcmdiYSgwLDAsMCwwLjE1KTsgYm9yZGVyLXJhZGl1czogMnB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlY19waWMgeyBoZWlnaHQ6IDEwMHB4OyB3aWR0aDogMTAwcHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjX2luZm8geyBoZWlnaHQ6IDg4cHg7IHdpZHRoOiAyMDJweDsgcGFkZGluZzogN3B4IDRweCA1cHggMTBweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfYSAuV0JfZmVlZF9zcGVjX3BpYyB7IHdpZHRoOiAxMDBweDsgaGVpZ2h0OiAxMDBweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfYSAuV0JfZmVlZF9zcGVjX2luZm8geyB3aWR0aDogMjAwcHg7IGhlaWdodDogODhweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfYjIgLldCX2ZlZWRfc3BlY19waWMsIC5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlY19iMiAuV0JfZmVlZF9zcGVjX3BpYyBpbWcsIC5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlY19jIC5XQl9mZWVkX3NwZWNfcGljLCAuV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfYyAuV0JfZmVlZF9zcGVjX3BpYyBpbWcgeyBoZWlnaHQ6IGF1dG87IG1pbi1oZWlnaHQ6IDEwMHB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlY19iIC5XQl9mZWVkX3NwZWNfcGljLCAuV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfYyAuV0JfZmVlZF9zcGVjX3BpYywgLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjMiAuV0JfZmVlZF9zcGVjX3BpYyB7IGhlaWdodDogMTAwcHg7IHdpZHRoOiAyNTBweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfYiwgLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjX2MsIC5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlYzIgeyB3aWR0aDogMjUwcHg7IGhlaWdodDogYXV0bzsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfaW5mbyB7IGZsb2F0OiByaWdodDsgaGVpZ2h0OiA4OHB4OyBwYWRkaW5nOiA3cHggNHB4IDVweCAxMHB4OyB3aWR0aDogMjAycHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjX2IgLldCX2ZlZWRfc3BlY19pbmZvLCAuV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mZWVkX3NwZWNfYyAuV0JfZmVlZF9zcGVjX2luZm8sIC5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlYzIgLldCX2ZlZWRfc3BlY19pbmZvIHsgZmxvYXQ6IG5vbmU7IGhlaWdodDogYXV0bzsgd2lkdGg6IGF1dG87IHBhZGRpbmc6IDEwcHggNXB4IDA7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjX2IgLldCX2ZlZWRfc3BlY19pbmZvIC5XQl9mZWVkX3NwZWNfY29udCAuV0JfZmVlZF9zcGVjX3RpdCwgLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjX2MgLldCX2ZlZWRfc3BlY19pbmZvIC5XQl9mZWVkX3NwZWNfY29udCAuV0JfZmVlZF9zcGVjX3RpdCwgLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjMiAuV0JfZmVlZF9zcGVjX2luZm8gLldCX2ZlZWRfc3BlY19jb250IC5XQl9mZWVkX3NwZWNfdGl0IHsgZm9udC1zaXplOiBpbmhlcml0OyBmb250LXdlaWdodDogNzAwOyBtYXJnaW46IDAgMCA2cHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZmVlZF9zcGVjX2luZm8gLldCX2ZlZWRfc3BlY19jb250IC5XQl9mZWVkX3NwZWNfYnJpZWZ0eHQgeyBsaW5lLWhlaWdodDogMTVweDsgaGVpZ2h0OiAzMHB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2ZlZWRfc3BlY191c2VyIC5XX2ZsIHsgd2lkdGg6IDI0MHB4OyB9CgouV0JfZmVlZCAueWF3Zi1XQl9waWNfbW9yZSB7IGxpbmUtaGVpZ2h0OiA4MHB4OyB9CgoubGF5ZXJfZmVlZGltZ3Nob3cgLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfYSB7IG1hcmdpbjogMDsgd2lkdGg6IGF1dG87IH0KLmxheWVyX2ZlZWRpbWdzaG93IC5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX21lZGlhX2FfbTEgLldCX3BpYyB7IG1heC13aWR0aDogbm9uZTsgbWF4LWhlaWdodDogbm9uZTsgbWluLXdpZHRoOiBhdXRvOyB9Ci5sYXllcl9mZWVkaW1nc2hvdyAuV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV9hX20xIC5XQl9waWMgaW1nIHsgbWF4LXdpZHRoOiAyNjBweDsgbWF4LXdpZHRoOiA0MHZ3OyBtYXgtaGVpZ2h0OiAyNjBweDsgbWF4LWhlaWdodDogNDB2aDsgbWluLXdpZHRoOiBhdXRvOyB9CgouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV9hX20xIC5XQl92aWRlby5XQl92aWRlb19oNSB7IHdpZHRoOiBhdXRvOyBoZWlnaHQ6IGF1dG87IGRpc3BsYXk6IHRhYmxlOyB9Ci5XQl9oNXZpZGVvLmh2LXMxLCAuV0JfaDV2aWRlby5odi1zMy0yLCAuV0JfaDV2aWRlby5odi1zMy01IHsgd2lkdGg6IDEyMHB4OyBoZWlnaHQ6IDgwcHg7IG1heC13aWR0aDogMTIwcHg7IG1heC1oZWlnaHQ6IDgwcHg7IG1pbi13aWR0aDogMzZweDsgfQouV0JfaDV2aWRlby5odi1zMSAuY29uLTExLCAuV0JfaDV2aWRlby5odi1zMy0yIC5jb24tMTEsIC5XQl9oNXZpZGVvLmh2LXMzLTUgLmNvbi0xMSB7IGRpc3BsYXk6IG5vbmU7IH0KLldCX2g1dmlkZW8uaHYtczEgdmlkZW8sIC5XQl9oNXZpZGVvLmh2LXMzLTIgdmlkZW8sIC5XQl9oNXZpZGVvLmh2LXMzLTUgdmlkZW8geyBtYXgtd2lkdGg6IDEwMCU7IG1heC1oZWlnaHQ6IDEwMCU7IH0KLldCX2g1dmlkZW8uaHYtczMuaHYtczMtMiAuY29uLTQsCi5XQl9oNXZpZGVvLmh2LXMzLmh2LXMzLTUgLmNvbi00IHsgb3BhY2l0eTogMTsgei1pbmRleDogMTsgfQouV0JfaDV2aWRlby5odi1zMy5odi1zMy0yOmhvdmVyIC5jb24tNiwKLldCX2g1dmlkZW8uaHYtczMuaHYtczMtNTpob3ZlciAuY29uLTYsCi5XQl9oNXZpZGVvLmh2LXMzLmh2LXMzLTUgLmNvbi0zIC5ib3gtMiBlbSwKLldCX2g1dmlkZW8gLmNvbi0zLmh2LXMzLTMgLmJveC0zIHsgb3BhY2l0eTogMDsgei1pbmRleDogMDsgfQouV0JfdmlkZW8gLndidi1lcnJvci1kaXNwbGF5IGg0IHsgYm90dG9tOiAwOyB9CgouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV9hX20xIC5XQl92aWRlbzpub3QoW3lhd2YtdmlkZW8tcGxheV0pIHsgd2lkdGg6IDEyMHB4OyBoZWlnaHQ6IDgwcHg7IG1pbi13aWR0aDogMzZweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV9hX20xIC5XQl92aWRlbzpub3QoW3lhd2YtdmlkZW8tcGxheV0pIC53YnYtY29udHJvbC1iYXIgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfYV9tMSAuaHRtbDUtdmlkZW86bm90KFt5YXdmLXZpZGVvLXBsYXldKSB7IG1heC13aWR0aDogMTIwcHg7IG1heC1oZWlnaHQ6IDgwcHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfYV9tMSAuaHRtbDUtdmlkZW86bm90KFt5YXdmLXZpZGVvLXBsYXldKSAuYm94LTMgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KCi5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX2NvbjEgLml0ZW0geyBmb250LXNpemU6IGluaGVyaXQ7IGxpbmUtaGVpZ2h0OiAxNHB4OyBtYXJnaW4tdG9wOiAtNXB4OyB0ZXh0LWFsaWduOiBsZWZ0OyB9Ci5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX2NvbjEgLml0ZW1fcnQgeyBmb250LXNpemU6IGluaGVyaXQ7IGxpbmUtaGVpZ2h0OiAyNHB4OyBoZWlnaHQ6IDI0cHg7IG1hcmdpbi10b3A6IC01cHg7IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMiAudm90ZV9waWMgeyB3aWR0aDogMTIwcHg7IGhlaWdodDogOTBweDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIHsgd2lkdGg6IDI0MnB4OyBtYXJnaW46IDA7IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMiB0YWJsZSB7IG1hcmdpbjogNXB4IDA7IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMiAudm90ZV9waWMgLmJnIHsgZm9udC1zaXplOiBpbmhlcml0OyB0ZXh0LXNoYWRvdzogMCAwIDJweCBibGFjazsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIC52b3RlX2J0biBhIHsgbWFyZ2luOiA1cHggMDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV90aXQgeyBmb250LXNpemU6IGluaGVyaXQ7IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfc2hhcmUgYSB7IGxpbmUtaGVpZ2h0OiAyNHB4OyBoZWlnaHQ6IDI0cHg7IG1hcmdpbi10b3A6IC01cHg7IH0KYCk7CiAgICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBzbWFsbFZpZGVvKCkgewogICAgICAgICAgW3sKICAgICAgICAgICAgdmlkZW9TZWxlY3RvcjogJy5XQl92aWRlb19oNV92MiAuV0JfaDV2aWRlb192Mjpub3QoW3lhd2Ytd2F0Y2gtcGF1c2VdKScsCiAgICAgICAgICAgIGNvbnRhaW5lclNlbGVjdG9yOiAnLldCX3ZpZGVvX2g1X3YyJywKICAgICAgICAgICAgaXNQbGF5aW5nOiB2aWRlbyA9PiB2aWRlby5jbGFzc0xpc3QuY29udGFpbnMoJ3didi1wbGF5aW5nJyksCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHZpZGVvU2VsZWN0b3I6ICcuaHRtbDUtdmlkZW8gLmh2LWljb246bm90KFt5YXdmLXdhdGNoLXBhdXNlXSknLAogICAgICAgICAgICBjb250YWluZXJTZWxlY3RvcjogJy5odG1sNS12aWRlbycsCiAgICAgICAgICAgIGlzUGxheWluZzogdmlkZW8gPT4gdmlkZW8uY2xhc3NMaXN0LmNvbnRhaW5zKCdodi1pY29uLXBhdXNlJyksCiAgICAgICAgICB9XS5mb3JFYWNoKGZ1bmN0aW9uICh7IHZpZGVvU2VsZWN0b3IsIGNvbnRhaW5lclNlbGVjdG9yLCBpc1BsYXlpbmcgfSkgewogICAgICAgICAgICBjb25zdCB2aWRlb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmlkZW9TZWxlY3RvcikpOwogICAgICAgICAgICB2aWRlb3MuZm9yRWFjaCh2aWRlbyA9PiB7CiAgICAgICAgICAgICAgdmlkZW8uc2V0QXR0cmlidXRlKCd5YXdmLXdhdGNoLXBhdXNlJywgJycpOwogICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHZpZGVvLmNsb3Nlc3QoY29udGFpbmVyU2VsZWN0b3IpOwogICAgICAgICAgICAgIGxldCB2aWRlb09ic2VydmVyOwogICAgICAgICAgICAgIGNvbnN0IHNldFBsYXlBdHRyaWJ1dGUgPSBmdW5jdGlvbiBzZXRQbGF5QXR0cmlidXRlKCkgewogICAgICAgICAgICAgICAgY29uc3QgcGxheWluZyA9IGlzUGxheWluZyh2aWRlbyk7CiAgICAgICAgICAgICAgICBpZiAocGxheWluZykgewogICAgICAgICAgICAgICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCd5YXdmLXZpZGVvLXBsYXknLCAnJyk7CiAgICAgICAgICAgICAgICAgIGlmICh2aWRlb09ic2VydmVyKSB2aWRlb09ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBpZiAoc2V0UGxheUF0dHJpYnV0ZSgpKSByZXR1cm47CiAgICAgICAgICAgICAgdmlkZW9PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHNldFBsYXlBdHRyaWJ1dGUpOwogICAgICAgICAgICAgIHZpZGVvT2JzZXJ2ZXIub2JzZXJ2ZSh2aWRlbywgeyBhdHRyaWJ1dGVzOiB0cnVlLCBhdHRyaWJ1dGVGaWx0ZXI6IFsnY2xhc3MnXSwgY2hpbGRMaXN0OiBmYWxzZSwgY2hhcmFjdGVyRGF0YTogZmFsc2UgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgcmVwb3N0ID0gdGhpcy5yZWYucmVwb3N0LmdldENvbmZpZygpOwogICAgICAgIGlmIChyZXBvc3QpIGNzcy5hcHBlbmQoYAouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9leHBhbmRfbWVkaWEgeyBtYXJnaW46IDJweCAwIDhweDsgcGFkZGluZzogMTJweCAxNnB4IDE2cHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZXhwYW5kIHsgbWFyZ2luOiAwIDAgMTBweDsgcGFkZGluZzogMTBweCAxNnB4IDEzcHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZXhwYW5kIC5XQl9mdW5jIHsgbWFyZ2luOiAwOyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2V4cGFuZF9tZWRpYV9ib3ggeyBtYXJnaW4tbGVmdDogMDsgbWFyZ2luLXJpZ2h0OiAwOyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2V4cGFuZCAuV0JfZXhwYW5kX21lZGlhIHsgcGFkZGluZzogMCAwIDVweDsgbWFyZ2luOiAwOyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX21lZGlhX3ZpZXcgeyBtYXJnaW46IDZweCBhdXRvIDA7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfdmlldywgLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfdmlldyAubWVkaWFfc2hvd19ib3ggbGkgeyB3aWR0aDogNDQwcHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfdmlldyAubWVkaWFfc2hvd19ib3ggdWwgeyBtYXJnaW4tbGVmdDogLTMycHg7IHBhZGRpbmctbGVmdDogMzJweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5hcnR3b3JrX2JveCB7IHdpZHRoOiA0NDBweDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9tZWRpYV92aWV3IC5tZWRpYV9zaG93X2JveCBpbWcgeyBtYXgtd2lkdGg6IDQ0MHB4OyBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsgfQouV0JfZmVlZC5XQl9mZWVkX3YzIC5sYXllcl92aWV3X21vcmVwaWMgLnZpZXdfcGljIHsgcGFkZGluZzogMCA0MHB4IDIwcHg7IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfbWVkaWFfdmlldyAucGljX2Nob29zZV9ib3ggLnN0YWdlX2JveCB7IHdpZHRoOiA0NDBweDsgfQpgKTsKICAgICAgICBjb25zdCBmZWVkV2lkdGggPSBsYXlvdXQuaW5jcmVhc2VGZWVkV2lkdGguaXNFbmFibGVkKCkgPyBsYXlvdXQuaW5jcmVhc2VGZWVkV2lkdGgucmVmLndpZHRoLmdldENvbmZpZygpIDogNjAwOwogICAgICAgIGlmIChmZWVkV2lkdGggPCA2NTAgJiYgcmVwb3N0KSBjc3MuYXBwZW5kKGAKLldCX2g1dmlkZW8geyBtYXJnaW4tbGVmdDogLTIycHg7IH0KLldCX2g1dmlkZW8uaHYtczEsIC5XQl9oNXZpZGVvLmh2LXMzLTIsIC5XQl9oNXZpZGVvLmh2LXMzLTUgeyBtYXJnaW4tbGVmdDogMDsgfQoueWF3Zi1XQl92aWRlb1t5YXdmLXZpZGVvLXBsYXldIHsgbWFyZ2luLWxlZnQ6IC0yMnB4OyB9CmApOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWNleW8oOWbvueJh+WwuuWvuOiuoeeul+WcqCByZW5kZXIg6YeMCiAgICAgICAgY3NzLmFwcGVuZChgCi55YXdmLWZlZWQtcGljdHVyZS1jb2wzID4gZGl2IHsgd2lkdGg6IDI1MnB4OyB9Ci55YXdmLWZlZWQtcGljdHVyZS1jb2w0ID4gZGl2IHsgd2lkdGg6IDMzMnB4OyB9Ci55YXdmLWZlZWQtdmlkZW8geyB0cmFuc2l0aW9uOiB3aWR0aCAwcyAwLjJzIGVhc2U7IH0KLnlhd2YtZmVlZC12aWRlby1pbmFjdGl2ZSB7IHdpZHRoOiAxNTBweDsgfQoueWF3Zi1mZWVkLWNhcmQgeyB3aWR0aDogMzE2cHg7IH0KLnlhd2YtZmVlZC1jYXJkLXBpY3R1cmUgeyB3aWR0aDogODBweCAhaW1wb3J0YW50OyBoZWlnaHQ6IDgwcHggIWltcG9ydGFudDsgfQoueWF3Zi1mZWVkLWNvbW1lbnQtcGljdHVyZSB7IG1heC13aWR0aDogODBweDsgfQoueWF3Zi1mZWVkLWNhcmQtYXJ0aWNsZSB7IG1heC13aWR0aDogMjQwcHg7IH0KYCk7CiAgICAgICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHJvb3RLZXkpIHsKICAgICAgICAgIGNvbnN0IHlhd2YgPSB3aW5kb3dbcm9vdEtleV07CiAgICAgICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICAgICAgLy8g5oiR5Lus6ZyA6KaB5LuW5LiN5aSN55So6KeG6aKR57uE5Lu2CiAgICAgICAgICB2dWVTZXR1cC50cmFuc2Zvcm1Db21wb25lbnRzUmVuZGVyQnlUYWdOYW1lKCdmZWVkLWNvbnRlbnQnLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgICAgICAgY29uc3QgdmlkZW8gPSBub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ3gtZmVlZC12aWRlbycpOwogICAgICAgICAgICBpZiAodmlkZW8gJiYgIXZpZGVvLmtleSkgdmlkZW8ua2V5ID0gdGhpcy5kYXRhLmlkOyAvLyDnlKggbWlkIOW+iOaWueS+vwogICAgICAgICAgfSk7CiAgICAgICAgICB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0oJ2ZlZWQtdmlkZW8nLCBmdW5jdGlvbiAodm0pIHsKICAgICAgICAgICAgLy8g6L+Z5Liq5Y+Y6YeP6KaB5a2Y5LiL5p2l77yM5LiN54S25YiwIGJlZm9yZURlc3Ryb3kg55qE5pe25YCZ5LuW54i55bCx5LiN5piv546w5Zyo6L+Z5Liq5LqGCiAgICAgICAgICAgIGNvbnN0IGZlZWQgPSB2bS4kcGFyZW50LmRhdGE7CiAgICAgICAgICAgIGlmICghdm0uaXNQbGF5aW5nICYmIGZlZWQuX3lhd2ZfVmlkZW9Ub3VjaGVkKSB7CiAgICAgICAgICAgICAgdm0uaXNQbGF5aW5nID0gdHJ1ZTsKICAgICAgICAgICAgICB2bS4kZm9yY2VVcGRhdGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2bS4kb24oJ2hvb2s6YmVmb3JlRGVzdHJveScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBmZWVkLl95YXdmX1ZpZGVvVG91Y2hlZCA9IHZtLmlzUGxheWluZzsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudFJlbmRlcih2bSwgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgICAgICAgICAgY29uc3QgeyBhZGRDbGFzcyB9ID0gTm9kZXM7CiAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQbGF5aW5nKSB7CiAgICAgICAgICAgICAgICBhZGRDbGFzcyhub2RlU3RydWN0LCAneWF3Zi1mZWVkLXZpZGVvLWFjdGl2ZWQnKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYWRkQ2xhc3Mobm9kZVN0cnVjdCwgJ3lhd2YtZmVlZC12aWRlby1pbmFjdGl2ZScpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgfSwgdXRpbC5pbmplY3Qucm9vdEtleSk7CiAgICAgIH0KICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgaW5jcmVhc2VGZWVkV2lkdGg6IHsKICAgICAgY246ICfliqDlrr3lvq7ljZrlrr3luqZ85Li6e3t3aWR0aH195YOP57SgJywKICAgICAgdHc6ICfliqDlr6zlvq7ljZrlr6zluqZ854K6e3t3aWR0aH195YOP57SgJywKICAgICAgZW46ICdJbmNyZWFzZSB3aWR0aCBvZiBmZWVkcyB8IHRvIHt7d2lkdGh9fXB4JywKICAgIH0sCiAgfSk7CgogIGxheW91dC5pbmNyZWFzZUZlZWRXaWR0aCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZlZWRfaW5jcmVhc2Vfd2lkdGgnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogbGF5b3V0LmxheW91dCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmluY3JlYXNlRmVlZFdpZHRoLAogICAgcmVmOiB7CiAgICAgIHdpZHRoOiB7CiAgICAgICAgdHlwZTogJ3JhbmdlJywKICAgICAgICBtaW46IDYwMCwKICAgICAgICBpbml0aWFsOiA3NTAsCiAgICAgICAgbWF4OiAxMjgwLAogICAgICAgIHN0ZXA6IDEwLAogICAgICB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5pc0VuYWJsZWQoKSA/IHRoaXMucmVmLndpZHRoLmdldENvbmZpZygpIDogNjAwOwogICAgICBjc3MuYXBwZW5kKGAKOnJvb3QgeyAtLXlhd2YtZmVlZC13aWR0aDogJHt3aWR0aH1weDsgLS15YXdmLWV4dHJhLXBhZGRpbmc6IDBweDsgfQouQl9pbmRleCwgLkJfZGlzY292ZXIsIC5CX21lc3NhZ2UgeyAtLXlhd2YtbGVmdC13aWR0aDogMTUwcHg7IC0teWF3Zi1yaWdodC13aWR0aDogMjUwcHg7IH0KLkJfcGFnZSB7IC0teWF3Zi1sZWZ0LXdpZHRoOiAwcHg7IC0teWF3Zi1yaWdodC13aWR0aDogMzIwcHg7IH0KLkJfaW5kZXhbeWF3Zi1tZXJnZS1sZWZ0XSwgLkJfbWVzc2FnZVt5YXdmLW1lcmdlLWxlZnRdIHsgLS15YXdmLWxlZnQtd2lkdGg6IDBweDsgLS15YXdmLWV4dHJhLXBhZGRpbmc6IDEwcHg7IH0KLkJfYXJ0aWNhbCB7IC0teWF3Zi1mZWVkLXdpZHRoOiAxMDAwcHg7IC0teWF3Zi1sZWZ0LXdpZHRoOiAwcHg7IC0teWF3Zi1yaWdodC13aWR0aDogMHB4OyB9CgpodG1sIC5CX2luZGV4IC5XQl9mcmFtZSwKaHRtbCAuQl9tZXNzYWdlIC5XQl9mcmFtZSwKaHRtbCAuQl9kaXNjb3ZlciAuV0JfZnJhbWUsCmh0bWwgLkJfcGFnZSAuV0JfZnJhbWUsCmh0bWwgLkJfcGFnZSAuV0JfZnJhbWVfYSB7CiAgd2lkdGg6IGNhbGModmFyKC0teWF3Zi1mZWVkLXdpZHRoKSArIGNhbGModmFyKC0teWF3Zi1sZWZ0LXdpZHRoKSArIHZhcigtLXlhd2YtcmlnaHQtd2lkdGgpKSkgIWltcG9ydGFudDsKfQpodG1sIC5CX2luZGV4IC5XQl9mcmFtZSAjcGxjX21haW4sCmh0bWwgLkJfbWVzc2FnZSAuV0JfZnJhbWUgI3BsY19tYWluLApodG1sIC5CX2Rpc2NvdmVyIC5XQl9mcmFtZSAjcGxjX21haW4sCmh0bWwgLkJfcGFnZSAuV0JfZnJhbWUgI3BsY19tYWluIHsKICB3aWR0aDogY2FsYyh2YXIoLS15YXdmLWZlZWQtd2lkdGgpICsgdmFyKC0teWF3Zi1yaWdodC13aWR0aCkpICFpbXBvcnRhbnQ7Cn0KaHRtbCAuQl9pbmRleCAuV0JfbWFpbl9jLApodG1sIC5CX21lc3NhZ2UgLldCX21haW5fYywKaHRtbCAuQl9wYWdlIC5XQl9mcmFtZV9jLApodG1sIC5CX2Rpc2NvdmVyIC5XQl9mcmFtZV9jIHsKICB3aWR0aDogdmFyKC0teWF3Zi1mZWVkLXdpZHRoKSAhaW1wb3J0YW50Owp9Cmh0bWwgLkJfcGFnZSAuV0JfZnJhbWVfYyB7CiAgbWFyZ2luLXJpZ2h0OiAwOwp9CgpodG1sIC5XQl9mcmFtZV9jIH4gLldCX2ZyYW1lX2IgewogIG1hcmdpbi1sZWZ0OiAyMHB4OwogIG1hcmdpbi1yaWdodDogMDsKfQoKQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTAwNnB4KSB7Ci5CX2luZGV4LCAuQl9tZXNzYWdlIHsgLS15YXdmLXJpZ2h0LXdpZHRoOiAxMHB4OyB9Cn0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogOTM5cHgpIHsKLkJfcGFnZSB7IC0teWF3Zi1yaWdodC13aWR0aDogMHB4OyB9Cn0KCmJvZHkgLldCX3RhYl9hIC50YWJfYm94IHsgZGlzcGxheTogZmxleDsgfQpib2R5IC5XQl90YWJfYSAudGFiX2JveCA+ICogeyBmbGV4OiAwIDAgYXV0bzsgfQpib2R5IC5XQl90YWJfYSAudGFiX2JveCA+IC5XX2ZyIHsgb3JkZXI6IDI7IH0KYm9keSAuV0JfdGFiX2EgLnRhYl9ib3g6OmFmdGVyIHsgb3JkZXI6IDE7IGZsZXg6IDEgMCAwOyBoZWlnaHQ6IGF1dG87IH0KYm9keSAuV0JfdGFiX2EgLnRhYl9ib3hfYSAuZnJfYm94IHsgZmxleDogMSAwIDA7IH0KYm9keSAuV0JfdGFiX2EgLnRhYl9ib3hfYTo6YWZ0ZXIgeyBjb250ZW50OiBub25lOyB9CmJvZHkgLldCX2ZlZWRfdjMgLldCX2ZhY2UgLm9wdCB7IHJpZ2h0OiBjYWxjKDEzMnB4IC0gdmFyKC0teWF3Zi1mZWVkLXdpZHRoKSk7IH0KYm9keSBhLldfZ290b3AuV19nb3RvcCB7IG1hcmdpbi1sZWZ0OiBjYWxjKGNhbGMoY2FsYyh2YXIoLS15YXdmLWZlZWQtd2lkdGgpICsgdmFyKC0teWF3Zi1leHRyYS1wYWRkaW5nKSkgKyBjYWxjKHZhcigtLXlhd2YtbGVmdC13aWR0aCkgKyB2YXIoLS15YXdmLXJpZ2h0LXdpZHRoKSkpIC8gMik7IH0KYm9keSAuV0JfdGltZWxpbmUgeyBtYXJnaW4tbGVmdDogY2FsYyhjYWxjKGNhbGMoMjBweCArIHZhcigtLXlhd2YtZmVlZC13aWR0aCkpICsgY2FsYyh2YXIoLS15YXdmLWxlZnQtd2lkdGgpICsgdmFyKC0teWF3Zi1yaWdodC13aWR0aCkpKSAvIDIpOyB9Cmh0bWwgLldCX2FydGljYWwgLldCX2ZlZWRfcmVwZWF0IC5XQl9mZWVkX3B1Ymxpc2gsIGh0bWwgLldCX2FydGljYWwgLldCX2ZlZWRfcmVwZWF0IC5yZXBlYXRfbGlzdCB7IHBhZGRpbmc6IDAgMjBweDsgfQpodG1sIC5XQl9hcnRpY2FsIC5XQl9mZWVkX3JlcGVhdCAuV190aXBzLCBodG1sIC5XQl9hcnRpY2FsIC5XQl9mZWVkX3JlcGVhdCAuV0JfbWluaXRhYiB7IG1hcmdpbjogMCAxNnB4IDEwcHg7IH0KYCk7CiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIHJlb3JkZXJGZWVkQnV0dG9uOiB7CiAgICAgIGNuOiAn6YeN5paw5o6S5YiX5b6u5Y2a5o6n5Yi25oyJ6ZKuIHt7aX19fHx7ezB9fXx7ezF9fXx7ezJ9fXx7ezN9fXx7ezR9fScsCiAgICAgIHR3OiAn6YeN5paw5o6S5YiX5b6u5Y2a5o6n5Yi25oyJ6YiVIHt7aX19fHx7ezB9fXx7ezF9fXx7ezJ9fXx7ezN9fXx7ezR9fScsCiAgICAgIGVuOiAnUmVvcmRlciBidXR0b25zIG9mIGZlZWRzIHt7aX19fHx7ezB9fXx7ezF9fXx7ezJ9fXx7ezN9fXx7ezR9fScsCiAgICB9LAogICAgcmVvcmRlckZlZWRCdXR0b25EZXRhaWw6IHsKICAgICAgY246ICfmraTlpJbmgqjov5jlj6/ku6XlnKjniYjpnaLmuIXnkIbpgInpobnljaHvvIzmiJbmraTlpITvvIzli77pgInku6XpmpDol4/igJxbW2NsZWFuX2ZlZWRfcG9wXV3igJ3igJxbW2NsZWFuX2ZlZWRfZmF2b3JpdGVdXeKAneKAnFtbY2xlYW5fZmVlZF9mb3J3YXJkXV3igJ3igJxbW2NsZWFuX2ZlZWRfbGlrZV1d4oCd44CCJywKICAgIH0sCiAgICByZW9yZGVyRmVlZEJ1dHRvblBvcDogeyBjbjogJ+aOqOW5vycsIHR3OiAn5o6o5bujJywgZW46ICcgUHJvbW90ZScgfSwKICAgIHJlb3JkZXJGZWVkQnV0dG9uRmF2b3JpdGU6IHsgY246ICfmlLbol48nLCB0dzogJ+aUtuiXjycsIGVuOiAnRmF2b3VyaXRlJyB9LAogICAgcmVvcmRlckZlZWRCdXR0b25Gb3J3YXJkOiB7IGNuOiAn6L2s5Y+RJywgdHc6ICfovYnnmbwnLCBlbjogJ0ZvcndhcmQnIH0sCiAgICByZW9yZGVyRmVlZEJ1dHRvbkNvbW1lbnQ6IHsgY246ICfor4TorronLCB0dzogJ+ipleirlicsIGVuOiAnQ29tbWVudCcgfSwKICAgIHJlb3JkZXJGZWVkQnV0dG9uTGlrZTogeyBjbjogJ+i1nicsIHR3OiAn6K6aJywgZW46ICdMaWtlJyB9LAogIH0pOwoKICBjb25zdCByZW9yZGVyUmVmR3JvdXAgPSBzZWxlY3QgPT4gewogICAgY29uc3QgcmVmcyA9IFtdOwogICAgcmVmcy5zcGxpY2UoMCwgMCwgLi4uc2VsZWN0Lm1hcChidXR0b24gPT4gKHsKICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgIGluaXRpYWw6IGJ1dHRvbi52YWx1ZSwKICAgICAgc2VsZWN0LAogICAgICByZWZzLAogICAgfSkpKTsKICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCAuLi5yZWZzLm1hcCgocmVmLCBpbmRleCkgPT4gKHsgW2luZGV4XTogcmVmIH0pKSk7CiAgfTsKCiAgY29uc3Qga2VlcE9yZGVySXRlbXNEaWZmID0gaXRlbSA9PiB7CiAgICBpdGVtLmFkZENvbmZpZ0xpc3RlbmVyKChuZXdWYWx1ZSwgb2xkVmFsdWUpID0+IHsKICAgICAgb2xkVmFsdWUgPSBvbGRWYWx1ZSB8fCBpdGVtLmluaXRpYWw7CiAgICAgIGNvbnN0IHRoYXQgPSBpdGVtLnJlZnMuZmluZCh0aGF0ID0+IHRoYXQgIT09IGl0ZW0gJiYgdGhhdC5nZXRDb25maWcoKSA9PT0gbmV3VmFsdWUpOwogICAgICBpZiAodGhhdCkgdGhhdC5zZXRDb25maWcob2xkVmFsdWUpOwogICAgfSk7CiAgfTsKCiAgbGF5b3V0LnJlb3JkZXJGZWVkQnV0dG9uID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdmZWVkX2J1dHRvbl9vcmRlcicsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBsYXlvdXQubGF5b3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ucmVvcmRlckZlZWRCdXR0b24sCiAgICByZWY6IE9iamVjdC5hc3NpZ24oe30sIHJlb3JkZXJSZWZHcm91cChbCiAgICAgIHsgdmFsdWU6ICdwb3AnLCB0ZXh0OiAoKSA9PiBpMThuLnJlb3JkZXJGZWVkQnV0dG9uUG9wIH0sCiAgICAgIHsgdmFsdWU6ICdmYXZvcml0ZScsIHRleHQ6ICgpID0+IGkxOG4ucmVvcmRlckZlZWRCdXR0b25GYXZvcml0ZSB9LAogICAgICB7IHZhbHVlOiAnZm9yd2FyZCcsIHRleHQ6ICgpID0+IGkxOG4ucmVvcmRlckZlZWRCdXR0b25Gb3J3YXJkIH0sCiAgICAgIHsgdmFsdWU6ICdjb21tZW50JywgdGV4dDogKCkgPT4gaTE4bi5yZW9yZGVyRmVlZEJ1dHRvbkNvbW1lbnQgfSwKICAgICAgeyB2YWx1ZTogJ2xpa2UnLCB0ZXh0OiAoKSA9PiBpMThuLnJlb3JkZXJGZWVkQnV0dG9uTGlrZSB9LAogICAgXSksIHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLnJlb3JkZXJGZWVkQnV0dG9uRGV0YWlsIH0sCiAgICB9KSwKICAgIGluaXQoKSB7CiAgICAgIFswLCAxLCAyLCAzLCA0XS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAga2VlcE9yZGVySXRlbXNEaWZmKHRoaXMucmVmW2tleV0pOwogICAgICB9KTsKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGNzcy5hcHBlbmQoYAouV0JfZmVlZC5XQl9mZWVkX3YzIC5XQl9mdW5jIC5XQl9oYW5kbGUgbGk6bGFzdC1jaGlsZCAubGluZSB7IGJvcmRlci1yaWdodC13aWR0aDogMXB4OyB9Ci5XQl9mZWVkLldCX2ZlZWRfdjMgLldCX2Z1bmMgLldCX2hhbmRsZSB1bCB7IG92ZXJmbG93OiBoaWRkZW47IH0KLldCX2ZlZWQuV0JfZmVlZF92MyAuV0JfZnVuYyAuV0JfaGFuZGxlIHVsOjphZnRlciB7ICBjb250ZW50OiAiICI7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tbGVmdDogLTFweDsgZmxleDogMCAwIDA7IG9yZGVyOiAxMDsgfQouV0JfaGFuZGxlIHVsIGxpW3lhd2YtaGFuZGxlLXR5cGU9ImZsX3JlYWQiXSB7IG9yZGVyOiAwOyB9CiR7WzAsIDEsIDIsIDMsIDRdLm1hcChpbmRleCA9PiBgCi5XQl9oYW5kbGUgdWwgbGlbeWF3Zi1oYW5kbGUtdHlwZT0iZmxfJHt0aGlzLnJlZltpbmRleF0uZ2V0Q29uZmlnKCl9Il0geyBvcmRlcjogJHtpbmRleCArIDF9OyB9CmApLmpvaW4oJycpfQpgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBbMCwgMSwgMiwgMywgNF0uZm9yRWFjaChpbmRleCA9PiB7CiAgICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLnJlZltpbmRleF0uZ2V0Q29uZmlnKCk7CiAgICAgICAgICBjb25zdCBzZWxlY3RvciA9IHsKICAgICAgICAgICAgcG9wOiAnJywKICAgICAgICAgICAgZmF2b3JpdGU6ICcnLAogICAgICAgICAgICBmb3J3YXJkOiAnLnlhd2YtZmVlZC10b29sYmFyLXJldHdlZXQnLAogICAgICAgICAgICBjb21tZW50OiAnLnlhd2YtZmVlZC10b29sYmFyLWNvbW1lbnQnLAogICAgICAgICAgICBsaWtlOiAnLnlhd2YtZmVlZC10b29sYmFyLWxpa2UnLAogICAgICAgICAgfVtjb25maWddOwogICAgICAgICAgaWYgKHNlbGVjdG9yKSBjc3MuYXBwZW5kKGAke3NlbGVjdG9yfSB7IG9yZGVyOiAke2luZGV4fSB9YCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgcmVvcmRlckNvbW1lbnRCdXR0b246IHsKICAgICAgY246ICfph43mlrDmjpLliJfor4TorrrmjqfliLbmjInpkq58fHt7MH19fHt7MX19fHt7Mn19fHt7M319fHt7NH19JywKICAgICAgdHc6ICfph43mlrDmjpLliJfoqZXoq5blvq7ljZrmjqfliLbmjInpiJV8fHt7MH19fHt7MX19fHt7Mn19fHt7M319fHt7NH19JywKICAgICAgZW46ICdSZW9yZGVyIGJ1dHRvbnMgb2YgY29tbWVudHN8fHt7MH19fHt7MX19fHt7Mn19fHt7M319fHt7NH19JywKICAgIH0sCiAgICByZW9yZGVyQ29tbWVudEJ1dHRvbkRldGFpbDogewogICAgICBjbjogJ+atpOWkluaCqOi/mOWPr+S7peWcqOeJiOmdoua4heeQhumAiemhueWNoe+8jOaIluatpOWkhO+8jOWLvumAieS7pemakOiXj+KAnFtbY2xlYW5fZmVlZF9saWtlX2NvbW1lbnRdXeKAneOAgicsCiAgICB9LAogICAgcmVvcmRlckNvbW1lbnRCdXR0b25SZXBvcnQ6IHsgY246ICfkuL7miqUnLCBoazogJ+iIieWgsScsIHR3OiAn5qqi6IiJJywgZW46ICdSZXBvcnQnIH0sCiAgICByZW9yZGVyQ29tbWVudEJ1dHRvbkRlbGV0ZTogeyBjbjogJ+WIoOmZpCcsIHR3OiAn5Yiq6ZmkJywgZW46ICdEZWxldGUnIH0sCiAgICByZW9yZGVyQ29tbWVudEJ1dHRvbkNvbnZlcnNpdGlvbjogeyBjbjogJ+afpeeci+WvueivnScsIHR3OiAn5p+l55yL5bCN6KmxJywgZW46ICdWaWV3IENvbnZlcnNhdGlvbicgfSwKICAgIHJlb3JkZXJDb21tZW50QnV0dG9uUmVwbHk6IHsgY246ICflm57lpI0nLCB0dzogJ+WbnuimhicsIGVuOiAnUmVwbHknIH0sCiAgICByZW9yZGVyQ29tbWVudEJ1dHRvbkxpa2U6IHsgY246ICfotZ4nLCB0dzogJ+iumicsIGVuOiAnTGlrZScgfSwKICB9KTsKCiAgbGF5b3V0LnJlb3JkZXJDb21tZW50QnV0dG9uID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmVlZF9idXR0b25fb3JkZXJfY29tbWVudCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBsYXlvdXQubGF5b3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4ucmVvcmRlckNvbW1lbnRCdXR0b24sCiAgICByZWY6IE9iamVjdC5hc3NpZ24oe30sIHJlb3JkZXJSZWZHcm91cChbCiAgICAgIHsgdmFsdWU6ICdyZXBvcnQnLCB0ZXh0OiAoKSA9PiBpMThuLnJlb3JkZXJDb21tZW50QnV0dG9uUmVwb3J0IH0sCiAgICAgIHsgdmFsdWU6ICdkZWxldGUnLCB0ZXh0OiAoKSA9PiBpMThuLnJlb3JkZXJDb21tZW50QnV0dG9uRGVsZXRlIH0sCiAgICAgIHsgdmFsdWU6ICdjb252ZXJzaXRpb24nLCB0ZXh0OiAoKSA9PiBpMThuLnJlb3JkZXJDb21tZW50QnV0dG9uQ29udmVyc2l0aW9uIH0sCiAgICAgIHsgdmFsdWU6ICdyZXBseScsIHRleHQ6ICgpID0+IGkxOG4ucmVvcmRlckNvbW1lbnRCdXR0b25SZXBseSB9LAogICAgICB7IHZhbHVlOiAnbGlrZScsIHRleHQ6ICgpID0+IGkxOG4ucmVvcmRlckNvbW1lbnRCdXR0b25MaWtlIH0sCiAgICBdKSksCiAgICBpbml0KCkgewogICAgICBbMCwgMSwgMiwgMywgNF0uZm9yRWFjaChrZXkgPT4gewogICAgICAgIGtlZXBPcmRlckl0ZW1zRGlmZih0aGlzLnJlZltrZXldKTsKICAgICAgfSk7CiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIGNzcy5hcHBlbmQoWzAsIDEsIDIsIDMsIDRdLm1hcChpbmRleCA9PiBgCi5XQl9oYW5kbGUgdWwgbGlbeWF3Zi1jb21tZW50LWhhbmRsZS10eXBlPSIke3RoaXMucmVmW2luZGV4XS5nZXRDb25maWcoKX0iXSB7IG9yZGVyOiAke2luZGV4fTsgfQpgKS5qb2luKCcnKSk7CiAgICB9LAogIH0pOwoKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9mZWVkcy9jb250ZW50LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBjb25maWcgPSB5YXdmLmNvbmZpZzsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdDsKICBjb25zdCBmZWVkUGFyc2VyID0geWF3Zi5mZWVkOwoKICBjb25zdCBmZWVkcyA9IHlhd2YucnVsZXMuZmVlZHM7CiAgY29uc3QgbGF5b3V0ID0geWF3Zi5ydWxlcy5sYXlvdXQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CiAgY29uc3QgdWkgPSB1dGlsLnVpOwoKICBjb25zdCBjb250ZW50ID0gZmVlZHMuY29udGVudCA9IHt9OwoKICBpMThuLmZlZWRDb250ZW50R3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn5YaF5a65JywKICAgIHR3OiAn5YWn5a65JywKICAgIGVuOiAnQ29udGVudCcsCiAgfTsKCiAgY29udGVudC5jb250ZW50ID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGZlZWRzLmZlZWRzLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZENvbnRlbnRHcm91cFRpdGxlLAogIH0pOwoKICBpMThuLnN0eWxlVGV4dEZvbnRTaXplID0gewogICAgY246ICflop7lpKflvq7ljZrmraPmloflrZflj7fkuLp85Y6f5aSn5bCP55qEe3tyYXRpb31977yIVjfmnIDlpKcyMDAl77yJJywKICAgIHR3OiAn5Yqg5aSn5b6u5Y2a5YWn5paH5a2X6auU54K6fOWOn+Wkp+Wwj+eahHt7cmF0aW99fe+8iFY35pyA5aSnMjAwJe+8iScsCiAgICBlbjogJ0luY3JlYXNlIGZvbnQgc2l6ZSBmb3Igd2VpYm8gY29udGVudCB8IHRvIHt7cmF0aW99fSAoVjcgdXAgdG8gMjAwJSknLAogIH07CgogIGNvbnRlbnQuZm9udFNpemUgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ2ZlZWRfZm9udF9zaXplJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnN0eWxlVGV4dEZvbnRTaXplLAogICAgcmVmOiB7CiAgICAgIHJhdGlvOiB7CiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgc2VsZWN0OiBbCiAgICAgICAgICB7IHZhbHVlOiAnMTIwJywgdGV4dDogJzEyMCUnLCBzdHlsZTogYGZvbnQtc2l6ZTogMTZweDtgIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMTUwJywgdGV4dDogJzE1MCUnLCBzdHlsZTogYGZvbnQtc2l6ZTogMjFweDtgIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMjAwJywgdGV4dDogJzIwMCUnLCBzdHlsZTogYGZvbnQtc2l6ZTogMjhweDtgIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMzAwJywgdGV4dDogJzMwMCUnLCBzdHlsZTogYGZvbnQtc2l6ZTogNDJweDtgIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGNvbnN0IGNvbmZpZyA9IHsKICAgICAgICAgIDEyMDogeyBmczogMTYsIGxoOiAyNiwgZnMyOiAxNCwgbGgyOiAyNCwgaDogMjAsIGgyOiAxOCwgZnMzOiAxMiB9LAogICAgICAgICAgMTUwOiB7IGZzOiAyMSwgbGg6IDMyLCBmczI6IDE4LCBsaDI6IDI3LCBoOiAyNSwgaDI6IDIzLCBmczM6IDE0IH0sCiAgICAgICAgICAyMDA6IHsgZnM6IDI4LCBsaDogNDIsIGZzMjogMjQsIGxoMjogMzYsIGg6IDMzLCBoMjogMjksIGZzMzogMTkgfSwKICAgICAgICAgIDMwMDogeyBmczogNDIsIGxoOiA2NCwgZnMyOiAzNiwgbGgyOiA1NCwgaDogNTAsIGgyOiA0NiwgZnMzOiAyOCB9LAogICAgICAgIH1bdGhpcy5yZWYucmF0aW8uZ2V0Q29uZmlnKCldOwogICAgICAgIGNvbnN0IHsgZnMsIGxoLCBmczIsIGxoMiwgaCwgaDIsIGZzMyB9ID0gY29uZmlnOwogICAgICAgIGNzcy5hcHBlbmQoYAouV0JfaW5mbywgLldCX3RleHQsIC5XQl9pbmZvICosIC5XQl90ZXh0ICogeyBmb250LXNpemU6ICR7ZnN9cHggIWltcG9ydGFudDsgbGluZS1oZWlnaHQ6ICR7bGh9cHggIWltcG9ydGFudDsgfQouV0JfZmVlZF9leHBhbmQgLldCX2luZm8gKiwgLldCX2ZlZWRfZXhwYW5kIC5XQl90ZXh0ICosIC5XQl9mZWVkX2V4cGFuZCAuV0JfaW5mbywgLldCX2ZlZWRfZXhwYW5kIC5XQl90ZXh0IHsgZm9udC1zaXplOiAke2ZzMn1weCAhaW1wb3J0YW50OyBsaW5lLWhlaWdodDogJHtsaDJ9cHggIWltcG9ydGFudDsgfQouV0JfdGV4dCAuV19idG5fYiB7IGhlaWdodDogJHtofXB4ICFpbXBvcnRhbnQ7IH0KLldCX3RleHQgLldfYnRuX2IsIC5XQl90ZXh0IC5XX2J0bl9iICogeyBsaW5lLWhlaWdodDogJHtofXB4ICFpbXBvcnRhbnQ7IGZvbnQtc2l6ZTogJHtmczJ9cHggIWltcG9ydGFudDsgfQouV0JfZmVlZF9leHBhbmQgLldCX3RleHQgLldfYnRuX2IsIC5XQl90ZXh0IC5XX2J0bl9jLCAuV0JfZW1wdHkgLldfYnRuX2MgeyBoZWlnaHQ6ICR7aDJ9cHggIWltcG9ydGFudDsgbGluZS1oZWlnaHQ6ICR7aDJ9cHggIWltcG9ydGFudDsgfQouV0JfZmVlZF9leHBhbmQgLldCX3RleHQgLldfYnRuX2IsIC5XQl9mZWVkX2V4cGFuZCAuV0JfdGV4dCAuV19idG5fYiAqLCAuV0JfdGV4dCAuV19idG5fYyAqLCAuV0JfZW1wdHkgLldfYnRuX2MgKiB7IGxpbmUtaGVpZ2h0OiAke2gyfXB4ICFpbXBvcnRhbnQ7IGZvbnQtc2l6ZTogJHtmczN9cHggIWltcG9ydGFudDsgfQouV19pY29uX2ZlZWRwaW4sIC5XX2ljb25fZmVlZGhvdCB7IGhlaWdodDogMTZweCAhaW1wb3J0YW50OyBsaW5lLWhlaWdodDogMTZweCAhaW1wb3J0YW50OyB9Ci5XQl9pbmZvIHsgbWFyZ2luLWJvdHRvbTogMnB4ICFpbXBvcnRhbnQ7IHBhZGRpbmctdG9wOiAwICFpbXBvcnRhbnQ7IGxpbmUtaGVpZ2h0OiAke2ZzIDw9IDI4ID8gMjggOiA1MH1weCAhaW1wb3J0YW50OyB9Ci55YXdmLVdCX3RleHRfc2l6ZV9tYWluLCAueWF3Zi1XQl90ZXh0X3NpemUgeyBmb250LXNpemU6ICR7ZnN9cHg7IGxpbmUtaGVpZ2h0OiAke2xofXB4OyB9Ci55YXdmLVdCX3RleHRfc2l6ZV9leHBhbmQsIC5XQl9mZWVkX2V4cGFuZCAueWF3Zi1XQl90ZXh0X3NpemUgeyBmb250LXNpemU6ICR7ZnMyfXB4OyB9CmApOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGNvbmZpZyA9IHsKICAgICAgICAgIDEyMDogeyBmczogMTYsIGFsaDogMjAsIGxoOiAyNiwgZnMyOiAxNCwgbGgyOiAyNCB9LAogICAgICAgICAgMTUwOiB7IGZzOiAyMSwgYWxoOiAyNCwgbGg6IDMyLCBmczI6IDE4LCBsaDI6IDI3IH0sCiAgICAgICAgICAyMDA6IHsgZnM6IDI4LCBhbGg6IDMyLCBsaDogNDIsIGZzMjogMjQsIGxoMjogMzYgfSwKICAgICAgICAgIDMwMDogeyBmczogMjgsIGFsaDogMzIsIGxoOiA0MiwgZnMyOiAyNCwgbGgyOiAzNiB9LAogICAgICAgIH1bdGhpcy5yZWYucmF0aW8uZ2V0Q29uZmlnKCldOwogICAgICAgIGNvbnN0IHsgZnMsIGxoLCBmczIsIGxoMiB9ID0gY29uZmlnOwogICAgICAgIGNzcy5hcHBlbmQoYAoueWF3Zi1mZWVkLWF1dGhvci1saW5lIHsgbWFyZ2luLWJvdHRvbTogMHB4ICFpbXBvcnRhbnQ7IGZvbnQtc2l6ZTogJHtmc31weCAhaW1wb3J0YW50OyBsaW5lLWhlaWdodDogJHtsaH1weCAhaW1wb3J0YW50OyB9Ci55YXdmLWZlZWQtYXV0aG9yLWJveCB7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbiAhaW1wb3J0YW50OyB9Ci55YXdmLWZlZWQtYXV0aG9yLWJveDo6YWZ0ZXIgeyBjb250ZW50OiAiICI7IG1hcmdpbi1ib3R0b206IDRweCB9Ci55YXdmLWZlZWQtZGV0YWlsLWNvbnRlbnQgeyBmb250LXNpemU6ICR7ZnN9cHggIWltcG9ydGFudDsgbGluZS1oZWlnaHQ6ICR7bGh9cHggIWltcG9ydGFudDsgfQoueWF3Zi1mZWVkLW9yaWdpbmFsIHNwYW4sIC55YXdmLWZlZWQtZGV0YWlsLWNvbnRlbnQtcmV0d2VldCwgLnlhd2YtZmVlZC1jb21tZW50LXRleHQsIC55YXdmLWZlZWQtY29tbWVudC1tb3JlLCAueWF3Zi1mZWVkLXJlcG9zdC10ZXh0LCAueWF3Zi1mZWVkLWRldGFpbC1jb250ZW50LXJldHdlZXQtc2l6ZSB7IGZvbnQtc2l6ZTogJHtmczJ9cHggIWltcG9ydGFudDsgbGluZS1oZWlnaHQ6ICR7bGgyfXB4ICFpbXBvcnRhbnQ7IH0KLnlhd2YtZmVlZC1kZXRhaWwtY29udGVudCBpbWcsIC55YXdmLWZlZWQtZGV0YWlsLWNvbnRlbnQgLmljb24tbGluayB7IGhlaWdodDogJHtmc31weCAhaW1wb3J0YW50OyB3aWR0aDogJHtmc31weCAhaW1wb3J0YW50OyB9Ci55YXdmLWZlZWQtZGV0YWlsLWNvbnRlbnQtcmV0d2VldCBpbWcsIC55YXdmLWZlZWQtZGV0YWlsLWNvbnRlbnQtcmV0d2VldCAuaWNvbi1saW5rIHsgaGVpZ2h0OiAke2ZzMn1weCAhaW1wb3J0YW50OyB3aWR0aDogJHtmczJ9cHggIWltcG9ydGFudDsgfQoKLndicHYtYmlnLXBsYXktYnV0dG9uIHsgei1pbmRleDogOTk7IH0KYCk7CiAgICAgIH0KICAgIH0sCiAgfSk7CgogIGkxOG4uYXV0b0V4cGFuZExvbmdGZWVkcyA9IHsKICAgIGNuOiAn6Ieq5Yqo5bGV5byAfOS4jei2hei/h3t7Y291bnR9feWtl+eahOW+ruWNmnzvvIjmr4/kuKrmjaLooYznrKborqF7e2JyfX3lrZfvvIknLAogICAgdHc6ICfoh6rli5XlsZXplot85LiN6LaF6YGOe3tjb3VudH195YCL5a2X55qE5b6u5Y2afO+8iOavj+WAi+aPm+ihjOespuioiHt7YnJ9feWtl++8iScsCiAgICBlbjogJ0F1dG9tYXRpY2FsbHkgdW5mb2xkIHdlaWJvIHwgd2l0aGluIHt7Y291bnR9fSBjaGFyYWN0ZXJzIHx8IChjb3VudCBlYWNoIGxpbmUgYnJlYWsgYXMge3ticn19IGNoYXJhY3RlcnMpJywKICB9OwoKICBjb250ZW50LmV4cGFuZExvbmcgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ2ZlZWRfbG9uZ19leHBhbmQnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uYXV0b0V4cGFuZExvbmdGZWVkcywKICAgIHJlZjogewogICAgICBjb3VudDogeyB0eXBlOiAncmFuZ2UnLCBtaW46IDE0MCwgbWF4OiAyMDAwLCBzdGVwOiAxMCwgaW5pdGlhbDogMjAwIH0sCiAgICAgIGJyOiB7IHR5cGU6ICdyYW5nZScsIG1pbjogMSwgbWF4OiA2MCwgc3RlcDogMSwgaW5pdGlhbDogMzAgfSwKICAgIH0sCiAgICAvLyBWNiDov5nkuKrorr7nva7pobnnmoTnm7jlhbPpgLvovpHlrp7njrDlnKggY29udGVudC9ydWxlL2ZpbHRlci9jb21tb24vbG9uZy5qcwogICAgLy8gVjcg5a6e546w5aaC5LiLCiAgICBpbml0KCkgewogICAgICBjb25zdCBleHBhbmQgPSB0aGlzLmlzRW5hYmxlZCgpOwogICAgICBjb25zdCBjb3VudCA9IHRoaXMucmVmLmNvdW50LmdldENvbmZpZygpOwogICAgICBjb25zdCBiciA9IHRoaXMucmVmLmJyLmdldENvbmZpZygpOwogICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSwgZXhwYW5kLCB7IGNvdW50LCBiciB9KSB7CiAgICAgICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICAgIGNvbnN0IGV4cGFuZExvbmdUZXh0Q29udGVudCA9IGZ1bmN0aW9uICh2bSkgewogICAgICAgICAgdm0uJHNldCh2bS5kYXRhLCAndGV4dF9leHBhbmQnLCB2bS5zaG93VGV4dCk7CiAgICAgICAgICB2bS4kaHR0cCA9IE9iamVjdC5jcmVhdGUodm0uJGh0dHApOwogICAgICAgICAgdm0uJGh0dHAuZ2V0ID0gKGZ1bmN0aW9uIChnZXQpIHsKICAgICAgICAgICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7CiAgICAgICAgICAgICAgaWYgKGFyZ3NbMF0gPT09ICcvYWpheC9zdGF0dXNlcy9sb25ndGV4dCcgJiYgdm0uZGF0YS5sb25nVGV4dENvbnRlbnRfcmF3KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgb2s6IDEsCiAgICAgICAgICAgICAgICAgICAgaHR0cF9jb2RlOiAyMDAsCiAgICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgICAgbG9uZ1RleHRDb250ZW50OiB2bS5kYXRhLmxvbmdUZXh0Q29udGVudF9yYXcsCiAgICAgICAgICAgICAgICAgICAgICB1cmxfc3RydWN0OiB2bS5kYXRhLnVybF9zdHJ1Y3QgfHwgW10sCiAgICAgICAgICAgICAgICAgICAgICB0b3BpY19zdHJ1Y3Q6IHZtLmRhdGEudG9waWNfc3RydWN0IHx8IFtdLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0LmNhbGwodGhpcywgLi4uYXJncyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgfSh2bS4kaHR0cC5nZXQpKTsKICAgICAgICAgIGNvbnN0IHRleHQgPSB2bS5kYXRhLmxvbmdUZXh0Q29udGVudF9yYXc7CiAgICAgICAgICBpZiAoIXRleHQpIHJldHVybjsKICAgICAgICAgIGNvbnN0IGxlbiA9IE1hdGguY2VpbCh0ZXh0Lmxlbmd0aCAtICh0ZXh0Lm1hdGNoKC9bXHUwMDIwLVx1MDBmZV0vZykgfHwgW10pLmxlbmd0aCAvIDIpOwogICAgICAgICAgY29uc3QgcmVtTGVuID0gbGVuICsgKHRleHQuc3BsaXQoJ1xuJykubGVuZ3RoIC0gMSkgKiAoYnIgLSAxKTsKICAgICAgICAgIGlmIChleHBhbmQgJiYgcmVtTGVuIDwgY291bnQpIHsKICAgICAgICAgICAgdm0uaGFuZGxlRXhwYW5kKCk7CiAgICAgICAgICAgIGNvbnN0IHVud2F0Y2ggPSB2bS4kd2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5kYXRhLmxvbmdUZXh0Q29udGVudDsgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmICghdm0uZGF0YS5sb25nVGV4dENvbnRlbnQpIHJldHVybjsKICAgICAgICAgICAgICB1bndhdGNoKCk7CiAgICAgICAgICAgICAgdm0uc2hvd1RleHQgPSB2bS5kYXRhLmxvbmdUZXh0Q29udGVudDsKICAgICAgICAgICAgICB2bS4kZW1pdCgndXBkYXRlVGV4dCcsIHZtLnNob3dUZXh0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBleHBhbmQgPSAnPHNwYW4gY2xhc3M9ImV4cGFuZCI+5bGV5byAPC9zcGFuPic7CiAgICAgICAgICAgIGNvbnN0IHdvcmRUaXAgPSBg5bGV5byA77yI57qmICR7TWF0aC5jZWlsKGxlbiAvIDEwKSAqIDEwfSDlrZfvvIlgOwogICAgICAgICAgICB2bS5kYXRhLnRleHRfZXhwYW5kID0gdm0uZGF0YS50ZXh0X2V4cGFuZC5yZXBsYWNlKGV4cGFuZCwgKCkgPT4gZXhwYW5kLnJlcGxhY2UoJ+WxleW8gCcsIHdvcmRUaXApKTsKICAgICAgICAgICAgdm0uc2hvd1RleHQgPSB2bS5kYXRhLnRleHRfZXhwYW5kOwogICAgICAgICAgICB2bS4kZW1pdCgndXBkYXRlVGV4dCcsIHZtLnNob3dUZXh0KTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0oJ2ZlZWQtZGV0YWlsJywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICBjb25zdCBuZWVkTG9hZExvbmcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5pc0xvbmdUZXh0KSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuX3lhd2ZfTG9uZ1RleHRDb250ZW50TG9hZGluZyAhPT0gZmFsc2UpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5sb25nVGV4dENvbnRlbnQpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5feWF3Zl9Mb25nVGV4dENvbnRlbnRBdXRvRXhwYW5kKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEubWlkOwogICAgICAgICAgfTsKICAgICAgICAgIHZtLiR3YXRjaChuZWVkTG9hZExvbmcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCFuZWVkTG9hZExvbmcuY2FsbCh2bSkpIHJldHVybjsKICAgICAgICAgICAgdm0uJHNldCh2bS5kYXRhLCAnX3lhd2ZfTG9uZ1RleHRDb250ZW50QXV0b0V4cGFuZCcsIHRydWUpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGV4cGFuZExvbmdUZXh0Q29udGVudCh2bSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCB7IGltbWVkaWF0ZTogdHJ1ZSB9KTsKICAgICAgICB9KTsKCiAgICAgIH0sIHV0aWwuaW5qZWN0LnJvb3RLZXksIGV4cGFuZCwgeyBjb3VudCwgYnIgfSk7CiAgICB9LAogIH0pOwoKICBpMThuLmZlZWRDb250ZW50TGluZUJyZWFrID0gewogICAgY246ICflsIblvq7ljZrkuK3nmoTmjaLooYzmmL7npLrkuLp8e3t0ZXh0fX0nLAogICAgdHc6ICflsIflvq7ljZrkuK3nmoTmj5vooYzpoa/npLrngrp8e3t0ZXh0fX0nLAogICAgZW46ICdTaG93IGxpbmUgYnJlYWtzIGFzIGNoYXJhY3RlciB8ICB7e3RleHR9fScsCiAgfTsKCiAgY29udGVudC5mZWVkQ29udGVudExpbmVCcmVhayA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZlZWRfY29udGVudF9saW5lX2JyZWFrJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRDb250ZW50TGluZUJyZWFrLAogICAgcmVmOiB7CiAgICAgIHRleHQ6IHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBpbml0aWFsOiAn4o+OJywKICAgICAgICBzZWxlY3Q6IFsKICAgICAgICAgIHsgdmFsdWU6ICcgJywgdGV4dDogJyAnIH0sCiAgICAgICAgICB7IHZhbHVlOiAn4qS2JywgdGV4dDogJ+KkticgfSwKICAgICAgICAgIHsgdmFsdWU6ICfihrUnLCB0ZXh0OiAn4oa1JyB9LAogICAgICAgICAgeyB2YWx1ZTogJ+KPjicsIHRleHQ6ICfij44nIH0sCiAgICAgICAgICB7IHZhbHVlOiAn4oayJywgdGV4dDogJ+KGsicgfSwKICAgICAgICAgIHsgdmFsdWU6ICfihqknLCB0ZXh0OiAn4oapJyB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIG9ic2VydmVyLmRvbS5hZGQoZnVuY3Rpb24gZmVlZENvbnRlbnRMaW5lQnJlYWsoKSB7CiAgICAgICAgY29uc3QgYnJMaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfdGV4dCBicicpKTsKICAgICAgICBickxpc3QuZm9yRWFjaChiciA9PiB7CiAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgIHBsYWNlaG9sZGVyLmNsYXNzTmFtZSA9ICd5YXdmLWxpbmVicmVhayBTX3R4dDInOwogICAgICAgICAgYnIucmVwbGFjZVdpdGgocGxhY2Vob2xkZXIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgY29uc3QgdGV4dCA9IHRoaXMucmVmLnRleHQuZ2V0Q29uZmlnKCk7CiAgICAgIHV0aWwuY3NzLmFkZCgnLnlhd2YtbGluZWJyZWFrOjpiZWZvcmUgeyBjb250ZW50OiAiJyArIHRleHQgKyAnIiB9Jyk7CiAgICB9LAogIH0pOwoKICBpMThuLnNob3dMaW5rVXJsID0gewogICAgY246ICflsIblvq7ljZrkuK3nmoTnvZHpobXpk77mjqXmm7/mjaLkuLrnn63nvZHlnYAnLAogICAgdHc6ICflsIflvq7ljZrkuK3nmoTnvZHpobXpk77mjqXmm7/mj5vngrrnn63ntrLlnYAnLAogICAgZW46ICdSZXBsYWNlIOe9kemhtemTvuaOpSBpbiBXZWlibyBieSBzaG9ydGVuZWQgVVJMJywKICB9OwoKICBjb250ZW50LnNob3dMaW5rVXJsID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmVlZF9saW5rX3VzZV91cmwnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2hvd0xpbmtVcmwsCiAgICBpbml0KCkgewogICAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpOwogICAgICBjb25zdCBzaG93TGlua1VybCA9IGZ1bmN0aW9uIHNob3dMaW5rVXJsKCkgewogICAgICAgIGNvbnN0IGljb24gPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9mZWVkX3R5cGUgYTpub3QoW3lhd2YtbGluay10eXBlXSkgPiAuV19maWNvbjpmaXJzdC1jaGlsZCcpKTsKICAgICAgICBpY29uLmZvckVhY2goaSA9PiB7IGkucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoJ3lhd2YtbGluay10eXBlJywgaS50ZXh0Q29udGVudC50cmltKCkpOyB9KTsKICAgICAgICBpZiAoIWNvbmZpZykgcmV0dXJuOwogICAgICAgIGNvbnN0IGxpbmtzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfZmVlZF90eXBlIGFbeWF3Zi1saW5rLXR5cGU9Ik8iXVt0aXRsZT0i572R6aG16ZO+5o6lIl06bm90KFt5YXdmLWxpbmstZXhwYW5kXSknKSk7CiAgICAgICAgbGlua3MuZm9yRWFjaChsaW5rID0+IHsKICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCd5YXdmLWxpbmstZXhwYW5kJywgJycpOwogICAgICAgICAgbGluay50ZXh0Q29udGVudCA9IGxpbmsuaHJlZjsKICAgICAgICAgIGxpbmsuY2xhc3NOYW1lID0gJ3lhd2YtbGluayc7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIG9ic2VydmVyLmRvbS5hZGQoc2hvd0xpbmtVcmwpOwogICAgfSwKICB9KTsKCiAgaTE4bi51c2VUZXh0RW1vamkgPSB7CiAgICBjbjogJ+WwhuW+ruWNmuS4reWbvueJh+ihqOekuueahCBVbmljb2RlIOihqOaDheespuWPt+abv+aNouS4uuaWh+acrCcsCiAgICB0dzogJ+Wwh+W+ruWNmuS4reWclueJh+ihqOekuueahCBVbmljb2RlIEVtb2ppIOabv+aPm+eCuuaWh+acrCcsCiAgICBlbjogJ1VzZSB0ZXh0IGZvciB1bmljb2RlIGVtb2ppIGluc3RlYWQgb2YgaW1hZ2UnLAogIH07CgogIGNvbnN0IHNvZnRiYW5rRW1vamlMb29rdXBUYWJsZSA9IHsgMTogMTI4MTAyLCAyOiAxMjgxMDMsIDM6IDEyODEzOSwgNDogMTI4MTA0LCA1OiAxMjgxMDUsIDY6IDEyODA4NSwgNzogMTI4MDk0LCA4OiAxMjgyNDcsIDk6IDk3NDIsIDEwOiAxMjgyNDEsIDExOiAxMjgyMjQsIDEyOiAxMjgxODcsIDEzOiAxMjgwNzQsIDE0OiAxMjgwNzcsIDE1OiA5NzU3LCAxNjogOTk5NCwgMTc6IDk5OTYsIDE4OiAxMjg1ODcsIDE5OiAxMjc5MzUsIDIwOiA5OTcxLCAyMTogMTI3OTM0LCAyMjogOTkxOCwgMjM6IDEyNzk0MCwgMjQ6IDk5MTcsIDI1OiAxMjgwMzMsIDI2OiAxMjgwNTIsIDI3OiAxMjg2NjMsIDI4OiA5OTczLCAyOTogOTk5MiwgMzA6IDEyODY0MywgMzE6IDEyODY0NSwgMzI6IDEwMDY3LCAzMzogMTAwNzEsIDM0OiAxMDA4NCwgMzU6IDEyODE0OCwgMzY6IDEyODMzNiwgMzc6IDEyODMzNywgMzg6IDEyODMzOCwgMzk6IDEyODMzOSwgNDA6IDEyODM0MCwgNDE6IDEyODM0MSwgNDI6IDEyODM0MiwgNDM6IDEyODM0MywgNDQ6IDEyODM0NCwgNDU6IDEyODM0NSwgNDY6IDEyODM0NiwgNDc6IDEyODM0NywgNDg6IDEyNzgwMCwgNDk6IDEyODMwNSwgNTA6IDEyNzgwMSwgNTE6IDEyNzg3NiwgNTI6IDEyODE0MSwgNTM6IDEyODE0MiwgNTQ6IDEyNzk2OCwgNTU6IDk5NjIsIDU2OiAxMjc5NzAsIDU3OiAxMjg2NDksIDU4OiA5OTgxLCA1OTogMTI4NTA3LCA2MDogMTI3OTA4LCA2MTogMTI3OTA5LCA2MjogMTI3OTI1LCA2MzogMTI4MjczLCA2NDogMTI3OTI3LCA2NTogMTI3OTI4LCA2NjogMTI3OTMwLCA2NzogMTI3ODYwLCA2ODogMTI3ODY0LCA2OTogOTc0OSwgNzA6IDEyNzg1NiwgNzE6IDEyNzg2NiwgNzI6IDk5MjQsIDczOiA5NzI5LCA3NDogOTcyOCwgNzU6IDk3NDgsIDc2OiAxMjc3NjQsIDc3OiAxMjc3NDgsIDc4OiAxMjgxMjQsIDc5OiAxMjgwNDksIDgwOiAxMjgwNDcsIDgxOiAxMjgwNTksIDgyOiAxMjgwNDEsIDgzOiAxMjgwNDUsIDg0OiAxMjgwNTEsIDg1OiAxMjgwMzksIDg2OiAxMjg1MjMsIDg3OiAxMjg1MTUsIDg4OiAxMjg1NDIsIDg5OiAxMjg1NDQsIDkwOiAxMjgxNjksIDI1NzogMTI4MjM0LCAyNTg6IDEyODIzOCwgMjU5OiA5OTkzLCAyNjA6IDEyODI0MiwgMjYxOiAxMjg1NDAsIDI2MjogMTI4NTI1LCAyNjM6IDEyODU2MSwgMjY0OiAxMjg1MzEsIDI2NTogMTI4MDUzLCAyNjY6IDEyODAyNSwgMjY3OiAxMjgwNTUsIDI2ODogMTI4MTI1LCAyNjk6IDEyODY0MCwgMjcwOiAxMjgwODEsIDI3MTogMTI4MTYxLCAyNzI6IDEyNzgwOCwgMjczOiAxMjgxNDMsIDI3NDogMTI3ODczLCAyNzU6IDEyODI5OSwgMjc2OiAxMjgyNjksIDI3NzogMTI3OTM5LCAyNzg6IDEyODI5NiwgMjc5OiAxMjc4NzgsIDI4MDogMTI3ODA5LCAyODE6IDEyNzgxMCwgMjgyOiAxMjgxMjcsIDI4MzogMTI4MTIzLCAyODQ6IDEyODEyOCwgMjg1OiAxMjgyOTMsIDI4NjogMTI4MTg4LCAyODc6IDEyODE4NiwgMjg4OiAxMjc4MjgsIDI4OTogOTk3MCwgMjkwOiA5OTc4LCAyOTE6IDk4MzIsIDI5MjogMTI3OTA1LCAyOTM6IDEyNzkxNSwgMjk0OiAxMjgxOTEsIDI5NTogMTI4MTkyLCAyOTY6IDEyODI1MSwgMjk3OiAxMjgyNTIsIDI5ODogMTI4MjUwLCAyOTk6IDEyODEyNiwgMzAwOiAxMjM0OSwgMzAxOiAxMjY5ODAsIDMwMjogMTI3Mzg2LCAzMDM6IDEyODE3NiwgMzA0OiAxMjc5MTksIDMwNTogMTI3OTQyLCAzMDY6IDEyNzkzNywgMzA3OiAxMjc5MjAsIDMwODogMTI4MDE0LCAzMDk6IDEyODY3NiwgMzEwOiAxMjg2OTAsIDMxMTogMTI4Njc5LCAzMTI6IDEyODY5NywgMzEzOiAxMjg2OTgsIDMxNDogMTI4NzAwLCAzMTU6IDEyODEzNywgMzE2OiAxMjgxNjQsIDMxNzogOTg4OSwgMzE4OiAxMjgwOTYsIDMxOTogMTI4NzA0LCAzMjA6IDEyODcwMSwgMzIxOiAxMjgyNjYsIDMyMjogMTI4MjI2LCAzMjM6IDEyNzg4NCwgMzI0OiAxMjgyNzQsIDMyNTogMTI4Mjc1LCAzMjY6IDEyNzc1MCwgMzI3OiAxMjc4NTksIDMyODogMTI4MjExLCAzMjk6IDEyODE3NywgMzMwOiAxMjgxODUsIDMzMTogMTI4MjI1LCAzMzI6IDEyODE3MCwgMzMzOiAxMjc5NzQsIDMzNDogMTI4Njc3LCAzMzU6IDEyNzM1OSwgMzM2OiAxMjg2NTUsIDMzNzogMTI4Njk5LCAzMzg6IDEyODExMCwgMzM5OiAxMjc5NzEsIDM0MDogMTI3OTc1LCAzNDE6IDEyNzk3MywgMzQyOiAxMjc5NzgsIDM0MzogMTI3OTc5LCAzNDQ6IDEyNzk3NiwgMzQ1OiAxMjg2NTIsIDM0NjogMTI4NjYxLCAxMDkxOiAxMjc3NDQsIDEwODQ6IDEyNzc0NiwgMTA5OTogMTI3NzQ3LCAxMDk3OiAxMjc3NDksIDEwOTg6IDEyNzc1MSwgMTEwMDogMTI3NzUyLCAxMDg2OiAxMjc3NTQsIDgyMTogMTI3Nzc1LCA1NzU6IDk4MDAsIDU3NjogOTgwMSwgNTc3OiA5ODAyLCA1Nzg6IDk4MDMsIDU3OTogOTgwNCwgNTgwOiA5ODA1LCA1ODE6IDk4MDYsIDU4MjogOTgwNywgNTgzOiA5ODA4LCA1ODQ6IDk4MDksIDU4NTogOTgxMCwgNTg2OiA5ODExLCA1ODc6IDk5MzQsIDc3MjogMTI3Nzk5LCAxMDk1OiAxMjc4MTEsIDc3MTogMTI3ODAyLCA3NzM6IDEyNzgwMywgNzc1OiAxMjc3OTYsIDc3NjogMTI3Nzk3LCAxMDkyOiAxMjc4MDYsIDgzNzogMTI3ODIyLCA4Mzg6IDEyNzgxOCwgODM5OiAxMjc4MjcsIDg0MDogMTI3ODE3LCA4NDE6IDEyNzgxMywgODQyOiAxMjc4MTQsIDEwNDk6IDEyODA2NCwgMTA1MTogMTI4MDY2LCAxMDUwOiAxMjgwNjcsIDEwNTI6IDEyODA2OCwgMTAzMzogMTI4MDY5LCA3OTY6IDEyODEzMiwgNzk3OiAxMjgxMzMsIDc5ODogMTI4MTM0LCA3OTk6IDEyODEzNSwgODAwOiAxMjgxMzYsIDEwNjQ6IDEyODEwNywgMTA2NTogMTI4MTExLCAxMzAxOiAxMjgxMTMsIDEzMDI6IDEyODExNCwgMTMwMzogMTI4MTE1LCAxMzA0OiAxMjgxMTYsIDEzMDU6IDEyODExNywgMTMwNjogMTI4MTE4LCAxMzA3OiAxMjgxMTksIDEzMDg6IDEyODEyMCwgNTk1OiAxMjgxMjksIDEzMTA6IDEyODEzMCwgMTMxMTogMTI4MTMxLCAxMzI1OiAxMjgwMTMsIDEzMjY6IDEyODAyMCwgMTMyNzogMTI4MDIzLCAxMzI4OiAxMjgwNDMsIDEzMTg6IDEyODAyNCwgMTMxOTogMTI4MDQwLCAxMzIwOiAxMjgwMTgsIDEzMjE6IDEyODAxNywgMTA4OTogMTI4MDI2LCAxMzE3OiAxMjgwMjcsIDEzMTQ6IDEyODAzMiwgMTMxNTogMTI4MDM2LCAxMzEzOiAxMjgwMzgsIDEzMTI6IDEyODA0NCwgMTMxNjogMTI4MDU3LCAxMzIyOiAxMjgwNTgsIDEzMjM6IDEyODA0NiwgMTMyNDogMTI4MDQ4LCAxMzI5OiAxMjgwNTYsIDEzMzQ6IDEyODA2MiwgMTAyNzogMTI4NTUzLCAxMDQwOiAxMjg1NjIsIDEwMzA6IDEyODU2NSwgMTAzOTogMTI4NTYwLCAxMDM4OiAxMjg1MzAsIDEwMjg6IDEyODU0OCwgMTA0ODogMTI4NTM2LCAxMDQ3OiAxMjg1MzgsIDEwMzY6IDEyODU2NywgMTAzNzogMTI4NTYzLCAxMDQ1OiAxMjg1MTcsIDEwMzQ6IDEyODUxOCwgMTA0MjogMTI4NTE0LCAxMDQ0OiA5Nzg2LCAxMDQzOiAxMjg1NDYsIDEwNDE6IDEyODU1NywgMTAzNTogMTI4NTUyLCAxMDQ2OiAxMjg1NDUsIDEwMzE6IDEyODUzNCwgMTAzMjogMTI4NTU0LCAxMDI2OiAxMjg1MjcsIDEwMjU6IDEyODU0OSwgMTAyOTogMTI4NTIxLCAxMDU5OiAxMjg1ODEsIDEwNjA6IDEyODU4MiwgMTA2MjogMTI4NTgzLCAxMDYzOiAxMjg1ODgsIDEwNTM6IDEyODU5MSwgMTI4MTogMTI3OTc3LCAxMjg0OiAxMjc5ODAsIDEyODU6IDEyNzk4MywgMTI4NjogMTI3OTg0LCAxMjg4OiAxMjc5ODEsIDUxNDogOTg3NSwgNzc5OiAxMjc5ODIsIDEyODk6IDEyODUwOCwgMTMwOTogMTI4NTA5LCA3OTQ6IDEyODA5NywgNzk1OiAxMjgwOTgsIDc3MDogMTI4MDg0LCA3OTI6IDEyODA4MiwgNzkzOiAxMjgwODcsIDgwMTogMTI4MDg4LCA4MDI6IDEyODA4OSwgODAzOiAxMjgwOTIsIDEyOTk6IFsxMjc0NjQsIDEyNzQ3NV0sIDEyOTQ6IFsxMjc0NjUsIDEyNzQ2Nl0sIDEyOTc6IFsxMjc0NjYsIDEyNzQ4MF0sIDEyOTM6IFsxMjc0NjcsIDEyNzQ3OV0sIDEyOTY6IFsxMjc0NjgsIDEyNzQ2M10sIDEyOTU6IFsxMjc0NzAsIDEyNzQ4MV0sIDEyOTE6IFsxMjc0NzEsIDEyNzQ3N10sIDEzMDA6IFsxMjc0NzIsIDEyNzQ3OV0sIDEyOTg6IFsxMjc0NzksIDEyNzQ4Ml0sIDEyOTI6IFsxMjc0ODIsIDEyNzQ4MF0sIDU3NDogMTI4MzAyLCA1MjE6IDEyODMwNCwgNzgzOiAxMjgxMzgsIDEzMzA6IDEyNzM0NCwgMTMzMTogMTI3MzQ1LCAxMzMyOiAxMjczNzQsIDEzMzM6IDEyNzM1OCwgNzg4OiAxMjc4NzIsIDg0MzogMTI3ODc0LCAxMDk2OiAxMjc4NzcsIDc4NDogMTI3ODgwLCA3ODY6IDEyNzg4MSwgMTA3ODogMTI3ODg1LCAxMDgwOiAxMjc4ODYsIDEwODE6IDEyNzg5MSwgMTA4MjogMTI3ODkwLCAxMDgzOiAxMjc4ODcsIDEwODg6IDEyNzg3OSwgMTA5MDogMTI3ODg4LCAxMDkzOiAxMjc4NzUsIDEwOTQ6IDEyNzg4OSwgNzY5OiAxMjgyMjEsIDc5MTogMTI4MjI3LCA3OTA6IDEyODE4OSwgNzg3OiA5OTg2LCAxMDY2OiAxMjc5MzYsIDEwNjc6IDEyNzk0NCwgMTA2OTogMTI3OTQ2LCAxMDc2OiAxMjg2NDcsIDEwNzc6IDEyODY0NCwgMTA3MDogMTI4NjY1LCAxMDcxOiAxMjg2NjYsIDEwNzI6IDEyODY1OCwgMTA3MzogMTI4NjU3LCAxMDc0OiAxMjg2NTksIDEwNzU6IDEyNzkwNiwgMTI4NzogMTI3OTEwLCA3Nzg6IDEyNzkxMSwgMTI4MjogMTI3OTEyLCAxMjgzOiAxMjc5MTMsIDgwNDogMTI3OTE2LCAxMDY4OiAxMjc5MjEsIDgwNjogMTI3OTI2LCA3NzQ6IDEyODE0NCwgMTA2MTogMTI4MTQ1LCAxMDg1OiAxMjgxNDYsIDUxOTogMTI4Mjg2LCA1OTA6IDE2OSwgNTkxOiAxNzQsIDEzMzU6IDg0ODIsIDUyODogWzM1LCA4NDE5XSwgNTQwOiBbNDksIDg0MTldLCA1NDE6IFs1MCwgODQxOV0sIDU0MjogWzUxLCA4NDE5XSwgNTQzOiBbNTIsIDg0MTldLCA1NDQ6IFs1MywgODQxOV0sIDU0NTogWzU0LCA4NDE5XSwgNTQ2OiBbNTUsIDg0MTldLCA1NDc6IFs1NiwgODQxOV0sIDU0ODogWzU3LCA4NDE5XSwgNTQ5OiBbNDgsIDg0MTldLCA1MjM6IDEyODI0NiwgNTkyOiAxMjgyNDMsIDU5MzogMTI4MjQ0LCA4MzQ6IDEyNzgzMywgODMyOiAxMjc4MzYsIDgyNTogMTI3ODM4LCA4MjY6IDEyNzg0NiwgODI3OiAxMjc4MzksIDgyODogMTI3ODQxLCA4Mjk6IDEyNzgzMiwgODMwOiAxMjc4MzQsIDgzMTogMTI3ODM3LCA4MzM6IDEyNzgzNSwgODM1OiAxMjc4NDIsIDgzNjogMTI3ODQzLCA4NDQ6IDEyNzg1NywgODQ1OiAxMjc4NTgsIDEwODc6IDEyNzg0NywgODI0OiAxMjc4NjEsIDc4MDogMTI3ODY3LCA1NjY6IDg1OTksIDU2ODogODYwMCwgNTY3OiA4NTk4LCA1Njk6IDg2MDEsIDU2MjogMTEwMTQsIDU2MzogMTEwMTUsIDU2NDogMTAxNDUsIDU2NTogMTEwMTMsIDU3MDogOTY1NCwgNTcxOiA5NjY0LCA1NzI6IDkxOTMsIDU3MzogOTE5NCwgODE4OiAxMTA5MywgODE5OiAxMDA2MCwgODIyOiAxMDA2OCwgODIzOiAxMDA2OSwgNTI5OiAxMDE3NSwgODA3OiAxMjgxNDcsIDgwODogMTI4MTUxLCA4MDk6IDEyODE1MiwgODEwOiAxMjgxNTMsIDgxMTogMTI4MTU0LCA4MTI6IDEyODE1NSwgODEzOiAxMjgxNTYsIDEwNzk6IDEyODE1NywgNTE2OiAxMjgxNTksIDUyNDogOTgyOSwgNTI2OiA5ODI0LCA1MjU6IDk4MzAsIDUyNzogOTgyNywgNzgyOiAxMjg2ODQsIDUyMDogMTI4Njg1LCA1MjI6IDk4NTUsIDU5NDogOTg4OCwgNTEzOiAxMjg2OTQsIDc3NzogMTI4NzAyLCA1MzI6IDEyNzM3OCwgNTUzOiAxMjczODAsIDUzMDogMTI3MzgxLCA1ODk6IDEyNzM4MywgNTMxOiAxMjczODUsIDUxNTogMTI3NDg5LCA1NTI6IDEyNzQ5MCwgNTU1OiAxMjc1MzksIDU1NDogMTI3NTQxLCA1MzM6IDEyNzU0MiwgNTM0OiAxMjc1MTQsIDUzNTogMTI3NTQzLCA1MzY6IDEyNzU0NCwgNTUxOiAxMjc1NDUsIDU1NjogMTI3NTM1LCA1NTc6IDEyNzU0NiwgNzg5OiAxMjk1MywgNzgxOiAxMjk1MSwgNTUwOiAxMjc1NjgsIDgyMDogMTI4MTYyLCA3ODU6IDEyODE2MywgODE3OiAxMjgxNjYsIDgxNjogMTI4MTY4LCA4MTQ6IDEwMDI0LCA1MTc6IDEwMDM2LCA1MTg6IDEwMDM1LCA1Mzc6IDk4OTgsIDUzODogMTI4MzA5LCA1Mzk6IDEyODMwNywgODE1OiAxMTA4OCwgODA1OiAxMjgyNzYsIDU4ODogMTI4Mjg1LCA1NTg6IDEyODA3MCwgNTU5OiAxMjgwNzEsIDU2MDogMTI4MDcyLCA1NjE6IDEyODA3MywgMTA1NDogMTI4MDc1LCAxMDU1OiAxMjgwNzksIDEwNTY6IDEyODA3NiwgMTA1NzogMTI4MDc4LCAxMDU4OiAxMjgwODAgfTsKICBjb25zdCBlbW9qaUNvZGVUb1V0ZjggPSBmdW5jdGlvbiAoY29kZSkgewogICAgLy8g5oiR5Lus5bCGIHV0Zjgg57yW56CB6L2s5o2i5oiQ56CB5L2N54K577yM5bm25YeP5Y67IDB4ZTAwMCDlkI7mn6XooagKICAgIGNvbnN0IHNvZnRiYW5rRW1vamlTdHJpbmcgPSBkZWNvZGVVUklDb21wb25lbnQoY29kZS5yZXBsYWNlKC8oLi4pL2csICclJDEnKSk7CiAgICBjb25zdCB1bmljb2RlQ29kZVBvaW50cyA9IHNvZnRiYW5rRW1vamlMb29rdXBUYWJsZVtzb2Z0YmFua0Vtb2ppU3RyaW5nLmNvZGVQb2ludEF0KDApIC0gMHhlMDAwXTsKICAgIGNvbnN0IGNvZGVQb2ludHNBcnJheSA9IHR5cGVvZiB1bmljb2RlQ29kZVBvaW50cyA9PT0gJ251bWJlcicgPyBbdW5pY29kZUNvZGVQb2ludHNdIDogdW5pY29kZUNvZGVQb2ludHM7CiAgICBjb25zdCB1bmljb2RlVGV4dCA9IFN0cmluZy5mcm9tQ29kZVBvaW50KC4uLmNvZGVQb2ludHNBcnJheSk7CiAgICByZXR1cm4gdW5pY29kZVRleHQ7CiAgfTsKCiAgY29udGVudC51c2VUZXh0RW1vamkgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmZWVkX3VuaWNvZGVfZW1vamknLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udXNlVGV4dEVtb2ppLAogICAgYWluaXQoKSB7CiAgICAgIGNvbnN0IHVzZVRleHRFbW9qaSA9IGZ1bmN0aW9uIHVzZVRleHRFbW9qaSgpIHsKICAgICAgICBjb25zdCBlbW9qaSA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3NyYyo9Ii8vaW1nLnQuc2luYWpzLmNuL3Q0L2FwcHN0eWxlL2V4cHJlc3Npb24vZW1pbWFnZS9lIl0nKSk7CiAgICAgICAgZW1vamkuZm9yRWFjaChpbWcgPT4gewogICAgICAgICAgY29uc3QgY29kZSA9IGltZy5nZXRBdHRyaWJ1dGUoJ3NyYycpLm1hdGNoKC8oZS4uLi4uKVwucG5nLylbMV07CiAgICAgICAgICBjb25zdCB0ZXh0ID0gZW1vamlDb2RlVG9VdGY4KGNvZGUpOwogICAgICAgICAgY29uc3QgZW1vamlDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICBlbW9qaUNvbnRhaW5lci5jbGFzc05hbWUgPSAneWF3Zi1lbW9qaSc7CiAgICAgICAgICBlbW9qaUNvbnRhaW5lci50ZXh0Q29udGVudCA9IHRleHQ7CiAgICAgICAgICBpbWcucmVwbGFjZVdpdGgoZW1vamlDb250YWluZXIpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBvYnNlcnZlci5kb20uYWRkKHVzZVRleHRFbW9qaSk7CiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIHNob3dWb3RlUmVzdWx0OiB7CiAgICAgIGNuOiAn5pyq5Y+C5LiO55qE5oqV56Wo5pi+56S65b6X56Wo5pWwe3tpfX0nLAogICAgICB0dzogJ+acquWPg+iIh+eahOaKleelqOWxleekuuW+l+elqOaVuHt7aX19JywKICAgICAgZW46ICdTaG93IHZvdGluZyByZXN1bHRzIGluIHdpdGhvdXQgdm90aW5nIG5lZWRlZCB7e2l9fScsCiAgICB9LAogICAgc2hvd1ZvdGVSZXN1bHREZXRhaWw6IHsKICAgICAgY246ICfnlLHkuo7lvq7ljZrmipXnpajkvJroh6rliqjngrnotZ7lr7nlupTlvq7ljZrvvIzlvIDlkK/or6Xlip/og73lkI7vvIzmianlsZXkvJrlnKjmgqjmsqHmnInmiYvliqjngrnotZ7liY3pmLvmraLmgqjlj4LkuI7mipXnpajjgILml6DorrrmmK/lkKblvIDlkK/mnKzlip/og73vvIzlvq7ljZrmipXnpajpg73kvJrlr7zoh7Tmgqjoh6rliqjngrnotZ7or6Xlvq7ljZrjgIInLAogICAgICB0dzogJ+eUseaWvOW+ruWNmuaKleelqOacg+iHquWLlem7nui0iuWwjeaHieW+ruWNmu+8jOmWi+WVn+ipsuWKn+iDveW+jO+8jOaTtOWFheWll+S7tuacg+WcqOaCqOaykuacieaJi+WLlem7nui0iuWJjemYu+atouaCqOWPg+iIh+aKleelqOOAgueEoeirluaYr+WQpumWi+WVn+acrOWKn+iDve+8jOW+ruWNmuaKleelqOmDveacg+WwjuiHtOaCqOiHquWLlem7nui0iuipsuW+ruWNmuOAgicsCiAgICAgIGVuOiAnVm90aW5nIHdpbGwgYXV0b21hdGljYWxseSBtYXJrIHRoZSBmZWVkIGxpa2VkLiBFeHRlbnNpb24gd2lsbCBibG9jayB5b3VyIHZvdGluZyB3aGVuIHlvdSB2b3RlIHdpdGhvdXQgbWFyayB0aGUgZmVlZCBsaWtlZCBtYW51YWxseS4gVm90aW5nIHdpbGwgYXV0b21hdGljYWxseSBsaWtlIHRoZSBmZWVkIHJlZ2FyZGxlc3Mgd2hldGhlciB0aGlzIG9wdGlvbiBpcyBlbmFibGVkIG9yIG5vdC4nLAogICAgfSwKICAgIHZvdGVUaXRsZTogewogICAgICBjbjogJ+WPguS4juaKleelqCcsCiAgICAgIHR3OiAn5Y+D6IiH5oqV56WoJywKICAgICAgZW46ICdWb3RpbmcnLAogICAgfSwKICAgIHZvdGVUZXh0OiB7CiAgICAgIGNuOiAn5aaC6ZyA5Y+C5LiO5oqV56Wo6K+35YWI54K56LWe5b6u5Y2a44CCJywKICAgICAgdHc6ICflpoLpnIDlj4PoiIfmipXnpajoq4vlhYjpu57otIrlvq7ljZrjgIInLAogICAgICBlbjogJ1lvdSBoYXZlIHRvIGxpa2UgdGhlIGZlZWQgZmlyc3QgYmVmb3JlIHZvdGluZy4nLAogICAgfSwKICB9KTsKCiAgY29udGVudC5zaG93Vm90ZVJlc3VsdCA9IHJ1bGUuUnVsZSh7CiAgICB3ZWlib1ZlcnNpb246IFs2LCA3XSwKICAgIGlkOiAnc2hvd192b3RlX3Jlc3VsdCcsCiAgICB2ZXJzaW9uOiA0NiwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2hvd1ZvdGVSZXN1bHQsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ3dhcm4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zaG93Vm90ZVJlc3VsdERldGFpbCB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgY29uc3QgdXBkYXRlVm90ZUJ5TGlrZSA9IGZ1bmN0aW9uIChmZWVkbGlrZSkgewogICAgICAgICAgY29uc3QgbGlrZSA9IGZlZWRsaWtlLnF1ZXJ5U2VsZWN0b3IoJ1thY3Rpb24tdHlwZT0iZmxfbGlrZSJdJyk7CiAgICAgICAgICBjb25zdCBsaWtlZCA9IGxpa2UucXVlcnlTZWxlY3RvcignW25vZGUtdHlwZT0ibGlrZV9zdGF0dXMiXScpLm1hdGNoZXMoJy5VSV9hbmlfcHJhaXNlZCcpOwogICAgICAgICAgY29uc3QgaXRlbXMgPSBmZWVkbGlrZS5xdWVyeVNlbGVjdG9yQWxsKCdbYWN0aW9uLXR5cGU9ImZlZWRfbGlzdF92b3RlIl0sIFthY3Rpb24tdHlwZT0ieWF3Zi1mZWVkX2xpc3Rfdm90ZSJdJyk7CiAgICAgICAgICBBcnJheS5mcm9tKGl0ZW1zKS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBpdGVtLnNldEF0dHJpYnV0ZSgnYWN0aW9uLXR5cGUnLCBsaWtlZCA/ICdmZWVkX2xpc3Rfdm90ZScgOiAneWF3Zi1mZWVkX2xpc3Rfdm90ZScpOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBjb25zdCBzaG93Vm90ZVJlc3VsdCA9IGFzeW5jIGZ1bmN0aW9uICh2b3RlKSB7CiAgICAgICAgICBjb25zdCB2b3RlQnV0dG9ucyA9IEFycmF5LmZyb20odm90ZS5xdWVyeVNlbGVjdG9yQWxsKCdbYWN0aW9uLXR5cGU9ImZlZWRfbGlzdF92b3RlIl0sIFthY3Rpb24tdHlwZT0ieWF3Zi1mZWVkX2xpc3Rfdm90ZSJdJykpOwogICAgICAgICAgaWYgKCF2b3RlQnV0dG9ucy5sZW5ndGgpIHJldHVybjsKICAgICAgICAgIGNvbnN0IHZvdGVJZCA9IG5ldyBVUkxTZWFyY2hQYXJhbXModm90ZUJ1dHRvbnNbMF0uZ2V0QXR0cmlidXRlKCdhY3Rpb24tZGF0YScpKS5nZXQoJ3ZvdGVfaWQnKTsKICAgICAgICAgIGlmICghdm90ZUlkKSByZXR1cm47CiAgICAgICAgICBjb25zdCB2b3RlUmVzdWx0ID0gYXdhaXQgcmVxdWVzdC52b3RlRGV0YWlsKHZvdGVJZCk7CiAgICAgICAgICB2b3RlQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7CiAgICAgICAgICAgIGNvbnN0IGFjdGlvbkRhdGEgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJykpOwogICAgICAgICAgICBjb25zdCBpZCA9IGFjdGlvbkRhdGEuZ2V0KCd2b3RlX2l0ZW1zJyk7CiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB2b3RlUmVzdWx0LnZvdGVfaW5mby5vcHRpb25fbGlzdC5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gaWQpOwogICAgICAgICAgICBidXR0b24uZGF0YXNldC5wYXJ0TnVtID0gaXRlbS5wYXJ0X251bS5yZXBsYWNlKCfnpagnLCAn5Lq6Jyk7CiAgICAgICAgICAgIGJ1dHRvbi5kYXRhc2V0LnBhcnRSYXRpbyA9IGl0ZW0ucGFydF9yYXRpbzsKICAgICAgICAgICAgYnV0dG9uLnN0eWxlLnNldFByb3BlcnR5KCctLXBhcnQtcmF0aW8nLCBpdGVtLnBhcnRfcmF0aW8gLyAxMDApOwogICAgICAgICAgfSk7CiAgICAgICAgICBjb25zdCBmZWVkbGlrZSA9IHZvdGUuY2xvc2VzdCgnLldCX2ZlZWRfZXhwYW5kLCAuV0JfZmVlZF90eXBlJyk7CiAgICAgICAgICB1cGRhdGVWb3RlQnlMaWtlKGZlZWRsaWtlKTsKICAgICAgICB9OwogICAgICAgIGNvbnN0IHdhdGNoTGlrZSA9IGZ1bmN0aW9uICgvKiogQHR5cGUge0hUTUxFbGVtZW50fSAqL3ZvdGUpIHsKICAgICAgICAgIGNvbnN0IGZlZWRsaWtlID0gdm90ZS5jbG9zZXN0KCcuV0JfZmVlZF9leHBhbmQsIC5XQl9mZWVkX3R5cGUnKTsKICAgICAgICAgIGNvbnN0IGxpa2UgPSBmZWVkbGlrZS5xdWVyeVNlbGVjdG9yKCdbYWN0aW9uLXR5cGU9ImZsX2xpa2UiXScpOwogICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7IHVwZGF0ZVZvdGVCeUxpa2UoZmVlZGxpa2UpOyB9KTsKICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUobGlrZSwgeyBzdWJ0cmVlOiB0cnVlLCBhdHRyaWJ1dGVzOiB0cnVlLCBhdHRyaWJ1dGVGaWx0ZXI6IFsnY2xhc3MnXSB9KTsKICAgICAgICAgIHVwZGF0ZVZvdGVCeUxpa2UoZmVlZGxpa2UpOwogICAgICAgIH07CiAgICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiB1cGRhdGVWb3RlUmVzdWx0KCkgewogICAgICAgICAgY29uc3Qgdm90ZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuV0JfY2FyZF92b3RlOm5vdChbeWF3Zi1jYXJkLXZvdGVdKScpOwogICAgICAgICAgaWYgKCF2b3RlTGlzdC5sZW5ndGgpIHJldHVybjsKICAgICAgICAgIEFycmF5LmZyb20odm90ZUxpc3QpLmZvckVhY2godm90ZSA9PiB7CiAgICAgICAgICAgIHZvdGUuc2V0QXR0cmlidXRlKCd5YXdmLWNhcmQtdm90ZScsICd5YXdmLWNhcmQtdm90ZScpOwogICAgICAgICAgICBzaG93Vm90ZVJlc3VsdCh2b3RlKTsKICAgICAgICAgICAgd2F0Y2hMaWtlKHZvdGUpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7CiAgICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHJldHVybjsKICAgICAgICAgIGNvbnN0IHZvdGUgPSB0YXJnZXQuY2xvc2VzdCgnW2FjdGlvbi10eXBlPSJ5YXdmLWZlZWRfbGlzdF92b3RlIl0nKTsKICAgICAgICAgIGlmICghdm90ZSkgcmV0dXJuOwogICAgICAgICAgdWkuYWxlcnQoewogICAgICAgICAgICBpZDogJ3lhd2Ytdm90ZS1ibG9jaycsCiAgICAgICAgICAgIGljb246ICd3YXJuJywKICAgICAgICAgICAgdGl0bGU6IGkxOG4udm90ZVRpdGxlLAogICAgICAgICAgICB0ZXh0OiBpMThuLnZvdGVUZXh0LAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgY3NzLmFwcGVuZChgCi5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX2NvbjEgLml0ZW0geyBwb3NpdGlvbjogcmVsYXRpdmU7IHotaW5kZXg6IDE7IG92ZXJmbG93OiBoaWRkZW47IHRleHQtYWxpZ246IGxlZnQ7IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMSAuaXRlbTo6YWZ0ZXIgeyBjb250ZW50OiBhdHRyKGRhdGEtcGFydC1udW0pIDsgZmxvYXQ6IHJpZ2h0OyB9Ci5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX2NvbjEgLml0ZW06OmJlZm9yZSB7IGNvbnRlbnQ6ICIgIjsgd2lkdGg6IGNhbGModmFyKC0tcGFydC1yYXRpbykgKiAxMDAlKTsgdG9wOiAwOyBsZWZ0OiAwOyBib3R0b206IDA7IG1hcmdpbjogMDsgcG9zaXRpb246IGFic29sdXRlOyB6LWluZGV4OiAtMTsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIC52b3RlX2J0biB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgZm9udC1zaXplOiAxNHB4OyB9Ci5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX2NvbjIgLnZvdGVfYnRuIGEgeyBiYWNrZ3JvdW5kOiBjdXJyZW50Q29sb3I7IGJvcmRlci1yYWRpdXM6IDA7IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMiAuV19mbCAudm90ZV9idG4gYSB7IG1hcmdpbi1yaWdodDogLTJweDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIC5XX2ZyIC52b3RlX2J0biBhIHsgbWFyZ2luLWxlZnQ6IC0ycHg7IH0KLldCX2NhcmRfdm90ZS5XQl9jYXJkX3ZvdGUgLnZvdGVfY29uMiAudm90ZV9idG46OmFmdGVyIHsgY29udGVudDogYXR0cihkYXRhLXBhcnQtbnVtKTsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGJvdHRvbTogMDsgY29sb3I6IHdoaXRlOyBsaW5lLWhlaWdodDogMjRweDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIC5XX2ZsIC52b3RlX2J0bjo6YWZ0ZXIgeyBsZWZ0OiAyNnB4OyByaWdodDogYXV0bzsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIC5XX2ZyIC52b3RlX2J0bjo6YWZ0ZXIgeyBsZWZ0OiBhdXRvOyByaWdodDogMjZweDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24xIC5pdGVtX3J0LlNfdHh0MSAuYmcsCi5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX2NvbjEgLml0ZW06OmJlZm9yZSB7IGJhY2tncm91bmQtY29sb3I6ICM4MDgwODAyMjsgfQpgKTsKICAgICAgICBjb25zdCBzbWFsbEltYWdlID0gZmVlZHMubGF5b3V0LnNtYWxsSW1hZ2U7CiAgICAgICAgaWYgKHNtYWxsSW1hZ2UuaXNFbmFibGVkKCkpIHsKICAgICAgICAgIGNzcy5hcHBlbmQoYAouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIC5XX2ZsIC52b3RlX2J0biBhIHsgbWFyZ2luLXJpZ2h0OiAtMXB4OyB9Ci5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX2NvbjIgLldfZnIgLnZvdGVfYnRuIGEgeyBtYXJnaW4tbGVmdDogLTFweDsgfQouV0JfY2FyZF92b3RlLldCX2NhcmRfdm90ZSAudm90ZV9jb24yIC5XX2ZsIC52b3RlX2J0bjo6YWZ0ZXIgeyBsZWZ0OiAxMHB4OyB9Ci5XQl9jYXJkX3ZvdGUuV0JfY2FyZF92b3RlIC52b3RlX2NvbjIgLldfZnIgLnZvdGVfYnRuOjphZnRlciB7IHJpZ2h0OiAxMHB4OyB9CmApOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCB2b3RlQmxvY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB1aS5hbGVydCh7CiAgICAgICAgICAgIGlkOiAneWF3Zi12b3RlLWJsb2NrJywKICAgICAgICAgICAgaWNvbjogJ3dhcm4nLAogICAgICAgICAgICB0aXRsZTogaTE4bi52b3RlVGl0bGUsCiAgICAgICAgICAgIHRleHQ6IGkxOG4udm90ZVRleHQsCiAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICB1dGlsLmluamVjdChmdW5jdGlvbiAocm9vdEtleSwgdm90ZUJsb2NrKSB7CiAgICAgICAgICBjb25zdCB5YXdmID0gd2luZG93W3Jvb3RLZXldOwogICAgICAgICAgY29uc3QgdnVlU2V0dXAgPSB5YXdmLnZ1ZVNldHVwOwoKICAgICAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgnZmVlZC12b3RlJywgZnVuY3Rpb24gKHZtKSB7CgogICAgICAgICAgICB2bS5zZXRWb3RlID0gKGZ1bmN0aW9uIChzZXRWb3RlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUGFydGVkKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGZlZWREYXRhID0gdGhpcy4kcGFyZW50ICYmIHRoaXMuJHBhcmVudC5kYXRhOwogICAgICAgICAgICAgICAgICBpZiAoZmVlZERhdGEgJiYgIWZlZWREYXRhLmF0dGl0dWRlc19zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICB2b3RlQmxvY2soKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNldFZvdGUoaWQpOwogICAgICAgICAgICAgIH0uYmluZCh2bSk7CiAgICAgICAgICAgIH0odm0uc2V0Vm90ZSkpOwoKICAgICAgICAgICAgdnVlU2V0dXAudHJhbnNmb3JtQ29tcG9uZW50UmVuZGVyKHZtLCBmdW5jdGlvbiAocmVuZGVyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjcmVhdGVFbGVtZW50LCB7IGJ1aWxkZXIgfSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMudm90ZU9iamVjdC5wYXJ0ZWQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGNyZWF0ZUVsZW1lbnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8g5bCG5b2T5YmN55qE5oqV56Wo5YWD57Sg5Lyq6KOF5oiQ5bey5Y+C5Yqg6L+H5oqV56Wo55qE54q25oCBCiAgICAgICAgICAgICAgICBjb25zdCB3cmFwID0gT2JqZWN0LmNyZWF0ZSh0aGlzLCB7CiAgICAgICAgICAgICAgICAgIGdldEFuaVN0eWxlOiB7IHZhbHVlOiB0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnMubWV0aG9kcy5nZXRBbmlTdHlsZSB9LAogICAgICAgICAgICAgICAgICBpc1BhcnRlZDogeyB2YWx1ZTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgICBmaXJzdFBhcnRlZDogeyB2YWx1ZTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgICB2b3RlT2JqZWN0OiB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUodGhpcy52b3RlT2JqZWN0LCB7CiAgICAgICAgICAgICAgICAgICAgICBwYXJ0ZWQ6IHsgdmFsdWU6IDEgfSwKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgd3JhcC5nZXRBbmlTdHlsZSA9IHdyYXAuZ2V0QW5pU3R5bGUuYmluZCh3cmFwKTsKICAgICAgICAgICAgICAgIGNvbnN0IHsgbm9kZVN0cnVjdCwgTm9kZXMsIGdldFJvb3QgfSA9IGJ1aWxkZXIocmVuZGVyLmNhbGwod3JhcCwgY3JlYXRlRWxlbWVudCkpOwogICAgICAgICAgICAgICAgLy8g5Y675o6J5YiG5Lqr5oqV56Wo55qE5oyJ6ZKuCiAgICAgICAgICAgICAgICBjb25zdCB7IHJlbW92ZUNoaWxkLCB2Tm9kZSB9ID0gTm9kZXM7CiAgICAgICAgICAgICAgICBjb25zdCBzaGFyZSA9IG5vZGVTdHJ1Y3QucXVlcnlTZWxlY3RvcihgW2NsYXNzfD0iJHt0aGlzLiRzdHlsZS5idG5CfSJdYCk7CiAgICAgICAgICAgICAgICByZW1vdmVDaGlsZChzaGFyZS5wYXJlbnROb2RlLCBzaGFyZSk7CiAgICAgICAgICAgICAgICAvLyDkv67mraPmipXnpajmjInpkq7nmoTkuovku7YKICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ3gtd29vLXBhbmVsJyk7CiAgICAgICAgICAgICAgICBpZiAoYnV0dG9ucy5sZW5ndGggPT09IHRoaXMudm90ZU9iamVjdC52b3RlX2xpc3QubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oYnV0dG9ucykuZm9yRWFjaCgoYnV0dG9uLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbklkID0gdGhpcy52b3RlT2JqZWN0LnZvdGVfbGlzdFtpbmRleF0uaWQ7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uVk5vZGUgPSB2Tm9kZShidXR0b24pOwogICAgICAgICAgICAgICAgICAgIGJ1dHRvblZOb2RlLmRhdGEubmF0aXZlT24uY2xpY2sgPSBidXR0b25WTm9kZS5kYXRhLm9uLmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgdGhpcy52b3RlKG9wdGlvbklkKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBnZXRSb290KCk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwgeyByYXc6IHRydWUgfSk7CgogICAgICAgICAgICB2bS4kZm9yY2VVcGRhdGUoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sIHV0aWwuaW5qZWN0LnJvb3RLZXksIHZvdGVCbG9jayk7CgogICAgICB9CiAgICB9LAogIH0pOwoKICBpMThuLmN1c3RvbWl6ZVNvdXJjZSA9IHsKICAgIGNuOiAn6Ieq5a6a5LmJ5p2l5rqQ5b6u5Y2a5LuF5pi+56S64oCc5p2l6Ieq5b6u5Y2aIHdlaWJvLmNvbeKAnScsCiAgICB0dzogJ+iHquioguS+hua6kOW+ruWNmuWDhemhr+ekuuOAjOS+huiHquW+ruWNmiB3ZWliby5jb23jgI0nLAogICAgZW46ICdXZWlibyB3aXRoIGN1c3RvbWl6ZSBzb3VyY2Ugc2hvdyAiY29tZSBmcm9tIOW+ruWNmiB3ZWliby5jb20iIG9ubHknLAogIH07CgogIGNvbnRlbnQuY3VzdG9taXplU291cmNlID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmVlZF9ub19jdXN0b21fc291cmNlJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmN1c3RvbWl6ZVNvdXJjZSwKICAgIGFpbml0KCkgewogICAgICBjb25zdCBjdXN0b21pemVTb3VyY2UgPSBmdW5jdGlvbiBjdXN0b21pemVTb3VyY2UoKSB7CiAgICAgICAgY29uc3Qgc291cmNlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLldCX2Zyb206bm90KFt5YXdmLWN1c3RvbS1zb3VyY2VdKScpKTsKICAgICAgICBjb25zdCBpdGVtcyA9IFtdOwogICAgICAgIHNvdXJjZXMuZm9yRWFjaChmcm9tID0+IHsKICAgICAgICAgIGZyb20uc2V0QXR0cmlidXRlKCd5YXdmLWN1c3RvbS1zb3VyY2UnLCAneWF3Zi1jdXN0b20tc291cmNlJyk7CiAgICAgICAgICBpZiAoZnJvbS5tYXRjaGVzKCcubGlzdF9saVttaWRdIConKSkgcmV0dXJuOwogICAgICAgICAgaWYgKC/mnKrpgJrov4flrqHmoLjlupTnlKgvLnRlc3QoZnJvbS50ZXh0Q29udGVudCkpIHJldHVybjsKICAgICAgICAgIC8vIOiHquWumuS5ieW+ruWNmuadpea6kOWPr+S7peS4jeaYvuekuuadpea6kAogICAgICAgICAgaWYgKGZyb20ucXVlcnlTZWxlY3RvcignW25vZGUtdHlwZT0iZmVlZF9saXN0X2l0ZW1fZGF0ZSJdOm9ubHktY2hpbGQnKSkgewogICAgICAgICAgICBpdGVtcy5wdXNoKGZyb20uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgLy8g5Lmf5Y+v5Lul5pi+56S66Ieq5a6a5LmJ55qE5p2l5rqQCiAgICAgICAgICBjb25zdCBpdGVtID0gZnJvbS5xdWVyeVNlbGVjdG9yKCdhW2hyZWYqPSJ2aXAud2VpYm8uY29tIl0nKTsKICAgICAgICAgIGlmIChpdGVtKSBpdGVtcy5wdXNoKGl0ZW0pOwogICAgICAgIH0pOwogICAgICAgIGl0ZW1zLmZvckVhY2goZnJvbSA9PiB7CiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGEgcmVsPSJub2ZvbGxvdyIgaHJlZj0iLy93ZWliby5jb20vIiB0YXJnZXQ9Il9ibGFuayIgYWN0aW9uLXR5cGU9ImFwcF9zb3VyY2UiIGNsYXNzPSJTX3R4dDIiPuW+ruWNmiB3ZWliby5jb208L2E+JzsKICAgICAgICAgIGZyb20ucmVwbGFjZVdpdGgoY29udGFpbmVyLmZpcnN0Q2hpbGQpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBvYnNlcnZlci5kb20uYWRkKGN1c3RvbWl6ZVNvdXJjZSk7CiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIHZpZXdFZGl0SW5mbzogewogICAgICBjbjogJ+eCueWHu+KAnOW3sue8lui+keKAneWtl+agt+afpeeci+e8lui+keWOhuWPsicsCiAgICAgIHR3OiAn6bue5pOK44CM5bey57eo6Lyv44CN5a2X5qij5p+l6Zax57eo6Lyv5q235Y+yJywKICAgICAgZW46ICdWaWV3IGVkaXQgaGlzdG9yeSBieSBjbGlja2luZyAiRWRpdGVkIicsCiAgICB9LAogICAgdmlld0VkaXRJbmZvRGV0YWlsOiB7CiAgICAgIGNuOiAn5p+l55yL57yW6L6R5Y6G5Y+y55qE5by55qGG5ZKM5Y6f54mI5LiN5ZCM77yM54K55Ye75b6u5Y2a5Y+z5LiK6KeS6I+c5Y2V55yL5Yiw55qE5b6u5Y2a57yW6L6R6K6w5b2V5LuN5piv5Y6f54mI44CC54K55bem5L6n5YiX6KGo5Y+v5Lul5p+l55yL5oyH5a6a55qE54mI5pys77yM54K55Y+z5L6n5YiX6KGo5Y+v5Lul5ZKM5b2T5YmN5pi+56S655qE54mI5pys5a+55q+U44CCJywKICAgIH0sCiAgICB2aWV3RWRpdEluZm9FZGl0ZWQ6IHsKICAgICAgY246ICflt7LnvJbovpEnLAogICAgICB0dzogJ+W3sue3qOi8rycsCiAgICAgIGVuOiAnRWRpdGVkJywKICAgIH0sCiAgICB2aWV3RWRpdFRpdGxlOiB7CiAgICAgIGNuOiAn5b6u5Y2a57yW6L6R6K6w5b2VJywKICAgICAgdHc6ICflvq7ljZrnt6jovK/oqJjpjIQnLAogICAgICBlbjogJ0VkaXQgSGlzdG9yeScsCiAgICB9LAogICAgc2VsZWN0RmVlZFZlcnNpb246IHsKICAgICAgY246ICfpgInmi6nniYjmnKzku6Xmn6XnnIsnLAogICAgICB0dzogJ+mAieaLqeeJiOacrOS7peafpemYhScsCiAgICAgIGVuOiAnU2VsZWN0IFZlcnNpb24nLAogICAgfSwKICAgIGRpZmZGZWVkVmVyc2lvbjogewogICAgICBjbjogJ+S4jumAieWumueJiOacrOavlOWvuScsCiAgICAgIHR3OiAn6IiH6YG45a6a54mI5pys5q+U5bCNJywKICAgICAgZW46ICdDb21wYXJlIFdpdGgnLAogICAgfSwKICAgIHZpZXdFZGl0TG9hZGluZzogewogICAgICBjbjogJ+ato+WcqOWKoOi9vee8lui+keiusOW9leKApuKApicsCiAgICAgIHR3OiAn5q2j5Zyo6LyJ5YWl57eo6Lyv6KiY6YyE4oCm4oCmJywKICAgICAgZW46ICdMb2FkaW5nIGVkaXQgaGlzdG9yeS4uLicsCiAgICB9LAogIH0pOwoKICBjb250ZW50LnZpZXdFZGl0SW5mbyA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ3ZpZXdfZWRpdF9pbmZvJywKICAgIHZlcnNpb246IDQ0LAogICAgcGFyZW50OiBjb250ZW50LmNvbnRlbnQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi52aWV3RWRpdEluZm8sCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2luZm8nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi52aWV3RWRpdEluZm9EZXRhaWwgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgdGltZUxvY2FsZSA9IGxheW91dC5kZXRhaWxzLnRpbWV6b25lLmlzRW5hYmxlZCgpID8gJ2N1cnJlbnQnIDogJ2NzdCc7CiAgICAgIC8qKgogICAgICAgKiBAcGFyYW0ge3N0cmluZ30gc291cmNlU3RyCiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRTdHIKICAgICAgICovCiAgICAgIGNvbnN0IGNvbXBhcmUgPSBmdW5jdGlvbiAoc291cmNlU3RyLCB0YXJnZXRTdHIpIHsKICAgICAgICBjb25zdCBtYXRjaFJlZyA9IC9cbnxcWy57MSw4fVxdfCMoPz0uezEsMzF9IylbXiNcbl0qI3xodHRwOlxTK3xbYS16QS1aLV0rfFxzfFxTL3VnOwogICAgICAgIGNvbnN0IHNvdXJjZSA9IHNvdXJjZVN0ci50cmltKCkubWF0Y2gobWF0Y2hSZWcpOwogICAgICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldFN0ci50cmltKCkubWF0Y2gobWF0Y2hSZWcpOwogICAgICAgIGNvbnN0IHNsID0gc291cmNlLmxlbmd0aCwgdGwgPSB0YXJnZXQubGVuZ3RoOwogICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyW11bXX0gKi8KICAgICAgICBjb25zdCBzaXplID0gWy4uLkFycmF5KHNsKV0ubWFwKF8gPT4gQXJyYXkodGwpKTsKICAgICAgICAvKiogQHR5cGUge1tudW1iZXIsIG51bWJlcl1bXVtdfSAqLwogICAgICAgIGNvbnN0IGZyb20gPSBbLi4uQXJyYXkoc2wpXS5tYXAoXyA9PiBBcnJheSh0bCkpOwogICAgICAgIGZvciAobGV0IHNpID0gMDsgc2kgPCBzbDsgc2krKykgewogICAgICAgICAgZm9yIChsZXQgdGkgPSAwOyB0aSA8IHRsOyB0aSsrKSB7CiAgICAgICAgICAgIGlmIChzb3VyY2Vbc2ldID09PSB0YXJnZXRbdGldKSB7CiAgICAgICAgICAgICAgY29uc3QgZCA9IHNpICYmIHRpID8gc2l6ZVtzaSAtIDFdW3RpIC0gMV0gOiAwOwogICAgICAgICAgICAgIGZyb21bc2ldW3RpXSA9IFtzaSAtIDEsIHRpIC0gMV07CiAgICAgICAgICAgICAgc2l6ZVtzaV1bdGldID0gZCArIHNvdXJjZVtzaV0ubGVuZ3RoOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbnN0IHNkID0gc2kgPyBzaXplW3NpIC0gMV1bdGldIDogMDsKICAgICAgICAgICAgICBjb25zdCB0ZCA9IHRpID8gc2l6ZVtzaV1bdGkgLSAxXSA6IDA7CiAgICAgICAgICAgICAgaWYgKHNkID4gdGQpIHsKICAgICAgICAgICAgICAgIGZyb21bc2ldW3RpXSA9IFtzaSAtIDEsIHRpXTsKICAgICAgICAgICAgICAgIHNpemVbc2ldW3RpXSA9IHNkOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmcm9tW3NpXVt0aV0gPSBbc2ksIHRpIC0gMV07CiAgICAgICAgICAgICAgICBzaXplW3NpXVt0aV0gPSB0ZDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqIEB0eXBlIHt7IHR5cGU6ICdzYW1lJ3wnZGVsZXRlJ3wnaW5zZXJ0JywgY2hhcnM6IHN0cmluZyB9W119ICovCiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107CiAgICAgICAgZm9yIChsZXQgc2kgPSBzbCAtIDEsIHRpID0gdGwgLSAxOyBzaSA+PSAwIHx8IHRpID49IDA7KSB7CiAgICAgICAgICBjb25zdCBbZnMsIGZ0XSA9IHNpID49IDAgJiYgdGkgPj0gMCA/IGZyb21bc2ldW3RpXSA6IFstMSwgLTFdOwogICAgICAgICAgaWYgKGZzICE9PSBzaSAmJiBmdCAhPT0gdGkpIHsKICAgICAgICAgICAgb3V0cHV0LnB1c2goeyB0eXBlOiAnc2FtZScsIGNoYXJzOiBzb3VyY2Uuc2xpY2UoZnMgKyAxLCBzaSArIDEpIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChmcyAhPT0gc2kpIHsKICAgICAgICAgICAgb3V0cHV0LnB1c2goeyB0eXBlOiAnZGVsZXRlJywgY2hhcnM6IHNvdXJjZS5zbGljZShmcyArIDEsIHNpICsgMSkgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGZ0ICE9PSB0aSkgewogICAgICAgICAgICBvdXRwdXQucHVzaCh7IHR5cGU6ICdpbnNlcnQnLCBjaGFyczogdGFyZ2V0LnNsaWNlKGZ0ICsgMSwgdGkgKyAxKSB9KTsKICAgICAgICAgIH0KICAgICAgICAgIFtzaSwgdGldID0gW2ZzLCBmdF07CiAgICAgICAgfQogICAgICAgIC8qKiBAdHlwZSB7eyB0eXBlOiAnc2FtZSd8J2RlbGV0ZSd8J2luc2VydCcsIHN0cjogc3RyaW5nIH19ICovCiAgICAgICAgbGV0IGxhc3QgPSB7IHR5cGU6ICdzYW1lJywgc3RyOiAnJyB9OwogICAgICAgIGNvbnN0IGNvbm5lY3RlZCA9IFtsYXN0LCAuLi5vdXRwdXQucmV2ZXJzZSgpLm1hcCgoeyB0eXBlLCBjaGFycyB9KSA9PiB7CiAgICAgICAgICBjb25zdCBzdHIgPSBjaGFycy5qb2luKCcnKTsKICAgICAgICAgIGlmICh0eXBlID09PSBsYXN0LnR5cGUpIHsKICAgICAgICAgICAgbGFzdC5zdHIgKz0gc3RyOwogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGxhc3QgPSB7IHR5cGUsIHN0ciB9OwogICAgICAgICAgcmV0dXJuIGxhc3Q7CiAgICAgICAgfSldLmZpbHRlcihjb250ZW50ID0+IGNvbnRlbnQgJiYgY29udGVudC5zdHIpOwogICAgICAgIC8qKiBAdHlwZSB7eyBkZWxldGU6IHsgdHlwZTogJ2RlbGV0ZScsIHN0cjogc3RyaW5nIH0sIGluc2VydDogeyB0eXBlOiAnaW5zZXJ0Jywgc3RyOiBzdHJpbmcgfSB9fSAqLwogICAgICAgIGxldCBwcmV2UGFydCA9IHsgZGVsZXRlOiBudWxsLCBpbnNlcnQ6IG51bGwsIHNhbWU6IG51bGwgfTsKICAgICAgICBjb25zdCByZXN1bHQgPSBjb25uZWN0ZWQuZmlsdGVyKHBhcnQgPT4gewogICAgICAgICAgY29uc3QgeyBzdHIsIHR5cGUgfSA9IHBhcnQ7CiAgICAgICAgICBpZiAoWydkZWxldGUnLCAnaW5zZXJ0J10uaW5jbHVkZXModHlwZSkpIHsKICAgICAgICAgICAgaWYgKHByZXZQYXJ0W3R5cGVdKSB7CiAgICAgICAgICAgICAgcHJldlBhcnRbdHlwZV0uc3RyICs9IHN0cjsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcHJldlBhcnRbdHlwZV0gPSBwYXJ0OwogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoc3RyLmxlbmd0aCA8IDQgJiYgcHJldlBhcnQuZGVsZXRlICYmIHByZXZQYXJ0Lmluc2VydCkgewogICAgICAgICAgICAgIHByZXZQYXJ0LmRlbGV0ZS5zdHIgKz0gc3RyOwogICAgICAgICAgICAgIHByZXZQYXJ0Lmluc2VydC5zdHIgKz0gc3RyOwogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBwcmV2UGFydC5kZWxldGUgPSBwcmV2UGFydC5pbnNlcnQgPSBudWxsOwogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfTsKICAgICAgY29uc3QgcmVuZGVyVGV4dERpZmYgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBzb3VyY2UsIHRhcmdldCkgewogICAgICAgIGNvbnN0IGRpZmYgPSBjb21wYXJlKHNvdXJjZSwgdGFyZ2V0KTsKICAgICAgICBjb25zdCBmcmFnZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgICAgZGlmZi5mb3JFYWNoKGZ1bmN0aW9uICh7IHR5cGUsIHN0ciB9KSB7CiAgICAgICAgICBzdHIuc3BsaXQoLyhcbikvZykuZm9yRWFjaChwYXJ0ID0+IHsKICAgICAgICAgICAgLyoqIEB0eXBlIHsnZGVsJ3wnaW5zJ3wnc3Bhbid9ICovCiAgICAgICAgICAgIGNvbnN0IHRhZ05hbWUgPSB7IGRlbGV0ZTogJ2RlbCcsIGluc2VydDogJ2lucycsIHNhbWU6ICdzcGFuJyB9W3R5cGVdOwogICAgICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTsKICAgICAgICAgICAgc3Bhbi5jbGFzc0xpc3QuYWRkKCd5YXdmLWRpZmYtJyArIHR5cGUpOwogICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gcGFydDsKICAgICAgICAgICAgZnJhZ2VtZW50LmFwcGVuZENoaWxkKHNwYW4pOwogICAgICAgICAgICBpZiAocGFydCA9PT0gJ1xuJykgewogICAgICAgICAgICAgIGNvbnN0IGJyZWFrVG9rZW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpOwogICAgICAgICAgICAgIGJyZWFrVG9rZW4uY2xhc3NMaXN0LmFkZCgneWF3Zi1kaWZmLScgKyB0eXBlKTsKICAgICAgICAgICAgICBjb25zdCBicmVha0NoYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgYnJlYWtDaGFyLmNsYXNzTGlzdC5hZGQoJ1NfdHh0MicsICd5YXdmLWRpZmYtbGluZS1icmVhaycpOwogICAgICAgICAgICAgIGJyZWFrVG9rZW4uYXBwZW5kQ2hpbGQoYnJlYWtDaGFyKTsKICAgICAgICAgICAgICBmcmFnZW1lbnQuaW5zZXJ0QmVmb3JlKGJyZWFrVG9rZW4sIHNwYW4pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdlbWVudCk7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0ZXh0CiAgICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNvdXJjZQogICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQKICAgICAgICovCiAgICAgIGNvbnN0IHJlbmRlckltYWdlRGlmZiA9IGZ1bmN0aW9uIChyZWYsIHNvdXJjZSwgdGFyZ2V0KSB7CiAgICAgICAgd2hpbGUgKHJlZi5uZXh0U2libGluZykgcmVmLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocmVmLm5leHRTaWJsaW5nKTsKICAgICAgICAvKiogQHJldHVybnMge3N0cmluZ30gKi8KICAgICAgICBjb25zdCBnZXRJZCA9IGxpID0+IGxpLmdldEF0dHJpYnV0ZSgnYWN0aW9uLWRhdGEnKTsKICAgICAgICAvKiogQHJldHVybnMge1tIVE1MRWxlbWVudCwgc3RyaW5nLCBIVE1MRWxlbWVudFtdLCBTZXQ8c3RyaW5nPl19ICovCiAgICAgICAgY29uc3QgZ2V0SW1hZ2VzID0gZnVuY3Rpb24gKGRvbSkgewogICAgICAgICAgY29uc3Qgd3JhcCA9IGRvbS5xdWVyeVNlbGVjdG9yKCcuV0JfbWVkaWFfd3JhcCcpOwogICAgICAgICAgaWYgKCF3cmFwKSByZXR1cm4gW251bGwsICcnLCBbXSwgbmV3IFNldCgpXTsKICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHdyYXAuY2xvbmVOb2RlKHRydWUpOwogICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ1NfbGluZTEnKTsKICAgICAgICAgIGNvbnN0IGh0bWwgPSBjb250YWluZXIuaW5uZXJIVE1MOwogICAgICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdsaScpKTsKICAgICAgICAgIGNvbnN0IGFjdGlvbkRhdGFzID0gbmV3IFNldChpdGVtcy5tYXAoZ2V0SWQpKTsKICAgICAgICAgIHJldHVybiBbY29udGFpbmVyLCBodG1sLCBpdGVtcywgYWN0aW9uRGF0YXNdOwogICAgICAgIH07CiAgICAgICAgY29uc3QgcmVuZGVySW1hZ2VzID0gZnVuY3Rpb24gKGltYWdlcykgewogICAgICAgICAgcmVmLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoaW1hZ2VzKTsKICAgICAgICB9OwogICAgICAgIGNvbnN0IGxpbmtJbWFnZSA9IGZ1bmN0aW9uIChjb250YWluZXIpIHsKICAgICAgICAgIGlmICghY29udGFpbmVyKSByZXR1cm47CiAgICAgICAgICBjb25zdCBpbWdzID0gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnaW1nJykpOwogICAgICAgICAgaW1ncy5mb3JFYWNoKGltZyA9PiB7CiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGNvbnN0IHNyYyA9IG5ldyBVUkwoaW1nLnNyYykuaHJlZjsKICAgICAgICAgICAgbGluay5ocmVmID0gWydodHRwczovLycsIG5ldyBVUkwoc3JjKS5ob3N0LCAnL2xhcmdlJywgc3JjLm1hdGNoKC9cLyhbXi9dKikkL2cpXS5qb2luKCcnKTsKICAgICAgICAgICAgbGluay50YXJnZXQgPSAnX2JsYW5rJzsKICAgICAgICAgICAgbGluay5jbGFzc05hbWUgPSAneWF3Zi1kaWZmLWltYWdlLWxpbmsnOwogICAgICAgICAgICBsaW5rLmFwcGVuZENoaWxkKGltZy5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChsaW5rLCBpbWcpKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgY29uc3QgW3NvdXJjZUltZywgc291cmNlSHRtbCwgc291cmNlSXRlbXMsIHNvdXJjZUFjdGlvbkRhdGFzXSA9IGdldEltYWdlcyhzb3VyY2UpOwogICAgICAgIGNvbnN0IFt0YXJnZXRJbWcsIHRhcmdldEh0bWwsIHRhcmdldEl0ZW1zLCB0YXJnZXRBY3Rpb25EYXRhc10gPSBnZXRJbWFnZXModGFyZ2V0KTsKICAgICAgICBsaW5rSW1hZ2Uoc291cmNlSW1nKTsKICAgICAgICBsaW5rSW1hZ2UodGFyZ2V0SW1nKTsKICAgICAgICAvLyDlpoLmnpzljovmoLnmsqHmnInlm77niYfvvIzlsLHku4DkuYjpg73kuI3nlKjlgZoKICAgICAgICBpZiAoIXNvdXJjZUltZyAmJiAhdGFyZ2V0SW1nKSByZXR1cm47CiAgICAgICAgLy8g5aaC5p6c5Zu+54mH5rKh5Y+Y77yM6YKj5LmI5bGV56S65LiA5Lu95bCx6KGM5LqGCiAgICAgICAgaWYgKHNvdXJjZUh0bWwgPT09IHRhcmdldEh0bWwpIHsKICAgICAgICAgIHJlbmRlckltYWdlcyhzb3VyY2VJbWcpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvLyDmoIforrDkv67mlLkKICAgICAgICBjb25zdCBzb3VyY2VGaWx0ZXJlZEl0ZW1zID0gc291cmNlSXRlbXMubWFwKGl0ZW0gPT4gewogICAgICAgICAgaWYgKHRhcmdldEFjdGlvbkRhdGFzLmhhcyhnZXRJZChpdGVtKSkpIHJldHVybiBpdGVtOwogICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCd5YXdmLWltZy1kZWxldGUnKTsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0pLmZpbHRlcihpdGVtID0+IGl0ZW0pOwogICAgICAgIGNvbnN0IHRhcmdldEZpbHRlcmVkSXRlbXMgPSB0YXJnZXRJdGVtcy5tYXAoaXRlbSA9PiB7CiAgICAgICAgICBpZiAoc291cmNlQWN0aW9uRGF0YXMuaGFzKGdldElkKGl0ZW0pKSkgcmV0dXJuIGl0ZW07CiAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ3lhd2YtaW1nLWluc2VydCcpOwogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfSkuZmlsdGVyKGl0ZW0gPT4gaXRlbSk7CiAgICAgICAgc291cmNlRmlsdGVyZWRJdGVtcy5mb3JFYWNoKChzb3VyY2VJdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgY29uc3QgdGFyZ2V0SXRlbSA9IHRhcmdldEZpbHRlcmVkSXRlbXNbaW5kZXhdOwogICAgICAgICAgaWYgKGdldElkKHNvdXJjZUl0ZW0pID09PSBnZXRJZCh0YXJnZXRJdGVtKSkgcmV0dXJuOwogICAgICAgICAgc291cmNlSXRlbS5jbGFzc0xpc3QuYWRkKCd5YXdmLWltZy1yZW9yZGVyJyk7CiAgICAgICAgICB0YXJnZXRJdGVtLmNsYXNzTGlzdC5hZGQoJ3lhd2YtaW1nLXJlb3JkZXInKTsKICAgICAgICB9KTsKICAgICAgICAvLyDmnIDlkI7miorku5bku6zmmL7npLrlh7rmnaUKICAgICAgICBpZiAoc291cmNlSW1nKSByZW5kZXJJbWFnZXMoc291cmNlSW1nKTsKICAgICAgICBpZiAodGFyZ2V0SW1nKSByZW5kZXJJbWFnZXModGFyZ2V0SW1nKTsKICAgICAgfTsKICAgICAgY29uc3QgcmVuZGVyRGlmZiA9IGZ1bmN0aW9uIChjb250YWluZXIsIHZlcnNpb24xLCB2ZXJzaW9uMikgewogICAgICAgIGNvbnN0IFtzb3VyY2UsIHRhcmdldF0gPSBbdmVyc2lvbjEsIHZlcnNpb24yXS5zb3J0KCh2MSwgdjIpID0+IHYxLmluZGV4IC0gdjIuaW5kZXgpOwogICAgICAgIGNvbnN0IHRleHQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLldCX3RleHQnKTsKICAgICAgICByZW5kZXJUZXh0RGlmZih0ZXh0LCBzb3VyY2UudGV4dCwgdGFyZ2V0LnRleHQpOwogICAgICAgIHJlbmRlckltYWdlRGlmZih0ZXh0LCBzb3VyY2UuZG9tLCB0YXJnZXQuZG9tKTsKICAgICAgfTsKICAgICAgY29uc3Qgc2hvd0NvbnRlbnQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCB2ZXJzaW9uLCBkaWZmKSB7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOwogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh2ZXJzaW9uLmRvbS5jbG9uZU5vZGUodHJ1ZSkpOwogICAgICAgIGlmICghZGlmZiB8fCBkaWZmID09PSB2ZXJzaW9uKSByZXR1cm47CiAgICAgICAgcmVuZGVyRGlmZihjb250YWluZXIsIHZlcnNpb24sIGRpZmYpOwogICAgICB9OwogICAgICBjb25zdCBkaWFsb2dSZW5kZXIgPSBhc3luYyBmdW5jdGlvbiAoY29udGFpbmVyLCBmZWVkSGlzdG9yeVByb21pc2UpIHsKICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1mZWVkLWVkaXQtZGlhbG9nLWNvbnRlbnQnKTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9Inlhd2YtZmVlZC1lZGl0LXNlbGVjdCBTX2JnMSBTX2xpbmUxIj48ZGl2IGNsYXNzPSJ5YXdmLWZlZWQtZWRpdC1zZWxlY3QtdGl0bGUgU19saW5lMSI+PC9kaXY+PG9sIGNsYXNzPSJ5YXdmLWZlZWQtZWRpdC1saXN0IHlhd2YtZmVlZC1lZGl0LXNlbGVjdC1saXN0IFNfbGluZTEiPjwvb2w+PC9kaXY+PGRpdiBjbGFzcz0ieWF3Zi1mZWVkLWVkaXQtdmlldyI+PGRpdiBjbGFzcz0ieWF3Zi1mZWVkLWVkaXQtdmlldy1jb250ZW50Ij48ZGl2IGNsYXNzPSJ5YXdmLWZlZWQtZWRpdC1sb2FkaW5nIj48ZGl2IGNsYXNzPSJXQl9lbXB0eSI+PGRpdiBjbGFzcz0iV0JfaW5uZXJ3cmFwIj48ZGl2IGNsYXNzPSJlbXB0eV9jb24gY2xlYXJmaXgiPjxwIGNsYXNzPSJpY29uX2JlZCI+PGkgY2xhc3M9IldfaWNvbiBpY29uX3dhcm5CIj48L2k+PC9wPjxwIGNsYXNzPSJ0ZXh0Ij48L3A+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0ieWF3Zi1mZWVkLWVkaXQtZGlmZiBTX2JnMSBTX2xpbmUxIj48ZGl2IGNsYXNzPSJ5YXdmLWZlZWQtZWRpdC1kaWZmLXRpdGxlIFNfbGluZTEiPjwvZGl2PjxvbCBjbGFzcz0ieWF3Zi1mZWVkLWVkaXQtbGlzdCB5YXdmLWZlZWQtZWRpdC1kaWZmLWxpc3QgU19saW5lMSI+PC9vbD48L2Rpdj5gOwogICAgICAgIGNvbnN0IGxvYWRpbmdUZXh0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZlZWQtZWRpdC1sb2FkaW5nIC50ZXh0Jyk7CiAgICAgICAgbG9hZGluZ1RleHQudGV4dENvbnRlbnQgPSBpMThuLnZpZXdFZGl0TG9hZGluZzsKICAgICAgICBjb25zdCBzZWxlY3RUaXRsZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mZWVkLWVkaXQtc2VsZWN0LXRpdGxlJyk7CiAgICAgICAgY29uc3QgZGlmZlRpdGxlID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWZlZWQtZWRpdC1kaWZmLXRpdGxlJyk7CiAgICAgICAgY29uc3Qgc2VsZWN0TGlzdCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mZWVkLWVkaXQtc2VsZWN0LWxpc3QnKTsKICAgICAgICBjb25zdCBkaWZmTGlzdCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mZWVkLWVkaXQtZGlmZi1saXN0Jyk7CiAgICAgICAgY29uc3QgY29udGVudCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1mZWVkLWVkaXQtdmlldy1jb250ZW50Jyk7CiAgICAgICAgc2VsZWN0VGl0bGUudGV4dENvbnRlbnQgPSBpMThuLnNlbGVjdEZlZWRWZXJzaW9uOwogICAgICAgIGRpZmZUaXRsZS50ZXh0Q29udGVudCA9IGkxOG4uZGlmZkZlZWRWZXJzaW9uOwogICAgICAgIGNvbnN0IHZlcnNpb25zID0gYXdhaXQgZmVlZEhpc3RvcnlQcm9taXNlOwogICAgICAgIGNvbnN0IHNlbGVjdFZlcnNpb25zID0gbmV3IFdlYWtNYXAoKTsKICAgICAgICBjb25zdCBkaWZmVmVyc2lvbnMgPSBuZXcgV2Vha01hcCgpOwogICAgICAgIGxldCBjdXJyZW50VmVyc2lvbiA9IG51bGw7CiAgICAgICAgY29uc3QgaGlnaGxpZ2h0VmVyc2lvbiA9IGZ1bmN0aW9uICh2ZXJzaW9uLCBsaXN0KSB7CiAgICAgICAgICBjb25zdCBjdXJyZW50ID0gbGlzdC5xdWVyeVNlbGVjdG9yKCcuY3VycmVudCcpOwogICAgICAgICAgaWYgKGN1cnJlbnQpIGN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudCcsICdTX2JnMicpOwogICAgICAgICAgaWYgKHZlcnNpb24pIHsKICAgICAgICAgICAgdmVyc2lvbi5jbGFzc0xpc3QuYWRkKCdjdXJyZW50JywgJ1NfYmcyJyk7CiAgICAgICAgICAgIHZlcnNpb24uc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ25lYXJlc3QnIH0pOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgY29uc3Qgc2V0U2VsZWN0VmVyc2lvbiA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7CiAgICAgICAgICBjdXJyZW50VmVyc2lvbiA9IHZlcnNpb247CiAgICAgICAgICBoaWdobGlnaHRWZXJzaW9uKHNlbGVjdFZlcnNpb25zLmdldCh2ZXJzaW9uKSwgc2VsZWN0TGlzdCk7CiAgICAgICAgICBoaWdobGlnaHRWZXJzaW9uKGRpZmZWZXJzaW9ucy5nZXQodmVyc2lvbiksIGRpZmZMaXN0KTsKICAgICAgICAgIHNob3dDb250ZW50KGNvbnRlbnQsIHZlcnNpb24sIG51bGwpOwogICAgICAgIH07CiAgICAgICAgY29uc3Qgc2V0RGlmZlZlcnNpb24gPSBmdW5jdGlvbiAodmVyc2lvbikgewogICAgICAgICAgaGlnaGxpZ2h0VmVyc2lvbihkaWZmVmVyc2lvbnMuZ2V0KHZlcnNpb24pLCBkaWZmTGlzdCk7CiAgICAgICAgICBzaG93Q29udGVudChjb250ZW50LCBjdXJyZW50VmVyc2lvbiwgdmVyc2lvbik7CiAgICAgICAgfTsKICAgICAgICBbCiAgICAgICAgICB7IHRpbWVMaXN0OiBzZWxlY3RMaXN0LCBvbkNsaWNrOiBzZXRTZWxlY3RWZXJzaW9uLCB2ZXJzaW9uTWFwOiBzZWxlY3RWZXJzaW9ucyB9LAogICAgICAgICAgeyB0aW1lTGlzdDogZGlmZkxpc3QsIG9uQ2xpY2s6IHNldERpZmZWZXJzaW9uLCB2ZXJzaW9uTWFwOiBkaWZmVmVyc2lvbnMgfSwKICAgICAgICBdLmZvckVhY2goKHsgdGltZUxpc3QsIG9uQ2xpY2ssIHZlcnNpb25NYXAgfSkgPT4gewogICAgICAgICAgdmVyc2lvbnMuZm9yRWFjaCh2ZXJzaW9uID0+IHsKICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKCdTX2xpbmUxJyk7CiAgICAgICAgICAgIGxpLmlubmVySFRNTCA9ICc8YSBocmVmPSJqYXZhc2NyaXB0OjsiIGNsYXNzPSJTX3R4dDEiPjwvYT4nOwogICAgICAgICAgICBjb25zdCBhID0gbGkuZmlyc3RDaGlsZDsKICAgICAgICAgICAgYS50ZXh0Q29udGVudCA9IHV0aWwudGltZS5mb3JtYXQodmVyc2lvbi5kYXRlLCB7IGZvcm1hdDogJ21vbnRoJywgbG9jYWxlOiB0aW1lTG9jYWxlIH0pOwogICAgICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICAgICAgICBvbkNsaWNrKHZlcnNpb24pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGltZUxpc3QuYXBwZW5kQ2hpbGQobGkpOwogICAgICAgICAgICB2ZXJzaW9uTWFwLnNldCh2ZXJzaW9uLCBsaSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBzZXRTZWxlY3RWZXJzaW9uKHZlcnNpb25zWzBdKTsKICAgICAgICBzZXREaWZmVmVyc2lvbih2ZXJzaW9uc1t2ZXJzaW9ucy5sZW5ndGggLSAxXSk7CiAgICAgIH07CiAgICAgIGNvbnN0IHNob3dFZGl0SW5mbyA9IGZ1bmN0aW9uIChtaWQpIHsKICAgICAgICBjb25zdCBmZWVkSGlzdG9yeVByb21pc2UgPSByZXF1ZXN0LmZlZWRIaXN0b3J5KG1pZCk7CiAgICAgICAgY29uc3QgaGlzdG9yeURpYWxvZyA9IHVpLmRpYWxvZyh7CiAgICAgICAgICBpZDogJ3lhd2YtZmVlZC1lZGl0JywKICAgICAgICAgIHRpdGxlOiBpMThuLnZpZXdFZGl0VGl0bGUsCiAgICAgICAgICByZW5kZXIoY29udGFpbmVyKSB7CiAgICAgICAgICAgIGRpYWxvZ1JlbmRlcihjb250YWluZXIsIGZlZWRIaXN0b3J5UHJvbWlzZSk7CiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICAgIGhpc3RvcnlEaWFsb2cuc2hvdygpOwogICAgICB9OwogICAgICBvYnNlcnZlci5mZWVkLm9uQWZ0ZXIoZnVuY3Rpb24gKGZlZWQpIHsKICAgICAgICBjb25zdCBlZGl0ZWRMaXN0ID0gQXJyYXkuZnJvbShmZWVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9mZWVkX2RldGFpbCAuV0JfZnJvbSBzcGFuW3RpdGxlXScpKTsKICAgICAgICBlZGl0ZWRMaXN0LmZvckVhY2goZWRpdGVkID0+IHsKICAgICAgICAgIGNvbnN0IGZlZWROb2RlID0gZmVlZFBhcnNlci5mZWVkTm9kZShlZGl0ZWQpOwogICAgICAgICAgY29uc3QgaXNGb3J3YXJkID0gZWRpdGVkLmNsb3Nlc3QoJy5XQl9mZWVkX2V4cGFuZCcpOwogICAgICAgICAgY29uc3QgbWlkID0gZmVlZE5vZGUuZ2V0QXR0cmlidXRlKGlzRm9yd2FyZCA/ICdvbWlkJyA6ICdtaWQnKTsKICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgIGJ1dHRvbi5ocmVmID0gJ2phdmFzY3JpcHQ6Oyc7CiAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBpMThuLnZpZXdFZGl0SW5mb0VkaXRlZDsKICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd5YXdmLWVkaXRlZCcsICdTX3R4dDInKTsKICAgICAgICAgIGVkaXRlZC5yZXBsYWNlV2l0aChidXR0b24pOwogICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzaG93RWRpdEluZm8obWlkKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIGNzcy5hcHBlbmQoYAoueWF3Zi1mZWVkLWVkaXQtZGlhbG9nLWNvbnRlbnQgeyB3aWR0aDogODYwcHg7IGhlaWdodDogNDgwcHg7IGRpc3BsYXk6IGZsZXg7IH0KLnlhd2YtZmVlZC1lZGl0LXNlbGVjdCwgLnlhd2YtZmVlZC1lZGl0LWRpZmYgeyB3aWR0aDogMTgwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZy10b3A6IDQwcHg7IHBvc2l0aW9uOiByZWxhdGl2ZTt9Ci55YXdmLWZlZWQtZWRpdC12aWV3IHsgd2lkdGg6IDUwMHB4OyBib3JkZXI6IDAgc29saWQ7IH0KLnlhd2YtZmVlZC1lZGl0LXNlbGVjdC1saXN0IHsgZGlyZWN0aW9uOiBydGw7IH0KLnlhd2YtZmVlZC1lZGl0LXNlbGVjdC10aXRsZSwgLnlhd2YtZmVlZC1lZGl0LWRpZmYtdGl0bGUgeyBmb250LXdlaWdodDogYm9sZDsgcGFkZGluZzogMTBweCAwOyBsaW5lLWhlaWdodDogMTlweDsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IHdpZHRoOiBjYWxjKDEwMCUgLSAxcHgpOyBib3JkZXItYm90dG9tOiAxcHggc29saWQ7IH0KLnlhd2YtZmVlZC1lZGl0LXNlbGVjdC10aXRsZSwgLnlhd2YtZmVlZC1lZGl0LXNlbGVjdCBsaSB7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkOyB9Ci55YXdmLWZlZWQtZWRpdC1kaWZmLXRpdGxlLCAueWF3Zi1mZWVkLWVkaXQtZGlmZiBsaSB7IGJvcmRlci1sZWZ0OiAxcHggc29saWQ7IH0KLnlhd2YtZmVlZC1lZGl0LWxpc3QgeyBoZWlnaHQ6IDEwMCU7IG92ZXJmbG93OiBhdXRvOyB9Ci55YXdmLWZlZWQtZWRpdC1saXN0OjpiZWZvcmUgeyBjb250ZW50OiAiICI7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkOyBib3JkZXItcmlnaHQtY29sb3I6IGluaGVyaXQ7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBib3R0b206IDA7IH0KLnlhd2YtZGlmZi1zYW1lIC55YXdmLWRpZmYtbGluZS1icmVhayB7IGRpc3BsYXk6IG5vbmU7IH0KLnlhd2YtZmVlZC1lZGl0LXNlbGVjdC1saXN0OjpiZWZvcmUgeyByaWdodDogMDsgfQoueWF3Zi1mZWVkLWVkaXQtZGlmZi1saXN0OjpiZWZvcmUgeyBsZWZ0OiAwOyB9Ci55YXdmLWZlZWQtZWRpdC1saXN0IGxpIHsgbGluZS1oZWlnaHQ6IDI5cHg7IGRpcmVjdGlvbjogbHRyOyBib3JkZXItYm90dG9tOiAxcHggc29saWQ7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQoueWF3Zi1mZWVkLWVkaXQtbGlzdCBsaSBhIHsgZGlzcGxheTogYmxvY2s7IH0KLnlhd2YtZmVlZC1lZGl0LWxpc3QgbGkgYTpob3ZlciwgLnlhd2YtZmVlZC1lZGl0LWxpc3QgbGkuY3VycmVudCBhIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0KLnlhd2YtZmVlZC1lZGl0LXNlbGVjdC1saXN0IGxpLmN1cnJlbnQgeyBib3JkZXItcmlnaHQ6IDA7IH0KLnlhd2YtZmVlZC1lZGl0LWRpZmYtbGlzdCBsaS5jdXJyZW50IHsgYm9yZGVyLWxlZnQ6IDA7IH0KLnlhd2YtZmVlZC1lZGl0LXZpZXcgeyBvdmVyZmxvdzogYXV0bzsgfQoueWF3Zi1mZWVkLWVkaXQtdmlldyAuV0JfdGV4dCB7IHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsgfQoueWF3Zi1mZWVkLWVkaXQtdmlldyAuV0JfbWVkaWFfd3JhcCB7IG1hcmdpbi10b3A6IDEwcHg7IH0KLnlhd2YtZGlmZi1pbnNlcnQgeyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgcmdiYSgwLCAyNTUsIDAsIDAuMTUpIDAsIHJnYmEoMCwgMjU1LCAwLCAwLjE1KSBjYWxjKDk0JSAtIDFweCksIGN1cnJlbnRDb2xvciA5NCUsIGN1cnJlbnRDb2xvciAxMDAlKSB9Ci55YXdmLWRpZmYtZGVsZXRlIHsgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHJnYmEoMjU1LCAwLCAwLCAwLjE1KSAwLCByZ2JhKDI1NSwgMCwgMCwgMC4xNSkgY2FsYyg1MyUgLSAxcHgpLCBjdXJyZW50Q29sb3IgNTMlLCBjdXJyZW50Q29sb3IgNTklLCByZ2JhKDI1NSwgMCwgMCwgMC4xNSkgY2FsYyg1OSUgKyAxcHgpLCByZ2JhKDI1NSwgMCwgMCwgMC4xNSkgMTAwJSk7IH0KLnlhd2YtZGlmZi1saW5lLWJyZWFrOjpiZWZvcmUgeyBjb250ZW50OiAi4oa1IjsgdXNlci1zZWxlY3Q6IG5vbmU7IH0KLnlhd2YtaW1nLWluc2VydCB7IG91dGxpbmU6IDNweCBzb2xpZCAjM2MzOyB9Ci55YXdmLWltZy1kZWxldGUgeyBvdXRsaW5lOiAzcHggZGFzaGVkICNjMzM7IH0KLnlhd2YtaW1nLXJlb3JkZXIgeyBvdXRsaW5lOiAzcHggZG90dGVkICMzNmY7IH0KLnlhd2YtZmVlZC1lZGl0LXZpZXctY29udGVudCAuV0JfbWVkaWFfd3JhcCB+IC5XQl9tZWRpYV93cmFwIHsgYm9yZGVyLXRvcC13aWR0aDogMXB4OyBib3JkZXItdG9wLXN0eWxlOiBzb2xpZDsgcGFkZGluZy10b3A6IDEwcHg7IH0KLnlhd2YtZGlmZi1pbWFnZS1saW5rIHsgY3Vyc29yOiB6b29tLWluOyB9CmApOwogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICB2aWV3QXJ0aWNsZUlubGluZTogewogICAgICBjbjogJ+WGheW1jOWxleekuuWktOadoeaWh+eroCB7e2l9fScsCiAgICAgIHR3OiAn5YWn5bWM5bGV56S66aCt5qKd5paH56ugIHt7aX19JywKICAgICAgZW46ICdTaG93IGFydGljbGVzIGlubGluZSB7e2l9fScsCiAgICB9LAogICAgdmlld0FydGljbGVJbmxpbmVEZXRhaWw6IHsKICAgICAgY246ICfku5jotLnlhoXlrrnlj6/og73ml6Dms5XlnKjlhoXltYzmqKHlvI/kuK3mraPluLjmn6XnnIvvvIzpnIDopoHmiZPlvIDmlofnq6DpobXmtY/op4jjgIInLAogICAgfSwKICAgIGZvbGRBcnRpY2xlOiB7IGNuOiAn5pS26LW3JywgZW46ICdWaWV3IExlc3MnIH0sCiAgICB2aWV3QXJ0aWNsZTogeyBjbjogJ+afpeeci+aWh+eroCcsIGVuOiAnVmlldyBBcnRpY2xlJyB9LAogICAgZmVlZEFydGljbGU6IHsgY246ICfmn6XnnIvljp/lvq7ljZonLCBlbjogJ1ZpZXcgT3JpZ2luYWwgRmVlZCcgfSwKICAgIHZpZXdBcnRpY2xlU291cmNlOiB7IGNuOiAn5p+l55yL5rqQ572R5Z2AJywgdHc6ICfmn6XnnIvmupDntrLlnYAnLCBlbjogJ1ZpZXcgU291cmNlJyB9LAogICAgYXJ0aWNsZUxvYWRpbmc6IHsgY246ICfmraPlnKjliqDovb3igKbigKYnLCB0dzogJ+ato+WcqOi8ieWFpeKApuKApicsIGVuOiAnTG9hZGluZyAuLi4nIH0sCiAgICBhcnRpY2xlRmFpbDogeyBjbjogJ+WKoOi9veWksei0pScsIHR3OiAn6L295YWl5aSx6LSlJywgZW46ICdGYWlsZWQgdG8gbG9hZCBhcnRpY2xlJyB9LAogIH0pOwoKICAvLyDnm7TmjqXlnKjlvq7ljZrlhoXmmL7npLrlpLTmnaHmlofnq6AKICBjb250ZW50LnZpZXdBcnRpY2xlSW5saW5lID0gcnVsZS5SdWxlKHsKICAgIGlkOiAndmlld19hcnRpY2xlX2lubGluZScsCiAgICB2ZXJzaW9uOiA1NSwKICAgIHBhcmVudDogY29udGVudC5jb250ZW50LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udmlld0FydGljbGVJbmxpbmUsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ3dhcm4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi52aWV3QXJ0aWNsZUlubGluZURldGFpbCB9LAogICAgfSwKICAgIGFpbml0KCkgewogICAgICAvLyDlvZMgaWZyYW1lIOWGheWuueeahOWwuuWvuOWPkeeUn+WPmOWMluaXtu+8jOaIkeS7rOimgeWwhuWPmOWMluWPjemmiOe7meS4iuWxggogICAgICBjb25zdCByZXNpemVTZW5zb3IgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYWxsYmFjaywgLyoqIEB0eXBlIHtEb2N1bWVudH0gKi9kb2N1bWVudCwgLyoqIEB0eXBlIHtXaW5kb3d9ICovd2luZG93KSB7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJyZXNpemUtc2Vuc29yIj48ZGl2IGNsYXNzPSJyZXNpemUtc2Vuc29yLWV4cGFuZCI+PGRpdiBjbGFzcz0icmVzaXplLXNlbnNvci1jaGlsZCI+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0icmVzaXplLXNlbnNvci1zaHJpbmsiPjxkaXYgY2xhc3M9InJlc2l6ZS1zZW5zb3ItY2hpbGQiPjwvZGl2PjwvZGl2PjwvZGl2Pic7CiAgICAgICAgLyoqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH0gKi8KICAgICAgICBjb25zdCBzZW5zb3IgPSBjb250YWluZXIuZmlyc3RDaGlsZDsKICAgICAgICAvKiogQHR5cGUge0hUTUxEaXZFbGVtZW50fSAqLwogICAgICAgIGNvbnN0IGV4cGFuZCA9IHNlbnNvci5maXJzdENoaWxkOwogICAgICAgIC8qKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9ICovCiAgICAgICAgY29uc3Qgc2hyaW5rID0gZXhwYW5kLm5leHRTaWJsaW5nOwogICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChzZW5zb3IpOwoKICAgICAgICBsZXQgbGFzdFdpZHRoID0gdGFyZ2V0Lm9mZnNldFdpZHRoOwogICAgICAgIGxldCBsYXN0SGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodDsKICAgICAgICBsZXQgbmV3V2lkdGgsIG5ld0hlaWdodCwgZGlydHk7CiAgICAgICAgY29uc3QgcmVzZXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBleHBhbmQuc2Nyb2xsVG9wID0gMWU4OwogICAgICAgICAgZXhwYW5kLnNjcm9sbExlZnQgPSAxZTg7CiAgICAgICAgICBzaHJpbmsuc2Nyb2xsVG9wID0gMWU4OwogICAgICAgICAgc2hyaW5rLnNjcm9sbExlZnQgPSAxZTg7CiAgICAgICAgfTsKICAgICAgICBjb25zdCBvblJlc2l6ZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAobGFzdFdpZHRoID09PSBuZXdXaWR0aCAmJiBsYXN0SGVpZ2h0ID09PSBuZXdIZWlnaHQpIHJldHVybiBmYWxzZTsKICAgICAgICAgIGxhc3RXaWR0aCA9IG5ld1dpZHRoOwogICAgICAgICAgbGFzdEhlaWdodCA9IG5ld0hlaWdodDsKICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICByZXNldCgpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfTsKICAgICAgICBjb25zdCBvblNjcm9sbCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgbmV3V2lkdGggPSB0YXJnZXQub2Zmc2V0V2lkdGg7CiAgICAgICAgICBuZXdIZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgaWYgKGRpcnR5KSByZXR1cm47IGRpcnR5ID0gdHJ1ZTsKICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGRpcnR5ID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChvblJlc2l6ZWQoKSkgb25TY3JvbGwoKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgcmVzZXQoKTsKICAgICAgICBvblNjcm9sbCgpOwogICAgICAgIGV4cGFuZC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvblNjcm9sbCk7CiAgICAgICAgc2hyaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9uU2Nyb2xsKTsKICAgICAgfTsKCiAgICAgIC8vIOimgeazqOWFpeWIsOWNoeeJh+WGheeahOagt+W8jwogICAgICBjb25zdCBpbmplY3RTdHlsZSA9IGAKLldCX2VkaXRvcl9pZnJhbWVfbmV3IC5XQl9mZWVkX3YzIHsgbWF4LXdpZHRoOiAxMDAlOyB9CmA7CgogICAgICAvLyDopoHms6jlhaXliLDmlofnq6DpobXnmoTmoLflvI8KICAgICAgY29uc3QgY29udGVudFN0eWxlID0gYApodG1sIHsgLW1zLXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7IC13ZWJraXQtdGV4dC1zaXplLWFkanVzdDogMTAwJTsgbGluZS1oZWlnaHQ6IDEuNTsgY29sb3I6IHZhcigtLXRleHQtY29sb3IpOyBmb250LWZhbWlseTogdmFyKC0tZm9udC1mYW1pbHkpOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgZm9udC1zaXplOiAxNnB4OyBsaW5lLWhlaWdodDogMS41OyB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7IH0KYm9keSB7IG1hcmdpbjogMDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoqIHsgYm94LXNpemluZzogYm9yZGVyLWJveDsgfQo+ICo6Zmlyc3QtY2hpbGQgeyBtYXJnaW4tdG9wOiAwICFpbXBvcnRhbnQ7IH0KPiAqOmxhc3QtY2hpbGQgeyBtYXJnaW4tYm90dG9tOiAwICFpbXBvcnRhbnQ7IH0KYSB7IGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyBjb2xvcjogdmFyKC0tbGluay1jb2xvcik7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyB9CmJsb2NrcXVvdGUgeyBtYXJnaW46IDAgMCAxMHB4OyBwYWRkaW5nOiAwIDFlbTsgYmFja2dyb3VuZDogIzgwODA4MDIyOyBib3JkZXItbGVmdDogMC4yNWVtIHNvbGlkICM4MDgwODA0NDsgcGFkZGluZzogMjBweDsgfQpibG9ja3F1b3RlID4gOmZpcnN0LWNoaWxkIHsgbWFyZ2luLXRvcDogMDsgfQpibG9ja3F1b3RlID4gOmxhc3QtY2hpbGQgeyBtYXJnaW4tYm90dG9tOiAwOyB9CmZpZ3VyZSB7IG1hcmdpbjogMCAwIDEwcHg7IHBhZGRpbmc6IDAgMWVtOyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0KZmlnY2FwdGlvbiB7IHRleHQtYWxpZ246IGNlbnRlcjsgfQpoMSwgaDIsIGgzLCBoNCwgaDUsIGg2IHsgbWFyZ2luLXRvcDogMjRweDsgbWFyZ2luLWJvdHRvbTogMTZweDsgZm9udC13ZWlnaHQ6IDYwMDsgbGluZS1oZWlnaHQ6IDEuMjU7IH0KaDEgeyBtYXJnaW46IDAuNjdlbSAwOyBwYWRkaW5nLWJvdHRvbTogMC4zZW07IGZvbnQtc2l6ZTogMmVtOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzgwODA4MDIyOyB9CmgyIHsgcGFkZGluZy1ib3R0b206IDAuM2VtOyBmb250LXNpemU6IDEuNWVtOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzgwODA4MDIyOyB9CmgzIHsgZm9udC1zaXplOiAxLjI1ZW07IH0KaDQgeyBmb250LXNpemU6IDFlbTsgfQpoNSB7IGZvbnQtc2l6ZTogMC44NzVlbTsgfQpoNiB7IGZvbnQtc2l6ZTogMC44NWVtOyB9CmhyIHsgYm94LXNpemluZzogY29udGVudC1ib3g7IG92ZXJmbG93OiBoaWRkZW47IGhlaWdodDogMnB4OyBwYWRkaW5nOiAwOyBtYXJnaW46IDI0cHggMDsgYmFja2dyb3VuZC1jb2xvcjogIzgwODA4MDExOyBib3JkZXI6IDA7IH0KaHI6OmFmdGVyIHsgZGlzcGxheTogdGFibGU7IGNsZWFyOiBib3RoOyBjb250ZW50OiAiIjsgfQpocjo6YmVmb3JlIHsgZGlzcGxheTogdGFibGU7IGNvbnRlbnQ6ICIiOyB9CmltZyB7IGJvcmRlci1zdHlsZTogbm9uZTsgbWF4LXdpZHRoOiAxMDAlOyBib3gtc2l6aW5nOiBjb250ZW50LWJveDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1jb2xvcik7IH0KbGkgKyBsaSB7IG1hcmdpbi10b3A6IDAuMjVlbTsgfQpsaSA+IHAgeyBtYXJnaW4tdG9wOiAxNnB4OyB9CnAgeyBtYXJnaW4tdG9wOiAwOyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9CnAsIGJsb2NrcXVvdGUsIHVsLCBvbCwgdGFibGUgeyBtYXJnaW4tdG9wOiAwOyBtYXJnaW4tYm90dG9tOiAxNnB4OyB9CnRhYmxlIHsgYm9yZGVyLXNwYWNpbmc6IDA7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IH0KdGFibGUgdGggeyBmb250LXdlaWdodDogYm9sZDsgfQp0YWJsZSB0aCwgdGFibGUgdGQgeyBwYWRkaW5nOiA2cHggMTNweDsgYm9yZGVyOiAxcHggc29saWQgIzgwODA4MDQ0OyB9CnRhYmxlIHRyIHsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNjY2M7IH0KdGFibGUgdHI6bnRoLWNoaWxkKDJuKSB7IGJhY2tncm91bmQtY29sb3I6ICM4MDgwODAxMTsgfQp0ZCwgdGggeyBwYWRkaW5nOiAwOyB9CnVsLCBvbCB7IHBhZGRpbmctbGVmdDogMmVtOyBtYXJnaW4tdG9wOiAwOyBtYXJnaW4tYm90dG9tOiAwOyB9CnVsIHsgbGlzdC1zdHlsZTogb3V0c2lkZTsgfQp1bCB1bCBvbCwgdWwgb2wgb2wsIG9sIHVsIG9sLCBvbCBvbCBvbCB7IGxpc3Qtc3R5bGUtdHlwZTogbG93ZXItYWxwaGE7IH0KdWwgdWwsIHVsIG9sLCBvbCBvbCwgb2wgdWwgeyBtYXJnaW4tdG9wOiAwOyBtYXJnaW4tYm90dG9tOiAwOyB9CmlmcmFtZSB7IHdpZHRoOiAxMDAlOyBib3JkZXI6IDAgbm9uZTsgbWF4LXdpZHRoOiA2MDBweDsgfQp2aWRlbyB7IG1heC13aWR0aDogMTAwJTsgbWF4LWhlaWdodDogMTAwdmg7IH0KCmJvZHkgeyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KLnJlc2l6ZS1zZW5zb3IsIC5yZXNpemUtc2Vuc29yLWV4cGFuZCwgLnJlc2l6ZS1zZW5zb3Itc2hyaW5rIHsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGJvdHRvbTogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IG92ZXJmbG93OiBoaWRkZW47IHotaW5kZXg6IC0xOyB2aXNpYmlsaXR5OiBoaWRkZW47IH0KLnJlc2l6ZS1zZW5zb3ItZXhwYW5kIC5yZXNpemUtc2Vuc29yLWNoaWxkIHsgd2lkdGg6IDEwMDAwMHB4OyBoZWlnaHQ6IDEwMDAwMHB4OyB9Ci5yZXNpemUtc2Vuc29yLXNocmluayAucmVzaXplLXNlbnNvci1jaGlsZCB7IHdpZHRoOiAyMDAlOyBoZWlnaHQ6IDIwMCU7IH0KLnJlc2l6ZS1zZW5zb3ItY2hpbGQgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgdHJhbnNpdGlvbjogMHM7IH0KYDsKCiAgICAgIC8vIOa4suafk+aWh+eroAogICAgICBjb25zdCByZW5kZXJBcnRpY2xlID0gZnVuY3Rpb24gKGFydGljbGUsIHN0eWxlLCBpbkZvcndhcmQpIHsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYAo8ZGl2IGNsYXNzPSJXQl9leHBhbmRfbWVkaWFfYm94IGNsZWFyZml4Ij4KPGRpdiBjbGFzcz0iV0JfZXhwYW5kX21lZGlhIj4KPGRpdiBjbGFzcz0ieWF3Zi1hcnRpY2xlIFNfYmcyIFNfbGluZTEiPgo8ZGl2IGNsYXNzPSJ0YWJfZmVlZF9hIGNsZWFyZml4IHlhd2YtYXJ0aWNsZS1oYW5kbGUgU19iZzIiPjxkaXYgY2xhc3M9InRhYiI+PHVsIGNsYXNzPSJjbGVhcmZpeCI+CjxsaT48c3BhbiBjbGFzcz0ibGluZSBTX2xpbmUxIj48YSBjbGFzcz0iU190eHQxIHlhd2YtYXJ0aWNsZS1mb2xkIiBocmVmPSJqYXZhc2NyaXB0OjsiPjxpIGNsYXNzPSJXX2ZpY29uIGZpY29uX2Fycm93X2ZvbGQgU19maWNvbiI+azwvaT48L2E+PC9zcGFuPjwvbGk+CjxsaT48c3BhbiBjbGFzcz0ibGluZSBTX2xpbmUxIj48YSBjbGFzcz0iU190eHQxIHlhd2YtYXJ0aWNsZS12aWV3IiBocmVmPSIiIHRhcmdldD0iX2JsYW5rIj48aSBjbGFzcz0iV19maWNvbiBmaWNvbl9zZWFyY2ggU19maWNvbiI+wrA8L2k+PC9hPjwvc3Bhbj48L2xpPgo8bGk+PHNwYW4gY2xhc3M9ImxpbmUgU19saW5lMSI+PGEgY2xhc3M9IlNfdHh0MSB5YXdmLWFydGljbGUtZmVlZCIgaHJlZj0iIiB0YXJnZXQ9Il9ibGFuayI+PGkgY2xhc3M9IldfZmljb24gZmljb25fc2VhcmNoIFNfZmljb24iPlx1ZTYwNDwvaT48L2E+PC9zcGFuPjwvbGk+CjxsaT48c3BhbiBjbGFzcz0ibGluZSBTX2xpbmUxIj48YSBjbGFzcz0iU190eHQxIHlhd2YtYXJ0aWNsZS1zb3VyY2UiIGhyZWY9IiIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm8tcmVmZXJyZXIiPjxpIGNsYXNzPSJXX2ZpY29uIGZpY29uX3NlYXJjaCBTX2ZpY29uIj5sPC9pPjwvYT48L3NwYW4+PC9saT4KPC91bD48L2Rpdj48L2Rpdj4KPGRpdiBjbGFzcz0ieWF3Zi1hcnRpY2xlLWJvZHkiPgo8ZGl2IGNsYXNzPSJ5YXdmLWFydGljbGUtdGl0bGUiPjwvZGl2Pgo8ZGl2IGNsYXNzPSJ5YXdmLWFydGljbGUtbWV0YSI+CjxzcGFuIGNsYXNzPSJ5YXdmLWFydGljbGUtYXV0aG9yIj48YSB0YXJnZXQ9Il9ibGFuayI+PGltZyBjbGFzcz0iV19mYWNlX3JhZGl1cyIgLz48L2E+PC9zcGFuPgo8c3BhbiBjbGFzcz0ieWF3Zi1hcnRpY2xlLWF1dGhvci1pbm5lciI+PC9zcGFuPgo8c3BhbiBjbGFzcz0ieWF3Zi1hcnRpY2xlLXRpbWUiPjwvc3Bhbj4KPC9kaXY+CjxkaXYgY2xhc3M9Inlhd2YtYXJ0aWNsZS1sZWFkIj48L2Rpdj4KPGRpdiBjbGFzcz0ieWF3Zi1hcnRpY2xlLWNvdmVyIj48aW1nIC8+PC9kaXY+CjxkaXYgY2xhc3M9Inlhd2YtYXJ0aWNsZS1sb2FkaW5nIj48aSBjbGFzcz0iV19sb2FkaW5nIj48L2k+IDwvZGl2Pgo8ZGl2IGNsYXNzPSJ5YXdmLWFydGljbGUtY29udGVudCI+PGlmcmFtZSB0aXRsZT0iIiBzdHlsZT0idmlzaWJpbGl0eTogaGlkZGVuOyBoZWlnaHQ6IDFweDsiIHNhbmRib3g9ImFsbG93LXBvcHVwcyBhbGxvdy1wb3B1cHMtdG8tZXNjYXBlLXNhbmRib3ggYWxsb3ctc2FtZS1vcmlnaW4iPjwvaWZyYW1lPjwvZGl2Pgo8L2Rpdj4KPC9kaXY+CjwvZGl2Pgo8L2Rpdj4KYDsKICAgICAgICBpZiAoIWFydGljbGUuY29udGVudCkgewogICAgICAgICAgY29uc3QgYm9keSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1hcnRpY2xlLWJvZHknKTsKICAgICAgICAgIGJvZHkudGV4dENvbnRlbnQgPSBpMThuLmFydGljbGVGYWlsOwogICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgICAgICB9CiAgICAgICAgLy8g5qCH6aKYCiAgICAgICAgY29uc3QgdGl0bGUgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtYXJ0aWNsZS10aXRsZScpOwogICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gYXJ0aWNsZS50aXRsZSB8fCAnJzsKICAgICAgICAvLyDkvZzogIUKICAgICAgICBjb25zdCBhdXRob3IgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtYXJ0aWNsZS1hdXRob3InKTsKICAgICAgICBpZiAoYXJ0aWNsZS5hdXRob3IpIHsKICAgICAgICAgIGF1dGhvci5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zcmMgPSBhcnRpY2xlLmF1dGhvci5hdmF0YXI7CiAgICAgICAgICBjb25zdCBsaW5rID0gYXV0aG9yLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsKICAgICAgICAgIGxpbmsuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYXJ0aWNsZS5hdXRob3IubmFtZSkpOwogICAgICAgICAgbGluay5ocmVmID0gYGh0dHBzOi8vd2VpYm8uY29tL3UvJHthcnRpY2xlLmF1dGhvci51aWR9YDsKICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCd1c2VyY2FyZCcsIGBpZD0ke2FydGljbGUuYXV0aG9yLnVpZH1gKTsKICAgICAgICB9IGVsc2UgYXV0aG9yLnJlbW92ZSgpOwogICAgICAgIGNvbnN0IGF1dGhvcklubmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWFydGljbGUtYXV0aG9yLWlubmVyJyk7CiAgICAgICAgaWYgKGFydGljbGUuYXV0aG9yICYmIGFydGljbGUuYXV0aG9yLmlubmVyKSB7CiAgICAgICAgICBjb25zdCBpbm5lciA9IGFydGljbGUuYXV0aG9yLmlubmVyOwogICAgICAgICAgaWYgKGlubmVyLnVpZCkgewogICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICBsaW5rLnRleHRDb250ZW50ID0gaW5uZXIubmFtZTsKICAgICAgICAgICAgbGluay5ocmVmID0gYGh0dHBzOi8vd2VpYm8uY29tL3UvJHtpbm5lci51aWR9YDsKICAgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ3VzZXJjYXJkJywgYGlkPSR7aW5uZXIudWlkfWApOwogICAgICAgICAgICBhdXRob3JJbm5lci5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGF1dGhvcklubmVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGlubmVyLm5hbWUpKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgYXV0aG9ySW5uZXIucmVtb3ZlKCk7CiAgICAgICAgLy8g5pel5pyfCiAgICAgICAgY29uc3QgdGltZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1hcnRpY2xlLXRpbWUnKTsKICAgICAgICBpZiAoYXJ0aWNsZS50aW1lKSB7CiAgICAgICAgICB0aW1lLnRleHRDb250ZW50ID0gYXJ0aWNsZS50aW1lLnJlcGxhY2UoL1xkXGQtXGRcZCBcZFxkOlxkXGQvLCBzdHIgPT4gewogICAgICAgICAgICBjb25zdCB5ZWFyID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIDI4OGU1KS5nZXRVVENGdWxsWWVhcigpOwogICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgLi4uc3RyLnNwbGl0KC9bLSA6XS8pLm1hcCgoeCwgaSkgPT4gaSA/ICt4IDogeCAtIDEpKSAtIDI4OGU1KTsKICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAoKGRhdGUuZ2V0TW9udGgoKSArIDEpICsgJycpLnBhZFN0YXJ0KDIsIDApLCAnLScsIChkYXRlLmdldERhdGUoKSArICcnKS5wYWRTdGFydCgyLCAwKSwgJyAnLAogICAgICAgICAgICAgIChkYXRlLmdldEhvdXJzKCkgKyAnJykucGFkU3RhcnQoMiwgMCksICc6JywgKGRhdGUuZ2V0TWludXRlcygpICsgJycpLnBhZFN0YXJ0KDIsIDApLAogICAgICAgICAgICBdLmpvaW4oJycpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHRpbWUucmVtb3ZlKCk7CiAgICAgICAgLy8g5a+86K+tCiAgICAgICAgY29uc3QgbGVhZCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1hcnRpY2xlLWxlYWQnKTsKICAgICAgICBpZiAoYXJ0aWNsZS5sZWFkKSBsZWFkLnRleHRDb250ZW50ID0gYXJ0aWNsZS5sZWFkOwogICAgICAgIGVsc2UgbGVhZC5yZW1vdmUoKTsKICAgICAgICAvLyDlsIHpnaLlm74KICAgICAgICBjb25zdCBjb3ZlciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1hcnRpY2xlLWNvdmVyJyk7CiAgICAgICAgaWYgKGFydGljbGUuY292ZXIpIGNvdmVyLmZpcnN0Q2hpbGQuc3JjID0gYXJ0aWNsZS5jb3ZlcjsKICAgICAgICBlbHNlIGNvdmVyLnJlbW92ZSgpOwogICAgICAgIC8vIOato+WcqOWKoOi9vQogICAgICAgIGNvbnN0IGxvYWRpbmcgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtYXJ0aWNsZS1sb2FkaW5nJyk7CiAgICAgICAgbG9hZGluZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpMThuLmFydGljbGVMb2FkaW5nKSk7CiAgICAgICAgLy8g5YaF5a65CiAgICAgICAgLyoqIEB0eXBlIHtIVE1MSUZyYW1lRWxlbWVudH0gKi8KICAgICAgICBjb25zdCBpZnJhbWUgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtYXJ0aWNsZS1jb250ZW50IGlmcmFtZScpOwogICAgICAgIGNvbnN0IGh0bWwgPSBgPCFkb2N0eXBlIGh0bWw+PGh0bWw+PGhlYWQ+PG1ldGEgY2hhcnNldD0idXRmLTgiIC8+PG1ldGEgbmFtZT0icmVmZXJyZXIiIGNvbnRlbnQ9Im5vLXJlZmVycmVyIiAvPjx0aXRsZT48L3RpdGxlPjxzdHlsZT4ke3N0eWxlfTwvc3R5bGU+PHN0eWxlPiR7Y29udGVudFN0eWxlfTwvc3R5bGU+PC9oZWFkPjxib2R5IGNsYXNzPSJ5YXdmLWFydGljbGUtcGFnZSI+JHthcnRpY2xlLmNvbnRlbnR9PC9ib2R5PjwvaHRtbD5gOwogICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbaHRtbF0sIHsgdHlwZTogJ3RleHQvaHRtbCcgfSk7CiAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICBpZnJhbWUuc3JjID0gdXJsOwogICAgICAgIGlmcmFtZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICAgICAgbG9hZGluZy5yZW1vdmUoKTsKICAgICAgICAgIGNvbnN0IGRvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnREb2N1bWVudDsKICAgICAgICAgIGNvbnN0IHdpbmRvdyA9IGlmcmFtZS5jb250ZW50V2luZG93OwogICAgICAgICAgY29uc3QgcmVzaXplSWZyYW1lID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQgKyAncHgnOwogICAgICAgICAgfTsKICAgICAgICAgIC8vIOWkhOeQhuWGheWuueS4reeahOWNoeeJhwogICAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd4LWlmcmFtZScpKS5mb3JFYWNoKGFzeW5jIHhpZnJhbWUgPT4gewogICAgICAgICAgICBjb25zdCBvcmlVcmwgPSB4aWZyYW1lLmdldEF0dHJpYnV0ZSgnc3JjJyk7CiAgICAgICAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXF1ZXN0LmdldEFydGljbGVDYXJkKG9yaVVybCk7CiAgICAgICAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwogICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2h0bWxdLCB7IHR5cGU6ICd0ZXh0L2h0bWwnIH0pOwogICAgICAgICAgICBjb25zdCBpZCA9IG5ldyBVUkwob3JpVXJsKS5zZWFyY2hQYXJhbXMuZ2V0KCdpZCcpOwogICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgICBpZnJhbWUuc3JjID0gdXJsOwogICAgICAgICAgICBpZnJhbWUuZGF0YXNldC5jYXJkSWQgPSBpZDsKICAgICAgICAgICAgaWZyYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnREb2N1bWVudDsKICAgICAgICAgICAgICBjb25zdCB3aW5kb3cgPSBpZnJhbWUuY29udGVudFdpbmRvdzsKICAgICAgICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKSk7CiAgICAgICAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBpbmplY3RTdHlsZTsKICAgICAgICAgICAgICBjb25zdCB1cGRhdGVPdXRlclNpemUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQgKyAncHgnOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgcmVzaXplU2Vuc29yKGRvY3VtZW50LmJvZHksIHVwZGF0ZU91dGVyU2l6ZSwgZG9jdW1lbnQsIHdpbmRvdyk7CiAgICAgICAgICAgICAgc2V0VGltZW91dCh1cGRhdGVPdXRlclNpemUsIDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgeGlmcmFtZS5wYXJlbnRFbGVtZW50LnJlcGxhY2VDaGlsZChpZnJhbWUsIHhpZnJhbWUpOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXNpemVTZW5zb3IoZG9jdW1lbnQuYm9keSwgcmVzaXplSWZyYW1lLCBkb2N1bWVudCwgd2luZG93KTsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXNpemVJZnJhbWUoKTsKICAgICAgICAgICAgaWZyYW1lLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7CiAgICAgICAgICB9LCAwKTsKICAgICAgICAgIC8vIOa3u+WKoOiHquWumuS5ieagt+W8jwogICAgICAgICAgY29uc3QgdXNlckNzcyA9IGxheW91dC51c2VyQ3NzLmNzczsKICAgICAgICAgIGlmICh1c2VyQ3NzLmlzRW5hYmxlZCgpKSB7CiAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgICAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSB1c2VyQ3NzLnJlZi5jc3MuZ2V0Q29uZmlnKCk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmcmFtZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGxvYWRpbmcudGV4dENvbnRlbnQgPSBpMThuLmFydGljbGVGYWlsOwogICAgICAgICAgaWZyYW1lLnJlbW92ZSgpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBjb250YWluZXI7CiAgICAgIH07CgogICAgICAvLyDpmpDol4/lm77niYfmiJbmlofnq6DljaHniYcKICAgICAgY29uc3QgaGlkZU1lZGlhID0gZnVuY3Rpb24gKGZlZWQpIHsKICAgICAgICBjb25zdCBtZWRpYUxpc3QgPSBBcnJheS5mcm9tKGZlZWQucXVlcnlTZWxlY3RvckFsbCgnLldCX21lZGlhX3dyYXAsIC5XQl9leHBhbmRfbWVkaWFfYm94JykpOwogICAgICAgIGNvbnN0IHJvbGxiYWNrID0gWy4uLm1lZGlhTGlzdF0ubWFwKG1lZGlhID0+IHsKICAgICAgICAgIGlmICghKG1lZGlhLmNsaWVudEhlaWdodCA+IDApKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IGRpc3BsYXkgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShtZWRpYSkuZGlzcGxheTsKICAgICAgICAgIG1lZGlhLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICByZXR1cm4gKCkgPT4geyBtZWRpYS5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTsgfTsKICAgICAgICB9KS5maWx0ZXIoeCA9PiB4KTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByb2xsYmFjay5mb3JFYWNoKGYgPT4gZigpKTsgfTsKICAgICAgfTsKCiAgICAgIC8vIOiuqeaWh+eroOWGheWuuemAgumFjeWRqOWbtOeahOmFjeiJsgogICAgICBjb25zdCBjb21wdXRlU3R5bGUgPSBmdW5jdGlvbiAocmVmZXJlbmNlKSB7CiAgICAgICAgY29uc3QgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHRleHQuc3R5bGUgPSAncG9zaXRpb246IGZpeGVkOyB0b3A6IC0xMDAwcHg7JzsKICAgICAgICB0ZXh0LmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJXQl90ZXh0IFdfZjE0Ij5UPGE+YTwvYT48c3BhbiBjbGFzcz0iU19iZzIiPkI8L3NwYW4+PC9kaXY+JzsKICAgICAgICByZWZlcmVuY2UuYXBwZW5kQ2hpbGQodGV4dCk7CiAgICAgICAgY29uc3QgbGluayA9IGdldENvbXB1dGVkU3R5bGUodGV4dC5xdWVyeVNlbGVjdG9yKCdhJykpOwogICAgICAgIGNvbnN0IGJnMiA9IGdldENvbXB1dGVkU3R5bGUodGV4dC5xdWVyeVNlbGVjdG9yKCcuU19iZzInKSk7CiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKHRleHQsICc6OnNlbGVjdGlvbicpOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKHRleHQsICc6Oi1tb3otc2VsZWN0aW9uJyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KCkpOwogICAgICAgIGNvbnN0IGNzcyA9IGAKOnJvb3QgewotLXRleHQtY29sb3I6ICR7YmcyLmNvbG9yfTsKLS1iYWNrZ3JvdW5kLWNvbG9yOiAke2JnMi5iYWNrZ3JvdW5kQ29sb3J9OwotLWxpbmstY29sb3I6ICR7bGluay5jb2xvcn07CgotLWZvbnQtZmFtaWx5OiAke2JnMi5mb250RmFtaWx5fTsKfQoKJHtzZWxlY3Rpb24gPyBgCjo6c2VsZWN0aW9uIHsgYmFja2dyb3VuZC1jb2xvcjogJHtzZWxlY3Rpb24uYmFja2dyb3VuZENvbG9yfTsgY29sb3I6ICR7c2VsZWN0aW9uLmNvbG9yfTsgfQo6Oi1tb3otc2VsZWN0aW9uIHsgYmFja2dyb3VuZC1jb2xvcjogJHtzZWxlY3Rpb24uYmFja2dyb3VuZENvbG9yfTsgY29sb3I6ICR7c2VsZWN0aW9uLmNvbG9yfTsgfQpgIDogJyd9CmA7CiAgICAgICAgdGV4dC5yZW1vdmUoKTsKICAgICAgICByZXR1cm4gY3NzOwogICAgICB9OwoKICAgICAgY29uc3QgcmVuZGVyQXJ0aWNsZUNvbnRyb2xzID0gZnVuY3Rpb24gKGFydGljbGUsIGFydGljbGVEYXRhLCB7IGlkLCBmZWVkLCB0ZXh0LCBzaG93TWVkaWEgfSkgewogICAgICAgIGNvbnN0IGZvbGQgPSBhcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWFydGljbGUtZm9sZCcpOwogICAgICAgIGZvbGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBhcnRpY2xlLnJlbW92ZSgpOwogICAgICAgICAgc2hvd01lZGlhKCk7CiAgICAgICAgICBmZWVkLnJlbW92ZUF0dHJpYnV0ZSgneWF3Zi1hcnRpY2xlLXNob3duJyk7CiAgICAgICAgICBmZWVkLnNjcm9sbEludG9WaWV3KHsgYmxvY2s6ICduZWFyZXN0JyB9KTsKICAgICAgICB9KTsKICAgICAgICBmb2xkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGkxOG4uZm9sZEFydGljbGUpKTsKCiAgICAgICAgY29uc3QgdmlldyA9IGFydGljbGUucXVlcnlTZWxlY3RvcignLnlhd2YtYXJ0aWNsZS12aWV3Jyk7CiAgICAgICAgdmlldy5ocmVmID0gYGh0dHBzOi8vd2VpYm8uY29tL3R0YXJ0aWNsZS9wL3Nob3c/aWQ9JHtpZH1gOwogICAgICAgIHZpZXcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaTE4bi52aWV3QXJ0aWNsZSkpOwoKICAgICAgICBjb25zdCBvcmlGZWVkID0gYXJ0aWNsZS5xdWVyeVNlbGVjdG9yKCcueWF3Zi1hcnRpY2xlLWZlZWQnKTsKICAgICAgICBpZiAoYXJ0aWNsZURhdGEuZmVlZCAmJiBuZXcgVVJMKGFydGljbGVEYXRhLmZlZWQpLnBhdGhuYW1lICE9PSBsb2NhdGlvbi5wYXRobmFtZSkgewogICAgICAgICAgb3JpRmVlZC5ocmVmID0gYXJ0aWNsZURhdGEuZmVlZDsKICAgICAgICAgIG9yaUZlZWQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaTE4bi5mZWVkQXJ0aWNsZSkpOwogICAgICAgIH0gZWxzZSBvcmlGZWVkLmNsb3Nlc3QoJ2xpJykucmVtb3ZlKCk7CgogICAgICAgIGNvbnN0IHNvdXJjZSA9IGFydGljbGUucXVlcnlTZWxlY3RvcignLnlhd2YtYXJ0aWNsZS1zb3VyY2UnKTsKICAgICAgICBpZiAoYXJ0aWNsZURhdGEuc291cmNlKSBzb3VyY2UuaHJlZiA9IGFydGljbGVEYXRhLnNvdXJjZTsKICAgICAgICBlbHNlIHNvdXJjZS5jbG9zZXN0KCdsaScpLnJlbW92ZSgpOwogICAgICAgIHNvdXJjZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpMThuLnZpZXdBcnRpY2xlU291cmNlKSk7CiAgICAgIH07CgogICAgICAvLyDngrnlh7vmlofnq6Dpk77mjqXml7bop6blj5EKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBpZiAoZXZlbnQuc2hpZnRLZXkgfHwgZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSByZXR1cm47CiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwogICAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpKSByZXR1cm47CiAgICAgICAgY29uc3QgZmVlZCA9IHRhcmdldC5jbG9zZXN0KCdbbWlkXScpOwogICAgICAgIGlmICghZmVlZCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGxpbmsgPSB0YXJnZXQuY2xvc2VzdCgnW3N1ZGEtdWF0cmFjayo9IjEwMjItYXJ0aWNsZSJdJyk7CiAgICAgICAgaWYgKCFsaW5rKSByZXR1cm47CiAgICAgICAgY29uc3QgaWQgPSBsaW5rLmdldEF0dHJpYnV0ZSgnc3VkYS11YXRyYWNrJykucmVwbGFjZSgvXi4qMTAyMiUzQShcZCspOi4qJC8sICckMScpOwogICAgICAgIGlmICghaWQpIHJldHVybjsKICAgICAgICBjb25zdCB0ZXh0ID0gQXJyYXkuZnJvbSgoLyoqIEByZXR1cm5zIHtFbGVtZW50fSAqL2Z1bmN0aW9uIGZpbmRUZXh0KHRhcmdldCkgewogICAgICAgICAgcmV0dXJuIHRhcmdldCA/IHRhcmdldC5xdWVyeVNlbGVjdG9yKCcuV0JfdGV4dCcpID8gdGFyZ2V0IDogZmluZFRleHQodGFyZ2V0LnBhcmVudEVsZW1lbnQpIDogbnVsbDsKICAgICAgICB9KHRhcmdldCkpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl90ZXh0JykpLnBvcCgpOwogICAgICAgIGlmICghdGV4dCkgcmV0dXJuOwogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgaWYgKGZlZWQuaGFzQXR0cmlidXRlKCd5YXdmLWFydGljbGUtc2hvd24nKSkgcmV0dXJuOwoKICAgICAgICBjb25zdCBsb2FkaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgbG9hZGluZy5jbGFzc05hbWUgPSAneWF3Zi1hcnRpY2xlLWxvYWRpbmcnOwogICAgICAgIGxvYWRpbmcuaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJXX2xvYWRpbmciPjwvaT4gJzsKICAgICAgICBsb2FkaW5nLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGkxOG4uYXJ0aWNsZUxvYWRpbmcpKTsKICAgICAgICBmZWVkLnNldEF0dHJpYnV0ZSgneWF3Zi1hcnRpY2xlLXNob3duJywgJycpOwogICAgICAgIHRleHQucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUobG9hZGluZywgdGV4dC5uZXh0U2libGluZyk7CgogICAgICAgIGNvbnN0IHNob3dNZWRpYSA9IGhpZGVNZWRpYShmZWVkKTsKICAgICAgICBjb25zdCBhcnRpY2xlRGF0YSA9IGF3YWl0IHJlcXVlc3QuZ2V0QXJ0aWNsZShpZCk7CiAgICAgICAgY29uc3QgYXJ0aWNsZSA9IHJlbmRlckFydGljbGUoYXJ0aWNsZURhdGEsIGNvbXB1dGVTdHlsZSh0ZXh0KSwgdGV4dC5tYXRjaGVzKCcuV0JfZXhwYW5kIConKSk7CiAgICAgICAgcmVuZGVyQXJ0aWNsZUNvbnRyb2xzKGFydGljbGUsIGFydGljbGVEYXRhLCB7IGlkLCBmZWVkLCB0ZXh0LCBzaG93TWVkaWEgfSk7CgogICAgICAgIGxvYWRpbmcucGFyZW50RWxlbWVudC5yZXBsYWNlQ2hpbGQoYXJ0aWNsZSwgbG9hZGluZyk7CiAgICAgIH0sIHRydWUpOwoKICAgICAgY3NzLmFwcGVuZChgCi55YXdmLWFydGljbGUtbG9hZGluZyB7IHBhZGRpbmc6IDEwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfQoueWF3Zi1hcnRpY2xlLWhhbmRsZSB7IHBvc2l0aW9uOiBzdGlja3k7IHRvcDogNTBweDsgcGFkZGluZzogMTBweCAwOyB6LWluZGV4OiAxOyBmb250LXNpemU6IDEycHg7IGxpbmUtaGVpZ2h0OiAxNXB4OyB9Ci55YXdmLWFydGljbGUgeyBib3JkZXItd2lkdGg6IDFweDsgYm9yZGVyLXN0eWxlOiBzb2xpZDsgcGFkZGluZzogMTBweDsgcG9zaXRpb246IHJlbGF0aXZlOyBmb250LXNpemU6IDE2cHg7IGxpbmUtaGVpZ2h0OiAxLjU7IH0KLnlhd2YtYXJ0aWNsZS10aXRsZSB7IG1hcmdpbjogMTBweCAwOyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxMzAlOyB9Ci55YXdmLWFydGljbGUtbWV0YSB7IG1hcmdpbjogMTBweCAtMTBweDsgZGlzcGxheTogZmxleDsgfQoueWF3Zi1hcnRpY2xlLW1ldGEgPiBzcGFuIHsgcGFkZGluZzogMCAxMHB4OyB9Ci55YXdmLWFydGljbGUtbWV0YSA+IHNwYW46bm90KDpmaXJzdC1jaGlsZCkgeyBib3JkZXItbGVmdDogMXB4IHNvbGlkICM4MDgwODAyMjsgfQoueWF3Zi1hcnRpY2xlLWF1dGhvciBpbWcgeyB3aWR0aDogMjBweDsgaGVpZ2h0OiAyMHB4OyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBtYXJnaW46IDAuMmVtOyB9Ci55YXdmLWFydGljbGUtbGVhZCB7IGJhY2tncm91bmQ6ICM4MDgwODAyMjsgcGFkZGluZzogMjBweDsgfQoueWF3Zi1hcnRpY2xlLWNvdmVyIHsgdGV4dC1hbGlnbjogY2VudGVyOyBsaW5lLWhlaWdodDogMDsgfQoueWF3Zi1hcnRpY2xlLWNvdmVyIGltZyB7IG1heC13aWR0aDogMTAwJTsgbWFyZ2luOiAxMHB4IDA7IHZlcnRpY2FsLWFsaWduOiB0b3A7IH0KLnlhd2YtYXJ0aWNsZS1jb250ZW50IGlmcmFtZSB7IGJvcmRlcjogMCBub25lOyB3aWR0aDogMTAwJTsgbWFyZ2luOiAxMHB4IDA7IH0KYCk7CiAgICAgIGlmIChsYXlvdXQubmF2YmFyLmF1dG9IaWRlLmlzRW5hYmxlZCgpKSB7CiAgICAgICAgY3NzLmFwcGVuZCgnLnlhd2YtYXJ0aWNsZS1oYW5kbGUgeyB0b3A6IDA7IH0nKTsKICAgICAgfQogICAgfSwKCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgbGlua1dpdGhGYWNlOiB7CiAgICAgIGNuOiAn6K+G5Yir5b6u5Y2a5Lit5YyF5ZCr6KGo5oOF56ym5Y+355qE572R5Z2A77yI5a6e6aqM5oCn77yJe3tpfX18fHt7Y2xlYW59fSDliKDpmaTooajmg4V8e3tsaW5rfX0g5Yib5bu66ZO+5o6lJywKICAgICAgdHc6ICfovqjorZjlvq7ljZrkuK3ljIXlkKvooajmg4XnrKbomZ/nmoTvvIjlr6bpqZfmgKfvvIl7e2l9fXx8e3tjbGVhbn19IOWIqumZpOihqOaDhXx7e2xpbmt9fSDlibXlu7rpgKPntZAnLAogICAgICBlbjogJ1JlY29nbml6ZSB1cmxzIHdpdGggZmFjZXMgaW4gZmVlZHMgKGV4cGVyaW1lbnRhbCkge3tpfX18fHt7Y2xlYW59fSBSZW1vdmUgZmFjZXN8e3tsaW5rfX0gR2VuZXJhdGUgbGluaycsCiAgICB9LAogICAgbGlua1dpdGhGYWNlRGV0YWlsOiB7CiAgICAgIGNuOiAn5Yib5bu655qE6ZO+5o6l5Y+v5Lul5oyH5ZCR5Lu75L2V56ys5LiJ5pa5572R56uZ77yM6K+35Zyo54K55Ye75YmN6Ieq6KGM56Gu6K6k5a6J5YWo5oCn44CC6YCJ5Lit5bm25aSN5Yi25pe25aaC5p6c5aSN5Yi25YaF5a655Li65b6u5Y2a5Lit55qE572R5Z2A77yM6ISa5pys5Lya5bCG5aSN5Yi255qE5YaF5a655riF55CG5Li66ZO+5o6l5pys6Lqr44CC6KGo5oOF5LuF5pSv5oyB5b6u5Y2a6Ieq5bim6KGo5oOF77yM5LiN5pSv5oyBIGVtb2ppIOihqOaDheOAgicsCiAgICB9LAogIH0pOwoKICBjb250ZW50LmxpbmtXaXRoRmFjZSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2xpbmtfd2l0aF9mYWNlJywKICAgIHZlcnNpb246IDY2LAogICAgcGFyZW50OiBjb250ZW50LmNvbnRlbnQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5saW5rV2l0aEZhY2UsCiAgICByZWY6IHsKICAgICAgY2xlYW46IHsgdHlwZTogJ2Jvb2xlYW4nIH0sCiAgICAgIGxpbms6IHsgdHlwZTogJ2Jvb2xlYW4nIH0sCiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4ubGlua1dpdGhGYWNlRGV0YWlsIH0sCiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIGNvbnN0IHVybFJlZ2V4R2VuID0gKCkgPT4gbmV3IFJlZ0V4cChbCiAgICAgICAgLy8g5Y2P6K6uCiAgICAgICAgJ2h0dHBzPzovLycsCiAgICAgICAgLy8g5LiN5pivIHQuY24g55qE55+t6ZO+5o6lCiAgICAgICAgJyg/IXQuY24oPzovfCQpKScsCiAgICAgICAgLy8g5Li75py65ZCN5oiWIElQCiAgICAgICAgJyg/Oig/IVsuLV0pKD86KD8hWy4tXVsuLzotXSlbYS16QS1aMC05Li1dKSp8XFxkK1xcLlxcZCtcXC5cXGQrXFwuXFxkKyknLAogICAgICAgIC8vIOerr+WPowogICAgICAgICcoPzo6XFxkKyk/JywKICAgICAgICAvLyDot6/lvoTvvIzmn6Xor6LkuLLvvIzmnKzlnLDpg6jliIYKICAgICAgICAnKD86Lyg/OlthLXpBLVowLTkkXFwtXy4rISpcJygpLC87OkAmPT8jXXwlW2EtZkEtRjAtOV17Mn0pKik/JywKICAgICAgXS5qb2luKCcnKSwgJ2cnKTsKICAgICAgY29uc3QgY2xlYW4gPSB0aGlzLnJlZi5jbGVhbi5nZXRDb25maWcoKTsKICAgICAgY29uc3QgbGluayA9IHRoaXMucmVmLmNsZWFuLmdldENvbmZpZygpOwoKICAgICAgb2JzZXJ2ZXIuZmVlZC5vbkFmdGVyKGZ1bmN0aW9uIChmZWVkKSB7CiAgICAgICAgLyoqIEB0eXBlIHtFbGVtZW50W119ICovCiAgICAgICAgY29uc3QgY29udGVudEVsZW1lbnRzID0gWwogICAgICAgICAgZmVlZFBhcnNlci5jb250ZW50LmRvbShmZWVkLCBmYWxzZSwgZmFsc2UpLAogICAgICAgICAgZmVlZFBhcnNlci5jb250ZW50LmRvbShmZWVkLCBmYWxzZSwgdHJ1ZSksCiAgICAgICAgICBmZWVkUGFyc2VyLmNvbnRlbnQuZG9tKGZlZWQsIHRydWUsIGZhbHNlKSwKICAgICAgICAgIGZlZWRQYXJzZXIuY29udGVudC5kb20oZmVlZCwgdHJ1ZSwgdHJ1ZSksCiAgICAgICAgXS5maWx0ZXIoZWxlbWVudCA9PiBlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCk7CgogICAgICAgIGNvbnRlbnRFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAgICAgY29uc3QgdW5mb2xkID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbYWN0aW9uLXR5cGU9ImZsX3VuZm9sZCJdJyk7CiAgICAgICAgICBjb25zdCBub2RlcyA9IFsuLi5lbGVtZW50LmNoaWxkTm9kZXNdOwogICAgICAgICAgbGV0IHRleHQgPSAnJzsKICAgICAgICAgIC8qKiBAdHlwZSB7W251bWJlciwgbnVtYmVyLCBOb2RlXVtdfSAqLwogICAgICAgICAgY29uc3Qgbm9kZURhdGEgPSBub2Rlcy5tYXAobm9kZSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHBvcyA9IHRleHQubGVuZ3RoOwogICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHsKICAgICAgICAgICAgICB0ZXh0ICs9IG5vZGUudGV4dENvbnRlbnQ7CiAgICAgICAgICAgICAgcmV0dXJuIFtwb3MsIG5vZGUudGV4dENvbnRlbnQubGVuZ3RoLCBub2RlXTsKICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkgewogICAgICAgICAgICAgIGlmIChub2RlLm1hdGNoZXMoJ2ltZy5XX2ltZ19mYWNlJykpIHsKICAgICAgICAgICAgICAgIHJldHVybiBbcG9zLCAwLCBub2RlXTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGV4dCArPSAnXG4nOwogICAgICAgICAgICAgICAgcmV0dXJuIFtwb3MsIDEsIG5vZGVdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gW3BvcywgMCwgbm9kZV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgbGV0IG1hdGNoOwogICAgICAgICAgY29uc3QgdXJsUmVnZXggPSB1cmxSZWdleEdlbigpOwogICAgICAgICAgd2hpbGUgKChtYXRjaCA9IHVybFJlZ2V4LmV4ZWModGV4dCkpICE9PSBudWxsKSB7CiAgICAgICAgICAgIGxldCB1cmw7CiAgICAgICAgICAgIHRyeSB7IHVybCA9IG5ldyBVUkwobWF0Y2hbMF0pOyB9IGNhdGNoIChlKSB7IGNvbnRpbnVlOyB9CiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbWF0Y2guaW5kZXgsIGxhc3RJbmRleCA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoOwogICAgICAgICAgICAvLyDlpoLmnpzmnInlsZXlvIDlhajmlofmjInpkq7vvIzogIzkuJTpk77mjqXljLnphY3liLDkuobmnIDlkI7pnaLvvIzpgqPkuYjlj6/og73pk77mjqXkuI3lrozmlbTvvIzmraTml7bkuI3or4bliKsKICAgICAgICAgICAgaWYgKHVuZm9sZCAmJiBsYXN0SW5kZXggPj0gdGV4dC5yZXBsYWNlKC9bXHMuXHUyMDBiXSokLywgJycpLmxlbmd0aCkgY29udGludWU7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gbm9kZURhdGEuZmluZEluZGV4KChbcG9zLCBsZW5dKSA9PiBwb3MgPD0gaW5kZXggJiYgcG9zICsgbGVuID4gaW5kZXgpOwogICAgICAgICAgICBjb25zdCBlbmQgPSBub2RlRGF0YS5maW5kSW5kZXgoKFtwb3MsIGxlbl0pID0+IHBvcyA8IGxhc3RJbmRleCAmJiBwb3MgKyBsZW4gPj0gbGFzdEluZGV4KTsKICAgICAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSB8fCBlbmQgPT09IC0xIHx8IHN0YXJ0ID09PSBlbmQpIGNvbnRpbnVlOwogICAgICAgICAgICBjb25zdCBbc3RhcnROb2RlUG9zLCBfc3RhcnROb2RlTGVuZ3RoLCBzdGFydE5vZGVdID0gbm9kZURhdGFbc3RhcnRdOwogICAgICAgICAgICBjb25zdCBbZW5kTm9kZVBvcywgX2VuZE5vZGVMZW5ndGgsIGVuZE5vZGVdID0gbm9kZURhdGFbZW5kXTsKICAgICAgICAgICAgaWYgKCEoc3RhcnROb2RlIGluc3RhbmNlb2YgVGV4dCkpIGNvbnRpbnVlOwogICAgICAgICAgICBpZiAoIShlbmROb2RlIGluc3RhbmNlb2YgVGV4dCkpIGNvbnRpbnVlOwogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgICAgICAgIGxldCB3cmFwID0gY29udGFpbmVyOwogICAgICAgICAgICBpZiAobGluaykgewogICAgICAgICAgICAgIHdyYXAgPSBjb250YWluZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTsKICAgICAgICAgICAgICB3cmFwLmhyZWYgPSB1cmw7CiAgICAgICAgICAgICAgd3JhcC5zZXRBdHRyaWJ1dGUoJ3JlbCcsICdub2ZvbGxvdyBub29wZW5lcicpOwogICAgICAgICAgICAgIHdyYXAuc2V0QXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7CiAgICAgICAgICAgICAgd3JhcC5jbGFzc05hbWUgPSAneWF3Zi1mYWNlLWxpbmsnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc3RhcnROb2RlLnRleHRDb250ZW50LnNsaWNlKGluZGV4IC0gc3RhcnROb2RlUG9zKSkpOwogICAgICAgICAgICBzdGFydE5vZGUudGV4dENvbnRlbnQgPSBzdGFydE5vZGUudGV4dENvbnRlbnQuc2xpY2UoMCwgaW5kZXggLSBzdGFydE5vZGVQb3MpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQgKyAxOyBpIDwgZW5kOyBpKyspIHsKICAgICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07CiAgICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IE5vZGUuVEVYVF9OT0RFICYmIGNsZWFuKSB7CiAgICAgICAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQobm9kZXNbaV0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB3cmFwLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGVuZE5vZGUudGV4dENvbnRlbnQuc2xpY2UoMCwgbGFzdEluZGV4IC0gZW5kTm9kZVBvcykpKTsKICAgICAgICAgICAgZW5kTm9kZS50ZXh0Q29udGVudCA9IGVuZE5vZGUudGV4dENvbnRlbnQuc2xpY2UobGFzdEluZGV4IC0gZW5kTm9kZVBvcyk7CiAgICAgICAgICAgIHdyYXAubm9ybWFsaXplKCk7CiAgICAgICAgICAgIGVuZE5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcCwgZW5kTm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwoKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NvcHknLCBldmVudCA9PiB7CiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7CiAgICAgICAgaWYgKHNlbGVjdGlvbi5yYW5nZUNvdW50ICE9PSAxKSByZXR1cm47CiAgICAgICAgY29uc3QgcmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKTsKICAgICAgICBjb25zdCBjb250YWluZXIgPSByYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjsKICAgICAgICBpZiAoIShjb250YWluZXIgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuOwogICAgICAgIGlmICghY29udGFpbmVyLm1hdGNoZXMoJy5XQl90ZXh0JykpIHJldHVybjsKICAgICAgICBjb25zdCBjb250ZW50cyA9IHJhbmdlLmNsb25lQ29udGVudHMoKTsKICAgICAgICBjb25zdCB0ZXh0ID0gWy4uLmNvbnRlbnRzLmNoaWxkTm9kZXNdLm1hcChub2RlID0+IHsKICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkgewogICAgICAgICAgICByZXR1cm4gbm9kZS50ZXh0Q29udGVudDsKICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgbm9kZS5ub2RlTmFtZSA9PT0gJ0lNRycpIHsKICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuICdcbic7CiAgICAgICAgICB9CiAgICAgICAgfSkuam9pbignJykudHJpbSgpOwogICAgICAgIGNvbnN0IHVybFJlZ2V4ID0gdXJsUmVnZXhHZW4oKTsKICAgICAgICBpZiAoIXVybFJlZ2V4LnRlc3QodGV4dCkpIHJldHVybjsKICAgICAgICBldmVudC5jbGlwYm9hcmREYXRhLnNldERhdGEoJ3RleHQvcGxhaW4nLCB0ZXh0KTsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9KTsKCiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIHNob3J0TGlua1dpdGhvdXRDb25maXJtOiB7CiAgICAgIGNuOiAn5omT5byA55+t6ZO+5o6l5pe25peg6ZyA5LqM5qyh56Gu6K6k77yI5YWo5bGA6K6+572u77yJIHt7aX19JywKICAgICAgdHc6ICfmiZPplovnsKHnn63nmoTpgKPmjqXmmYLnhKHpnIDkuozmrKHnorroqo3vvIjlhajlsYDoqK3lrprvvIkge3tpfX0nLAogICAgICBlbjogJ09wZW4gc2hvcnQgVVJMIHdpdGhvdXQgYW5vdGhlciBjb25maXJtYXRpb24gKEdsb2JhbCBPcHRpb24pIHt7aX19JywKICAgIH0sCiAgICBzaG9ydExpbmtXaXRob3V0Q29uZmlybURldGFpbDogewogICAgICBjbjogJ+aJk+W8gOefremTvuaOpeaXtuaXoOmcgOS6jOasoeaJi+WKqOehruiupOOAgueUseS6juefremTvuaOpee9kemhteaXoOazleiOt+WPlueZu+W9leeKtuaAge+8jOatpOiuvue9rumhueaXoOiuuueZu+W9leS7u+aEj+eUqOaIt+Wdh+S8mueUn+aViCcsCiAgICB9LAogIH0pOwoKICBjb250ZW50LnNob3J0TGlua1dpdGhvdXRDb25maXJtID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnc2hvcnRfdXJsX3dvX2NvbmZpcm0nLAogICAgdmVyc2lvbjogNzMsCiAgICBnZXQgY29uZmlnUG9vbCgpIHsgcmV0dXJuIGNvbmZpZy5nbG9iYWw7IH0sCiAgICBwYXJlbnQ6IGNvbnRlbnQuY29udGVudCwKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLnNob3J0TGlua1dpdGhvdXRDb25maXJtLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uc2hvcnRMaW5rV2l0aG91dENvbmZpcm1EZXRhaWwgfSwKICAgIH0sCiAgICAvLyDnnJ/mraPnmoTmiafooYzpgLvovpHlnKjljZXni6znmoTmlofku7bph4wKICAgIC8vIOi/meauteaYr+WkhOeQhuS4gOS4i+Wlh+aAqueahOi/vei4quS7o+eggeWvvOiHtOmTvuaOpeagueacrOaJk+S4jeW8gOeahOmXrumimAogICAgLy8g5bu66K6u5aaC5p6c55yf55qE5oOz5Yqg6L+96Liq5Luj56CB77yM5ZyoIG1vdXNldXAg5pe25pS5IGhyZWbvvIzogIzkuI3mmK/lnKggY2xpY2sg55qE5pe25YCZIHdpbmRvdy5vcGVuCiAgICBpbml0KCkgewogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7CiAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybjsKICAgICAgICBpZiAoIXRhcmdldC5tYXRjaGVzKCdbYWN0aW9uLXR5cGU9ImZlZWRfbGlzdF91cmwiXScpKSByZXR1cm47CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIH0sIHRydWUpOwogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvcnVsZS9mZWVkcy9tZWRpYS5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCBlbnYgPSB5YXdmLmVudjsKICBjb25zdCBpbml0ID0geWF3Zi5pbml0OwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgcmVxdWVzdCA9IHlhd2YucmVxdWVzdDsKICBjb25zdCBkb3dubG9hZCA9IHlhd2YuZG93bmxvYWQ7CiAgY29uc3QgY29udGV4dG1lbnUgPSB5YXdmLmNvbnRleHRtZW51OwogIGNvbnN0IGltYWdlVmlld2VyID0geWF3Zi5pbWFnZVZpZXdlcjsKICBjb25zdCBmZWVkUGFyc2VyID0geWF3Zi5mZWVkOwoKICBjb25zdCBmZWVkcyA9IHlhd2YucnVsZXMuZmVlZHM7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgY29uc3QgY3NzID0gdXRpbC5jc3M7CiAgY29uc3QgdXJscyA9IHV0aWwudXJsczsKICBjb25zdCBjcmMgPSB1dGlsLmNyYzsKCiAgY29uc3QgbWVkaWEgPSBmZWVkcy5tZWRpYSA9IHt9OwoKICBpMThuLmZlZWRNZWRpYUdyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+WbvueJh+S4juinhumikScsCiAgICB0dzogJ+WclueJh+iIh+imlumguycsCiAgICBlbjogJ0ltYWdlcyAmYW1wOyBWaWRlb3MnLAogIH07CgogIG1lZGlhLm1lZGlhID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGZlZWRzLmZlZWRzLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZE1lZGlhR3JvdXBUaXRsZSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICB2aWV3T3JpZ2luYWw6IGVudi5jb25maWcuY29udGV4dE1lbnVTdXBwb3J0ZWQgPyB7CiAgICAgIGNuOiAn5p+l55yL5Zu+54mH5re75Yqg4oCc5p+l55yL5Y6f5Zu+4oCd6ZO+5o6lfOaJk+W8gHt7b3Blbn19fHx7e2RpcmVjdH1954K55Ye757yp55Wl5Zu+5pe255u05o6l5p+l55yL5Y6f5Zu+fHx7e2NvbnRleHRtZW51fX3mt7vliqDliLDlj7PplK7oj5zljZUnLAogICAgICB0dzogJ+afpeeci+WclueJh+a3u+WKoOOAjOafpeeci+WOn+WcluOAjemAo+e1kHzmiZPplot7e29wZW59fXx8e3tkaXJlY3R9fem7nuaTiue4ruWcluaZguebtOaOpeafpeeci+WOn+Wclnx8e3tjb250ZXh0bWVudX195re75Yqg5Yiw5pON5L2c5Yqf6IO96KGoJywKICAgICAgZW46ICdhZGQgIk9yaWdpbmFsIFBpY3R1cmUiIGxpbmsgZm9yIGltYWdlcyB8IHdoaWNoIHRhcmdldGVkIHRvIHt7b3Blbn19IHx8IHt7ZGlyZWN0fX0gVmlldyBvcmlnaW5hbCBwaWN0dXJlcyBieSBjbGlja2luZyBvbiB0aHVtYm5haWwgfHwge3tjb250ZXhtZW51fX0gQWRkIHRvIGNvbnRleHQgbWVudScsCiAgICB9IDogewogICAgICBjbjogJ+afpeeci+WbvueJh+a3u+WKoOKAnOafpeeci+WOn+WbvuKAnemTvuaOpXzmiZPlvIB7e29wZW59fXx8e3tkaXJlY3R9feeCueWHu+e8qeeVpeWbvuaXtuebtOaOpeafpeeci+WOn+WbvicsCiAgICAgIHR3OiAn5p+l55yL5ZyW54mH5re75Yqg44CM5p+l55yL5Y6f5ZyW44CN6YCj57WQfOaJk+mWi3t7b3Blbn19fHx7e2RpcmVjdH196bue5pOK57iu5ZyW5pmC55u05o6l5p+l55yL5Y6f5ZyWJywKICAgICAgZW46ICdhZGQgIk9yaWdpbmFsIFBpY3R1cmUiIGxpbmsgZm9yIGltYWdlcyB8IHdoaWNoIHRhcmdldGVkIHRvIHt7b3Blbn19IHx8IHt7ZGlyZWN0fX0gVmlldyBvcmlnaW5hbCBwaWN0dXJlcyBieSBjbGlja2luZyBvbiB0aHVtYm5haWwnLAogICAgfSwKICAgIHZpZXdPcmlnaW5hbFBhZ2U6IHsgY246ICfljIXlkKvljp/lm77nmoTnvZHpobUnLCB0dzogJ+WMheWQq+WOn+WclueahOe2sumggScsIGVuOiAncGFnZSB3aXRoIG9yaWdpbmFsIHBpY3R1cmUnIH0sCiAgICB2aWV3T3JpZ2luYWxJbWFnZTogeyBjbjogJ+WOn+WbvicsIHR3OiAn5Y6f5ZyWJywgZW46ICdvcmlnaW5hbCBwaWN0dXJlJyB9LAogICAgdmlld09yaWdpbmFsVGV4dDogeyBjbjogJ+afpeeci+WOn+WbvicsIHR3OiAn5p+l55yL5Y6f5ZyWJywgZW46ICdPcmlnaW5hbCBQaWN0dXJlJyB9LAogIH0pOwoKICBjb25zdCBnZXRJbWFnZVVybCA9IGZ1bmN0aW9uIChpbWcsIGxhcmdlKSB7CiAgICBjb25zdCBzcmMgPSBpbWcuZ2V0QXR0cmlidXRlKCd5YXdmLW9yaS1zcmMnKSB8fCBpbWcuZ2V0QXR0cmlidXRlKCdvcmktc3JjJykgfHwgaW1nLnNyYzsKICAgIGlmICghbGFyZ2UpIHJldHVybiBzcmM7CiAgICBjb25zdCB1cmwgPSBbJ2h0dHBzOi8vJywgbmV3IFVSTChzcmMpLmhvc3QsICcvbGFyZ2UnLCBzcmMubWF0Y2goL1wvKFteL10qKSQvZyldLmpvaW4oJycpOwogICAgcmV0dXJuIHVybDsKICB9OwoKICBjb25zdCBnZXRVcmxCeVBpZCA9IGZ1bmN0aW9uIChwaWQsIHNpemUgPSAnbGFyZ2UnKSB7CiAgICBpZiAoJ3d5Jy5pbmNsdWRlcyhwaWRbOV0pKSB7CiAgICAgIGNvbnN0IGluZGV4ID0gKGNyYy5jcmMzMihwaWQpICYgMykgKyAxOwogICAgICBjb25zdCBleHRlbnNpb24gPSBwaWRbMjFdID09PSAnZycgPyAnZ2lmJyA6ICdqcGcnOwogICAgICBpZiAocGlkWzldID09PSAndycpIHsKICAgICAgICByZXR1cm4gbmV3IFVSTChgLy93dyR7aW5kZXh9LnNpbmFpbWcuY24vJHtzaXplfS8ke3BpZH0uJHtleHRlbnNpb259YCwgbG9jYXRpb24pOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgVVJMKGAvL3d4JHtpbmRleH0uc2luYWltZy5jbi8ke3NpemV9LyR7cGlkfS4ke2V4dGVuc2lvbn1gLCBsb2NhdGlvbik7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBuZXcgVVJMKGAvL3NzMS5zaW5haW1nLmNuLyR7c2l6ZX0vJHtwaWR9JjY5MGAsIGxvY2F0aW9uKTsKICAgIH0KICB9OwoKICBjb25zdCBnZXRJbWFnZXNJbmZvID0gZnVuY3Rpb24gKHJlZikgewogICAgbGV0IGNvbnRhaW5lciwgaW1ncywgaW1nOwogICAgaWYgKHJlZi5tYXRjaGVzKCcuV0JfZGV0YWlsIC5XQl9leHBhbmRfbWVkaWEgKicpKSB7CiAgICAgIC8vIOW3sue7j+WxleW8gOivpuaDheeahOWbvueJhwogICAgICBjb250YWluZXIgPSByZWYuY2xvc2VzdCgnLldCX2RldGFpbCcpOwogICAgICBpbWdzID0gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLldCX21lZGlhX3dyYXAgLldCX3BpYyBpbWcnKSk7CiAgICAgIGltZyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubWVkaWFfc2hvd19ib3ggaW1nJykgfHwKICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmN1cnJlbnQgaW1nJyk7CiAgICAgIGlmIChyZWYubWF0Y2hlcygnW2FjdGlvbi10eXBlPSJ3aWRnZXRfcGhvdG92aWV3Il0nKSkgewogICAgICAgIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgICAgIGltZy5zcmMgPSBnZXRVcmxCeVBpZChuZXcgVVJMU2VhcmNoUGFyYW1zKHJlZi5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJykpLmdldCgncGlkJykpOwogICAgICB9CiAgICAgIC8vIGZhbGx0aHJvdWdoCiAgICB9IGVsc2UgaWYgKHJlZi5tYXRjaGVzKCcuV0JfZXhwYW5kX21lZGlhIC50YWJfZmVlZF9hIConKSkgewogICAgICAvLyDlt7Lnu4/lsZXlvIDor6bmg4XnmoTor4TorrrphY3lm74KICAgICAgY29udGFpbmVyID0gcmVmLmNsb3Nlc3QoJy5XQl9leHBhbmRfbWVkaWEnKTsKICAgICAgaW1nID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5hcnR3b3JrX2JveCBpbWcnKTsKICAgICAgaW1ncyA9IFtpbWddOwogICAgICAvLyBmYWxsdGhyb3VnaAogICAgfSBlbHNlIGlmIChyZWYubWF0Y2hlcygnLldCX21lZGlhX3dyYXAgLldCX3BpYycpKSB7CiAgICAgIC8vIOayoeacieWxleW8gOivpuaDheeahOWbvueJhwogICAgICBjb250YWluZXIgPSByZWYuY2xvc2VzdCgnLldCX21lZGlhX3dyYXAnKTsKICAgICAgaW1ncyA9IEFycmF5LmZyb20oY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5XQl9waWMgaW1nJykpOwogICAgICBpbWcgPSByZWYucXVlcnlTZWxlY3RvcignaW1nJyk7CiAgICAgIC8vIGZhbGx0aHJvdWdoCiAgICB9IGVsc2UgaWYgKHJlZi5nZXRBdHRyaWJ1dGUoJ2ltYWdlY2FyZCcpKSB7CiAgICAgIGNvbnN0IHBpZCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocmVmLmdldEF0dHJpYnV0ZSgnaW1hZ2VjYXJkJykpLmdldCgncGlkJyk7CiAgICAgIHJldHVybiB7IGltYWdlczogW2dldFVybEJ5UGlkKHBpZCkuaHJlZl0sIGN1cnJlbnQ6IDEgfTsKICAgIH0gZWxzZSBpZiAocmVmLmhyZWYgJiYgcmVmLmhyZWYuaW5kZXhPZignamF2YXNjcmlwdDonKSA9PT0gLTEpIHsKICAgICAgcmV0dXJuIHsgaW1hZ2VzOiBbcmVmLmhyZWZdLCBjdXJyZW50OiAxIH07CiAgICB9IGVsc2UgaWYgKHJlZiBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQgJiYgcmVmLnNyYykgewogICAgICByZXR1cm4geyBpbWFnZXM6IFtnZXRJbWFnZVVybChyZWYsIHRydWUpXSwgY3VycmVudDogMSB9OwogICAgfSBlbHNlIHJldHVybiBudWxsOwogICAgY29uc3QgaW1hZ2VzID0gaW1ncy5tYXAoaW1nID0+IGdldEltYWdlVXJsKGltZywgdHJ1ZSkpOwogICAgY29uc3QgcGlkID0gaW1nICYmIGdldEltYWdlVXJsKGltZykubWF0Y2goL1teLy5dKig/PSg/OlwuW14vLl0qKT8kKS8pWzBdOwogICAgY29uc3QgY3VycmVudCA9IGltYWdlcy5maW5kSW5kZXgoaW1hZ2UgPT4gaW1hZ2UuaW5jbHVkZXMocGlkKSkgKyAxOwogICAgcmV0dXJuIHsgaW1hZ2VzLCBjdXJyZW50IH07CiAgfTsKCiAgbWVkaWEudmlld09yaWdpbmFsID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmVlZF92aWV3X29yaWdpbmFsJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IG1lZGlhLm1lZGlhLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udmlld09yaWdpbmFsLAogICAgcmVmOiB7CiAgICAgIG9wZW46IHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBpbml0aWFsOiAncGFnZScsCiAgICAgICAgc2VsZWN0OiBbCiAgICAgICAgICB7IHZhbHVlOiAncGFnZScsIHRleHQ6ICgpID0+IGkxOG4udmlld09yaWdpbmFsUGFnZSB9LAogICAgICAgICAgeyB2YWx1ZTogJ2ltYWdlJywgdGV4dDogKCkgPT4gaTE4bi52aWV3T3JpZ2luYWxJbWFnZSB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIGRpcmVjdDogeyB0eXBlOiAnYm9vbGVhbicgfSwKICAgICAgY29udGV4dG1lbnU6IHsgdHlwZTogJ2Jvb2xlYW4nLCBpbml0aWFsOiB0cnVlIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgdGhpcy5yZWYuZGlyZWN0LmFkZENvbmZpZ0xpc3RlbmVyKG5ld1ZhbHVlID0+IHsKICAgICAgICBpZiAobmV3VmFsdWUpIG1lZGlhLmRvd25sb2FkSW1hZ2UucmVmLmRpcmVjdC5zZXRDb25maWcoZmFsc2UpOwogICAgICB9KTsKCiAgICAgIGNvbnN0IHZpZXdFbmFibGVkID0gdGhpcy5pc0VuYWJsZWQoKTsKICAgICAgY29uc3Qgdmlld1R5cGUgPSB0aGlzLnJlZi5vcGVuLmdldENvbmZpZygpOwogICAgICBjb25zdCBkaXJlY3RWaWV3ID0gdmlld0VuYWJsZWQgJiYgdGhpcy5yZWYuZGlyZWN0LmdldENvbmZpZygpOwogICAgICBjb25zdCBjb250ZXh0TWVudVZpZXcgPSB2aWV3RW5hYmxlZCAmJiB0aGlzLnJlZi5jb250ZXh0bWVudS5nZXRDb25maWcoKTsKCiAgICAgIGNvbnN0IGRvd25sb2FkSW1hZ2UgPSBtZWRpYS5kb3dubG9hZEltYWdlOwogICAgICBjb25zdCBkb3dubG9hZEVuYWJsZWQgPSBkb3dubG9hZEltYWdlLmlzRW5hYmxlZCgpOwogICAgICBjb25zdCBkb3dubG9hZE5hbWUgPSBkb3dubG9hZEltYWdlLnJlZi5uYW1lLmdldENvbmZpZygpOwogICAgICBjb25zdCBkaXJlY3REb3dubG9hZCA9IGRvd25sb2FkRW5hYmxlZCAmJiBkb3dubG9hZEltYWdlLnJlZi5kaXJlY3QuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGNvbnRleHRNZW51RG93bmxvYWQgPSBkb3dubG9hZEVuYWJsZWQgJiYgZG93bmxvYWRJbWFnZS5yZWYuY29udGV4dG1lbnUuZ2V0Q29uZmlnKCk7CgogICAgICBpZiAoIXZpZXdFbmFibGVkICYmICFkb3dubG9hZEVuYWJsZWQpIHJldHVybjsKCiAgICAgIC8vIOafpeeci+WOn+WbvgogICAgICBjb25zdCBzaG93T3JpZ2luYWxQYWdlID0gZnVuY3Rpb24gKHsgaW1hZ2VzLCBjdXJyZW50IH0pIHsKICAgICAgICBpZiAodmlld1R5cGUgIT09ICdpbWFnZScpIHsKICAgICAgICAgIGltYWdlVmlld2VyLm9wZW4oeyBpbWFnZXMsIGN1cnJlbnQgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHdpbmRvdy5vcGVuKGltYWdlc1tjdXJyZW50IC0gMV0pOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8vIOa3u+WKoOS4gOS4quafpeeci+WOn+WbvueahOaMiemSru+8iOWcqOafpeeci+Wkp+WbvuaXgei+ue+8iQogICAgICBjb25zdCB2aWV3T3JpZ2luYWxCdXR0b24gPSB2aWV3TGFyZ2VMaW5rID0+IHsKICAgICAgICBjb25zdCB2aWV3T3JpZ2luYWxMaW5rQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsKICAgICAgICB2aWV3T3JpZ2luYWxMaW5rQ29udGFpbmVyLmlubmVySFRNTCA9ICc8bGk+PHNwYW4gY2xhc3M9ImxpbmUgU19saW5lMSI+PGEgY2xhc3M9IlNfdHh0MSIgaHJlZj0iamF2YXNjcmlwdDo7IiB0YXJnZXQ9Il9ibGFuayI+PGkgY2xhc3M9IldfZmljb24gZmljb25fc2VhcmNoIFNfZmljb24iPmw8L2k+PC9hPjwvc3Bhbj48L2xpPic7CiAgICAgICAgdmlld09yaWdpbmFsTGlua0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpJykuYWZ0ZXIoaTE4bi52aWV3T3JpZ2luYWxUZXh0KTsKICAgICAgICBjb25zdCB2aWV3T3JpZ2luYWxMaW5rID0gdmlld09yaWdpbmFsTGlua0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdhJyk7CiAgICAgICAgbGV0IGltYWdlcywgY3VycmVudDsKICAgICAgICBjb25zdCB1cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAoeyBpbWFnZXMsIGN1cnJlbnQgfSA9IGdldEltYWdlc0luZm8odmlld0xhcmdlTGluaykpOwogICAgICAgICAgdmlld09yaWdpbmFsTGluay5ocmVmID0gaW1hZ2VzW2N1cnJlbnQgLSAxXTsKICAgICAgICB9OwogICAgICAgIHZpZXdPcmlnaW5hbExpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICBpZiAodmlld09yaWdpbmFsTGluay5jbGFzc0xpc3QuY29udGFpbnMoJ1NfZmljb25fZGlzJykpIHsKICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHZpZXdUeXBlID09PSAncGFnZScpIHsKICAgICAgICAgICAgc2hvd09yaWdpbmFsUGFnZSh7IGltYWdlcywgY3VycmVudCB9KTsKICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICAobmV3IE11dGF0aW9uT2JzZXJ2ZXIodXBkYXRlKSkub2JzZXJ2ZSh2aWV3TGFyZ2VMaW5rLCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7CiAgICAgICAgdXBkYXRlKCk7CiAgICAgICAgcmV0dXJuIHZpZXdPcmlnaW5hbExpbmtDb250YWluZXIuZmlyc3RDaGlsZDsKICAgICAgfTsKCiAgICAgIC8vIOS4i+i9veWbvueJhwogICAgICBjb25zdCBkb3dubG9hZEltYWdlcyA9IGZ1bmN0aW9uIChpbWFnZXMsIHJlZikgewogICAgICAgIGNvbnN0IGZpbGVzID0gaW1hZ2VzLm1hcCgodXJsLCBpbmRleCkgPT4gewogICAgICAgICAgY29uc3Qgb3JpRmlsZW5hbWUgPSB1cmwuc2xpY2UodXJsLmxhc3RJbmRleE9mKCcvJykgKyAxKTsKICAgICAgICAgIGxldCBmaWxlbmFtZSA9IG9yaUZpbGVuYW1lOwogICAgICAgICAgaWYgKGRvd25sb2FkTmFtZSAhPT0gJ29yaWdpbmFsJykgewogICAgICAgICAgICBjb25zdCBleHRlbnNpb24gPSBvcmlGaWxlbmFtZS5zbGljZShvcmlGaWxlbmFtZS5sYXN0SW5kZXhPZignLicpICsgMSk7CiAgICAgICAgICAgIGZpbGVuYW1lID0gKGluZGV4ICsgMSkgKyAnLicgKyBleHRlbnNpb247CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBmZWVkID0gcmVmLmNsb3Nlc3QoJ1ttaWRdLCBbb21pZF0sIFtjb21tZW50X2lkXScpOwogICAgICAgICAgY29uc3QgZmVlZElkID0gZmVlZC5nZXRBdHRyaWJ1dGUoJ2NvbW1lbnRfaWQnKSB8fAogICAgICAgICAgICByZWYuY2xvc2VzdCgnLldCX2ZlZWRfZXhwYW5kJykgJiYgZmVlZC5nZXRBdHRyaWJ1dGUoJ29taWQnKSB8fAogICAgICAgICAgICBmZWVkLmdldEF0dHJpYnV0ZSgnbWlkJykgfHwgMDsKICAgICAgICAgIGNvbnN0IHBhdGggPSAnd2VpYm8taW1hZ2VzLycgKyBkb3dubG9hZC5maWxlbmFtZShmZWVkSWQpICsgJy8nICsgZmlsZW5hbWU7CiAgICAgICAgICByZXR1cm4geyB1cmwsIGZpbGVuYW1lOiBwYXRoIH07CiAgICAgICAgfSk7CiAgICAgICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHsKICAgICAgICAgIHV0aWwuZGVidWcoJ2Rvd25sb2FkIGZldGNoIHVybCAlcycsIGZpbGUudXJsKTsKICAgICAgICB9KTsKICAgICAgICBkb3dubG9hZC51cmxzKGZpbGVzKTsKICAgICAgfTsKCiAgICAgIC8vIOa3u+WKoOS4gOS4quS4i+i9veWbvueJh+eahOaMiemSru+8iOWcqOafpeeci+Wkp+WbvuaXgei+ue+8iQogICAgICBjb25zdCBkb3dubG9hZEJ1dHRvbiA9IHZpZXdMYXJnZUxpbmsgPT4gewogICAgICAgIGNvbnN0IGRvd25sb2FkTGlua0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICAgICAgZG93bmxvYWRMaW5rQ29udGFpbmVyLmlubmVySFRNTCA9ICc8bGk+PHNwYW4gY2xhc3M9ImxpbmUgU19saW5lMSI+PGEgY2xhc3M9IlNfdHh0MSIgaHJlZj0iamF2YXNjcmlwdDo7IiB0YXJnZXQ9Il9ibGFuayI+PGkgY2xhc3M9IldfZmljb24gZmljb25fc2VhcmNoIFNfZmljb24iPnw8L2k+PC9hPjwvc3Bhbj48L2xpPic7CiAgICAgICAgZG93bmxvYWRMaW5rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2knKS5hZnRlcihpMThuLmRvd25sb2FkSW1hZ2VUZXh0KTsKICAgICAgICBjb25zdCBkb3dubG9hZExpbmsgPSBkb3dubG9hZExpbmtDb250YWluZXIucXVlcnlTZWxlY3RvcignYScpOwogICAgICAgIGRvd25sb2FkTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgICAgIGlmICghZG93bmxvYWRMaW5rLmNsYXNzTGlzdC5jb250YWlucygnU19maWNvbl9kaXMnKSkgewogICAgICAgICAgICBjb25zdCB7IGltYWdlcyB9ID0gZ2V0SW1hZ2VzSW5mbyh2aWV3TGFyZ2VMaW5rKTsKICAgICAgICAgICAgZG93bmxvYWRJbWFnZXMoaW1hZ2VzLCBkb3dubG9hZExpbmspOwogICAgICAgICAgfQogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZG93bmxvYWRMaW5rQ29udGFpbmVyLmZpcnN0Q2hpbGQ7CiAgICAgIH07CgogICAgICAvLyDkvb/mjInpkq7kuI3lj6/nlKgKICAgICAgY29uc3QgZGlzYWJsZUJ1dHRvbiA9IGJ1dHRvbiA9PiB7CiAgICAgICAgY29uc3QgbGluayA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdhJyk7CiAgICAgICAgbGluay5jbGFzc05hbWUgPSAnU19maWNvbl9kaXMnOwogICAgICAgIGNvbnN0IGljb24gPSBsaW5rLnF1ZXJ5U2VsZWN0b3IoJ2knKTsKICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ1NfZmljb25fZGlzJyk7CiAgICAgIH07CgogICAgICAvLyDmo4Dmn6XlsZXlvIDnmoTlm77niYfvvIzmt7vliqDmn6XnnIvljp/lm77lkozkuIvovb3nmoTpk77mjqUKICAgICAgY29uc3QgYWRkSW1hZ2VIYW5kbGVyTGluayA9IGZ1bmN0aW9uIGFkZEltYWdlSGFuZGxlckxpbmsoKSB7CiAgICAgICAgY29uc3Qgdmlld0xhcmdlTGlua3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoWwogICAgICAgICAgLy8g5b6u5Y2a6YWN5Zu+CiAgICAgICAgICAnLldCX2ZlZWQgbGkgYVthY3Rpb24tdHlwZT0id2lkZ2V0X3Bob3RvdmlldyJdOm5vdChbeWF3Zi12aWV3LW9yaV0pJywKICAgICAgICAgIC8vIOivhOiuuumFjeWbvgogICAgICAgICAgJy5XQl9mZWVkIGxpIGFbYWN0aW9uLXR5cGU9IndpZGdldF9jb21tZW50UGhvdG9WaWV3Il06bm90KFt5YXdmLXZpZXctb3JpXSknLAogICAgICAgIF0uam9pbignLCcpKSk7CiAgICAgICAgdmlld0xhcmdlTGlua3MuZm9yRWFjaCh2aWV3TGFyZ2VMaW5rID0+IHsKICAgICAgICAgIHZpZXdMYXJnZUxpbmsuc2V0QXR0cmlidXRlKCd5YXdmLXZpZXctb3JpJywgJycpOwogICAgICAgICAgY29uc3QgZGlzYWJsZWQgPSB2aWV3TGFyZ2VMaW5rLmNsYXNzTGlzdC5jb250YWlucygnU19maWNvbl9kaXMnKTsKICAgICAgICAgIGNvbnN0IGxpID0gdmlld0xhcmdlTGluay5jbG9zZXN0KCdsaScpOwogICAgICAgICAgaWYgKGRvd25sb2FkRW5hYmxlZCkgewogICAgICAgICAgICBjb25zdCBidXR0b24gPSBkb3dubG9hZEJ1dHRvbih2aWV3TGFyZ2VMaW5rKTsKICAgICAgICAgICAgaWYgKGRpc2FibGVkKSBkaXNhYmxlQnV0dG9uKGJ1dHRvbik7CiAgICAgICAgICAgIGxpLmFmdGVyKGJ1dHRvbik7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodmlld0VuYWJsZWQpIHsKICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gdmlld09yaWdpbmFsQnV0dG9uKHZpZXdMYXJnZUxpbmspOwogICAgICAgICAgICBpZiAoZGlzYWJsZWQpIGRpc2FibGVCdXR0b24oYnV0dG9uKTsKICAgICAgICAgICAgbGkuYWZ0ZXIoYnV0dG9uKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfTsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChhZGRJbWFnZUhhbmRsZXJMaW5rKTsKCiAgICAgIC8vIOiuqem8oOagh+a1ruS4iuaYvuekuuWbvueJh+WNoeeJh+eahOmTvuaOpeaMh+WQkeWbvueJhwogICAgICBjb25zdCBpbWFnZUNhcmRBc0xpbmsgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc3QgaW1hZ2VjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2FbaW1hZ2VjYXJkXTpub3QoW3lhd2YtaW1hZ2VjYXJkLWxpbmtdKScpOwogICAgICAgIGlmICghaW1hZ2VjYXJkcy5sZW5ndGgpIHJldHVybjsKICAgICAgICBpbWFnZWNhcmRzLmZvckVhY2goaW1hZ2VjYXJkID0+IHsKICAgICAgICAgIGltYWdlY2FyZC5zZXRBdHRyaWJ1dGUoJ3lhd2YtaW1hZ2VjYXJkLWxpbmsnLCAneWF3Zi1pbWFnZWNhcmQtbGluaycpOwogICAgICAgICAgY29uc3QgcGlkID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhpbWFnZWNhcmQuZ2V0QXR0cmlidXRlKCdpbWFnZWNhcmQnKSkuZ2V0KCdwaWQnKTsKICAgICAgICAgIGNvbnN0IHVybCA9IGdldFVybEJ5UGlkKHBpZCk7CiAgICAgICAgICBpbWFnZWNhcmQuaHJlZiA9IHVybDsKICAgICAgICAgIGltYWdlY2FyZC50YXJnZXQgPSAnX2JsYW5rJzsKICAgICAgICAgIGltYWdlY2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBvYnNlcnZlci5kb20uYWRkKGltYWdlQ2FyZEFzTGluayk7CgogICAgICAvLyDlpITnkIbngrnlh7vml7bnm7TmjqXmn6XnnIvljp/lm74v5LiL6L2955qE5oOF5Ya1CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwogICAgICAgIGlmIChldmVudC5idXR0b24gIT09IDApIHJldHVybjsgLy8g5Y+q5ZON5bqU5bem6ZSu5pON5L2cCiAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcueWF3Zi1XX2ljb25fdGFnXzlwJykpIHJldHVybjsgLy8g5bGV5byA6L+H5aSa6KKr5oqY5Y+g55qE5Zu+54mH5oyJ6ZKu5LiN5ZON5bqUCiAgICAgICAgY29uc3QgcGljID0gdGFyZ2V0LmNsb3Nlc3QoJy5XQl9tZWRpYV93cmFwIC5XQl9waWMnKSB8fCB0YXJnZXQuY2xvc2VzdCgnYVtpbWFnZWNhcmRdJyk7CiAgICAgICAgaWYgKCFwaWMpIHJldHVybjsKICAgICAgICBjb25zdCBhY3RpdmUgPSAoZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc3Qgc2hpZnQgPSBldmVudC5zaGlmdEtleTsKICAgICAgICAgIGNvbnN0IGN0cmwgPSAvbWFjL2kudGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pID8gZXZlbnQubWV0YUtleSA6IGV2ZW50LmN0cmxLZXk7CiAgICAgICAgICBpZiAoc2hpZnQpIHJldHVybiBudWxsOwogICAgICAgICAgaWYgKCFkaXJlY3RWaWV3ICYmIHZpZXdFbmFibGVkICYmIGN0cmwpIHJldHVybiAndmlldyc7CiAgICAgICAgICBpZiAoIWRpcmVjdERvd25sb2FkICYmIGRvd25sb2FkRW5hYmxlZCAmJiBjdHJsKSByZXR1cm4gJ2Rvd25sb2FkJzsKICAgICAgICAgIGlmIChkaXJlY3RWaWV3KSByZXR1cm4gJ3ZpZXcnOwogICAgICAgICAgaWYgKGRpcmVjdERvd25sb2FkKSByZXR1cm4gJ2Rvd25sb2FkJzsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0oKSk7CiAgICAgICAgaWYgKCFhY3RpdmUpIHJldHVybjsKICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGNvbnN0IHsgaW1hZ2VzLCBjdXJyZW50IH0gPSBnZXRJbWFnZXNJbmZvKHBpYyk7CiAgICAgICAgY29uc3QgaXNWaWV3ID0gZGlyZWN0VmlldyB8fCAhZGlyZWN0RG93bmxvYWQgJiYgdmlld0VuYWJsZWQ7CiAgICAgICAgaWYgKGlzVmlldykgc2hvd09yaWdpbmFsUGFnZSh7IGltYWdlcywgY3VycmVudCB9KTsKICAgICAgICBlbHNlIGRvd25sb2FkSW1hZ2VzKGltYWdlcywgdGFyZ2V0KTsKICAgICAgfSwgdHJ1ZSk7CgogICAgICAvLyDmt7vliqDlj7PplK7oj5zljZXmlK/mjIEKICAgICAgaWYgKGVudi5jb25maWcuY29udGV4dE1lbnVTdXBwb3J0ZWQgJiYgKGNvbnRleHRNZW51VmlldyB8fCBjb250ZXh0TWVudURvd25sb2FkKSkgewogICAgICAgIGNvbnRleHRtZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uICgvKiogQHR5cGUge01vdXNlRXZlbnR9ICovZXZlbnQpIHsKICAgICAgICAgIC8qKiBAdHlwZSB7RWxlbWVudCAmIEV2ZW50VGFyZ2V0fSAqLwogICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwogICAgICAgICAgY29uc3QgcGljID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY29uc3QgcGljID0gdGFyZ2V0LmNsb3Nlc3QoJy5XQl9tZWRpYV93cmFwIC5XQl9waWMnKSB8fCB0YXJnZXQuY2xvc2VzdCgnYVtpbWFnZWNhcmRdJyk7CiAgICAgICAgICAgIGlmIChwaWMpIHJldHVybiBwaWM7CiAgICAgICAgICAgIGNvbnN0IGZlZWQgPSB0YXJnZXQuY2xvc2VzdCgnLldCX2ZlZWRfdHlwZScpOwogICAgICAgICAgICBpZiAoIWZlZWQpIHJldHVybiBudWxsOwogICAgICAgICAgICBjb25zdCBmZWVkUGljID0gZmVlZC5xdWVyeVNlbGVjdG9yKCcuV0JfbWVkaWFfd3JhcCAuV0JfcGljJyk7CiAgICAgICAgICAgIHJldHVybiBmZWVkUGljOwogICAgICAgICAgfSgpKTsKICAgICAgICAgIGlmICghcGljIHx8ICFwaWMuY29udGFpbnModGFyZ2V0KSkgcmV0dXJuIFtdOwogICAgICAgICAgY29uc3QgeyBpbWFnZXMsIGN1cnJlbnQgfSA9IGdldEltYWdlc0luZm8ocGljKTsKICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdOwogICAgICAgICAgaWYgKGNvbnRleHRNZW51VmlldykgewogICAgICAgICAgICByZXN1bHQucHVzaCh7CiAgICAgICAgICAgICAgdGl0bGU6IGkxOG4udmlld09yaWdpbmFsVGV4dCwKICAgICAgICAgICAgICBvbmNsaWNrOiAoKSA9PiB7IHNob3dPcmlnaW5hbFBhZ2UoeyBpbWFnZXMsIGN1cnJlbnQgfSk7IH0sCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNvbnRleHRNZW51RG93bmxvYWQpIHsKICAgICAgICAgICAgcmVzdWx0LnB1c2goewogICAgICAgICAgICAgIHRpdGxlOiBpMThuLmRvd25sb2FkSW1hZ2VUZXh0LAogICAgICAgICAgICAgIG9uY2xpY2s6ICgpID0+IHsgZG93bmxvYWRJbWFnZXMoeyBpbWFnZXMsIGN1cnJlbnQgfSk7IH0sCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBkb3dubG9hZEltYWdlOiBlbnYuY29uZmlnLmNvbnRleHRNZW51U3VwcG9ydGVkID8gewogICAgICBjbjogJ+afpeeci+WbvueJh+a3u+WKoOKAnOaJuemHj+S4i+i9veKAnemTvuaOpXzkvb/nlKh7e25hbWV9feaWh+S7tuWQjeS/neWtmHx8e3tkaXJlY3R9feeCueWHu+e8qeeVpeWbvuaXtuebtOaOpeW8gOWni+S4i+i9vXx8e3tjb250ZXh0bWVudX195re75Yqg5Yiw5Y+z6ZSu6I+c5Y2VJywKICAgICAgdHc6ICfmn6XnnIvlnJbniYfmt7vliqDjgIzmibnmrKHkuIvovInjgI3pgKPntZB85L2/55Soe3tuYW1lfX3mqpTlkI3lhLLlrZh8fHt7ZGlyZWN0fX3pu57mk4rnuK7lnJbmmYLnm7TmjqXplovlp4vkuIvovIl8fHt7Y29udGV4dG1lbnV9fea3u+WKoOWIsOaTjeS9nOWKn+iDveihqCcsCiAgICAgIGVuOiAnQWRkICJCYXRjaCBEb3dubG9hZCIgbGluayBmb3IgaW1hZ2VzIHt7bmFtZX19fFVzZSB7e25hbWV9fSBmaWxlbmFtZXMgfHwge3tkaXJlY3R9fSBUcmlnZ2VyIGRvd25sb2FkIGJ5IGNsaWNraW5nIG9uIHRodW1ibmFpbHx8e3tjb250ZXh0bWVudX19IEFkZCB0byBjb250ZXh0IG1lbnUnLAogICAgfSA6IHsKICAgICAgY246ICfmn6XnnIvlm77niYfmt7vliqDigJzmibnph4/kuIvovb3igJ3pk77mjqV85L2/55Soe3tuYW1lfX3mlofku7blkI3kv53lrZh8fHt7ZGlyZWN0fX3ngrnlh7vnvKnnlaXlm77ml7bnm7TmjqXlvIDlp4vkuIvovb0nLAogICAgICB0dzogJ+afpeeci+WclueJh+a3u+WKoOOAjOaJueasoeS4i+i8ieOAjemAo+e1kHzkvb/nlKh7e25hbWV9feaqlOWQjeWEsuWtmHx8e3tkaXJlY3R9fem7nuaTiue4ruWcluaZguebtOaOpemWi+Wni+S4i+i8ieihqCcsCiAgICAgIGVuOiAnQWRkICJCYXRjaCBEb3dubG9hZCIgbGluayBmb3IgaW1hZ2VzIHt7bmFtZX19fFVzZSB7e25hbWV9fSBmaWxlbmFtZXMgfHwge3tkaXJlY3R9fSBUcmlnZ2VyIGRvd25sb2FkIGJ5IGNsaWNraW5nIG9uIHRodW1ibmFpbCcsCiAgICB9LAogICAgZG93bmxvYWRJbWFnZU5hbWVPcmlnaW5hbDogewogICAgICBjbjogJ+WOn+WniycsCiAgICAgIGVuOiAnb3JpZ2luYWwnLAogICAgfSwKICAgIGRvd25sb2FkSW1hZ2VOYW1lSW5kZXg6IHsKICAgICAgY246ICfluo/lj7cnLAogICAgICB0dzogJ+W6j+iZnycsCiAgICAgIGVuOiAnaW5kZXgnLAogICAgfSwKICAgIGRvd25sb2FkSW1hZ2VUZXh0OiB7CiAgICAgIGNuOiAn5om56YeP5LiL6L29JywKICAgICAgdHc6ICfmibnmrKHkuIvovIknLAogICAgICBlbjogJ0JhdGNoIERvd25sb2FkJywKICAgIH0sCiAgfSk7CgogIG1lZGlhLmRvd25sb2FkSW1hZ2UgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmZWVkX2Rvd25sb2FkX2ltYWdlJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IG1lZGlhLm1lZGlhLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZG93bmxvYWRJbWFnZSwKICAgIHJlZjogewogICAgICBuYW1lOiB7CiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgc2VsZWN0OiBbCiAgICAgICAgICB7IHZhbHVlOiAnaW5kZXgnLCB0ZXh0OiAoKSA9PiBpMThuLmRvd25sb2FkSW1hZ2VOYW1lSW5kZXggfSwKICAgICAgICAgIHsgdmFsdWU6ICdvcmlnaW5hbCcsIHRleHQ6ICgpID0+IGkxOG4uZG93bmxvYWRJbWFnZU5hbWVPcmlnaW5hbCB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIGRpcmVjdDogeyB0eXBlOiAnYm9vbGVhbicgfSwKICAgICAgY29udGV4dG1lbnU6IHsgdHlwZTogJ2Jvb2xlYW4nLCBpbml0aWFsOiB0cnVlIH0sCiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgdGhpcy5yZWYuZGlyZWN0LmFkZENvbmZpZ0xpc3RlbmVyKG5ld1ZhbHVlID0+IHsKICAgICAgICBpZiAobmV3VmFsdWUpIG1lZGlhLnZpZXdPcmlnaW5hbC5yZWYuZGlyZWN0LnNldENvbmZpZyhmYWxzZSk7CiAgICAgIH0pOwogICAgICAvLyDlrp7njrDlnKjmn6XnnIvljp/lm77lip/og73pgqPph4wKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgaW1hZ2VQcmV2aWV3TW9yZTogeyBjbjogJ+aUr+aMgei2hei/hyA5IOW8oOmFjeWbvueahOW+ruWNmnt7aX19fHzpooTop4h7e2NvdW50fX18fOacieWbvueJh+acquaYvuekuuaXtnt7bW9yZX19JywgdHc6ICfmlK/mj7TotoXpgY4gOSDlvLXphY3lnJbnmoTlvq7ljZrpoa/npLp7e2l9fXx86aCQ6Ka9e3tjb3VudH19fHzmnInlnJbniYfmnKrpoa/npLrmmYJ7e21vcmV9fScsIGVuOiAnU3VwcG9ydCBmZWVkcyB3aXRoIG1vcmUgdGhhbiA5IGltYWdlcyB7e2l9fSB8fCBwcmV2aWV3IHt7Y291bnR9fXx8d2l0aCB7e21vcmV9fScgfSwKICAgIGltYWdlUHJldmlld01vcmVEZXRhaWw6IHsgY246ICfpnIDopoHmiZPlvIDov5nkuKrlip/og73vvIzku6XluK7liqnmn6XnnIvljp/lm77jgIHmibnph4/kuIvovb3nrYnlip/og73mlK/mjIHotoXov4cgOSDlvKDlm77niYfnmoTlvq7ljZrjgIInIH0sCiAgICBpbWFnZVByZXZpZXdGaXJzdDN4MjogeyBjbjogJ+WJjSA2IOW8oO+8iOavj+ihjCAzIOW8oO+8iScsIHR3OiAn5YmNIDYg5by177yI5q+P5YiXIDMg5by177yJJywgZW46ICdmaXJzdCA2ICgzIGVhY2ggcm93KScgfSwKICAgIGltYWdlUHJldmlld0ZpcnN0NHgyOiB7IGNuOiAn5YmNIDgg5byg77yI5q+P6KGMIDQg5byg77yJJywgdHc6ICfliY0gOCDlvLXvvIjmr4/liJcgNCDlvLXvvIknLCBlbjogJ2ZpcnN0IDggKDQgZWFjaCByb3cpJyB9LAogICAgaW1hZ2VQcmV2aWV3Rmlyc3QzeDM6IHsgY246ICfliY0gOSDlvKDvvIjmr4/ooYwgMyDlvKDvvIknLCB0dzogJ+WJjSA5IOW8te+8iOavj+WIlyAzIOW8te+8iScsIGVuOiAnZmlyc3QgOSAoMyBlYWNoIHJvdyknIH0sCiAgICBpbWFnZVByZXZpZXdGaXJzdDR4MzogeyBjbjogJ+WJjSAxMiDlvKDvvIjmr4/ooYwgNCDlvKDvvIknLCB0dzogJ+WJjSAxMiDlvLXvvIjmr4/liJcgNCDlvLXvvIknLCBlbjogJ2ZpcnN0IDEyICg0IGVhY2ggcm93KScgfSwKICAgIGltYWdlUHJldmlld0FsbDM6IHsgY246ICflhajpg6jlm77niYfvvIjmr4/ooYwgMyDlvKDvvIknLCB0dzogJ+WFqOmDqOWclueJh++8iOavj+WIlyAzIOW8te+8iScsIGVuOiAnYWxsICgzIGVhY2ggcm93KScgfSwKICAgIGltYWdlUHJldmlld0FsbDQ6IHsgY246ICflhajpg6jlm77niYfvvIjmr4/ooYwgNCDlvKDvvIknLCB0dzogJ+WFqOmDqOWclueJh++8iOavj+WIlyA0IOW8te+8iScsIGVuOiAnYWxsICg0IGVhY2ggcm93KScgfSwKICAgIGltYWdlUHJldmlld1VzZVRleHQ6IHsgY246ICflnKjlm77niYflkI7mmL7npLrlsZXlvIDmlLbotbfmjInpkq4nLCB0dzogJ+WcqOWclueJh+W+jOmhr+ekuuWxlemWi+aUtui1t+aMiemIlScsIGVuOiAnc2hvdyAvIGhpZGUgYnV0dG9uIGFmdGVyIGltYWdlcycgfSwKICAgIGltYWdlUHJldmlld1VzZU1hc2s6IHsgY246ICfmnIDlkI7kuIDlvKDpooTop4jmmL7npLrliankvZnlm77niYfmlbDph48nLCB0dzogJ+acgOW+jOS4gOW8temgkOimvemhr+ekuuWJqemkmOWclueJh+aVuOmHjycsIGVuOiAnbnVtYmVyIG9mIHJlbWFpbmluZyBvbiBsYXN0IGltYWdlJyB9LAogICAgYW5pbWF0ZWRJbWFnZTogeyBjbjogJ+WKqOWbvicgfSwKICAgIHByZXZpZXdBbGxTaG93OiB7IGNuOiAn5p+l55yL5YWo6YOo5Zu+54mH77yI5YWxIHsxfSDlvKDvvIknLCB0dzogJ+mWseimveWFqOmDqOWclueJh++8iOWFsSB7MX0g5by177yJJywgZW46ICdWaWV3IGFsbCAoezF9IGltYWdlcyknIH0sCiAgICBwcmV2aWV3QWxsRm9sZDogeyBjbjogJ+aUtui1t+WbvueJhycsIHR3OiAn5pS26LW35ZyW54mHJywgZW46ICdGb2xkIGltYWdlcycgfSwKICB9KTsKCiAgbWVkaWEuaW1hZ2VQcmV2aWV3QWxsID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgaWQ6ICdpbWFnZV9wcmV2aWV3X2FsbCcsCiAgICB2ZXJzaW9uOiA1MCwKICAgIHBhcmVudDogbWVkaWEubWVkaWEsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5pbWFnZVByZXZpZXdNb3JlLAogICAgcmVmOiB7CiAgICAgIGNvdW50OiB7CiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgaW5pdGlhbDogJzN4MycsCiAgICAgICAgc2VsZWN0OiBbCiAgICAgICAgICB7IHZhbHVlOiAnM3gyJywgdGV4dDogKCkgPT4gaTE4bi5pbWFnZVByZXZpZXdGaXJzdDN4MiB9LAogICAgICAgICAgeyB2YWx1ZTogJzR4MicsIHRleHQ6ICgpID0+IGkxOG4uaW1hZ2VQcmV2aWV3Rmlyc3Q0eDIgfSwKICAgICAgICAgIHsgdmFsdWU6ICczeDMnLCB0ZXh0OiAoKSA9PiBpMThuLmltYWdlUHJldmlld0ZpcnN0M3gzIH0sCiAgICAgICAgICB7IHZhbHVlOiAnNHgzJywgdGV4dDogKCkgPT4gaTE4bi5pbWFnZVByZXZpZXdGaXJzdDR4MyB9LAogICAgICAgICAgeyB2YWx1ZTogJzN4MCcsIHRleHQ6ICgpID0+IGkxOG4uaW1hZ2VQcmV2aWV3QWxsMyB9LAogICAgICAgICAgeyB2YWx1ZTogJzR4MCcsIHRleHQ6ICgpID0+IGkxOG4uaW1hZ2VQcmV2aWV3QWxsNCB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIG1vcmU6IHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBpbml0aWFsOiAndGV4dCcsCiAgICAgICAgc2VsZWN0OiBbCiAgICAgICAgICB7IHZhbHVlOiAndGV4dCcsIHRleHQ6ICgpID0+IGkxOG4uaW1hZ2VQcmV2aWV3VXNlVGV4dCB9LAogICAgICAgICAgeyB2YWx1ZTogJ21hc2snLCB0ZXh0OiAoKSA9PiBpMThuLmltYWdlUHJldmlld1VzZU1hc2sgfSwKICAgICAgICBdLAogICAgICB9LAogICAgICBpOiB7IHR5cGU6ICdidWJibGUnLCBpY29uOiAnYXNrJywgdGVtcGxhdGU6ICgpID0+IGkxOG4uaW1hZ2VQcmV2aWV3TW9yZURldGFpbCB9LAogICAgfSwKICAgIGluaXQoKSB7CiAgICAgIHRoaXMucmVmLmNvdW50LmFkZENvbmZpZ0xpc3RlbmVyKGNvdW50ID0+IHsKICAgICAgICBjb25zdCBzaG93QWxsID0gY291bnQuZW5kc1dpdGgoJzAnKTsKICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMucmVmLm1vcmUuZ2V0UmVuZGVySXRlbXMoKTsKICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgY29uc3QgY29udGFpbmVyID0gaXRlbS5wYXJlbnROb2RlOwogICAgICAgICAgaWYgKHNob3dBbGwpIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgZWxzZSBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGNvbnN0IHByZXZpZXdTaXplID0gdGhpcy5yZWYuY291bnQuZ2V0Q29uZmlnKCk7CiAgICAgICAgY29uc3QgcHJldmlld1dpZHRoID0gK3ByZXZpZXdTaXplWzBdOwogICAgICAgIGNvbnN0IHByZXZpZXdDb3VudCA9IHByZXZpZXdTaXplWzBdICogcHJldmlld1NpemVbMl0gfHwgSW5maW5pdHk7CiAgICAgICAgY29uc3QgbGFzdEltYWdlTWFzayA9IHRoaXMucmVmLm1vcmUuZ2V0Q29uZmlnKCkgPT09ICdtYXNrJzsKCiAgICAgICAgb2JzZXJ2ZXIuZmVlZC5vbkFmdGVyKGFzeW5jIGZ1bmN0aW9uICgvKiogQHR5cGUge0hUTUxFbGVtZW50fSAqL2ZlZWQpIHsKICAgICAgICAgIC8vIOaUtuiXj+mhtemdouebruWJjeWOn+eUn+S4jeaUr+aMge+8jOWOn+WboOS4jeaYjgogICAgICAgICAgY29uc3Qgb2ZmaWNpYWxOb3RTdXBwb3J0ID0gaW5pdC5wYWdlLnR5cGUoKSA9PT0gJ2Zhdic7CiAgICAgICAgICAvLyDljZXmnaHlvq7ljZrpobXpnaLlt7Lnu4/pooTlhYjlsZXlvIDkuobvvIzmiYDku6XkuI3og73lho3nu6fnu63mk43kvZzkuoYKICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbaWRePSJQbF9PZmZpY2lhbF9XZWlib0RldGFpbF9fIl0nKSkgcmV0dXJuOwogICAgICAgICAgY29uc3QgdWwgPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoJ3VsW25vZGUtdHlwZT0iZmxfcGljX2xpc3QiXScpOwogICAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5Zu+54mH77yM5oiW6ICF5bey57uP5pyJ56ys5Y2B5byg5Zu+54mH5LqG77yM6YKj5oiR5Lus5bqU6K+l5LiN5bel5L2cCiAgICAgICAgICBpZiAoIXVsIHx8IHVsLnF1ZXJ5U2VsZWN0b3IoJy5saV8xMCcpKSByZXR1cm47CiAgICAgICAgICAvLyDpppbpobXnrYnlrpjmlrnmlK/mjIHnmoTpobXpnaLvvIzkvJrmoIforrAgb3ZlcjlwaWPvvIzmiJHku6znlKjov5nkuKrlsZ7mgKfmnaXliKTmlq0KICAgICAgICAgIGlmICghb2ZmaWNpYWxOb3RTdXBwb3J0ICYmICF1bC5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJykuaW5jbHVkZXMoJ292ZXI5cGljPTEnKSkgcmV0dXJuOwogICAgICAgICAgLy8g55uu5YmN6YOo5YiG6aG16Z2i5rKh5pyJ5pSv5oyB77yM5oiR5Lus5Y+q6IO955yL5Yiw5ruhIDkg5byg5Zu+77yM5bCx5Y675qOA5p+l5piv5LiN5piv5pyJ56ys5Y2B5bygCiAgICAgICAgICBpZiAob2ZmaWNpYWxOb3RTdXBwb3J0ICYmICF1bC5xdWVyeVNlbGVjdG9yKCcubGlfOScpKSByZXR1cm47CiAgICAgICAgICBjb25zdCBtaWQgPSAoZmVlZFBhcnNlci5pc0ZvcndhcmQoZmVlZCkgPyBmZWVkUGFyc2VyLm9taWQgOiBmZWVkUGFyc2VyLm1pZCkoZmVlZCk7CiAgICAgICAgICBjb25zdCBbYXV0aG9yXSA9IGZlZWRQYXJzZXIuYXV0aG9yLmlkKGZlZWQpOwogICAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSBmZWVkUGFyc2VyLmlzRm9yd2FyZChmZWVkKSA/IGZlZWRQYXJzZXIub3JpZ2luYWwuaWQoZmVlZCkgOiBhdXRob3I7CiAgICAgICAgICB1bC5jbGFzc0xpc3QuYWRkKCd5YXdmLVdCX21lZGlhX2FfbTlwX2xvYWRpbmcnKTsKICAgICAgICAgIC8qKiBAdHlwZSB7c3RyaW5nW119ICovCiAgICAgICAgICBjb25zdCBhbGxJbWFnZXMgPSBhd2FpdCByZXF1ZXN0LmdldEFsbEltYWdlcyhvcmlnaW5hbCwgbWlkKTsKICAgICAgICAgIHVsLmNsYXNzTGlzdC5yZW1vdmUoJ3lhd2YtV0JfbWVkaWFfYV9tOXBfbG9hZGluZycpOwogICAgICAgICAgaWYgKCFhbGxJbWFnZXMgfHwgIWFsbEltYWdlcy5sZW5ndGgpIHJldHVybjsKICAgICAgICAgIGNvbnN0IGltYWdlQ291bnQgPSBhbGxJbWFnZXMubGVuZ3RoOwogICAgICAgICAgaWYgKGltYWdlQ291bnQgPT09IDkgJiYgb2ZmaWNpYWxOb3RTdXBwb3J0KSByZXR1cm47CiAgICAgICAgICBjb25zdCBwaWRzID0gYWxsSW1hZ2VzLm1hcChpbWcgPT4gaW1nLnJlcGxhY2UoL14uKlwvKC4qKVwuLiokLywgJyQxJykpOwogICAgICAgICAgY29uc3QgaW1nVHlwZSA9IHR5cGUgPT4gaW1nID0+IGltZy5yZXBsYWNlKC9eKC4qXC8pLiooXC8uKikkLywgKF8sIGQsIG4pID0+IGQgKyB0eXBlICsgbik7CiAgICAgICAgICAvLyDmnIDlkI7kuIDkuKrlm77niYfnmoTmoLzlvI/lkozliKvkurrkuI3kuIDmoLfvvIzlpoLmnpzmiJHku6zopoHmmL7npLrnmoTkuI3mmK855Liq77yM5bCx5Lya5b6I5aWH5oCq77yM5omA5Lul5oiR5Lus5Yig5o6J5YaN6Ieq5bex5Yqg5LiA6YGNCiAgICAgICAgICB1bC5yZW1vdmVDaGlsZCh1bC5xdWVyeVNlbGVjdG9yKCcubGlfOScpKTsKICAgICAgICAgIGFsbEltYWdlcy5mb3JFYWNoKChpbWFnZSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgaWYgKGluZGV4IDwgOCkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBwaWQgPSBwaWRzW2luZGV4XTsKICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgICAgICBsaS5jbGFzc05hbWUgPSBgV0JfcGljIGxpXyR7aW5kZXggKyAxfSBTX2JnMSBTX2xpbmUyIGJpZ2N1cnNvciBsaV9mb2N1cyB5YXdmLWxpX21vcmVgOwogICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJywgYGlzUHJpdmF0ZT0wJnJlbGF0aW9uPTAmcGljX2lkPSR7cGlkfWApOwogICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbi10eXBlJywgJ2ZsX3BpY3MnKTsKICAgICAgICAgICAgbGkuc2V0QXR0cmlidXRlKCdzdWRhLXVhdHJhY2snLCBga2V5PXRibG9nX25ld2ltYWdlX2ZlZWQmdmFsdWU9aW1hZ2VfZmVlZF91bmZvbGQ6JHttaWR9OiR7cGlkfToke2F1dGhvcn06MGApOwogICAgICAgICAgICBjb25zdCBpbWcgPSBsaS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKSk7CiAgICAgICAgICAgIC8vIOWboOS4uuS4jeefpemBk+aAu+WuveavlOeahOaXtuWAmeS4jeWkquaWueS+v+WkhOeQhiBvcmozNjDvvIzmiYDku6XnlKggdGh1bWIzMDAg5Luj5pu/5LiA5LiLCiAgICAgICAgICAgIGltZy5zcmMgPSBpbWdUeXBlKCd0aHVtYjMwMCcpKGltYWdlKTsKICAgICAgICAgICAgaW1nLnN0eWxlID0gJ2hlaWdodDoxMTBweDt3aWR0aDoxMTBweDt0b3A6MDtsZWZ0OjA7JzsKICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpOwogICAgICAgICAgICBpZiAoaW1hZ2UuZW5kc1dpdGgoJy5naWYnKSkgewogICAgICAgICAgICAgIGNvbnN0IHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTsKICAgICAgICAgICAgICB0aXAuY2xhc3NOYW1lID0gJ1dfaWNvbl90YWdfdjInOwogICAgICAgICAgICAgIHRpcC50ZXh0Q29udGVudCA9IGkxOG4uYW5pbWF0ZWRJbWFnZTsKICAgICAgICAgICAgICBsaS5hcHBlbmRDaGlsZCh0aXApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoaW1hZ2VDb3VudCA8IDEwKSByZXR1cm47CiAgICAgICAgICAvLyDlkIzml7bkv53nlZkgV0JfbWVkaWFfYV9tOQogICAgICAgICAgdWwuY2xhc3NMaXN0LmFkZCgneWF3Zi1XQl9tZWRpYV9hX20nICsgaW1hZ2VDb3VudCwgJ3lhd2YtV0JfbWVkaWFfYV9tOXAnKTsKICAgICAgICAgIC8vIOS4jeiDveeUqCBVUkxTZWFyY2hQYXJhbXMg5p2l5aSE55CGIGFjdGlvbkRhdGHvvIzlm6DkuLrlroPpnIDopoHpobnnm67pl7TnmoTpgJflj7fkuI3ooqvovazkuYnmiY3og73mraPluLjlt6XkvZwKICAgICAgICAgIGNvbnN0IGFjdGlvbkRhdGEgPSB1bC5nZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJykuc3BsaXQoJyYnKTsKICAgICAgICAgIGNvbnN0IHNldEFjdGlvbkRhdGEgPSAoa2V5LCB2YWx1ZSkgPT4gewogICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IGtleSArICc9JyArIHZhbHVlLm1hcChlbmNvZGVVUklDb21wb25lbnQpLmpvaW4oJywnKTsKICAgICAgICAgICAgY29uc3QgaXRlbSA9IGFjdGlvbkRhdGEuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5zdGFydHNXaXRoKGtleSArICc9JykpOwogICAgICAgICAgICBpZiAoaXRlbSAhPT0gLTEpIGFjdGlvbkRhdGFbaXRlbV0gPSBuZXdWYWx1ZTsKICAgICAgICAgICAgZWxzZSBhY3Rpb25EYXRhLnB1c2gobmV3VmFsdWUpOwogICAgICAgICAgfTsKICAgICAgICAgIHNldEFjdGlvbkRhdGEoJ2NsZWFyX3BpY1NyYycsIGFsbEltYWdlcy5tYXAoaW1nVHlwZSgnbXc2OTAnKSkpOwogICAgICAgICAgc2V0QWN0aW9uRGF0YSgndGh1bWJfcGljU3JjJywgYWxsSW1hZ2VzLm1hcChpbWdUeXBlKCdvcmozNjAnKSkpOwogICAgICAgICAgc2V0QWN0aW9uRGF0YSgncGljX2lkcycsIHBpZHMpOwogICAgICAgICAgc2V0QWN0aW9uRGF0YSgnb2JqZWN0X2lkcycsIHBpZHMubWFwKHBpZCA9PiAnMTA0MjAxODonICsgcGlkKSk7CiAgICAgICAgICAvLyDlvq7ljZroh6rlt7HliKTmlq3nmoTmmK8gb3ZlcjlwaWMgPT0gMe+8jOaJgOS7peaIkeS7rOeUqOWbvueJh+aVsOmHj+S7o+abv+S4gOS4i+i/meS4quWAvAogICAgICAgICAgLy8g6L+Z5qC35pei5YyF5ousICJvdmVyOXBpYz0xIiDlrZDkuLLvvIzkuZ/kv53mjIHkuoYgdHJ1dGh577yM5ZCM5pe26L+Y5LiN5pivIDEKICAgICAgICAgIHNldEFjdGlvbkRhdGEoJ292ZXI5cGljJywgW2FsbEltYWdlcy5sZW5ndGhdKTsKICAgICAgICAgIC8vIEdJRiDlr7nlupTnmoTop4bpopEgaWQg5ou/5LiN5Yiw77yM5omA5Lul5bCx5LiN5pu05paw5LqG77yM5Y+N5q2j5Lmf5bCx5piv5Yqo5Zu+5pS+5LiN5LqG572i5LqGCiAgICAgICAgICB1bC5zZXRBdHRyaWJ1dGUoJ2FjdGlvbi1kYXRhJywgYWN0aW9uRGF0YS5qb2luKCcmJykpOwoKICAgICAgICAgIGlmIChpbWFnZUNvdW50ID4gcHJldmlld0NvdW50KSB7CiAgICAgICAgICAgIC8qKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9ICovCiAgICAgICAgICAgIGNvbnN0IG1lZGlhV3JhcCA9IHVsLmNsb3Nlc3QoJy5XQl9tZWRpYV93cmFwJyk7CiAgICAgICAgICAgIGlmIChsYXN0SW1hZ2VNYXNrKSB7CiAgICAgICAgICAgICAgY29uc3QgbGFzdEltYWdlID0gdWwucXVlcnlTZWxlY3RvckFsbCgnLldCX3BpYycpW3ByZXZpZXdDb3VudCAtIDFdOwogICAgICAgICAgICAgIGNvbnN0IG1hc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgbWFzay5jbGFzc05hbWUgPSAneWF3Zi1XX2ljb25fdGFnXzlwIFdfaWNvbl90YWdfOXAnOwogICAgICAgICAgICAgIG1hc2sudGV4dENvbnRlbnQgPSAnKycgKyAoaW1hZ2VDb3VudCAtIHByZXZpZXdDb3VudCk7CiAgICAgICAgICAgICAgbGFzdEltYWdlLmFwcGVuZENoaWxkKG1hc2spOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIOexu+S8vOi2hei/hyAxNDAg5a2X55qE5bGV5byA5YWo5paH5LiA5qC377yM5oiR5Lus5pi+56S65LiA5Liq5p+l55yL5omA5pyJ5Zu+54mH55qE5oyJ6ZKuCiAgICAgICAgICAgICAgY29uc3QgZm9sZENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgIGZvbGRDb250YWluZXIuY2xhc3NOYW1lID0gJ3lhd2YtV0JfbWVkaWFfYV9jdHJsIHlhd2YtV0JfdGV4dF9zaXplJzsKICAgICAgICAgICAgICBmb2xkQ29udGFpbmVyLmlubmVySFRNTCA9ICc8YSBocmVmPSJqYXZhc2NyaXB0OjsiIGNsYXNzPSJ5YXdmLVdCX21lZGlhX2Ffc2hvdyI+PGkgY2xhc3M9IldfZmljb24gZmljb25fYXJyb3dfZG93biI+YzwvaT48L2E+PGEgaHJlZj0iamF2YXNjcmlwdDo7IiBjbGFzcz0ieWF3Zi1XQl9tZWRpYV9hX2ZvbGQiPjxpIGNsYXNzPSJXX2ZpY29uIGZpY29uX2Fycm93X3VwIj5kPC9pPjwvYT4nOwogICAgICAgICAgICAgIGNvbnN0IHNob3dCdXR0b24gPSBmb2xkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLVdCX21lZGlhX2Ffc2hvdycpOwogICAgICAgICAgICAgIGNvbnN0IHNob3dUZXh0ID0gaTE4bi5wcmV2aWV3QWxsU2hvdy5yZXBsYWNlKCd7MX0nLCAoKSA9PiBpbWFnZUNvdW50KTsKICAgICAgICAgICAgICBzaG93QnV0dG9uLmluc2VydEJlZm9yZShkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzaG93VGV4dCksIHNob3dCdXR0b24uZmlyc3RDaGlsZCk7CiAgICAgICAgICAgICAgY29uc3QgZm9sZEJ1dHRvbiA9IGZvbGRDb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtV0JfbWVkaWFfYV9mb2xkJyk7CiAgICAgICAgICAgICAgY29uc3QgZm9sZFRleHQgPSBpMThuLnByZXZpZXdBbGxGb2xkOwogICAgICAgICAgICAgIGZvbGRCdXR0b24uaW5zZXJ0QmVmb3JlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGZvbGRUZXh0KSwgZm9sZEJ1dHRvbi5maXJzdENoaWxkKTsKICAgICAgICAgICAgICBzaG93QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICAgICAgbWVkaWFXcmFwLmNsYXNzTGlzdC5hZGQoJ3lhd2YtV0JfbWVkaWFfYV9hbGwnKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBmb2xkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3Qgb2xkSGVpZ2h0ID0gbWVkaWFXcmFwLmNsaWVudEhlaWdodDsKICAgICAgICAgICAgICAgIGNvbnN0IG9sZFNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7CiAgICAgICAgICAgICAgICBtZWRpYVdyYXAuY2xhc3NMaXN0LnJlbW92ZSgneWF3Zi1XQl9tZWRpYV9hX2FsbCcpOwogICAgICAgICAgICAgICAgLy8g6LCD5pW05rua5Yqo5p2h5Lul6YCC5bqU6auY5bqm5Y+Y5YyWCiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBjb25zdCBuZXdIZWlnaHQgPSBtZWRpYVdyYXAuY2xpZW50SGVpZ2h0OwogICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gb2xkU2Nyb2xsVG9wIC0gb2xkSGVpZ2h0ICsgbmV3SGVpZ2h0OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgbWVkaWFXcmFwLmFwcGVuZENoaWxkKGZvbGRDb250YWluZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUocHJldmlld0NvdW50KSkgY3NzLmFwcGVuZChgLnlhd2YtV0JfbWVkaWFfYV9tOXAgLmxpXyR7cHJldmlld0NvdW50fSB+IC5XQl9waWMgeyBkaXNwbGF5OiBub25lOyB9YCk7CiAgICAgICAgY3NzLmFwcGVuZChgCi55YXdmLVdCX21lZGlhX2FfbTlwX2xvYWRpbmcgeyB2aXNpYmlsaXR5OiBoaWRkZW47IG9wYWNpdHk6IDA7IH0KLnlhd2YtV0JfbWVkaWFfYV9hbGwgLnlhd2YtV19pY29uX3RhZ185cCB7IGRpc3BsYXk6IG5vbmU7IH0KLnlhd2YtV0JfbWVkaWFfYV9hbGwgLnlhd2YtV0JfbWVkaWFfYV9tOXAgLldCX3BpYyB7IGRpc3BsYXk6IGJsb2NrOyB9Ci55YXdmLVdCX21lZGlhX2FfZm9sZCB7IGRpc3BsYXk6IG5vbmU7IH0KLnlhd2YtV0JfbWVkaWFfYV9zaG93IHsgZGlzcGxheTogaW5saW5lOyB9Ci55YXdmLVdCX21lZGlhX2FfYWxsIC55YXdmLVdCX21lZGlhX2FfZm9sZCB7IGRpc3BsYXk6IGlubGluZTsgfQoueWF3Zi1XQl9tZWRpYV9hX2FsbCAueWF3Zi1XQl9tZWRpYV9hX3Nob3cgeyBkaXNwbGF5OiBub25lOyB9Ci55YXdmLVdCX21lZGlhX2FfY3RybCB7IGNsZWFyOiBib3RoOyBtYXJnaW4tbGVmdDogMTBweDsgcGFkZGluZy10b3A6IDRweDsgfQpgKTsKICAgICAgICBpZiAocHJldmlld1dpZHRoID09PSA0KSB7CiAgICAgICAgICBjb25zdCBzbWFsbEltYWdlID0gZmVlZHMubGF5b3V0LnNtYWxsSW1hZ2UuaXNFbmFibGVkKCk7CiAgICAgICAgICBpZiAoc21hbGxJbWFnZSkgewogICAgICAgICAgICBjc3MuYXBwZW5kKCcuV0JfZmVlZF92MyAuV0JfbWVkaWFfYS55YXdmLVdCX21lZGlhX2FfbTlwIHsgd2lkdGg6IDM0NXB4OyB9Jyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjc3MuYXBwZW5kKCcuV0JfZmVlZF92MyAuV0JfbWVkaWFfYS55YXdmLVdCX21lZGlhX2FfbTlwIHsgd2lkdGg6IDQ1NnB4OyB9Jyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAobGFzdEltYWdlTWFzaykgewogICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybjsKICAgICAgICAgICAgY29uc3QgbWFzayA9IHRhcmdldC5jbG9zZXN0KCcueWF3Zi1XX2ljb25fdGFnXzlwJyk7CiAgICAgICAgICAgIGlmICghbWFzaykgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBtZWRpYVdyYXAgPSBtYXNrLmNsb3Nlc3QoJy5XQl9tZWRpYV93cmFwJyk7CiAgICAgICAgICAgIG1lZGlhV3JhcC5jbGFzc0xpc3QuYWRkKCd5YXdmLVdCX21lZGlhX2FfYWxsJyk7CiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGNvbmZpZ3MgPSB7CiAgICAgICAgICBjb2w6IE51bWJlcih0aGlzLnJlZi5jb3VudC5nZXRDb25maWcoKS5zcGxpdCgneCcpWzBdKSwKICAgICAgICAgIHJvdzogTnVtYmVyKHRoaXMucmVmLmNvdW50LmdldENvbmZpZygpLnNwbGl0KCd4JylbMV0pIHx8IEluZmluaXR5LAogICAgICAgICAgbW9yZTogdGhpcy5yZWYubW9yZS5nZXRDb25maWcoKSwKICAgICAgICB9OwogICAgICAgIHV0aWwuaW5qZWN0KGZ1bmN0aW9uIChyb290S2V5LCBjb25maWdzKSB7CiAgICAgICAgICBjb25zdCB5YXdmID0gd2luZG93W3Jvb3RLZXldOwogICAgICAgICAgY29uc3QgdnVlU2V0dXAgPSB5YXdmLnZ1ZVNldHVwOwoKICAgICAgICAgIHZ1ZVNldHVwLmVhY2hDb21wb25lbnRWTSgnZmVlZC1waWN0dXJlJywgZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2bSwgJ2lubGluZU51bScsIHsKICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBbMSwgMSwgMywgMywgNCwgNCwgMywgNCwgNCwgM11bdm0ucGljX251bV0gfHwgY29uZmlncy5jb2w7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2KSB7IH0sCiAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodm0sICduZXdQaWNzJywgewogICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgaWYgKHZtLiRwYXJlbnQuZGF0YS5feWF3Zl9QaWN0dXJlU2hvd0FsbCkgcmV0dXJuIHZtLnBpY3Muc2xpY2UoMCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdm0ucGljcy5zbGljZSgwLCBjb25maWdzLmNvbCAqIGNvbmZpZ3Mucm93KTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHsgfSwKICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iodm0uJHBhcmVudC5kYXRhLCAnX3lhd2ZfUGljdHVyZVNob3dBbGwnKSkgewogICAgICAgICAgICAgIHZtLiRwYXJlbnQuJHNldCh2bS4kcGFyZW50LmRhdGEsICdfeWF3Zl9QaWN0dXJlU2hvd0FsbCcsIGZhbHNlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgZXhwYW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgdm0uJHBhcmVudC5kYXRhLl95YXdmX1BpY3R1cmVTaG93QWxsID0gdHJ1ZTsKICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudFJlbmRlcih2bSwgZnVuY3Rpb24gKG5vZGVTdHJ1Y3QsIE5vZGVzKSB7CiAgICAgICAgICAgICAgY29uc3QgeyByZW1vdmVDaGlsZCwgYXBwZW5kQ2hpbGQsIGggfSA9IE5vZGVzOwogICAgICAgICAgICAgIGNvbnN0IG1vcmVJY29uID0gbm9kZVN0cnVjdC5xdWVyeVNlbGVjdG9yKCd4LXdvby1ib3gtaXRlbSB4LXdvby1ib3gnKTsKICAgICAgICAgICAgICBpZiAobW9yZUljb24pIHsKICAgICAgICAgICAgICAgIHJlbW92ZUNoaWxkKG1vcmVJY29uLnBhcmVudE5vZGUsIG1vcmVJY29uKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHZtLiRwYXJlbnQuZGF0YS5feWF3Zl9QaWN0dXJlU2hvd0FsbCkgewogICAgICAgICAgICAgICAgLy8gcGFzcwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5waWNfbnVtID4gY29uZmlncy5jb2wgKiBjb25maWdzLnJvdykgewogICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3MubW9yZSA9PT0gJ21hc2snKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RQaWMgPSBub2RlU3RydWN0LnF1ZXJ5U2VsZWN0b3IoJ3gtd29vLWJveC1pdGVtOmxhc3QtY2hpbGQnKTsKICAgICAgICAgICAgICAgICAgY29uc3QgbWFzayA9IGgoJ3dvby1ib3gnLCB7CiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFt0aGlzLiRzdHlsZS5tYXNrLCB0aGlzLiRzdHlsZS5mb2N1c0ltZ10sCiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgYWxpZ246ICdjZW50ZXInLCBqdXN0aWZ5OiAnY2VudGVyJyB9LAogICAgICAgICAgICAgICAgICB9LCBbCiAgICAgICAgICAgICAgICAgICAgaCgnc3BhbicsIHsKICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiB0aGlzLiRzdHlsZS5waWNOdW0sCiAgICAgICAgICAgICAgICAgICAgICBvbjogeyBjbGljazogZXhwYW5kIH0sCiAgICAgICAgICAgICAgICAgICAgfSwgWycrJyArICh0aGlzLnBpY19udW0gLSBjb25maWdzLmNvbCAqIGNvbmZpZ3Mucm93KV0pLAogICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgYXBwZW5kQ2hpbGQobGFzdFBpYywgbWFzayk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBjb25zdCBtb3JlID0gaCgnZGl2Jywge30sIFsKICAgICAgICAgICAgICAgICAgICBoKCdhJywgewogICAgICAgICAgICAgICAgICAgICAgY2xhc3M6ICd2aWV3cGljIHlhd2YtZmVlZC1kZXRhaWwtY29udGVudC1yZXR3ZWV0LXNpemUnLAogICAgICAgICAgICAgICAgICAgICAgb246IHsgY2xpY2s6IGV4cGFuZCB9LAogICAgICAgICAgICAgICAgICAgIH0sIFtg5p+l55yL5YWo6YOo5Zu+54mH77yI5YWxICR7dGhpcy5waWNfbnVtfSDlvKDvvIlgXSksCiAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICBhcHBlbmRDaGlsZChub2RlU3RydWN0LCBtb3JlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdm0uJGZvcmNlVXBkYXRlKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9LCB1dGlsLmluamVjdC5yb290S2V5LCBjb25maWdzKTsKICAgICAgfQogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBwYXVzZUFuaW1hdGVkSW1hZ2U6IHsgY246ICfliqjnlLvlm77lg48oR0lGKeWcqOe8qeeVpeWbvuaYvuekuuaXtuS/neaMgemdmeatont7aX19JywgaGs6ICfli5XnlavlnJblg48oR0lGKeWcqOaJgOWclumhr+ekuuaZguS/neaMgemdnOatont7aX19JywgdHc6ICfli5XnlavlnJblg48oR0lGKeWcqOaJgOWclumhr+ekuuaZguS/neaMgemdnOatont7aX19JywgZW46ICdQYXVzZSBhbmltYXRlZCB0aHVtYm5haWwgKEdJRikge3tpfX0nIH0sCiAgICBwYXVzZUFuaW1hdGVkSW1hZ2VEZXRhaWw6IHsgY246ICfor6Xlip/og73ku4XlvbHlk43mmL7npLrmlYjmnpzvvIzlubbkuI3kvJrpmY3kvY7nvZHnu5zmlbDmja7nlKjph4/jgIInIH0sCiAgfSk7CgogIG1lZGlhLnBhdXNlQW5pbWF0ZWRJbWFnZSA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZlZWRfbm9fYW5pbWF0ZWRfaW1hZ2UnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogbWVkaWEubWVkaWEsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5wYXVzZUFuaW1hdGVkSW1hZ2UsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ3dhcm4nLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5wYXVzZUFuaW1hdGVkSW1hZ2VEZXRhaWwgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgLy8g5YW25a6e5LiN5YaZIGVuY29kZVVSSSDmlYjmnpzkuIrkuZ/msqHpl67popjvvIzkvYbmmK/lvq7ljZrovazlj5HmloflrZfnlJ/miJDnnIvliLAgPiDlsLHkvJrlh7rplJkKICAgICAgY29uc3QgZW1wdHlJbWFnZSA9IGVuY29kZVVSSSgnZGF0YTppbWFnZS9zdmcreG1sLDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48L3N2Zz4nKTsKICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBwYXVzZUFuaW1hdGVkSW1hZ2UoKSB7CiAgICAgICAgY29uc3QgaW1hZ2VzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFsKICAgICAgICAgICcuUENEX3Bob3RvbGlzdCBpbWdbc3JjJD0iLmdpZiJdOm5vdChbeWF3Zi1wYXVzZS1hbmltYXRlXSknLAogICAgICAgICAgJy5XQl9waWMgaW1nW3NyYyQ9Ii5naWYiXTpub3QoW3lhd2YtcGF1c2UtYW5pbWF0ZV0pJywKICAgICAgICAgICdpbWcuV19pbWdfZmFjZVtzcmMkPSIuZ2lmIl06bm90KFt5YXdmLXBhdXNlLWFuaW1hdGVdKScsCiAgICAgICAgXS5qb2luKCcsJykpKTsKICAgICAgICBpbWFnZXMuZm9yRWFjaChhc3luYyBmdW5jdGlvbiAoaW1hZ2UpIHsKICAgICAgICAgIGNvbnN0IHVybCA9IGltYWdlLnNyYzsKICAgICAgICAgIGltYWdlLnNyYyA9IGVtcHR5SW1hZ2U7CiAgICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ29yaS1zcmMnLCB1cmwpOwogICAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCd5YXdmLW9yaS1zcmMnLCB1cmwpOwogICAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCd5YXdmLXBhdXNlLWFuaW1hdGUnLCAneWF3Zi1wYXVzZS1hbmltYXRlJyk7CiAgICAgICAgICBjb25zdCBkYXRhVXJsID0gYXdhaXQgcmVxdWVzdC5nZXRJbWFnZSh1cmwpLnRoZW4oYmxvYiA9PiB1cmxzLmJsb2JUb0RhdGFVcmwoYmxvYikpOwogICAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHsKICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBpbWcubmF0dXJhbFdpZHRoLCBoZWlnaHQgPSBpbWcubmF0dXJhbEhlaWdodDsKICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoOyBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgICAgICAgaW1hZ2Uuc3JjID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGltZy5zcmMgPSBkYXRhVXJsOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgY3NzLmFwcGVuZChgCi5QQ0RfcGhvdG9saXN0IGltZ1tzcmMkPSIuZ2lmIl06bm90KFt5YXdmLXBhdXNlLWFuaW1hdGVdKSwKLldCX3BpYyBpbWdbc3JjJD0iLmdpZiJdOm5vdChbeWF3Zi1wYXVzZS1hbmltYXRlXSksCi5XQl9naWZfdmlkZW9fYm94CnsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9Ci5XQl9naWZfYm94IHsgdmlzaWJpbGl0eTogdmlzaWJsZSAhaW1wb3J0YW50OyB9CmApOwogICAgfSwKICB9KTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICB1c2VCdWlsdEluVmlkZW9QbGF5ZXI6IHsKICAgICAgY246ICfkvb/nlKjmtY/op4jlmajljp/nlJ/op4bpopHmkq3mlL7lmah7e2l9fXx86Z+z6YePe3t2b2x1bWV9fSV8e3ttZW1vcml6ZX196K6w5b+G5LiK5LiA5qyh6K6+572u55qE6Z+z6YePfHzop4bpopHotKjph497e3F1YWxpdHl9fScsCiAgICAgIGhrOiAn5L2/55So54CP6Ka95Zmo5YWn5bu65b2x54mH5pKt5pS+5Zmoe3tpfX18fOmfs+mHj3t7dm9sdW1lfX0lfHt7bWVtb3JpemV9feiomOS9j+S4iuS4gOasoeioree9rueahOmfs+mHj3x85b2x54mH5ZOB6LOqe3txdWFsaXR5fX0nLAogICAgICBlbjogJ1VzZSBicm93c2VyIGJ1aWx0LWluIHZpZGVvIHBsYXllciB7e2l9fXx8Vm9sdW1lIHt7dm9sdW1lfX0gfCB7e21lbW9yaXplfX0gbWVtb3JpemUgbGFzdCB2b2x1bWV8fFZpZGVvIHF1YWxpdHkge3txdWFsaXR5fX0nLAogICAgfSwKICAgIHVzZUJ1aWx0SW5WaWRlb1BsYXllckRldGFpbDogeyBjbjogJ+S4gOasoeaAp+ino+WGs+iHquWKqOaSreaUvuWSjOS6pOS6kumAu+i+keeahOWQhOenjemXrumimO+8jOW8gOWQr+aXtuWFtuS7luinhumikeebuOWFs+eahOaUuemAoOWKn+iDveS4jeWGjeeUn+aViOOAguS4jeaUr+aMgeebtOaSreinhumikeOAguaSreaUvuWPr+iDveS4jeS8muiiq+W+ruWNmuato+ehruiuoeWFpeaSreaUvuaVsOOAgicgfSwKICAgIG1lZGlhVmlkZW9UeXBlOiB7IGNuOiAn6KeG6aKRJywgaGs6ICflvbHniYcnLCB0dzogJ+W9seeJhycsIGVuOiAnVmlkZW8nIH0sCiAgICB1c2VCdWlsdEluVmlkZW9QbGF5ZXJBdXRvUXVhbGl0eTogeyBjbjogJ+iHquWKqCcsIHR3OiAn6Ieq5YuVJywgZW46ICdBdXRvJyB9LAogICAgdXNlQnVpbHRJblZpZGVvUGxheWVyQmVzdFF1YWxpdHk6IHsgY246ICfmnIDkvbMnLCBlbjogJ0Jlc3QnIH0sCiAgfSk7CgogIG1lZGlhLnVzZUJ1aWx0SW5WaWRlb1BsYXllciA9IHJ1bGUuUnVsZSh7CiAgICB3ZWlib1ZlcnNpb246IFs2LCA3XSwKICAgIGlkOiAnZmVlZF9idWlsdF9pbl92aWRlb19wbGF5ZXInLAogICAgdmVyc2lvbjogNjAsCiAgICBwYXJlbnQ6IG1lZGlhLm1lZGlhLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4udXNlQnVpbHRJblZpZGVvUGxheWVyLAogICAgcmVmOiB7CiAgICAgIHZvbHVtZTogeyB0eXBlOiAncmFuZ2UnLCBtaW46IDAsIG1heDogMTAwLCBpbml0aWFsOiAxMDAgfSwKICAgICAgbWVtb3JpemU6IHsgdHlwZTogJ2Jvb2xlYW4nIH0sCiAgICAgIHF1YWxpdHk6IHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBpbml0aWFsOiAnYXV0bycsCiAgICAgICAgc2VsZWN0OiBbCiAgICAgICAgICB7IHZhbHVlOiAnYXV0bycsIHRleHQ6ICgpID0+IGkxOG4udXNlQnVpbHRJblZpZGVvUGxheWVyQXV0b1F1YWxpdHkgfSwKICAgICAgICAgIHsgdmFsdWU6ICdiZXN0JywgdGV4dDogKCkgPT4gaTE4bi51c2VCdWlsdEluVmlkZW9QbGF5ZXJCZXN0UXVhbGl0eSB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICd3YXJuJywgdGVtcGxhdGU6ICgpID0+IGkxOG4udXNlQnVpbHRJblZpZGVvUGxheWVyRGV0YWlsIH0sCiAgICB9LAogICAgYWluaXQoKSB7CiAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICBjb25zdCBydWxlID0gdGhpczsKICAgICAgICBjb25zdCBnZXRWaWRlb1NvdXJjZSA9IGZ1bmN0aW9uICh2aWRlb1NvdXJjZXMpIHsKICAgICAgICAgIGNvbnN0IHZpZGVvU291cmNlRGF0YSA9IG5ldyBVUkxTZWFyY2hQYXJhbXModmlkZW9Tb3VyY2VzKTsKICAgICAgICAgIGNvbnN0IHF1YWxpdHkgPSBydWxlLnJlZi5xdWFsaXR5LmdldENvbmZpZygpOwogICAgICAgICAgY29uc3QgcXVhbGl0eVR5cGVzID0gW107CiAgICAgICAgICBjb25zdCBhbGxLZXlzID0gQXJyYXkuZnJvbSh2aWRlb1NvdXJjZURhdGEpLm1hcCgoW2tleV0pID0+IGtleSk7CiAgICAgICAgICBpZiAocXVhbGl0eSA9PT0gJ2Jlc3QnKSB7CiAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZSA9IGFsbEtleXMuZmlsdGVyKE51bWJlcikuc29ydCgoeCwgeSkgPT4geSAtIHgpOwogICAgICAgICAgICBxdWFsaXR5VHlwZXMucHVzaCguLi5hdmFpbGFibGUubWFwKHEgPT4gU3RyaW5nKHEpKSk7CiAgICAgICAgICB9CiAgICAgICAgICBxdWFsaXR5VHlwZXMucHVzaCh2aWRlb1NvdXJjZURhdGEuZ2V0KCdxVHlwZScpLCAuLi5hbGxLZXlzKTsKICAgICAgICAgIGNvbnN0IHF1YWxpdHlUeXBlID0gcXVhbGl0eVR5cGVzLmZpbmQocSA9PiAvXmh0dHBzPyg/Ojp8JTNBKS9pLnRlc3QodmlkZW9Tb3VyY2VEYXRhLmdldChxKSkpOwogICAgICAgICAgbGV0IHZpZGVvU291cmNlID0gdmlkZW9Tb3VyY2VEYXRhLmdldChxdWFsaXR5VHlwZSk7CiAgICAgICAgICAvLyDmnInml7blgJnkvJrooqvovazkuYnkuKTmrKHvvIzmiYDku6XopoHlho3pop3lpJblpITnkIbkuIDmrKHvvIzljp/lm6DkuI3mmI4KICAgICAgICAgIGlmICgvXmh0dHBzPyUzQS9pLnRlc3QodmlkZW9Tb3VyY2UpKSB7CiAgICAgICAgICAgIHZpZGVvU291cmNlID0gZGVjb2RlVVJJQ29tcG9uZW50KHZpZGVvU291cmNlKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGh0dHAg5Lya55u05o6l6KKr5rWP6KeI5Zmo5oum5o6J77yM5L2G5piv5pyJ55qE5Y6G5Y+y5pWw5o2u5pivIGh0dHAKICAgICAgICAgIHZpZGVvU291cmNlID0gdmlkZW9Tb3VyY2UucmVwbGFjZSgvXmh0dHA6LywgJ2h0dHBzOicpOwogICAgICAgICAgcmV0dXJuIHZpZGVvU291cmNlOwogICAgICAgIH07CiAgICAgICAgY29uc3QgcmVwbGFjZVdlaWJvVmlkZW9QbGF5ZXIgPSBmdW5jdGlvbiByZXBsYWNlV2VpYm9WaWRlb1BsYXllcigpIHsKICAgICAgICAgIGNvbnN0IGNvbnRhaW5lcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdsaS5XQl92aWRlb1tub2RlLXR5cGU9ImZsX2g1X3ZpZGVvIl1bdmlkZW8tc291cmNlc10nKTsKICAgICAgICAgIGNvbnRhaW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoY29udGFpbmVyKSB7CiAgICAgICAgICAgIGNvbnN0IHNtYWxsSW1hZ2UgPSB5YXdmLnJ1bGVzLmZlZWRzLmxheW91dC5zbWFsbEltYWdlLmdldENvbmZpZygpOwogICAgICAgICAgICBjb25zdCBjb3ZlciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbbm9kZS10eXBlPSJmbF9oNV92aWRlb19wcmUiXSBpbWcnKTsKICAgICAgICAgICAgaWYgKCFjb3ZlcikgcmV0dXJuOwogICAgICAgICAgICBjb25zdCB2aWRlbyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCd2aWRlbycpOwogICAgICAgICAgICBpZiAodmlkZW8pIHZpZGVvLnNyYyA9ICdkYXRhOnRleHQvcGxhaW4sNDInOwogICAgICAgICAgICBjb25zdCB2aWRlb1NvdXJjZSA9IGdldFZpZGVvU291cmNlKGNvbnRhaW5lci5nZXRBdHRyaWJ1dGUoJ3ZpZGVvLXNvdXJjZXMnKSk7CiAgICAgICAgICAgIGNvbnN0IG5ld0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgICAgIG5ld0NvbnRhaW5lci5jbGFzc05hbWUgPSBjb250YWluZXIuY2xhc3NOYW1lOwogICAgICAgICAgICBuZXdDb250YWluZXIuY2xhc3NMaXN0LmFkZCgneWF3Zi1XQl92aWRlbycpOwogICAgICAgICAgICBjb25zdCBuZXdWaWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7CiAgICAgICAgICAgIG5ld1ZpZGVvLnBvc3RlciA9IGNvdmVyLnNyYzsKICAgICAgICAgICAgbmV3VmlkZW8uc3JjID0gdmlkZW9Tb3VyY2U7CiAgICAgICAgICAgIG5ld1ZpZGVvLnByZWxvYWQgPSAnbm9uZSc7CiAgICAgICAgICAgIG5ld1ZpZGVvLmNvbnRyb2xzID0gIXNtYWxsSW1hZ2U7CiAgICAgICAgICAgIG5ld1ZpZGVvLmF1dG9wbGF5ID0gZmFsc2U7CiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVBsYXlTdGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBjb25zdCBpc1BsYXlpbmcgPSAhbmV3VmlkZW8ucGF1c2VkIHx8IG5ld1ZpZGVvLnNlZWtpbmc7CiAgICAgICAgICAgICAgaWYgKGlzUGxheWluZykgbmV3Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgneWF3Zi12aWRlby1wbGF5JywgJycpOwogICAgICAgICAgICAgIGVsc2UgbmV3Q29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgneWF3Zi12aWRlby1wbGF5Jyk7CiAgICAgICAgICAgICAgaWYgKHNtYWxsSW1hZ2UpIG5ld1ZpZGVvLmNvbnRyb2xzID0gaXNQbGF5aW5nOwogICAgICAgICAgICB9OwogICAgICAgICAgICBuZXdWaWRlby5hZGRFdmVudExpc3RlbmVyKCdwbGF5JywgdXBkYXRlUGxheVN0YXRlKTsKICAgICAgICAgICAgbmV3VmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCB1cGRhdGVQbGF5U3RhdGUpOwogICAgICAgICAgICBpZiAoc21hbGxJbWFnZSkgewogICAgICAgICAgICAgIG5ld0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgICAgIGlmICghbmV3Q29udGFpbmVyLmhhc0F0dHJpYnV0ZSgneWF3Zi12aWRlby1wbGF5JykpIG5ld1ZpZGVvLnBsYXkoKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjb25zdCB0aXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7CiAgICAgICAgICAgICAgdGlwLmNsYXNzTmFtZSA9ICdXX2ljb25fdGFnX3YyJzsKICAgICAgICAgICAgICB0aXAudGV4dENvbnRlbnQgPSBpMThuLm1lZGlhVmlkZW9UeXBlOwogICAgICAgICAgICAgIG5ld0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG5ld1ZpZGVvLnZvbHVtZSA9IHJ1bGUucmVmLnZvbHVtZS5nZXRDb25maWcoKSAvIDEwMDsKICAgICAgICAgICAgaWYgKHJ1bGUucmVmLm1lbW9yaXplLmdldENvbmZpZygpKSB7CiAgICAgICAgICAgICAgbmV3VmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigndm9sdW1lY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICAgICAgcnVsZS5yZWYudm9sdW1lLnNldENvbmZpZyhNYXRoLnJvdW5kKG5ld1ZpZGVvLnZvbHVtZSAqIDEwMCkpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIG5ld1ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCAoKSA9PiB7CiAgICAgICAgICAgICAgICBuZXdWaWRlby52b2x1bWUgPSBydWxlLnJlZi52b2x1bWUuZ2V0Q29uZmlnKCkgLyAxMDA7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV3Q29udGFpbmVyLmFwcGVuZENoaWxkKG5ld1ZpZGVvKTsKICAgICAgICAgICAgY29udGFpbmVyLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0NvbnRhaW5lciwgY29udGFpbmVyKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgb2JzZXJ2ZXIuZG9tLmFkZChyZXBsYWNlV2VpYm9WaWRlb1BsYXllcik7CiAgICAgICAgY3NzLmFwcGVuZChgCmxpLldCX3ZpZGVvW25vZGUtdHlwZT0iZmxfaDVfdmlkZW8iXVt2aWRlby1zb3VyY2VzXSA+IGRpdltub2RlLXR5cGU9ImZsX2g1X3ZpZGVvX3ByZSJdLApsaS5XQl92aWRlb1tub2RlLXR5cGU9ImZsX2g1X3ZpZGVvIl1bdmlkZW8tc291cmNlc10gPiBkaXZbbm9kZS10eXBlPSJmbF9oNV92aWRlb19kaXNwIl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KLnlhd2YtV0JfdmlkZW8geyB0cmFuc2l0aW9uOiB3aWR0aCwgaGVpZ2h0IDAuMnM7IH0KLnlhd2YtV0JfdmlkZW8gdmlkZW8geyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgYm90dG9tOiAwOyBsZWZ0OiAwOyByaWdodDogMDsgbWFyZ2luOiBhdXRvOyB9Ci5XQl9tZWRpYV9hIC5XQl92aWRlby55YXdmLVdCX3ZpZGVvIHsgY3Vyc29yOiB1bnNldDsgfQoueWF3Zi1XQl92aWRlbyAuV19pY29uX3RhZ192MiB7IHotaW5kZXg6IDE7IH0KLldCX3ZpZGVvW3lhd2YtdmlkZW8tcGxheV0gLldfaWNvbl90YWdfdjIgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KYCk7CiAgICAgICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc3QgRmFrZVZpZGVvUGxheWVyID0gZnVuY3Rpb24gZSgpIHsgfTsKICAgICAgICAgIEZha2VWaWRlb1BsYXllci5wcm90b3R5cGUudGh1bWJuYWlsID0gZnVuY3Rpb24gKCkgeyB9OwogICAgICAgICAgRmFrZVZpZGVvUGxheWVyLnByb3RvdHlwZS5wbGF5U3RhdHVzID0gZnVuY3Rpb24gKCkgeyB9OwogICAgICAgICAgaWYgKHdpbmRvdy5WaWRlb1BsYXllcikgewogICAgICAgICAgICB3aW5kb3cuVmlkZW9QbGF5ZXIgPSBGYWtlVmlkZW9QbGF5ZXI7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGxldCBnbG9iYWxWaWRlb1BsYXllciA9IHZvaWQgMDsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdWaWRlb1BsYXllcicsIHsKICAgICAgICAgICAgZ2V0KCkgeyByZXR1cm4gZ2xvYmFsVmlkZW9QbGF5ZXI7IH0sCiAgICAgICAgICAgIHNldChfKSB7IGdsb2JhbFZpZGVvUGxheWVyID0gRmFrZVZpZGVvUGxheWVyOyB9LAogICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgLy8g6L+Z5Yeg6KGM5YiG5Yir5piv5LiN5pi+56S66KeG6aKR5by55bGC5oyJ6ZKu77yM5pi+56S65YWo5bGP5oyJ6ZKu77yM5Lul5Y+K54K56KeG6aKR5pe25LiN5by55bGCCiAgICAgICAgLy8g5Zug5Li655u05pKt6KeG6aKR5rKh5Yqe5rOV5pu/5o2i5oiQ5Y6f55Sf5pKt5pS+5Zmo77yM5omA5Lul6L+Z5Lik5Liq5Yqf6IO96L+Y6ZyA6KaB5L+d55WZCiAgICAgICAgLy8g6L+Z6YeM55u05o6l5oqK6L+Z5Yeg5Liq5Yqf6IO95pS+5Zyo6L+Z6YeM77yM5LiN5Y2V54us5YGa5LiA5Liq5Yqf6IO95LqGCiAgICAgICAgY3NzLmFwcGVuZChgCi53YnYtcG9wLWNvbnRyb2wgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KLndidi1mdWxsc2NyZWVuLWNvbnRyb2wgeyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyB9Ci53YnYtcG9wLWxheWVyIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CmApOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICAgIGNvbnN0IGNvbmZpZ3MgPSB7CiAgICAgICAgICBtZW1vcml6ZTogdGhpcy5yZWYubWVtb3JpemUuZ2V0Q29uZmlnKCksCiAgICAgICAgICB2b2x1bWU6IHRoaXMucmVmLnZvbHVtZS5nZXRDb25maWcoKSwKICAgICAgICAgIHF1YWxpdHk6IHRoaXMucmVmLnF1YWxpdHkuZ2V0Q29uZmlnKCksCiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgdXBkYXRlVm9sdW1lID0gZnVuY3Rpb24gKHZvbHVtZSkgewogICAgICAgICAgaWYgKHR5cGVvZiB2b2x1bWUgIT09ICdudW1iZXInKSByZXR1cm47CiAgICAgICAgICBpZiAodm9sdW1lIDwgMCB8fCB2b2x1bWUgPiAxMDAgfHwgIU51bWJlci5pc0Zpbml0ZSh2b2x1bWUpKSByZXR1cm47CiAgICAgICAgICBydWxlLnJlZi52b2x1bWUuc2V0Q29uZmlnKE1hdGgucm91bmQodm9sdW1lKSk7CiAgICAgICAgfTsKCiAgICAgICAgdXRpbC5pbmplY3QoZnVuY3Rpb24gKHJvb3RLZXksIGNvbmZpZ3MsIHVwZGF0ZVZvbHVtZSkgewogICAgICAgICAgY29uc3QgeWF3ZiA9IHdpbmRvd1tyb290S2V5XTsKICAgICAgICAgIGNvbnN0IHZ1ZVNldHVwID0geWF3Zi52dWVTZXR1cDsKCiAgICAgICAgICBjb25zdCB7IHF1YWxpdHksIG1lbW9yaXplIH0gPSBjb25maWdzOwogICAgICAgICAgbGV0IHZvbHVtZSA9IGNvbmZpZ3Mudm9sdW1lOwoKICAgICAgICAgIGNvbnN0IHNldFZvbHVtZSA9IGZ1bmN0aW9uICh2aWRlbykgewogICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBNYXRoLnJvdW5kKHZvbHVtZSkgLyAxMDA7CiAgICAgICAgICAgIGlmICh2aWRlby5wYXVzZWQgJiYgdmlkZW8udm9sdW1lICE9PSB0YXJnZXQpIHsKICAgICAgICAgICAgICB2aWRlby52b2x1bWUgPSB0YXJnZXQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICBjb25zdCBvbkNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTsKICAgICAgICAgICAgc2V0Vm9sdW1lKGV2ZW50LnRhcmdldCk7CiAgICAgICAgICAgIHRoaXMuJHJlZnMudmlkZW8ucGxheSgpOwogICAgICAgICAgfTsKICAgICAgICAgIGNvbnN0IG9uUGxheSA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9IHRydWU7CiAgICAgICAgICAgIHNldFZvbHVtZShldmVudC50YXJnZXQpOwogICAgICAgICAgfTsKICAgICAgICAgIGNvbnN0IG9uVm9sdW1lY2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIGlmICghbWVtb3JpemUpIHJldHVybjsKICAgICAgICAgICAgY29uc3QgdmlkZW8gPSBldmVudC50YXJnZXQ7CiAgICAgICAgICAgIHZvbHVtZSA9IE1hdGgucm91bmQodmlkZW8udm9sdW1lICogMTAwKTsKICAgICAgICAgICAgdXBkYXRlVm9sdW1lKHZvbHVtZSk7CiAgICAgICAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnlhd2YtZmVlZC12aWRlbycpKS5mb3JFYWNoKHNldFZvbHVtZSk7CiAgICAgICAgICB9OwogICAgICAgICAgY29uc3Qgb25Mb2Fkc3RhcnQgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgc2V0Vm9sdW1lKGV2ZW50LnRhcmdldCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHZ1ZVNldHVwLnRyYW5zZm9ybUNvbXBvbmVudHNSZW5kZXJCeVRhZ05hbWUoJ2ZlZWQtdmlkZW8nLCBmdW5jdGlvbiAobm9kZVN0cnVjdCwgTm9kZXMpIHsKICAgICAgICAgICAgY29uc3QgeyByZW1vdmVDaGlsZCwgYXBwZW5kQ2hpbGQsIGggfSA9IE5vZGVzOwoKICAgICAgICAgICAgY29uc3QgaXNQbGF5aW5nID0gdGhpcy5pc1BsYXlpbmc7CiAgICAgICAgICAgIC8vIOWOu+aOieWOn+acrOa4suafk+eahOinhumikeaSreaUvuWZqAogICAgICAgICAgICB3aGlsZSAobm9kZVN0cnVjdC5maXJzdENoaWxkKSB7CiAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGQobm9kZVN0cnVjdCwgbm9kZVN0cnVjdC5maXJzdENoaWxkKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyDmiJHku6zoh6rlt7HnlLvkuIDkuKrop4bpopHmkq3mlL7lmajkuIrljrsKICAgICAgICAgICAgbGV0IHVybCA9IG51bGw7CiAgICAgICAgICAgIGlmIChxdWFsaXR5ID09PSAnYmVzdCcpIHRyeSB7CiAgICAgICAgICAgICAgY29uc3QgcGxheWJhY2sgPSB0aGlzLmluZm9zLm1lZGlhX2luZm8ucGxheWJhY2tfbGlzdC5maW5kKHggPT4geC5wbGF5X2luZm8gJiYgeC5wbGF5X2luZm8udXJsKTsKICAgICAgICAgICAgICB1cmwgPSBwbGF5YmFjay5wbGF5X2luZm8udXJsOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7IC8qIGlnbm9yZSAqLyB9CiAgICAgICAgICAgIGlmICghdXJsKSB1cmwgPSB0aGlzLmluZm9zLm1lZGlhX2luZm8uc3RyZWFtX3VybDsKICAgICAgICAgICAgY29uc3QgdmlkZW9XcmFwID0gaCgnZGl2JywgewogICAgICAgICAgICAgIHJlZjogJ3ZpZGVvV3JhcHBlcicsCiAgICAgICAgICAgICAgY2xhc3M6IFt0aGlzLiRzdHlsZS52aWRlb0JveCwgJ3lhd2YtdmlkZW8tYm94J10sCiAgICAgICAgICAgIH0sIFtoKCdkaXYnLCB7CiAgICAgICAgICAgICAgcmVmOiAndmlkZW9Db250YWluZXInLAogICAgICAgICAgICAgIGNsYXNzOiBbdGhpcy4kc3R5bGUucGxhY2Vob2xkZXIsICd5YXdmLXZpZGVvLXBsYWNlaG9sZGVyJ10sCiAgICAgICAgICAgIH0sIFtoKCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3M6IFt0aGlzLiRzdHlsZS52aWRlbywgJ3lhd2YtdmlkZW8tY29udGFpbmVyJ10sCiAgICAgICAgICAgIH0sIFtoKCdkaXYnLCB7CiAgICAgICAgICAgICAgY2xhc3M6IFt0aGlzLiRzdHlsZS52aWRlbywgJ3dicC12aWRlbycsIGlzUGxheWluZyA/ICd5YXdmLWZlZWQtdmlkZW8tYWN0aXZlZCcgOiBudWxsXSwKICAgICAgICAgICAgfSwgW2goJ3ZpZGVvJywgewogICAgICAgICAgICAgIHJlZjogJ3ZpZGVvJywKICAgICAgICAgICAgICBjbGFzczogWyd5YXdmLXZpZGVvJywgJ3lhd2YtZmVlZC12aWRlbycsICd3YnB2LXRlY2gnXSwKICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgc3JjOiB1cmwucmVwbGFjZSgvXmh0dHBzPzpcL1wvLywgJy8vJyksCiAgICAgICAgICAgICAgICBwb3N0ZXI6IHRoaXMudGh1bWJuYWlsLnJlcGxhY2UoL15odHRwcz86XC9cLy8sICcvLycpLAogICAgICAgICAgICAgICAgcHJlbG9hZDogJ2F1dG8nLAogICAgICAgICAgICAgICAgY29udHJvbHM6IGlzUGxheWluZyA/IHRydWUgOiBmYWxzZSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBjbGljazogaXNQbGF5aW5nID8gbnVsbCA6IG9uQ2xpY2suYmluZCh0aGlzKSwKICAgICAgICAgICAgICAgIHBsYXk6IG9uUGxheS5iaW5kKHRoaXMpLAogICAgICAgICAgICAgICAgdm9sdW1lY2hhbmdlOiBvblZvbHVtZWNoYW5nZS5iaW5kKHRoaXMpLAogICAgICAgICAgICAgICAgbG9hZHN0YXJ0OiBvbkxvYWRzdGFydC5iaW5kKHRoaXMpLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pXSldKV0pXSk7CiAgICAgICAgICAgIGFwcGVuZENoaWxkKG5vZGVTdHJ1Y3QsIHZpZGVvV3JhcCk7CiAgICAgICAgICB9KTsKCiAgICAgICAgfSwgdXRpbC5pbmplY3Qucm9vdEtleSwgY29uZmlncywgdXBkYXRlVm9sdW1lKTsKCiAgICAgICAgY3NzLmFwcGVuZChTdHJpbmcucmF3YAoueWF3Zi1mZWVkLXZpZGVvIC53YnAtdmlkZW8ge3dpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IH0KLnlhd2YtZmVlZC12aWRlbyAud2JwLXZpZGVvOm5vdCgueWF3Zi1mZWVkLXZpZGVvLWFjdGl2ZWQpOjpiZWZvcmUgeyBjb250ZW50OiAiXGUwMDEiOyBmb250LWZhbWlseToga3J2ZGZpY29uOyBmb250LXdlaWdodDogNDAwOyBmb250LXN0eWxlOiBub3JtYWw7IGZvbnQtc2l6ZTogMzZweDsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDUwJTsgbGVmdDogNTAlOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsgei1pbmRleDogMjsgb3BhY2l0eTogMC44NTsgdGV4dC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLC4yKTsgcG9pbnRlci1ldmVudHM6IG5vbmU7IH0KLnlhd2YtZmVlZC12aWRlbyAud2JwLXZpZGVvOm5vdCgueWF3Zi1mZWVkLXZpZGVvLWFjdGl2ZWQpOmhvdmVyOjpiZWZvcmUgeyBjb2xvcjogI2ZmODIwMDsgfQoueWF3Zi12aWRlby1jb250YWluZXIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgcmlnaHQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IG9iamVjdC1maXQ6IGNvdmVyOyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93OiBoaWRkZW47IH0KYCk7CgogICAgICB9CiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2ZlZWRzL290aGVyLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKICBjb25zdCByZXF1ZXN0ID0geWF3Zi5yZXF1ZXN0OwogIGNvbnN0IGZlZWRQYXJzZXIgPSB5YXdmLmZlZWQ7CgogIGNvbnN0IGZlZWRzID0geWF3Zi5ydWxlcy5mZWVkczsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKICBjb25zdCBkaWFsb2cgPSB1dGlsLmRpYWxvZzsKICBjb25zdCB0aW1lID0gdXRpbC50aW1lOwoKICBjb25zdCBkZXRhaWxzID0gZmVlZHMuZGV0YWlscyA9IHt9OwoKICBpMThuLmZlZWREZXRhaWxzR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn57uG6IqCJywKICAgIHR3OiAn57Sw56+AJywKICAgIGVuOiAnRGV0YWlscycsCiAgfTsKCiAgZGV0YWlscy5kZXRhaWxzID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGZlZWRzLmZlZWRzLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZERldGFpbHNHcm91cFRpdGxlLAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGRpc2FibGVUYWdEaWFsb2c6IHsKICAgICAgY246ICflsY/olL3mlLbol4/lvq7ljZrml7bnmoTmt7vliqDmoIfnrb7lr7nor53moYYnLAogICAgICB0dzogJ+mYu+aTi+aUtuiXj+W+ruWNmuaZgueahOa3u+WKoOaomeexpOWwjeipseaWueWhiicsCiAgICAgIGVuOiAnQmxvY2sgdGhlIGRpYWxvZyBhZnRlciBtYXJraW5nIHdlaWJvIGZhdm9yaXRlJywKICAgIH0sCiAgICBmYXZvcml0ZUZhaWxUaXRsZTogewogICAgICBjbjogJ+aUtuiXj+W+ruWNmicsCiAgICAgIGVuOiAnRmVlZCBGYXZvcml0ZScsCiAgICB9LAogICAgZmF2b3JpdGVGYWlsVGV4dDogewogICAgICBjbjogJ+aUtuiXj+aXtuWPkeeUn+mUmeivrycsCiAgICAgIGVuOiAnRXJyb3Igd2hpbGUgYWRkaW5nIGZhdm9yaXRlIGZlZWRzJywKICAgIH0sCiAgICBmYXZvcml0ZUZlZWQ6IHsKICAgICAgY246ICflt7LmlLbol48nLAogICAgICBlbjogJ0Zhdm9yaXRlIEFkZGVkJywKICAgIH0sCiAgfSk7CgogIGRldGFpbHMuZGlzYWJsZVRhZ0RpYWxvZyA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ2ZlZWRfZGlzYWJsZV90YWdfZGlhbG9nJywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGRldGFpbHMuZGV0YWlscywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmRpc2FibGVUYWdEaWFsb2csCiAgICBhaW5pdCgpIHsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBldmVudCA9PiB7CiAgICAgICAgaWYgKCFldmVudC5pc1RydXN0ZWQpIHJldHVybjsKICAgICAgICBpZiAoIVsnd3d3LndlaWJvLmNvbScsICd3ZWliby5jb20nXS5pbmNsdWRlcyhsb2NhdGlvbi5ob3N0KSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDsKICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuOwogICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCdbYWN0aW9uLXR5cGU9ImZsX2Zhdm9yaXRlIl0nKTsKICAgICAgICBpZiAoIWJ1dHRvbikgcmV0dXJuOwogICAgICAgIGNvbnN0IGlzRmF2b3JpdGUgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdmYXZvcml0ZScpOwogICAgICAgIGlmIChpc0Zhdm9yaXRlKSByZXR1cm47IC8vIOS4jeWkhOeQhuWPlua2iOaUtuiXj+eahOmAu+i+kQogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgY29uc3QgZmVlZCA9IGZlZWRQYXJzZXIuZmVlZE5vZGUoYnV0dG9uKTsKICAgICAgICBjb25zdCAkQ09ORklHID0gaW5pdC5wYWdlLiRDT05GSUc7CiAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IHJlcXVlc3QuZmVlZEZhdm9yaXRlKGZlZWQsIHsgJENPTkZJRyB9KTsKICAgICAgICBpZiAoIXN1Y2Nlc3MpIHsKICAgICAgICAgIGRpYWxvZy5hbGVydCh7CiAgICAgICAgICAgIGlkOiAneWF3Zi1mYXZvcml0ZS1mYWlsJywKICAgICAgICAgICAgaWNvbjogJ3dhcm4nLAogICAgICAgICAgICB0aXRsZTogaTE4bi5mYXZvcml0ZUZhaWxUaXRsZSwKICAgICAgICAgICAgdGV4dDogaTE4bi5mYXZvcml0ZUZhaWxUZXh0LAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Zhdm9yaXRlJywgJzEnKTsKICAgICAgICAgIGNvbnN0IHRleHQgPSBidXR0b24ucXVlcnlTZWxlY3RvcignW25vZGUtdHlwZT0iZmF2b3JpdGVfYnRuX3RleHQiXScpIHx8IGJ1dHRvbjsKICAgICAgICAgIHRleHQuaW5uZXJIVE1MID0gJzxzcGFuPjxlbSBjbGFzcz0iV19maWNvbiBmaWNvbl9mYXZvcml0ZSBTX3NwZXR4dCI+XHhGQjwvZW0+PGVtPjwvZW0+PC9zcGFuPic7CiAgICAgICAgICB0ZXh0LnF1ZXJ5U2VsZWN0b3IoJ2VtICsgZW0nKS50ZXh0Q29udGVudCA9IGkxOG4uZmF2b3JpdGVGZWVkOwogICAgICAgIH0KICAgICAgfSwgdHJ1ZSk7CiAgICB9LAogIH0pOwoKICBpMThuLmxvd1JlYWRpbmdDb3VudFdhcm4gPSB7CiAgICBjbjogJ+WcqOiHquW3seS4quS6uuS4u+mhtemrmOS6ruaYvuekuumYheivu+aVsOmHj3zkuI3otoXov4d7e2NvdW50fX3nmoTlvq7ljZonLAogICAgdHc6ICflnKjoh6rlt7HlgIvkurrkuLvpoIHpq5jkuq7poa/npLrplrHoroDmlbjph4985LiN6LaF6YGOe3tjb3VudH1955qE5b6u5Y2aJywKICAgIGVuOiAnSGlnaGxpZ2h0IGZlZWRzIG9uIG15IHByb2ZpbGUgcGFnZSB3aGljaCBoYXMgfCBubyBtb3JlIHRoYW4ge3tjb3VudH19IHZpZXdzJywKICB9OwoKICBkZXRhaWxzLmxvd1JlYWRpbmdDb3VudFdhcm4gPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmZWVkX2xvd19yZWFkaW5nX3dhcm4nLAogICAgdmVyc2lvbjogMjMsCiAgICBwYXJlbnQ6IGRldGFpbHMuZGV0YWlscywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmxvd1JlYWRpbmdDb3VudFdhcm4sCiAgICByZWY6IHsKICAgICAgY291bnQ6IHsKICAgICAgICB0eXBlOiAncmFuZ2UnLAogICAgICAgIG1pbjogMTAsCiAgICAgICAgbWF4OiAxMDAwLAogICAgICAgIHN0ZXA6IDEwLAogICAgICAgIGluaXRpYWw6IDEwMCwKICAgICAgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIG9ic2VydmVyLmZlZWQub25BZnRlcihmdW5jdGlvbiAoLyoqIEB0eXBlIHtFbGVtZW50fSAqL2ZlZWQpIHsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBmZWVkLmNsb3Nlc3QoJ1tpZF49IlBsX09mZmljaWFsX015UHJvZmlsZUZlZWRfXyJdJyk7CiAgICAgICAgaWYgKCFjb250YWluZXIpIHJldHVybjsKICAgICAgICBjb25zdCBwb3BUZXh0ID0gZmVlZC5xdWVyeVNlbGVjdG9yKCcuV0JfZmVlZF9oYW5kbGUgW2FjdGlvbi10eXBlPSJmbF9wb3AiXSBpJyk7CiAgICAgICAgaWYgKCFwb3BUZXh0KSByZXR1cm47CiAgICAgICAgY29uc3QgY291bnQgPSBOdW1iZXIucGFyc2VJbnQocG9wVGV4dC50aXRsZS5tYXRjaCgvXGQrLylbMF0sIDEwKTsKICAgICAgICBjb25zdCBsaW1pdCA9IHJ1bGUucmVmLmNvdW50LmdldENvbmZpZygpOwogICAgICAgIGlmIChjb3VudCA+IGxpbWl0KSByZXR1cm47CiAgICAgICAgZmVlZC5zZXRBdHRyaWJ1dGUoJ3lhd2YtbG93LXJlYWRpbmcnLCBjb3VudCk7CiAgICAgIH0pOwogICAgICBjc3MuYXBwZW5kKCcuV0JfZmVlZC5XQl9mZWVkIC5XQl9jYXJkd3JhcFt5YXdmLWxvdy1yZWFkaW5nXSB7IGJveC1zaGFkb3c6IDAgMCA0cHggcmVkIGluc2V0OyB9Jyk7CiAgICB9LAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIGZlZWRBYnNvbHV0ZVRpbWVEZXRhaWw6IHsKICAgICAgY246ICfmmL7npLrnmoTml7bpl7Tlj5cgW1tsYXlvdXRfbG9jYWxlX3RpbWV6b25lXV0g5Yqf6IO95b2x5ZON44CCJywKICAgIH0sCiAgfSwgdGltZS5pc0NzdEVxdWl2YWxlbnQoKSA/IHsKICAgIGZlZWRBYnNvbHV0ZVRpbWU6IHsKICAgICAgY246ICflvq7ljZrlj5HluIPml7bpl7TmgLvmmK/kvb/nlKjlubTmnIjml6XmoLzlvI8nLAogICAgICB0dzogJ+W+ruWNmueZvOW4g+aZgumWk+e4veaYr+S9v+eUqOW5tOaciOaXpeagvOW8jycsCiAgICAgIGVuOiAnVXNlIHl5eXktbW0tZGQgZGF0ZSBmb3JtYXQnLAogICAgfSwKICB9IDogewogICAgZmVlZEFic29sdXRlVGltZTogewogICAgICBjbjogJ+W+ruWNmuWPkeW4g+aXtumXtOaAu+aYr+S9v+eUqOW5tOaciOaXpeagvOW8jyB7e2l9fScsCiAgICAgIHR3OiAn5b6u5Y2a55m85biD5pmC6ZaT57i95piv5L2/55So5bm05pyI5pel5qC85byPIHt7aX19JywKICAgICAgZW46ICdVc2UgeXl5eS1tbS1kZCBkYXRlIGZvcm1hdCB7e2l9fScsCiAgICB9LAogIH0pOwoKICBkZXRhaWxzLmZlZWRBYnNvbHV0ZVRpbWUgPSBydWxlLlJ1bGUoewogICAgaWQ6ICdmZWVkX2Fic29sdXRlX3RpbWUnLAogICAgdmVyc2lvbjogNjAsCiAgICBwYXJlbnQ6IGRldGFpbHMuZGV0YWlscywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRBYnNvbHV0ZVRpbWUsCiAgICByZWY6IHsKICAgICAgaTogeyB0eXBlOiAnYnViYmxlJywgaWNvbjogJ2FzaycsIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRBYnNvbHV0ZVRpbWVEZXRhaWwgfSwKICAgIH0sCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgZmVlZExpbmtOZXdUYWI6IHsKICAgICAgY246ICflnKjmlrDmoIfnrb7pobXmiZPlvIDku6XkuIvpk77mjqUge3tpfX18fHt7YXV0aG9yfX3kvZzogIUv5Y6f5L2c6ICFfHt7bWVudGlvbn195o+Q5YiwfHt7dG9waWN9feivnemimHx7e3BpY3R1cmV9femFjeWbvnx8e3tkZXRhaWx9feW+ruWNmuivpuaDhe+8iOWPkeW4g+aXtumXtO+8iXx7e2NvbW1lbnRzfX3lhajpg6jor4Torrp8e3tjYXJkfX3ljaHniYcnLAogICAgfSwKICAgIGZlZWRMaW5rTmV3VGFiRGV0YWlsOiB7CiAgICAgIGNuOiAn5oyJ5L2PIEN0cmwg5Lmf5Y+v5Li05pe25Zyo5paw5qCH562+6aG15omT5byA44CC5q2k5Yqf6IO95L6d6LWW5LqOIFtbZmVlZF9yZW5kZXJdXeOAgicsCiAgICB9LAogIH0pOwoKICBkZXRhaWxzLmZlZWRMaW5rTmV3VGFiID0gcnVsZS5SdWxlKHsKICAgIHdlaWJvVmVyc2lvbjogNywKICAgIGlkOiAnZmVlZF9saW5rX25ld190YWInLAogICAgdmVyc2lvbjogODUsCiAgICBwYXJlbnQ6IGRldGFpbHMuZGV0YWlscywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmZlZWRMaW5rTmV3VGFiLAogICAgcmVmOiB7CiAgICAgIGk6IHsgdHlwZTogJ2J1YmJsZScsIGljb246ICdhc2snLCB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5mZWVkTGlua05ld1RhYkRldGFpbCB9LAogICAgICBhdXRob3I6IHsgdHlwZTogJ2Jvb2xlYW4nLCBpbml0aWFsOiB0cnVlIH0sCiAgICAgIG1lbnRpb246IHsgdHlwZTogJ2Jvb2xlYW4nLCBpbml0aWFsOiB0cnVlIH0sCiAgICAgIHRvcGljOiB7IHR5cGU6ICdib29sZWFuJywgaW5pdGlhbDogdHJ1ZSB9LAogICAgICBkZXRhaWw6IHsgdHlwZTogJ2Jvb2xlYW4nLCBpbml0aWFsOiB0cnVlIH0sCiAgICAgIGNvbW1lbnRzOiB7IHR5cGU6ICdib29sZWFuJywgaW5pdGlhbDogdHJ1ZSB9LAogICAgICBwaWN0dXJlOiB7IHR5cGU6ICdib29sZWFuJywgaW5pdGlhbDogdHJ1ZSB9LAogICAgICBjYXJkOiB7IHR5cGU6ICdib29sZWFuJywgaW5pdGlhbDogdHJ1ZSB9LAogICAgfSwKICAgIC8vIOWunueOsOWcqCByZW5kZXIg6YeMCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvZmVlZHMvcmVhZGluZy5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CiAgY29uc3Qgb2JzZXJ2ZXIgPSB5YXdmLm9ic2VydmVyOwogIGNvbnN0IHBhZ2VtZW51ID0geWF3Zi5wYWdlbWVudTsKCiAgY29uc3QgZmVlZHMgPSB5YXdmLnJ1bGVzLmZlZWRzOwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGNvbnN0IGtleWJvYXJkID0gdXRpbC5rZXlib2FyZDsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgcmVhZGluZyA9IGZlZWRzLnJlYWRpbmcgPSB7fTsKCiAgaTE4bi5mZWVkUmVhZGluZ0dyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+mYheivu+inhuWbvicsCiAgICB0dzogJ+mWseiugOimluWclicsCiAgICBlbjogJ1JlYWRpbmcgVmlldycsCiAgfTsKCiAgcmVhZGluZy5yZWFkaW5nID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGZlZWRzLmZlZWRzLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZFJlYWRpbmdHcm91cFRpdGxlLAogIH0pOwoKICBpMThuLmZlZWRPbmx5TW9kZSA9IHsKICAgIGNuOiAn6ZiF6K+76KeG5Zu+fOWuveW6pnt7d2lkdGh9feWDj+e0oHx85b+r5o236ZSue3trZXl9fXx8e3tidXR0b259feWcqOW+ruWNmuWIl+ihqOmhtumDqOaYvuekuuW/q+aNt+W8gOWFs+aMiemSricsCiAgICB0dzogJ+mWseiugOimluWclnzlr6zluqZ7e3dpZHRofX3lnJblhYN8fOW/q+mAn+mNtXt7a2V5fX18fHt7YnV0dG9ufX3lnKjlvq7ljZrmuIXllq7poILpg6jpoa/npLrlv6vpgJ/plovpl5zmjInpiJUnLAogICAgZW46ICdSZWFkaW5nIE1vZGUgfCB3aWR0aCB7e3dpZHRofX1weCB8fCBzaG9ydGN1dCB7e2tleX19IHx8IHt7YnV0dG9ufX0gc2hvdyBzd2l0Y2ggYnV0dG9uIGF0IHRvcCBvZiBXZWlibyBsaXN0JywKICB9OwogIGkxOG4uZmVlZE9ubHlTd2l0Y2ggPSB7CiAgICBjbjogJ+WIh+aNoumYheivu+inhuWbvicsCiAgICB0dzogJ+WIh+aPm+mWseiugOimluWclicsCiAgICBlbjogJ1RvZ2dsZSBSZWFkaW5nIE1vZGUnLAogIH07CgogIHJlYWRpbmcuZmVlZE9ubHlNb2RlID0gcnVsZS5SdWxlKHsKICAgIGlkOiAnZmVlZF9vbmx5X21vZGUnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogcmVhZGluZy5yZWFkaW5nLAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uZmVlZE9ubHlNb2RlLAogICAgcmVmOiB7CiAgICAgIHdpZHRoOiB7IHR5cGU6ICdyYW5nZScsIG1pbjogNDgwLCBtYXg6IDEyODAsIGluaXRpYWw6IDYwMCwgc3RlcDogMTAgfSwKICAgICAga2V5OiB7IHR5cGU6ICdrZXknLCBpbml0aWFsOiBrZXlib2FyZC5jb2RlLkY4IH0sCiAgICAgIGJ1dHRvbjogeyB0eXBlOiAnYm9vbGVhbicsIGRlZmF1bHQ6IGZhbHNlIH0sCiAgICAgIF9lbmFibGVkOiB7IHR5cGU6ICdib29sZWFuJywgaW5pdGlhbDogZmFsc2UgfSwKICAgIH0sCiAgICBhaW5pdCgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXM7CiAgICAgIGlmICh5YXdmLmluaXQucGFnZS50eXBlKCkgPT09ICd0dGFydGljbGUnKSByZXR1cm47CgogICAgICBpZiAocnVsZS5yZWYuYnV0dG9uLmdldENvbmZpZygpKSB7CiAgICAgICAgY29uc3Qgc2hvd0J1dHRvbiA9IGZ1bmN0aW9uIHNob3dSZWFkZXJTd2l0Y2goKSB7CiAgICAgICAgICBjb25zdCB0YWJGaXJzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoWwogICAgICAgICAgICAnI3Y2X3BsX2NvbnRlbnRfaG9tZWZlZWQgLldCX3RhYl9hOm5vdChbeWF3Zi1mZWVkLW9ubHktYWRkZWRdKScsCiAgICAgICAgICAgICdkaXZbaWRePSJQbF9PZmZpY2lhbF9Qcm9maWxlRmVlZE5hdl9fIl0gLldCX3RhYl9hOm5vdChbeWF3Zi1mZWVkLW9ubHktYWRkZWRdKScsCiAgICAgICAgICBdLmpvaW4oJywnKSk7CiAgICAgICAgICBpZiAoIXRhYkZpcnN0KSByZXR1cm47CiAgICAgICAgICB0YWJGaXJzdC5zZXRBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1vbmx5LWFkZGVkJywgJycpOwogICAgICAgICAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgd3JhcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ieWF3Zi1mZWVkLW9ubHktYnV0dG9uIFNfYmcyIj48YSBjbGFzcz0iU190eHQxIj48L2E+PC9kaXY+JzsKICAgICAgICAgIGNvbnN0IGxpbmUgPSB3cmFwLmZpcnN0Q2hpbGQ7CiAgICAgICAgICBjb25zdCBidXR0b24gPSBsaW5lLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsKICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGkxOG4uZmVlZE9ubHlTd2l0Y2g7CiAgICAgICAgICB0YWJGaXJzdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShsaW5lLCB0YWJGaXJzdCk7CiAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICAgIGlmICghZXZlbnQuaXNUcnVzdGVkKSByZXR1cm47CiAgICAgICAgICAgIHJ1bGUucmVmLl9lbmFibGVkLnNldENvbmZpZyghcnVsZS5yZWYuX2VuYWJsZWQuZ2V0Q29uZmlnKCkpOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBvYnNlcnZlci5kb20uYWRkKHNob3dCdXR0b24pOwogICAgICB9CgogICAgICBwYWdlbWVudS5hZGQoewogICAgICAgIHRpdGxlOiBpMThuLmZlZWRPbmx5U3dpdGNoLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJ1bGUucmVmLl9lbmFibGVkLnNldENvbmZpZyghcnVsZS5yZWYuX2VuYWJsZWQuZ2V0Q29uZmlnKCkpOwogICAgICAgIH0sCiAgICAgICAgc2VjdGlvbjogMTAsCiAgICAgICAgb3JkZXI6IDAsCiAgICAgIH0pOwoKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2ZW50ID0+IHsKICAgICAgICBpZiAoIWV2ZW50LmlzVHJ1c3RlZCkgcmV0dXJuOwogICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnKSkgcmV0dXJuOwogICAgICAgIGNvbnN0IGNvZGUgPSBrZXlib2FyZC5ldmVudChldmVudCk7CiAgICAgICAgaWYgKGNvZGUgIT09IHJ1bGUucmVmLmtleS5nZXRDb25maWcoKSkgcmV0dXJuOwogICAgICAgIHJ1bGUucmVmLl9lbmFibGVkLnNldENvbmZpZyghcnVsZS5yZWYuX2VuYWJsZWQuZ2V0Q29uZmlnKCkpOwogICAgICB9KTsKCiAgICAgIGNvbnN0IHdpZHRoID0gcnVsZS5yZWYud2lkdGguZ2V0Q29uZmlnKCk7CiAgICAgIGNzcy5hcHBlbmQoYAoueWF3Zi1mZWVkLW9ubHktYnV0dG9uIHsgdGV4dC1hbGlnbjogY2VudGVyOyBsaW5lLWhlaWdodDogMzFweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgYm9yZGVyLXJhZGl1czogM3B4OyB9CmJvZHlbeWF3Zi1mZWVkLW9ubHldW3lhd2YtZmVlZC1vbmx5XSB7IC0teWF3Zi1sZWZ0LXdpZHRoOiAwcHg7IC0teWF3Zi1yaWdodC13aWR0aDogMHB4OyAtLXlhd2YtZmVlZC13aWR0aDogJHsrd2lkdGh9cHg7IC0teWF3Zi1leHRyYS1wYWRkaW5nOiAyMHB4O30KYm9keVt5YXdmLWZlZWQtb25seV0gI1dCX3dlYmNoYXQsCmJvZHlbeWF3Zi1mZWVkLW9ubHldIFtpLWFtLW11c2ljLXBsYXllcl0sCmJvZHlbeWF3Zi1mZWVkLW9ubHldIC5XQl9mcmFtZT4qOm5vdCgjcGxjX21haW4pLApib2R5W3lhd2YtZmVlZC1vbmx5XSAjcGxjX21haW4+Kjpub3QoLldCX21haW5fYyk6bm90KC5XQl9mcmFtZV9jKTpub3QoLldCX21haW5fcik6bm90KC5XQl9mcmFtZV9iKSwKYm9keVt5YXdmLWZlZWQtb25seV0gLldCX21haW5fYz4qOm5vdChbaWRePSJ2Nl9wbF9jb250ZW50XyJdKSwKYm9keVt5YXdmLWZlZWQtb25seV0gI3BsY19ib3QgLldCX2Zvb3RlciwKYm9keVt5YXdmLWZlZWQtb25seV0gI3BsY19ib3QgLldfZm9sZCwKYm9keVt5YXdmLWZlZWQtb25seV0gLldCX2Zvb3RlciB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQpib2R5W3lhd2YtZmVlZC1vbmx5XSAuV0JfZnJhbWUgeyB3aWR0aDogY2FsYyh2YXIoLS15YXdmLWZlZWQtd2lkdGgpICsgMjBweCkgIWltcG9ydGFudDsgfQpib2R5W3lhd2YtZmVlZC1vbmx5XSAjcGxjX21haW4geyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWxlZnQ6IGF1dG87IG1hcmdpbi1yaWdodDogYXV0bzsgfQpib2R5W3lhd2YtZmVlZC1vbmx5XSAuV0JfZnJhbWUsCmJvZHlbeWF3Zi1mZWVkLW9ubHldICNwbGNfbWFpbiwKYm9keVt5YXdmLWZlZWQtb25seV0gLldCX2dsb2JhbF9uYXYsCmJvZHlbeWF3Zi1mZWVkLW9ubHldIC5XQl9tYWluX2MgeyBtYXgtd2lkdGg6IDEwMCU7IG1hcmdpbi1sZWZ0OiBhdXRvOyBtYXJnaW4tcmlnaHQ6IGF1dG87IH0KYm9keVt5YXdmLWZlZWQtb25seV0gI3BsY19tYWluIHsgcGFkZGluZy1ib3R0b206IDEwcHg7IH0KYm9keVt5YXdmLWZlZWQtb25seV0gI3BsY19tYWluOjphZnRlciB7IGNvbnRlbnQ6ICIgIjsgZGlzcGxheTogdGFibGU7IGNsZWFyOiBib3RoOyB9CmJvZHlbeWF3Zi1mZWVkLW9ubHldICNwbGNfbWFpbj4uV0JfbWFpbl9yIHsgdmlzaWJpbGl0eTogaGlkZGVuOyBtYXJnaW4tcmlnaHQ6IC0yMzBweDsgfQpib2R5W3lhd2YtZmVlZC1vbmx5XSAjcGxjX21haW4+LldCX2ZyYW1lX2IgeyB2aXNpYmlsaXR5OiBoaWRkZW47IG1hcmdpbi1yaWdodDogLTMwMHB4OyB9CmJvZHlbeWF3Zi1mZWVkLW9ubHldIC5XQl9mcmFtZSB7IHBhZGRpbmctbGVmdDogMDsgfQpgKTsKCiAgICAgIGNvbnN0IHVwZGF0ZUVuYWJsZSA9IGZ1bmN0aW9uIHVwZGF0ZUVuYWJsZSgpIHsKICAgICAgICBpZiAoIWRvY3VtZW50IHx8ICFkb2N1bWVudC5ib2R5KSB7CiAgICAgICAgICBzZXRUaW1lb3V0KHVwZGF0ZUVuYWJsZSwgMTAwMCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IGVuYWJsZWQgPSBydWxlLnJlZi5fZW5hYmxlZC5nZXRDb25maWcoKTsKICAgICAgICBjb25zdCBjb25maWd1cmVkID0gZG9jdW1lbnQuYm9keS5oYXNBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1vbmx5Jyk7CiAgICAgICAgaWYgKGVuYWJsZWQgPT09IGNvbmZpZ3VyZWQpIHJldHVybjsKICAgICAgICBpZiAoZW5hYmxlZCkgewogICAgICAgICAgZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUoJ3lhd2YtZmVlZC1vbmx5JywgJ3lhd2YtZmVlZC1vbmx5Jyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQXR0cmlidXRlKCd5YXdmLWZlZWQtb25seScpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgcnVsZS5yZWYuX2VuYWJsZWQuYWRkQ29uZmlnTGlzdGVuZXIodXBkYXRlRW5hYmxlKTsKICAgICAgdXBkYXRlRW5hYmxlKCk7CiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2Fib3V0L2Fib3V0LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgaTE4bi5hYm91dFRhYlRpdGxlID0gewogICAgY246ICflhbPkuo7oja/mlrknLAogICAgdHc6ICfpl5zmlrzol6XmlrknLAogICAgZW46ICdBYm91dCcsCiAgfTsKCiAgY29uc3QgYWJvdXQgPSB5YXdmLnJ1bGVzLmFib3V0ID0ge307CiAgYWJvdXQuYWJvdXQgPSBydWxlLlRhYih7CiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5hYm91dFRhYlRpdGxlLAogICAgcGFnZW1lbnU6IHRydWUsCiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvYWJvdXQvaW1wb3J0ZXIvaW1wb3J0ZXIuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgaW1wb3J0ZXIgPSB5YXdmLmltcG9ydGVyID0ge307CgogIGNvbnN0IHBhcnNlcnMgPSBbXTsKCiAgaW1wb3J0ZXIucGFyc2VycyA9IHt9OwoKICBpbXBvcnRlci5hZGRQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyKSB7CiAgICBwYXJzZXJzLnB1c2gocGFyc2VyKTsKICAgIGltcG9ydGVyLnBhcnNlcnNbcGFyc2VyLm5hbWVdID0gcGFyc2VyOwogIH07CgogIGltcG9ydGVyLnBhcnNlID0gZnVuY3Rpb24gKGRhdGFBcnJheUJ1ZmZlcikgewogICAgZm9yIChjb25zdCBwYXJzZXIgb2YgcGFyc2VycykgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGNvbmZpZyA9IHBhcnNlcihkYXRhQXJyYXlCdWZmZXIpOwogICAgICAgIGlmIChjb25maWcgJiYgdHlwZW9mIGNvbmZpZyA9PT0gJ29iamVjdCcpIHJldHVybiBjb25maWc7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyByZWFkaW5nIGZhaWxlZAogICAgICB9CiAgICB9CiAgICByZXR1cm4gdm9pZCAwOwogIH07CgoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBAcmVxdWlyZSB5YW9mYW5nOi8vY29udGVudC9ydWxlL2Fib3V0L2ltcG9ydGVyL3lhb2ZhbmcuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgaW1wb3J0ZXIgPSB5YXdmLmltcG9ydGVyOwoKICBpbXBvcnRlci5hZGRQYXJzZXIoZnVuY3Rpb24geWFvZmFuZyhkYXRhQXJyYXlCdWZmZXIpIHsKICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTsKICAgIGNvbnN0IHRleHQgPSBkZWNvZGVyLmRlY29kZShkYXRhQXJyYXlCdWZmZXIpOwogICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UodGV4dCk7CiAgICBpZiAoIWRhdGEudmVyc2lvbiB8fCAhZGF0YS55YW9mYW5nIHx8ICFkYXRhLmNvbmZpZykgdGhyb3cgVHlwZUVycm9yKCk7CiAgICByZXR1cm4geyBjb25maWc6IGRhdGEuY29uZmlnIH07CiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvYWJvdXQvaW1wb3J0ZXIveWF3Zi5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CgogIGNvbnN0IGltcG9ydGVyID0geWF3Zi5pbXBvcnRlcjsKCiAgaTE4bi55YXdmU2NyaXB0U291cmNlID0gewogICAgY246ICdZQVdGIOeUqOaIt+iEmuacrCcsCiAgICB0dzogJ1lBV0Yg55So5oi26IWz5pysJywKICAgIGVuOiAnWUFXRiB1c2VyIHNjcmlwdCcsCiAgfTsKCiAgY2xhc3MgQ29udmVydGVyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICAvKiogQHR5cGUge01hcDxzdHJpbmcsIEFycmF5PCh2YWx1ZTogYW55KSA9PiBPYmplY3Q8c3RyaW5nLCBhbnk+Pj59ICovCiAgICAgIHRoaXMucnVsZXMgPSBuZXcgTWFwKCk7CiAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpOwogICAgfQogICAgY29udmVydCh5YXdmKSB7CiAgICAgIGNvbnN0IHJ1bGVzID0gdGhpcy5ydWxlczsKICAgICAgLyoqIEB0eXBlIE1hcDwodmFsdWVzOiBBcnJheTxhbnk+LCB0YXJnZXQ6IHN0cmluZykgPT4gKHsgW3RhcmdldDogc3RyaW5nXTogYW55IH0pLCB7IHRhcmdldDogc3RyaW5nLCB2YWx1ZXM6IEFycmF5PGFueT4gfT4gKi8KICAgICAgdGhpcy5wZW5kaW5nID0gbmV3IE1hcCgpOwogICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgLi4uT2JqZWN0LmtleXMoeWF3ZikubWFwKGtleSA9PiB7CiAgICAgICAgaWYgKCFydWxlcy5oYXMoa2V5KSkgcmV0dXJuIHt9OwogICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCAuLi5ydWxlcy5nZXQoa2V5KS5tYXAocnVsZSA9PiBydWxlKHlhd2Zba2V5XSkpKTsKICAgICAgfSksIC4uLlsuLi50aGlzLnBlbmRpbmcuZW50cmllcygpXS5tYXAoCiAgICAgICAgKFtjb252ZXJ0ZXIsIHsgdGFyZ2V0LCB2YWx1ZXMgfV0pID0+IGNvbnZlcnRlcih2YWx1ZXMsIHRhcmdldCkKICAgICAgKSk7CiAgICB9CiAgICBydWxlKHNvdXJjZSwgdGFyZ2V0LCBjb252ZXJ0ZXIgPSBudWxsKSB7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgICBpZiAoIXRoaXMucnVsZXMuaGFzKHNvdXJjZSkpIHRoaXMucnVsZXMuc2V0KHNvdXJjZSwgW10pOwogICAgICBjb25zdCBzb3VyY2VSdWxlID0gdGhpcy5ydWxlcy5nZXQoc291cmNlKTsKICAgICAgaWYgKHR5cGVvZiBzb3VyY2UgPT09ICdzdHJpbmcnICYmIHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgaWYgKHR5cGVvZiBjb252ZXJ0ZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHNvdXJjZVJ1bGUucHVzaCh2YWx1ZSA9PiAoeyBbdGFyZ2V0XTogY29udmVydGVyKHZhbHVlKSB9KSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNvdXJjZVJ1bGUucHVzaCh2YWx1ZSA9PiAoeyBbdGFyZ2V0XTogdmFsdWUgfSkpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoQXJyYXkuaXNBcnJheShzb3VyY2UpKSB7CiAgICAgICAgc291cmNlLmZvckVhY2goKGtleSwgaW5kZXgpID0+IHsKICAgICAgICAgIHNvdXJjZVJ1bGUucHVzaCh2YWx1ZSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHBlbmRpbmcgPSB0aGF0LnBlbmRpbmc7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBwZW5kaW5nLmdldChjb252ZXJ0ZXIpIHx8IHsgdGFyZ2V0LCB2YWx1ZXM6IEFycmF5KHNvdXJjZS5sZW5ndGgpIH07CiAgICAgICAgICAgIGRhdGEudmFsdWVzW2luZGV4XSA9IHZhbHVlOwogICAgICAgICAgICBjb25zdCBmdWxsRmlsbGVkID0gZGF0YS52YWx1ZXMucmVkdWNlKHYgPT4gdiArIDEpID09PSBkYXRhLnZhbHVlcy5sZW5ndGg7CiAgICAgICAgICAgIGlmICghZnVsbEZpbGxlZCkgcmV0dXJuOwogICAgICAgICAgICBjb252ZXJ0ZXIoZGF0YS52YWx1ZXMsIHRhcmdldCk7CiAgICAgICAgICAgIHBlbmRpbmcuZGVsZXRlKGNvbnZlcnRlcik7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgaW5pdGlhbGl6ZSgpIHsKICAgICAgY29uc3QgcnVsZSA9IHRoaXMucnVsZS5iaW5kKHRoaXMpOwogICAgICAvLyDlvq7ljZrov4fmu6QKICAgICAgcnVsZSgnd2VpYm8udG9vbC5hdXRvX2NoZWNrX2ZvbGxvd2luZycsICdmaWx0ZXJfZm9sbG93X2NoZWNrJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuYXV0b19jaGVja19mb2xsb3dpbmcuZnJlcXVlbmN5JywgJ2ZpbHRlcl9mb2xsb3dfY2hlY2suZnJlcXVlbmN5JywgZGF5cyA9PiBkYXlzICogODY0MDBlMyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wudW5jaGVja19mb2xsb3dfcHJlc2VudGVyJywgJ3VuY2hlY2tfZm9sbG93X3ByZXNlbnRlcicpOwogICAgICBydWxlKCd3ZWliby50b29sLmF1dG9fdW5mb2xkX3R0YXJ0aWNhbCcsICdzaG93X2FydGljYWxfd2l0aG91dF9mb2xsb3cnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5sb2FkX3dlaWJvX2J5X25ld2VzdCcsICdmaWx0ZXJfaG9tZXBhZ2VfbmV3ZXN0X2ZlZWRzJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wubG9hZF93ZWlib19ieV9ncm91cCcsICdmaWx0ZXJfaG9tZXBhZ2Vfc2luZ2xlX2dyb3VwJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wubG9hZF93ZWlib19ieV9ncm91cC5ncm91cCcsICdmaWx0ZXJfaG9tZXBhZ2Vfc2luZ2xlX2dyb3VwLmdyb3VwJywgZ3JvdXAgPT4gYGcke2dyb3VwLmlkfWApOwogICAgICBydWxlKCd3ZWliby50b29sLmxvYWRfd2VpYm9fYnlfbXVsdGlfZ3JvdXAuZW5hYmxlZCcsICdmaWx0ZXJfaG9tZXBhZ2VfbXVsdGlfZ3JvdXAnKTsKICAgICAgcnVsZShbJ3dlaWJvLnRvb2wubG9hZF93ZWlib19ieV9tdWx0aV9ncm91cCcsICd3ZWliby50b29sLmxvYWRfd2VpYm9fYnlfbXVsdGlfZ3JvdXAud2hpc3BlciddLCAnZmlsdGVyX2hvbWVwYWdlX211bHRpX2dyb3VwLmdyb3VwcycsIChbZ3JvdXBzLCB3aGlzcGVyXSwgdGFyZ2V0KSA9PiAoWwogICAgICAgIC4uLihncm91cHMgfHwgW10pLm1hcChncm91cCA9PiBgZyR7Z3JvdXB9YCksCiAgICAgICAgLi4uKHdoaXNwZXIgPyBbJ3doaXNwZXInXSA6IFtdKSwKICAgICAgXSkpOwogICAgICBydWxlKCd3ZWliby5vdGhlci5hdXRvX2xvYWRfbmV3X3dlaWJvJywgJ2ZpbHRlcl9ob21lcGFnZV9hdXRvX2xvYWQnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuZGVza3RvcF9ub3RpZmljYXRpb24nLCAnZmlsdGVyX2hvbWVwYWdlX2Rlc2t0b3Bfbm90aWZ5Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLmRlc2t0b3Bfbm90aWZpY2F0aW9uLnR5cGVzJywgJ2ZpbHRlcl9ob21lcGFnZV9kZXNrdG9wX25vdGlmeS53aGl0ZWxpc3QnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5yZWRpcmVjdFdlaWJvJywgJ2ZpbHRlcl9wcm9maWxlX3Nob3dfYWxsJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuZmFzdF9ibG9ja19idXR0b24nLCAnZmlsdGVyX21hbnVhbGx5X2hpZGUnKTsKICAgICAgLy8g5YaF5a65772e5p2l5rqQCiAgICAgIGNvbnN0IHJlZ2V4ZW5JbXBvcnRlciA9IHJlZ2V4ZW4gPT4gcmVnZXhlbi5tYXAoc291cmNlID0+ICh7IHNvdXJjZSwgZmxhZ3M6ICdtdScgfSkpOwogICAgICBjb25zdCB1c2VySWRJbXBvcnRlciA9IGlkcyA9PiBpZHMubWFwKGlkID0+ICh7IGlkIH0pKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5rZXl3b3JkLndoaXRlbGlzdCcsICdmaWx0ZXJfY29udGVudF90ZXh0X3Nob3cuaXRlbXMnKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5rZXl3b3JkLmJsYWNrbGlzdCcsICdmaWx0ZXJfY29udGVudF90ZXh0X2hpZGUuaXRlbXMnKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5rZXl3b3JkLmZvbGRsaXN0JywgJ2ZpbHRlcl9jb250ZW50X3RleHRfZm9sZC5pdGVtcycpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLnJlZ2V4cC53aGl0ZWxpc3QnLCAnZmlsdGVyX2NvbnRlbnRfcmVnZXhfc2hvdy5pdGVtcycsIHJlZ2V4ZW5JbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMucmVnZXhwLmJsYWNrbGlzdCcsICdmaWx0ZXJfY29udGVudF9yZWdleF9oaWRlLml0ZW1zJywgcmVnZXhlbkltcG9ydGVyKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5yZWdleHAuZm9sZGxpc3QnLCAnZmlsdGVyX2NvbnRlbnRfcmVnZXhfZm9sZC5pdGVtcycsIHJlZ2V4ZW5JbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMuYWNjb3VudC53aGl0ZWxpc3QnLCAnZmlsdGVyX2F1dGhvcl9pZF9zaG93Lml0ZW1zJywgdXNlcklkSW1wb3J0ZXIpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLmFjY291bnQuYmxhY2tsaXN0JywgJ2ZpbHRlcl9hdXRob3JfaWRfaGlkZS5pdGVtcycsIHVzZXJJZEltcG9ydGVyKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5hY2NvdW50LmZvbGRsaXN0JywgJ2ZpbHRlcl9hdXRob3JfaWRfZm9sZC5pdGVtcycsIHVzZXJJZEltcG9ydGVyKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5hY2NvdW50Zi5ibGFja2xpc3QnLCAnZmlsdGVyX2F1dGhvcl9mb3J3YXJkX2lkX2hpZGUuaXRlbXMnLCB1c2VySWRJbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMuYWNjb3VudGYuZm9sZGxpc3QnLCAnZmlsdGVyX2F1dGhvcl9mb3J3YXJkX2lkX2ZvbGQuaXRlbXMnLCB1c2VySWRJbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLm9yaWdpbmFsLmJsYWNrbGlzdF9kJywgJ2ZpbHRlcl9vcmlnaW5hbF9kaXNjb3ZlcicpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLm9yaWdpbmFsLndoaXRlbGlzdCcsICdmaWx0ZXJfb3JpZ2luYWxfaWRfc2hvdy5pdGVtcycsIHVzZXJJZEltcG9ydGVyKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5vcmlnaW5hbC5ibGFja2xpc3QnLCAnZmlsdGVyX29yaWdpbmFsX2lkX2hpZGUuaXRlbXMnLCB1c2VySWRJbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMub3JpZ2luYWwuZm9sZGxpc3QnLCAnZmlsdGVyX29yaWdpbmFsX2lkX2ZvbGQuaXRlbXMnLCB1c2VySWRJbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLm9yaWdpbmFsLmJ5X2ZvbGxvd2VyLmVuYWJsZWQnLCAnZmlsdGVyX29yaWdpbmFsX2ZvbGxvd2VyJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm9yaWdpbmFsLmJ5X2ZvbGxvd2VyLmZhbnMnLCAnZmlsdGVyX29yaWdpbmFsX2ZvbGxvd2VyLmNvdW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm9yaWdpbmFsLmJ5X2ZvbGxvd2VyJywgJ2ZpbHRlcl9vcmlnaW5hbF9mb2xsb3dlci5hY2NvdW50JywgdXNlcklkSW1wb3J0ZXIpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLm1lbnRpb24ud2hpdGVsaXN0JywgJ2ZpbHRlcl9tZW50aW9uX25hbWVfc2hvdy5pdGVtcycpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLm1lbnRpb24uYmxhY2tsaXN0JywgJ2ZpbHRlcl9tZW50aW9uX25hbWVfaGlkZS5pdGVtcycpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLm1lbnRpb24uZm9sZGxpc3QnLCAnZmlsdGVyX21lbnRpb25fbmFtZV9mb2xkLml0ZW1zJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMudG9waWMud2hpdGVsaXN0JywgJ2ZpbHRlcl90b3BpY190ZXh0X3Nob3cuaXRlbXMnKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy50b3BpYy5ibGFja2xpc3QnLCAnZmlsdGVyX3RvcGljX3RleHRfaGlkZS5pdGVtcycpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLnRvcGljLmZvbGRsaXN0JywgJ2ZpbHRlcl90b3BpY190ZXh0X2ZvbGQuaXRlbXMnKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5zb3VyY2Uud2hpdGVsaXN0JywgJ2ZpbHRlcl9zb3VyY2VfdGV4dF9zaG93Lml0ZW1zJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMuc291cmNlLmJsYWNrbGlzdCcsICdmaWx0ZXJfc291cmNlX3RleHRfaGlkZS5pdGVtcycpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLnNvdXJjZS5mb2xkbGlzdCcsICdmaWx0ZXJfc291cmNlX3RleHRfZm9sZC5pdGVtcycpOwogICAgICAvLyDmm7TlpJoKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIubXlfd2VpYm8nLCAnZmlsdGVyX215X2ZlZWQnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIubXlfb3JpZ2luYWwnLCAnZmlsdGVyX215X29yaWdpbmFsJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLm1lbnRpb25fbWUnLCAnZmlsdGVyX21lbnRpb25fbWUnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuYWRfZmVlZCcsICdmaWx0ZXJfYWRfZmVlZCcpOwogICAgICBydWxlKCd3ZWliby5vdGhlci5mYW5zX3RvcCcsICdmaWx0ZXJfZmFuc190b3AnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIucHJvZHVjdF9jYXJkJywgJ2ZpbHRlcl93ZWlib19wcm9kdWN0Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLnRiX3RtX3diJywgJ2ZpbHRlcl90Yl90bV9mZWVkJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLndlaWJvX3BheV9naWZ0JywgJ2ZpbHRlcl93ZWlib19wYXknKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIudXNlcl9saWtlJywgJ2ZpbHRlcl91c2VyX2xpa2UnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuZmFrZV93ZWlibycsICdmaWx0ZXJfZmFrZV93ZWlibycpOwogICAgICBydWxlKCd3ZWliby5vdGhlci5kZWxldGVkX2ZvcndhcmQnLCAnZmlsdGVyX2RlbGV0ZWRfZm9yd2FyZCcpOwogICAgICBydWxlKCd3ZWliby5vdGhlci5jb21tZW50X2FuZF9yZXBseScsICdmaWx0ZXJfY29tbWVudF9hbmRfZm9yd2FyZCcpOwogICAgICBydWxlKCd3ZWliby5vdGhlci52b3RlX3dlaWJvJywgJ2ZpbHRlcl92b3RlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLnJlZDIwMTQnLCAnZmlsdGVyX3JlZF9wYWNrJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLmppbmxpX2ZvcndhcmQnLCAnZmlsdGVyX2tvaV9mb3J3YXJkJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLmFwcGl0ZW0nLCAnZmlsdGVyX2FwcF9pdGVtJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLndlbmRhJywgJ2ZpbHRlcl93ZW5kYScpOwogICAgICBydWxlKCd3ZWliby5vdGhlci53ZW53b2RyJywgJ2ZpbHRlcl93ZW53b19kcicpOwogICAgICBydWxlKCd3ZWliby5vdGhlci55aXpoaWJvLnR5cGUnLCAnZmlsdGVyX3lpemhpYm8nKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuc3RvY2snLCAnZmlsdGVyX3N0b2NrJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLnBhaWQnLCAnZmlsdGVyX3BhaWQnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIubXVsdGlfdG9waWMnLCAnZmlsdGVyX211bHRpcGxlX3RvcGljc19mZWVkJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLm11bHRpX3RvcGljLm51bScsICdmaWx0ZXJfbXVsdGlwbGVfdG9waWNzX2ZlZWQubnVtJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLnNhbWVfYWNjb3VudCcsICdmbG9vZGluZ19hdXRob3InKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuc2FtZV9hY2NvdW50Lm51bWJlcicsICdmbG9vZGluZ19hdXRob3IubnVtYmVyJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLnNhbWVfYWNjb3VudC5hY3Rpb24nLCAnZmxvb2RpbmdfYXV0aG9yLm51bWJlci5hY3Rpb24nLCBhY3Rpb24gPT4gKHsgZm9sZDogJ2ZvbGQnLCBoaWRkZW46ICdoaWRlJyB9W2FjdGlvbl0pKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuc2FtZV9mb3J3YXJkJywgJ2Zsb29kaW5nX2ZvcndhcmQnKTsKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuc2FtZV9mb3J3YXJkLm51bWJlcicsICdmbG9vZGluZ19mb3J3YXJkLm51bWJlcicpOwogICAgICBydWxlKCd3ZWliby5vdGhlci5zYW1lX2ZvcndhcmQuYWN0aW9uJywgJ2Zsb29kaW5nX2ZvcndhcmQubnVtYmVyLmFjdGlvbicsIGFjdGlvbiA9PiAoeyBmb2xkOiAnZm9sZCcsIGhpZGRlbjogJ2hpZGUnIH1bYWN0aW9uXSkpOwogICAgICAvLyDor4Torrrov4fmu6QKICAgICAgcnVsZSgnd2VpYm8ub3RoZXIuY29tbWVudF9zaG93X2FsbCcsICdjb21tZW50X2xheW91dF9ieV90aW1lJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLmZvbGRfY2hpbGRfY29tbWVudCcsICdjb21tZW50X2xheW91dF9oaWRlX3N1YicpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLmNrZXl3b3JkLndoaXRlbGlzdCcsICdmaWx0ZXJfY29tbWVudF90ZXh0X3Nob3cuaXRlbXMnKTsKICAgICAgcnVsZSgnd2VpYm8uZmlsdGVycy5ja2V5d29yZC5ibGFja2xpc3QnLCAnZmlsdGVyX2NvbW1lbnRfdGV4dF9oaWRlLml0ZW1zJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMuY3JlZ2V4cC53aGl0ZWxpc3QnLCAnZmlsdGVyX2NvbW1lbnRfcmVnZXhfc2hvdy5pdGVtcycsIHJlZ2V4ZW5JbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMuY3JlZ2V4cC5ibGFja2xpc3QnLCAnZmlsdGVyX2NvbW1lbnRfcmVnZXhfaGlkZS5pdGVtcycsIHJlZ2V4ZW5JbXBvcnRlcik7CiAgICAgIHJ1bGUoJ3dlaWJvLmZpbHRlcnMuY3VzZXIud2hpdGVsaXN0JywgJ2ZpbHRlcl9jb21tZW50X25hbWVfc2hvdy5pdGVtcycpOwogICAgICBydWxlKCd3ZWliby5maWx0ZXJzLmN1c2VyLmJsYWNrbGlzdCcsICdmaWx0ZXJfY29tbWVudF9uYW1lX2hpZGUuaXRlbXMnKTsKICAgICAgcnVsZSgnd2VpYm8uY29tbWVudC5teV9jb21tZW50JywgJ2ZpbHRlcl9jb21tZW50X3Nob3dfbXknKTsKICAgICAgcnVsZSgnd2VpYm8uY29tbWVudC5lbW9qaV9jb3VudCcsICdmaWx0ZXJfY29tbWVudF9mYWNlX2NvdW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmNvbW1lbnQuZW1vamlfY291bnQubnVtYmVyJywgJ2ZpbHRlcl9jb21tZW50X2ZhY2VfY291bnQuY291bnQnKTsKICAgICAgcnVsZSgnd2VpYm8uY29tbWVudC5lbW9qaV90eXBlcycsICdmaWx0ZXJfY29tbWVudF9mYWNlX3R5cGUnKTsKICAgICAgcnVsZSgnd2VpYm8uY29tbWVudC5lbW9qaV90eXBlcy5udW1iZXInLCAnZmlsdGVyX2NvbW1lbnRfZmFjZV90eXBlLmNvdW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmNvbW1lbnQubm9fY29udGVudCcsICdmaWx0ZXJfY29tbWVudF93b19jb250ZW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmNvbW1lbnQud2l0aF9mb3J3YXJkJywgJ2ZpbHRlcl9jb21tZW50X3dpdGhfZm9yd2FyZCcpOwogICAgICAvLyDnlYzpnaLmuIXnkIYKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25MZXZlbCcsICdjbGVhbl9pY29uc19sZXZlbCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlSWNvbk1lbWJlcicsICdjbGVhbl9pY29uc19tZW1iZXInKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25BcHByb3ZlJywgJ2NsZWFuX2ljb25zX2FwcHJvdmUnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25BcHByb3ZlQ28nLCAnY2xlYW5faWNvbnNfYXBwcm92ZV9jbycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlSWNvbkFwcHJvdmVEZWFkJywgJ2NsZWFuX2ljb25zX2FwcHJvdmVfZGVhZCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlSWNvbkJpZ0Z1bicsICdjbGVhbl9pY29uc19iaWdmdW4nKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25DbHViJywgJ2NsZWFuX2ljb25zX2NsdWInKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25WR2lybCcsICdjbGVhbl9pY29uc192X2dpcmwnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25TdXBlcnZpc29yJywgJ2NsZWFuX2ljb25zX3N1cGVydmlzb3InKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25UYW9iYW8nLCAnY2xlYW5faWNvbnNfdGFvYmFvJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVJY29uQ2hlbmcnLCAnY2xlYW5faWNvbnNfY2hlbmcnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25Hb25neWknLCAnY2xlYW5faWNvbnNfZ29uZ3lpJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVJY29uWm9uZ3lpa2EnLCAnY2xlYW5faWNvbnNfem9uZ3lpa2EnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUljb25PdGhlcicsICdjbGVhbl9pY29uc19vdGhlcnMnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUZvbGxvd1NpbmdsZScsICdjbGVhbl9mb2xsb3dfc2luZ2xlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVGb2xsb3dBdE1lJywgJ2NsZWFuX2ZvbGxvd19hdF9tZScpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlRm9sbG93RGlzY292ZXInLCAnY2xlYW5fZm9sbG93X2Rpc2NvdmVyJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVGb2xsb3dXaGlzcGVyJywgJ2NsZWFuX2ZvbGxvd193aGlzcGVyJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVGb2xsb3dWaWRlbycsICdjbGVhbl9mb2xsb3dfdmlkZW8nKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUZvbGxvd1JlY29tbWVuZCcsICdjbGVhbl9mb2xsb3dfcmVjb21tZW5kJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVOYXZMb2dvSW1nJywgJ2NsZWFuX25hdl9sb2dvX2ltZycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTmF2TWFpbicsICdjbGVhbl9uYXZfbWFpbicpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTmF2VFYnLCAnY2xlYW5fbmF2X3R2Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVOYXZIb3QnLCAnY2xlYW5fbmF2X2hvdCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTmF2R2FtZScsICdjbGVhbl9uYXZfZ2FtZScpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTmF2SG90U2VhcmNoJywgJ2NsZWFuX25hdl9ob3Rfc2VhcmNoJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVOYXZOb3RpY2VOZXcnLCAnY2xlYW5fbmF2X25vdGljZV9uZXcnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZU5hdk5ldycsICdjbGVhbl9uYXZfbmV3Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVMZWZ0TmV3RmVlZCcsICdjbGVhbl9sZWZ0X25ld19mZWVkJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVMZWZ0SG9tZScsICdjbGVhbl9sZWZ0X2hvbWUnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUxlZnRGYXYnLCAnY2xlYW5fbGVmdF9mYXYnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUxlZnRMaWtlJywgJ2NsZWFuX2xlZnRfbGlrZScpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTGVmdEhvdCcsICdjbGVhbl9sZWZ0X2hvdCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTGVmdFRWJywgJ2NsZWFuX2xlZnRfdHYnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUxlZnRGcmllbmRzJywgJ2NsZWFuX2xlZnRfZnJpZW5kcycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTGVmdEdyb3VwVG9NZScsICdjbGVhbl9sZWZ0X2dyb3VwX3RvX21lJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVMZWZ0U3BlY2lhbCcsICdjbGVhbl9sZWZ0X3NwZWNpYWwnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUxlZnRXaGlzcGVyJywgJ2NsZWFuX2xlZnRfd2hpc3BlcicpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTGVmdFZQbHVzJywgJ2NsZWFuX2xlZnRfdl9wbHVzJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVMZWZ0TmV3JywgJ2NsZWFuX2xlZnRfbmV3Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVMZWZ0TmV3cycsICdjbGVhbl9sZWZ0X25ld3MnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZUxlZnRDb3VudCcsICdjbGVhbl9sZWZ0X2NvdW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVNaWRkbGVSZWNvbW1lbmRlZFRvcGljJywgJ2NsZWFuX21pZGRsZV9yZWNvbW1lbmRlZF90b3BpYycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTWlkZGxlRmVlZFJlY29tbWFuZCcsICdjbGVhbl9taWRkbGVfZmVlZF9yZWNvbW1lbmQnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZU1pZGRsZU1lbWJlclRpcCcsICdjbGVhbl9taWRkbGVfbWVtYmVyX3RpcCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUmlnaHRJbmZvJywgJ2NsZWFuX3JpZ2h0X2luZm8nKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVJpZ2h0UmVjb21NdXNpY1JhbmsnLCAnY2xlYW5fcmlnaHRfcmFua3MnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVJpZ2h0SG90VG9waWMnLCAnY2xlYW5fcmlnaHRfaG90X3RvcGljJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVSaWdodEludGVyZXN0JywgJ2NsZWFuX3JpZ2h0X2ludGVyZXN0Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVSaWdodE1lbWJlcicsICdjbGVhbl9yaWdodF9tZW1iZXInKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVJpZ2h0R3JvdXBzJywgJ2NsZWFuX3JpZ2h0X2dyb3VwcycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUmlnaHRSZWNvbUdyb3VwVXNlcicsICdjbGVhbl9yaWdodF9yZWNvbV9ncm91cF91c2VyJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVSaWdodEhvbmdiYW9SYW5rJywgJ2NsZWFuX3JpZ2h0X2hvbmdiYW9fcmFuaycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUmlnaHRBdHRGZWVkJywgJ2NsZWFuX3JpZ2h0X2F0dF9mZWVkJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVSaWdodE5vdGljZScsICdjbGVhbl9yaWdodF9ub3RpY2UnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvUmVjb21GZWVkJywgJ2NsZWFuX2ZlZWRfcmVjb21tZW5kJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib0ZlZWRPdXRlclRpcCcsICdjbGVhbl9mZWVkX2ZlZWRfb3V0ZXJfdGlwJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib0ZlZWRUaXAnLCAnY2xlYW5fZmVlZF9mZWVkX3RpcCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlV2VpYm9Hcm91cFRpcCcsICdjbGVhbl9mZWVkX2dyb3VwX3RpcCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlV2VpYm9WSVBCYWNrZ3JvdW5kJywgJ2NsZWFuX2ZlZWRfdmlwX2JhY2tncm91bmQnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvTGFzdFBpYycsICdjbGVhbl9mZWVkX2xhc3RfcGljJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib1BpY1RhZycsICdjbGVhbl9mZWVkX3BpY190YWcnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvU29uVGl0bGUnLCAnY2xlYW5fZmVlZF9zb25fdGl0bGUnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvQ2FyZCcsICdjbGVhbl9mZWVkX2NhcmQnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvQXJ0aWNhbFBheScsICdjbGVhbl9mZWVkX2FydGljbGVfcGF5Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib1RhZycsICdjbGVhbl9mZWVkX3RhZycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlV2VpYm9Nb3ZpZVRhZycsICdjbGVhbl9mZWVkX3JlbGF0ZWRfbGluaycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlV2VpYm9Tb3VyY2UnLCAnY2xlYW5fZmVlZF9zb3VyY2UnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvUG9wJywgJ2NsZWFuX2ZlZWRfcG9wJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib0xpa2UnLCAnY2xlYW5fZmVlZF9saWtlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib0xpa2VDb21tZW50JywgJ2NsZWFuX2ZlZWRfbGlrZV9jb21tZW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVXZWlib0xpa2VQb3B1cCcsICdjbGVhbl9mZWVkX2xpa2VfYXR0aXR1ZGUnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvRm9yd2FyZCcsICdjbGVhbl9mZWVkX2ZvcndhcmQnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvRmF2b3VyaXRlJywgJ2NsZWFuX2ZlZWRfZmF2b3JpdGUnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvUHJvbW90ZU90aGVyJywgJ2NsZWFuX2ZlZWRfcHJvbW90ZV9vdGhlcicpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlV2VpYm9SZXBvcnQnLCAnY2xlYW5fZmVlZF9yZXBvcnQnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVdlaWJvVXNlQ2FyZEJhY2tncm91bmQnLCAnY2xlYW5fZmVlZF91c2VfY2FyZF9iYWNrZ3JvdW5kJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVQZXJzb25Nb3ZlVGhpbmdzJywgJ2NsZWFuX3Byb2ZpbGVfbW92ZV90aGluZ3MnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvbkNvdmVyJywgJ2NsZWFuX3Byb2ZpbGVfY292ZXInKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvbkJHSW1nJywgJ2NsZWFuX3Byb2ZpbGVfYmdfaW1nJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVQZXJzb25CYWRnZUljb24nLCAnY2xlYW5fcHJvZmlsZV9iYWRnZV9pY29uJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVQZXJzb25WZXJpZnknLCAnY2xlYW5fcHJvZmlsZV92ZXJpZnknKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvbkVkaXRQZXJzb25JbmZvJywgJ2NsZWFuX3Byb2ZpbGVfZWRpdF9wZXJzb25faW5mbycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUGVyc29uU3RhdHMnLCAnY2xlYW5fcHJvZmlsZV9zdGF0cycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUGVyc29uTXlEYXRhJywgJ2NsZWFuX3Byb2ZpbGVfbXlfZGF0YScpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUGVyc29uU3VnZ2VzdFVzZXInLCAnY2xlYW5fcHJvZmlsZV9zdWdnZXN0X3VzZXInKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvbkdyb3VwJywgJ2NsZWFuX3Byb2ZpbGVfZ3JvdXAnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvblJlbGF0aW9uJywgJ2NsZWFuX3Byb2ZpbGVfcmVsYXRpb24nKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvbkFsYnVtJywgJ2NsZWFuX3Byb2ZpbGVfYWxidW0nKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvbkhvdFRvcGljJywgJ2NsZWFuX3Byb2ZpbGVfaG90X3RvcGljJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVQZXJzb25Ib3RXZWlibycsICdjbGVhbl9wcm9maWxlX2hvdF93ZWlibycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUGVyc29uVXNlckxpc3QnLCAnY2xlYW5fcHJvZmlsZV9yZWNvbW1lbmRfZmVlZCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUGVyc29uSG9uZ2JhbycsICdjbGVhbl9wcm9maWxlX3VzZXJfbGlzdCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlUGVyc29uV2Vud29EcicsICdjbGVhbl9wcm9maWxlX2hvbmdiYW8nKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZVBlcnNvblRpbWVsaW5lJywgJ2NsZWFuX3Byb2ZpbGVfd2Vud29fZHInKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZU1lc3NhZ2VzSGVscCcsICdjbGVhbl9wcm9maWxlX3RpbWVsaW5lJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVNZXNzYWdlc0ZlZWRiYWNrJywgJ2NsZWFuX21lc3NhZ2VfaGVscCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlTWVzc2FnZXNZb3VkYW8nLCAnY2xlYW5fbWVzc2FnZV9mZWVkYmFjaycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlT3RoZXJBZHMnLCAnY2xlYW5fb3RoZXJfYWRzJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVPdGhlck11c2ljJywgJ2NsZWFuX290aGVyX211c2ljJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVPdGhlclRlbXBsYXRlJywgJ2NsZWFuX290aGVyX3RlbXBsYXRlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVPdGhlckhvbWVUaXAnLCAnY2xlYW5fb3RoZXJfaG9tZV90aXAnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0SGlkZU90aGVyRm9vdGVyJywgJ2NsZWFuX290aGVyX2Zvb3RlcicpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlT3RoZXJJTScsICdjbGVhbl9vdGhlcl9pbScpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlT3RoZXJJTU5ld3MnLCAnY2xlYW5fb3RoZXJfaW1fbmV3cycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlT3RoZXJUaXAnLCAnY2xlYW5fb3RoZXJfdGlwJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVPdGhlclJlbGF0ZWRXQicsICdjbGVhbl9vdGhlcl9yZWxhdGVkX2ZlZWRzJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVPdGhlclJlbGF0ZWRWaWRlbycsICdjbGVhbl9vdGhlcl9yZWxhdGVkX3ZpZGVvJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dEhpZGVPdGhlclJlbGF0ZWRBcnRpY2FsJywgJ2NsZWFuX290aGVyX3JlbGF0ZWRfYXJ0aWNhbCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXRIaWRlT3RoZXJTZW5kV2VpYm8nLCAnY2xlYW5fb3RoZXJfc2VuZF93ZWlibycpOwogICAgICAvLyDniYjpnaLlsZXnpLoKICAgICAgcnVsZSgnd2VpYm8udG9vbC5oaWRlX25hdl9iYXInLCAnbGF5b3V0X25hdl9hdXRvX2hpZGUnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5yZW9yZGVyX25hdl9iYXInLCAnbGF5b3V0X25hdl9jbGFzc2ljYWwnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5uYXZfaGlkZV9uYW1lJywgJ2xheW91dF9uYXZfaGlkZV9uYW1lJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wubmF2X2hpZGVfbmFtZS5hY3QnLCAnbGF5b3V0X25hdl9oaWRlX25hbWUuYWN0Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd0FsbE1zZ05hdicsICdsYXlvdXRfbGVmdF9tZXNzYWdlcycpOwogICAgICBydWxlKCd3ZWliby50b29sLnNob3dBbGxNc2dOYXYuYXRtZScsICdsYXlvdXRfbGVmdF9tZXNzYWdlcy5hdG1lJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd0FsbE1zZ05hdi5jbXQnLCAnbGF5b3V0X2xlZnRfbWVzc2FnZXMuY210Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd0FsbE1zZ05hdi5saWtlJywgJ2xheW91dF9sZWZ0X21lc3NhZ2VzLmxpa2UnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5zaG93QWxsTXNnTmF2LmRtJywgJ2xheW91dF9sZWZ0X21lc3NhZ2VzLmRtJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd0FsbE1zZ05hdi5tc2dib3gnLCAnbGF5b3V0X2xlZnRfbWVzc2FnZXMubXNnYm94Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd0FsbE1zZ05hdi5ncm91cCcsICdsYXlvdXRfbGVmdF9tZXNzYWdlcy5ncm91cCcpOwogICAgICBydWxlKCd3ZWliby50b29sLnNob3dBbGxNc2dOYXYuZG1zdWInLCAnbGF5b3V0X2xlZnRfbWVzc2FnZXMuZG1zdWInKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5tZXJnZUNvbHVtbnMnLCAnbGF5b3V0X3NpZGVfbWVyZ2UnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5tZXJnZUNvbHVtbnMuc2lkZScsICdsYXlvdXRfc2lkZV9tZXJnZS5zaWRlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY2hvc2Vfc2lkZScsICdsYXlvdXRfc2lkZV9wb3NpdGlvbicpOwogICAgICBydWxlKCd3ZWliby50b29sLmNob3NlX3NpZGUuc2lkZScsICdsYXlvdXRfc2lkZV9wb3NpdGlvbi5zaWRlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd0FsbEdyb3VwJywgJ2xheW91dF9zaWRlX3Nob3dfYWxsX2dyb3VwcycpOwogICAgICBydWxlKCd3ZWliby50b29sLmZpeGVkTGVmdCcsICdsYXlvdXRfbGVmdF9tb3ZlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuZml4ZWRSaWdodCcsICdsYXlvdXRfcmlnaHRfbW92ZScpOwogICAgICBydWxlKCd3ZWliby50b29sLmZpeGVkT3RoZXJzJywgJ2xheW91dF9vdGhlcl9tb3ZlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY3VzdG9tX2ZvbnRfZmFtaWx5JywgJ2ZvbnRfZmFtaWx5Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY3VzdG9tX2ZvbnRfZmFtaWx5LndmJywgJ2ZvbnRfZmFtaWx5Lndlc3QnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5jdXN0b21fZm9udF9mYW1pbHkuY2YnLCAnZm9udF9mYW1pbHkuY2hpbmVzZScpOwogICAgICBydWxlKCd3ZWliby50b29sLmF2YXRhcl9zaGFwZScsICdsYXlvdXRfYXZhdGFyX3NoYXBlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuYXZhdGFyX3NoYXBlLnNoYXBlJywgJ2xheW91dF9hdmF0YXJfc2hhcGUuc2hhcGUnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5mYXN0X2Vtb2ppJywgJ2xheW91dF9mYXN0X2ZhY2UnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5zaG93X2xvY2FsX3RpbWUnLCAnbGF5b3V0X2xvY2FsZV90aW1lem9uZScpOwogICAgICBydWxlKCd3ZWliby50b29sLnNldF9za2luJywgJ2xheW91dF90aGVtZV9hcHBseScpOwogICAgICBydWxlKCd3ZWliby50b29sLnNldF9za2luLnNraW4nLCAnbGF5b3V0X3RoZW1lX2FwcGx5LnNraW4nKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5kYXJrX25hdl9iYXInLCAnbGF5b3V0X25hdl9kYXJrJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY29sb3Jfb3ZlcnJpZGUnLCAnbGF5b3V0X3RoZW1lX2NvbG9yJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY29sb3Jfb3ZlcnJpZGUuY29sb3IxJywgJ2xheW91dF90aGVtZV9jb2xvci5jb2xvcjEnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5jb2xvcl9vdmVycmlkZS50cmFuc3BhcmVuY3kxJywgJ2xheW91dF90aGVtZV9jb2xvci50cmFuc3BhcmVuY3kxJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY29sb3Jfb3ZlcnJpZGUuY29sb3IyJywgJ2xheW91dF90aGVtZV9jb2xvci5jb2xvcjInKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5jb2xvcl9vdmVycmlkZS50cmFuc3BhcmVuY3kyJywgJ2xheW91dF90aGVtZV9jb2xvci50cmFuc3BhcmVuY3kyJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuY29sb3Jfb3ZlcnJpZGUuY29sb3IzJywgJ2xheW91dF90aGVtZV9jb2xvci5jb2xvcjMnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5jb2xvcl9vdmVycmlkZS50cmFuc3BhcmVuY3kzJywgJ2xheW91dF90aGVtZV9jb2xvci50cmFuc3BhcmVuY3kzJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wudXNlcnN0eWxlJywgJ2N1c3RvbV9jc3MuY3NzJyk7CiAgICAgIC8vIOW+ruWNmuWxleekugogICAgICBydWxlKCd3ZWliby50b29sLm5vX3dlaWJvX3NwYWNlJywgJ2ZlZWRfbm9fc3BhY2UnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5mcm9tX2luX2JvdHRvbScsICdmZWVkX3NvdXJjZV9hdF9ib3R0b20nKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC51bndyYXBUZXh0JywgJ2ZlZWRfYXV0aG9yX2NvbnRlbnRfbm93cmFwJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuaW1hZ2Vfc2l6ZScsICdmZWVkX3NtYWxsX2ltYWdlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuaW1hZ2Vfc2l6ZS5yZXBvc3QnLCAnZmVlZF9zbWFsbF9pbWFnZS5yZXBvc3QnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC53aWR0aF93ZWlibycsICdmZWVkX2luY3JlYXNlX3dpZHRoJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wud2lkdGhfd2VpYm8ud2lkdGgnLCAnZmVlZF9pbmNyZWFzZV93aWR0aC53aWR0aCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXQucmVvcmRlcicsICdmZWVkX2J1dHRvbl9vcmRlcicpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXQucmVvcmRlci4xJywgJ2ZlZWRfYnV0dG9uX29yZGVyLjAnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0LnJlb3JkZXIuMicsICdmZWVkX2J1dHRvbl9vcmRlci4xJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dC5yZW9yZGVyLjMnLCAnZmVlZF9idXR0b25fb3JkZXIuMicpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXQucmVvcmRlci40JywgJ2ZlZWRfYnV0dG9uX29yZGVyLjMnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0LnJlb3JkZXIuNScsICdmZWVkX2J1dHRvbl9vcmRlci40Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dC5jbXRvcmRlcicsICdmZWVkX2J1dHRvbl9vcmRlcl9jb21tZW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dC5jbXRvcmRlci4xJywgJ2ZlZWRfYnV0dG9uX29yZGVyX2NvbW1lbnQuMCcpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXQuY210b3JkZXIuMicsICdmZWVkX2J1dHRvbl9vcmRlcl9jb21tZW50LjEnKTsKICAgICAgcnVsZSgnd2VpYm8ubGF5b3V0LmNtdG9yZGVyLjMnLCAnZmVlZF9idXR0b25fb3JkZXJfY29tbWVudC4yJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLmxheW91dC5jbXRvcmRlci40JywgJ2ZlZWRfYnV0dG9uX29yZGVyX2NvbW1lbnQuMycpOwogICAgICBydWxlKCd3ZWliby5sYXlvdXQuY210b3JkZXIuNScsICdmZWVkX2J1dHRvbl9vcmRlcl9jb21tZW50LjQnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5ub1RhZ0RpYWxvZycsICdmZWVkX2Rpc2FibGVfdGFnX2RpYWxvZycpOwogICAgICBydWxlKCd3ZWliby50b29sLmhpZ2hsaWdodF9sb3dfcmVhZGluZycsICdmZWVkX2xvd19yZWFkaW5nX3dhcm4nKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC53ZWlib19sYXJnZV9mb250JywgJ2ZlZWRfZm9udF9zaXplJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wud2VpYm9fbGFyZ2VfZm9udC5yYXRpbycsICdmZWVkX2ZvbnRfc2l6ZS5yYXRpbycpOwogICAgICBydWxlKCd3ZWliby50b29sLmF1dG9fdW5mb2xkX3dlaWJvJywgJ2ZlZWRfbG9uZ19leHBhbmQnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5hdXRvX3VuZm9sZF93ZWliby5jb3VudCcsICdmZWVkX2xvbmdfZXhwYW5kLmNvdW50Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuYXV0b191bmZvbGRfd2VpYm8uYnInLCAnZmVlZF9sb25nX2V4cGFuZC5icicpOwogICAgICBydWxlKCd3ZWliby50b29sLnVud3JhcENvbnRlbnQnLCAnZmVlZF9jb250ZW50X2xpbmVfYnJlYWsnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC51bndyYXBDb250ZW50LnRleHQnLCAnZmVlZF9jb250ZW50X2xpbmVfYnJlYWsudGV4dCcpOwogICAgICBydWxlKCd3ZWliby50b29sLnJlcGxhY2VfbGluaycsICdmZWVkX2xpbmtfdXNlX3VybCcpOwogICAgICBydWxlKCd3ZWliby50b29sLnJlcGxhY2VfaW1hZ2VfZW1vamknLCAnZmVlZF91bmljb2RlX2Vtb2ppJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuc2hvd192b3RlX3Jlc3VsdCcsICdzaG93X3ZvdGVfcmVzdWx0Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLm90aGVyLmN1c3RvbWl6ZV9zb3VyY2UnLCAnZmVlZF9ub19jdXN0b21fc291cmNlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wudmlld09yaWdpbmFsJywgJ2ZlZWRfdmlld19vcmlnaW5hbCcpOwogICAgICBydWxlKCd3ZWliby50b29sLnZpZXdPcmlnaW5hbC5vcGVuJywgJ2ZlZWRfdmlld19vcmlnaW5hbC5vcGVuJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wudmlld09yaWdpbmFsLmRpcmVjdCcsICdmZWVkX3ZpZXdfb3JpZ2luYWwuZGlyZWN0Jyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuZG93bmxvYWRJbWFnZScsICdmZWVkX2Rvd25sb2FkX2ltYWdlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wuZG93bmxvYWRJbWFnZS5kaXJlY3QnLCAnZmVlZF9kb3dubG9hZF9pbWFnZS5kaXJlY3QnKTsKICAgICAgcnVsZSgnd2VpYm8udG9vbC5wYXVzZV9hbmltYXRlZF9pbWFnZScsICdmZWVkX25vX2FuaW1hdGVkX2ltYWdlJyk7CiAgICAgIHJ1bGUoJ3dlaWJvLnRvb2wudXNlX2J1aWx0X2luX3ZpZGVvX3BsYXllcicsICdmZWVkX2J1aWx0X2luX3ZpZGVvX3BsYXllcicpOwogICAgICBydWxlKCd3ZWliby50b29sLnVzZV9idWlsdF9pbl92aWRlb19wbGF5ZXIudm9sdW1lJywgJ2ZlZWRfYnVpbHRfaW5fdmlkZW9fcGxheWVyLnZvbHVtZScpOwogICAgICBydWxlKCd3ZWliby50b29sLnVzZV9idWlsdF9pbl92aWRlb19wbGF5ZXIubWVtb3JpemUnLCAnZmVlZF9idWlsdF9pbl92aWRlb19wbGF5ZXIubWVtb3JpemUnKTsKICAgIH0KICB9CgogIGltcG9ydGVyLmFkZFBhcnNlcihmdW5jdGlvbiB5YXdmKGRhdGFBcnJheUJ1ZmZlcikgewogICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpOwogICAgY29uc3QgdGV4dCA9IGRlY29kZXIuZGVjb2RlKGRhdGFBcnJheUJ1ZmZlcik7CiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSh0ZXh0KTsKICAgIGlmICghZGF0YS52ZXIgfHwgIWRhdGEueWF3ZiB8fCAhZGF0YS5jb25mKSB0aHJvdyBUeXBlRXJyb3IoKTsKICAgIGNvbnN0IGNvbmZpZyA9IG5ldyBDb252ZXJ0ZXIoKS5jb252ZXJ0KGRhdGEuY29uZik7CiAgICByZXR1cm4geyBjb25maWcsIHNvdXJjZTogaTE4bi55YXdmU2NyaXB0U291cmNlIH07CiAgfSk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvYWJvdXQvaW1wb3J0ZXIveWJqeGJmLmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKCiAgY29uc3QgaW1wb3J0ZXIgPSB5YXdmLmltcG9ydGVyOwoKICBpMThuLnlianhiZlNjcmlwdFNvdXJjZSA9IHsKICAgIGNuOiAn55y85LiN6KeB5b+D5LiN54OmJywKICAgIHR3OiAn55y85LiN6KaL5b+D5LiN54WpJywKICB9OwoKICBjbGFzcyBDb252ZXJ0ZXIgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIC8qKiBAdHlwZSB7TWFwPHN0cmluZywgKCh2YWx1ZTogYW55KSA9PiAoeyBbdGFyZ2V0OiBzdHJpbmddOiBhbnkgfSkpW10+fSAqLwogICAgICB0aGlzLnJ1bGVzID0gbmV3IE1hcCgpOwogICAgICAvKiogQHR5cGUge01hcDxzdHJpbmcsICgoKSA9PiAoeyBbdGFyZ2V0OiBzdHJpbmddOiB0cnVlIH0pKVtdPn0gKi8KICAgICAgdGhpcy5jbGVhbnMgPSBuZXcgTWFwKCk7CiAgICAgIC8qKiBAdHlwZSB7TWFwPHN0cmluZywgKChpdGVtczogQXJyYXk8YW55PikgPT4gKHsgW3RhcmdldDogc3RyaW5nXTogQXJyYXk8YW55PiB9KSlbXT59ICovCiAgICAgIHRoaXMuY29sbGVjdGlvbnMgPSBuZXcgTWFwKCk7CiAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpOwogICAgfQogICAgY29udmVydCh3YnApIHsKICAgICAgY29uc3QgY29uZmlncyA9IHt9OwogICAgICAod2JwLmhpZGVNb2RzIHx8IFtdKS5mb3JFYWNoKG1vZCA9PiB7CiAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWdzLCAuLi4odGhpcy5jbGVhbnMuZ2V0KG1vZCkgfHwgW10pLm1hcChjbGVhbiA9PiBjbGVhbigpIHx8IHt9KSk7CiAgICAgIH0pOwogICAgICBPYmplY3Qua2V5cyh3YnApLmZvckVhY2goa2V5ID0+IHsKICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZ3MsIC4uLih0aGlzLnJ1bGVzLmdldChrZXkpIHx8IFtdKS5tYXAocnVsZSA9PiBydWxlKHdicFtrZXldKSB8fCB7fSkpOwogICAgICB9KTsKICAgICAgT2JqZWN0LmtleXMod2JwKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgaWYgKCF0aGlzLmNvbGxlY3Rpb25zLmhhcyhrZXkpKSByZXR1cm47CiAgICAgICAgKHRoaXMuY29sbGVjdGlvbnMuZ2V0KGtleSkgfHwgW10pLmZvckVhY2gobWFwcGVyID0+IHsKICAgICAgICAgIGNvbnN0IGNvbmYgPSBtYXBwZXIod2JwW2tleV0pOwogICAgICAgICAgT2JqZWN0LmtleXMoY29uZikuZm9yRWFjaChja2V5ID0+IHsKICAgICAgICAgICAgY29uZmlnc1tja2V5XSA9IChjb25maWdzW2NrZXldIHx8IFtdKS5jb25jYXQoY29uZltja2V5XSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHJldHVybiBjb25maWdzOwogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0geyhpdGVtOiBhbnkpID0+IEFycmF5PGFueT59IG1hcAogICAgICovCiAgICBjb2xsZWN0aW9uKHNvdXJjZSwgdGFyZ2V0LCBtYXApIHsKICAgICAgaWYgKCF0aGlzLmNvbGxlY3Rpb25zLmhhcyhzb3VyY2UpKSB7CiAgICAgICAgdGhpcy5jb2xsZWN0aW9ucy5zZXQoc291cmNlLCBbXSk7CiAgICAgIH0KICAgICAgdGhpcy5jb2xsZWN0aW9ucy5nZXQoc291cmNlKS5wdXNoKGl0ZW1zID0+ICh7CiAgICAgICAgW3RhcmdldF06IGl0ZW1zLm1hcChpdGVtID0+IG1hcChpdGVtKSkKICAgICAgICAgIC5yZWR1Y2UoKHJlc3VsdCwgYXBwZW5kKSA9PiByZXN1bHQuY29uY2F0KGFwcGVuZCksIFtdKSwKICAgICAgfSkpOwogICAgfQogICAgcnVsZShzb3VyY2UsIHRhcmdldCwgbWFwKSB7CiAgICAgIGlmICghdGhpcy5ydWxlcy5oYXMoc291cmNlKSkgewogICAgICAgIHRoaXMucnVsZXMuc2V0KHNvdXJjZSwgW10pOwogICAgICB9CiAgICAgIGlmICghbWFwKSB7CiAgICAgICAgdGhpcy5ydWxlcy5nZXQoc291cmNlKS5wdXNoKHZhbHVlID0+IHZhbHVlID8geyBbdGFyZ2V0XTogdHJ1ZSB9IDoge30pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucnVsZXMuZ2V0KHNvdXJjZSkucHVzaCh2YWx1ZSA9PiB7CiAgICAgICAgICBjb25zdCByZXN1bHQgPSBtYXAodmFsdWUpOwogICAgICAgICAgaWYgKHJlc3VsdCAhPT0gdm9pZCAwKSByZXR1cm4geyBbdGFyZ2V0XTogcmVzdWx0IH07CiAgICAgICAgICByZXR1cm4ge307CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIGNsZWFuKHNvdXJjZSwgdGFyZ2V0KSB7CiAgICAgIGlmICghdGhpcy5jbGVhbnMuaGFzKHNvdXJjZSkpIHsKICAgICAgICB0aGlzLmNsZWFucy5zZXQoc291cmNlLCBbXSk7CiAgICAgIH0KICAgICAgdGhpcy5jbGVhbnMuZ2V0KHNvdXJjZSkucHVzaCgoKSA9PiAoeyBbdGFyZ2V0XTogdHJ1ZSB9KSk7CiAgICB9CiAgICBpbml0aWFsaXplKCkgewogICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5jb2xsZWN0aW9uLmJpbmQodGhpcyk7CiAgICAgIGNvbnN0IGNsZWFuID0gdGhpcy5jbGVhbi5iaW5kKHRoaXMpOwogICAgICBjb25zdCBydWxlID0gdGhpcy5ydWxlLmJpbmQodGhpcyk7CgogICAgICBjb25zdCBrZXl3b3JkTWFwcGVyID0ga2V5d29yZCA9PiAvXlwvLitcLyR8XCsvLnRlc3Qoa2V5d29yZCkgPyBbXSA6IFtrZXl3b3JkXTsKICAgICAgY29uc3QgcmVnZXhNYXBwZXIgPSBrZXl3b3JkID0+IHsKICAgICAgICBpZiAoL15cLy4rXC8kLy50ZXN0KGtleXdvcmQpKSB0cnkgewogICAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGtleXdvcmQuc2xpY2UoMSwgLTEpLCAnbXUnKTsKICAgICAgICAgIHJldHVybiBbeyBzb3VyY2U6IHJlZ2V4LnNvdXJjZSwgZmxhZ3M6IHJlZ2V4LmZsYWdzIH1dOwogICAgICAgIH0gY2F0Y2ggKGUpIHsgLyogaWdub3JlICovIH0gZWxzZSBpZiAoL1wrLy50ZXN0KGtleXdvcmQpKSB7CiAgICAgICAgICBjb25zdCB3b3JkcyA9IGtleXdvcmQuc3BsaXQoJysnKTsKICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gUmVnRXhwKCdeJyArIHdvcmRzLm1hcChwID0+IGAoPz1bXFxzXFxTXSoke3AucmVwbGFjZSgvKFsuKis/XiR7fSgpfFtcXS9cXF0pL2csICdcXCQxJyl9KWApLmpvaW4oJycpLCAnbXUnKTsKICAgICAgICAgIHJldHVybiBbeyBzb3VyY2U6IHJlZ2V4LnNvdXJjZSwgZmxhZ3M6IHJlZ2V4LmZsYWdzIH1dOwogICAgICAgIH0KICAgICAgICByZXR1cm4gW107CiAgICAgIH07CiAgICAgIGNvbnN0IHVzZXJJZE1hcHBlciA9IHVzZXJJZCA9PiBbeyBpZDogdXNlcklkIH1dOwogICAgICBjb25zdCB0ZXh0TWFwcGVyID0gdGV4dCA9PiBbdGV4dF07CgogICAgICBjb2xsZWN0aW9uKCd3aGl0ZUtleXdvcmRzJywgJ2ZpbHRlcl9jb250ZW50X3RleHRfc2hvdy5pdGVtcycsIGtleXdvcmRNYXBwZXIpOwogICAgICBjb2xsZWN0aW9uKCdibGFja0tleXdvcmRzJywgJ2ZpbHRlcl9jb250ZW50X3RleHRfaGlkZS5pdGVtcycsIGtleXdvcmRNYXBwZXIpOwogICAgICBjb2xsZWN0aW9uKCdncmF5S2V5d29yZHMnLCAnZmlsdGVyX2NvbnRlbnRfdGV4dF9mb2xkLml0ZW1zJywga2V5d29yZE1hcHBlcik7CiAgICAgIGNvbGxlY3Rpb24oJ3doaXRlS2V5d29yZHMnLCAnZmlsdGVyX2NvbnRlbnRfcmVnZXhfc2hvdy5pdGVtcycsIHJlZ2V4TWFwcGVyKTsKICAgICAgY29sbGVjdGlvbignYmxhY2tLZXl3b3JkcycsICdmaWx0ZXJfY29udGVudF9yZWdleF9oaWRlLml0ZW1zJywgcmVnZXhNYXBwZXIpOwogICAgICBjb2xsZWN0aW9uKCdncmF5S2V5d29yZHMnLCAnZmlsdGVyX2NvbnRlbnRfcmVnZXhfZm9sZC5pdGVtcycsIHJlZ2V4TWFwcGVyKTsKICAgICAgY29sbGVjdGlvbigndXNlckJsYWNrbGlzdCcsICdmaWx0ZXJfYXV0aG9yX2lkX2hpZGUuaXRlbXMnLCB1c2VySWRNYXBwZXIpOwogICAgICBjb2xsZWN0aW9uKCd1c2VyQmxhY2tsaXN0JywgJ2ZpbHRlcl9vcmlnaW5hbF9pZF9oaWRlLml0ZW1zJywgdXNlcklkTWFwcGVyKTsKICAgICAgY29sbGVjdGlvbignc291cmNlS2V5d29yZHMnLCAnZmlsdGVyX3NvdXJjZV90ZXh0X2hpZGUuaXRlbXMnLCB0ZXh0TWFwcGVyKTsKICAgICAgY29sbGVjdGlvbignc291cmNlR3JheUtleXdvcmRzJywgJ2ZpbHRlcl9zb3VyY2VfdGV4dF9mb2xkLml0ZW1zJywgdGV4dE1hcHBlcik7CiAgICAgIGNvbGxlY3Rpb24oJ1VSTEtleXdvcmRzJywgJ2ZpbHRlcl9jb21tZW50X25hbWVfc2hvdy5pdGVtcycsIHRleHRNYXBwZXIpOwoKICAgICAgcnVsZSgnZmlsdGVyT3RoZXJzT25seScsICdmaWx0ZXJfbXlfZmVlZCcpOwogICAgICBydWxlKCdmaWx0ZXJPdGhlcnNPbmx5JywgJ2ZpbHRlcl9teV9vcmlnaW5hbCcpOwogICAgICBydWxlKCdmaWx0ZXJQcm9tb3Rpb25zJywgJ2ZpbHRlcl9hZF9mZWVkJyk7CiAgICAgIHJ1bGUoJ2ZpbHRlckhvdCcsICdmaWx0ZXJfZmFuc190b3AnKTsKICAgICAgcnVsZSgnZmlsdGVyVGFvYmFvJywgJ2ZpbHRlcl90Yl90bV9mZWVkJyk7CiAgICAgIHJ1bGUoJ2ZpbHRlckRlbGV0ZWQnLCAnZmlsdGVyX2RlbGV0ZWRfZm9yd2FyZCcpOwogICAgICBydWxlKCdmaWx0ZXJGbG9vZCcsICd3ZWliby5vdGhlci5zYW1lX2FjY291bnQnKTsKICAgICAgcnVsZSgnbWF4Rmxvb2QnLCAnd2VpYm8ub3RoZXIuc2FtZV9hY2NvdW50Lm51bWJlcicsIE51bWJlcik7CiAgICAgIHJ1bGUoJ3Nob3dBbGxNc2dOYXYnLCAnbGF5b3V0X2xlZnRfbWVzc2FnZXMnKTsKICAgICAgcnVsZSgnc2hvd0FsbEdyb3VwcycsICdsYXlvdXRfc2lkZV9zaG93X2FsbF9ncm91cHMnKTsKICAgICAgcnVsZSgnbm9Ib21lTWFyZ2lucycsICdsYXlvdXRfc2lkZV9tZXJnZScpOwogICAgICBydWxlKCdzaG93QWxsVGV4dCcsICdmZWVkX2xvbmdfZXhwYW5kJyk7CiAgICAgIHJ1bGUoJ3Nob3dBbGxBcnRpY2xlVGV4dCcsICdzaG93X2FydGljbGVfd2l0aG91dF9mb2xsb3cnKTsKICAgICAgcnVsZSgnZGlyZWN0QWxsRmVlZHMnLCAnZmlsdGVyX3Byb2ZpbGVfc2hvd19hbGwnKTsKICAgICAgcnVsZSgnZGlyZWN0QmlnSW1nJywgJ2ZlZWRfdmlld19vcmlnaW5hbCcpOwogICAgICBydWxlKCdzcXVhcmVBdmF0YXInLCAnbGF5b3V0X2F2YXRhcl9zaGFwZScpOwogICAgICBydWxlKCdza2luSUQnLCAnbGF5b3V0X3RoZW1lX2FwcGx5LnNraW4nLCB2YWx1ZSA9PiB2YWx1ZSk7CiAgICAgIHJ1bGUoJ292ZXJyaWRlTXlTa2luJywgJ2xheW91dF90aGVtZV9hcHBseScpOwogICAgICBydWxlKCd1bndyYXBUZXh0JywgJ2ZlZWRfYXV0aG9yX2NvbnRlbnRfbm93cmFwJyk7CiAgICAgIHJ1bGUoJ3NtYWxsSW1nTGF5b3V0JywgJ2ZlZWRfc21hbGxfaW1hZ2UnKTsKICAgICAgcnVsZSgnY29tcGFjdEZlZWRUb29sYmFyJywgJ2ZlZWRfbm9fc3BhY2UnKTsKICAgICAgcnVsZSgnbm9Ib21lTWFyZ2lucycsICdmZWVkX25vX3NwYWNlJyk7CiAgICAgIHJ1bGUoJ21vdmVTcmNUb0J0bScsICdmZWVkX3NvdXJjZV9hdF9ib3R0b20nKTsKICAgICAgcnVsZSgndW53cmFwVGV4dCcsICdmZWVkX2F1dGhvcl9jb250ZW50X25vd3JhcCcpOwogICAgICBydWxlKCdjdXN0b21TdHlsZXMnLCAnY3VzdG9tX2NzcycpOwoKICAgICAgY2xlYW4oJ1RpbWVsaW5lTW9kcycsICdmaWx0ZXJfZmFrZV93ZWlibycpOwogICAgICBjbGVhbignTGV2ZWwnLCAnY2xlYW5faWNvbnNfbGV2ZWwnKTsKICAgICAgY2xlYW4oJ01lbWJlckljb24nLCAnY2xlYW5faWNvbnNfbWVtYmVyJyk7CiAgICAgIGNsZWFuKCdWZXJpZnlJY29uJywgJ2NsZWFuX2ljb25zX2FwcHJvdmUnKTsKICAgICAgY2xlYW4oJ1ZlcmlmeUljb24nLCAnY2xlYW5faWNvbnNfYXBwcm92ZV9jbycpOwogICAgICBjbGVhbignVmVyaWZ5SWNvbicsICdjbGVhbl9pY29uc19hcHByb3ZlX2RlYWQnKTsKICAgICAgY2xlYW4oJ0RhcmVuSWNvbicsICdjbGVhbl9pY29uc19jbHViJyk7CiAgICAgIGNsZWFuKCdWZ2lybEljb24nLCAnY2xlYW5faWNvbnNfdl9naXJsJyk7CiAgICAgIGNsZWFuKCdUYW9iYW9JY29uJywgJ2NsZWFuX2ljb25zX3Rhb2JhbycpOwogICAgICBjbGVhbignR29uZ3lpSWNvbicsICdjbGVhbl9pY29uc19nb25neWknKTsKICAgICAgY2xlYW4oJ1BhaUljb24nLCAnY2xlYW5faWNvbnNfb3RoZXJzJyk7CiAgICAgIGNsZWFuKCdIb3RTZWFyY2gnLCAnY2xlYW5fbmF2X2hvdF9zZWFyY2gnKTsKICAgICAgY2xlYW4oJ0hvdFdlaWJvJywgJ2NsZWFuX2xlZnRfaG90Jyk7CiAgICAgIGNsZWFuKCdGcmllbmRzJywgJ2NsZWFuX2xlZnRfZnJpZW5kcycpOwogICAgICBjbGVhbignVG9NZScsICdjbGVhbl9sZWZ0X2dyb3VwX3RvX21lJyk7CiAgICAgIGNsZWFuKCdSZWNvbW1lbmRlZFRvcGljJywgJ2NsZWFuX21pZGRsZV9yZWNvbW1lbmRlZF90b3BpYycpOwogICAgICBjbGVhbignUmVjb21GZWVkJywgJ2NsZWFuX21pZGRsZV9mZWVkX3JlY29tbWVuZCcpOwogICAgICBjbGVhbignTWVtYmVyVGlwJywgJ2NsZWFuX21pZGRsZV9tZW1iZXJfdGlwJyk7CiAgICAgIGNsZWFuKCdNdXNpY1JlY29tJywgJ2NsZWFuX3JpZ2h0X3JhbmtzJyk7CiAgICAgIGNsZWFuKCdUb3BpYycsICdjbGVhbl9yaWdodF9ob3RfdG9waWMnKTsKICAgICAgY2xlYW4oJ01lbWJlcicsICdjbGVhbl9yaWdodF9tZW1iZXInKTsKICAgICAgY2xlYW4oJ0hvbmdiYW8nLCAnY2xlYW5fcmlnaHRfaG9uZ2Jhb19yYW5rJyk7CiAgICAgIGNsZWFuKCdNb3ZpZVJlY29tJywgJ2NsZWFuX3JpZ2h0X21lbWJlcicpOwogICAgICBjbGVhbignQXR0RmVlZCcsICdjbGVhbl9yaWdodF9hdHRfZmVlZCcpOwogICAgICBjbGVhbignTm90aWNlJywgJ2NsZWFuX3JpZ2h0X25vdGljZScpOwogICAgICBjbGVhbignUmVjb21GZWVkJywgJ2NsZWFuX2ZlZWRfcmVjb21tZW5kJyk7CiAgICAgIGNsZWFuKCdDb21tZW50VGlwJywgJ2NsZWFuX2ZlZWRfZmVlZF90aXAnKTsKICAgICAgY2xlYW4oJ01lbWJlckNvdmVyJywgJ2NsZWFuX2ZlZWRfdmlwX2JhY2tncm91bmQnKTsKICAgICAgY2xlYW4oJ1RvcGljQ2FyZCcsICdjbGVhbl9mZWVkX2NhcmQnKTsKICAgICAgY2xlYW4oJ0xvY2F0aW9uQ2FyZCcsICdjbGVhbl9mZWVkX2NhcmQnKTsKICAgICAgY2xlYW4oJ1Byb2ZDb3ZlcicsICdjbGVhbl9wcm9maWxlX2NvdmVyJyk7CiAgICAgIGNsZWFuKCdQcm9mU3RhdHMnLCAnY2xlYW5fcHJvZmlsZV9zdGF0cycpOwogICAgICBjbGVhbignUmVsYXRpb24nLCAnY2xlYW5fcHJvZmlsZV9yZWxhdGlvbicpOwogICAgICBjbGVhbignQWxidW0nLCAnY2xlYW5fcHJvZmlsZV9hbGJ1bScpOwogICAgICBjbGVhbignQWRzJywgJ2NsZWFuX290aGVyX2FkcycpOwogICAgICBjbGVhbignTXVzaWNQbGF5ZXInLCAnY2xlYW5fb3RoZXJfbXVzaWMnKTsKICAgICAgY2xlYW4oJ0Zvb3RlcicsICdjbGVhbl9vdGhlcl9mb290ZXInKTsKICAgICAgY2xlYW4oJ0ZlZWRSZWNvbScsICdjbGVhbl9vdGhlcl9yZWxhdGVkX2ZlZWRzJyk7CiAgICAgIGNsZWFuKCdGZWVkUmVjb20nLCAnY2xlYW5fb3RoZXJfcmVsYXRlZF92aWRlbycpOwogICAgICBjbGVhbignSU1OZXdzJywgJ2NsZWFuX290aGVyX2ltX25ld3MnKTsKICAgIH0KICB9CgogIGNvbnN0IGNvbnZlcnREYXRhID0gZGF0YSA9PiB7CiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YS5oaWRlTW9kcykpIHRocm93IFR5cGVFcnJvcigpOwogICAgY29uc3QgY29uZmlnID0gbmV3IENvbnZlcnRlcigpLmNvbnZlcnQoZGF0YSk7CiAgICByZXR1cm4geyBjb25maWcsIHNvdXJjZTogaTE4bi55Ymp4YmZTY3JpcHRTb3VyY2UgfTsKICB9OwoKICBpbXBvcnRlci5hZGRQYXJzZXIoZnVuY3Rpb24geWJqeGJmKGRhdGFBcnJheUJ1ZmZlcikgewogICAgbGV0IHRleHQgPSBudWxsOwogICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpOwogICAgdGV4dCA9IGRlY29kZXIuZGVjb2RlKGRhdGFBcnJheUJ1ZmZlcik7CiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSh0ZXh0KTsKICAgIHJldHVybiBjb252ZXJ0RGF0YShkYXRhKTsKICB9KTsKCiAgaW1wb3J0ZXIueWJqeGJmQ29udmVydCA9IGRhdGEgPT4gewogICAgcmV0dXJuIGNvbnZlcnREYXRhKGRhdGEpOwogIH07Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvYWJvdXQvZXhwb3J0LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgYnJvd3NlciA9IHdpbmRvdy53ZUJyb3dzZXI7CiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKICBjb25zdCBkb3dubG9hZCA9IHlhd2YuZG93bmxvYWQ7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKICBjb25zdCBpbXBvcnRlciA9IHlhd2YuaW1wb3J0ZXI7CgogIGNvbnN0IHVpID0gdXRpbC51aTsKICBjb25zdCBjc3MgPSB1dGlsLmNzczsKCiAgY29uc3QgYWJvdXQgPSB5YXdmLnJ1bGVzLmFib3V0OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwogIGkxOG4uYmFja3VwR3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn5a+85YWlIC8g5a+85Ye6JywKICAgIHR3OiAn5Yyv5YWlIC8g5Yyv5Ye6JywKICAgIGVuOiAnSW1wb3J0IC8gRXhwb3J0JywKICB9OwoKICBjb25zdCBiYWNrdXAgPSBhYm91dC5iYWNrdXAgPSB7fTsKICBiYWNrdXAuYmFja3VwID0gcnVsZS5Hcm91cCh7CiAgICBwYXJlbnQ6IGFib3V0LmFib3V0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uYmFja3VwR3JvdXBUaXRsZSwKICB9KTsKCiAgaTE4bi5iYWNrdXBUZXh0ID0gewogICAgY246ICflpIfku73lkozmgaLlpI3orr7nva7vvIjmmoLkuI3mlK/mjIHlr7zlhaXohJrmnKzniYjorr7nva7vvIl8fHt7YnV0dG9uc319JywKICAgIHR3OiAn5YKZ5Lu95ZKM5oGi5b6p6Kit5a6a77yI5pqr5LiN5pSv5oyB5Yyv5YWl6IWz5pys54mI6Kit5a6a77yJfHx7e2J1dHRvbnN9fScsCiAgICBlbjogJ0JhY2t1cCBhbmQgUmVjb3ZlcnkgKENhbm5vdCBsb2FkIHNldHRpbmdzIGZyb20gc2NyaXB0IHZlcnNpb24pfHx7e2J1dHRvbnN9fScsCiAgfTsKCiAgT2JqZWN0LmFzc2lnbihpMThuLCB7CiAgICBjb25maWdJbXBvcnRCdXR0b246IHsgY246ICflr7zlhaUnLCB0dzogJ+WMr+WFpScsIGVuOiAnSW1wb3J0JyB9LAogICAgY29uZmlnSW1wb3J0V2FybmluZ1RpdGxlOiB7IGNuOiAn6K6+572u5a+85YWlJywgdHc6ICfoqK3lrprljK/lhaUnLCBlbjogJ1NldHRpbmcgSW1wb3J0JyB9LAogICAgY29uZmlnSW1wb3J0V2FybmluZzogewogICAgICBjbjogJ+WvvOWFpeeahOiuvue9ruS8muimhuebluaCqOW9k+WJjeW3suacieeahOiuvue9ru+8jOehruWunuimgeWvvOWFpeiuvue9ruWQl++8nycsCiAgICAgIHR3OiAn5Yyv5YWl55qE6Kit5a6a5pyD6KaG6JOL5oKo55W25YmN5bey5pyJ55qE6Kit5a6a77yM5oKo56K65a6a6KaB5Yyv5YWl6Kit5a6a5ZeO77yfJywKICAgICAgZW46ICdUaGUgaW1wb3J0ZWQgc2V0dGluZ3MgbWF5IHJlcGxhY2UgeW91ciBjdXJyZW50IHNldHRpbmdzLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gaW1wb3J0IHRoaXMgZmlsZT8nLAogICAgfSwKICAgIGNvbmZpZ0ltcG9ydFdhcm5pbmdFeHRlcm5hbDogewogICAgICBjbjogJ+aCqOato+WcqOWvvOWFpeadpeiHquKAnHt94oCd55qE6K6+572u77yM5a+85YWl5bel5YW35Lya5bC96YeP5bCG5oKo55qE6K6+572u6L2s5o2i5Li65pys5omp5bGV5pSv5oyB55qE5Yqf6IO977yM5L2G5a6e6ZmF5pWI5p6c5LuN5Lya5pyJ5omA5LiN5ZCM44CC5a+85YWl5ZCO5bu66K6u5oKo5omT5byA5omp5bGV55qE6K6+572u5aSN5p+l5ZCE6aG56K6+572u44CC5a+85YWl55qE6K6+572u5Lya6KaG55uW5oKo5b2T5YmN5bey5pyJ55qE6K6+572u77yM56Gu5a6e6KaB5a+85YWl6K6+572u5ZCX77yfJywKICAgICAgdHc6ICfmgqjmraPoqablnJbljK/lhaXkvoboh6rmlrzjgIx7feOAjeeahOioreWumu+8jOWMr+WFpeW3peWFt+acg+eboeWPr+iDveWwh+aCqOeahOioreWumui9ieaPm+eCuuacrOaTtOWFheWll+S7tuaUr+aPtOeahOWKn+iDve+8jOS9huWvpumam+aViOaenOS7jeacg+acieaJgOS4jeWQjOOAguWft+ihjOWMr+WFpeW+jO+8jOW7uuitsOaCqOaJk+mWi+ioreWumuaWueWhiuaJi+W3peikh+afpeOAguWMr+WFpeeahOioreWumuacg+imhuiTi+aCqOeVtuWJjeW3suacieeahOioreWumu+8jOaCqOeiuuWumuimgeWMr+WFpeioreWumuWXju+8nycsCiAgICAgIGVuOiAnWW91IGFyZSB0cnlpbmcgdG8gaW1wb3J0IHNldHRpbmdzIGZyb20gInt9Ii4gSW1wb3J0aW5nIHRvb2wgd2lsbCB0cnkgaXRzIGJlc3QgdG8gY29udmVydCB5b3VyIHNldHRpbmdzIHRvIHdoYXQgdGhpcyBleHRlbnNpb24gc3VwcG9ydGVkLiBBbmQgZHVlIHRvIHRoZSBsaW1pdGF0aW9uLCBzb21lIGZlYXR1cmVzIG1heSBub3Qgd29yayBhcyB5b3VyIGV4cGVjdC4gUmVtZW1iZXIgdG8gcmVjaGVjayB0aGUgc2V0dGluZ3MgYWZ0ZXIgaW1wb3J0aW5nLiBUaGUgaW1wb3J0ZWQgc2V0dGluZ3MgbWF5IHJlcGxhY2UgeW91ciBjdXJyZW50IHNldHRpbmdzLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gaW1wb3J0IHRoaXMgZmlsZT8nLAogICAgfSwKICAgIGNvbmZpZ0ltcG9ydFN1Y2Nlc3NUaXRsZTogeyBjbjogJ+iuvue9ruWvvOWFpeWujOaIkCcsIHR3OiAn6Kit5a6a5Yyv5YWl5a6M5oiQJywgZW46ICdJbXBvcnQgc2V0dGluZ3MgY29tcGxldGVkJyB9LAogICAgY29uZmlnSW1wb3J0U3VjY2VzczogeyBjbjogJ+W3sue7j+aIkOWKn+WcsOWvvOWFpeS6huiuvue9ricsIHR3OiAn5bey57uP5oiQ5Yqf5Zyw5Yyv5YWl5LqG6Kit5a6aJywgZW46ICdTdWNjZXNzZnVsbHkgaW1wb3J0ZWQgc2V0dGluZ3MnIH0sCiAgICBjb25maWdJbXBvcnRGYWlsVGl0bGU6IHsgY246ICforr7nva7lr7zlhaXlpLHotKUnLCB0dzogJ+ioreWumuWMr+WFpeWksei0pScsIGVuOiAnSW1wb3J0IHNldHRpbmdzIGZhaWxlZCcgfSwKICAgIGNvbmZpZ0ltcG9ydEZhaWw6IHsKICAgICAgY246ICflr7zlhaXorr7nva7mlofku7bml7blh7rnjrDplJnor6/vvIzlj6/og73mmK/kvb/nlKjkuobplJnor6/nmoTmlofku7bvvIzmlofku7blt7LmjZ/lnY/miJbmlofku7bnmoTniYjmnKzkuI3mlK/mjIEnLAogICAgICB0dzogJ+WMr+WFpeioreWumuaqlOahiOaZguWHuuePvumMr+iqpO+8jOWPr+iDveaYr+S9v+eUqOS6humMr+iqpOeahOaqlOahiO+8jOaqlOahiOW3suaQjeWjnuaIlueCuuS4jeaUr+aPtOeahOeJiOacrCcsCiAgICAgIGVuOiAnRXJyb3Igb2NjdXJyZWQgZHVyaW5nIGltcG9ydGluZyBwcm9jZXNzLiBXcm9uZyBmaWxlIG1heSBiZSB1c2VkLCB0aGUgZmlsZSBtYXkgYmUgYnJva2VuLCBvciB0aGUgdmVyc2lvbiBvZiBzZXR0aW5nIGZpbGUgbWF5IG5vdCBiZSBzdXBwb3J0ZWQuJywKICAgIH0sCiAgICBjb25maWdFeHBvcnRCdXR0b246IHsgY246ICflr7zlh7onLCB0dzogJ+WMr+WHuicsIGVuOiAnRXhwb3J0JyB9LAogICAgY29uZmlnUmVzZXRCdXR0b246IHsgY246ICfph43nva4nLCB0dzogJ+mHjeiorScsIGVuOiAnUmVzZXQnIH0sCiAgICBjb25maWdSZXNldFdhcm5pbmdUaXRsZTogeyBjbjogJ+iuvue9rumHjee9ricsIHR3OiAn6Kit5a6a6YeN6KitJywgZW46ICdTZXR0aW5nIFJlc2V0JyB9LAogICAgY29uZmlnUmVzZXRXYXJuaW5nOiB7CiAgICAgIGNuOiAn6L+Z5bCG5Lya5riF56m65oKo5b2T5YmN55qE5omA5pyJ6YWN572u77yM5LmL5YmN5qOA5p+l5ZKM5aSH5Lu955qE5YWz5rOo5YiX6KGo44CB5omL5Yqo6ZqQ6JeP55qE5b6u5Y2a57yW5Y+3562J5LiN5Lya5Y+X5Yiw5b2x5ZON44CC56Gu5a6e6KaB6YeN572u6K6+572u5ZCX77yfJywKICAgICAgdHc6ICfpgJnlsIfmnIPmuIXnqbrmgqjnlbbliY3nmoTmiYDmnInoqK3lrprvvIzkuYvliY3mqqLmn6Xlkozlgpnku73nmoTpl5zms6jmuIXllq7jgIHmiYvli5XpmrHol4/nmoTlvq7ljZrnt6jomZ/nrYnkuI3mnIPlj5fliLDlvbHpn7/jgILmgqjnorrlrpropoHph43nva7oqK3lrprll47vvJ8nLAogICAgICBlbjogJ1lvdSBhcmUgZGVsZXRpbmcgYWxsIHlvdXIgc2V0dGluZ3MuIEZvbGxvd2luZyBsaXN0LCBmZWVkcyBoaWRkZW4gbWFudWFsbHkgd2lsbCBiZSBrZXB0IGFzIGlzLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVzZXQgeW91ciBzZXR0aW5ncz8nLAogICAgfSwKICAgIGNvbmZpZ0ZpbGVuYW1lOiB7CiAgICAgIGNuOiAn6I2v5pa56K6+572uJywKICAgICAgdHc6ICfol6XmlrnoqK3lrponLAogICAgICBlbjogJ3lhb2ZhbmctY29uZmlnJywKICAgIH0sCiAgICBjb25maWdJbXBvcnRXYnBCdXR0b246IHsKICAgICAgY246ICfku47igJznnLzkuI3op4Hlv4PkuI3ng6bigJ3lr7zlhaUnLAogICAgICB0dzogJ+W+nuOAjOecvOS4jeimi+W/g+S4jeeFqeOAjeWMr+WFpScsCiAgICAgIGVuOiAnSW1wb3J0IGZyb20gIuecvOS4jeingeW/g+S4jeeDpiInLAogICAgfSwKICB9KTsKCiAgbGV0IHdicENvbmZpZyA9IG51bGw7CgogIGJhY2t1cC5pbXBvcnRFeHBvcnQgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ3NjcmlwdF9pbXBvcnRfZXhwb3J0JywKICAgIHZlcnNpb246IDEsCiAgICBwYXJlbnQ6IGJhY2t1cC5iYWNrdXAsCiAgICByZW5kZXIoKSB7CiAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzOwogICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAneWF3Zi1jb25maWctaXRlbSB5YXdmLWNvbmZpZy1ydWxlJzsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGxhYmVsPjxpbnB1dCB0eXBlPSJmaWxlIiBzdHlsZT0iIHdpZHRoOiAxcHg7IGhlaWdodDogMXB4OyBtYXJnaW46IDAgLTFweCAwIDA7IG9wYWNpdHk6IDA7IiAvPjxzcGFuIGNsYXNzPSJXX2J0bl9iIHlhd2YtaW1wb3J0IiBzdHlsZT0iY3Vyc29yOiBwb2ludGVyIj48c3BhbiBjbGFzcz0iV19mMTQiPjwvc3Bhbj48L3NwYW4+PC9sYWJlbD48YSBjbGFzcz0iV19idG5fYiB5YXdmLWV4cG9ydCIgaHJlZj0iamF2YXNjcmlwdDo7Ij48c3BhbiBjbGFzcz0iV19mMTQiPjwvc3Bhbj48L2E+PGEgY2xhc3M9IldfYnRuX2IgeWF3Zi1yZXNldCIgaHJlZj0iamF2YXNjcmlwdDo7Ij48c3BhbiBjbGFzcz0iV19mMTQiPjwvc3Bhbj48L2E+JzsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxpbnB1dCB0eXBlPSJmaWxlIiBzdHlsZT0iIHdpZHRoOiAxcHg7IGhlaWdodDogMXB4OyBtYXJnaW46IDAgLTFweCAwIDA7IG9wYWNpdHk6IDA7IiAvPjxidXR0b24gY2xhc3M9Indvby1idXR0b24tbWFpbiB3b28tYnV0dG9uLWZsYXQgd29vLWJ1dHRvbi1wcmltYXJ5IHdvby1idXR0b24tcyB3b28tYnV0dG9uLXJvdW5kIHdvby1kaWFsb2ctYnRuIHlhd2YtaW1wb3J0Ij48c3BhbiBjbGFzcz0id29vLWJ1dHRvbi13cmFwIj48c3BhbiBjbGFzcz0id29vLWJ1dHRvbi1jb250ZW50Ij48L3NwYW4+PC9zcGFuPjwvYnV0dG9uPjxidXR0b24gY2xhc3M9Indvby1idXR0b24tbWFpbiB3b28tYnV0dG9uLWZsYXQgd29vLWJ1dHRvbi1wcmltYXJ5IHdvby1idXR0b24tcyB3b28tYnV0dG9uLXJvdW5kIHdvby1kaWFsb2ctYnRuIHlhd2YtZXhwb3J0Ij48c3BhbiBjbGFzcz0id29vLWJ1dHRvbi13cmFwIj48c3BhbiBjbGFzcz0id29vLWJ1dHRvbi1jb250ZW50Ij48L3NwYW4+PC9zcGFuPjwvYnV0dG9uPjxidXR0b24gY2xhc3M9Indvby1idXR0b24tbWFpbiB3b28tYnV0dG9uLWZsYXQgd29vLWJ1dHRvbi1wcmltYXJ5IHdvby1idXR0b24tcyB3b28tYnV0dG9uLXJvdW5kIHdvby1kaWFsb2ctYnRuIHlhd2YtcmVzZXQiPjxzcGFuIGNsYXNzPSJ3b28tYnV0dG9uLXdyYXAiPjxzcGFuIGNsYXNzPSJ3b28tYnV0dG9uLWNvbnRlbnQiPjwvc3Bhbj48L3NwYW4+PC9idXR0b24+JzsKICAgICAgfQogICAgICBjb25zdCBpbXBvcnRJbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpOwogICAgICBjb25zdCBpbXBvcnRCdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtaW1wb3J0Jyk7CiAgICAgIGNvbnN0IGV4cG9ydEJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1leHBvcnQnKTsKICAgICAgY29uc3QgcmVzZXRCdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2YtcmVzZXQnKTsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgIGltcG9ydEJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcuV19mMTQnKS50ZXh0Q29udGVudCA9IGkxOG4uY29uZmlnSW1wb3J0QnV0dG9uOwogICAgICAgIGV4cG9ydEJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcuV19mMTQnKS50ZXh0Q29udGVudCA9IGkxOG4uY29uZmlnRXhwb3J0QnV0dG9uOwogICAgICAgIHJlc2V0QnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy5XX2YxNCcpLnRleHRDb250ZW50ID0gaTE4bi5jb25maWdSZXNldEJ1dHRvbjsKICAgICAgfSBlbHNlIHsKICAgICAgICBpbXBvcnRCdXR0b24ucXVlcnlTZWxlY3RvcignLndvby1idXR0b24tY29udGVudCcpLnRleHRDb250ZW50ID0gaTE4bi5jb25maWdJbXBvcnRCdXR0b247CiAgICAgICAgZXhwb3J0QnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy53b28tYnV0dG9uLWNvbnRlbnQnKS50ZXh0Q29udGVudCA9IGkxOG4uY29uZmlnRXhwb3J0QnV0dG9uOwogICAgICAgIHJlc2V0QnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy53b28tYnV0dG9uLWNvbnRlbnQnKS50ZXh0Q29udGVudCA9IGkxOG4uY29uZmlnUmVzZXRCdXR0b247CiAgICAgIH0KICAgICAgY29uc3QgcmVhZEZpbGUgPSBhc3luYyBmdW5jdGlvbiAoZmlsZSkgewogICAgICAgIGlmIChmaWxlLnNpemUgPiAoMSA8PCAyNCkpIHRocm93IG5ldyBSYW5nZUVycm9yKCk7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gewogICAgICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpOwogICAgICAgICAgfSk7CiAgICAgICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIGNvbnN0IGltcG9ydERhdGEgPSBhc3luYyBmdW5jdGlvbiAoeyBjb25maWcsIHNvdXJjZSB9KSB7CiAgICAgICAgaWYgKCFjb25maWcpIHsKICAgICAgICAgIHVpLmFsZXJ0KHsKICAgICAgICAgICAgaWQ6ICd5YXdmLWltcG9ydC1mYWlsZWQnLAogICAgICAgICAgICBpY29uOiAnd2FybicsCiAgICAgICAgICAgIHRpdGxlOiBpMThuLmNvbmZpZ0ltcG9ydEZhaWxUaXRsZSwKICAgICAgICAgICAgdGV4dDogaTE4bi5jb25maWdJbXBvcnRGYWlsLAogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IGNvbmZpcm1BbnN3ZXIgPSBhd2FpdCB1aS5jb25maXJtKHsKICAgICAgICAgIGlkOiAneWF3Zi1pbXBvcnQtY29uZmlybScsCiAgICAgICAgICB0aXRsZTogaTE4bi5jb25maWdJbXBvcnRXYXJuaW5nVGl0bGUsCiAgICAgICAgICB0ZXh0OiBzb3VyY2UgPwogICAgICAgICAgICBpMThuLmNvbmZpZ0ltcG9ydFdhcm5pbmdFeHRlcm5hbC5yZXBsYWNlKCd7fScsICgpID0+IHNvdXJjZSkgOgogICAgICAgICAgICBpMThuLmNvbmZpZ0ltcG9ydFdhcm5pbmcsCiAgICAgICAgfSk7CiAgICAgICAgaWYgKCFjb25maXJtQW5zd2VyKSByZXR1cm47CiAgICAgICAgYXdhaXQgcnVsZS5jb25maWdQb29sLmltcG9ydENvbmZpZyhjb25maWcpOwogICAgICAgIGF3YWl0IHVpLmFsZXJ0KHsKICAgICAgICAgIGlkOiAneWF3Zi1pbXBvcnQtc3VjY2VzcycsCiAgICAgICAgICBpY29uOiAnc3VjYycsCiAgICAgICAgICB0aXRsZTogaTE4bi5jb25maWdJbXBvcnRTdWNjZXNzVGl0bGUsCiAgICAgICAgICB0ZXh0OiBpMThuLmNvbmZpZ0ltcG9ydFN1Y2Nlc3MsCiAgICAgICAgfSk7CiAgICAgICAgYWJvdXQudXBkYXRlLndoYXRzTmV3LmV4ZWN1dGUoKTsKICAgICAgfTsKICAgICAgaW1wb3J0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgZXZlbnQgPT4gewogICAgICAgIGNvbnN0IGZpbGUgPSBpbXBvcnRJbnB1dC5maWxlc1swXTsKICAgICAgICBpbXBvcnRJbnB1dC52YWx1ZSA9IG51bGw7CiAgICAgICAgbGV0IGNvbmZpZyA9IG51bGwsIHNvdXJjZSA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgcmVhZEZpbGUoZmlsZSk7CiAgICAgICAgICAoeyBjb25maWcsIHNvdXJjZSB9ID0gaW1wb3J0ZXIucGFyc2UoZmlsZUNvbnRlbnQpKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAvLyDor7vlj5bmlofku7blpLHotKXvvIzlnKjkuIvpnaLmiqXplJkKICAgICAgICB9CiAgICAgICAgaW1wb3J0RGF0YSh7IGNvbmZpZywgc291cmNlIH0pOwogICAgICB9KTsKICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNykgewogICAgICAgIGltcG9ydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHsKICAgICAgICAgIGltcG9ydElucHV0LmNsaWNrKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZXhwb3J0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gewogICAgICAgIGlmIChleHBvcnRCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCd5YXdmLWV4cG9ydC1idXN5JykpIHJldHVybjsKICAgICAgICBleHBvcnRCdXR0b24uY2xhc3NMaXN0LmFkZCgneWF3Zi1leHBvcnQtYnVzeScpOwogICAgICAgIGNvbnN0IGNvbmZpZyA9IHJ1bGUuY29uZmlnUG9vbC5leHBvcnQoKTsKICAgICAgICBjb25zdCB7IG5hbWUsIHZlcnNpb24gfSA9IGJyb3dzZXIucnVudGltZS5nZXRNYW5pZmVzdCgpOwogICAgICAgIGNvbnN0IFttYWpvciwgbWlub3IsIG1pY3JvXSA9IHZlcnNpb24uc3BsaXQoJy4nKTsKICAgICAgICAvLyDohJrmnKzniYjnlKjnmoTmmK8geWF3ZiwgY29uZiwgdmVy77yM5o2i5LiA5aWX6ZSu5YC85Y+v5Lul5Yy65YiG54mI5pys5Lul5Y+K6YG/5YWN6KKr5LiN5pSv5oyB55qE6ISa5pys54mI5a+85YWlCiAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgIHlhb2Zhbmc6IG5hbWUsCiAgICAgICAgICB2ZXJzaW9uOiB7IG1ham9yLCBtaW5vciwgbWljcm8gfSwKICAgICAgICAgIHVzZXJBZ2VudDogbmF2aWdhdG9yLnVzZXJBZ2VudCwKICAgICAgICAgIGNvbmZpZywKICAgICAgICB9OwogICAgICAgIGNvbnN0IHRleHQgPSBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKTsKICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3RleHRdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTsKICAgICAgICBjb25zdCB1c2VybmFtZSA9IHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNiA/IGluaXQucGFnZS4kQ09ORklHLm5pY2sgOiBpbml0LnBhZ2UuY29uZmlnLnVzZXIuc2NyZWVuX25hbWU7CiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGRhdGUudG9JU09TdHJpbmcoKS5yZXBsYWNlKC8tfFQuKi9nLCAnJyk7CiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBkb3dubG9hZC5maWxlbmFtZShgJHt1c2VybmFtZX0tJHtpMThuLmNvbmZpZ0ZpbGVuYW1lfS0ke2RhdGVTdHJ9Lmpzb25gKTsKICAgICAgICBjb25zdCBmaW5pc2hEb3dubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGV4cG9ydEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCd5YXdmLWV4cG9ydC1idXN5Jyk7CiAgICAgICAgfTsKICAgICAgICBkb3dubG9hZC5ibG9iKHsgYmxvYiwgZmlsZW5hbWUgfSkudGhlbihkb3dubG9hZCA9PiB7CiAgICAgICAgICBpZiAoIWRvd25sb2FkIHx8ICFkb3dubG9hZC5zaG93KSB7CiAgICAgICAgICAgIGZpbmlzaERvd25sb2FkKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICBkb3dubG9hZC5zaG93KCk7CiAgICAgICAgICAgICAgZmluaXNoRG93bmxvYWQoKTsKICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgIH0KICAgICAgICB9LCBmaW5pc2hEb3dubG9hZCk7CiAgICAgIH0pOwogICAgICByZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIGV2ZW50ID0+IHsKICAgICAgICBjb25zdCBjb25maXJtQW5zd2VyID0gYXdhaXQgdWkuY29uZmlybSh7CiAgICAgICAgICBpZDogJ3lhd2YtcmVzZXQtY29uZmlybScsCiAgICAgICAgICB0aXRsZTogaTE4bi5jb25maWdSZXNldFdhcm5pbmdUaXRsZSwKICAgICAgICAgIHRleHQ6IGkxOG4uY29uZmlnUmVzZXRXYXJuaW5nLAogICAgICAgIH0pOwogICAgICAgIGlmICghY29uZmlybUFuc3dlcikgcmV0dXJuOwogICAgICAgIGF3YWl0IHJ1bGUuY29uZmlnUG9vbC5yZXNldCgpOwogICAgICAgIGFib3V0LnVwZGF0ZS53aGF0c05ldy5leGVjdXRlKCk7CiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgIH0pOwogICAgICBpZiAod2JwQ29uZmlnKSB0cnkgewogICAgICAgIGNvbnN0IHdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICB3cmFwLmlubmVySFRNTCA9ICc8YSBjbGFzcz0iV19idG5fYiB5YXdmLWltcG9ydC13YnAiIGhyZWY9ImphdmFzY3JpcHQ6OyI+PHNwYW4gY2xhc3M9IldfZjE0Ij48L3NwYW4+PC9hPic7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHdyYXAuaW5uZXJIVE1MID0gJzxidXR0b24gY2xhc3M9Indvby1idXR0b24tbWFpbiB3b28tYnV0dG9uLWZsYXQgd29vLWJ1dHRvbi1wcmltYXJ5IHdvby1idXR0b24tcyB3b28tYnV0dG9uLXJvdW5kIHdvby1kaWFsb2ctYnRuIHlhd2YtaW1wb3J0LXdicCI+PHNwYW4gY2xhc3M9Indvby1idXR0b24td3JhcCI+PHNwYW4gY2xhc3M9Indvby1idXR0b24tY29udGVudCI+PC9zcGFuPjwvc3Bhbj48L2J1dHRvbj4nOwogICAgICAgIH0KICAgICAgICBjb25zdCBpbXBvcnRXYnBCdXR0b24gPSB3cmFwLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWltcG9ydC13YnAnKTsKICAgICAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2KSB7CiAgICAgICAgICBpbXBvcnRXYnBCdXR0b24ucXVlcnlTZWxlY3RvcignLldfZjE0JykudGV4dENvbnRlbnQgPSBpMThuLmNvbmZpZ0ltcG9ydFdicEJ1dHRvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaW1wb3J0V2JwQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy53b28tYnV0dG9uLWNvbnRlbnQnKS50ZXh0Q29udGVudCA9IGkxOG4uY29uZmlnSW1wb3J0V2JwQnV0dG9uOwogICAgICAgIH0KICAgICAgICBpbXBvcnRXYnBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7CiAgICAgICAgICBpbXBvcnREYXRhKHdicENvbmZpZyk7CiAgICAgICAgfSk7CiAgICAgICAgY29udGFpbmVyLmFwcGVuZCguLi53cmFwLmNoaWxkTm9kZXMpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLy8g5Ly85LmO5LiN6IO95a+85YWl77yM6YKj5bCx5LiN566h5LuW5LqGCiAgICAgIH0KICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgIH0sCiAgfSk7CgogIGNzcy5hcHBlbmQoYAoueWF3Zi1leHBvcnQsIC55YXdmLXJlc2V0LCAueWF3Zi1pbXBvcnQtd2JwIHsgbWFyZ2luLWxlZnQ6IDEwcHg7IH0KLnlhd2YtZXhwb3J0LWJ1c3kgeyBjdXJzb3I6IHByb2dyZXNzOyB9CmApOwoKICA7IChmdW5jdGlvbiAoKSB7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd3YnBQb3N0JywgZnVuY3Rpb24gZ2V0RGF0YShldmVudCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRldGFpbC5zbGljZShldmVudC5kZXRhaWwuaW5kZXhPZignPScpICsgMSkpOwogICAgICAgIHdicENvbmZpZyA9IGltcG9ydGVyLnlianhiZkNvbnZlcnQoZGF0YSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyDlj6/og73mmK/mlbDmja7mjZ/lnY/vvIzmgLvkuYvkuI3nrqHku5YKICAgICAgfQogICAgfSk7CiAgfSgpKTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gY3VzdG9tIGltcGxlbWVudGF0aW9uIGNsZWFuIG9sZAo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CgogIGNvbnN0IHVpID0gdXRpbC51aTsKCiAgY29uc3QgYWJvdXQgPSB5YXdmLnJ1bGVzLmFib3V0OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBjb25zdCBiYWNrdXAgPSBhYm91dC5iYWNrdXA7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgY29uZmlnQ2xlYW5WM0J1dHRvbjogewogICAgICBjbjogJ+a4heeQhuaXp+eJiOaVsOaNricsCiAgICAgIHR3OiAn5riF55CG6IiK54mI6LOH5paZJywKICAgICAgZW46ICdPbGQgdmVyc2lvbiBkYXRhIGNsZWFuIHVwJywKICAgIH0sCiAgICBjb25maWdDbGVhblYzVGl0bGU6IHsKICAgICAgY246ICfmuIXnkIbml6fniYjmlbDmja4nLAogICAgICB0dzogJ+a4heeQhuiIiueJiOizh+aWmScsCiAgICAgIGVuOiAnT2xkIHZlcnNpb24gZGF0YSBjbGVhbiB1cCcsCiAgICB9LAogICAgY29uZmlnQ2xlYW5WM1RleHQ6IHsKICAgICAgY246ICfmgqjlsIbopoHliKDpmaTmiYDmnInml6fniYjmlbDmja7vvIzor6Xmk43kvZzml6Dms5XmkqTmtojjgILnoa7lrpropoHliKDpmaTlkJfvvJ8nLAogICAgICB0dzogJ+aCqOWwh+imgeWIqumZpOaJgOacieiIiueJiOizh+aWme+8jOipsuWLleS9nOeEoeazleW+qeWOn+OAguaCqOeiuuWumuimgeWIqumZpOWXju+8nycsCiAgICAgIGVuOiAnWW91IGFyZSBnb2luZyB0byBkZWxldGUgYWxsIG9sZCBkYXRhLiBUaGlzIGFjdGlvbiBjYW5ub3QgYmUgdW5kby4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZT8nLAogICAgfSwKICB9KTsKCiAgOyAoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgY29uc3Qga2V5cyA9IChhd2FpdCBHTS5saXN0VmFsdWVzKCkpLmZpbHRlcihrZXkgPT4gIS9zeW5jOjp8bG9jYWw6Oi8udGVzdChrZXkpKTsKICAgIGlmICgha2V5cy5sZW5ndGgpIHJldHVybjsKICAgIGJhY2t1cC5jbGVhblYzID0gcnVsZS5SdWxlKHsKICAgICAgaWQ6ICdzY3JpcHRfY2xlYW5fdjMnLAogICAgICB2ZXJzaW9uOiAxLAogICAgICBwYXJlbnQ6IGJhY2t1cC5iYWNrdXAsCiAgICAgIHJlbmRlcigpIHsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICd5YXdmLWNvbmZpZy1pdGVtIHlhd2YtY29uZmlnLXJ1bGUnOwogICAgICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYpIHsKICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGEgY2xhc3M9IldfYnRuX2IgeWF3Zi1jbGVhbi12MyIgaHJlZj0iamF2YXNjcmlwdDo7Ij48c3BhbiBjbGFzcz0iV19mMTQiPjwvc3Bhbj48L2E+JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8YnV0dG9uIGNsYXNzPSJ3b28tYnV0dG9uLW1haW4gd29vLWJ1dHRvbi1mbGF0IHdvby1idXR0b24tcHJpbWFyeSB3b28tYnV0dG9uLXMgd29vLWJ1dHRvbi1yb3VuZCB3b28tZGlhbG9nLWJ0biB5YXdmLWNsZWFuLXYzIj48c3BhbiBjbGFzcz0id29vLWJ1dHRvbi13cmFwIj48c3BhbiBjbGFzcz0id29vLWJ1dHRvbi1jb250ZW50Ij48L3NwYW4+PC9zcGFuPjwvYnV0dG9uPic7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGNsZWFuQnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWNsZWFuLXYzJyk7CiAgICAgICAgaWYgKHlhd2YuV0VJQk9fVkVSU0lPTiA9PT0gNikgewogICAgICAgICAgY2xlYW5CdXR0b24ucXVlcnlTZWxlY3RvcignLldfZjE0JykudGV4dENvbnRlbnQgPSBpMThuLmNvbmZpZ0NsZWFuVjNCdXR0b247CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNsZWFuQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy53b28tYnV0dG9uLWNvbnRlbnQnKS50ZXh0Q29udGVudCA9IGkxOG4uY29uZmlnQ2xlYW5WM0J1dHRvbjsKICAgICAgICB9CiAgICAgICAgY2xlYW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zdCBhbnN3ZXIgPSBhd2FpdCB1aS5jb25maXJtKHsKICAgICAgICAgICAgaWQ6ICd5YXdmLWNsZWFuLXYzJywKICAgICAgICAgICAgaWNvbjogJ2FzaycsCiAgICAgICAgICAgIHRpdGxlOiBpMThuLmNvbmZpZ0NsZWFuVjNUaXRsZSwKICAgICAgICAgICAgdGV4dDogaTE4bi5jb25maWdDbGVhblYzVGV4dCwKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKCFhbnN3ZXIpIHJldHVybjsKICAgICAgICAgIGtleXMuZm9yRWFjaChrZXkgPT4geyBHTS5kZWxldGVWYWx1ZShrZXkpOyB9KTsKICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBjb250YWluZXI7CiAgICAgIH0sCiAgICB9KTsKICB9KCkpOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiByZXBsYWNlbWVudCBvZiB5YW9mYW5nOi8vY29udGVudC9ydWxlL2Fib3V0L3doYXRzbmV3LmpzCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgYnJvd3NlciA9IHdpbmRvdy53ZUJyb3dzZXI7CiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IGNvbmZpZyA9IHlhd2YuY29uZmlnOwogIGNvbnN0IGltcG9ydGVyID0geWF3Zi5pbXBvcnRlcjsKCiAgY29uc3QgdWkgPSB1dGlsLnVpOwogIGNvbnN0IGNzcyA9IHV0aWwuY3NzOwoKICBjb25zdCBhYm91dCA9IHlhd2YucnVsZXMuYWJvdXQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgaTE4bi51cGRhdGVHcm91cFRpdGxlID0gewogICAgY246ICfmm7TmlrAnLAogICAgZW46ICdVcGRhdGUnLAogIH07CgogIGNvbnN0IHVwZGF0ZSA9IGFib3V0LnVwZGF0ZSA9IHt9OwogIHVwZGF0ZS51cGRhdGUgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogYWJvdXQuYWJvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi51cGRhdGVHcm91cFRpdGxlLAogIH0pOwoKICBPYmplY3QuYXNzaWduKGkxOG4sIHsKICAgIHNob3dXaGF0c05ldzogeyBjbjogJ+abtOaWsOWQjuaYvuekuuaWsOWKn+iDveaPkOekuicsIHR3OiAn5pu05paw5b6M6aGv56S65paw5Yqf6IO95o+Q56S6JywgZW46ICdTaG93IG5ldyBmZWF0dXJlcyBhZnRlciB1cGRhdGUnIH0sCiAgICBpbnN0YWxsU3VjY2Vzc1RpdGxlOiB7IGNuOiAn6I2v5pa5IChZQVdGKSDlronoo4XmiJDlip8nLCB0dzogJ+iXpeaWuSAoWUFXRikg5a6J6KOd5oiQ5YqfJywgZW46ICdZQVdGIEluc3RhbGxhdGlvbiBzdWNjZXNzZWQnIH0sCiAgICBpbnN0YWxsU3VjY2Vzc1RleHRWNjogewogICAgICBjbjogJ+aEn+iwouaCqOWuieijheiNr+aWuSAoWUFXRikg6ISa5pys44CC5oKo5Y+v5Lul54K55Ye75Y+z5LiK6KeS55qE5ryP5paX5Zu+5qCH5omT5byA6K6+572u44CC5q2k5aSW5oKo6L+Y5Y+v5Lul6YCJ5Lit5bm25ouW5ou95YWz6ZSu6K+N44CB5biQ5Y+344CB6K+d6aKY44CB5p2l5rqQ562J5YaF5a655Yiw572R6aG15Y+z5LiK6KeS77yM5b+r6YCf5Yib5bu66KeE5YiZ44CCJywKICAgICAgdHc6ICfmhJ/orJ3mgqjlronoo53ol6XmlrkgKFlBV0YpIOiFs+acrOOAguaCqOWPr+S7pem7nuaTiuWPs+S4iuinkueahOa8j+aWl+WcluekuuaJk+mWi+ioreWumuOAguatpOWkluaCqOmChOWPr+S7pemBuOS4reS4puaLluaLvemXnOmNteWtl+OAgeW4s+iZn+OAgeipsemhjOOAgeS+hua6kOetieWFp+WuueWIsOe2sumggeWPs+S4iuinku+8jOW/q+mAn+WJteW7uuimj+WJh+OAgicsCiAgICAgIGVuOiAnVGhhbmsgeW91IGZvciBpbnN0YWxsaW5nIFlBV0YuIFlvdSBjYW4gY2xpY2sgb24gdGhlIGZ1bm5lbCBpY29uIGF0IHRoZSB0b3AtcmlnaHQgY29ybmVyIHRvIG9wZW4gdXAgZmlsdGVyIHNldHRpbmcgbWVudS4gWW91IG1heSBhbHNvIHF1aWNrbHkgY3JlYXRlIGZpbHRlcnMgYnkgZHJhZ2dpbmcgYW5kIGRyb3BwaW5nIGtleXdvcmRzLCBhY2NvdW50cywgdG9waWNzIGFuZCBzb3VyY2VzIHRvIHRoZSB0b3AtcmlnaHQgY29ybmVyLicsCiAgICB9LAogICAgaW5zdGFsbFN1Y2Nlc3NUZXh0Vjc6IHsKICAgICAgY246ICfmhJ/osKLmgqjlronoo4Xoja/mlrkgKFlBV0YpIOaJqeWxleOAguaCqOWPr+S7peWcqOWPs+S4iuinkum9v+i9ruWbvuagh+eahOiPnOWNleS4reaJvuWIsOiNr+aWueeahOiuvue9ruOAguivt+azqOaEj++8jOeUseS6juaCqOato+WcqOS9v+eUqOW+ruWNmiBWNyDmlrDniYjvvIznu53lpKfpg6jliIblip/og73nm67liY3lsJrkuI3lj6/nlKjjgILoja/mlrkgKFlBV0YpIOaYr+esrOS4ieaWueW3peWFt++8jOS7juacquimgeaxgui/h+S7mOasvuS9v+eUqOaIluWvu+axgui/h+aNkOi1oOOAgicsCiAgICB9LAogICAgdXBkYXRlU3VjY2Vzc1RpdGxlOiB7IGNuOiAn6I2v5pa5IChZQVdGKSDmlrDlip/og73mj5DnpLonLCB0dzogJ+iXpeaWuSAoWUFXRikg5paw5Yqf6IO95o+Q56S6JywgZW46ICJZQVdGIFdoYXQncyBOZXciIH0sCiAgICB1cGRhdGVTdWNjZXNzSGVhZGVyOiB7IGNuOiAn6I2v5pa5IChZQVdGKSDmianlsZXlt7Lmm7TmlrAnLCB0dzogJ+iXpeaWuSAoWUFXRikg5pO05YWF5aWX5Lu25bey5pu05pawJywgZW46ICdZb3VyIFlBV0YgZXh0ZW5zaW9uIGhhcyBiZWVuIHVwZGF0ZWQnIH0sCiAgICB1cGRhdGVTdWNjZXNzRGV0YWlsOiB7IGNuOiAn5b2T5YmN54mI5pys5re75Yqg5oiW5pu05paw5LqG5Lul5LiLIHt7Y291bnR9fSDpobnlip/og70nLCB0dzogJ+eVtuWJjeeJiOacrOa3u+WKoOaIluabtOaWsOS6huS7peS4iyB7e2NvdW50fX0g6aCF5Yqf6IO9JywgZW46ICdUaGUgY3VycmVudCB2ZXJzaW9uIGhhcyBhZGRlZCBvciB1cGRhdGVkIHRoZSBmb2xsb3dpbmcge3tjb3VudH19IGZlYXR1cmUocyknIH0sCiAgICBpbXBvcnRWM1N1Y2Nlc3NUaXRsZTogewogICAgICBjbjogJ1lldCBBbm90aGVyIFdlaWJvIEZpbHRlciAo6I2v5pa5KSDlt7LljYfnuqfoh7PmlrDniYgnLAogICAgICB0dzogJ1lldCBBbm90aGVyIFdlaWJvIEZpbHRlciAo6Jel5pa5KSDlt7LljYfntJroh7PmlrDniYgnLAogICAgICBlbjogJ1lldCBBbm90aGVyIFdlaWJvIEZpbHRlciAoWUFXRikgVXBkYXRlZCcsCiAgICB9LAogICAgaW1wb3J0VjNTdWNjZXNzVGV4dDogewogICAgICBjbjogJ1lldCBBbm90aGVyIFdlaWJvIEZpbHRlciAo6I2v5pa5KSDlt7LljYfnuqfoh7MgNC4wIOeJiOOAguS4uuS9v+aCqOiOt+W+l+abtOWlveeahOS9v+eUqOaViOaenO+8jOi/meeJiOiEmuacrOe7j+i/h+WujOWFqOmHjeWGmeOAgueUseS6jui/meS4gOeJiOaUueWKqOi+g+Wkp++8jOWwkeaVsOWKn+iDve+8iOWmguato+WImeihqOi+vuW8j++8ieWSjOS5i+WJjeS4jeWwveebuOWQjOOAguiEmuacrOW3suS7juaXp+eJiOWvvOWFpeiuvue9ru+8jOS9huaIkeS7rOS7jeW7uuiuruaCqOaJk+W8gOiuvue9ruWkjeafpeS4gOS4i+OAguWmguaenOaCqOS9v+eUqCBGaXJlZm94IOa1j+iniOWZqO+8jOeOsOWcqOi/mOWPr+mAieaLqeiNr+aWueaJqeWxleeJiO+8jOWcqOaJqeWxlee9keerme+8iEFNT++8ieaQnOe0oiBZQVdGIOWNs+WPr+aJvuWIsOOAgicsCiAgICAgIGhrOiAnWWV0IEFub3RoZXIgV2VpYm8gRmlsdGVyICjol6XmlrkpIOW3suWNh+e0muiHsyA0LjAg54mI44CC54K65L2/5oKo542y5b6X5pu05aW955qE5L2/55So5pWI5p6c77yM6YCZ54mI6IWz5pys57aT6YGO5a6M5YWo6YeN5YGa44CC55Sx5pa86YCZ5LiA54mI5pS55YuV6LyD5aSn77yM5bCR5pW45Yqf6IO977yI5aaC5q2j5YmH6KGo6YGU5byP77yJ5ZKM5LmL5YmN5LiN55uh55u45ZCM44CC6IWz5pys5bey5b6e6IiK54mI5bCO5YWl6Kit572u77yM5L2G5oiR5YCR5LuN5bu66K2w5oKo5omT6ZaL6Kit5a6a5Lul6KSH5p+l44CC5aaC5p6c5oKo5L2/55SoICBGaXJlZm94IOeAj+imveWZqO+8jOePvuWcqOmChOWPr+mBuOaTh+iXpeaWueaTtOWxleeJiO+8jOWcqOaTtOWxlee2suerme+8iEFNT++8ieaQnOWwiyBZQVdGIOWNs+WPr+aJvuWIsOOAgicsCiAgICAgIHR3OiAnWWV0IEFub3RoZXIgV2VpYm8gRmlsdGVyICjol6XmlrkpIOW3suWNh+e0muiHsyA0LjAg54mI44CC54K65L2/5oKo542y5b6X5pu05aW955qE5L2/55So5pWI5p6c77yM6YCZ54mI6IWz5pys57aT6YGO5a6M5YWo6YeN5YGa44CC55Sx5pa86YCZ5LiA54mI5pS55YuV6LyD5aSn77yM5bCR5pW45Yqf6IO977yI5aaC5q2j6KaP6KGo56S65byP77yJ5ZKM5LmL5YmN5LiN55uh55u45ZCM44CC6IWz5pys5bey5b6e6IiK54mI5bCO5YWl6Kit572u77yM5L2G5oiR5YCR5LuN5bu66K2w5oKo5omT6ZaL6Kit5a6a5Lul6KSH5p+l44CC5aaC5p6c5oKo5L2/55SoICBGaXJlZm94IOeAj+imveWZqO+8jOePvuWcqOmChOWPr+mBuOaTh+iXpeaWueaTtOWxleeJiO+8jOWcqOaTtOWxlee2suerme+8iEFNT++8ieaQnOWwiyBZQVdGIOWNs+WPr+aJvuWIsOOAgicsCiAgICAgIGVuOiAnWWV0IEFub3RoZXIgV2VpYm8gRmlsdGVyIChZQVdGKSBUaGUgc2NyaXB0IGhhZCBiZWVuIHVwZ3JhZGVkIHRvIHZlcnNpb24gNC4wLiBGb3IgYmV0dGVyIHVzZXIgZXhwZXJpZW5jZSwgdGhlIHNjcmlwdCBpcyBjb21wbGV0ZWx5IHJld3JpdHRlbi4gU29tZSBmZWF0dXJlcyAoZS5nLiByZWdleHAgbWF0Y2hpbmcpIGlzIHNsaWdodGx5IGRpZmZlcmVudCBmcm9tIHByZXZpb3VzIHZlcnNpb24uIE1vc3Qgc2V0dGluZ3MgYXJlIGltcG9ydGVkIGZyb20gb2xkIHZlcnNpb24uIEFuZCB5b3UgYXJlIHN0aWxsIHdlbGNvbWVkIHRvIGNoZWNrIG91dCB0aGUgc2V0dGluZyBwYW5lbC4gRmlyZWZveCB1c2VycyBtYXkgdHJ5IG91ciBuZXcgZXh0ZW5zaW9uIHZlcnNpb24gYnkgc2VhcmNoaW5nIFlBV0Ygb24gQU1PLicsCiAgICB9LAogICAgd2VpYm9WZXJzaW9uVGl0bGU6IHsgY246ICflvq7ljZrmlrDniYjvvIhWN++8iScgfSwKICAgIHdlaWJvVmVyc2lvbjZUbzc6IHsgY246ICfmgqjlt7Lmm7TmjaLliLDlvq7ljZrmlrDniYjvvIhWN++8ie+8jOaCqOWPr+S7peWcqOWPs+S4iuinkum9v+i9ruWbvuagh+eahOiPnOWNleS4reaJvuWIsOiNr+aWue+8iFlBV0bvvInnmoTorr7nva7jgILov5jor7fms6jmhI/oja/mlrnvvIhZQVdG77yJ55uu5YmN5aSn6YOo5YiG5Yqf6IO95peg5rOV5pSv5oyB5paw54mI44CC5q2k5aSW5aaC5p6c5oKo5biM5pyb6I2v5pa577yIWUFXRu+8ieiDveWwveW/q+abtOaWsOaUr+aMgeaWsOeJiO+8jOasoui/juWIsOmhueebruS4u+mhtei0oeeMruS7o+eggeOAgicgfSwKICAgIHdlaWJvVmVyc2lvbjdUbzY6IHsgY246ICfmgqjlt7LpgIDlm57liLDlvq7ljZrml6fniYjvvIhWNu+8ieOAguWmguaenOaCqOWvueiNr+aWue+8iFlBV0bvvInmnInku7vkvZXpl67popjvvIzmgqjlj6/ku6XogZTns7sgQFlBV0bohJrmnKwg77yM5q2k5aSW5qyi6L+O5Yiw6aG555uu5Li76aG16LSh54yu5Luj56CB44CCJyB9LAogIH0pOwoKICB1cGRhdGUud2hhdHNOZXcgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ3NjcmlwdF91cGRhdGVfd2hhdHNuZXcnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogdXBkYXRlLnVwZGF0ZSwKICAgIGluaXRpYWw6IHRydWUsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5zaG93V2hhdHNOZXcsCiAgICByZWY6IHsKICAgICAgbGFzdDogeyB0eXBlOiAnbnVtYmVyJywgaW5pdGlhbDogMCB9LAogICAgICBsYXN0V2VpYm86IHsgdHlwZTogJ251bWJlcicsIGluaXRpYWw6IDAgfSwKICAgIH0sCiAgICBhc3luYyBpbml0KCkgewogICAgICAvLyDov5nkuKrlip/og73pnIDopoHmmL7npLrlr7nor53moYYKICAgICAgLy8g5a+56K+d5qGG6ZyA6KaB6aG16Z2i5Yqg6L295a6M5oiQ5omN6IO95pi+56S6CiAgICAgIGlmICghWydjb21wbGV0ZScsICdsb2FkZWQnLCAnaW50ZXJhY3RpdmUnXS5pbmNsdWRlcyhkb2N1bWVudC5yZWFkeVN0YXRlKSkgewogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHJlc29sdmUpKTsKICAgICAgfQogICAgICBjb25zdCB3aGF0c05ldyA9IHRoaXM7CiAgICAgIGNvbnN0IGN1cnJlbnRWZXJzaW9uID0gTnVtYmVyKGJyb3dzZXIucnVudGltZS5nZXRNYW5pZmVzdCgpLnZlcnNpb24ubWF0Y2goL1xkKyQvZykpOwogICAgICBjb25zdCBsYXN0VmVyc2lvbiA9IHRoaXMucmVmLmxhc3QuZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IGxhc3RXZWlib1ZlcnNpb24gPSB0aGlzLnJlZi5sYXN0V2VpYm8uZ2V0Q29uZmlnKCk7CiAgICAgIGNvbnN0IHVwZGF0ZURvbmUgPSAoKSA9PiB7IHRoaXMucmVmLmxhc3Quc2V0Q29uZmlnKGN1cnJlbnRWZXJzaW9uKTsgfTsKICAgICAgaWYgKGxhc3RXZWlib1ZlcnNpb24gJiYgeWF3Zi5XRUlCT19WRVJTSU9OICE9PSBsYXN0V2VpYm9WZXJzaW9uKSB7CiAgICAgICAgdWkuYWxlcnQoewogICAgICAgICAgaWQ6ICd5YXdmLXdlaWJvLXZlcnNpb24nLAogICAgICAgICAgdGl0bGU6IGkxOG4ud2VpYm9WZXJzaW9uVGl0bGUsCiAgICAgICAgICB0ZXh0OiB5YXdmLldFSUJPX1ZFUlNJT04gPT09IDYgPyBpMThuLndlaWJvVmVyc2lvbjdUbzYgOiBpMThuLndlaWJvVmVyc2lvbjZUbzcsCiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLnJlZi5sYXN0V2VpYm8uc2V0Q29uZmlnKHlhd2YuV0VJQk9fVkVSU0lPTik7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoIWxhc3RXZWlib1ZlcnNpb24pIHsKICAgICAgICB0aGlzLnJlZi5sYXN0V2VpYm8uc2V0Q29uZmlnKHlhd2YuV0VJQk9fVkVSU0lPTik7CiAgICAgIH0KICAgICAgaWYgKCFsYXN0VmVyc2lvbikgewogICAgICAgIC8vIOWIneasoei/kOihjO+8jOS5n+WPr+iDveaYr+S7jiB2MyDljYfnuqfkuIrmnaXnmoQKICAgICAgICB0cnkgewogICAgICAgICAgLy8g5a+85YWl6K6+572uCiAgICAgICAgICBjb25zdCB2M0NvbmZpZyA9IEpTT04ucGFyc2UoYXdhaXQgR00uZ2V0VmFsdWUoYHVzZXIke3lhd2YuaW5pdC5wYWdlLiRDT05GSUcudWlkfWNvbmZpZ2ApKTsKICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHsgeWF3ZjogJ1lldCBBbm90aGVyIFdlaWJvIEZpbHRlcicsIHZlcjogJzMnLCBjb25mOiB2M0NvbmZpZyB9KSkuYnVmZmVyOwogICAgICAgICAgY29uc3QgeyBjb25maWc6IG5ld0NvbmZpZyB9ID0gaW1wb3J0ZXIucGFyc2UoZmlsZUNvbnRlbnQpOwogICAgICAgICAgaWYgKG5ld0NvbmZpZykgYXdhaXQgdGhpcy5jb25maWdQb29sLmltcG9ydChuZXdDb25maWcpOwogICAgICAgICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ0ltcG9ydCBmcm9tIHYzIGZhaWxlZC4nKTsKICAgICAgICAgIC8vIOWvvOWFpeWFs+azqOS/oeaBrwoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHVpZCA9IGluaXQucGFnZS4kQ09ORklHLnVpZDsKICAgICAgICAgICAgY29uc3QgW2xhc3QsIG5vdGljZV0gPSAoYXdhaXQgUHJvbWlzZS5hbGwoWwogICAgICAgICAgICAgIEdNLmdldFZhbHVlKGBmb2xsb3dpbmdfaW5mb18ke3VpZH1gLCAne30nKSwKICAgICAgICAgICAgICBHTS5nZXRWYWx1ZShgZm9sbG93aW5nX25vdGljZV8ke3VpZH1gLCAne30nKSwKICAgICAgICAgICAgXSkpLm1hcChkYXRhID0+IHsKICAgICAgICAgICAgICB0cnkgeyByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTsgfSBjYXRjaCAoZSkgeyByZXR1cm4ge307IH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXl9ICovCiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBsYXN0LmZvbGxvd2luZzsKICAgICAgICAgICAgKChub3RpY2UgfHwge30pLmFkZCB8fCBbXSkuZm9yRWFjaCh1ID0+IHsKICAgICAgICAgICAgICBjb25zdCBwb3MgPSBsaXN0LmZpbmQodiA9PiB2LmlkID09PSB1LmlkKTsKICAgICAgICAgICAgICBpZiAocG9zICE9PSAtMSkgbGlzdC5zcGxpY2UocG9zLCAxKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICgobm90aWNlIHx8IHt9KS5sb3N0IHx8IFtdKS5mb3JFYWNoKHUgPT4gewogICAgICAgICAgICAgIGNvbnN0IHBvcyA9IGxpc3QuZmluZCh2ID0+IHYuaWQgPT09IHUuaWQpOwogICAgICAgICAgICAgIGlmIChwb3MgPT09IC0xKSBsaXN0LmFwcGVuZCh1KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IGxhc3QudGltZXN0YW1wOwoKICAgICAgICAgICAgY29uc3QgbmV3TGlzdCA9IGxpc3QubWFwKGl0ZW0gPT4gKCh7CiAgICAgICAgICAgICAgdXNlcjogb2xkID0+ICh7CiAgICAgICAgICAgICAgICBpZDogYHVzZXItJHtvbGQudXNlcn1gLAogICAgICAgICAgICAgICAgdHlwZTogJ3VzZXInLAogICAgICAgICAgICAgICAgdXNlcjogb2xkLnVzZXIsCiAgICAgICAgICAgICAgICB1cmw6IG9sZC5ocmVmLAogICAgICAgICAgICAgICAgYXZhdGFyOiBvbGQuYXZhdGFyLAogICAgICAgICAgICAgICAgbmFtZTogb2xkLm5hbWUucmVwbGFjZSgvIFwoLipcKSQvZywgJycpLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG9sZC5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBzdG9jazogb2xkID0+ICh7CiAgICAgICAgICAgICAgICBpZDogYHN0b2NrLSR7b2xkLnN0b2NrfWAsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3RvY2snLAogICAgICAgICAgICAgICAgc3RvY2s6IG9sZC5zdG9jaywKICAgICAgICAgICAgICAgIHVybDogb2xkLmhyZWYsCiAgICAgICAgICAgICAgICBhdmF0YXI6IG9sZC5hdmF0YXIsCiAgICAgICAgICAgICAgICBuYW1lOiBgJCR7b2xkLnN0b2NrfSRgLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGAkJHtvbGQuc3RvY2t9JGAsCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgdG9waWM6IG9sZCA9PiAoewogICAgICAgICAgICAgICAgaWQ6IGB0b3BpYy0ke29sZC50b3BpY31gLAogICAgICAgICAgICAgICAgdHlwZTogJ3RvcGljJywKICAgICAgICAgICAgICAgIHRvcGljOiBvbGQudG9waWMsCiAgICAgICAgICAgICAgICB1cmw6IG9sZC5ocmVmLAogICAgICAgICAgICAgICAgYXZhdGFyOiBvbGQuYXZhdGFyLAogICAgICAgICAgICAgICAgbmFtZTogYCMke29sZC50b3BpY30jYCwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgIyR7b2xkLnRvcGljfSNgLAogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICB9W2l0ZW0udHlwZV0gfHwgKG9sZCA9PiAoewogICAgICAgICAgICAgIGlkOiAndW5rbm93bi0nICsgb2xkLmhyZWYsCiAgICAgICAgICAgICAgdHlwZTogJ3Vua25vd24nLAogICAgICAgICAgICAgIHVybDogb2xkLmhyZWYsCiAgICAgICAgICAgICAgYXZhdGFyOiBvbGQuYXZhdGFyLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBvbGQuZGVzY3JpcHRpb24uc2xpY2UoMSksCiAgICAgICAgICAgICAgbmFtZTogb2xkLmRlc2NyaXB0aW9uLnNsaWNlKDEpLAogICAgICAgICAgICB9KSkpKGl0ZW0pKSk7CiAgICAgICAgICAgIGNvbnN0IGZvbGxvd0NvbmZpZyA9IGF3YWl0IGNvbmZpZy5wb29sKCdGb2xsb3cnLCB7IHVpZCB9KTsKICAgICAgICAgICAgY29uc3QgbGFzdExpc3QgPSBuZXcgcnVsZS5jbGFzcy5PZmZzY3JlZW5Db25maWdJdGVtKHsgaWQ6ICdsYXN0TGlzdCcsIGNvbmZpZ1Bvb2w6IGZvbGxvd0NvbmZpZyB9KTsKICAgICAgICAgICAgY29uc3QgbGFzdENoYW5nZSA9IG5ldyBydWxlLmNsYXNzLk9mZnNjcmVlbkNvbmZpZ0l0ZW0oeyBpZDogJ2xhc3RDaGFuZ2UnLCBjb25maWdQb29sOiBmb2xsb3dDb25maWcgfSk7CiAgICAgICAgICAgIGxhc3RMaXN0LnNldENvbmZpZyh7IHRpbWVzdGFtcCwgbGlzdDogbmV3TGlzdCB9KTsKICAgICAgICAgICAgbGFzdENoYW5nZS5zZXRDb25maWcobnVsbCk7CiAgICAgICAgICB9IGNhdGNoIChmb2xsb3dFeGNlcHRpb24pIHsKICAgICAgICAgICAgdXRpbC5kZWJ1ZygnRmFpbGVkIHRvIGltcG9ydCBmb2xsb3dpbmcgaW5mby4nLCBmb2xsb3dFeGNlcHRpb24pOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIOWvvOWFpeaIkOWKnwogICAgICAgICAgYXdhaXQgdWkuYWxlcnQoewogICAgICAgICAgICBpZDogJ3lhd2YtdXBncmFkZS1mcm9tLTMnLAogICAgICAgICAgICB0aXRsZTogaTE4bi5pbXBvcnRWM1N1Y2Nlc3NUaXRsZSwKICAgICAgICAgICAgdGV4dDogaTE4bi5pbXBvcnRWM1N1Y2Nlc3NUZXh0LAogICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHVwZGF0ZURvbmUoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGxvY2F0aW9uLnJlbG9hZCgpOyB9LCAwKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBhd2FpdCB1aS5hbGVydCh7CiAgICAgICAgICAgIGlkOiAneWF3Zi1maXJzdC1zZWVuJywKICAgICAgICAgICAgdGl0bGU6IGkxOG4uaW5zdGFsbFN1Y2Nlc3NUaXRsZSwKICAgICAgICAgICAgdGV4dDogeWF3Zi5XRUlCT19WRVJTSU9OID09PSA2ID8gaTE4bi5pbnN0YWxsU3VjY2Vzc1RleHRWNiA6IGkxOG4uaW5zdGFsbFN1Y2Nlc3NUZXh0VjcsCiAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgdXBkYXRlRG9uZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChjdXJyZW50VmVyc2lvbiA8IGxhc3RWZXJzaW9uKSB7CiAgICAgICAgLy8g5b2T5YmN54mI5pys5q+U5Y6G5Y+y54mI5pys5pu05pen77yM5Y+v6IO95piv5Zue6YCA5LqG54mI5pys77yM55u05o6l5pu05paw54mI5pys5Y+3CiAgICAgICAgdXBkYXRlRG9uZSgpOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChjdXJyZW50VmVyc2lvbiA9PT0gbGFzdFZlcnNpb24pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoIXdoYXRzTmV3LmlzRW5hYmxlZCgpKSB7CiAgICAgICAgdXBkYXRlRG9uZSgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBydWxlSXRlbXMgPSBydWxlLnF1ZXJ5KHsKICAgICAgICBmaWx0ZXIoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0udmVyc2lvbiAmJiBpdGVtLnZlcnNpb24gPiBsYXN0VmVyc2lvbiAmJiBpdGVtLnZlcnNpb24gPD0gY3VycmVudFZlcnNpb247CiAgICAgICAgfSwKICAgICAgfSk7CiAgICAgIGlmICghcnVsZUl0ZW1zLmxlbmd0aCkgewogICAgICAgIHVwZGF0ZURvbmUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3Qgd2hhdHNOZXdEaWFsb2cgPSB1aS5kaWFsb2coewogICAgICAgIGlkOiAneWF3Zi13aGF0c25ldycsCiAgICAgICAgdGl0bGU6IGkxOG4udXBkYXRlU3VjY2Vzc1RpdGxlLAogICAgICAgIHJlbmRlcihjb250YWluZXIpIHsKICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ieWF3Zi13aGF0c25ldy1kaWFsb2ciPjxkaXYgY2xhc3M9Inlhd2Ytd2hhdHNuZXctaGVhZGVyIj48L2Rpdj48ZGl2IGNsYXNzPSJ5YXdmLXdoYXRzbmV3LWJvZHkiPjwvZGl2PjxkaXYgY2xhc3M9Inlhd2Ytd2hhdHNuZXctZm9vdGVyIj48aHIgLz48L2Rpdj48L2Rpdj4nOwogICAgICAgICAgY29uc3QgaGVhZGVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy55YXdmLXdoYXRzbmV3LWhlYWRlcicpOwogICAgICAgICAgY29uc3QgYm9keSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi13aGF0c25ldy1ib2R5Jyk7CiAgICAgICAgICBjb25zdCBmb290ZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnlhd2Ytd2hhdHNuZXctZm9vdGVyJyk7CiAgICAgICAgICBoZWFkZXIudGV4dENvbnRlbnQgPSBpMThuLnVwZGF0ZVN1Y2Nlc3NIZWFkZXI7CiAgICAgICAgICBib2R5LnRleHRDb250ZW50ID0gaTE4bi51cGRhdGVTdWNjZXNzRGV0YWlsLnJlcGxhY2UoJ3t7Y291bnR9fScsIHJ1bGVJdGVtcy5sZW5ndGgpOwogICAgICAgICAgcnVsZS5yZW5kZXIoYm9keSwgcnVsZUl0ZW1zKTsKICAgICAgICAgIGZvb3Rlci5hcHBlbmRDaGlsZCh3aGF0c05ldy5yZW5kZXIoKSk7CiAgICAgICAgfSwKICAgICAgICBidXR0b246IHsKICAgICAgICAgIGNsb3NlKCkgewogICAgICAgICAgICB3aGF0c05ld0RpYWxvZy5oaWRlKCk7CiAgICAgICAgICAgIHdoYXRzTmV3LnJlZi5sYXN0LnNldENvbmZpZyhjdXJyZW50VmVyc2lvbik7CiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgIH0pOwogICAgICBpZiAoaW5pdC5wYWdlLnR5cGUoKSA9PT0gJ3NlYXJjaCcpIHJldHVybjsKICAgICAgd2hhdHNOZXdEaWFsb2cuc2hvdygpOwogICAgfSwKICB9KTsKCiAgY3NzLmFwcGVuZChgCi55YXdmLXdoYXRzbmV3LWRpYWxvZyB7IHBhZGRpbmc6IDIwcHg7IHdpZHRoOiA2MDBweDsgfSAKLnlhd2Ytd2hhdHNuZXctaGVhZGVyIHsgZm9udC1zaXplOiAxNDAlOyB9Ci55YXdmLXdoYXRzbmV3LWJvZHkgeyBoZWlnaHQ6IDMwMHB4OyBvdmVyZmxvdzogYXV0bzsgbWFyZ2luOiAwIC0yMHB4OyBwYWRkaW5nOiAwIDIwcHg7IH0KYCk7Cgp9KCkpOwovLyNlbmRyZWdpb24KLy8jcmVnaW9uIEByZXF1aXJlIHlhb2Zhbmc6Ly9jb250ZW50L3J1bGUvYWJvdXQvZGVidWcuanMKOyAoZnVuY3Rpb24gKCkgewoKICBjb25zdCB5YXdmID0gd2luZG93Lnlhd2Y7CiAgY29uc3QgdXRpbCA9IHlhd2YudXRpbDsKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwogIGNvbnN0IG9ic2VydmVyID0geWF3Zi5vYnNlcnZlcjsKICBjb25zdCBmZWVkUGFyc2VyID0geWF3Zi5mZWVkOwoKICBjb25zdCBhYm91dCA9IHlhd2YucnVsZXMuYWJvdXQ7CgogIGNvbnN0IGkxOG4gPSB1dGlsLmkxOG47CiAgaTE4bi5kZWJ1Z0dyb3VwVGl0bGUgPSB7CiAgICBjbjogJ+iwg+ivlScsCiAgICB0dzogJ+WBtemMrycsCiAgICBlbjogJ0RlYnVnJywKICB9OwoKICBjb25zdCBkZWJ1ZyA9IGFib3V0LmRlYnVnID0ge307CiAgZGVidWcuZGVidWcgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogYWJvdXQuYWJvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5kZWJ1Z0dyb3VwVGl0bGUsCiAgfSk7CgogIGkxOG4uZGVidWdUZXh0ID0gewogICAgY246ICflnKjmjqfliLblj7DmiZPljbDosIPor5Xkv6Hmga8nLAogICAgdHc6ICflnKjmjqfliLblj7DliJfljbDlgbXpjK/oqIrmga8nLAogICAgZW46ICdMb2cgZGVidWcgaW5mbyB0byBjb25zb2xlJywKICB9OwoKICBkZWJ1Zy5lbmFibGUgPSBydWxlLlJ1bGUoewogICAgd2VpYm9WZXJzaW9uOiBbNiwgN10sCiAgICBpZDogJ3NjcmlwdF9lbmFibGVfZGVidWcnLAogICAgdmVyc2lvbjogMSwKICAgIHBhcmVudDogZGVidWcuZGVidWcsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5kZWJ1Z1RleHQsCiAgICBhaW5pdDogZnVuY3Rpb24gKCkgewogICAgICB1dGlsLmRlYnVnLnNldEVuYWJsZWQodGhpcy5pc0VuYWJsZWQoKSk7CiAgICB9LAogIH0pOwoKICBpMThuLmRlYnVnUmVnZXggPSB7CiAgICBjbjogJ+WcqOaOp+WItuWPsOaJk+WNsOavj+adoeW+ruWNmueUqOS6juato+WImeihqOi+vuW8j+WMuemFjeaXtuivhuWIq+eahOaWh+WtlycsCiAgICBoazogJ+WcqOaOp+WItuWPsOWIl+WNsOavj+aineW+ruWNmueUqOaWvOato+WJh+ihqOmBlOW8j+WMuemFjeaZguitmOWIpeeahOaWh+WtlycsCiAgICB0dzogJ+WcqOaOp+WItuWPsOWIl+WNsOavj+aineW+ruWNmueUqOaWvOato+imj+ihqOekuuW8j+WMuemFjeaZguitmOWIpeeahOaWh+WtlycsCiAgICBlbjogJ1Nob3cgcmVjb2duaXplZCB0ZXh0cyBmb3IgcmVnZXggcnVsZXMgb2YgZWFjaCBmZWVkcyBpbiBjb25zb2xlJywKICB9OwoKICBkZWJ1Zy5yZWdleCA9IHJ1bGUuUnVsZSh7CiAgICBpZDogJ3NjcmlwdF9kZWJ1Z19yZWdleCcsCiAgICB2ZXJzaW9uOiAxLAogICAgcGFyZW50OiBkZWJ1Zy5kZWJ1ZywKICAgIHRlbXBsYXRlOiAoKSA9PiBpMThuLmRlYnVnUmVnZXgsCiAgICBhaW5pdDogZnVuY3Rpb24gKCkgewogICAgICBvYnNlcnZlci5mZWVkLmZpbHRlcihmdW5jdGlvbiByZWdleERlYnVnZ2VyKGZlZWQpIHsKICAgICAgICBjb25zdCB0ZXh0ID0gZmVlZFBhcnNlci50ZXh0LmRldGFpbChmZWVkKTsKICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkodGV4dCkucmVwbGFjZSgvXHUyMDI4L2csICdcXHUyMDI4JykucmVwbGFjZSgvXHUyMDI5L2csICdcXHUyMDI5Jyk7CiAgICAgICAgY29uc29sZS5sb2coJyVvXG4lbycsIGZlZWQsIGpzb24pOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9LCB7IHByaW9yaXR5OiAxZTcgfSk7CiAgICB9LAogIH0pOwoKfSgpKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiByZXBsYWNlbWVudCBvZiB5YW9mYW5nOi8vY29udGVudC9ydWxlL2Fib3V0L3NjcmlwdC5qcwo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IHJ1bGUgPSB5YXdmLnJ1bGU7CgogIGNvbnN0IGFib3V0ID0geWF3Zi5ydWxlcy5hYm91dDsKCiAgY29uc3QgaTE4biA9IHV0aWwuaTE4bjsKICBpMThuLmFib3V0U2NyaXB0R3JvdXBUaXRsZSA9IHsKICAgIGNuOiAn5YWz5LqOJywKICAgIGhrOiAn6Zec5pa8JywKICAgIHR3OiAn6Zec5pa8JywKICAgIGVuOiAnQWJvdXQnLAogIH07CgogIGNvbnN0IHNjcmlwdCA9IGFib3V0LnNjcmlwdCA9IHt9OwogIHNjcmlwdC5zY3JpcHQgPSBydWxlLkdyb3VwKHsKICAgIHBhcmVudDogYWJvdXQuYWJvdXQsCiAgICB0ZW1wbGF0ZTogKCkgPT4gaTE4bi5hYm91dFNjcmlwdEdyb3VwVGl0bGUsCiAgfSk7CgogIE9iamVjdC5hc3NpZ24oaTE4biwgewogICAgYWJvdXRUZXh0OiB7CiAgICAgIGNuOiAne3tsb2dvfX1ZZXQgQW5vdGhlciBXZWlibyBGaWx0ZXIgKOiNr+aWuSkge3t2ZXJzaW9ufX17e2JyfX3kvZzogIV7e2F1dGhvcn1977yM5oKo5Y+v5Lul5YWz5rOoIHt7c2NyaXB0V2VpYm99fSDkuobop6PnlKjmiLfohJrmnKznmoTmnIDmlrDlj5jljJbjgIJ7e2JyfX3lpoLmnpzmgqjlnKjkvb/nlKjov4fnqIvkuK3pgYfliLDku7vkvZXohJrmnKznmoTplJnor6/vvIzmiJblr7nohJrmnKzmnInku7vkvZXlu7rorq7vvIzmrKLov47liLAge3tpc3N1ZVBhZ2V9fSDlj43ppojvvIzmiJbnp4Hkv6Ege3tzY3JpcHRXZWlib31944CCe3ticn196ISa5pys5L2/55SoIE1QTC0yLjAg5Y2P6K6u5byA5pS+5rqQ5Luj56CB77yM5oKo5Y+v5Lul5ZyoIHt7Z2l0aHVifX0g5LiK5p+l6ZiF44CC5qyi6L+O6LSh54yu5Luj56CB44CCJywKICAgICAgdHc6ICd7e2xvZ299fVlldCBBbm90aGVyIFdlaWJvIEZpbHRlciAo6Jel5pa5KSB7e3ZlcnNpb259fXt7YnJ9feS9nOiAhXt7YXV0aG9yfX3vvIzmgqjlj6/ku6Xpl5zms6gge3tzY3JpcHRXZWlib319IOS6huino+S9v+eUqOiAheiFs+acrOeahOacgOaWsOiuiuWMluOAgnt7YnJ9feWmguaenOaCqOWcqOS9v+eUqOmBjueoi+S4remBh+WIsOS7u+S9leiFs+acrOeahOmMr+iqpO+8jOaIluWwjeWFtuacieS7u+S9leW7uuitsO+8jOatoei/juWIsCB7e2lzc3VlUGFnZX19IOWbnumli++8jOaIluiBr+e5qyB7e3NjcmlwdFdlaWJvfX3jgIJ7e2JyfX3ohbPmnKzku6UgTVBMLTIuMCDljZTlrprplovmlL7ljp/lp4vnorzvvIzmgqjlj6/ku6XlnKgge3tnaXRodWJ9fSDkuIrmn6XplrHjgILmraHov47osqLnjbvljp/lp4vnorzjgIInLAogICAgICBlbjogJ3t7bG9nb319WWV0IEFub3RoZXIgV2VpYm8gRmlsdGVyIChZQVdGKSB7e3ZlcnNpb259fXt7YnJ9fUNyZWF0ZWQgYnkge3thdXRob3J9fS4gWW91IG1heSBmb2xsb3cge3tzY3JpcHRXZWlib319IGZvciBsYXN0IHVwZGF0ZXMgaW5mby57e2JyfX1Zb3UgbWF5IHJlcG9ydCBlcnJvcnMgYW5kIGdpdmUgc3VnZ2VzdGlvbnMgb24ge3tpc3N1ZVBhZ2V9fSwgb3Igc2VuZCBwcml2YXRlIG1lc3NhZ2UgdG8ge3tzY3JpcHRXZWlib319Lnt7YnJ9fVRoaXMgZXh0ZW5zaW9uIGlzIHJlbGVhc2VkIHVuZGVyIE1QTC0yLjAgbGljZW5zZS4gWW91IG1heSBnZXQgaXRzIHNvdXJjZSBmcm9tIHt7Z2l0aHVifX0uIENvbnRyaWJ1dGlvbnMgYXJlIHdlbGNvbWVkLicsCiAgICB9LAogICAgYWJvdXRJc3N1ZVRyYWNrZXI6IHsKICAgICAgY246ICforq7popjot5/ouKrlmagnLAogICAgICB0dzogJ+itsOmhjOi/vei4quWZqCcsCiAgICAgIGVuOiAnaXNzdWUgdHJhY2tlcicsCiAgICB9LAogICAgYWJvdXRHaXRodWJSZXBvOiB7CiAgICAgIGNuOiAnR2l0SHViIOS7k+W6kycsCiAgICAgIHR3OiAnR2l0SHViIOWtmOaUvuW6qycsCiAgICAgIGVuOiAnR2l0SHViIHJlcG9zaXRvcnknLAogICAgfSwKICAgIHVzZXJTY3JpcHRWZXJzaW9uOiB7CiAgICAgIGNuOiAnezF9IO+8iOeUqOaIt+iEmuacrO+8iScsCiAgICAgIHR3OiAnezF9IO+8iOS9v+eUqOiAheiFs+acrO+8iScsCiAgICAgIGVuOiAnezF9IO+8iFVzZXIgU2NyaXB077yJJywKICAgIH0sCiAgfSk7CgogIHNjcmlwdC50ZXh0ID0gcnVsZS5UZXh0KHsKICAgIHdlaWJvVmVyc2lvbjogWzYsIDddLAogICAgcGFyZW50OiBzY3JpcHQuc2NyaXB0LAogICAgdGVtcGxhdGU6ICgpID0+IGkxOG4uYWJvdXRUZXh0LAogICAgcmVmOiB7CiAgICAgIGJyOiB7CiAgICAgICAgcmVuZGVyKCkgewogICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JyJyk7CiAgICAgICAgfSwKICAgICAgfSwKICAgICAgdmVyc2lvbjogewogICAgICAgIHJlbmRlcigpIHsKICAgICAgICAgIGNvbnN0IHZlcnNpb24gPSBHTS5pbmZvLnNjcmlwdC52ZXJzaW9uOwogICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGkxOG4udXNlclNjcmlwdFZlcnNpb24ucmVwbGFjZSgnezF9JywgdmVyc2lvbikpOwogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIGF1dGhvcjogewogICAgICAgIHJlbmRlcigpIHsKICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICBsaW5rLmhyZWYgPSAnaHR0cHM6Ly93ZWliby5jb20vdHNoOTAnOwogICAgICAgICAgbGluay50aXRsZSA9ICd0c2g5MCc7CiAgICAgICAgICBsaW5rLnRleHRDb250ZW50ID0gJ0B0c2g5MCc7CiAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgndXNlcmNhcmQnLCAnaWQ9MzkyMTU4OTA1NycpOwogICAgICAgICAgcmV0dXJuIGxpbms7CiAgICAgICAgfSwKICAgICAgfSwKICAgICAgc2NyaXB0V2VpYm86IHsKICAgICAgICByZW5kZXIoKSB7CiAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgbGluay5ocmVmID0gJ2h0dHBzOi8vd2VpYm8uY29tL3lhd2ZzY3JpcHQnOwogICAgICAgICAgbGluay50aXRsZSA9ICdZQVdG6ISa5pysJzsKICAgICAgICAgIGxpbmsudGV4dENvbnRlbnQgPSAnQFlBV0bohJrmnKwnOwogICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ3VzZXJjYXJkJywgJ2lkPTU2MDEwMzMxMTEnKTsKICAgICAgICAgIHJldHVybiBsaW5rOwogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIGxvZ286IHsKICAgICAgICByZW5kZXIoKSB7CiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICBjb250YWluZXIuc3R5bGUuY3NzRmxvYXQgPSAncmlnaHQnOwogICAgICAgICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoNjQsIDY0KTsKICAgICAgICAgIGltYWdlLnNyYyA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lqOCtDanh6ZG1jZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWlCMmFXVjNRbTk0UFNJd0lEQWdPVFlnT1RZaUlIZHBaSFJvUFNJNU5pSWdhR1ZwWjJoMFBTSTVOaUkrQ2lBZ1BIQmhkR2dnWm1sc2JEMGlJMFE1TWtRelFTSWdaRDBpVFRFeUxEVTBZekV4TGpZNE55MHdMalUzTml3eU1TNHhPVGN0TUM0eE5ETXNNalF1TnpVc055NDFZek11TXprNExEVXVOekF4TERBdU1Ua3hMREV6TGpBM05TMHhMalVzTVRoak15NDVNellzTUM0M01EVXNOaTR4TmpRc01pNHdNVElzT0M0eU5TdzBMalZqTFRFd0xqUTVPU3d3TFRJeExqQXdNU3d3TFRNeExqVXNNRU14TWl3M05DNHdNREVzTVRJc05qTXVPVGs1TERFeUxEVTBlaUl2UGdvZ0lEeHdZWFJvSUdacGJHdzlJaU5GT1RoRU5Ea2lJR1E5SWswM01TNHpOallzTWpndU9URXhZeTB4TVM0eU1EUXRNVE11TWpZdE1qY3VOek10TVRndU16RTFMVFF5TGprNE5DMHhOQzQ0TlROb0xUQXVNREEyWXkwekxqVXpMREF1T0RBM0xUVXVOemdzTkM0MU1UTXROUzR3TWpRc09DNHlOelJqTUM0M05USXNNeTQzTmpRc05DNHlNalFzTmk0eE5qa3NOeTQzTlRNc05TNHpOalpqTVRBdU9EVXlMVEl1TkRZc01qSXVOVGsxTERFdU1UTTRMRE13TGpVMkxERXdMalUxT0dNM0xqazFOeXc1TGpReE9Td3hNQzR4TVRrc01qSXVNalkyTERZdU56RXhMRE16TGpVeU9Hd3dMakF3TWl3d0xqQXdNbU10TVM0eE1URXNNeTQyTmprc01DNDNOamtzTnk0MU9UTXNOQzR5TVN3NExqYzNPV016TGpReU55d3hMakU0TlN3M0xqRXhNUzB3TGpneE9TdzRMakl5TXkwMExqUTNPV013TFRBdU1EQTNMREF0TUM0d01qRXNNQzR3TURJdE1DNHdNamRET0RVdU5UazFMRFl3TGpJeE55dzRNaTQxTnpRc05ESXVNVFU0TERjeExqTTJOaXd5T0M0NU1URk5OVFF1TVRZeExEUTFMalE0Tm1NdE5TNDBOVE10Tmk0ME5UZ3RNVE11TlRBMUxUZ3VPVEV4TFRJd0xqa3pPQzAzTGpJeU5HTXRNeTR3TXpnc01DNDJPVEV0TkM0NU56UXNNeTQ0T0RNdE5DNHpNaklzTnk0eE1qaGpNQzQyTlN3ekxqSXpNaXd6TGpZek55dzFMak13T1N3MkxqWTJPQ3cwTGpZd05YWXdMakF3TjJNekxqWXpNeTB3TGpneUxEY3VOVGN6TERBdU16YzJMREV3TGpJek9Td3pMalV5TjJNeUxqWTJPU3d6TGpFMU9Dd3pMak00Tml3M0xqUTJMREl1TWpReExERXhMakl6Tldnd0xqQXdObU10TUM0NU5USXNNeTR4TlRFc01DNDJOalFzTmk0MU16a3NNeTQyTVRnc055NDFObU15TGprMU5Td3hMakF4TERZdU1USTFMVEF1TnpFc055NHdOemt0TXk0NE5qbEROakV1TURnMkxEWXdMamN6T1N3MU9TNDJNalVzTlRFdU9UUXpMRFUwTGpFMk1TdzBOUzQwT0RZaUx6NEtQQzl6ZG1jK0NnPT0nOwogICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGltYWdlKTsKICAgICAgICAgIHJldHVybiBjb250YWluZXI7CiAgICAgICAgfSwKICAgICAgfSwKICAgICAgaXNzdWVQYWdlOiB7CiAgICAgICAgcmVuZGVyKCkgewogICAgICAgICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vZ2l0aHViLmNvbS90aWFuc2gveWFvZmFuZy9pc3N1ZXMnOwogICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgIGxpbmsuaHJlZiA9IHVybDsKICAgICAgICAgIGxpbmsudGV4dENvbnRlbnQgPSBpMThuLmFib3V0SXNzdWVUcmFja2VyOwogICAgICAgICAgbGluay50YXJnZXQgPSAnX2JsYW5rJzsKICAgICAgICAgIHJldHVybiBsaW5rOwogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIGdpdGh1YjogewogICAgICAgIHJlbmRlcigpIHsKICAgICAgICAgIGNvbnN0IHVybCA9ICdodHRwczovL2dpdGh1Yi5jb20vdGlhbnNoL3lhb2ZhbmcnOwogICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgIGxpbmsuaHJlZiA9IHVybDsKICAgICAgICAgIGxpbmsudGV4dENvbnRlbnQgPSBpMThuLmFib3V0R2l0aHViUmVwbzsKICAgICAgICAgIGxpbmsudGFyZ2V0ID0gJ19ibGFuayc7CiAgICAgICAgICByZXR1cm4gbGluazsKICAgICAgICB9LAogICAgICB9LAogICAgfSwKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgovLyNyZWdpb24gQHJlcXVpcmUgeWFvZmFuZzovL2NvbnRlbnQvbWFpbi9lbnRyeS5qcwovLyDov5nkuKrmlofku7bnlKjkuo7lkJHnlYzpnaLkuIrmt7vliqDmvI/mlpflm77moIflkozoj5zljZXpobkKCjsgKGZ1bmN0aW9uICgpIHsKCiAgY29uc3QgeWF3ZiA9IHdpbmRvdy55YXdmOwogIGNvbnN0IHV0aWwgPSB5YXdmLnV0aWw7CiAgY29uc3QgaW5pdCA9IHlhd2YuaW5pdDsKICBjb25zdCBvYnNlcnZlciA9IHlhd2Yub2JzZXJ2ZXI7CiAgY29uc3QgcGFnZW1lbnUgPSB5YXdmLnBhZ2VtZW51OwoKICBjb25zdCBpMThuID0gdXRpbC5pMThuOwoKICBjb25zdCBydWxlID0geWF3Zi5ydWxlOwoKICBpMThuLmZpbHRlck1lbnVJdGVtID0gewogICAgY246ICfoja/mlrnorr7nva4nLAogICAgdHc6ICfol6XmlrnoqK3lrponLAogICAgZW46ICdZQVdGIFNldHRpbmdzJywKICB9OwoKICAvLyDnvKnlsI/mkJzntKLmoYblrr3luqbku6XnlZnlh7rmvI/mlpfmjInpkq7nmoTkvY3nva4KICBjb25zdCBzZWFyY2hDc3MgPSBgCi5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2hfdjIgeyB3aWR0aDogMTc4cHggIWltcG9ydGFudDsgfQouV0JfZ2xvYmFsX25hdiAuZ25fc2VhcmNoX3YyIC5wbGFjZWhvbGRlciwgLldCX2dsb2JhbF9uYXYgLmduX3NlYXJjaF92MiAuV19pbnB1dCB7IHdpZHRoOiAxMzVweCAhaW1wb3J0YW50OyB9Ci5nbl90b3BtZW51bGlzdF9zZWFyY2ggeyB3aWR0aDogMTgwcHggIWltcG9ydGFudDsgfQpAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOjEyOTVweCkgewogIC5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2hfdjIgeyB3aWR0aDogNDM1cHggIWltcG9ydGFudDsgfQogIC5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2hfdjIgLnBsYWNlaG9sZGVyLCAuV0JfZ2xvYmFsX25hdiAuZ25fc2VhcmNoX3YyIC5XX2lucHV0IHsgd2lkdGg6IDM5MnB4ICFpbXBvcnRhbnQ7IH0KICAuZ25fdG9wbWVudWxpc3Rfc2VhcmNoIHsgd2lkdGg6IDQzN3B4ICFpbXBvcnRhbnQ7IH0KfQpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjEwMDZweCkgewogIC5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2hfdjIgeyB3aWR0aDogMTE1cHggIWltcG9ydGFudDsgfQogIC5XQl9nbG9iYWxfbmF2IC5nbl9zZWFyY2hfdjIgLnBsYWNlaG9sZGVyLCAuV0JfZ2xvYmFsX25hdiAuZ25fc2VhcmNoX3YyIC5XX2lucHV0IHsgd2lkdGg6IDcycHggIWltcG9ydGFudDsgfQogIC5nbl90b3BtZW51bGlzdF9zZWFyY2ggeyB3aWR0aDogMTE3cHggIWltcG9ydGFudDsgfQp9Ci5nbl90b3BtZW51bGlzdF9zZWFyY2ggeyBtaW4td2lkdGg6IDIwMHB4ICFpbXBvcnRhbnQ7IH0KYDsKICAvLyDmt7vliqDmvI/mlpflm77moIfnmoTlrprkuYkKICBjb25zdCBpY29uQ3NzID0gYAouZ25fZmlsdGVyIC5XX2ZpY29uIHsgZm9udC1mYW1pbHk6ICJ5YXdmLWljb25mb250IiAhaW1wb3J0YW50OyB9CkBmb250LWZhY2UgeyBmb250LWZhbWlseTogInlhd2YtaWNvbmZvbnQiOyBmb250LXN0eWxlOiBub3JtYWw7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IHNyYzogdXJsKCJkYXRhOmltYWdlL3dvZmY7YmFzZTY0LGQwOUdSazlVVkU4QUFBUElBQW9BQUFBQUJiUUFBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCRFJrWWdBQUFBOUFBQUFOVUFBQURvdDhFUUZrWkdWRTBBQUFITUFBQUFHZ0FBQUJ4dEF3MG1UMU12TWdBQUFlZ0FBQUJKQUFBQVlGbWRZbGRqYldGd0FBQUNOQUFBQURnQUFBRkNBQTBEQUdobFlXUUFBQUpzQUFBQU1BQUFBRFlENWExb2FHaGxZUUFBQXB3QUFBQWRBQUFBSkFhQUE0Qm9iWFI0QUFBQ3ZBQUFBQWdBQUFBSUNBQUFkMjFoZUhBQUFBTEVBQUFBQmdBQUFBWUFBbEFBYm1GdFpRQUFBc3dBQUFEa0FBQUIxSGg1T1BSd2IzTjBBQUFEc0FBQUFCWUFBQUFnLzRZQU0zaWNWWTJ4YWdKQkZBRGZPKzlPMUdOTkpCY0xGd1d4UExVWEF1bXZEZWtQUVVtalRZallDTmJQMHNMTytBazJOc0xXZmtOK1pOL2ViaVRhQkc2cXFXWVFmQjhRVVN5enhhVC9NWjdQSnZQWko2QUhDQy9jOGxpV3VPbHZJbXhYb2ZMMVBpVDZsNmlzYTdhWnQwMFNTRmpWSmNDRGhQV2pCQ0hocHdIZVBTR2dWUWdYTHpkRzRDRjIzMGh4cWxBcGMxRWw5WndQK0hnZGhNcXRZazdOeGFWbGtWZE1FbitUM2JrZXVZN2RFM0hIN3JnWDhQRDNOVDdvYzZnemZYSlQwcGs5a1QwSEl0OCtVYnpZbTRSQ2lxcC9oWkpXWGdBQUFIaWNZMkJnWUdRQWdqTzJpODZENkF0Slc3VmhOQUJLVlFhZ0FBQjRuR05nWm1GZy9NTEF5c0RCTkpQcERBTURReitFWm56TllNekl5Y0RBeE1BR0pLR0FrUUVKQktTNXBqQTRNRVF5UkRMci9OZGhpR0dhd2RDTVVBUGtLUUFoSXdCWVR3dW1BQUFBZUp4allHQmdab0JnR1FaR0JoQ3dBZklZd1h3V0JnVWd6UUtFSUg3ay8vOFE4djhLcUVvR1JqWUdHSlA2Z0dZR1V4Y0FBSmdyQnd4NG5HTmdaR0JnQU9LK0YvLzk0dmx0dmpKd3N6Q0F3SVdrcmRwd3V2eC9MWE1YMHd3Z2w0T0JDU1FLQUZNQ0M3eDRuR05nWkdCZ212Ry9saUdHaFFFRW1Mc1lHQmxRQVJNQVU2TURDQUFBQUFRQUFBQUVBQUIzQUFCUUFBQUNBQUI0bkpXUHdXb0NNUkNHditncWloVjZLQjdFUTg1Q2xtVHhKTDEybjBDOGkrektYamF3Q3VLTGVPbjc5RUg2QkgyRVRuU2dsRkpvQTBtK21mK2Z6QVI0NElvaExjT1VoWEtQRWMvS2ZaYThLbWZpZVZjZU1ERWo1U0ZUNDhWcHNyRms1cmVxeEQwZXBmck9mVGE4S0dmaWVWTWVNT05EZWNqY1BIRmh4NWthUjhPZVNDdWN6aE5jZHVmYU5mdlkxckdWOElmK0paV2FTbmZIZ1FwTFFZNlhleTM3OXlaM1BiQVNMWWpmU1oyL3haVHlkQm03UTJXTDNOdTEvVGFPeEdIbGduZUZEK0w5K3krMk1sekhVWHhKVDYzVG1HeXI3dGpFMW9iYy8rTzFUNVJ3VE9KNG5HTmdaZ0NELzgwTVJrQ0trUUVOQUFBb1ZRRzVBQUE9IikgZm9ybWF0KCJ3b2ZmIik7IH0KLmduX3RvcG1lbnVsaXN0X3lhd2YgeyB0b3A6IDM0cHg7IHJpZ2h0OiAtMTdweDsgd2lkdGg6IDEzNHB4OyB9Ci55YXdmLWRyb3AtYXJlYS1hY3RpdmUgLmduX3RvcG1lbnVsaXN0X3lhd2YgeyBkaXNwbGF5OiBub25lOyB9CmA7CgogIGNvbnN0IHNlYXJjaFN0eWxlID0gdXRpbC5jc3MuYWRkKHNlYXJjaENzcyk7CiAgY29uc3QgaWNvblN0eWxlID0gdXRpbC5jc3MuYWRkKGljb25Dc3MpOwogIGluaXQub25EZWluaXQoKCkgPT4gewogICAgc2VhcmNoU3R5bGUucmVtb3ZlKCk7CiAgICBpY29uU3R5bGUucmVtb3ZlKCk7CiAgfSk7CgogIGNvbnN0IG9uQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQsIHRhYiA9IG51bGwpIHsKICAgIHRyeSB7CiAgICAgIHJ1bGUuZGlhbG9nKHRhYik7CiAgICB9IGNhdGNoIChlKSB7IHV0aWwuZGVidWcoJ0Vycm9yIHdoaWxlIHByb21wdGluZyBkaWFsb2c6ICVvJywgZSk7IH0KICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgfTsKCiAgLy8g57uZ5ryP5paX5Zu+5qCH5re75Yqg5LiA5Liq6I+c5Y2VCiAgY29uc3QgYWRkU2NyaXB0TWVudSA9IGZ1bmN0aW9uIChjb250YWluZXIpIHsKICAgIGNvbnN0IG1lbnVMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBtZW51TGlzdC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iZ25fdG9wbWVudWxpc3QgZ25fdG9wbWVudWxpc3RfeWF3ZiIgbm9kZS10eXBlPSJtc2dMYXllciIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij48dWw+PC91bD48ZGl2IGNsYXNzPSJXX2xheWVyX2Fycm93Ij48c3BhbiBjbGFzcz0iV19hcnJvd19ib3IgV19hcnJvd19ib3JfdCI+PGkgY2xhc3M9IlNfbGluZTMiPjwvaT48ZW0gY2xhc3M9IlNfYmcyX2JyIj48L2VtPjwvc3Bhbj48L2Rpdj48L2Rpdj4nOwogICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1lbnVMaXN0LmZpcnN0Q2hpbGQpOwogICAgY29uc3QgZHJvcGRvd24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmduX3RvcG1lbnVsaXN0X3lhd2YnKTsKICAgIGNvbnN0IHVsID0gZHJvcGRvd24ucXVlcnlTZWxlY3RvcigndWwnKTsKICAgIC8vIOWFgeiuuOWFtuS7luWKn+iDveWQkeiPnOWNlemHjOmdouWhnuS4nOilvwogICAgcGFnZW1lbnUucmVhZHkodWwpOwogICAgLy8g5Zyo6byg5qCH56e75YWl5oiW6I635b6X54Sm54K55pe25bGV56S65LiL5ouJ6I+c5Y2VCiAgICBjb25zdCBhZGRUZW1wQ2xhc3NOYW1lID0gYXN5bmMgZnVuY3Rpb24gKGNsYXNzTmFtZXMsIGRlbGF5KSB7CiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7CiAgICAgIGRyb3Bkb3duLmNsYXNzTGlzdC5hZGQoLi4uY2xhc3NOYW1lcyk7CiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpOwogICAgICBkcm9wZG93bi5jbGFzc0xpc3QucmVtb3ZlKC4uLmNsYXNzTmFtZXMpOwogICAgfTsKICAgIGxldCBtb3VzZUluQ291bnQgPSAwLCBzaG93biA9IGZhbHNlOwogICAgY29uc3Qgc2hvd0Ryb3Bkb3duID0gZnVuY3Rpb24gKCkgewogICAgICBtb3VzZUluQ291bnQrKzsKICAgICAgaWYgKCFzaG93bikgewogICAgICAgIHNob3duID0gdHJ1ZTsKICAgICAgICBkcm9wZG93bi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICBhZGRUZW1wQ2xhc3NOYW1lKCdVSV9zcGVlZF9mYXN0JywgJ1VJX2FuaV9mYWRlSW5Eb3duJywgMjAwKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGhpZGVEcm9wZG93biA9IGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgICAgY29uc3QgbGFzdEluQ291bnQgPSBtb3VzZUluQ291bnQ7CiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDApKTsKICAgICAgaWYgKGxhc3RJbkNvdW50ICE9PSBtb3VzZUluQ291bnQpIHJldHVybjsKICAgICAgaWYgKHNob3duKSB7CiAgICAgICAgc2hvd24gPSBmYWxzZTsKICAgICAgICBhd2FpdCBhZGRUZW1wQ2xhc3NOYW1lKCdVSV9zcGVlZF9mYXN0JywgJ1VJX2FuaV9mYWRlT3V0VXAnLCAyMDApOwogICAgICAgIGlmIChsYXN0SW5Db3VudCAhPT0gbW91c2VJbkNvdW50KSByZXR1cm47CiAgICAgICAgZHJvcGRvd24uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgfQogICAgfTsKICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgc2hvd0Ryb3Bkb3duKTsKICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgaGlkZURyb3Bkb3duKTsKICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgc2hvd0Ryb3Bkb3duKTsKICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGhpZGVEcm9wZG93bik7CgogICAgLy8g5re75Yqg6I+c5Y2V6aG577yM6Lez6L2s5Yiw6K6+572u6aG16Z2i55qE5ZCE5qCH562+6aG1CiAgICBydWxlLnRhYnMuZm9yRWFjaCgodGFiLCBpbmRleCkgPT4gewogICAgICBpZiAoIXRhYi5wYWdlbWVudSkgcmV0dXJuOwogICAgICBwYWdlbWVudS5hZGQoewogICAgICAgIHRpdGxlOiB0YWIudGVtcGxhdGUsCiAgICAgICAgb25DbGljazogZXZlbnQgPT4gb25DbGljayhldmVudCwgdGFiKSwKICAgICAgICBvcmRlcjogaW5kZXgsCiAgICAgIH0pOwogICAgfSk7CgogICAgLy8g5aaC5p6c54K55Ye75LqG5ryP5paX5Zu+5qCH77yM5oiR5Lus5Lya55u05o6l5pi+56S66K6+572u56qX5Y+j77yM5L2G5aaC5p6c5piv6Kem5pG454K55Ye755qE77yM5oiR5Lus5YWI5pi+56S65LiL5ouJ6I+c5Y2VCiAgICBjb25zdCBvblRvdWNoID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGlmIChzaG93bikgcmV0dXJuOwogICAgICBzaG93RHJvcGRvd24oKTsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9OwogICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblRvdWNoLCB0cnVlKTsKICB9OwogIGluaXQub25Mb2FkKCgpID0+IHsKICAgIGNvbnN0IGljb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IHJlZmVyZW5jZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5XQl9nbG9iYWxfbmF2IC5nbl9zZXRfbGlzdCcpOwogICAgICBpZiAoIXJlZmVyZW5jZSkgeyBzZXRUaW1lb3V0KGljb24sIDEwMCk7IHJldHVybjsgfQogICAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7CiAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJnbl9zZXRfbGlzdCB5YXdmLWduX3NldF9saXN0Ij48YSBub2RlLXR5cGU9ImZpbHRlciIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyIgY2xhc3M9ImduX2ZpbHRlciI+PGVtIGNsYXNzPSJXX2ZpY29uIGZpY29uX21haWwgU19maWNvbiI+WTwvZW0+PC9hPjwvZGl2PmA7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmltcG9ydE5vZGUodGVtcGxhdGUuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZCwgdHJ1ZSk7CiAgICAgIGNvbnN0IGJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZ25fZmlsdGVyJyk7CiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgaTE4bi5maWx0ZXJNZW51SXRlbSk7CiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spOwogICAgICByZWZlcmVuY2UuYmVmb3JlKGNvbnRhaW5lcik7CiAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICAgIGF3YWl0IHNlYXJjaFN0eWxlLnJlYWR5OwogICAgICAgIGNvbnN0IFt7IHdpZHRoLCBoZWlnaHQgfV0gPSBidXR0b24uZ2V0Q2xpZW50UmVjdHMoKTsKICAgICAgICBjb25zdCBzaXplID0gd2lkdGggKiBoZWlnaHQ7CiAgICAgICAgLy8g5aaC5p6c55So5oi36YCJ5oup5LiN5pi+56S65ryP5paX5oyJ6ZKu77yM6YKj5LmI6KaB5oGi5aSN5pCc57Si5qGG55qE5a695bqmCiAgICAgICAgLy8g5omp5bGV5LiN5o+Q5L6b5pi+56S65oiW5LiN5pi+56S655qE6YCJ6aG577yM5L2G5piv5Lya5o+Q5L6b6Ieq5a6a5LmJIENTUyDlip/og70KICAgICAgICBpZiAoIXNpemUpIHNlYXJjaFN0eWxlLnJlbW92ZSgpOwogICAgICB9LCAwKTsKICAgIH07CiAgICBjb25zdCBtZW51aXRlbSA9IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc3QgbWVudWl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmduX3RvcG1lbnVsaXN0IHVsIGxpLmxpbmUnKTsKICAgICAgaWYgKCFtZW51aXRlbXMgfHwgIW1lbnVpdGVtcy5sZW5ndGgpIHsgc2V0VGltZW91dChtZW51aXRlbSwgMTAwKTsgcmV0dXJuOyB9CiAgICAgIGNvbnN0IHJlZmVyZW5jZSA9IFsuLi5tZW51aXRlbXNdLnBvcCgpOwogICAgICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICAgIHVsLmlubmVySFRNTCA9IGAKPGxpIGNsYXNzPSJsaW5lIFNfbGluZTEgeWF3Zi1jb25maWctbWVudWxpbmUiPjwvbGk+CjxsaT48YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7IiBjbGFzcz0ieWF3Zi1jb25maWctbWVudWl0ZW0iPjwvYT48L2xpPgpgOwogICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5pbXBvcnROb2RlKHVsLCB0cnVlKTsKICAgICAgY29uc3QgaXRlbSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcueWF3Zi1jb25maWctbWVudWl0ZW0nKTsKICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spOwogICAgICBpdGVtLnRleHRDb250ZW50ID0gaTE4bi5maWx0ZXJNZW51SXRlbTsKICAgICAgcmVmZXJlbmNlLmJlZm9yZSguLi5jb250YWluZXIuY2hpbGRyZW4pOwoKICAgICAgY29uc3QgaWNvbkNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy55YXdmLWduX3NldF9saXN0Jyk7CiAgICAgIGFkZFNjcmlwdE1lbnUoaWNvbkNvbnRhaW5lcik7CiAgICB9OwogICAgaWYgKFsnc2VhcmNoJywgJ3R0YXJ0aWNsZSddLmluY2x1ZGVzKGluaXQucGFnZS50eXBlKCkpKSByZXR1cm47CiAgICBpZiAoeWF3Zi5XRUlCT19WRVJTSU9OID09PSA3KSB7CiAgICAgIHNlYXJjaFN0eWxlLnJlbW92ZSgpOwogICAgICBpY29uU3R5bGUucmVtb3ZlKCk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGljb24oKTsgbWVudWl0ZW0oKTsKICB9KTsKCiAgaW5pdC5vbkxvYWQoKCkgPT4gewogICAgb2JzZXJ2ZXIuZG9tLmFkZChmdW5jdGlvbiBmaXhOYXZCYXJVUygpIHsKICAgICAgLy8g57uf5LiA5rW35aSW54mI5a+86Iiq5qCPCiAgICAgIGNvbnN0IG5hdlVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLldCX2dsb2JhbF9uYXZfdXMnKTsKICAgICAgaWYgKG5hdlVzKSBuYXZVcy5jbGFzc0xpc3QucmVtb3ZlKCdXQl9nbG9iYWxfbmF2X3VzJyk7CiAgICB9KTsKICB9KTsKCn0oKSk7Cgo7IChmdW5jdGlvbiAoKSB7CgogIGNvbnN0IHlhd2YgPSB3aW5kb3cueWF3ZjsKICBjb25zdCB1dGlsID0geWF3Zi51dGlsOwogIGNvbnN0IGluaXQgPSB5YXdmLmluaXQ7CiAgY29uc3QgcnVsZSA9IHlhd2YucnVsZTsKCiAgY29uc3Qgc2hvd1J1bGVEaWFsb2cgPSBmdW5jdGlvbiAodGFiID0gbnVsbCkgewogICAgdHJ5IHsKICAgICAgcnVsZS5kaWFsb2codGFiKTsKICAgIH0gY2F0Y2ggKGUpIHsgdXRpbC5kZWJ1ZygnRXJyb3Igd2hpbGUgcHJvbXB0aW5nIGRpYWxvZzogJW8nLCBlKTsgfQogIH07CgogIGluaXQub25Mb2FkKCgpID0+IHsKICAgIGlmICh5YXdmLldFSUJPX1ZFUlNJT04gIT09IDcpIHJldHVybjsKICAgIHV0aWwuaW5qZWN0KGZ1bmN0aW9uIChyb290S2V5LCBzaG93UnVsZURpYWxvZykgewogICAgICBjb25zdCB5YXdmID0gd2luZG93W3Jvb3RLZXldOwogICAgICBjb25zdCB2dWVTZXR1cCA9IHlhd2YudnVlU2V0dXA7CgogICAgICB2dWVTZXR1cC5lYWNoQ29tcG9uZW50Vk0oJ3dlaWJvLXRvcC1uYXYnLCBmdW5jdGlvbiAodm0pIHsKICAgICAgICB2bS5jb25maWdzLnNwbGljZSgtMSwgMCwgewogICAgICAgICAgZGl2aWRlcjogdHJ1ZSwKICAgICAgICAgIGhyZWY6ICcnLAogICAgICAgICAgbmFtZTogJ+iNr+aWueiuvue9ricsCiAgICAgICAgICB0eXBlOiAneWF3Zi1jb25maWcnLAogICAgICAgIH0pOwogICAgICAgIHZtLmNvbmZpZ0hhbmRsZSA9IChmdW5jdGlvbiAoY29uZmlnSGFuZGxlKSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3NbaW5kZXhdLnR5cGUgPT09ICd5YXdmLWNvbmZpZycpIHsKICAgICAgICAgICAgICB0aGlzLmNvbmZpZ0Nsb3NlID0gdHJ1ZTsKICAgICAgICAgICAgICBzaG93UnVsZURpYWxvZygpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbmZpZ0hhbmRsZS5jYWxsKHRoaXMsIGluZGV4KTsKICAgICAgICAgICAgfQogICAgICAgICAgfS5iaW5kKHZtKTsKICAgICAgICB9KHZtLmNvbmZpZ0hhbmRsZSkpOwogICAgICB9KTsKICAgIH0sIHV0aWwuaW5qZWN0LnJvb3RLZXksIHNob3dSdWxlRGlhbG9nKTsKICB9KTsKCn0oKSk7Ci8vI2VuZHJlZ2lvbgoK"},{"name":"AC-baidu-_favicon_","options":{"awareOfChrome":false,"check_for_updates":true,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["baidu.com","google.com","google.com.hk","google.com.jp","bing.com","duckduckgo.com","dogedoge.com","so.com"],"orig_excludes":["*://*.google*/sorry*","https://zhidao.baidu.com/*","https://*.zhidao.baidu.com/*"],"orig_includes":["*://ipv6.baidu.com/*","*://www.baidu.com/*","*://www1.baidu.com/*","*://m.baidu.com/*","*://xueshu.baidu.com/s*","*://www.so.com/s?*","*://*.bing.com/*","*://encrypted.google.*/search*","*://*.google*/search*","*://*.google*/webhp*","*://*.zhihu.com/*","*://*duckduckgo.com/*","*://*.dogedoge.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"Config":"s{\"isRedirectEnable\":true,\"isAdsEnable\":true,\"isAutopage\":true,\"isBlockEnable\":false,\"isBlockDisplay\":false,\"isBlockBtnDisplay\":true,\"AdsStyleEnable\":true,\"AdsStyleMode_Baidu\":\"2\",\"AdsStyleMode_Google\":\"1\",\"AdsStyleMode_Bing\":\"3\",\"AdsStyleMode_SoGou\":\"3\",\"HuYan_Baidu\":false,\"HuYan_Google\":false,\"HuYan_Bing\":false,\"HuYan_SoGou\":false,\"Style_BaiduLite\":false,\"defaultHuYanColor\":\"#def1ef\",\"isUserColorEnable\":true,\"isFaviconEnable\":true,\"defaultFaviconUrl\":\"https://ae01.alicdn.com/kf/HTB1dRY0X8OD3KVjSZFFq6An9pXay.jpg\",\"doDisableSug\":true,\"isRightDisplayEnable\":true,\"isCounterEnable\":false,\"isALineEnable\":true,\"isUserStyleEnable\":false,\"isEnLang\":false,\"isGooleInBaiduModeEnable\":false,\"UserBlockList\":[],\"UserStyleText\":\"/***/\\ndiv .AC-CounterT{\\n  background: #FD9999;\\n}\\n/**-*/\\n#content_right{\\n  padding: 20px 15px 15px;\\n  border-radius: 5px;\\n  background-color: #fff;\\n  box-sizing: border-box;\\n  box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\\n  -webkit-box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\\n  -moz-box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\\n}\\n/****,****/\\nbody[baidu]{\\n  background-repeat: repeat-y;\\n  background-size: 100%;\\n  background-attachment:fixed;\\n  background-image: url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1564756277250&di=868b9eac9be14df1dedd8c7d6a710844&imgtype=0&src=http%3A%2F%2Fphotocdn.sohu.com%2F20130530%2FImg377502333.jpg');\\n}\\n/**********/\\nbody>#wrapper,body>.wrap,body>#main,body #appbar,body #hdtbSum{\\n  background: rgba(225,225,225,0.8);\\n}\\n/**-**/\\nbody[baidu] #s_lg_img_new{\\n  display:none !important;\\n}\\n#wrapper #content_left .result, #wrapper #content_left .c-container{\\n  border-radius: 5px;\\n}\",\"oldVersion\":\"24.20\",\"lastSaveTime\":1613978602905,\"AdsStyleMode_Duck\":3,\"AdsStyleMode_Doge\":3,\"HuYan_Duck\":false,\"HuYan_Doge\":false,\"normalizeDuck\":true,\"isBlockBtnNotDisplay\":false,\"baidu\":{\"name\":\"baidu\",\"AdsStyleMode\":\"1\",\"HuYanMode\":false},\"google\":{\"name\":\"google\",\"AdsStyleMode\":\"1\",\"HuYanMode\":false},\"bing\":{\"name\":\"bing\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"duck\":{\"name\":\"duck\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"doge\":{\"name\":\"doge\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"sogou\":{\"name\":\"sogou\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"zhihu\":{\"name\":\"zhihu\",\"AdsStyleMode\":\"0\",\"HuYanMode\":false},\"other\":{\"name\":\"other\",\"AdsStyleMode\":\"0\",\"HuYanMode\":false},\"acceptLicense\":true}"},"ts":1613978602905},"enabled":true,"position":3,"file_url":"https://greasyfork.org/scripts/14178-ac-baidu-%E9%87%8D%E5%AE%9A%E5%90%91%E4%BC%98%E5%8C%96%E7%99%BE%E5%BA%A6%E6%90%9C%E7%8B%97%E8%B0%B7%E6%AD%8C%E5%BF%85%E5%BA%94%E6%90%9C%E7%B4%A2-favicon-%E5%8F%8C%E5%88%97/code/AC-baidu:%E9%87%8D%E5%AE%9A%E5%90%91%E4%BC%98%E5%8C%96%E7%99%BE%E5%BA%A6%E6%90%9C%E7%8B%97%E8%B0%B7%E6%AD%8C%E5%BF%85%E5%BA%94%E6%90%9C%E7%B4%A2_favicon_%E5%8F%8C%E5%88%97.user.js","uuid":"2a5079e6-7317-4bab-90ee-94ae8d7f7302","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgQUMtYmFpZHUt6YeN5a6a5ZCR5LyY5YyW55m+5bqm5pCc54uX6LC35q2M5b+F5bqU5pCc57SiX2Zhdmljb25f5Y+M5YiXCi8vIEBuYW1lOmVuICAgIEFDLWJhaWR1LWdvb2dsZV9zb2dvdV9iaW5nX1JlZGlyZWN0UmVtb3ZlX2Zhdmljb25fYWRhd2F5X1R3b0xpbmUKLy8gQG5hbWU6emggICAgQUMtYmFpZHUt6YeN5a6a5ZCR5LyY5YyW55m+5bqm5pCc54uX6LC35q2M5b+F5bqU5pCc57SiX2Zhdmljb25f5Y+M5YiXCi8vIEBuYW1lOmphICAgIEFDLWJhaWR1LemHjeWumuWQkeacgOmBqeWMlkJhaWR144Gu5pCc54uX44GuR29vZ2xl44GuQmluZ+aknOe0oue1kOaenOOBruODquODgOOCpOODrOOCr+ODiOmZpOWOuytmYXZpY29uCi8vIEBkZXNjcmlwdGlvbiAgMS7nuZ7pgY7nmb7luqbjgIHmkJzni5fjgIHosLfmrYzjgIHlpb3mkJzmkJzntKLntZDmnpzkuK3nmoToh6rlt7HnmoTot7PovYnpj4jmjqXvvIznm7TmjqXoqKrllY/ljp/lp4vntrLpoIEt5Y+N5q2j6YO96IO955yL5oeCIDIu5paw5aKe6Ieq5a6a5LmJ572R56uZ5oum5oiq5Yqf6IO9IDPmt7vliqBGYXZpY29u5pi+56S6IDQu6aG16Z2iQ1NTIDUu5re75Yqg6K6h5pWwIDYu5byA5YWz6YCJ5oup5Lul5LiK5Yqf6IO9IDcu6Ieq5Yqo57+76aG15Yqf6IO9Ci8vIEBkZXNjcmlwdGlvbjplbiAgMS5ieXBhc3MgdGhlIHJlZGlyZWN0IGxpbmsgYXQgYmFpZHVcc29nb3VcZ29vZ2xlXGhhb3NvdTsgMi5yZW1vdmUgYWRzIGF0IGJhaWR1OyAzLmFkZCBGYXZpY29uIGZvciBlYWNoIHdlYnNpdGU7IDQucmVuZGVyIHlvdXIgb3duIHN0eWxlOyA1LmNvdW50ZXI7IDYuU3dpdGNoIHRvIGhhbmRsZSBhbGwgNy5BdXRvIFBhZ2VyCi8vIEBkZXNjcmlwdGlvbjpqYSAgMS7ov4Llm55CYWlkdeOAgVNvZ29144CBR29vZ2xl44CBSGFvc2915qSc57Si5qSc57Si57WQ5p6c44Gu5Lit44Gu6Ieq5YiG44Gu6YG356e744Oq44Oz44KvOyAyLkJhaWR144Gu5L2Z5YiG44Gq5bqD5ZGK44KS5Y+W44KK6Zmk44GPOyAzLuOCs+ODoeODs+ODiOOCkui/veWKoDsgNC7jg5rjg7zjgrjjga7jgqvjgrnjgr/jg6BDU1A7IDUu44Kr44Km44Oz44OI44KS6L+95YqgOyA2LuOCueOCpOODg+ODgeOBr+S7peS4iuOBruapn+iDveOCkumBuOaKnuOBl+OBvuOBmTsgNy7oh6rli5Xjg5rjg7zjgrjjgoHjgY/jgoouCi8vIEBpY29uICAgIGh0dHBzOi8vYWUwMS5hbGljZG4uY29tL2tmL0hhYzFhNTgwNTVjNTA0N2NkYjkxMzQ5ZTkxYWEyMDhkNWsuanBnCi8vIEBhdXRob3IgICAgQUMKLy8gQGxpY2Vuc2UgICAgR1BMLTMuMC1vbmx5Ci8vIEBjcmVhdGUgICAgIDIwMTUtMTEtMjUKLy8gQHJ1bi1hdCAgICAgZG9jdW1lbnQtc3RhcnQKLy8gQHZlcnNpb24gICAgMjQuMjAKLy8gQGNvbm5lY3QgICAgYmFpZHUuY29tCi8vIEBjb25uZWN0ICAgIGdvb2dsZS5jb20KLy8gQGNvbm5lY3QgICAgZ29vZ2xlLmNvbS5oawovLyBAY29ubmVjdCAgICBnb29nbGUuY29tLmpwCi8vIEBjb25uZWN0ICAgIGJpbmcuY29tCi8vIEBjb25uZWN0ICAgIGR1Y2tkdWNrZ28uY29tCi8vIEBjb25uZWN0ICAgIGRvZ2Vkb2dlLmNvbQovLyBAY29ubmVjdCAgICBzby5jb20KLy8gQGluY2x1ZGUgICAgKjovL2lwdjYuYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgKjovL3d3dy5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICAqOi8vd3d3MS5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICAqOi8vbS5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICAqOi8veHVlc2h1LmJhaWR1LmNvbS9zKgovLyBAaW5jbHVkZSAgICAqOi8vd3d3LnNvLmNvbS9zPyoKLy8gQGluY2x1ZGUgICAgKjovLyouYmluZy5jb20vKgovLyBAaW5jbHVkZSAgICAqOi8vZW5jcnlwdGVkLmdvb2dsZS4qL3NlYXJjaCoKLy8gQGluY2x1ZGUgICAgKjovLyouZ29vZ2xlKi9zZWFyY2gqCi8vIEBpbmNsdWRlICAgICo6Ly8qLmdvb2dsZSovd2ViaHAqCi8vIEBpbmNsdWRlICAgICo6Ly8qLnpoaWh1LmNvbS8qCi8vIEBpbmNsdWRlICAgICo6Ly8qZHVja2R1Y2tnby5jb20vKgovLyBAaW5jbHVkZSAgICAqOi8vKi5kb2dlZG9nZS5jb20vKgovLyBAZXhjbHVkZSAgICAqOi8vKi5nb29nbGUqL3NvcnJ5KgovLyBAZXhjbHVkZSAgICBodHRwczovL3poaWRhby5iYWlkdS5jb20vKgovLyBAZXhjbHVkZSAgICBodHRwczovLyouemhpZGFvLmJhaWR1LmNvbS8qCi8vIEBzdXBwb3J0VVJMICBodHRwczovL2FjLnR1amlkdS5jb20vCi8vIEBob21lLXVybCAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtVFcvc2NyaXB0cy8xNDE3OAovLyBAaG9tZS11cmwyICBodHRwczovL2dpdGh1Yi5jb20vbGFuZ3JlbjEzNTMvR01fc2NyaXB0Ci8vIEBob21lcGFnZVVSTCAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1UVy9zY3JpcHRzLzE0MTc4Ci8vIEBjb3B5cmlnaHQgIDIwMTUtMjAyMCwgQUMKLy8gQGxhc3Rtb2RpZmllZCAgMjAyMS0wMi0xMAovLyBAZmVlZGJhY2stdXJsICBodHRwczovL2dpdGh1Yi5jb20vbGFuZ3JlbjEzNTMvR01fc2NyaXB0Ci8vIEBub3RlICAgIDIwMjEuMDItMTAtVjI0LjIwIOS/ruWkjeiwt+atjOmDqOWIhuWkseaViOeahOmXrumimCAmJiDkv67lpI3nlLHkuo5CQeWkseaViOWvvOiHtOeahOiEmuacrOaXoOaViOeahOmXrumimAovLyBAbm90ZSAgICAyMDIxLjAyLTAyLVYyNC4xOSDmlbDmja7mnKzlnLDnvJPlrZjvvIzkuIDlrprnqIvluqbkuIrkv53or4Hph43oo4XlkI7mlbDmja7kuI3kuKLlpLEgJiYg5L+u5aSN6LC35q2M6YOo5YiG5YaF5a655aSx5pWI55qE6Zeu6aKYCi8vIEBub3RlICAgIDIwMjAuMTItMjktVjI0LjE4IOiwg+aVtOS+p+i+ueagj+WKn+iDveaViOaenO+8jOS8mOWMluWPjOWIl+aYvuekuuaViOaenO+8jOWkhOeQhmR1Y2tkdWNr55qE5qC35byPCi8vIEBub3RlICAgIDIwMjAuMTItMjktVjI0LjE3IOiwg+aVtOiwt+atjOOAgeeZvuW6puWPjOWIl+aYvuekuuaViOaenC3lkITkuKrliIbovqjnjofvvJvkv67lpI3nmb7luqbpg6jliIbngrnlh7vlpLHmlYjnmoTpl67popjvvJsKLy8gQG5vdGUgICAgMjAyMC4xMi0yMi1WMjQuMTYg6LCD5pW05Luj56CBLeWHj+WwkeiHtOWRveW8guW4uO+8m+S/ruWkjeiwt+atjOWPjOWIl+mXrumimAovLyBAbm90ZSAgICAyMDIwLjEyLTE5LVYyNC4xNCDkv67lpI3pg6jliIblhoXmoLjkuIrnmb7luqblpJrliJfmmL7npLrnmoTpl67popjvvJvkv67lpI3osLfmrYzlpJrliJfnmoTmmL7npLrpl67popgKLy8gQG5vdGUgICAgMjAyMC4xMi0xOC1WMjQuMTMg5L+u5aSNZmF2aWNvbuWcqOefpeS5juS4iueahOaOkueJiOmXrumimO+8m+S/ruWkjUR1Y2vmoLflvI/ml6DmlYjnmoTpl67popjvvJvkv67lpI3mnIDmlrDosLfmrYzlj4zliJflpLHmlYjnmoTpl67popggLSDlsJ3or5Xkv67lpI3pg6jliIbnlKjmiLfnv7vpobXlpLHmlYjpl67popjvvJvkv67lpI3orqHmlbDlmajnvJblj7flvILluLjnmoTpl67popjvvJvmm7TlkI3lsJ3or5Xkv67lpI3lrp7mlYjpl67popgKLy8gQG5vdGUgICAgMjAyMC4xMC0xOS1WMjQuMTIg5oum5oiq5pe25pSv5oyBVVJM5Zyw5Z2A55qE5Yy56YWN77yM6LCD5pW0ZmF2aWNvbuS8muW9seWTjeagh+mimOaWh+Wtl+mAieS4reeahOmXrumimO+8m+S/ruWkjeiwt+atjOaLpuaIquaooeW8j+WkseaViOeahOmXrumimO+8jOS/ruWkjeiwt+atjOe8luWPt+mXrumimO+8m+S/ruWkjeW/heW6lOWbvueJh+WBj+WPs+eahOmXrumimAovLyBAbm90ZSAgICAyMDIwLjA5LTI5LVYyNC4xMSDpkojlr7nnmb7luqblvovluIjlh73lhoXlrrnlr7nohJrmnKzov5vooYzosIPmlbTvvIzmianlsZXigJznmb7luqbkvJjljJbigJ3lt7Lnu4/msLjkuYXkuIvnur8KLy8gQG5vdGUgICAgMjAyMC4wOS0yNy1WMjQuMTAg5L+u5aSN55m+5bqm5oum5oiq5qih5byP55qE6Zeu6aKY5Lul5Y+K5bCP5Zyw5Z2A5bC+5rOo77yb5L+u5aSN5aW95pCc55qE5oum5oiq5Yqf6IO977yb5L+u5aSN6YOo5YiG5qC35byP6Zeu6aKYCi8vIEBub3RlICAgIDIwMjAuMDktMTItVjI0LjA5IOS/ruWkjee/u+mhteWkseaViOeahOmXrumimO+8m+abtOaWsOmDqOWIhuagt+W8j+WGheWuuQovLyBAbm90ZSAgICAyMDIwLjA5LTExLVYyNC4wOCDmm7TmjaJWdWXnmoRjZG7lnLDlnYDvvIzlsL3ph4/liqDlv6vmlbDmja7nmoTovb3lhaXpgJ/luqbvvJvkuLrkuoblhbzlrrlzYWZhcmnlsIbnmb7luqbnmoRodHRwc+WcsOWdgOabv+aNouS4uuS6hmh0dHDlnLDlnYDvvJvkv67lpI1mYXZpY29u6I635Y+W55qE6Zeu6aKY77yb5aKe5YqgZmF2aWNvbuWKqOaAgeWIt+aWsO+8m+S/ruWkjemDqOWIhuagt+W8j+mXrumimAovLyBAbm90ZSAgICAyMDIwLjA4LTA2LVYyNC4wNyDkv67lpI3kv53lrZjml6DmlYjnmoTpl67popjvvJvkv67lpI3nmb7luqblnKjljZXliJflsYXkuK3nmoTml7blgJnplJnkvY3nmoTpl67popgKLy8gQG5vdGUgICAgMjAyMC4wOC0wNS1WMjQuMDYg5L+u5aSN6Ieq5a6a5LmJ5YG25bCU5omT5LiN5byA55qE6Zeu6aKY77yb5L+u5aSN5a6a5pe25Zmo5Y+v6IO95Lya6YCg5oiQ55qE5aSx5pWI55qE6Zeu6aKY77yb5L+u5aSN5b2T5a2Y5Zyo5aSa5Liq6ISa5pys5Y+v6IO96YCg5oiQ55qE5Yay56qB6Zeu6aKYCi8vIEBub3RlICAgIDIwMjAuMDgtMDMtVjI0LjA1IOabtOaWsOS/ruWkjeaKpOecvOaooeW8j+eahOmXrumimO+8m+S/ruWkjeaJqeWxleS4iuWBtuWwlOWkseaViOeahOmXrumimO+8m+aXp0VkZ2XkvLzkuY7nu4/luLjmnInkv53lrZjkuI3nlJ/mlYjnmoTpl67popjvvIzmtYvor5XkuI3mmK/miJHnmoTljp/lm6AKLy8gQG5vdGUgICAgMjAyMC4wOC0wMi1WMjQuMDQg5Yqo5oCB5qC35byP5YiH5o2i77yM5aSa5YiX5pWI5p6c5LiA6ZSu5YiH5o2i77yM5peg6ZyA5Yi35pawIOS/ruWkjeWQhOenjeagt+W8j+mXrumimCDkv67lpI3lv4XlupTnv7vpobXpl67popgg5rWL6K+V5YW85a65R03lkoxWTS7lvbvlupXkuI3mlK/mjIHmkJzni5fmkJzntKItLeWIq+mXruS4uuS7gOS5iO+8jOaIkei/mOaDs+Wkmua0u+WHoOW5tAovLyBAbm90ZSAgICAyMDIwLjA3LTI3LVYyNC4yJjMg5pu05o2iVnVl5Li6NzXlm6LnmoTlnLDlnYAg5L+u5aSN55m+5bqm55qEbGl0ZeaooeW8j+WIh+aNouaXoOaViOeahOmXrumimAovLyBAbm90ZSAgICAyMDIwLjA3LTI3LVYyNC4wMSDmm7TmlrDmlK/mjIFMaW51eOS4i+eahEZpcmVmb3ggZW1t5L+u5aSN5LiK5qyh5o+Q5Lqk6L+H5LqO552A5oCl5a+86Ie055qE5qC35byP5pyq5o+Q5LqkIOabtOaWsOaUr+aMgURvZ2VEb2dl5aSa5ZCJ5pCc57SiLeS9huS4jeWkhOeQhumHjeWumuWQkQovLyBAbm90ZSAgICAyMDIwLjA3LTI2LVYyNC4wMCDpg6jliIblhoXlrrnmm7TmjaLkuLpWdWXliJ3lp4vljJbvvIzlh4/lsJHkuIDlrprnmoTotYTmupDljaDnlKggJiYg5paw5aKeRHVja0dvR2/nmoTmoLflvI/mlYjmnpwgLSDogIPomZHliLBEdWNrR29Hb+eahOeJueaAp++8jOS4jeWvueWFtui/m+ihjOW5v+WRiui/h+a7pAovLyBAbm90ZSAgICAyMDIwLjA3LTA5LVYyMy4zMyDkv67lpI1iaW5n55qE6aG26YOo5YiH5o2i6ZSZ5L2N55qE6Zeu6aKY77yb5aKe5Yqgd3cxLmJhaWR1LmNvbeWfn++8m+S/ruWkjeWQhOenjeagt+W8jyjnmb7luqbjgIHosLfmrYzjgIHlpb3mkJzjgIHlv4XlupQp6ZSZ5L2N55qE6Zeu6aKYCi8vIEBub3RlICAgIDIwMjAuMDQtMjQtVjIzLjMyIOeJiOacrOWAkumAgO+8muWuieWFqOi1t+inge+8mum7mOiupOWFs+mXreaQnOeLl+eahOiHquWumuS5ieWfn+WQjeaLpuaIquWKn+iDveWSjOmHjeWumuWQkeWKn+iDvS3ku6XlkI7ogIPomZHmm7TmjaLmlrnlvI/vvJvpu5jorqTkuI3lvIDlkK/ph43lrprlkJHlip/og73jgIHpu5jorqTkuI3lvIDlkK/lub/lkYrmi6bmiKrlip/og73vvJvmm7TmlrDpg6jliIbor7TmmI7lhoXlrrnvvJvlkIzml7bkuZ/lr7npg6jliIbmlK/mjIHkuI3liLDkvY3nmoTvvIzlhbzlrrnkuI3lpb3nmoTmlYjmnpzlkJHlpKflrrbor7TkuIDlo7DmirHmrYnvvIzkuYvlkI7miJHkvJrmm7TliqDliqrlipvorqnmkJzntKLnu5Pmnpzmm7TliqDmlrnkvr/mn6XnnIvlkozkvb/nlKgKLy8gQG5vdGUgICAgMjAyMC4wMy0yNy1WMjMuMzEg5L+u5aSNZ29vZ2xl55Sx5LqO6aG16Z2i57uT5p6E5pu05paw5a+86Ie055qEYmxvY2vlip/og73lpLHmlYjnmoTpl67popjvvIzlkIzml7bkv67lpI3osLfmrYzmiqTnnLzmqKHlvI/kuZ/lpLHmlYjnmoTpl67popjjgILmlrDlop7nv7vpobXnmoTmjInpkq7kuovku7bvvIzmlrDlop7kvb/nlKjlnKjnur9jb25maWfvvIzpgb/lhY3nlLHkuo7pobXpnaLnu5PmnoTmlLnliqjlj4jpnIDopoHph43mlrDmj5DkuqTohJrmnKzmm7TmlrAKLy8gQG5vdGUgICAgMjAxNy4wNS4xMiAtPiAyMDIwLjAzLTI2ICYmIFY4LjYgLT4gVjIzLjMwIOWQhOenjeWQhOagt+eahOWOhuWPsuabtOaWsOiusOW9le+8jOS7juS4gOS4queJiOacrOi/reS7o+WIsOWPpuS4gOS4queJiOacrAovLyBAbm90ZSAgICAyMDE3LjA1LjEyLVY4LjQg5paw5aKe77ya6buY6K6k5bGP6JS96LC35q2M55qE5a6J5YWo5pCc57Si5Yqf6IO9Ci8vIEBub3RlICAgIDIwMTcuMDUuMDUtVjguMyDkv67lpI1pbmNsdWRl6IyD5Zu05aSq5bCP5a+86Ie055qE55m+5bqm55+l6YGT55qE5bGP6JS96Zeu6aKYCi8vIEBub3RlICAgIDIwMTcuMDUuMDQtVjguMiDnu4jkuo7kv67lpI3kuobnmb7luqbnn6XpgZPlm77niYfmm7/mjaLkuobmloflrZfnmoTov5nkuKrlpKdCVUc7IOmhuuS+v+WkhOeQhuS6hnN1cGVyYXBpLnpoaWRhby5iYWlkdS5jb207IOaWsOWinuiwt+atjOaQnOe0oue7k+aenOmHjeWumuWQkeWOu+mZpAovLyBAbm90ZSAgICAyMDE3LjA1LjA0LVY4LjEg57uI5LqO5L+u5aSN5LqG55m+5bqm55+l6YGT5Zu+54mH5pu/5o2i5LqG5paH5a2X55qE6L+Z5Liq5aSnQlVH77yM6aG65L6/5aSE55CG5LqGc3VwZXJhcGkuemhpZGFvLmJhaWR1LmNvbQovLyBAbm90ZSAgICAyMDE3LjA1LjA0LVY4LjAg57uI5LqO5L+u5aSN5LqG55m+5bqm55+l6YGT5Zu+54mH5pu/5o2i5LqG5paH5a2X55qE6L+Z5Liq5aSnQlVH77yM5b6F5rWL6K+VCi8vIEBub3RlICAgIDIwMTcuMDMuMjgtVjcuNiDkv67lpI3lnKhWaW9sZW50TW9ua2V55LiK55qE5LiN5pSv5oyB55qE6Zeu6aKYCi8vIEBub3RlICAgIDIwMTcuMDMuMjgtVjcuNSDlsJ3or5Xkv67lpI1jaHJvbWXkuIrnmoTpl67popgKLy8gQG5vdGUgICAgMjAxNy4wMy4yMS1WNy40IOWwneivleWkhOeQhkVkZ2XkuIrkuI3mlK/mjIHnmoTpl67popjvvIznu5Pmnpzlj5HnjrDmmK9FZGdl5pys6Lqr55qEVGFtcGVyTW9ua2V55pSv5oyB5pyJ6Zeu6aKYCi8vIEBub3RlICAgIDIwMTcuMDMuMTktVjcuMyDkv67lpI3miZPlvIDnmb7luqbkuYvlkI7lho3mrKHngrnlh7vigJznmb7luqbkuIDkuIvigJ3lr7zoh7TnmoTml6Dms5Xmm7TmlrDph43lrprlkJHpl67popgKLy8gQG5vdGUgICAgMjAxNy4wMy4xOS1WNy4yIOacquefpeWOn+WboGNocm9tZeeahE11dGF0aW9uT2JzZXJ2ZXLml6Dms5Xkvb/nlKjkuobvvIznu6fnu63lm57lvZLku6XliY3nmoRET01Ob2RlSW5zZXJ0ZWQKLy8gQG5vdGUgICAgMjAxNy4wMi4xNy1WNy4wIOS/ruWkjeaQnOeLl+eahOaQnOe0oue7k+aenOmHjeWumuWQkemXrumimCvmlLnkuKrlkI3lrZcKLy8gQG5vdGUgICAgMjAxNy4wMi4xNy1WNi45IOS/ruWkjeaQnOeLl+eahOaQnOe0oue7k+aenOmHjeWumuWQkemXrumimAovLyBAbm90ZSAgICAyMDE2LjEwLjI3LVY2Ljcg5L+u5aSN5LqG5Lul5YmN55qE6YeN5aSN6K+35rGC77yM546w5Zyo55qE6K+35rGC5pWw5bqU6K+l5bCP5LqG5b6I5aSa77yM572R57uc5Lmf5bCx5LiN5Y2h5LqG77yM5oSf6KeJ6JCM6JCM5ZOSCi8vIEBub3RlICAgIDIwMTYuMDQuMjQtVjYuNiDmgaLlpI3ku6XliY3nmoTniYjmnKzvvIzlm6DkuLrlhbzlrrnmgKfpl67popgKLy8gQG5vdGUgICAgMjAxNS4xMi4wMS1WNS4wIOWKoOWFpeaQnOeLl+eahOaUr+aMge+8jOS9huaYr+aUr+aMgeS4jeaYr+W+iOWlvQovLyBAbm90ZSAgICAyMDE1LjExLjI1LVYyLjAg5LyY5YyW77yM5bey57uP5piv55yf5a6e5Zyw5Z2A55qE5LiN5YaN5bCd6K+V6I635Y+WCi8vIEBub3RlICAgIDIwMTUuMTEuMjUtVjEuMCDlrozmiJDljrvmjonnmb7luqbph43lrprlkJHnmoTlip/og70KLy8gQHJlc291cmNlICBiYWlkdUNvbW1vblN0eWxlICAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9iYWlkdUNvbW1vblN0eWxlLmNzcz90PTI0LjE5Ci8vIEByZXNvdXJjZSAgYmFpZHVPbmVQYWdlU3R5bGUgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvYmFpZHVPbmVQYWdlU3R5bGUuY3NzP3Q9MjQuMTkKLy8gQHJlc291cmNlICBiYWlkdVR3b1BhZ2VTdHlsZSAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9iYWlkdVR3b1BhZ2VTdHlsZS5jc3M/dD0yNC4xOQovLyBAcmVzb3VyY2UgIGJhaWR1TGl0ZVN0eWxlICAgICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2JhaWR1TGl0ZVN0eWxlLmNzcz90PTI0LjE5Ci8vIEByZXNvdXJjZSAgZ29vZ2xlQ29tbW9uU3R5bGUgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvZ29vZ2xlQ29tbW9uU3R5bGUuY3NzP3Q9MjQuMTkKLy8gQHJlc291cmNlICBnb29nbGVPbmVQYWdlU3R5bGUgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9nb29nbGVPbmVQYWdlU3R5bGUuY3NzP3Q9MjQuMTkKLy8gQHJlc291cmNlICBnb29nbGVUd29QYWdlU3R5bGUgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9nb29nbGVUd29QYWdlU3R5bGUuY3NzP3Q9MjQuMTkKLy8gQHJlc291cmNlICBiaW5nQ29tbW9uU3R5bGUgICAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9iaW5nQ29tbW9uU3R5bGUuY3NzP3Q9MjQuMTkKLy8gQHJlc291cmNlICBiaW5nT25lUGFnZVN0eWxlICAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9iaW5nT25lUGFnZVN0eWxlLmNzcz90PTI0LjE5Ci8vIEByZXNvdXJjZSAgYmluZ1R3b1BhZ2VTdHlsZSAgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvYmluZ1R3b1BhZ2VTdHlsZS5jc3M/dD0yNC4xOQovLyBAcmVzb3VyY2UgIGR1Y2tDb21tb25TdHlsZSAgICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2R1Y2tDb21tb25TdHlsZS5jc3M/dD0yNC4xOQovLyBAcmVzb3VyY2UgIGR1Y2tPbmVQYWdlU3R5bGUgICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2R1Y2tPbmVQYWdlU3R5bGUuY3NzP3Q9MjQuMTkKLy8gQHJlc291cmNlICBkdWNrVHdvUGFnZVN0eWxlICAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9kdWNrVHdvUGFnZVN0eWxlLmNzcz90PTI0LjE5Ci8vIEByZXNvdXJjZSAgZG9nZUNvbW1vblN0eWxlICAgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvZG9nZUNvbW1vblN0eWxlLmNzcz90PTI0LjE5Ci8vIEByZXNvdXJjZSAgZG9nZU9uZVBhZ2VTdHlsZSAgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvZG9nZU9uZVBhZ2VTdHlsZS5jc3M/dD0yNC4xOQovLyBAcmVzb3VyY2UgIGRvZ2VUd29QYWdlU3R5bGUgICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2RvZ2VUd29QYWdlU3R5bGUuY3NzP3Q9MjQuMTkKLy8gQHJlc291cmNlICBNYWluSHVZYW5TdHlsZSAgICAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9IdVlhblN0eWxlLmNzcz90PTI0LjE5Ci8vIEByZXNvdXJjZSAgU2l0ZUNvbmZpZ1J1bGVzICAgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvU2l0ZUNvbmZpZ1J1bGVzLmNvbmY/dD0yNC4xOQovLyBAcmVxdWlyZSBodHRwczovL2Nkbi5zdGF0aWNmaWxlLm9yZy92dWUvMi42LjExL3Z1ZS5taW4uanMKLy8gQHJlcXVpcmUgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS92dWVAMi42LjEyL2Rpc3QvdnVlLm1pbi5qcwovLyBAZ3JhbnQgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgIEdNLmdldFZhbHVlCi8vIEBncmFudCAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgR00uc2V0VmFsdWUKLy8gQGdyYW50ICAgIEdNX2FkZFN0eWxlCi8vIEBncmFudCAgICBHTV9nZXRSZXNvdXJjZVVSTAovLyBAZ3JhbnQgICAgR01fbGlzdFZhbHVlcwovLyBAZ3JhbnQgICAgR01fZ2V0UmVzb3VyY2VVcmwKLy8gQGdyYW50ICAgIEdNLmdldFJlc291cmNlVXJsCi8vIEBncmFudCAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgR01fZ2V0UmVzb3VyY2VUZXh0Ci8vIEBncmFudCAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kCi8vIEBncmFudCAgICB1bnNhZmVXaW5kb3cKLy8gQG5hbWVzcGFjZSAxMzUzNDY0NTM5QHFxLmNvbQovLyA9PS9Vc2VyU2NyaXB0PT0KLy8gY2FsYyhYMSh2dykgKyBYMihweCkpIC0+IEIocHgpIOS9v+eUqCBodHRwOi8vd3d3Lnl1bnN1YW4uaW5mby9tYXRyaXhjb21wdXRhdGlvbnMvc29sdmVsaW5lYXJzeXN0ZW1zLmh0bWwg6L+b6KGM6K6h566XCiFmdW5jdGlvbiAoKSB7CiAgbGV0IGlzZGVidWcgPSBmYWxzZTsKICBsZXQgaXNMb2NhbERlYnVnID0gaXNkZWJ1ZyB8fCBmYWxzZTsKICBsZXQgZGVidWcgPSBpc2RlYnVnID8gY29uc29sZS5sb2cuYmluZChjb25zb2xlKSA6ICgpPT57fQogIGxldCBhY0Nzc0xvYWRGbGFnID0gZmFsc2U7CgogIGxldCBpbkV4dE1vZGUgPSB0eXBlb2YgKGlzRXh0ZW5zaW9uKSAhPT0gInVuZGVmaW5lZCI7CiAgbGV0IGluR01Nb2RlID0gdHlwZW9mIChHTV9pbmZvLnNjcmlwdEhhbmRsZXIpICE9PSAidW5kZWZpbmVkIjsgLy8gPSAiR3JlYXNlbW9ua2V5IiB8fCAiVGFtcGVybW9ua2V5IiB8fCAiVmlvbGVudE1vbmtleSIKICAvLyDmlrDniYjmnKznmoRHcmVhc2VNb25rZXnmmK/luKbmnIlzY3JpcHRIYW5kbGVy77yM5L2G5piv5rKh5pyJR01fZ2V0UmVzb3VyY2VUZXh077yb5pen54mI5pys5LiN5bimc2NyaXB0SGFuZGxlcu+8jOS9huaYr+aciUdNX2dldFJlc291cmNlVGV4dAogIC8vIGxldCBpc05ld0dNID0gdHlwZW9mKEdNX2luZm8uc2NyaXB0SGFuZGxlcikgIT09ICJ1bmRlZmluZWQiICYmIEdNX2luZm8uc2NyaXB0SGFuZGxlci50b0xvd2VyQ2FzZSgpID09PSAiZ3JlYXNlbW9ua2V5IjsKICBsZXQgaXNOZXdHTSA9IGZhbHNlOwogIC8vIGluRXh0TW9kZSAmIGluR01Nb2RlCiAgLy8gdHJ1ZSAgICB0cnVlID3mianlsZXkuIvnmoRHTeS7o+eggSDkuI3miafooYwKICAvLyB0cnVlICAgIGZhbHNlPeaJqeWxleS4i+S7o+eggSDmiafooYwKICAvLyBmYWxzZSAgdHJ1ZSA95LuFR03ku6PnoIEg5omn6KGMCiAgLy8gZmFsc2UgIGZhbHNlPeW8guW4uCDkvYbmmK/ov5jmmK/opoHmiafooYzku6PnoIEKICBkZWJ1Zygi56iL5bqP5byA5aeLIik7CiAgaWYgKGluRXh0TW9kZSA9PT0gdHJ1ZSAmJiBpbkdNTW9kZSA9PT0gdHJ1ZSB8fCB0eXBlb2Yod2luZG93LkFDNjY2SW5pdCkgIT09ICd1bmRlZmluZWQnKSB7CiAgICBjb25zb2xlLmxvZygi5omp5bGV5qih5byPLeiEmuacrOS4jeWQr+eUqCIpOwogICAgcmV0dXJuOwogIH0KICB3aW5kb3cuQUM2NjZJbml0ID0gdHJ1ZQogIGlmICh0eXBlb2YgKEdNKSA9PT0gInVuZGVmaW5lZCIpIHsKICAgIC8vIOi/meS4quaYr1Zpb2xlbnRNb25rZXnnmoTmlK/mjIHpgInpobkKICAgIEdNID0ge307CiAgICBHTS5zZXRWYWx1ZSA9IEdNX3NldFZhbHVlOwogICAgR00uZ2V0VmFsdWUgPSBHTV9nZXRWYWx1ZTsKICB9CiAgKGZ1bmN0aW9uICgpIHsKICAgIGRlYnVnKCLnqIvluo/miafooYwiKTsKICAgIGxldCBuZWVkRGlzcGxheU5ld0Z1biA9IHRydWU7IC8vIOacrOasoeabtOaWsOaYr+WQpuacieaWsOWKn+iDvemcgOimgeWxleekugogICAgaWYgKHdpbmRvdy5Ob2RlTGlzdCAmJiAhTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2gpIHsKICAgICAgTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHRoaXNBcmcpIHsKICAgICAgICB0aGlzQXJnID0gdGhpc0FyZyB8fCB3aW5kb3c7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXNbaV0sIGksIHRoaXMpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KICAgIC8vIGxldCBSZWRpcmVjdE1hcCA9IG5ldyBNYXAoKTsKICAgIGxldCBBQ0NvbmZpZyA9IHt9OwogICAgbGV0IERCQ29uZmlnID0ge307IC8vIOS7heS9nOS4uuaZrumAmkFDQ29uZmln55qE5Y6f5aeL5aSH5Lu977yM5Zyo5YW25LuW6Z2e5YWz6ZSu5L2N572u5pe26L+b6KGM5L+d5a2Y5L2/55SoCiAgICAvKuWtmOWcqOWvueacquWIneWni+WMluWPmOmHj+eahOWIneWni+WMlui1i+WAvC3ml6DpnIDmi4Xlv4Pov63ku6Plhbzlrrnpl67popgqLwogICAgbGV0IERlZmF1bHRDb25maWcgPSB7CiAgICAgIGlzUmVkaXJlY3RFbmFibGU6IGZhbHNlLCAgLy8g5piv5ZCm5byA5ZCv6YeN5a6a5ZCR5Yqf6IO9CiAgICAgIGlzQWRzRW5hYmxlOiBmYWxzZSwgLy8g5piv5ZCm5byA5ZCv5Y675bm/5ZGK5qih5byPCiAgICAgIGlzQXV0b3BhZ2U6IHRydWUsICAvLyDmmK/lkKblvIDlkK/oh6rliqjnv7vpobXlip/og70KICAgICAgaXNCbG9ja0VuYWJsZTogZmFsc2UsIC8vIOaYr+WQpuW8gOWQr+WOu+aLpuaIquaooeW8jwogICAgICBpc0Jsb2NrRGlzcGxheTogZmFsc2UsIC8vIOaYr+WQpuWIoOmZpOW3suaLpuaIqueahOadoeebrgogICAgICBpc0Jsb2NrQnRuTm90RGlzcGxheTogZmFsc2UsIC8vIOaYr+WQpuaYvuekumJsb2Nr5oyJ6ZKuCiAgICAgIEFkc1N0eWxlRW5hYmxlOiB0cnVlLCAvLyDmmK/lkKblvIDlkK/oh6rlrprkuYnmoLflvI/mqKHlvI8KCiAgICAgIGJhaWR1OiB7CiAgICAgICAgbmFtZTogJ2JhaWR1JywgIC8vIENTUyBsb2FkIOeahOWJjee8gOagh+W/lwogICAgICAgIEFkc1N0eWxlTW9kZTogJzEnLCAvLyAwLeS4jeW4pmNzc++8mzEt5Y2V5YiX6Z2g5bem77ybMi3ljZXliJflsYXkuK3vvJszLeWPjOWIl+WxheS4rQogICAgICAgIEh1WWFuTW9kZTogZmFsc2UsIC8vIOaKpOecvOaooeW8jy3nmb7luqYKICAgICAgfSwKICAgICAgZ29vZ2xlOiB7CiAgICAgICAgbmFtZTogJ2dvb2dsZScsCiAgICAgICAgQWRzU3R5bGVNb2RlOiAnMycsIC8vIDAt5LiN5bimY3Nz77ybMS3ljZXliJfpnaDlt6bvvJsyLeWNleWIl+WxheS4re+8mzMt5Y+M5YiX5bGF5LitCiAgICAgICAgSHVZYW5Nb2RlOiBmYWxzZSwgLy8g5oqk55y85qih5byPLeiwt+atjAogICAgICB9LAogICAgICBiaW5nOiB7CiAgICAgICAgbmFtZTogJ2JpbmcnLAogICAgICAgIEFkc1N0eWxlTW9kZTogJzMnLCAvLyAwLeS4jeW4pmNzc++8mzEt5Y2V5YiX6Z2g5bem77ybMi3ljZXliJflsYXkuK3vvJszLeWPjOWIl+WxheS4rQogICAgICAgIEh1WWFuTW9kZTogZmFsc2UsIC8vIOaKpOecvOaooeW8jy3lv4XlupQKICAgICAgfSwKICAgICAgZHVjazogewogICAgICAgIG5hbWU6ICdkdWNrJywKICAgICAgICBBZHNTdHlsZU1vZGU6ICczJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8tRHVja0dPR08KICAgICAgfSwKICAgICAgZG9nZTogewogICAgICAgIG5hbWU6ICdkb2dlJywKICAgICAgICBBZHNTdHlsZU1vZGU6ICczJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8tRHVja0dPR08KICAgICAgfSwKICAgICAgc29nb3U6IHsKICAgICAgICBuYW1lOiAnc29nb3UnLAogICAgICAgIEFkc1N0eWxlTW9kZTogJzEnLCAvLyAwLeS4jeW4pmNzc++8mzEt5Y2V5YiX6Z2g5bem77ybMi3ljZXliJflsYXkuK3vvJszLeWPjOWIl+WxheS4rQogICAgICAgIEh1WWFuTW9kZTogZmFsc2UsIC8vIOaKpOecvOaooeW8jy3mkJzni5cKICAgICAgfSwKICAgICAgemhpaHU6IHsKICAgICAgICBuYW1lOiAnemhpaHUnLAogICAgICAgIEFkc1N0eWxlTW9kZTogJzAnLCAvLyAwLeS4jeW4pmNzc++8mzEt5Y2V5YiX6Z2g5bem77ybMi3ljZXliJflsYXkuK3vvJszLeWPjOWIl+WxheS4rQogICAgICAgIEh1WWFuTW9kZTogZmFsc2UsIC8vIOaKpOecvOaooeW8jy3mkJzni5cKICAgICAgfSwKICAgICAgb3RoZXI6IHsKICAgICAgICBuYW1lOiAnb3RoZXInLAogICAgICAgIEFkc1N0eWxlTW9kZTogJzAnLCAvLyAwLeS4jeW4pmNzc++8mzEt5Y2V5YiX6Z2g5bem77ybMi3ljZXliJflsYXkuK3vvJszLeWPjOWIl+WxheS4rQogICAgICAgIEh1WWFuTW9kZTogZmFsc2UsIC8vIOaKpOecvOaooeW8jy3mkJzni5cKICAgICAgfSwKCiAgICAgIFN0eWxlX0JhaWR1TGl0ZTogZmFsc2UsIC8vIEJhaWR1X0xpdGXmoLflvI/ooagKCiAgICAgIGRlZmF1bHRIdVlhbkNvbG9yOiAiI0RFRjFFRiIsCiAgICAgIGlzVXNlckNvbG9yRW5hYmxlOiB0cnVlLCAvLyDmmK/lkKblvIDlkK9mYXZpY29u5Zu+5qCH5Yqf6IO9CiAgICAgIGlzRmF2aWNvbkVuYWJsZTogdHJ1ZSwgLy8g5piv5ZCm5byA5ZCvZmF2aWNvbuWbvuagh+WKn+iDvQogICAgICBkZWZhdWx0RmF2aWNvblVybDogImh0dHBzOi8vYWUwMS5hbGljZG4uY29tL2tmL0hUQjFkUlkwWDhPRDNLVmpTWkZGcTZBbjlwWGF5LmpwZyIsIC8vIOm7mOiupOWbvuagh+WcsOWdgAogICAgICBkb0Rpc2FibGVTdWc6IHRydWUsIC8vIOaYr+WQpuemgeatoueZvuW6puaQnOe0oumihOa1iwogICAgICBpc1JpZ2h0RGlzcGxheUVuYWJsZTogdHJ1ZSwgLy8g5piv5ZCm5byA5ZCv5Y+z5L6n6L655qCPCiAgICAgIGlzQ291bnRlckVuYWJsZTogZmFsc2UsIC8vIOaYr+WQpuaYvuekuuiuoeaVsOWZqAogICAgICBpc0FMaW5lRW5hYmxlOiBmYWxzZSwgLy8g5piv5ZCm56aB5q2i5LiL5YiS57q/CiAgICAgIGlzVXNlclN0eWxlRW5hYmxlOiBmYWxzZSwgLy8g5piv5ZCm5byA5ZCv6Ieq5a6a5LmJ5qC35byPCiAgICAgIG5vcm1hbGl6ZUR1Y2s6IHRydWUsIC8vIOaYr+WQpuaMieeFp+W4uOeUqOS5oOaDr+WOu+mFjee9rkR1Y2tEdWNrR28KICAgICAgYWNjZXB0TGljZW5zZTogZmFsc2UsCiAgICAgIGlzRW5MYW5nOiBmYWxzZSwKICAgICAgaXNHb29sZUluQmFpZHVNb2RlRW5hYmxlOiBmYWxzZSwgLy8g5piv5ZCm5byA5ZCv6LC35q2M5pCc57Si57uT5p6c6aG155qE55m+5bqm5Zu+5qCH5pi+56S6CiAgICAgIFVzZXJCbG9ja0xpc3Q6IFtdLAogICAgICBVc2VyU3R5bGVUZXh0OgogICAgICAgIGAvKirorqHmlbDlmajnmoTpopzoibLmoLflvI8qLwpkaXYgLkFDLUNvdW50ZXJUewogIGJhY2tncm91bmQ6ICNGRDk5OTk7Cn0KLyoq5Y+z5L6n5qCP55qE5qC35byPLeWFtuWunuS4jeW8gOWQr+abtOWlveeci+S4gOS6myovCiNjb250ZW50X3JpZ2h0ewogIHBhZGRpbmc6IDIwcHggMTVweCAxNXB4OwogIGJvcmRlci1yYWRpdXM6IDVweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOwogIC13ZWJraXQtYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOwogIC1tb3otYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOwp9Ci8qKioq5Y+v5Lul5Yqg5LiA5Lqb6Ieq5bex55qE6IOM5pmv5Zu+54mHLOabv+aNouW8leWPt+WGheeahOWGheWuueS4uuWPr+WklumTvueahOWbvueJh+WNs+WPryoqKiovCmJvZHlbYmFpZHVdewogIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteTsKICBiYWNrZ3JvdW5kLXNpemU6IDEwMCU7CiAgYmFja2dyb3VuZC1hdHRhY2htZW50OmZpeGVkOwogIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnaHR0cHM6Ly90aW1nc2EuYmFpZHUuY29tL3RpbWc/aW1hZ2UmcXVhbGl0eT04MCZzaXplPWI5OTk5XzEwMDAwJnNlYz0xNTY0NzU2Mjc3MjUwJmRpPTg2OGI5ZWFjOWJlMTRkZjFkZWRkOGM3ZDZhNzEwODQ0JmltZ3R5cGU9MCZzcmM9aHR0cCUzQSUyRiUyRnBob3RvY2RuLnNvaHUuY29tJTJGMjAxMzA1MzAlMkZJbWczNzc1MDIzMzMuanBnJyk7Cn0KLyoqKioq56qX5Y+j6IOM5pmv55qE6YCP5piO6Jma5YyW5pWI5p6cKioqKiovCmJvZHk+I3dyYXBwZXIsYm9keT4ud3JhcCxib2R5PiNtYWluLGJvZHkgI2FwcGJhcixib2R5ICNoZHRiU3VtewogIGJhY2tncm91bmQ6IHJnYmEoMjI1LDIyNSwyMjUsMC44KTsKfQovKirpmpDol4/pppbpobXnmoTlpKflm77moIct5L+u5aSN5Y+v6IO95a+86Ie05aSW5o+05qC35byP5byC5bi4KiovCmJvZHlbYmFpZHVdICNzX2xnX2ltZ19uZXd7CiAgZGlzcGxheTpub25lICFpbXBvcnRhbnQ7Cn0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LCAjd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lcnsKICBib3JkZXItcmFkaXVzOiA1cHg7Cn1gLAogICAgICBvbGRWZXJzaW9uOiAiIiwKICAgICAgbGFzdFNhdmVUaW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKICAgIH07CiAgICBsZXQgQ09OU1QgPSB7CiAgICAgIGhhc05ld0Z1bmNOZWVkRGlzcGxheTogdHJ1ZSwKICAgICAgc29ydEluZGV4OiAxLAogICAgICBpc0dvb2dsZUltYWdlVXJsOiBmYWxzZSwKICAgICAgaXNHb29nbGVTcGVjaWFsOiBmYWxzZSwgLy8g5Yik5pat5piv5ZCm5a2Y5ZyoI3Jzbz4uZzsgdHJ1ZT3lrZjlnKgKICAgICAgdXNlSXRlbToge30sCiAgICAgIFN0eWxlTWFuZ2VyOiBmdW5jdGlvbiAoKSB7CiAgICAgIH0sCiAgICB9OwoKICAgIHZhciBjdXJTaXRlID0gewogICAgICBTaXRlVHlwZUlEOiAxLCAgLy8g5b2T5YmN56uZ54K555qESUQKICAgICAgTWFpblR5cGU6ICIiLCAgICAvLyDkuLvkvZPoioLngrnvvIzlvojlpJrkuKrnmoTniLboioLngrkKICAgICAgU3R5cGVfTm9ybWFsOiAiIiwgLy8g6YeN5a6a5ZCR6YCJ5oup5Zmo77yM5Y+q5pyJ55m+5bqmLeaQnOeLly3lpb3mkJwKICAgICAgRmF2aWNvblR5cGU6ICIiLCAgLy8gZmF2aWNvbueahOWfn+WQjeajgOafpeWZqGNpdGXvvIznlKjkuo7ojrflj5Zob3N055SoCiAgICAgIEZhdmljb25BZGRUbzogIiIsIC8vIGZhdmljb27pgInmi6nlmajvvIznlKjkuo7mj5LlhaXliLB0aXRsZeS5i+WJjeeahAogICAgICBDb3VudGVyVHlwZTogIiIsICAvLyDorqHmlbDlmajmt7vliqDnmoTkvY3nva7vvIzkuIDoiKzlkoxmYXZpY29u5L2N572u5LiA6Ie0CiAgICAgIEJsb2NrVHlwZTogIiIsICAvLyDlsY/olL3mjInpkq7nmoTkvY3nva7vvIzkuIDoiKzlnKh0aXRsZeS5i+WQjgogICAgfTsKICAgIGxldCBEQlNpdGUgPSB7CiAgICAgIGJhaWR1OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogMSwKICAgICAgICBNYWluVHlwZTogIiNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIiwKICAgICAgICBTdHlwZV9Ob3JtYWw6ICJoMy50PmEsIC5jLWNvbnRhaW5lciBhcnRpY2xlIGEiLAogICAgICAgIEZhdmljb25UeXBlOiAiLmMtc2hvd3VybCIsCiAgICAgICAgRmF2aWNvbkFkZFRvOiAiaDMiLAogICAgICAgIENvdW50ZXJUeXBlOiAiI2NvbnRlbnRfbGVmdD4jZG91YmxlPmRpdltzcmNpZF0gKltjbGFzc349dF0sW2NsYXNzfj1vcF9iZXN0X2Fuc3dlcl9xdWVzdGlvbl0sI2NvbnRlbnRfbGVmdD5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dIiwKICAgICAgICBCbG9ja1R5cGU6ICJoMyBhIiwKICAgICAgICBwYWdlcjogewogICAgICAgICAgbmV4dExpbms6ICcvL2RpdltAaWQ9InBhZ2UiXS8vYVtjb250YWlucyh0ZXh0KCksIuS4i+S4gOmhtSIpXVtAaHJlZl0nLAogICAgICAgICAgcGFnZUVsZW1lbnQ6ICJjc3M7ZGl2I2NvbnRlbnRfbGVmdCA+ICoiLAogICAgICAgICAgSFRfaW5zZXJ0OiBbImNzcztkaXYjY29udGVudF9sZWZ0IiwgMl0sCiAgICAgICAgICByZXBsYWNlRTogImNzczsjcGFnZSIsCiAgICAgICAgICBzdHlsaXNoOiAiLmF1dG9wYWdlcml6ZV9wYWdlX2luZm8sIGRpdi5zcC1zZXBhcmF0b3Ige21hcmdpbi1ib3R0b206IDEwcHggIWltcG9ydGFudDt9IiwKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHNvZ291OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogMiwKICAgICAgICBNYWluVHlwZTogIiNtYWluIC5yZXN1bHRzPmRpdiIsCiAgICAgICAgU3R5cGVfTm9ybWFsOiAiaDMucHQ+YSwgaDMudnJUaXRsZT5hIiwKICAgICAgICBGYXZpY29uVHlwZTogImNpdGVbaWQqPSdjYWNoZXJlc3VsdF9pbmZvXyddIiwKICAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsCiAgICAgICAgQ291bnRlclR5cGU6ICIucmVzdWx0cz5kaXYiLAogICAgICAgIEJsb2NrVHlwZTogImgzIGEiLAogICAgICAgIHBhZ2VyOiB7CiAgICAgICAgICBuZXh0TGluazogIi8vZGl2W0BpZD1cInBhZ2ViYXJfY29udGFpbmVyXCJdLy9hW0BpZD1cInNvZ291X25leHRcIl0iLAogICAgICAgICAgcGFnZUVsZW1lbnQ6ICIvL2RpdltAY2xhc3M9XCJyZXN1bHRzXCJdL2RpdiIsCiAgICAgICAgICBIVF9pbnNlcnQ6IFsiLy9kaXZbQGNsYXNzPVwicmVzdWx0c1wiXSIsIDJdLAogICAgICAgICAgcmVwbGFjZUU6ICJpZChcInBhZ2ViYXJfY29udGFpbmVyXCIpIgogICAgICAgIH0KICAgICAgfSwKICAgICAgaGFvc291OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogMywKICAgICAgICBNYWluVHlwZTogIi5yZXMtbGlzdCIsCiAgICAgICAgU3R5cGVfTm9ybWFsOiAiLnJlcy1saXN0IGgzPmEiLAogICAgICAgIEZhdmljb25UeXBlOiAiY2l0ZSIsCiAgICAgICAgRmF2aWNvbkFkZFRvOiAiaDMiLAogICAgICAgIENvdW50ZXJUeXBlOiAiLnJlc3VsdHM+ZGl2IiwKICAgICAgICBCbG9ja1R5cGU6ICJoMyBhIiwKICAgICAgICBwYWdlcjogewogICAgICAgICAgbmV4dExpbms6ICIvL2RpdltAaWQ9J3BhZ2UnXS8vYVt0ZXh0KCk9J+S4i+S4gOmhtT4nXSB8IGlkKCdzbmV4dCcpIiwKICAgICAgICAgIHBhZ2VFbGVtZW50OiAiLy9kaXZbQGlkPSdjb250YWluZXInXS9kaXYiLAogICAgICAgICAgSFRfaW5zZXJ0OiBbIi8vZGl2W0BpZD0nY29udGFpbmVyJ10iLCAyXSwKICAgICAgICAgIHJlcGxhY2VFOiAiaWQoJ3BhZ2UnKSIKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdvb2dsZTogewogICAgICAgIFNpdGVUeXBlSUQ6IDQsCiAgICAgICAgTWFpblR5cGU6ICIjcnNvIC5nIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5pVWgzMCIsCiAgICAgICAgRmF2aWNvbkFkZFRvOiAiaDMiLAogICAgICAgIENvdW50ZXJUeXBlOiAiI3JzbyAuZyBoMywuX3lFPmRpdltjbGFzc349X2trXSBoMyIsCiAgICAgICAgQmxvY2tUeXBlOiAiLnJjPi5yPmEiLAogICAgICAgIHBhZ2VyOiB7CiAgICAgICAgICBuZXh0TGluazogJ2lkKCJwbm5leHQiKSB8IGlkKCJuYXZiYXIgbmF2Y250IG5hdiIpLy90ZFtzcGFuXS9mb2xsb3dpbmctc2libGluZzo6dGRbMV0vYSB8IGlkKCJubiIpL3BhcmVudDo6YScsCiAgICAgICAgICBwYWdlRWxlbWVudDogJy8vZGl2W0BpZD0icmVzIl0nLAogICAgICAgICAgSFRfaW5zZXJ0OiBbImNzczsjcmVzIiwgMl0sCiAgICAgICAgICByZXBsYWNlRTogJy8vZGl2W0BpZD0ibmF2Y250Il0gfCAvL2RpdltAaWQ9ImZvb3QiXVtAcm9sZT0ibmF2aWdhdGlvbiJdJwogICAgICAgIH0KICAgICAgfSwKICAgICAgYmluZzogewogICAgICAgIFNpdGVUeXBlSUQ6IDUsCiAgICAgICAgTWFpblR5cGU6ICIjYl9yZXN1bHRzPmxpIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5iX2F0dHJpYnV0aW9uPmNpdGUiLAogICAgICAgIEZhdmljb25BZGRUbzogImgyIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYW5zXT5oMiwjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2FsZ29dPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIiLAogICAgICAgIEJsb2NrVHlwZTogImgyIGEiLAogICAgICAgIHBhZ2VyOiB7CiAgICAgICAgICBuZXh0TGluazogIi8vYVtjb250YWlucyhAY2xhc3MsXCJzYl9wYWdOXCIpXSIsCiAgICAgICAgICBwYWdlRWxlbWVudDogImlkKFwiYl9yZXN1bHRzXCIpL2xpW25vdChjb250YWlucyhAY2xhc3MsXCJiX3BhZ1wiKSBvciBjb250YWlucyhAY2xhc3MsXCJiX2FucyBiX3RvcFwiKSldIiwKICAgICAgICAgIEhUX2luc2VydDogWyJpZChcImJfcmVzdWx0c1wiKS9saVtAY2xhc3M9XCJiX3BhZ1wiXSIsIDFdLAogICAgICAgICAgcmVwbGFjZUU6ICJpZChcImJfcmVzdWx0c1wiKS8vbmF2W0Byb2xlPVwibmF2aWdhdGlvblwiXSIsCiAgICAgICAgfQogICAgICB9LAogICAgICBkdWNrOiB7CiAgICAgICAgU2l0ZVR5cGVJRDogMTAsCiAgICAgICAgTWFpblR5cGU6ICIjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCIsCiAgICAgICAgRmF2aWNvblR5cGU6ICIucmVzdWx0c19saW5rc19kZWVwIC5yZXN1bHRfX3VybF9fZG9tYWluIiwKICAgICAgICBGYXZpY29uQWRkVG86ICJoMiIsCiAgICAgICAgQ291bnRlclR5cGU6ICIjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDIgYSIsCiAgICAgICAgcGFnZXI6IHsKICAgICAgICAgIG5leHRMaW5rOiAiLy9hW2NvbnRhaW5zKEBjbGFzcyxcInNiX3BhZ05cIildIiwKICAgICAgICAgIHBhZ2VFbGVtZW50OiAiaWQoXCJiX3Jlc3VsdHNcIikvbGlbbm90KGNvbnRhaW5zKEBjbGFzcyxcImJfcGFnXCIpIG9yIGNvbnRhaW5zKEBjbGFzcyxcImJfYW5zIGJfdG9wXCIpKV0iLAogICAgICAgICAgSFRfaW5zZXJ0OiBbImlkKFwiYl9yZXN1bHRzXCIpL2xpW0BjbGFzcz1cImJfcGFnXCJdIiwgMV0sCiAgICAgICAgICByZXBsYWNlRTogImlkKFwiYl9yZXN1bHRzXCIpLy9uYXZbQHJvbGU9XCJuYXZpZ2F0aW9uXCJdIiwKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRvZ2U6IHsKICAgICAgICBTaXRlVHlwZUlEOiAxMSwKICAgICAgICBNYWluVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fdXJsX19kb21haW4iLAogICAgICAgIEZhdmljb25BZGRUbzogImgyIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIiwKICAgICAgICBCbG9ja1R5cGU6ICJoMiBhIiwKICAgICAgICBwYWdlcjogewogICAgICAgICAgbmV4dExpbms6ICIvL2FbY29udGFpbnMoQGNsYXNzLFwic2JfcGFnTlwiKV0iLAogICAgICAgICAgcGFnZUVsZW1lbnQ6ICJpZChcImJfcmVzdWx0c1wiKS9saVtub3QoY29udGFpbnMoQGNsYXNzLFwiYl9wYWdcIikgb3IgY29udGFpbnMoQGNsYXNzLFwiYl9hbnMgYl90b3BcIikpXSIsCiAgICAgICAgICBIVF9pbnNlcnQ6IFsiaWQoXCJiX3Jlc3VsdHNcIikvbGlbQGNsYXNzPVwiYl9wYWdcIl0iLCAxXSwKICAgICAgICAgIHJlcGxhY2VFOiAiaWQoXCJiX3Jlc3VsdHNcIikvL25hdltAcm9sZT1cIm5hdmlnYXRpb25cIl0iLAogICAgICAgIH0KICAgICAgfSwKICAgICAgbUJhaWR1OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogNiwKICAgICAgICBNYWluVHlwZTogIiNiX3Jlc3VsdHM+bGkiLAogICAgICAgIEZhdmljb25UeXBlOiAiLmJfYXR0cmlidXRpb24+Y2l0ZSIsCiAgICAgICAgRmF2aWNvbkFkZFRvOiAiaDIiLAogICAgICAgIENvdW50ZXJUeXBlOiAiI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbnNdPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIsI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXT5oMiIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDIgYSIsCiAgICAgIH0sCiAgICAgIHpoaWh1OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogNywKICAgICAgfSwKICAgICAgYmFpZHVfeHVlc2h1OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogOCwKICAgICAgICBNYWluVHlwZTogIiNjb250ZW50X2xlZnQgLnJlc3VsdCIsCiAgICAgICAgU3R5cGVfTm9ybWFsOiAiaDMudD5hLCAjcmVzdWx0cyAuYy1jb250YWluZXI+LmMtYmxvY2thIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHQtb3AsIC5jLXNob3d1cmwiLCAvLyBiYWlkdSDkvLzkuY7opoHmlLnniYjkuobvvJ8KICAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsCiAgICAgICAgQ291bnRlclR5cGU6ICIjY29udGVudF9sZWZ0PiNkb3VibGU+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSwjY29udGVudF9sZWZ0PmRpdltzcmNpZF0gKltjbGFzc349dF0sW2NsYXNzfj1vcF9iZXN0X2Fuc3dlcl9xdWVzdGlvbl0iLAogICAgICAgIEJsb2NrVHlwZTogImgzIGEiLAogICAgICB9LAogICAgICBvdGhlcjogewogICAgICAgIFNpdGVUeXBlSUQ6IDksCiAgICAgIH0KICAgIH07CiAgICBsZXQgU2l0ZVR5cGUgPSB7CiAgICAgIEJBSURVOiBEQlNpdGUuYmFpZHUuU2l0ZVR5cGVJRCwKICAgICAgTUJBSURVOiBEQlNpdGUubUJhaWR1LlNpdGVUeXBlSUQsCiAgICAgIFNPR09VOiBEQlNpdGUuc29nb3UuU2l0ZVR5cGVJRCwKICAgICAgU086IERCU2l0ZS5oYW9zb3UuU2l0ZVR5cGVJRCwKICAgICAgR09PR0xFOiBEQlNpdGUuZ29vZ2xlLlNpdGVUeXBlSUQsCiAgICAgIEJJTkc6IERCU2l0ZS5iaW5nLlNpdGVUeXBlSUQsCiAgICAgIERVQ0s6IERCU2l0ZS5kdWNrLlNpdGVUeXBlSUQsCiAgICAgIERPR0U6IERCU2l0ZS5kb2dlLlNpdGVUeXBlSUQsCiAgICAgIFpISUhVOiBEQlNpdGUuemhpaHUuU2l0ZVR5cGVJRCwKICAgICAgQkFJRFVfWFVFU0hVOiBEQlNpdGUuYmFpZHVfeHVlc2h1LlNpdGVUeXBlSUQsCiAgICAgIE9USEVSUzogOAogICAgfTsKICAgIGxldCBvdGhlckRhdGEgPSB7CiAgICAgIG90aGVyOiB7CiAgICAgICAgY3VyVGFiOiAxLCAvLyDlsZXnpLrnrKzkuoxwYW5lbAogICAgICAgIHNob3dCbG9ja0xpc3RBcmVhOiBmYWxzZSwgLy8gYmxvY2tMaXN05bGV56S65L2NdGV4dGFyZWEKICAgICAgICBhZGRCbG9ja0l0ZW06ICIiLCAgICAgLy8g55So5oi35omL5Yqo6L6T5YWl55qE5oum5oiq6KeE5YiZCiAgICAgICAgY3VySG9zdHM6IFtdLCAgICAgICAgIC8vIOWtmOaUvuW3sue7j+iuv+mXrueahGhvc3Rz5pWw5o2u5YaF5a65CiAgICAgIH0KICAgIH07ICAvLyDliLDml7blgJnmjILovb3liLBvdGhlcuS4igogICAgbGV0IEFsbERhdGEgPSB7CiAgICAgIEFDQ29uZmlnOiB7fSwKICAgICAgb3RoZXI6IG90aGVyRGF0YS5vdGhlciwKICAgICAgQ09OU1Q6IENPTlNULAogICAgICBsYW46IHsKICAgICAgICB1c2U6IHt9LAogICAgICAgIHpoX2NuOiB7CiAgICAgICAgICBtZW51X3RleHQ6ICLoh6rlrprkuYkiLAogICAgICAgICAgY3VyTGFuZzogInpoX2NuIiwKICAgICAgICAgIGZpZWxkc2V0X3BhbmVsOiB7CiAgICAgICAgICAgIHBhbmVsX3RpdGxlOiAiQUMt6YeN5a6a5ZCR6K6+572uICIgKyBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uICsgKGluRXh0TW9kZT8gJ0V4dCc6JycpLAogICAgICAgICAgICBzZXR0aW5nX3BhbmVsOiB7CiAgICAgICAgICAgICAgcmVkaXJlY3RfdGV4dDogIuS4u+WKn+iDvS3ph43lrprlkJHlip/og70iLAogICAgICAgICAgICAgIHJlZGlyZWN0X3RpdGxlOiAi6YeN5a6a5ZCR5Yqf6IO955qE5byA5ZCv5LiO5ZCmIiwKICAgICAgICAgICAgICB1c2VFbl90ZXh0OiAiRW4tTGFuZ3VhZ2UiLAogICAgICAgICAgICAgIHVzZUVuX3RpdGxlOiAiVXNpbmcgRW5nbGlzaCBsYW5ndWFnZSB0byBkaXNwbGF5IiwKICAgICAgICAgICAgICBhZHNfdGV4dDogIumZhOWKoDEt5Y675bm/5ZGK5Yqf6IO9IiwKICAgICAgICAgICAgICBhZHNfdGl0bGU6ICLljrvpmaTpg6jliIbpobXpnaLnmoTlub/lkYrkv6Hmga/vvIzov5jkvaDkuIDkuKrlubLlh4DmlbTmtIHnmoTpobXpnaIiLAogICAgICAgICAgICAgIGF1dG9wYWdlX3RleHQ6ICLoh6rliqjnv7vpobUiLAogICAgICAgICAgICAgIGF1dG9wYWdlX3RpdGxlOiAi6Ieq5Yqo57+76aG1IiwKICAgICAgICAgICAgICBibG9ja2VuYWJsZV90ZXh0OiAi6ZmE5YqgMi3oh6rkuLvmi6bmiKrln5/lkI0iLAogICAgICAgICAgICAgIGJsb2NrZW5hYmxlX3RpdGxlOiAi54K55Ye76aG16Z2iYmxvY2vmjInpkq7mt7vliqDkvaDmg7PopoHpmpDol4/nmoTlnLDlnYDvvIzohJrmnKzlsIboh6rliqjpmpDol4/pg6jliIbnu5PmnpzkuLrlsI/mqKrluYXvvIxESVnmjInpkq7kuK3ngrnlh7vooajmoLzlhoXlrrnlj6/ku6Xlj5bmtojpmpDol48iLAogICAgICAgICAgICAgIGJsb2NrRGl5QnRuX3RleHQ6ICJESVkiLAogICAgICAgICAgICAgIGJsb2NrRGl5QnRuX3RpdGxlOiAi6Ieq5a6a5LmJQkxPQ0siLAogICAgICAgICAgICAgIGJsb2NrQXV0b1JlbW92ZV90ZXh0OiAi6ZqQ6JeP57uT5p6cIiwKICAgICAgICAgICAgICBibG9ja0F1dG9SZW1vdmVfdGl0bGU6ICLoh6rliqjpmpDol4/lt7Lnu4/lsY/olL3nmoTln5/lkI0iLAogICAgICAgICAgICAgIGJsb2NrQnRuU2hvd190ZXh0OiAi6ZqQ6JePJ2Jsb2NrJ+aMiemSriIsCiAgICAgICAgICAgICAgYmxvY2tCdG5TaG93X3RpdGxlOiAi6ZqQ6JeP5o6JYmxvY2vmjInpkq7nmoTmmL7npLoiLAoKICAgICAgICAgICAgICB1c2VyU3R5bGVfdGV4dDogIumZhOWKoDMt6Ieq5a6a5LmJ5qC35byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfbGFibGU6ICLlsZXlvIDnmb7luqborr7nva4+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1X29yaWdpbjogIueZvuW6pi3ljp/lp4vmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV9odXlhbjogIueZvuW6pi3miqTnnLzmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV9iYWlkdUxpdGU6ICLnmb7luqZMaXRl5qC35byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV8xbGluZV9lbnRlcjogIuWNleWIl+WxheS4rSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1XzJsaW5lOiAi5Y+M5YiXIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV80bGluZTogIuWbm+WIlyIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfbGFibGU6ICLlsZXlvIDosLfmrYzorr7nva4+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV9vcmlnaW46ICLosLfmrYwt5Y6f5aeL5qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlX2h1eWFuOiAi6LC35q2MLeaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV9nb29nbGVMaXRlOiAi6LC35q2MLeS8quijheeZvuW6piIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8xbGluZTogIuWNleWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8xbGluZV9lbnRlcjogIuWNleWIl+WxheS4rSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8ybGluZTogIuWPjOWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8zbGluZTogIuS4ieWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV80bGluZTogIuWbm+WIlyIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nX2xhYmxlOiAi5bGV5byA5b+F5bqU6K6+572uPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nX29yaWdpbjogIuW/heW6lC3ljp/lp4vmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nX2h1eWFuOiAi5b+F5bqULeaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzFsaW5lX2VudGVyOiAi5Y2V5YiX5bGF5LitIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmluZ18ybGluZTogIuWPjOWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzRsaW5lOiAi5Zub5YiXIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291X2xhYmxlOiAi5bGV5byA5pCc54uX6K6+572uPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV9vcmlnaW46ICLmkJzni5ct5Y6f5aeL5qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfaHV5YW46ICLmkJzni5ct5oqk55y85qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV8xbGluZV9lbnRlcjogIuWNleWIl+WxheS4rSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291XzJsaW5lOiAi5Y+M5YiXIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV80bGluZTogIuWbm+WIlyIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX2xhYmxlOiAi5bGV5byA6bit6bit5pCc6K6+572uPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX29yaWdpbjogIum4rem4rS3ljp/lp4vmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX2h1eWFuOiAi6bit6bitLeaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfbm9ybWFsOiAi6bit6bitLeW4uOingemFjee9riIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrXzFsaW5lX2VudGVyOiAi5Y2V5YiX5bGF5LitIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja18ybGluZTogIuWPjOWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrXzRsaW5lOiAi5Zub5YiXIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfbGFibGU6ICLlsZXlvIDlpJrlkInorr7nva4+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2Vfb3JpZ2luOiAi5aSa5ZCJLeWOn+Wni+aooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfaHV5YW46ICLlpJrlkIkt5oqk55y85qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV9ub3JtYWw6ICLlpJrlkIkt5bi46KeB6YWN572uIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV8xbGluZTogIuWNleWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfMWxpbmVfZW50ZXI6ICLljZXliJflsYXkuK0iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kb2dlXzJsaW5lOiAi5Y+M5YiXIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV8zbGluZTogIuS4ieWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfNGxpbmU6ICLlm5vliJciLAoKICAgICAgICAgICAgICBodXlhbk1vZGVfdGV4dDogIumZhOWKoDQt5oqk55y86aKc6Imy6YWN572uLeiHquWumuS5iTPkuK3pnIDlr7nlupTlvIDlkK8iLAogICAgICAgICAgICAgIGh1eWFuTW9kZV90aXRsZTogIu+8gemcgOimgeWcqOiHquWumuS5ieagt+W8j+S4reWQr+eUqOaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgaHV5YW5Db2xvcl90ZXh0OiAi6buY6K6k5oqk55y86aKc6Imy77yaIiwKICAgICAgICAgICAgICBodXlhbkNvbG9yX3RpdGxlOiAi6Ieq5a6a5LmJ55qE5oqk55y86aKc6Imy77yaIiwKICAgICAgICAgICAgICBodXlhbkNvbG9yTW9yZV90ZXh0OiAi5pu05aSa6aKc6Imy6YCJ5oupIiwKCiAgICAgICAgICAgICAgZmF2aWNvbl90ZXh0OiAi6ZmE5YqgNS1GYXZpY29u5Yqf6IO9IiwKICAgICAgICAgICAgICBmYXZpY29uX3RpdGxlOiAiQUMt5re75YqgRmF2aWNvbiIsCiAgICAgICAgICAgICAgZmF2aWNvbl9kZWZhdWx0SWNvbl90ZXh0OiAiRmF2aWNvbum7mOiupOWbvuagh++8miIsCgogICAgICAgICAgICAgIHNlYXJjaE9yaWdpbl90ZXh0OiAi6ZmE5YqgNi3np7vpmaTnmb7luqbmkJzntKLpooTmtYso5paH5a2X6Ieq5Yqo5pCc57SiKSIsCiAgICAgICAgICAgICAgc2VhcmNoT3JpZ2luX3RpdGxlOiAiQUMt56e76Zmk5pCc57Si6aKE5rWLIiwKCiAgICAgICAgICAgICAgc2hvd1JpZ2h0X3RleHQ6ICLpmYTliqA3LeaYvuekuuWPs+S+p+agjyIsCiAgICAgICAgICAgICAgc2hvd0NvdW50ZXJfdGV4dDogIumZhOWKoDgt57yW5Y+35Yqf6IO9IiwKICAgICAgICAgICAgICBzaG93QUxpbmVfdGV4dDogIumZhOWKoDkt5paH5a2X5LiL5YiS57q/IiwKICAgICAgICAgICAgICBzaG93VXNlclN0eWxlX3RleHQ6ICLpmYTliqAxMC3oh6rlrprkuYnmoLflvI8iLAoKICAgICAgICAgICAgICBjb250YWN0TWVfdGV4dDogIuiBlOezu+S9nOiAhSzmj5Dlu7rorq4s5a+75rGC5biu5YqpLOiHquWumuS5ieagt+W8jyzohJrmnKzlrprliLbngrnmiJEiLAogICAgICAgICAgICAgIGNvbnRhY3RNZV91cmw6ICJodHRwczovL2dpdGh1Yi5jb20vbGFuZ3JlbjEzNTMvR01fc2NyaXB0IiwKCiAgICAgICAgICAgICAgc2V0dGluZ19wYW5lbF9zZWNvbmQ6IHsKICAgICAgICAgICAgICAgIGJhY2tCdG5fdGV4dDogIjwt6L+U5ZueIiwKICAgICAgICAgICAgICAgIGJsb2NrTGFiZWxfdGV4dDogIiDmi6bmiKrliJfooaggIOaDs+imgeeUn+aViOeahOivnemcgOimgeaJi+WKqOS/neWtmCIsCiAgICAgICAgICAgICAgICBibG9ja0VkaXRCdG5fdGV4dDogIue8lui+keWIl+ihqCIsCiAgICAgICAgICAgICAgICBibG9ja0VkaXRCdG5FbmRfdGV4dDogIue7k+adn+e8lui+kSIsCiAgICAgICAgICAgICAgICBhZGRCbG9ja0xhYmVsX3RleHQ6ICLlhajljLnphY3mi6bmiKrvvJoiLAogICAgICAgICAgICAgICAgYWRkQnRuTGFiZWxfdGV4dDogIua3u+WKoCIsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjYW5jZWxCdG5fdGV4dDogIuWPlua2iCIsCiAgICAgICAgICAgICAgb2tCdG5fdGV4dDogIuS/neWtmCIsCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGVuOiB7CiAgICAgICAgICBtZW51X3RleHQ6ICJDVVNUT00iLAogICAgICAgICAgY3VyTGFuZzogImVuIiwKICAgICAgICAgIGZpZWxkc2V0X3BhbmVsOiB7CiAgICAgICAgICAgIHBhbmVsX3RpdGxlOiAiQUMgUmVkaXJlY3QgU2V0dGluZ3MgIiArIEdNX2luZm8uc2NyaXB0LnZlcnNpb24gKyAoaW5FeHRNb2RlPyAnRXh0JzonJyksCiAgICAgICAgICAgIHNldHRpbmdfcGFuZWw6IHsKICAgICAgICAgICAgICByZWRpcmVjdF90ZXh0OiAiTWFpbi1SZWRpcmVjdEZ1bmMiLAogICAgICAgICAgICAgIHJlZGlyZWN0X3RpdGxlOiAiVHVybiBvbiBvciBvZmYgcmVkaXJlY3QiLAogICAgICAgICAgICAgIHVzZUVuX3RleHQ6ICJFbi1MYW5ndWFnZSIsCiAgICAgICAgICAgICAgdXNlRW5fdGl0bGU6ICLkvb/nlKjoi7HmlofmmL7npLrpobXpnaIiLAogICAgICAgICAgICAgIGFkc190ZXh0OiAiQWRkMS1SZW1vdmUgQWRzIiwKICAgICAgICAgICAgICBhZHNfdGl0bGU6ICJSZW1vdmUgdGhlIGFkcyBvbiB0aGUgcGFnZSwgYW5kIHJldHVybiB5b3UgYSBjbGVhbiBwYWdlIiwKICAgICAgICAgICAgICBhdXRvcGFnZV90ZXh0OiAiQXV0byBQYWdlciIsCiAgICAgICAgICAgICAgYXV0b3BhZ2VfdGl0bGU6ICJBdXRvIFBhZ2VyIiwKICAgICAgICAgICAgICBibG9ja2VuYWJsZV90ZXh0OiAiQWRkMi1CbG9jayBob3N0IiwKICAgICAgICAgICAgICBibG9ja2VuYWJsZV90aXRsZTogIkNsaWNrIHRoZSBCbG9jayBidXR0b24gdG8gYWRkIHRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIGhpZGUuIFRoZSBzY3JpcHQgd2lsbCBoaWRlIGl0IHdpdGggc21hbGwgYmFubmVyIGF1dG9tYXRpY2FsbHkuIERJWSBidXR0b24gZm9yIGVkaXR0aW5nIHRoZSBoaWRpbmcgbGlzdCIsCiAgICAgICAgICAgICAgYmxvY2tEaXlCdG5fdGV4dDogIkRJWSIsCiAgICAgICAgICAgICAgYmxvY2tEaXlCdG5fdGl0bGU6ICJFZGl0IEJMT0NLIiwKICAgICAgICAgICAgICBibG9ja0F1dG9SZW1vdmVfdGV4dDogIkF1dG8gcmVtb3ZlIiwKICAgICAgICAgICAgICBibG9ja0F1dG9SZW1vdmVfdGl0bGU6ICJyZW1vdmUgdGhlIGJsb2NrIHJlc3VsdHMgYXV0b21hdGljYWxseSIsCiAgICAgICAgICAgICAgYmxvY2tCdG5TaG93X3RleHQ6ICJIaWRlICdCbG9jaycgYnV0dG9uIiwKICAgICAgICAgICAgICBibG9ja0J0blNob3dfdGl0bGU6ICJIaWRlICdCbG9jaycgYnV0dG9uIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX3RleHQ6ICJBZGQzLUN1c3RvbVN0eWxlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfbGFibGU6ICJFeHBhbmQgQmFpZHUgU2V0dGluZ3M+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1X29yaWdpbjogIkJhaWR1LU9yaWdpbiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1X2h1eWFuOiAiQmFpZHUtRXllU2F2ZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1X2JhaWR1TGl0ZTogIkJhaWR1TGl0ZVN0eWxlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV8xbGluZV9lbnRlcjogIlNpbmdsZUNlbnRlciIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1XzJsaW5lOiAiVHdvIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1XzRsaW5lOiAiRm91ciIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfbGFibGU6ICJFeHBhbmQgR29vZ2xlIFNldHRpbmdzPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfb3JpZ2luOiAiR29vZ2xlLU9yaWdpbiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV9odXlhbjogIkdvb2dsZS1FeWVTYXZlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlX2dvb2dsZUxpdGU6ICJGYWtlIEJhaWR1IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlXzFsaW5lOiAiU2luZ2xlUm93IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlXzFsaW5lX2VudGVyOiAiU2luZ2xlQ2VudGVyIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlXzJsaW5lOiAiVHdvIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlXzNsaW5lOiAiVGhyZWUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfNGxpbmU6ICJGb3VyIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfbGFibGU6ICJFeHBhbmQgQmluZyBTZXR0aW5ncz4+IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmluZ19vcmlnaW46ICJCaW5nLU9yaWdpbiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfaHV5YW46ICJCaW5nLUV5ZVNhdmUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzFsaW5lOiAiU2luZ2xlUm93IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmluZ18xbGluZV9lbnRlcjogIlNpbmdsZUNlbnRlciIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfMmxpbmU6ICJUd28iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzNsaW5lOiAiVGhyZWUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzRsaW5lOiAiRm91ciIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV9sYWJsZTogIkV4cGFuZCBTb0dvdSBTZXR0aW5ncz4+IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3Vfb3JpZ2luOiAiU29Hb3UtT3JpZ2luIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfaHV5YW46ICJTb0dvdS1FeWVTYXZlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV8xbGluZV9lbnRlcjogIlNpbmdsZUNlbnRlciIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291XzJsaW5lOiAiVHdvIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291XzRsaW5lOiAiRm91ciIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX2xhYmxlOiAiRXhwYW5kIER1Y2tEdWNrR28gU2V0dGluZ3M+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfb3JpZ2luOiAiRHVja0R1Y2stT3JpZ2luIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja19odXlhbjogIkR1Y2tEdWNrLUV5ZVNhdmUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX25vcm1hbDogIkR1Y2tEdWNrLU5vcm1hbCIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrXzFsaW5lX2VudGVyOiAiU2luZ2xlQ2VudGVyIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja18ybGluZTogIlR3byIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfNGxpbmU6ICJGb3VyIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfbGFibGU6ICJFeHBhbmQgRG9nZURvZ2UgU2V0dGluZ3M+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2Vfb3JpZ2luOiAiRG9nZURvZ2UtT3JpZ2luIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV9odXlhbjogIkRvZ2VEb2dlLUV5ZVNhdmUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kb2dlX25vcm1hbDogIkRvZ2VEb2dlLU5vcm1hbCIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kb2dlXzFsaW5lX2VudGVyOiAiU2luZ2xlQ2VudGVyIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV8ybGluZTogIlR3byIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfNGxpbmU6ICJGb3VyIiwKCiAgICAgICAgICAgICAgaHV5YW5Nb2RlX3RleHQ6ICJBZGQ0LUV5ZVNhdmUgQ29sb3IgU2V0dGluZy1OZWVkIG9wZW5lZCBpbiBBZGQzIiwKICAgICAgICAgICAgICBodXlhbk1vZGVfdGl0bGU6ICLvvIFPcGVuIEV5ZVNhdmUgTW9kZSBpbiBDdXN0b21TdHlsZSBpcyBNdXN0IiwKICAgICAgICAgICAgICBodXlhbkNvbG9yX3RleHQ6ICJEZWZhdWx0IEV5ZVNhdmUgQ29sb3LvvJoiLAogICAgICAgICAgICAgIGh1eWFuQ29sb3JfdGl0bGU6ICJUaGUgY29sb3Igb2YgRXllU2F2Ze+8miIsCiAgICAgICAgICAgICAgaHV5YW5Db2xvck1vcmVfdGV4dDogIk1vcmUgQ29sb3IiLAoKICAgICAgICAgICAgICBmYXZpY29uX3RleHQ6ICJBZGQ1LUZhdmljb24uRnVuYyIsCiAgICAgICAgICAgICAgZmF2aWNvbl90aXRsZTogIkFDLUFkZEZhdmljb24iLAogICAgICAgICAgICAgIGZhdmljb25fZGVmYXVsdEljb25fdGV4dDogIkZhdmljb25GYWlsZWRJbWfvvJrvvJoiLAoKICAgICAgICAgICAgICBzZWFyY2hPcmlnaW5fdGV4dDogIkFDLVJlbW92ZSBCYWlkdSBBdXRvUHJlZGljdCBpbiB0ZXh0IHNlYXJjaCIsCiAgICAgICAgICAgICAgc2VhcmNoT3JpZ2luX3RpdGxlOiAiQWRkNi1SZW1vdmUgQmFpZHUgQXV0b1ByZWRpY3QgaW4gdGV4dCBzZWFyY2giLAoKICAgICAgICAgICAgICBzaG93UmlnaHRfdGV4dDogIkFkZDctUmlnaHQgU2lkZSBDb2x1bW4iLAogICAgICAgICAgICAgIHNob3dDb3VudGVyX3RleHQ6ICJBZGQ4LU51bUZ1bmMiLAogICAgICAgICAgICAgIHNob3dBTGluZV90ZXh0OiAiQWRkOS1UZXh0VW5kZXJMaW5lIiwKICAgICAgICAgICAgICBzaG93VXNlclN0eWxlX3RleHQ6ICJBZGQxMC1Zb3VyIG93biBTdHlsZSIsCgogICAgICAgICAgICAgIGNvbnRhY3RNZV90ZXh0OiAiRm9yIGNvbnRhY3QgdGhlIHdyaXR0ZXIsIHN1Z2dlc3RzLCBhc2sgZm9yIGhlbHAgdGhlbiBjbGljayBtZSIsCiAgICAgICAgICAgICAgY29udGFjdE1lX3VybDogImh0dHBzOi8vZ2l0aHViLmNvbS9sYW5ncmVuMTM1My9HTV9zY3JpcHQvIiwKCiAgICAgICAgICAgICAgc2V0dGluZ19wYW5lbF9zZWNvbmQ6IHsKICAgICAgICAgICAgICAgIGJhY2tCdG5fdGV4dDogIjwtQmFjayIsCiAgICAgICAgICAgICAgICBibG9ja0xhYmVsX3RleHQ6ICImbmJzcDtCbG9jayBMaXN0Jm5ic3A7Jm5ic3A7Q2xpY2sgU2F2ZSBCdXR0b24gaWYgeW91IHdhbnQgd28gc2F2ZSB0aGUgbGlzdCIsCiAgICAgICAgICAgICAgICBibG9ja0VkaXRCdG5fdGV4dDogIkVkaXQgTGlzdCIsCiAgICAgICAgICAgICAgICBibG9ja0VkaXRCdG5FbmRfdGV4dDogIkVuZCBFZGl0IiwKICAgICAgICAgICAgICAgIGFkZEJsb2NrTGFiZWxfdGV4dDogIkFkZCBCbG9jayBpdGVt77yaIiwKICAgICAgICAgICAgICAgIGFkZEJ0bkxhYmVsX3RleHQ6ICJBZGQiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY2FuY2VsQnRuX3RleHQ6ICJDYW5jZWwiLAogICAgICAgICAgICAgIG9rQnRuX3RleHQ6ICJTYXZlIiwKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIGxldCB2dWVWTSA9IG51bGw7CiAgICAvKirliJ3lp4vljJbmiYDmnInnmoTorr7nva4qKi8KICAgIFByb21pc2UuYWxsKFtHTS5nZXRWYWx1ZSgiQ29uZmlnIildKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIGxldCByZXMgPSBkYXRhWzBdCiAgICAgIGlmIChyZXMgIT0gbnVsbCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBBQ0NvbmZpZyA9IEpTT04ucGFyc2UocmVzKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBBQ0NvbmZpZyA9IHJlczsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgQUNDb25maWcgPSBEZWZhdWx0Q29uZmlnOwogICAgICB9CiAgICAgIGNvbnN0IGxvY2FsRGF0YSA9IGxvY2FsU3RvcmFnZS5BQ0NvbmZpZzsgLy8g5bCP5b+D6ZqQ56eB5qih5byPCiAgICAgIGlmKGxvY2FsRGF0YSAmJiBsb2NhbERhdGEubGVuZ3RoID4gMCkgewogICAgICAgIEFDQ29uZmlnID0gSlNPTi5wYXJzZShsb2NhbERhdGEpOwogICAgICB9CiAgICAgIGZvciAodmFyIGtleSBpbiBEZWZhdWx0Q29uZmlnKSB7CiAgICAgICAgaWYgKHR5cGVvZiAoQUNDb25maWdba2V5XSkgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICBBQ0NvbmZpZ1trZXldID0gRGVmYXVsdENvbmZpZ1trZXldOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoQUNDb25maWcuaXNVc2VyU3R5bGVFbmFibGUgPT09IGZhbHNlICYmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIEFDQ29uZmlnLmxhc3RTYXZlVGltZSA+IDI1OTIwMDAwMDApKSB7IC8vIOWkp+e6pjMw5aSp5pe26Ze0CiAgICAgICAgLy8g5aaC5p6c55So5oi35Y+W5raI5LqG6K6+572u77yM5bm25LiU6ZW/5pe26Ze0KDMw5aSpKeayoeaciei/m+ihjOi/h+WkhOeQhu+8jOmCo+S5iOebtOaOpeWwhuaVsOaNrue9ruepuiAtPiDnlKjkuo7liLfmlrDmlbDmja4KICAgICAgICBjb25zb2xlLmxvZygiYWMtYmFpZHUgY3NzIHJlc2V0IGZvciB0aW1lIik7CiAgICAgICAgQUNDb25maWcubGFzdFNhdmVUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgQUNDb25maWcuVXNlclN0eWxlVGV4dCA9IERlZmF1bHRDb25maWcuVXNlclN0eWxlVGV4dDsKICAgICAgfQogICAgICBBbGxEYXRhLkFDQ29uZmlnID0gQUNDb25maWc7CiAgICAgIERCQ29uZmlnID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShBQ0NvbmZpZykpOyAvLyDmmoLml7bkvZzkuLrkuIDkuKrljp/lp4vkv53lrZgKICAgICAgQWxsRGF0YS5sYW4udXNlID0gQUNDb25maWcuaXNFbkxhbmcgPyBBbGxEYXRhLmxhbi5lbiA6IEFsbERhdGEubGFuLnpoX2NuOwogICAgICAvLyDliJ3lp4vljJblrozmiJDkuYvlkI7miY3og73osIPnlKjmraPluLjlh73mlbAKICAgICAgY2FsbGJhY2soKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChleGNlcHQpIHsKICAgICAgY29uc29sZS5sb2coZXhjZXB0KTsKICAgIH0pOwoKICAgIGZ1bmN0aW9uIFJlZ19HZXQoSFRNTCwgcmVnKSB7CiAgICAgIGxldCBSZWdFID0gbmV3IFJlZ0V4cChyZWcpOwogICAgICB0cnkgewogICAgICAgIHJldHVybiBSZWdFLmV4ZWMoSFRNTClbMV07CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBBQ1NldFZhbHVlKGtleSwgdmFsdWUpIHsKICAgICAgR01fc2V0VmFsdWUoa2V5LCB2YWx1ZSk7CiAgICAgIGlmKGtleSA9PT0gJ0NvbmZpZycpewogICAgICAgIGxvY2FsU3RvcmFnZS5BQ0NvbmZpZyA9IHZhbHVlOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RWxlbWVudEJ5WHBhdGgoZSwgdCwgcikgewogICAgICByID0gciB8fCBkb2N1bWVudCwgdCA9IHQgfHwgcjsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gci5ldmFsdWF0ZShlLCB0LCBudWxsLCBYUGF0aFJlc3VsdC5GSVJTVF9PUkRFUkVEX05PREVfVFlQRSwgbnVsbCkuc2luZ2xlTm9kZVZhbHVlOwogICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigi5peg5pWI55qEeHBhdGgiKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldEFsbEVsZW1lbnRzKGUsIHQsIHIsIG4sIG8pIHsKICAgICAgbGV0IGdldEFsbEVsZW1lbnRzQnlYcGF0aCA9IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICByZXR1cm4gciA9IHIgfHwgZG9jdW1lbnQsIHQgPSB0IHx8IHIsIHIuZXZhbHVhdGUoZSwgdCwgbnVsbCwgWFBhdGhSZXN1bHQuT1JERVJFRF9OT0RFX1NOQVBTSE9UX1RZUEUsIG51bGwpOwogICAgICB9CgogICAgICB2YXIgaSwgcyA9IFtdOwogICAgICBpZiAoIWUpIHJldHVybiBzOwogICAgICBpZiAociA9IHIgfHwgZG9jdW1lbnQsIG4gPSBuIHx8IHdpbmRvdywgbyA9IG8gfHwgdm9pZCAwLCB0ID0gdCB8fCByLCAic3RyaW5nIiA9PT0gdHlwZW9mIGUpIGkgPSAwID09PSBlLnNlYXJjaCgvXmNzczsvaSkgPyBmdW5jdGlvbiBnZXRBbGxFbGVtZW50c0J5Q1NTKGUsIHQpIHsKICAgICAgICByZXR1cm4gKHQgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwoZSk7CiAgICAgIH0oZS5zbGljZSg0KSwgdCkgOiBnZXRBbGxFbGVtZW50c0J5WHBhdGgoZSwgdCwgcik7IGVsc2UgewogICAgICAgIGlmICghKGkgPSBlKHIsIG4sIG8pKSkgcmV0dXJuIHM7CiAgICAgICAgaWYgKGkubm9kZVR5cGUpIHJldHVybiBzWzBdID0gaSwgczsKICAgICAgfQogICAgICByZXR1cm4gZnVuY3Rpb24gbWFrZUFycmF5KGUpIHsKICAgICAgICB2YXIgdCwgciwgbiwgbyA9IFtdOwogICAgICAgIGlmIChlLnBvcCkgewogICAgICAgICAgZm9yICh0ID0gMCwgciA9IGUubGVuZ3RoOyB0IDwgcjsgdCsrKSAobiA9IGVbdF0pICYmIChuLm5vZGVUeXBlID8gby5wdXNoKG4pIDogbyA9IG8uY29uY2F0KG1ha2VBcnJheShuKSkpOwogICAgICAgICAgcmV0dXJuIGEoKShvKTsKICAgICAgICB9CiAgICAgICAgaWYgKGUuaXRlbSkgewogICAgICAgICAgZm9yICh0ID0gZS5sZW5ndGg7IHQ7KSBvWy0tdF0gPSBlW3RdOwogICAgICAgICAgcmV0dXJuIG87CiAgICAgICAgfQogICAgICAgIGlmIChlLml0ZXJhdGVOZXh0KSB7CiAgICAgICAgICBmb3IgKHQgPSBlLnNuYXBzaG90TGVuZ3RoOyB0Oykgb1stLXRdID0gZS5zbmFwc2hvdEl0ZW0odCk7CiAgICAgICAgICByZXR1cm4gbzsKICAgICAgICB9CiAgICAgIH0oaSk7CiAgICB9CgogICAgZnVuY3Rpb24gY2FsbGJhY2soKSB7CiAgICAgIGlmIChBQ0NvbmZpZy5vbGRWZXJzaW9uID09PSBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uKSB7CiAgICAgICAgQ09OU1QuaGFzTmV3RnVuY05lZWREaXNwbGF5ID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgQ09OU1QuaGFzTmV3RnVuY05lZWREaXNwbGF5ID0gbmVlZERpc3BsYXlOZXdGdW47CiAgICAgIH0KCiAgICAgICFmdW5jdGlvbigpIHsKICAgICAgICAvKioKICAgICAgICAgKiDov5vooYzkuI3ph43lpI3mj5LlhaXvvIzmj5LlhaXlkI7miafooYzlm57osIPlh73mlbAKICAgICAgICAgKiBAcGFyYW0gZGF0YSDlvoXmj5LlhaXmlbDmja4KICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sg5Zue6LCD5Ye95pWwCiAgICAgICAgICovCiAgICAgICAgZnVuY3Rpb24gYWNwdXNoKGRhdGEsIGNhbGxiYWNrKSB7CiAgICAgICAgICAvLyDlpoLmnpzmmK/lnoPlnL7mlbDmja7vvIzpgqPkuYjlj6/ku6XkuKLlvIPnmoQKICAgICAgICAgIGlmICghZGF0YSkgcmV0dXJuOwogICAgICAgICAgLy8g5aaC5p6c5pWw5o2u5Lit5pyJ5Zue6L2m77yM6YKj5pWw5o2u5Lmf5piv5peg5pWI55qE5q2j5paH6ICM5beyCiAgICAgICAgICBpZiAoZGF0YS5yZXBsYWNlKC8oe3x9fCx8XCt877yafOOAgnxcbikvKSAhPT0gZGF0YSkgcmV0dXJuOwogICAgICAgICAgaWYgKHRoaXMuZmluZEluZGV4KG0gPT4gbSA9PT0gZGF0YSkgPCAwKSB7CiAgICAgICAgICAgIHRoaXMucHVzaChkYXRhKTsKICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2sodGhpcyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGFjcmVtb3ZlKGRhdGEsIGNhbGxiYWNrKSB7CiAgICAgICAgICBsZXQgZGVsSWQgPSB0aGlzLmZpbmRJbmRleChtID0+IG0gPT09IGRhdGEpOwogICAgICAgICAgaWYgKGRlbElkID49IDApIHsKICAgICAgICAgICAgdGhpcy5zcGxpY2UoZGVsSWQsIDEpOwogICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh0aGlzKTsKICAgICAgICAgIH0gLy8g5Yig6ZmkZGVsSWTnmoTmlbDmja7vvIzliKDpmaTkuIDkuKoKICAgICAgICB9CiAgICAgICAgLy8g6YG/5YWN5rGh5p+T5YWo5bGA5Y6f5Z6L6ZO+CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QsICdhY3B1c2gnLCB7dmFsdWU6IGFjcHVzaH0pCiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QsICdhY3JlbW92ZScsIHt2YWx1ZTogYWNyZW1vdmV9KQogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvdGhlckRhdGEub3RoZXIuY3VySG9zdHMsICdhY3B1c2gnLCB7dmFsdWU6IGFjcHVzaH0pCiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG90aGVyRGF0YS5vdGhlci5jdXJIb3N0cywgJ2FjcmVtb3ZlJywge3ZhbHVlOiBhY3JlbW92ZX0pCiAgICAgIH0oKTsKCgoKICAgICAgIWZ1bmN0aW9uICgpIHsKICAgICAgICBsZXQgaW5zZXJ0TG9ja2VkID0gZmFsc2U7CiAgICAgICAgaWYgKHR5cGVvZiBHTV9nZXRSZXNvdXJjZVRleHQgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICBHTS5nZXRSZXNvdXJjZVRleHQgPSBHTV9nZXRSZXNvdXJjZVRleHQgPSBhc3luYyBmdW5jdGlvbiAoYVJlc291cmNlTmFtZSkgewogICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgKGF3YWl0IGZldGNoKGF3YWl0IEdNLmdldFJlc291cmNlVXJsKGFSZXNvdXJjZU5hbWUpKSkudGV4dCgpOwogICAgICAgICAgICBsZXQgc2F2ZVJlcyA9IGF3YWl0IEdNLmdldFZhbHVlKGFSZXNvdXJjZU5hbWUpOwogICAgICAgICAgICBpZiAodHlwZW9mIChzYXZlUmVzKSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICBHTS5zZXRWYWx1ZShhUmVzb3VyY2VOYW1lLCByZXMpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiBzYXZlUmVzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChHTV9nZXRSZXNvdXJjZVRleHQpIHsKICAgICAgICAgIC8vIOS7heWcqOaUr+aMgUdNX2dldFJlc291cmNlVGV4dOeahOWuueWZqOS4iui/m+ihjOWKqOaAgeaVsOaNruabtOaWsAogICAgICAgICAgLy8g5LiU6IO96Ziy5q2i6LC35q2M55m+5bqm6aG16Z2i6KeE5YiZ5aSn5Y+Y5Yqo5Y+I6ZyA6KaB5pu05paw6ISa5pysIC0g54m55Yir5piv5raJ5Y+K57+76aG15Y+C5pWwCiAgICAgICAgICBsZXQgY29uZmlnID0gR01fZ2V0UmVzb3VyY2VUZXh0KCJTaXRlQ29uZmlnUnVsZXMiKTsKICAgICAgICAgIGV2YWwoY29uZmlnKTsKICAgICAgICAgIGlmICh0eXBlb2YgKG9ubGluZURCKSA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcigi57q/5LiK5pWw5o2u5Li656m6Iik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBEQlNpdGUgPSBvbmxpbmVEQjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoInh1ZXNodS5iYWlkdS5jb20iKSkgewogICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5iYWlkdV94dWVzaHU7CiAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5ob3N0LmluY2x1ZGVzKCIuYmFpZHUuY29tIikpIHsKICAgICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LnJlcGxhY2UoLyhhbmRyb2lkfG1vYmlsZXxpcGhvbmUpL2lnbSwgIiIpICE9PSBuYXZpZ2F0b3IudXNlckFnZW50KSB7CiAgICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUubUJhaWR1OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5iYWlkdTsKICAgICAgICAgIH0KICAgICAgICAgIENPTlNULnVzZUl0ZW0gPSBBQ0NvbmZpZy5iYWlkdTsKICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoInpoaWh1LmNvbSIpKSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLnpoaWh1OwogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLnpoaWh1OwogICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygic29nb3UiKSkgewogICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5zb2dvdTsKICAgICAgICAgIENPTlNULnVzZUl0ZW0gPSBBQ0NvbmZpZy5zb2dvdTsKICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoInNvLmNvbSIpKSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLmhhb3NvdTsKICAgICAgICAgIENPTlNULnVzZUl0ZW0gPSBBQ0NvbmZpZy5vdGhlcjsKICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoImdvb2dsZSIpKSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLmdvb2dsZTsKICAgICAgICAgIENPTlNULnVzZUl0ZW0gPSBBQ0NvbmZpZy5nb29nbGU7CiAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5ob3N0LmluY2x1ZGVzKCJiaW5nIikpIHsKICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuYmluZzsKICAgICAgICAgIENPTlNULnVzZUl0ZW0gPSBBQ0NvbmZpZy5iaW5nOwogICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygiZHVja2R1Y2tnbyIpKSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLmR1Y2s7CiAgICAgICAgICBDT05TVC51c2VJdGVtID0gQUNDb25maWcuZHVjazsKICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoImRvZ2Vkb2dlIikpIHsKICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuZG9nZTsKICAgICAgICAgIENPTlNULnVzZUl0ZW0gPSBBQ0NvbmZpZy5kb2dlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLm90aGVyOwogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLm90aGVyOwogICAgICAgIH0KICAgICAgICBjdXJTaXRlLnBhZ2VOdW0gPSAxOyAvLyDlvZPliY3pobXmlbAKICAgICAgICBjdXJTaXRlLnBhZ2VMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgY3VyU2l0ZS5wYWdlVXJsID0gIiI7CiAgICAgICAgaWYgKAogICAgICAgICAgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFICYmIGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvdGJtPShpc2NofGxjbHxzaG9wfGZsbSkvLCAiIikgIT09IGxvY2F0aW9uLmhyZWYgKSB8fAogICAgICAgICAgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQklORyAmJiBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoL2ltYWdlc1wvc2VhcmNoLywgIiIpICE9PSBsb2NhdGlvbi5ocmVmICkKICAgICAgICApIHsKICAgICAgICAgIC8vIOWbvueJh+ermSDjgIHlnLDlm77nq5njgIHotK3niannq5kKICAgICAgICAgIGNvbnNvbGUubG9nKCLnibnmrornq5ks5LiN5Yqg6L295qC35byP77yM5LiN5re75YqgbWVudSIpOwogICAgICAgICAgQ09OU1QuaXNHb29nbGVJbWFnZVVybCA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBpZihjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVX1hVRVNIVSl7CiAgICAgICAgICBDT05TVC51c2VJdGVtLkFkc1N0eWxlTW9kZSA9IDI7IC8vIOWNleWIl+WxheS4reWNs+WPrwogICAgICAgIH0KCiAgICAgICAgaWYgKEFDQ29uZmlnLkFkc1N0eWxlRW5hYmxlKSB7CiAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlciA9IEZTQmFpZHUoKTsgLy8g5re75Yqg6K6+572u6aG5LeWNleWPjOWIl+aYvuekugogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2coIiVjW0FDLVJlZGlyZWN0XSAlY0xldCBNZSBJbnRyb2R1Y2UgeW91IGEgVmVyeSBHb29kIFNlYXJjaCBFbmdpbmXvvJolYyAlcyAlY1NlYXJjaCBFbmdpbmUuIiwgImZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6Y29ybmZsb3dlcmJsdWUiLCAiY29sb3I6MCIsICJmb250LXdlaWdodDpib2xkO2NvbG9yOmRhcmtvcmFuZ2UiLCBDT05TVC51c2VJdGVtLm5hbWUucmVwbGFjZShDT05TVC51c2VJdGVtLm5hbWVbMF0sIENPTlNULnVzZUl0ZW0ubmFtZVswXS50b1VwcGVyQ2FzZSgpKSwgImZvbnQtd2VpZ2h0Om5vcm1hbDtjb2xvcjowIik7CgogICAgICAgIGxldCBTaXRlQmxvY2sgPSB7CiAgICAgICAgICAvKioKICAgICAgICAgICAqIOWIneWni+WMlkJsb2Nr5qC35byPCiAgICAgICAgICAgKi8KICAgICAgICAgIGluaXRTdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBBQ19hZGRTdHlsZSgiYnV0dG9uLmdoaGlkZXIuZ2hoYlthYy11c2VyLWFsdGVyPScxJ106OmJlZm9yZXtjb250ZW50Oiflj5bmtoggLSAnO30jc3AtYWMtY29udGFpbmVyIC5hYy1ibG9jay1pdGVte2NvbG9yOiNBQUE7bWFyZ2luLWxlZnQ6NDhweDt9I3NwLWFjLWNvbnRhaW5lciAuYWMtYmxvY2staXRlbWRlbHtmbG9hdDpyaWdodDttYXJnaW4tbGVmdDowO3BhZGRpbmc6MCAyMHB4O2N1cnNvcjpwb2ludGVyO30jc3AtYWMtY29udGFpbmVyIC5hYy1ibG9jay1pdGVtZGVsOmhvdmVye2NvbG9yOnJlZDt9I3NwLWFjLWNvbnRhaW5lciAuYWMtYmxvY2staGlnaHtjb2xvcjojMDAwO30uYWMtYmxvY2tMaXN0IGxpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2EzY2FmZjtjb2xvcjp3aGl0ZSAhaW1wb3J0YW50O2N1cnNvcjpwb2ludGVyO30gKlthYy1uZWVkaGlkZV0gKntkaXNwbGF5Om5vbmV9ICpbYWMtbmVlZGhpZGVdIC5ibG9ja1Nob3d7ZGlzcGxheTp1bnNldDtjdXJzb3I6cG9pbnRlcjt9ICpbYWMtbmVlZGhpZGVdIC5ibG9ja1Nob3c6aG92ZXJ7Ym9yZGVyOjFweCBzb2xpZCAjREREfWJ1dHRvbi5naGhpZGVye2NvbG9yOiM1NTU7YmFja2dyb3VuZC1jb2xvcjojZmNmY2ZjO2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7bWFyZ2luOmF1dG8gMnB4O2JvcmRlcjoxcHggc29saWQgI2NjYztib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCAzcHh9YnV0dG9uLmdoaGlkZXJ7Zm9udC1zaXplOjEycHh9YnV0dG9uLmdoaGlkZXI6aG92ZXJ7Y29sb3I6IzAwNmFmZjtiYWNrZ3JvdW5kOiNmZmZ9IiwKICAgICAgICAgICAgICAiQUMtQmxvY2tTdHlsZSIpOwogICAgICAgICAgfSwKICAgICAgICAgIC8qKgogICAgICAgICAgICog5Yid5aeL5YyW5bGP6JS95oyJ6ZKu5Yqg6L29CiAgICAgICAgICAgKi8KICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IGNoZWNrTm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGN1clNpdGUuTWFpblR5cGUgKyAiOm5vdChbYWNibG9ja10pIik7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hlY2tOb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsZXQgY3VyTm9kZSA9IGNoZWNrTm9kZXNbaV07CiAgICAgICAgICAgICAgICBsZXQgZmF2aWNvbk5vZGUgPSBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoY3VyU2l0ZS5GYXZpY29uVHlwZSk7CiAgICAgICAgICAgICAgICAvLyBpZihjdXJOb2RlLmhhc0F0dHJpYnV0ZSgiYWNibG9jayIpKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIGxldCBob3N0ID0gZ2V0Tm9kZUhvc3QoZmF2aWNvbk5vZGUpLmN1ckhvc3Q7CiAgICAgICAgICAgICAgICAvLyBpZihob3N0ID09PSBudWxsKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIGxldCBmYU5vZGUgPSBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoY3VyU2l0ZS5CbG9ja1R5cGUpOwogICAgICAgICAgICAgICAgbGV0IG5vZGVTdHlsZSA9ICJkaXNwbGF5OnVuc2V0OyI7CiAgICAgICAgICAgICAgICBpZiAoQUNDb25maWcuaXNCbG9ja0J0bk5vdERpc3BsYXkpIHsKICAgICAgICAgICAgICAgICAgbm9kZVN0eWxlID0gImRpc3BsYXk6bm9uZTsiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZmFOb2RlLmluc2VydEFkamFjZW50SFRNTCgiYWZ0ZXJlbmQiLCBgPGJ1dHRvbiBzdHlsZT0nJHtub2RlU3R5bGV9JyBjbGFzcz0nZ2hoaWRlciBnaGhiJyBocmVmPSIke2Zhdmljb25Ob2RlLmhyZWYgfHwgZmF2aWNvbk5vZGUuaW5uZXJUZXh0fSIgbWV0YT0iJHtob3N0fSIgZGF0YS1ob3N0PSIke2hvc3R9IiB0aXRsZT0nJHt0aGlzLmdldEJsb2NrQnRuVGl0bGUoaG9zdCl9Jz5ibG9jazwvYnV0dG9uPmApOwoKICAgICAgICAgICAgICAgIGN1ck5vZGUuc2V0QXR0cmlidXRlKCJhY2Jsb2NrIiwgIjAiKTsKICAgICAgICAgICAgICAgIGN1ck5vZGUuc2V0QXR0cmlidXRlKCJhY2Jsb2NrIiwgIjAiKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuaW5pdExpc3RlbmVyKCk7CiAgICAgICAgICAgIHRoaXMucmVuZGVyRGlzcGxheSgpOwogICAgICAgICAgfSwKICAgICAgICAgIGdldEJsb2NrQnRuVGl0bGUoaG9zdCl7CiAgICAgICAgICAgIHJldHVybiBg54K55Ye75Y2z5Y+v5bGP6JS9ICR7aG9zdH0g5pS+5byA77yM6ZyA6KaB5Zyo6Ieq5a6a5LmJ5Lit5omL5Yqo6YWN572u5pS+5byAYDsKICAgICAgICAgIH0sCiAgICAgICAgICBpbml0TGlzdGVuZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IGNoZWNrTm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJidXR0b24uZ2hoaWRlcjpub3QoW2FjRW52XSkiKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGVja05vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgY2hlY2tOb2Rlc1tpXS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIHRoaXMuZG9IaWRlRW52KTsKICAgICAgICAgICAgICBjaGVja05vZGVzW2ldLnNldEF0dHJpYnV0ZSgiYWNFbnYiLCAiMCIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZG9IaWRlRW52OiBmdW5jdGlvbiAoZW52KSB7CiAgICAgICAgICAgIC8vIOWFiOaPkuWFpeaVsOaNri0tLeiusOW+l+i/mOimgeWGmeWFpeWtmOWCqAogICAgICAgICAgICBsZXQgbm9kZSA9IGVudi5zb3VyY2VUYXJnZXQgfHwgZW52LnRhcmdldDsKICAgICAgICAgICAgbGV0IGhvc3QgPSBub2RlLmRhdGFzZXQuaG9zdDsKICAgICAgICAgICAgaWYgKCtub2RlLmdldEF0dHJpYnV0ZSgiYWMtdXNlci1hbHRlciIpID09PSAxKSB7CiAgICAgICAgICAgICAgLy8g5bey57uP5bGP6JS95LmL5ZCO77yM5YaN5qyh54K55Ye7YmxvY2vlupTor6XmmK/lj5bmtojnirbmgIEKICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgiYWMtdXNlci1hbHRlciIpOwogICAgICAgICAgICAgIEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuYWNyZW1vdmUoaG9zdCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8g5q2j5bi45bGP6JS95pON5L2cCiAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoImFjLXVzZXItYWx0ZXIiKTsKICAgICAgICAgICAgICBBQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0LmFjcHVzaChob3N0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBEQkNvbmZpZy5Vc2VyQmxvY2tMaXN0ID0gQUNDb25maWcuVXNlckJsb2NrTGlzdDsKICAgICAgICAgICAgQUNTZXRWYWx1ZSgiQ29uZmlnIiwgSlNPTi5zdHJpbmdpZnkoREJDb25maWcpKTsgLy8g54K55Ye75LiA5qyh77yM5L+d5a2Y5LiA5qyhCiAgICAgICAgICAgIFNpdGVCbG9jay5yZW5kZXJEaXNwbGF5KCk7CiAgICAgICAgICAgIGVudi5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyDliLfmlrDmmL7npLrmlYjmnpwtLeiAl+aXtuaTjeS9nAogICAgICAgICAgcmVuZGVyRGlzcGxheTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgY2hlY2tOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY3VyU2l0ZS5NYWluVHlwZSk7CiAgICAgICAgICAgIGxldCBmbGFnID0gImFjLW5lZWRoaWRlIjsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGVja05vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxldCBjdXJOb2RlID0gY2hlY2tOb2Rlc1tpXTsKICAgICAgICAgICAgICAgIGxldCB7Y3VySG9zdCwgY3VyVXJsfSA9IGdldE5vZGVIb3N0KGN1ck5vZGUucXVlcnlTZWxlY3RvcihjdXJTaXRlLkZhdmljb25UeXBlKSk7CiAgICAgICAgICAgICAgICBjdXJVcmwgPSBjdXJVcmwgfHwgIiI7CiAgICAgICAgICAgICAgICBpZiAoY3VySG9zdCA9PT0gbnVsbCkgY29udGludWU7CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGxldCBCbG9ja0J0biA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcigiLmdoaGlkZXIuZ2hoYiIpOwogICAgICAgICAgICAgICAgICBCbG9ja0J0bi5kYXRhc2V0Lmhvc3QgPSBCbG9ja0J0bi5kYXRhc2V0Lm1ldGEgPSBjdXJIb3N0OwogICAgICAgICAgICAgICAgICBCbG9ja0J0bi50aXRsZSA9IHRoaXMuZ2V0QmxvY2tCdG5UaXRsZShjdXJIb3N0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoImJ1dHRvblthYy11c2VyLWFsdGVyXSIpICE9IG51bGwpIGNvbnRpbnVlOyAvLyDnlKjmiLfmiYvliqjngrnov4fmmL7npLrnmoTvvIzpgqPkuYjot7Pov4djaGVjawogICAgICAgICAgICAgICAgbGV0IHJlZ0xpc3QgPSB2dWVWTS5jYWxfVXNlckJsb2NrTGlzdFJlZ2V4OyAvLyDkvb/nlKhWdWXnmoRjb21wdXRlZOWxnuaAp+iuoeeul+eahOaVsOaNruWAvO+8jOS4gOiIrOagueacrOS4jeabtOaWsAogICAgICAgICAgICAgICAgaWYgKCFjdXJVcmwuaW5jbHVkZXMoInd3dy5iYWlkdS5jb20vbGluayIpICYmIHJlZ0xpc3QuZmluZEluZGV4KG9uZSA9PiB7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uZS50ZXN0KGN1ckhvc3QpIHx8IG9uZS50ZXN0KGN1clVybCk7IC8vIOiAl+aXtuaTjeS9nAogICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0gPT09IGN1ckhvc3Q7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pID49IDApIHsKICAgICAgICAgICAgICAgICAgLy8g5Y+q5qOA5p+l5Zyo5bGP6JS96KGo5Lit55qE5pWw5o2uCiAgICAgICAgICAgICAgICAgIGlmICghY3VyTm9kZS5oYXNBdHRyaWJ1dGUoZmxhZykpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoQUNDb25maWcuaXNCbG9ja0Rpc3BsYXkpIHsgLy8g5a+55LqO5LiN5pi+56S655qE5pWw5o2u5Y+v5Lul6L+b6KGM56e76Zmk5pON5L2cCiAgICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxldCBjdXJUaXRsZSA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcihjdXJTaXRlLkJsb2NrVHlwZSk7CiAgICAgICAgICAgICAgICAgICAgY3VyVGl0bGUgPSBjdXJUaXRsZS5pbm5lclRleHQgfHwgY3VyVGl0bGUudGV4dENvbnRlbnQ7CgogICAgICAgICAgICAgICAgICAgIGlmIChjdXJOb2RlLmhhc0F0dHJpYnV0ZShmbGFnKSkgewogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIuWGsueqgeS6hu+8ge+8ge+8gSIpOwogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnNldEF0dHJpYnV0ZShmbGFnLCAiMSIpOwogICAgICAgICAgICAgICAgICAgIGN1ck5vZGUuaW5zZXJ0QWRqYWNlbnRIVE1MKCJhZnRlckJlZ2luIiwgYDxzcGFuIGNsYXNzPSJibG9ja1Nob3ciIHRpdGxlPSLlpoLmnpzpnIDopoHkuIDnm7TmmL7npLrvvIzor7flnKjoh6rlrprkuYnkuK1ESVnnm67lvZXnp7vpmaTmnKzlnLDlnYAiPiR7Y3VyVGl0bGV9Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IC1ibG9jayBieSAke2N1ckhvc3R9PC9zcGFuPmApOwoKICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKHhjdXIpIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIOW3sue7j+Wxj+iUveS5i+WQjueahOWGheWuue+8jOeCueWHu+S4gOS4i+aYvuekuuWOn+Wni+WGheWuuQogICAgICAgICAgICAgICAgICAgICAgeGN1ci5xdWVyeVNlbGVjdG9yKCIuYmxvY2tTaG93IikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoZW52KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCJidXR0b24uZ2hoaWRlciIpLnNldEF0dHJpYnV0ZSgiYWMtdXNlci1hbHRlciIsICIxIik7IC8vIOi/meS4quWxnuaAp+eUqOS6juS/neaMgeWcqERPTeabtOaWsOaXtu+8jOaMiemSruS4jeWPmAogICAgICAgICAgICAgICAgICAgICAgICB4Y3VyLnJlbW92ZUF0dHJpYnV0ZShmbGFnKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2FmZUZ1bmN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB4Y3VyLnF1ZXJ5U2VsZWN0b3IoIi5ibG9ja1Nob3ciKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVudi5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pKGN1ck5vZGUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBjdXJOb2RlLnJlbW92ZUF0dHJpYnV0ZShmbGFnKTsKICAgICAgICAgICAgICAgICAgc2FmZUZ1bmN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoIi5ibG9ja1Nob3ciKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIGFkZFN0eWxlKGNzcykgeyAvL+a3u+WKoENTU+eahOS7o+eggS0tY29weeeahAogICAgICAgICAgbGV0IHBpID0gZG9jdW1lbnQuY3JlYXRlUHJvY2Vzc2luZ0luc3RydWN0aW9uKAogICAgICAgICAgICAneG1sLXN0eWxlc2hlZXQnLAogICAgICAgICAgICAndHlwZT0idGV4dC9jc3MiIG11c3Q9ImZhbHNlIiBocmVmPSJkYXRhOnRleHQvY3NzO3V0Zi04LCcgKyBlbmNvZGVVUklDb21wb25lbnQoY3NzKSArICciJwogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybiBkb2N1bWVudC5pbnNlcnRCZWZvcmUocGksIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoQUNDb25maWcuaXNBZHNFbmFibGUpIHsKICAgICAgICAgIC8vIGRpc3BsYXnlt7Lnu4/ml6Dms5XpmpDol4/ku5bku6zkuobvvIzpnIDopoHnlKjnu53lr7nnmoTpmpDol48KICAgICAgICAgIGFkZFN0eWxlKCIjYm90dG9tYWRze2Rpc3BsYXk6bm9uZTt9ICNjb250ZW50X2xlZnQ+ZGl2Om5vdChbaWRdKT5kaXZbY21hdGNoaWRdLCAjY29udGVudF9sZWZ0PmRpdltpZCo9JzMwMCddOm5vdChbY2xhc3MqPSdyZXN1bHQnXSksI2NvbnRlbnRfcmlnaHQgdGQ+ZGl2Om5vdChbaWRdKSwjY29udGVudF9yaWdodD5icntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTY2NjZweDt9Iik7CiAgICAgICAgfQogICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSAmJiBBQ0NvbmZpZy5pc0dvb2xlSW5CYWlkdU1vZGVFbmFibGUpIHsKICAgICAgICAgIHNhZmVXYWl0RnVuYygiI2xvZ28gaW1nLCAjbG9nb2NvbnQgaW1nIiwgZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgbGV0IGZhTm9kZSA9IG5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlOwogICAgICAgICAgICBmYU5vZGUuY2xhc3NMaXN0LmFkZCgiYmFpZHUiKTsKICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoInNyYyIpOwogICAgICAgICAgICBub2RlLnNyYyA9ICJodHRwczovL3BpYy5ybWIuYmRzdGF0aWMuY29tL2M4NjI1NWU4MDI4Njk2MTM5ZDNlM2U0YmI0NGMwNDdiLnBuZyI7CiAgICAgICAgICAgIG5vZGUud2lkdGggPSAiMTI1IjsKICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoImhlaWdodCIpOwogICAgICAgICAgfSk7CiAgICAgICAgICBzYWZlV2FpdEZ1bmMoIiNtYWluIC5sb2dvIGltZ1thbHQ9J0dvb2dsZSddIiwgZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoInNyY3NldCIpOwogICAgICAgICAgICBub2RlLnNyYyA9ICJodHRwczovL3d3dy5iYWlkdS5jb20vaW1nL2JkX2xvZ28xLnBuZz93aGVyZT1zdXBlciI7CiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCJoZWlnaHQiLCAiNTkiKTsKICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICBzYWZlV2FpdEZ1bmMoImZvcm1bcm9sZT0nc2VhcmNoJ10gLmxvZ28gaW1nIiwgZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoInNyY3NldCIpOwogICAgICAgICAgICBub2RlLnNyYyA9ICJodHRwczovL3d3dy5iYWlkdS5jb20vaW1nL2JkX2xvZ28xLnBuZz93aGVyZT1zdXBlciI7CiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCJoZWlnaHQiLCAiNTkiKTsKICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IGRvY3VtZW50LnRpdGxlLnJlcGxhY2UoL15Hb29nbGUvLCAi55m+5bqm5LiA5LiL77yM5L2g5bCx55+l6YGTIikKICAgICAgICAgIC5yZXBsYWNlKC8gLSBHb29nbGUg5pCc57SiLywgIl/nmb7luqbmkJzntKIiKQogICAgICAgICAgLnJlcGxhY2UoLyAtIEdvb2dsZSBTZWFyY2gvLCAiX+eZvuW6puaQnOe0oiIpOwogICAgICAgICAgc2FmZVdhaXRGdW5jKCJoZWFkIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgbGlua1RhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImxpbmtbdHlwZT0naW1hZ2UveC1pY29uJ10iKSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7CiAgICAgICAgICAgIGxpbmtUYXJnZXQudHlwZSA9ICdpbWFnZS94LWljb24nOwogICAgICAgICAgICBsaW5rVGFyZ2V0LnJlbCA9ICdzaG9ydGN1dCBpY29uJzsKICAgICAgICAgICAgbGlua1RhcmdldC5ocmVmID0gJ2h0dHBzOi8vd3d3LmJhaWR1LmNvbS9mYXZpY29uLmljbyc7CiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGlua1RhcmdldCk7CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5EVUNLKSB7CiAgICAgICAgICBhZGRTdHlsZSA9IEFDX2FkZFN0eWxlIC8vIOWFvOWuuUR1Y2vnmoRDU1DlkIzmupDop4TliJkKICAgICAgICAgIGlmKEFDQ29uZmlnLm5vcm1hbGl6ZUR1Y2spewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgRERHLnNldHRpbmdzLnNldCgia24iLCAxLCB7ICAvLyDmlrDnqpflj6PmiZPlvIDpobXpnaIKICAgICAgICAgICAgICAgICAgc2F2ZVRvQ2xvdWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgIGZvcmNlVGhlbWU6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgRERHLnNldHRpbmdzLnNldCgia2F2IiwgMSwgeyAvLyDov57nu63mmL7npLrmkJzntKLnu5PmnpwKICAgICAgICAgICAgICAgICAgc2F2ZVRvQ2xvdWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgIGZvcmNlVGhlbWU6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIDUwMDApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuT1RIRVJTKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVJbnNlcnRlZCcsIE1haW5DYWxsYmFjaywgZmFsc2UpOwogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIE1haW5DYWxsYmFjaywgZmFsc2UpOwogICAgICAgICAgICBzYWZlV2FpdEZ1bmMoImJvZHkiLCAoKSA9PiB7CiAgICAgICAgICAgICAgIWRvY3VtZW50LmJvZHkuaGFzQXR0cmlidXRlKENPTlNULnVzZUl0ZW0ubmFtZSkgJiYgZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUoQ09OU1QudXNlSXRlbS5uYW1lLCAiMSIpOwogICAgICAgICAgICAgICFkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyhDT05TVC51c2VJdGVtLm5hbWUpICYmIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChDT05TVC51c2VJdGVtLm5hbWUpOwogICAgICAgICAgICAgIGlmIChBQ0NvbmZpZy5BZHNTdHlsZUVuYWJsZSkgeyAvLyDljZXni6zkuI3pnIDopoHlrprml7blmagt6aC757mB6Kem5Y+RLei9veWFpWNzcwogICAgICAgICAgICAgICAgRlNCYWlkdSgpOwogICAgICAgICAgICAgICAgQWRkQ3VzdG9tU3R5bGUoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIFJBRkludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpZihkb2N1bWVudC5ib2R5KSB7CiAgICAgICAgICAgICAgICByYXBpZERlYWwoKTsgLy8g5a6a5pyf6LCD55So77yM6YG/5YWN5pyJ5pe25YCZRE9N5o+S5YWl5rKh5pyJ5omn6KGM5a+86Ie055qE6Zeu6aKYCiAgICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CQUlEVSAmJiBsb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCJ0bj1uZXdzIikpIHsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUoIm5ld3MiLCAiMSIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVBdHRyaWJ1dGUoIm5ld3MiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIDgwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgfQogICAgICAgIHNhZmVXYWl0RnVuYygiI3NwLWFjLWNvbnRlbnQiLCBmdW5jdGlvbiAoY2hlY2tOb2RlKSB7CiAgICAgICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICAgICAgZWw6IGNoZWNrTm9kZSwKICAgICAgICAgICAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBBbGxEYXRhOwogICAgICAgICAgICB9LAogICAgICAgICAgICBtZXRob2RzOiB7CiAgICAgICAgICAgICAgbGFiZWxTaG93SGlkZUVudihlKSB7CiAgICAgICAgICAgICAgICBsZXQgY3VyID0gZS5zcmNFbGVtZW50IHx8IGUudGFyZ2V0OwogICAgICAgICAgICAgICAgbGV0IGNsYXNzTmFtZSA9IGN1ci5wYXJlbnROb2RlLmNsYXNzTmFtZS5yZXBsYWNlKCJjb250YWluZXItbGFiZWwgIiwgIiIpOwogICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoIi5YWD5sYWJlbCwuWFg+YnJ7ZGlzcGxheTp1bnNldCAhaW1wb3J0YW50O30uWFg+LmxhYmVsX2hpZGV7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fSIucmVwbGFjZSgvWFgvZ20sIGNsYXNzTmFtZSksCiAgICAgICAgICAgICAgICAgICJBQy1TaG93SGlkZUl0ZW0tIiArIGNsYXNzTmFtZSwgImJvZHkiKTsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzeW5jVG9CbG9ja0xpc3QoZW52KSB7CiAgICAgICAgICAgICAgICB0aGlzLkFDQ29uZmlnLlVzZXJCbG9ja0xpc3QgPSBlbnYudGFyZ2V0LnZhbHVlLnNwbGl0KCJcbiIpLmZpbHRlcihpdGVtID0+IGl0ZW0gIT09ICcnKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHJlbW92ZUFCbG9ja0xpc3RJdGVtKGUpIHsKICAgICAgICAgICAgICAgIC8vIOeCueWHu+enu+mZpOafkOS4qmhvc3TmlbDmja7ml7YKICAgICAgICAgICAgICAgIGxldCB0YXJnZXQgPSBlLnNyY0VsZW1lbnQgfHwgZS50YXJnZXQ7CiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gImxhYmVsIikgewogICAgICAgICAgICAgICAgICBsZXQgaG9zdCA9IHRhcmdldC5kYXRhc2V0Lmhvc3Q7CiAgICAgICAgICAgICAgICAgIEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuYWNyZW1vdmUoaG9zdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBja0FkZFJ1bGUoKSB7CiAgICAgICAgICAgICAgICAvLyDmiYvliqjlop7liqDnp7vpmaTop4TliJkKICAgICAgICAgICAgICAgIEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuYWNwdXNoKHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtKTsKICAgICAgICAgICAgICAgIHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtID0gIiI7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBsb2FkQ3VzdG9tU3R5bGUoKSB7CiAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZShBQ0NvbmZpZy5Vc2VyU3R5bGVUZXh0LCAiQUMtdXNlclN0eWxlIiwgImhlYWQiLCB0cnVlKTsgLy8g55So5oi36Ieq5a6a5LmJ55qE5qC35byP6KGoCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzYXZlQ29uZmlnKCkgewogICAgICAgICAgICAgICAgaWYodGhpcy5vdGhlci5jdXJUYWI9PT0xICYmICF0aGlzLkFDQ29uZmlnLmFjY2VwdExpY2Vuc2UpewogICAgICAgICAgICAgICAgICB0aGlzLm90aGVyLmN1clRhYiA9IDMKICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLkFDQ29uZmlnLmFjY2VwdExpY2Vuc2UgPSB0cnVlCgogICAgICAgICAgICAgICAgdGhpcy5BQ0NvbmZpZy5sYXN0U2F2ZVRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgICAgICAgIEFDU2V0VmFsdWUoIkNvbmZpZyIsIEpTT04uc3RyaW5naWZ5KHRoaXMuQUNDb25maWcpKTsKICAgICAgICAgICAgICAgIGlmKCF0aGlzLkFDQ29uZmlnLmRvRGlzYWJsZVN1Zyl7CiAgICAgICAgICAgICAgICAgIGFjU2V0Q29va2llKCJPUklHSU4iLCAxLCAid3d3LmJhaWR1LmNvbSIsIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gODY0MDAwMDApOwogICAgICAgICAgICAgICAgICBhY1NldENvb2tpZSgiSVNTVyIsIDEsIG51bGwsIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gODY0MDAwMDApOwogICAgICAgICAgICAgICAgICBhY1NldENvb2tpZSgiSVNTVyIsIDEsICJ3d3cuYmFpZHUuY29tIiwgbmV3IERhdGUoKS5nZXRUaW1lKCkgLSA4NjQwMDAwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgfSwgMjAwKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNsb3NlUGFuZWwoKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB1c2VUaGlzSHV5YW5Db2xvcihlbnYpIHsKICAgICAgICAgICAgICAgIHRoaXMuQUNDb25maWcuZGVmYXVsdEh1WWFuQ29sb3IgPSBlbnYudGFyZ2V0LnZhbHVlIHx8IGVudi50YXJnZXQuZGF0YXNldC52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuQUNDb25maWcuZGVmYXVsdEh1WWFuQ29sb3IpOwogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZEh1WWFuU3R5bGUodGhpcy5BQ0NvbmZpZy5kZWZhdWx0SHVZYW5Db2xvcik7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBnZXRVc2VyQmxvY2tMaXN0UmVnZXgoKSB7CiAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy5BQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0LmZvckVhY2gob25lID0+IHsKICAgICAgICAgICAgICAgICAgb25lICE9PSBudWxsICYmIGxpc3QucHVzaChuZXcgUmVnRXhwKG9uZS5yZXBsYWNlKCIqIiwgIi4qIikpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzLm90aGVyLmFkZEJsb2NrSXRlbSkgIT09ICJ1bmRlZmluZWQiICYmIHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtICE9PSAiIikgewogICAgICAgICAgICAgICAgICBsaXN0LnB1c2gobmV3IFJlZ0V4cCh0aGlzLm90aGVyLmFkZEJsb2NrSXRlbS5yZXBsYWNlKCIqIiwgIi4qIikpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBsaXN0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29tcHV0ZWQ6IHsKICAgICAgICAgICAgICBnZXRCbG9ja0xpc3QoKSB7IC8vIOS8muiHquWKqOeahHJlbmRlcuWIsGh0bWzkuIrljrvvvIzkuI3nlKjmiYvliqjljrvmuLLmn5PkuIDpgY0KICAgICAgICAgICAgICAgIGxldCBpbnNIVE1MID0gIiI7CiAgICAgICAgICAgICAgICBsZXQgVXNlckJsb2NrUmVnTGlzdCA9IHRoaXMuY2FsX1VzZXJCbG9ja0xpc3RSZWdleDsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5BQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIGxldCBpbnNDbGFzcyA9IHRoaXMub3RoZXIuY3VySG9zdHMuZmluZEluZGV4KG0gPT4gewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgW2N1ckhvc3QsIGN1clVybF0gPSBtLnNwbGl0KCIjIyMiKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBVc2VyQmxvY2tSZWdMaXN0W2ldLnRlc3QoY3VySG9zdCkgfHwgVXNlckJsb2NrUmVnTGlzdFtpXS50ZXN0KGN1clVybCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0gPT09IEFDQ29uZmlnLlVzZXJCbG9ja0xpc3RbaV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KSA+PSAwID8gIiBhYy1ibG9jay1oaWdoIiA6ICIiOyAvLyDlpoLmnpzlvZPliY3pobXpnaLlrZjlnKjvvIzliJnpq5jkuq4KICAgICAgICAgICAgICAgICAgaW5zSFRNTCArPSBgPGxpPjxsYWJlbCBjbGFzcz0iYWMtYmxvY2staXRlbSR7aW5zQ2xhc3N9IiBkYXRhLWhvc3Q9IiR7dGhpcy5BQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0W2ldfSI+JHt0aGlzLkFDQ29uZmlnLlVzZXJCbG9ja0xpc3RbaV19PC9sYWJlbD48bGFiZWwgY2xhc3M9ImFjLWJsb2NrLWl0ZW0gYWMtYmxvY2staXRlbWRlbCIgZGF0YS1ob3N0PSIke3RoaXMuQUNDb25maWcuVXNlckJsb2NrTGlzdFtpXX0iPng8L2xhYmVsPjwvbGk+XG5gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGluc0hUTUw7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjYWxfZGl5QmxvY2tMaXN0QnRuKCkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMub3RoZXIuc2hvd0Jsb2NrTGlzdEFyZWEpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNldHRpbmdfcGFuZWxfc2Vjb25kLmJsb2NrRWRpdEJ0bkVuZF90ZXh0OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNldHRpbmdfcGFuZWxfc2Vjb25kLmJsb2NrRWRpdEJ0bl90ZXh0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY2FsX1VzZXJCbG9ja0xpc3RSZWdleCgpIHsKICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gW107CiAgICAgICAgICAgICAgICB0aGlzLkFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuZm9yRWFjaChvbmUgPT4gewogICAgICAgICAgICAgICAgICBvbmUgIT09IG51bGwgJiYgbGlzdC5wdXNoKG5ldyBSZWdFeHAob25lLnJlcGxhY2UoIioiLCAiLioiKSkpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtKSAhPT0gInVuZGVmaW5lZCIgJiYgdGhpcy5vdGhlci5hZGRCbG9ja0l0ZW0gIT09ICIiKSB7CiAgICAgICAgICAgICAgICAgIGxpc3QucHVzaChuZXcgUmVnRXhwKHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtLnJlcGxhY2UoIioiLCAiLioiKSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGxpc3Q7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBBZHNTdHlsZU1vZGVDaGFuZ2UoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICB2MTogQ09OU1QudXNlSXRlbS5BZHNTdHlsZU1vZGUsCiAgICAgICAgICAgICAgICAgIHYyOiBDT05TVC51c2VJdGVtLkh1WWFuTW9kZSwKICAgICAgICAgICAgICAgICAgdjM6IEFDQ29uZmlnLlN0eWxlX0JhaWR1TGl0ZSwKICAgICAgICAgICAgICAgICAgdjQ6IEFDQ29uZmlnLmlzRmF2aWNvbkVuYWJsZSwKICAgICAgICAgICAgICAgICAgdjU6IENPTlNULmlzR29vZ2xlU3BlY2lhbCwKICAgICAgICAgICAgICAgICAgdjY6IEFDQ29uZmlnLmlzUmlnaHREaXNwbGF5RW5hYmxlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgVXNlclN0eWxlRW5hYmxlQ2hhbmdlKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgdjE6IEFDQ29uZmlnLmlzVXNlclN0eWxlRW5hYmxlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBsYW5DaGFuZ2UoKXsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIHYxOiBBQ0NvbmZpZy5pc0VuTGFuZwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGlzU2F2ZUJ1dHRvbkNhbkJlU2VlKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGlzRWxlbWVudFZpc2libGUodGhpcy4kcmVmcy5ib3R0b21TYXZlQnV0dG9uKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgd2F0Y2g6IHsKICAgICAgICAgICAgICBBZHNTdHlsZU1vZGVDaGFuZ2UoZGF0YSkgewogICAgICAgICAgICAgICAgZGVidWdnZXIKICAgICAgICAgICAgICAgIC8vIOmcgOimgeWFiOWIoOmZpOWOn+acieeahOiKgueCueaVsOaNrgogICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAgICAgY29uc3Qge3Jlcywgbm9kZX0gPSBjaGVja0RvY21lbnRIYXNOb2RlKCJBQy0iKQogICAgICAgICAgICAgICAgICBpZiAocmVzKSBub2RlLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICBlbHNlIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNhZmVSZW1vdmUoInN0eWxlW2NsYXNzPSdBQy1TdHlsZS1leHBhbmQnXSxzdHlsZVtjbGFzcz0nQUMtVHdvUGFnZUV4U3R5bGUnXSxzdHlsZVtjbGFzcz0nQUMtVGhyZWVQYWdlRXhTdHlsZSddLHN0eWxlW2NsYXNzPSdBQy1Gb3VyUGFnZUV4U3R5bGUnXSxzdHlsZVtjbGFzcz0nQUMtc3R5bGUtbG9nbyddLHN0eWxlW2NsYXNzPSdBQy1iYWlkdUxpdGVTdHlsZSddLHN0eWxlW2NsYXNzPSdBQy1iYWlkdUh1WWFuU3R5bGUtRmlsZSddIik7CiAgICAgICAgICAgICAgICBhY0Nzc0xvYWRGbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5pbml0KCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBVc2VyU3R5bGVFbmFibGVDaGFuZ2UoKSB7CiAgICAgICAgICAgICAgICBpZihBQ0NvbmZpZy5pc1VzZXJTdHlsZUVuYWJsZSkgewogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRDdXN0b21TdHlsZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgc2FmZVJlbW92ZSgic3R5bGVbY2xhc3M9J0FDLXVzZXJTdHlsZSddIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGxhbkNoYW5nZSgpewogICAgICAgICAgICAgICAgQWxsRGF0YS5sYW4udXNlID0gQUNDb25maWcuaXNFbkxhbmcgPyBBbGxEYXRhLmxhbi5lbiA6IEFsbERhdGEubGFuLnpoX2NuOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI215dXNlciIpLnJlbW92ZSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIGlmICh0eXBlb2YgKFZ1ZSkgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgaWYgKCtWdWUudmVyc2lvbi5jaGFyQXQoMCkgPT09IDIpIHsKICAgICAgICAgICAgICB2dWVWTSA9IG5ldyBWdWUob3B0aW9ucyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdnVlVk0gPSBWdWUuY3JlYXRlQXBwKG9wdGlvbnMpLm1vdW50KGNoZWNrTm9kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlZ1ZSDmnKrlrozmiJDliJ3lp4vljJYtLeeoi+W6j+aXoOazleacieaViOaJp+ihjCIpOwogICAgICAgICAgfQogICAgICAgIH0sIDI1MCk7CgogICAgICAgIGZ1bmN0aW9uIE1haW5DYWxsYmFjayhlKSB7CiAgICAgICAgICBpZiAoZS50YXJnZXQgIT0gbnVsbCAmJiB0eXBlb2YgKGUudGFyZ2V0LmNsYXNzTmFtZSkgPT09ICJzdHJpbmciICYmIGUudGFyZ2V0LmNsYXNzTmFtZS50b1VwcGVyQ2FzZSgpLmluZGV4T2YoIkFDLSIpID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gLy/lsY/olL3mjonlm6DkuLrlop7liqBjc3Plr7zoh7TnmoTop6blj5FpbnNlcnTliqjkvZwKICAgICAgICAgIHJhcGlkRGVhbCgpOwogICAgICAgICAgSW5zZXJ0U2V0dGluZ01lbnUoKTsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBTaG93U2V0dGluZygpOwogICAgICAgICAgfSwgMTAwMCkgLy8g5rue5ZCO56qX5Y+j55qE5Yqg6L2977yM5YeP5bCR5YmN5pyfQ1BV5LqJ55SoCiAgICAgICAgfQoKICAgICAgICAvKuS7peS4i+S7o+eggeWkp+mDqOWIhuadpea6kOS6jlN1cHJlUHJlbG9hZGVyIOaEn+iwoiBzd2R5aCAmJiB5d3poYWlxaSAmJiBOTEYg5Lul5Y+KIG1hY2g2IOWkp+S9rCovCiAgICAgICAgZnVuY3Rpb24gYWNfc3BmdW5jKGUpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIui/memHjOaciemXrumimCIpCiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgdmFyIHQsIHIgPSBlLmN1cnJlbnRUYXJnZXQ7CiAgICAgICAgICB2YXIgVHdlZW4gPSB7CiAgICAgICAgICAgICAgICBMaW5lYXI6IGZ1bmN0aW9uIExpbmVhcihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiByICogZSAvIG4gKyB0OwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFF1YWQ6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogKGUgLz0gbikgKiBlICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1yICogKGUgLz0gbikgKiAoZSAtIDIpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSAvPSBuIC8gMikgPCAxID8gciAvIDIgKiBlICogZSArIHQgOiAtciAvIDIgKiAoLS1lICogKGUgLSAyKSAtIDEpICsgdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIEN1YmljOiB7CiAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAqIChlIC89IG4pICogZSAqIGUgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAqICgoZSA9IGUgLyBuIC0gMSkgKiBlICogZSArIDEpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSAvPSBuIC8gMikgPCAxID8gciAvIDIgKiBlICogZSAqIGUgKyB0IDogciAvIDIgKiAoKGUgLT0gMikgKiBlICogZSArIDIpICsgdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFF1YXJ0OiB7CiAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAqIChlIC89IG4pICogZSAqIGUgKiBlICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1yICogKChlID0gZSAvIG4gLSAxKSAqIGUgKiBlICogZSAtIDEpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSAvPSBuIC8gMikgPCAxID8gciAvIDIgKiBlICogZSAqIGUgKiBlICsgdCA6IC1yIC8gMiAqICgoZSAtPSAyKSAqIGUgKiBlICogZSAtIDIpICsgdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFF1aW50OiB7CiAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAqIChlIC89IG4pICogZSAqIGUgKiBlICogZSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogKChlID0gZSAvIG4gLSAxKSAqIGUgKiBlICogZSAqIGUgKyAxKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUgLz0gbiAvIDIpIDwgMSA/IHIgLyAyICogZSAqIGUgKiBlICogZSAqIGUgKyB0IDogciAvIDIgKiAoKGUgLT0gMikgKiBlICogZSAqIGUgKiBlICsgMikgKyB0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgU2luZTogewogICAgICAgICAgICAgICAgICBlYXNlSW46IGZ1bmN0aW9uIGVhc2VJbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1yICogTWF0aC5jb3MoZSAvIG4gKiAoTWF0aC5QSSAvIDIpKSArIHIgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAqIE1hdGguc2luKGUgLyBuICogKE1hdGguUEkgLyAyKSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1yIC8gMiAqIChNYXRoLmNvcyhNYXRoLlBJICogZSAvIG4pIC0gMSkgKyB0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgRXhwbzogewogICAgICAgICAgICAgICAgICBlYXNlSW46IGZ1bmN0aW9uIGVhc2VJbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgPT0gZSA/IHQgOiByICogTWF0aC5wb3coMiwgMTAgKiAoZSAvIG4gLSAxKSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9PSBuID8gdCArIHIgOiByICogKDEgLSBNYXRoLnBvdygyLCAtMTAgKiBlIC8gbikpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAwID09IGUgPyB0IDogZSA9PSBuID8gdCArIHIgOiAoZSAvPSBuIC8gMikgPCAxID8gciAvIDIgKiBNYXRoLnBvdygyLCAxMCAqIChlIC0gMSkpICsgdCA6IHIgLyAyICogKDIgLSBNYXRoLnBvdygyLCAtMTAgKiAtLWUpKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBDaXJjOiB7CiAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXIgKiAoTWF0aC5zcXJ0KDEgLSAoZSAvPSBuKSAqIGUpIC0gMSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAqIE1hdGguc3FydCgxIC0gKGUgPSBlIC8gbiAtIDEpICogZSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIC89IG4gLyAyKSA8IDEgPyAtciAvIDIgKiAoTWF0aC5zcXJ0KDEgLSBlICogZSkgLSAxKSArIHQgOiByIC8gMiAqIChNYXRoLnNxcnQoMSAtIChlIC09IDIpICogZSkgKyAxKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBFbGFzdGljOiB7CiAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4sIGEsIG8pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA9PSBlID8gdCA6IDEgPT0gKGUgLz0gbikgPyB0ICsgciA6IChvIHx8IChvID0gLjMgKiBuKSwgIWEgfHwgYSA8IE1hdGguYWJzKHIpID8gKGEgPSByLAogICAgICAgICAgICAgICAgICAgICAgaSA9IG8gLyA0KSA6IGkgPSBvIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihyIC8gYSksIC1hICogTWF0aC5wb3coMiwgMTAgKiAoZSAtPSAxKSkgKiBNYXRoLnNpbigoZSAqIG4gLSBpKSAqICgyICogTWF0aC5QSSkgLyBvKSArIHQpOwogICAgICAgICAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4sIGEsIG8pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA9PSBlID8gdCA6IDEgPT0gKGUgLz0gbikgPyB0ICsgciA6IChvIHx8IChvID0gLjMgKiBuKSwgIWEgfHwgYSA8IE1hdGguYWJzKHIpID8gKGEgPSByLAogICAgICAgICAgICAgICAgICAgICAgaSA9IG8gLyA0KSA6IGkgPSBvIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihyIC8gYSksIGEgKiBNYXRoLnBvdygyLCAtMTAgKiBlKSAqIE1hdGguc2luKChlICogbiAtIGkpICogKDIgKiBNYXRoLlBJKSAvIG8pICsgciArIHQpOwogICAgICAgICAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuLCBhLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgPT0gZSA/IHQgOiAyID09IChlIC89IG4gLyAyKSA/IHQgKyByIDogKG8gfHwgKG8gPSBuICogKC4zICogMS41KSksICFhIHx8IGEgPCBNYXRoLmFicyhyKSA/IChhID0gciwKICAgICAgICAgICAgICAgICAgICAgIGkgPSBvIC8gNCkgOiBpID0gbyAvICgyICogTWF0aC5QSSkgKiBNYXRoLmFzaW4ociAvIGEpLCBlIDwgMSA/IGEgKiBNYXRoLnBvdygyLCAxMCAqIChlIC09IDEpKSAqIE1hdGguc2luKChlICogbiAtIGkpICogKDIgKiBNYXRoLlBJKSAvIG8pICogLS41ICsgdCA6IGEgKiBNYXRoLnBvdygyLCAtMTAgKiAoZSAtPSAxKSkgKiBNYXRoLnNpbigoZSAqIG4gLSBpKSAqICgyICogTWF0aC5QSSkgLyBvKSAqIC41ICsgciArIHQpOwogICAgICAgICAgICAgICAgICAgIHZhciBpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgQmFjazogewogICAgICAgICAgICAgICAgICBlYXNlSW46IGZ1bmN0aW9uIGVhc2VJbihlLCB0LCByLCBuLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gYSAmJiAoYSA9IDEuNzAxNTgpLCByICogKGUgLz0gbikgKiBlICogKChhICsgMSkgKiBlIC0gYSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4sIGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBhICYmIChhID0gMS43MDE1OCksIHIgKiAoKGUgPSBlIC8gbiAtIDEpICogZSAqICgoYSArIDEpICogZSArIGEpICsgMSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gYSAmJiAoYSA9IDEuNzAxNTgpLCAoZSAvPSBuIC8gMikgPCAxID8gciAvIDIgKiAoZSAqIGUgKiAoKDEgKyAoYSAqPSAxLjUyNSkpICogZSAtIGEpKSArIHQgOiByIC8gMiAqICgoZSAtPSAyKSAqIGUgKiAoKDEgKyAoYSAqPSAxLjUyNSkpICogZSArIGEpICsgMikgKyB0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgQm91bmNlOiB7CiAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gciAtIFR3ZWVuLkJvdW5jZS5lYXNlT3V0KG4gLSBlLCAwLCByLCBuKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSAvPSBuKSA8IDEgLyAyLjc1ID8gciAqICg3LjU2MjUgKiBlICogZSkgKyB0IDogZSA8IDIgLyAyLjc1ID8gciAqICg3LjU2MjUgKiAoZSAtPSAxLjUgLyAyLjc1KSAqIGUgKyAuNzUpICsgdCA6IGUgPCAyLjUgLyAyLjc1ID8gciAqICg3LjU2MjUgKiAoZSAtPSAyLjI1IC8gMi43NSkgKiBlICsgLjkzNzUpICsgdCA6IHIgKiAoNy41NjI1ICogKGUgLT0gMi42MjUgLyAyLjc1KSAqIGUgKyAuOTg0Mzc1KSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA8IG4gLyAyID8gLjUgKiBUd2Vlbi5Cb3VuY2UuZWFzZUluKDIgKiBlLCAwLCByLCBuKSArIHQgOiAuNSAqIFR3ZWVuLkJvdW5jZS5lYXNlT3V0KDIgKiBlIC0gbiwgMCwgciwgbikgKyAuNSAqIHIgKyB0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBUd2Vlbk0gPSBbIkxpbmVhciIsICJRdWFkIiwgIkN1YmljIiwgIlF1YXJ0IiwgIlF1aW50IiwgIlNpbmUiLCAiRXhwbyIsICJDaXJjIiwgIkVsYXN0aWMiLCAiQmFjayIsICJCb3VuY2UiXSwKICAgICAgICAgICAgICBUd2VlbkVhc2UgPSBbImVhc2VJbiIsICJlYXNlT3V0IiwgImVhc2VJbk91dCJdOwogICAgICAgICAgdmFyIHByZWZzID0gewogICAgICAgICAgICBzX21ldGhvZDogMywKICAgICAgICAgICAgc19lYXNlOiAyLAogICAgICAgICAgICBzX0ZQUzogNjAsCiAgICAgICAgICAgIHNfZHVyYXRpb246IDMzMywKICAgICAgICAgIH07CgogICAgICAgICAgZnVuY3Rpb24gZ2V0UmVsYXRpdmVEaXYoZSkgewogICAgICAgICAgICB2YXIgdCA9IHIuaWQ7CiAgICAgICAgICAgIHJldHVybiAodCA9IHQucmVwbGFjZSgvKHNwLXNlcGFyYXRvci0pKC4rKS8sIChmdW5jdGlvbiAodCwgciwgbikgewogICAgICAgICAgICAgIHJldHVybiByICsgU3RyaW5nKE51bWJlcihuKSArICgicHJlIiA9PSBlID8gLTEgOiAxKSk7CiAgICAgICAgICAgIH0pKSkgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0KSA6IG51bGw7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gc3BfdHJhbnNpdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHZhciByID0gc3BfdHJhbnNpdGlvbi5Ud2VlbkY7CiAgICAgICAgICAgIHIgfHwgKHIgPSAociA9IFR3ZWVuW1R3ZWVuTVtwcmVmcy5zX21ldGhvZF1dKVtUd2VlbkVhc2VbcHJlZnMuc19lYXNlXV0gfHwgciwgc3BfdHJhbnNpdGlvbi5Ud2VlbkYgPSByKTsKICAgICAgICAgICAgdmFyIG4gPSAxZTMgLyBwcmVmcy5zX0ZQUywgYSA9IDAsIG8gPSBlLCBpID0gdCAtIGUsIHMgPSBNYXRoLmNlaWwocHJlZnMuc19kdXJhdGlvbiAvIG4pLAogICAgICAgICAgICAgICAgYyA9IHdpbmRvdy5zY3JvbGxYOwogICAgICAgICAgICAhZnVuY3Rpb24gdHJhbnNpdGlvbigpIHsKICAgICAgICAgICAgICB2YXIgZSA9IE1hdGguY2VpbChyKGEsIG8sIGksIHMpKTsKICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsKGMsIGUpLCBhIDwgcyAmJiAoYSsrLCBzZXRUaW1lb3V0KHRyYW5zaXRpb24sIG4pKTsKICAgICAgICAgICAgfSgpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHNjcm9sbEl0KGUsIHQpIHsKICAgICAgICAgICAgc3BfdHJhbnNpdGlvbihlLCB0KTsKICAgICAgICAgIH0KCiAgICAgICAgICBzd2l0Y2ggKGUudGFyZ2V0LmlkKSB7CiAgICAgICAgICAgIGNhc2UgInNwLXNwLWdvdG9wIjoKICAgICAgICAgICAgICBzY3JvbGxJdCh3aW5kb3cuc2Nyb2xsWSwgMCk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJzcC1zcC1nb3ByZSI6CiAgICAgICAgICAgICAgdmFyIG4gPSBnZXRSZWxhdGl2ZURpdigicHJlIik7CiAgICAgICAgICAgICAgaWYgKCFuKSByZXR1cm47CiAgICAgICAgICAgICAgdCA9IHdpbmRvdy5zY3JvbGxZOwogICAgICAgICAgICAgIHZhciBhID0gbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7CiAgICAgICAgICAgICAgYSA9IHQgLSAoci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSBhKTsKICAgICAgICAgICAgICBzY3JvbGxJdCh0LCBhKTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgInNwLXNwLWdvbmV4dCI6CiAgICAgICAgICAgICAgdmFyIG8gPSBnZXRSZWxhdGl2ZURpdigibmV4dCIpOwogICAgICAgICAgICAgIGlmICghbykgcmV0dXJuOwogICAgICAgICAgICAgIHQgPSB3aW5kb3cuc2Nyb2xsWTsKICAgICAgICAgICAgICB2YXIgaSA9IG8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOwogICAgICAgICAgICAgIGkgPSB0ICsgKC1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIGkpOwogICAgICAgICAgICAgIHNjcm9sbEl0KHQsIGkpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAic3Atc3AtZ29ib3R0b20iOgogICAgICAgICAgICAgIHNjcm9sbEl0KHdpbmRvdy5zY3JvbGxZLCBNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0LCBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCkpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gd2luZG93c2Nyb2xsKGZuID0gKCk9Pnt9KSB7CiAgICAgICAgICBzYWZlV2FpdEZ1bmMoKCkgPT4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAoKSA9PiB7CiAgICAgICAgICAgIHZhciBiZWZvcmVTY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyAvLyDlu7bml7bmiafooYzvvIzpgb/lhY3liJrovb3lhaXliLDpobXpnaLlsLHop6blj5Hnv7vpobXkuovku7YKICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHZhciBhZnRlclNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AsCiAgICAgICAgICAgICAgICAgICAgZGVsdGEgPSBhZnRlclNjcm9sbFRvcCAtIGJlZm9yZVNjcm9sbFRvcDsKICAgICAgICAgICAgICAgIGlmIChkZWx0YSA9PT0gMCkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgZm4oZGVsdGEgPiAwID8gImRvd24iIDogInVwIiwgZSk7CiAgICAgICAgICAgICAgICBiZWZvcmVTY3JvbGxUb3AgPSBhZnRlclNjcm9sbFRvcDsKICAgICAgICAgICAgICB9LCBmYWxzZSk7CiAgICAgICAgICAgIH0sIDEwMDApCiAgICAgICAgICB9KQogICAgICAgIH0KCiAgICAgICAgd2luZG93c2Nyb2xsKGZ1bmN0aW9uIChkaXJlY3Rpb24sIGUpIHsKICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICJkb3duIikgeyAvLyDkuIvmu5HmiY3lh4blpIfnv7vpobUKICAgICAgICAgICAgbGV0IHNwbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1mdy1hX2VuYWJsZSIpOwogICAgICAgICAgICAvLyDlvIDlkK/lkI7vvIzkuJTlnKjpnZ7vvIhzdXByZXByZWxvYWRlcuWQr+eUqO+8ieaXtuWdh+WPrwogICAgICAgICAgICBpZiAoQUNDb25maWcuaXNBdXRvcGFnZSA9PT0gdHJ1ZSAmJiAhKHNwbCAmJiBzcGwuY2hlY2tlZCA9PT0gdHJ1ZSkpIHsKICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CiAgICAgICAgICAgICAgbGV0IHNjcm9sbERlbHRhID0gNjY2OwogICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSkgc2Nyb2xsRGVsdGEgPSAxMDI0OyAvLyDmr5Xnq5/osLfmrYzliqDovb3nvJPmhaLnmoTpl67popgKICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCA8PSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0ICsgc2Nyb2xsVG9wICsgc2Nyb2xsRGVsdGEgJiYgY3VyU2l0ZS5wYWdlTG9hZGluZyA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIGN1clNpdGUucGFnZUxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuRFVDSykgeyAvLyDlj6/ku6XnlKjlt7LmnInnmoTmlrnms5XmnaXlrp7njrDkuoYKICAgICAgICAgICAgICAgICAgaWYgKCFBQ0NvbmZpZy5ub3JtYWxpemVEdWNrIHx8ICtBQ0NvbmZpZy5kdWNrLkFkc1N0eWxlTW9kZSA+PSAzKSB7ICAvLyDlpoLmnpzmsqHmnInlvIDlkK/vvIzpgqPkuYjmiYvliqjnv7vpobUgfHwg5aaC5p6c5piv5Y+M5YiX55qE5pe25YCZ77yM5Ly85LmO5bm25LiN5Lya6Ieq5Yqo6Kem5Y+R57+76aG15pWI5p6cCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2xpbmtzIC5yZXN1bHQtLW1vcmUgYSIpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBjdXJTaXRlLnBhZ2VMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIFNob3dQYWdlci5sb2FkTW9yZVBhZ2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgU2hvd1BhZ2VyID0gewogICAgICAgICAgZ2V0RnVsbEhyZWY6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmKGUgPT09IG51bGwpIHJldHVybiAnJzsKICAgICAgICAgICAgInN0cmluZyIgIT0gdHlwZW9mIGUgJiYgKGUgPSBlLmdldEF0dHJpYnV0ZSgiaHJlZiIpKTsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmdldEZ1bGxIcmVmLmE7CiAgICAgICAgICAgIHJldHVybiB0IHx8ICh0aGlzLmdldEZ1bGxIcmVmLmEgPSB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpKSwgdC5ocmVmID0gZSwgdC5ocmVmOwogICAgICAgICAgfSwKICAgICAgICAgIGNyZWF0ZURvY3VtZW50QnlTdHJpbmc6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgaWYgKCJIVE1MIiAhPT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lKSByZXR1cm4gKG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhlLCAiYXBwbGljYXRpb24veGh0bWwreG1sIik7CiAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHQgPSAobmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKGUsICJ0ZXh0L2h0bWwiKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdDsKICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KSB0ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCJBRG9jdW1lbnQiKTsgZWxzZSB0cnkgewogICAgICAgICAgICAgICAgKHQgPSBkb2N1bWVudC5jbG9uZU5vZGUoITEpKS5hcHBlbmRDaGlsZCh0LmltcG9ydE5vZGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAhMSkpLAogICAgICAgICAgICAgICAgICB0LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImhlYWQiKSksIHQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVudCgiYm9keSIpKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgICAgICAgICAgICAgICByLnNlbGVjdE5vZGVDb250ZW50cyhkb2N1bWVudC5ib2R5KTsKICAgICAgICAgICAgICAgIHZhciBuID0gci5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoZSk7CiAgICAgICAgICAgICAgICB0LmJvZHkuYXBwZW5kQ2hpbGQobik7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBhLCBvID0gewogICAgICAgICAgICAgICAgICBUSVRMRTogITAsCiAgICAgICAgICAgICAgICAgIE1FVEE6ICEwLAogICAgICAgICAgICAgICAgICBMSU5LOiAhMCwKICAgICAgICAgICAgICAgICAgU1RZTEU6ICEwLAogICAgICAgICAgICAgICAgICBCQVNFOiAhMAogICAgICAgICAgICAgICAgfSwgaSA9IHQuYm9keSwgcyA9IGkuY2hpbGROb2RlcywgYyA9IHMubGVuZ3RoIC0gMTsgYyA+PSAwOyBjLS0pIG9bKGEgPSBzW2NdKS5ub2RlTmFtZV0gJiYgaS5yZW1vdmVDaGlsZChhKTsKICAgICAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGNvbnNvbGUuZXJyb3IoIltBQy1TY3JpcHRdIiwgIuayoeacieaJvuWIsOimgei9rOaIkERPTeeahOWtl+espuS4siIpOwogICAgICAgICAgfSwKICAgICAgICAgIGxvYWRNb3JlUGFnZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoY3VyU2l0ZS5wYWdlcikgewogICAgICAgICAgICAgIGxldCBjdXJQYWdlRWxlID0gZ2V0RWxlbWVudEJ5WHBhdGgoY3VyU2l0ZS5wYWdlci5uZXh0TGluayk7CiAgICAgICAgICAgICAgdmFyIHVybCA9IHRoaXMuZ2V0RnVsbEhyZWYoY3VyUGFnZUVsZSk7CiAgICAgICAgICAgICAgaWYoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5HT09HTEUgKSB7CiAgICAgICAgICAgICAgICBpZihuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21hY2ludG9zaCcpKSB7CiAgICAgICAgICAgICAgICAgIC8vIE1BUksg5Li65LqG5YW85a6555m+5bqm5Zyoc2FmYXJp5LiL55qECiAgICAgICAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCdodHRwczovLycsICdodHRwOi8vJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmKHVybCA9PT0gJycpIHJldHVybjsKICAgICAgICAgICAgICB2YXIgc2VwSW1ncyA9IHsKICAgICAgICAgICAgICAgIHRvcDogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBV3RKUkVGVWVOcmNsRTByUkdFVXg4YzFHVXBSSklWSVpHZGhaQ1ZyMzhHR2hhSTBaWHdDa2xpZ2xDaFpFY3ZKeGhkZ1lXT2pMRVVwbS9FeWlMenplK284ZFR6ZE8zUGxqb1ZUdjdyUGM4LzVkKzY1NTV4WXJFaFdvcDZib2RhNSs2bDl3aldjV3BGK1dJYnFDSko5aEZSY0RyM1FBSWtJaEt1Z3o1UERma1NpeGtwaHo1YWlBbnFnRThyZ1dSeEdvU09QeUJrc3dRdVV3eXNjdzRIcm1GQ1pMOEt0L0pBZzdtRUZQRW1vNEZkUHdrMEJVY3NkeklhcDBUUThxTUFQdUlDY0VqTG5kK1ZqU2pjZkpOZ0ljL0RrWkdTeW1ZR3NuSzlFWk1yeGU0TUZhTkdpWmpDMmZUNXpRM3A3UURLMWRSMkdTbGp6aWNsQXZSVWU4bkhZVkE0amp2QzQzTmZBdWsvc21CMlFOcWNzV3hLY0xiQUtURm5TMGhXRDZuMjdGZDZGTHFpREk1aVFtUTlqcGlWVDBzTko2YVlkN2RBRTNRSEJiaW5TQVg1SldXYXh1TG84RjM1amgvYkJLOVkrL3IvQ2w2cExjbm5hOE52dURHTW5zbHBiWlJwWFpZVC8zcjRFR0FDWkwzWkwyYWZORkFBQUFBQkpSVTVFcmtKZ2dnPT0iLAogICAgICAgICAgICAgICAgYm90dG9tOiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCWUFBQUFXQ0FZQUFBREV0R3c3QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFYRkpSRUZVZU5yTTFjOHJCR0VjeC9GZHRDRWtMcVl0cGR3a0tTVUhVaHh3SVRkSytaM3lNMmNPTG5KMzlDYzQ0U2dIU2NtSndsRnhzSWRsQ1NjTzYvMnQ3Nk9ucDUyZFhUdGJubm8xTTgrUHo4NCt6ek16a2NnL0tBM29SVHpNMEE0Y0k0VlRkSVVWUElNM3BQR081YUFCSlRrR3gxQnFqWW1GRlp4VzdubkJ3WG1Yb2dXWDZiRUdjMmpFSVU3K2tOV0RVU1N3WnlxbmRTdkozTjFnMkJtMG9MdEIyait3N3JRUDRNcHFYelJUMFlSYVBXL0J0aE1lZFlMczYwSHNvRTJ2cTlCc1B3QUphOFhGTFVhMGZVcnZST28vc2FUMVE5YWRHaW1kbHQ4eWo2VFQ2UTZkMnZhaWRhOVlSYnRQNkVxbUJaQzVmSEE2WCtBQXoxYndFYzZjZms5K29hWk00Tm9aSkw3MCtKMmhUYVp0TnBldDA0MXpLOHlQL01nbCtyT0YxZW1yMFVNMXhuQWZFUHlJU2QwSm5vNnZ0eCtRdU02UFoyMmxwTzdkYkVWMlNpdjZyUGVJak5zMUhkWUM3aXhmRytZQnFkVFZEcVBJdjZpSVd2TzdpWEdVRnhBcWk3MlByYUo5SUg4RUdBQ1FjWWpZUmQ1R0h3QUFBQUJKUlU1RXJrSmdnZz09IiwKICAgICAgICAgICAgICAgIHByZTogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBU2xKUkVGVWVOcGlZQmpPb0JpSXJ3SnhGUkF6VXN2UVZpRCtDTVQvZ2ZnVEVQZFJ5OUJQVUVOaCtBc1E5MUppYUF1U1M5SHhaM0lOYjhIaTB2K1V1cndGNnFML1JPQnZRTnhEcktGZmtUVCtBK0puUVB3QktmSkEvTDlJYW43aWM3a01FSGNDOFE4MEYzVUFjUnNRdjRieTMwSU5hVUpUOXdlYVdoU1FEUlVCNHVWWXZMa1lpQVdBT0JvcHZFRkJsQXJFUEVBOEc0dWU5VUFzQVRNNEVZdUNKVWdLTXRBTUxvU0tDd1B4WEN4NmMxaWdDbFRRZ21VWlZQTnJITUVHeTNtZ1lDa0NZaVlnVGtDU1Y0VVp2QTJJallCWURJZ3ZRYlB2T3lKVEVDaWQ1d0h4YnlBMkJ1TDNRTHdSV1lFc0VKdmcwSXdlRkVVNDFJRU1sZ2N4V0pBRUgwTXhKZUFzak1GRXE2SncrQnI4QmltVmZNQ1RERWtHN0VCY0E4VDNvV1VKeDREVll3QUJCZ0Nhbm5uU3piZ3dJUUFBQUFCSlJVNUVya0pnZ2c9PSIsCiAgICAgICAgICAgICAgICBuZXh0OiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCWUFBQUFXQ0FZQUFBREV0R3c3QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFUMUpSRUZVZU5yYzFiMUtBMEVZaGVFbC9pQVJGRkVrS2w2RDBVSzhDckVWckN3RWV4RkN0QklsUldJanNmRWlMTDBGS3pzN1FVV3hNMnBpRk1Va3ZoUE93TEFzMlRHdUNuN3drTmxsNWpDNyt3MEpndjlhdmRqQU9iYlFuMVR3Q3U3UXdoV1c0eGFrUElPSE1LenhHQ2FTQ202aW9YSExaMEhxcHo3S3J3UlBJdnZOdkJsTTJ6WXlOWThjTWpoREhvOWZDQnpFcm5JcUtOamdSU3hwdklBQmJPTGVzMk1LV0hmdVhkaFhjUjJhdktySjR6R2hJOWdMaFFicTlYYVpnR08xa3V0SU96SUhwS3A3TmF3aGpZT0lOU2VZNmxGd0hhY3cxN1A2TlRXSGQ0eHFuTmJjUzgzTE9idHNhQ1BiRVcrZ1hVVzhPRHN3QzI3eG9Pc24zT0REbWZPR3NzOVhMdUU1NGpHanZQcUd1dUcxbUZEelpJZmROSHlubmRlN0RiVzFyNUR3VHN0SkhQMmlFNTVZcUQzNmViWFpEdnIrN0wvc1U0QUJBSXBWWldub0E1R2tBQUFBQUVsRlRrU3VRbUNDIiwKICAgICAgICAgICAgICAgIG5leHRfZ3JheTogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBdHhKUkVGVWVOcmNsYzlMMm1FY3g3LzZOYlZacVJWajdwSU9sSVV1WjFITWd2MEJEY3FUN0pyc2tIMTNFTFBCRjdlVHZ6MTBIem5XUUJsQlJJZkJYSWZCTG1xWHNjdllaV1BLck1OSVU5QXBtcnIzNC93Nmkwb3ZNWmp3K0gwK3ovTjhYdCtQbi9mbjgwaFIvK1dIWVJoQklwRndSS1BSei9GNC9LbkQ0UkIyOHhIMEFoNGNISHlvVUNqc0lwRklJWlBKSGttbDBtOVlmbjJaRDc4WGNMMWVINnJWYWxJTUNtTVV0cUtiRDcvSGJOUXhhcTE1b3hjSC9sWHBjbVhndG5oMnUvMm1YQzYvRHFFK3NTeExsVXFsbmlFMFRWUEJZSkFxRm90NitHVjlQdCtQSnRobXM4MHNMUzJ4RW9ua2hsZ3Mvamd3TU9CY1hWM041ZlA1cmxDY3A5YlgxeVdMaTR1ZWNyazhVNmxVc2hEWTN3UmJMSllGR0tac05rc3E0Tjc4L0x3WTloT24wNWs1T2pxaStQelRHZVB4ZUZ3WlVsNnZkOGhrTXZrUERnNnNaSjJNNWVYbHIxd3FVdTJrQTVKT3B5MklBTytvTzlmVzFuNW1NcGsybkRqbWNqa0tOVTI1WEM2NTJXeDJwVklwNjVtWEoybnlqVVBwcWFrcE5aeHVBOFk1VDg3T3pzb2JqY1lIcFZLcEdoc2JlMUN0VmtYWXF4UUtoVGRxdGZxTDFXcjFKcFBKeHh5VTVMcS92ejhhQ29YOFRURGF0WWlGaEY2dnh4NXRBSndtOE9QajQ4bTV1Ym1LU3FVYUFXd1NhOWVRdzZKR28vbHVOQm9OaDRlSGJBZTBKaEFJTnNMaDhMTkFJSkNpdWRoeEIrUWgybHVkVGlmREFRTHZJM0FJY2grUmtsOGpKbHJoQ2JPcWdmb0xtRGVwT0YvQmZHTnJhMnNGRlpGdHZxZ3pNYkZZakFpeXA5VnFoNFZDNGNUSnlZbVE5MGVwSVFKdEhSTzFiQTVhUmhBdmRuWjJHSS9IODdjRXo1WVBnZU9TMlJzZkh4OUI3dStnT2k2OHlRQXRZWDl6ZDNlWGdaQ25hL3M4Qnk1eXBHVVV6aE9JU0hnTzlCZldYd0c2Y2haNkliaVZjNkx3bnNGZ0dJVkFlcEx6ams0cllXMXplM3ViY2J2ZDUzZmpaVjJGYXFHUTYzZlQwOVBETU85aTlCRW9vbjBKOVJtLzMzOXhtM2RyMmYzOWZWTFg3d0Z2b01Wdm9ZV2ZSeUlSRm5kRC9aLzhuZjBXWUFBOEVDMVovWk5tNGdBQUFBQkpSVTVFcmtKZ2dnPT0iLAogICAgICAgICAgICAgICAgcHJlX2dyYXk6ICJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJZQUFBQVdDQVlBQUFERXRHdzdBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXNsSlJFRlVlTnJjbFR0TVdtRVV4ei91dlR6bElVaHBOTVIwYUdOanJOSFNtSFRxUkp5YWR1alFEYlNHUndKVWFZQ21EaXpxVUV3Nk9EVk5HZ2JwWUNmU3BGSU5DUXpGUjlveU1YUnNYRkNzQVhrSUtOTC9SN2dHV3hPc1NkUEVrNXpjM08rZTg3dm4rNTl6djB2SXBiU0ppUW15dWJuNUxCS0pwTmJYMTErNFhDNUJ1eHkyWFlETlppTU9oMk9XNHppUFRDYlRpOFhpa2VIaDRTc1NpZVFUWG5JeHNOMXVKMWFyZFZZZ0VEZ1BEdytWOVhxZDFHbzFNY3V5ZzdBdXVWeStzcmEyOW5kZ1ZFbkd4OGRuaEVLaHMxcXRLZ0UvZVhaOGZDekMrcTMrL242dFNxVmFTU1FTNXdNN25VNWlNcGxtc0YxWHBWSTVCZVh0Nk9oSUJGa0dBZTlTS3BWL3dObXpLaldielJUNnRGd3VLODZDVXFQcmtJVldQalF3TUtCV0tCU240T3p2MExHeHNSbVJTRFNGU2p1YTBEbzhUUldBUytCNStCNjhnL0loaXhDTnZRUE4xV2p1aWVac1MvZjFhTlEwd3pCdWFDcWxVQ1FSdFZyOUVzMUs0a1ZEV0pOaHJRakFJaXFNbGtxbGU4MDRGbmtqQm9PaEV6djR2ckd4a1cyQUxSYUxGcnErUW9BVjJuRTh0TGUzZHpFWURFNXZiMjkzOXZYMVBjQmtpS1ZTYVExakZvckZZcStOUnFNdW04M2Vic1l6bUpxN3NHdTR4aGtLeHNEZkIvQXhuTzg2MGV2MW9lWGxaVThnRU1nbWswa0ZxbXc4bzlkVUtpV2ZuNTh2aE1QaDU0aDdTK09wUVhOU0xCWWZlanllUjF5enc5ZGJSb24wOVBTOFcxMWRuZkw1ZkpsOFBrKzBXaTNoazV2eUNOQlk0dlY2ZjBJbTkram9LSk5PcDgxOG84RzcwYWg0YVducEl6U0tZQ2EvZFhkM0IrUHh1SE55Y2pLenM3TnpBbXMxK3FGUXkrVnlkRFJ6MFdqVXBkUHAzdEI4VEZNMEZBcUZHeFhQemMxOXBsSnJOSnFyYU1vWHQ5dE50M1N1YytUZzRJQ2VKZm1GaFFWTG9WQXdvS0c3ZnIvL0I4Y0hBTDZGeTlaRkRpbmFHL3I1dzc3eWE4eS9PaEV2S1JoanRJdXAyWU1UZUJiM21YWTUzSG5BbU5rUCsvdjdOekhUVHdBTzRmNzlmL3VkL1JKZ0FPTGNSTlpxTG9qTUFBQUFBRWxGVGtTdVFtQ0MiLAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoIi5zcC1zZXBhcmF0b3J7bGluZS1oZWlnaHQ6MS44ICFpbXBvcnRhbnQ7b3BhY2l0eToxICFpbXBvcnRhbnQ7cG9zaXRpb246cmVsYXRpdmUgIWltcG9ydGFudDtmbG9hdDpub25lICFpbXBvcnRhbnQ7dG9wOjAgIWltcG9ydGFudDtsZWZ0OjAgIWltcG9ydGFudDttaW4td2lkdGg6MzY2cHg7d2lkdGg6YXV0bzt0ZXh0LWFsaWduOmNlbnRlciAhaW1wb3J0YW50O2ZvbnQtc2l6ZToxNHB4ICFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayAhaW1wb3J0YW50O3BhZGRpbmc6M3B4IDAgIWltcG9ydGFudDttYXJnaW46NXB4IDEwcHggOHB4O2NsZWFyOmJvdGggIWltcG9ydGFudDtib3JkZXItc3R5bGU6c29saWQgIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjY2NjYyAhaW1wb3J0YW50O2JvcmRlci13aWR0aDoxcHggIWltcG9ydGFudDstbW96LWJvcmRlci1yYWRpdXM6MzBweCAhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MzBweCAhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6I2ZmZmZmZiAhaW1wb3J0YW50O30uc3Atc2VwYXJhdG9yOmhvdmVye2JveC1zaGFkb3c6MCAwIDExcHggcmdiYSgzMywzMywzMywwLjIpO30jc3Atc2VwYXJhdG9yLWhvdmVye2Rpc3BsYXk6bm9uZTt9LnNwLXNlcGFyYXRvcjpob3ZlciAjc3Atc2VwYXJhdG9yLWhvdmVye2Rpc3BsYXk6YmxvY2s7fS5zcC1zZXBhcmF0b3IgLnNwLXNvbWVpbmZve3Bvc2l0aW9uOmFic29sdXRlICFpbXBvcnRhbnQ7cmlnaHQ6MTBweCAhaW1wb3J0YW50O2ZvbnQtc2l6ZToxMnB4ICFpbXBvcnRhbnQ7Zm9udC1zdHlsZTppdGFsaWMgIWltcG9ydGFudDtiYWNrZ3JvdW5kOm5vbmUgIWltcG9ydGFudDt9LnNwLXNlcGFyYXRvciBzcGFue3ZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Y3Vyc29yOiBwb2ludGVyO3BhZGRpbmc6IDA7bWFyZ2luOiAwIDVweDtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOjIycHg7aGVpZ2h0OjIycHg7fS5zcC1zZXBhcmF0b3IgYXttYXJnaW46MCAyMHB4IDAgLTZweCAhaW1wb3J0YW50O2Rpc3BsYXk6aW5saW5lICFpbXBvcnRhbnQ7dGV4dC1zaGFkb3c6I2ZmZiAwIDFweCAwICFpbXBvcnRhbnQ7YmFja2dyb3VuZDpub25lICFpbXBvcnRhbnQ7Y29sb3I6IzU5NTk1OSAhaW1wb3J0YW50O30uc3Atc2VwYXJhdG9yIGlucHV0e3BhZGRpbmc6MCAhaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjIzcHggIWltcG9ydGFudDt9LnNwLXNlcGFyYXRvciAuc3AtbWQtc3Bhbntmb250LXdlaWdodDpib2xkICFpbXBvcnRhbnQ7bWFyZ2luOjAgMjBweCAhaW1wb3J0YW50O30jc3Atc3AtbWQtbnVtYmVye3dpZHRoOjZjaCAhaW1wb3J0YW50O3ZlcnRpY2FsLWFsaWduOm1pZGRsZSAhaW1wb3J0YW50O2Rpc3BsYXk6aW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7dGV4dC1hbGlnbjpsZWZ0ICFpbXBvcnRhbnQ7fSIgKwogICAgICAgICAgICAgICAgYC5hY19zcF90b3B7YmFja2dyb3VuZC1pbWFnZTp1cmwoJyR7c2VwSW1ncy50b3B9Jyl9YCArCiAgICAgICAgICAgICAgICBgLmFjX3NwX3ByZXtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLnByZX0nKX1gICsKICAgICAgICAgICAgICAgIGAuYWNfc3BfbmV4dHtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLm5leHR9Jyl9YCArCiAgICAgICAgICAgICAgICBgLmFjX3NwX2JvdHRvbXtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLmJvdHRvbX0nKX1gICsKICAgICAgICAgICAgICAgIGAuYWNfc3BfbmV4dF9ncmF5e2JhY2tncm91bmQtaW1hZ2U6dXJsKCcke3NlcEltZ3MubmV4dF9ncmF5fScpfWAgKwogICAgICAgICAgICAgICAgYC5hY19zcF9wcmVfZ3JheXtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLnByZV9ncmF5fScpfWAsCiAgICAgICAgICAgICAgICAiQUMtUHJlbG9hZCIpCiAgICAgICAgICAgICAgaWYgKGN1clNpdGUucGFnZVVybCA9PT0gdXJsKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJbQUMtU2NyaXB0XSIsICLnv7vpobXliLDovr7lupXpg6jkuoYgLSDmiJbogIXlvILluLggLSDlh7rnjrDlvILluLjor7fnm7TmjqXlj43ppojkvZzogIXkv67mlLkiKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9Ly8g5LiN5Lya6YeN5aSN5Yqg6L2955u45ZCM55qE6aG16Z2iCiAgICAgICAgICAgICAgY29uc29sZS5sb2coIuWKoOi9vee/u+mhteWcsOWdgO+8miIgKyB1cmwpCiAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlVXJsID0gdXJsOwogICAgICAgICAgICAgIC8vIOWvuXVybOeahOaVsOaNrui/m+ihjOivu+WPlgogICAgICAgICAgICAgIGN1clNpdGUucGFnZXIuc3RhcnRGaWx0ZXIgJiYgY3VyU2l0ZS5wYWdlci5zdGFydEZpbHRlcigpOwogICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDUwMDAsCiAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHZhciBuZXdCb2R5ID0gU2hvd1BhZ2VyLmNyZWF0ZURvY3VtZW50QnlTdHJpbmcocmVzcG9uc2UucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAvLyB4eC5ldmFsdWF0ZSh4cGF0aCwgeHgpCiAgICAgICAgICAgICAgICAgICAgbGV0IHBhZ2VFbGVtcyA9IGdldEFsbEVsZW1lbnRzKGN1clNpdGUucGFnZXIucGFnZUVsZW1lbnQsIG5ld0JvZHksIG5ld0JvZHkpOwogICAgICAgICAgICAgICAgICAgIGxldCB0b0VsZW1lbnQgPSBnZXRBbGxFbGVtZW50cyhjdXJTaXRlLnBhZ2VyLkhUX2luc2VydFswXSlbMF07CiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VFbGVtcy5sZW5ndGggPj0gMCkgewogICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CG5pyA5ZCO5LiA5Liq57+76aG15oyJ6ZKuCiAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dEVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI3NwLXNwLWdvbmV4dCIpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRFcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsYXN0RSA9IG5leHRFc1tuZXh0RXMubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RFLmNsYXNzTGlzdC5yZXBsYWNlKCJhY19zcF9uZXh0X2dyYXkiLCAiYWNfc3BfbmV4dCIpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgLy8g5o+S5YWl57+76aG15oyJ6ZKu5YWD57SgCiAgICAgICAgICAgICAgICAgICAgICBjdXJTaXRlLnBhZ2VOdW0rKzsKICAgICAgICAgICAgICAgICAgICAgIGxldCBhZGRUbyA9ICJiZWZvcmVlbmQiOwogICAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNpdGUucGFnZXIuSFRfaW5zZXJ0WzFdID09PSAxKSBhZGRUbyA9ICJiZWZvcmViZWdpbiI7CiAgICAgICAgICAgICAgICAgICAgICB0b0VsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKGFkZFRvLCBgPGRpdiBjbGFzcz0nc3Atc2VwYXJhdG9yIEFDJyBpZD0nc3Atc2VwYXJhdG9yLUFDWCc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9J3NwLXNwLW5leHRsaW5rJyB0YXJnZXQ9J19ibGFuayc+PGI+56ysIDxzcGFuIHN0eWxlPSdjb2xvcjojNTk1OTU5IWltcG9ydGFudDsnPkFDWDwvc3Bhbj4g6aG1PC9iPjwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3Atc3AtZ290b3AiIGNsYXNzPSdhY19zcF90b3AnIHRpdGxlPSfljrvliLDpobbpg6gnPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3Atc3AtZ29wcmUiIGNsYXNzPScke2N1clNpdGUucGFnZU51bSA8PSAyID8gImFjX3NwX3ByZV9ncmF5IiA6ICJhY19zcF9wcmUifScgdGl0bGU9J+S4iua7muS4gOmhtScgPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3Atc3AtZ29uZXh0IiBjbGFzcz0nYWNfc3BfbmV4dF9ncmF5JyB0aXRsZT0n5LiL5rua5LiA6aG1Jz48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNwLXNwLWdvYm90dG9tIiBjbGFzcz0nYWNfc3BfYm90dG9tJyB0aXRsZT0n5Y675Yiw5bqV6YOoJyA+PC9zcGFuPjwvZGl2PmAKICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9BQ1gvZ20sIGN1clNpdGUucGFnZU51bSkpOwogICAgICAgICAgICAgICAgICAgICAgLy8g5o+S5YWl5paw6aG16Z2i5YWD57SgCiAgICAgICAgICAgICAgICAgICAgICBwYWdlRWxlbXMuZm9yRWFjaChmdW5jdGlvbiAob25lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvRWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoYWRkVG8sIG9uZSk7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5zcC1zZXBhcmF0b3IuQUM6bm90KFtiaW5kXSkiKS5mb3JFYWNoKGZ1bmN0aW9uIChwZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVyLnNldEF0dHJpYnV0ZSgiYmluZCIsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICBwZXIuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBhY19zcGZ1bmMpOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAvLyDmm7/mjaLlvoXmm7/mjaLlhYPntKAKICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcmlFID0gZ2V0QWxsRWxlbWVudHMoY3VyU2l0ZS5wYWdlci5yZXBsYWNlRSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXBFID0gZ2V0QWxsRWxlbWVudHMoY3VyU2l0ZS5wYWdlci5yZXBsYWNlRSwgbmV3Qm9keSwgbmV3Qm9keSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmlFLmxlbmd0aCA9PT0gcmVwRS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvcmlFLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgIue/u+mhtS3mm7/mjaLnv7vpobXlhYPntKAgJ3JlcGxhY2VFJyDlpLHmlYgiOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9yaUUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaUVbaV0ub3V0ZXJIVE1MID0gcmVwRVtpXS5vdXRlckhUTUw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGN1clNpdGUucGFnZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGN1clNpdGUucGFnZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBBZGRDdXN0b21TdHlsZSgpIHsKICAgICAgICAgIGlmICghQUNDb25maWcuaXNBTGluZUVuYWJsZSkgewogICAgICAgICAgICBBQ19hZGRTdHlsZSgiYSxhIGVte3RleHQtZGVjb3JhdGlvbjpub25lfSIsICJBQy1Ob0xpbmUiLCAiYm9keSIpOy8vIOenu+mZpOi/meS6m+S4quS4i+WIkue6vwogICAgICAgICAgfQogICAgICAgICAgaWYgKEFDQ29uZmlnLmlzVXNlclN0eWxlRW5hYmxlKSB7CiAgICAgICAgICAgIEFDX2FkZFN0eWxlKEFDQ29uZmlnLlVzZXJTdHlsZVRleHQsICJBQy11c2VyU3R5bGUiKTsvLyDnlKjmiLfoh6rlrprkuYnnmoTmoLflvI/ooagKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOS4uuS6huaWueS+v+iwg+aVtOagt+W8j+WSjOafpeeci+aViOaenO+8jOaaguaXtuS4jeenu+mZpAogICAgICAgICAgICAvLyBzYWZlUmVtb3ZlKCJzdHlsZVtjbGFzcz0nQUMtdXNlclN0eWxlJ10iKQogICAgICAgICAgfQogICAgICAgICAgQUNfYWRkU3R5bGUoCiAgICAgICAgICAgICIub3ByLXJlY29tbWVuZHMtbWVyZ2UtaW1ndGV4dHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50O30iICsgLy8g56e76Zmk55m+5bqm5rWP6KeI5Zmo5o6o5bm/CiAgICAgICAgICAgICIucmVzX3RvcF9iYW5uZXJ7ZGlzcGxheTpub25lIWltcG9ydGFudDt9IiArIC8vIOenu+mZpOWPr+iDveeahOeZvuW6pkhUVFBT5Yqr5oyB5pi+56S66Zeu6aKYCiAgICAgICAgICAgICIuaGVhZEJsb2NrLCBib2R5PmRpdi5yZXN1bHQtb3B7ZGlzcGxheTpub25lO30iIC8vIOenu+mZpOeZvuW6pueahOaQnOe0oue7k+aenOmhtumDqOS4gOadoeeahOW7uuiuruaWh+WtlyAmIOenu+mZpOWPr+iDveWHuueOsOeahOeZveWxj+eOsOixoQogICAgICAgICAgICAsICJBQy1zcGVjaWFsLUJBSURVIgogICAgICAgICAgKTsKICAgICAgICAgIC8qIuiHquWumuS5iSLmjInpkq7mlYjmnpwqLwogICAgICAgICAgQUNfYWRkU3R5bGUoIi5hY2hpZGV7ZGlzcGxheTpub25lO30gLm5ld0Z1bmNIaWdoTGlnaHR7Y29sb3I6cmVkO2ZvbnQtd2VpZ2h0OiAxMDA7YmFja2dyb3VuZC1jb2xvcjogeWVsbG93O2ZvbnQtd2VpZ2h0OiA2MDA7fSNzcC1hYy1jb250YWluZXIgbGFiZWx7ZGlzcGxheTppbmxpbmU7fSN1e3dpZHRoOjMxOXB4fSN1ICNteXVzZXJ7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luOiAxM3B4IC0xMHB4IDAgMjRweDt9LnNpdGUtd3JhcHBlciAjbXl1c2VyLC5zb2dvdS1zZXQtYm94ICNteXVzZXIsI2didyAjbXl1c2Vye21hcmdpbi1yaWdodDoxNXB4O30gI215dXNlciwjbXl1c2VyIC5teXVzZXJjb25maWd7cGFkZGluZzowO21hcmdpbjowfSNteXVzZXJ7ZGlzcGxheTppbmxpbmUtYmxvY2s7fSNteXVzZXIgLm15dXNlcmNvbmZpZ3tkaXNwbGF5OmlubGluZS1ibG9jaztsaW5lLWhlaWdodDoxLjU7YmFja2dyb3VuZDojNGU2ZWYyO2NvbG9yOiNmZmY7Zm9udC13ZWlnaHQ6NzAwO3RleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6NnB4O2JvcmRlcjoycHggc29saWQgI0U1RTVFNTt9I215dXNlciAubXl1c2VyY29uZmlne2JveC1zaGFkb3c6MCAwIDEwcHggM3B4IHJnYmEoMCwwLDAsLjEpO2JvcmRlci1yYWRpdXM6IDZweH0jbXl1c2VyIC5teXVzZXJjb25maWc6aG92ZXJ7YmFja2dyb3VuZDojNDY2MmQ5ICFpbXBvcnRhbnQ7Y29sb3I6I2ZmZjtjdXJzb3I6cG9pbnRlcjtib3JkZXI6MnB4IHNvbGlkICM3M0E2Rjg7fWJvZHlbZG9nZV0gI2hlYWRlcnttYXgtd2lkdGg6IHVuc2V0O31ib2R5W2RvZ2VdICNteXVzZXJ7cG9zaXRpb246IGFic29sdXRlO3JpZ2h0OiA0MHB4O30iLAogICAgICAgICAgICAiQUMtTUVOVV9CdG4iKTsKICAgICAgICAgIC8q6Ieq5a6a5LmJ6aG16Z2i5YaF5a655pWI5p6cKi8KICAgICAgICAgIEFDX2FkZFN0eWxlKCdib2R5W2JhaWR1XSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9ImJhaWR1Il0pPmxhYmVsOm5vdChbY2xhc3M9ImxhYmVsX2hpZGUiXSksXG4nICsKICAgICAgICAgICAgJyAgYm9keVtnb29nbGVdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iZ29vZ2xlIl0pPmxhYmVsOm5vdChbY2xhc3M9ImxhYmVsX2hpZGUiXSksXG4nICsKICAgICAgICAgICAgJyAgYm9keVtiaW5nXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9ImJpbmciXSk+bGFiZWw6bm90KFtjbGFzcz0ibGFiZWxfaGlkZSJdKSxcbicgKwogICAgICAgICAgICAnICBib2R5W3NvZ291XSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9InNvZ291Il0pPmxhYmVsOm5vdChbY2xhc3M9ImxhYmVsX2hpZGUiXSksXG4nICsKICAgICAgICAgICAgJyAgYm9keVtkdWNrXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9ImR1Y2siXSk+bGFiZWw6bm90KFtjbGFzcz0ibGFiZWxfaGlkZSJdKSxcbicgKwogICAgICAgICAgICAnICBib2R5W2RvZ2VdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iZG9nZSJdKT5sYWJlbDpub3QoW2NsYXNzPSJsYWJlbF9oaWRlIl0pLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbYmFpZHVdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iYmFpZHUiXSk+YnIsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtnb29nbGVdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iZ29vZ2xlIl0pPmJyLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbYmluZ10gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJiaW5nIl0pPmJyLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbZHVja10gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJkdWNrIl0pPmJyLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbZG9nZV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJkb2dlIl0pPmJyLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbc29nb3VdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0ic29nb3UiXSk+YnIsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtiYWlkdV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsW2NsYXNzKj0iYmFpZHUiXT4ubGFiZWxfaGlkZSxcbicgKwogICAgICAgICAgICAnICBib2R5W2dvb2dsZV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsW2NsYXNzKj0iZ29vZ2xlIl0+LmxhYmVsX2hpZGUsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtiaW5nXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWxbY2xhc3MqPSJiaW5nIl0+LmxhYmVsX2hpZGUsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtzb2dvdV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsW2NsYXNzKj0ic29nb3UiXT4ubGFiZWxfaGlkZSxcbicgKwogICAgICAgICAgICAnICBib2R5W2R1Y2tdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbFtjbGFzcyo9ImR1Y2siXT4ubGFiZWxfaGlkZSxcbicgKwogICAgICAgICAgICAnICBib2R5W2RvZ2VdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbFtjbGFzcyo9ImRvZ2UiXT4ubGFiZWxfaGlkZVxuJyArIC8vIOazqOaEj+WwvumDqOmAl+WPtwogICAgICAgICAgICAneycgKwogICAgICAgICAgICAnZGlzcGxheTpub25lO1xuJyArCiAgICAgICAgICAgICd9I3NwLWFjLWNvbnRhaW5lciAubGFiZWxfaGlkZXtjdXJzb3I6cG9pbnRlcjttYXJnaW4tbGVmdDo4JTtjb2xvcjpibHVlfSNzcC1hYy1jb250YWluZXIgLmxpbmtocmVmLCNzcC1hYy1jb250YWluZXIgLmxhYmVsX2hpZGU6aG92ZXJ7Y29sb3I6cmVkfSNzcC1hYy1jb250YWluZXIgLmxpbmtocmVmOmhvdmVye2ZvbnQtd2VpZ2h0OmJvbGR9I3NwLWFjLWNvbnRhaW5lciBsYWJlbC5tZW51LWJveC1zbWFsbHttYXgtd2lkdGg6MTZweDttYXgtaGVpZ2h0OjE2cHg7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTppbmxpbmUtYmxvY2t9LkFDLUNvdW50ZXJUe2JhY2tncm91bmQ6I0ZEOTk5OX1ib2R5ICAjc3AtYWMtY29udGFpbmVye3Bvc2l0aW9uOmZpeGVkO3RvcDozLjl2dztyaWdodDo4Ljh2d30jc3AtYWMtY29udGFpbmVye3otaW5kZXg6OTk5OTk5O3RleHQtYWxpZ246bGVmdDtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlfSNzcC1hYy1jb250YWluZXIgKntmb250LXNpemU6MTNweDtjb2xvcjpibGFjaztmbG9hdDpub25lfSNzcC1hYy1tYWluLWhlYWR7cG9zaXRpb246cmVsYXRpdmU7dG9wOjA7bGVmdDowfSNzcC1hYy1zcGFuLWluZm97cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MXB4O3RvcDowO2ZvbnQtc2l6ZToxMHB4O2xpbmUtaGVpZ2h0OjEwcHg7YmFja2dyb3VuZDpub25lO2ZvbnQtc3R5bGU6aXRhbGljO2NvbG9yOiM1YTVhNWE7dGV4dC1zaGFkb3c6d2hpdGUgMHB4IDFweCAxcHh9I3NwLWFjLWNvbnRhaW5lciBpbnB1dHt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7ZGlzcGxheTppbmxpbmUtYmxvY2s7b3V0bGluZTpub25lO2hlaWdodDphdXRvO3BhZGRpbmc6MHB4O21hcmdpbi1ib3R0b206MHB4O21hcmdpbi10b3A6MHB4fSNzcC1hYy1jb250YWluZXIgaW5wdXRbdHlwZT0ibnVtYmVyIl17d2lkdGg6NTBweDt0ZXh0LWFsaWduOmxlZnR9I3NwLWFjLWNvbnRhaW5lciBpbnB1dFt0eXBlPSJjaGVja2JveCJde2JvcmRlcjoxcHggc29saWQgI0I0QjRCNDtwYWRkaW5nOjFweDttYXJnaW46M3B4O3dpZHRoOjEzcHg7aGVpZ2h0OjEzcHg7YmFja2dyb3VuZDpub25lO2N1cnNvcjpwb2ludGVyO3Zpc2liaWxpdHk6dmlzaWJsZTtwb3NpdGlvbjpzdGF0aWN9I3NwLWFjLWNvbnRhaW5lciBpbnB1dFt0eXBlPSJidXR0b24iXXtib3JkZXI6MXB4IHNvbGlkICNjY2M7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZDpub25lO3dpZHRoOmF1dG87aGVpZ2h0OmF1dG99I3NwLWFjLWNvbnRhaW5lciBsaXtsaXN0LXN0eWxlOm5vbmU7bWFyZ2luOjNweCAwO2JvcmRlcjpub25lO2Zsb2F0Om5vbmU7Y3Vyc29yOmRlZmF1bHQ7fSNzcC1hYy1jb250YWluZXIgZmllbGRzZXR7Ym9yZGVyOjJweCBncm9vdmUgI2NjYzstbW96LWJvcmRlci1yYWRpdXM6M3B4O2JvcmRlci1yYWRpdXM6M3B4O3BhZGRpbmc6NHB4IDlweCA2cHggOXB4O21hcmdpbjoycHg7ZGlzcGxheTpibG9jazt3aWR0aDphdXRvO2hlaWdodDphdXRvfSNzcC1hYy1jb250YWluZXIgbGVnZW5ke2xpbmUtaGVpZ2h0OjIwcHg7bWFyZ2luLWJvdHRvbTowcHh9I3NwLWFjLWNvbnRhaW5lciBmaWVsZHNldCA+IHVse3BhZGRpbmc6MDttYXJnaW46MH0jc3AtYWMtY29udGFpbmVyIHVsI3NwLWFjLWFfdXNlaWZyYW1lLWV4dGVuZHtwYWRkaW5nLWxlZnQ6NDBweH0jc3AtYWMtcmVjdHtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6MDtsZWZ0OjA7ZmxvYXQ6cmlnaHQ7aGVpZ2h0OjEwcHg7d2lkdGg6MTBweDtwYWRkaW5nOjA7bWFyZ2luOjA7LW1vei1ib3JkZXItcmFkaXVzOjNweDtib3JkZXItcmFkaXVzOjNweDtib3JkZXI6MXB4IHNvbGlkIHdoaXRlOy13ZWJraXQtYm94LXNoYWRvdzppbnNldCAwIDVweCAwIHJnYmEoMjU1LDI1NSwyNTUsMC4zKSwwIDAgM3B4IHJnYmEoMCwwLDAsMC44KTstbW96LWJveC1zaGFkb3c6aW5zZXQgMCA1cHggMCByZ2JhKDI1NSwyNTUsMjU1LDAuMyksMCAwIDNweCByZ2JhKDAsMCwwLDAuOCk7Ym94LXNoYWRvdzppbnNldCAwIDVweCAwIHJnYmEoMjU1LDI1NSwyNTUsMC4zKSwwIDAgM3B4IHJnYmEoMCwwLDAsMC44KTtvcGFjaXR5OjAuOH0jc3AtYWMtZG90LCNzcC1hYy1jdXItbW9kZXtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4Ojk5OTk7d2lkdGg6NXB4O2hlaWdodDo1cHg7cGFkZGluZzowOy1tb3otYm9yZGVyLXJhZGl1czozcHg7Ym9yZGVyLXJhZGl1czozcHg7Ym9yZGVyOjFweCBzb2xpZCB3aGl0ZTtvcGFjaXR5OjE7LXdlYmtpdC1ib3gtc2hhZG93Omluc2V0IDAgLTJweCAxcHggcmdiYSgwLDAsMCwwLjMpLGluc2V0IDAgMnB4IDFweCByZ2JhKDI1NSwyNTUsMjU1LDAuMyksMHB4IDFweCAycHggcmdiYSgwLDAsMCwwLjkpOy1tb3otYm94LXNoYWRvdzppbnNldCAwIC0ycHggMXB4IHJnYmEoMCwwLDAsMC4zKSxpbnNldCAwIDJweCAxcHggcmdiYSgyNTUsMjU1LDI1NSwwLjMpLDBweCAxcHggMnB4IHJnYmEoMCwwLDAsMC45KTtib3gtc2hhZG93Omluc2V0IDAgLTJweCAxcHggcmdiYSgwLDAsMCwwLjMpLGluc2V0IDAgMnB4IDFweCByZ2JhKDI1NSwyNTUsMjU1LDAuMyksMHB4IDFweCAycHggcmdiYSgwLDAsMCwwLjkpfSNzcC1hYy1kb3R7cmlnaHQ6LTNweDt0b3A6LTNweH0jc3AtYWMtY3VyLW1vZGV7bGVmdDotM3B4O3RvcDotM3B4O3dpZHRoOjZweDtoZWlnaHQ6NnB4fSNzcC1hYy1jb250ZW50e3BhZGRpbmc6MDttYXJnaW46MHB4Oy1tb3otYm9yZGVyLXJhZGl1czozcHg7Ym9yZGVyLXJhZGl1czozcHg7Ym9yZGVyOjFweCBzb2xpZCAjQTBBMEEwOy13ZWJraXQtYm94LXNoYWRvdzotMnB4IDJweCA1cHggcmdiYSgwLDAsMCwwLjMpOy1tb3otYm94LXNoYWRvdzotMnB4IDJweCA1cHggcmdiYSgwLDAsMCwwLjMpO2JveC1zaGFkb3c6LTJweCAycHggNXB4IHJnYmEoMCwwLDAsMC4zKX0jc3AtYWMtbWFpbntwYWRkaW5nOjVweDtib3JkZXI6MXB4IHNvbGlkIHdoaXRlOy1tb3otYm9yZGVyLXJhZGl1czozcHg7Ym9yZGVyLXJhZGl1czozcHg7YmFja2dyb3VuZC1jb2xvcjojRjJGMkY3O2JhY2tncm91bmQ6LW1vei1saW5lYXItZ3JhZGllbnQodG9wLCNGQ0ZDRkMsI0YyRjJGNyAxMDAlKTtiYWNrZ3JvdW5kOi13ZWJraXQtZ3JhZGllbnQobGluZWFyLDAgMCwwIDEwMCUsZnJvbSgjRkNGQ0ZDKSx0bygjRjJGMkY3KSl9I3NwLWFjLWZvb3R7cG9zaXRpb246cmVsYXRpdmU7bGVmdDowO3JpZ2h0OjA7bWluLWhlaWdodDoyMHB4fSNzcC1hYy1zYXZlYnV0dG9ue3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjJweH0jc3AtYWMtY29udGFpbmVyIC5lbmRidXR0b257bWFyZ2luLXRvcDo4cHh9I3NwLWFjLWNvbnRhaW5lciAuc3AtYWMtc3BhbmJ1dHRvbntib3JkZXI6MXB4IHNvbGlkICNjY2M7LW1vei1ib3JkZXItcmFkaXVzOjNweDtib3JkZXItcmFkaXVzOjNweDtwYWRkaW5nOjJweCAzcHg7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZC1jb2xvcjojRjlGOUY5Oy13ZWJraXQtYm94LXNoYWRvdzppbnNldCAwIDEwcHggNXB4IHdoaXRlOy1tb3otYm94LXNoYWRvdzppbnNldCAwIDEwcHggNXB4IHdoaXRlO2JveC1zaGFkb3c6aW5zZXQgMCAxMHB4IDVweCB3aGl0ZX0jc3AtYWMtY29udGFpbmVyIC5zcC1hYy1zcGFuYnV0dG9uOmhvdmVye2JhY2tncm91bmQtY29sb3I6I0RERH1sYWJlbFtjbGFzcz0ibmV3RnVuYyJde2NvbG9yOmJsdWV9JywKICAgICAgICAgICAgIkFDLU1FTlVfUGFnZSIpOwogICAgICAgIH0KCiAgICAgICAgQWRkQ3VzdG9tU3R5bGUoKTsKICAgICAgICB0cnkgewogICAgICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCgnQUMt6YeN5a6a5ZCR6ISa5pys6K6+572uJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIH0KCiAgICAgICAgLyoq6L+Z5Lic6KW/5Lul5ZCO5Lya55So5LiKKiovCiAgICAgICAgZnVuY3Rpb24gZ2V0U2VhcmNoVmFsdWUoKSB7CiAgICAgICAgICBsZXQga3ZsID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKS5zcGxpdCgiJiIpOwogICAgICAgICAgbGV0IHNlYXJjaFYgPSAiIjsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga3ZsLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxldCB2YWx1ZSA9IGt2bFtpXS5yZXBsYWNlKC9eKHdkfHF1ZXJ5fHEpPS8sICIiKTsKICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBrdmxbaV0pIHsKICAgICAgICAgICAgICBzZWFyY2hWID0gdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vICAnKycg55m+5bqm44CB5pCc54uX44CB5b+F5bqU44CB6LC35q2M44CB5aW95pCcCiAgICAgICAgICBzZWFyY2hWID0gc2VhcmNoVi5yZXBsYWNlKCIrIiwgIiAiKTsKICAgICAgICAgIHJldHVybiBzZWFyY2hWOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmFwaWREZWFsKCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKGluc2VydExvY2tlZCA9PT0gZmFsc2UgJiYgY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5PVEhFUlMpIHsKICAgICAgICAgICAgICBpbnNlcnRMb2NrZWQgPSB0cnVlOwogICAgICAgICAgICAgIEFDSGFuZGxlKCk7IC8vIOWkhOeQhuS4u+mHjeWumuWQkQogICAgICAgICAgICAgIGlmIChBQ0NvbmZpZy5pc0Zhdmljb25FbmFibGUgJiYgdHlwZW9mKGN1clNpdGUuRmF2aWNvblR5cGUpICE9PSAndW5kZWZpbmVkJykgeyAvLyDmmL7npLpmYXZpY29u5Zu+5qCHCiAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZSgiaDM6OmJlZm9yZSwgaDI6OmJlZm9yZSB7Y29udGVudDogJyAnO2Rpc3BsYXk6aW5saW5lLWJsb2NrfSIsICJBQy1TdHlsZS1GYXZpY29uIiwgImhlYWQiKTsKICAgICAgICAgICAgICAgIGFkZEZhdmljb24oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLkZhdmljb25UeXBlKSk7IC8vIOa3u+WKoEZhdmljb27mmL7npLoKICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHNhZmVSZW1vdmUoImltZy5BQy1mYXZpY29uVCIpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLkZhdmljb25UeXBlKS5mb3JFYWNoKChvbmUpID0+IHsKICAgICAgICAgICAgICAgICAgb25lLnJlbW92ZUF0dHJpYnV0ZSgiYWNfZmF2aWNvbnN0YXR1cyIpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzQWRzRW5hYmxlKSB7IC8vIOenu+mZpOWkmuS9meeahOW5v+WRiuWGheWuuQogICAgICAgICAgICAgICAgcmVtb3ZlQURfYmFpZHVfc29nb3UoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzQ291bnRlckVuYWJsZSkgeyAvLyDmmL7npLrorqHmlbDlmagKICAgICAgICAgICAgICAgIGFkZENvdW50ZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLkNvdW50ZXJUeXBlKSk7CiAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuQUMtQ291bnRlclQiKS5mb3JFYWNoKG9uZSA9PiB7CiAgICAgICAgICAgICAgICAgIG9uZS5wYXJlbnRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnU29ydEluZGV4Jyk7CiAgICAgICAgICAgICAgICAgIG9uZS5yZW1vdmUoKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmRvRGlzYWJsZVN1ZykgeyAvLyDkuI3lkK/nlKjnp7vliqjpooTmtYtb6buY6K6kXQogICAgICAgICAgICAgICAgYWNTZXRDb29raWUoIk9SSUdJTiIsIDIsICJ3d3cuYmFpZHUuY29tIik7CiAgICAgICAgICAgICAgICBhY1NldENvb2tpZSgiSVNTVyIsIDEpOwogICAgICAgICAgICAgICAgYWNTZXRDb29raWUoIklTU1ciLCAxLCAid3d3LmJhaWR1LmNvbSIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJzdHlsZVtjbGFzcyo9J2RhcmtyZWFkZXInXSIpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIENPTlNULnVzZUl0ZW0uSHVZYW5Nb2RlID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzQmxvY2tFbmFibGUgJiYgY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5TT0dPVSkgeyAvLyDlkK/nlKjlsY/olL3lip/og70tIOWvueavj+S4gOS4quaWsOWinueahOWcsOWdgOmDveimgeWkhOeQhgogICAgICAgICAgICAgICAgU2l0ZUJsb2NrLmluaXRTdHlsZSgpOwogICAgICAgICAgICAgICAgU2l0ZUJsb2NrLmluaXQoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYoZG9jdW1lbnQuYm9keSl7CiAgICAgICAgICAgICAgICBpZiAoIUFDQ29uZmlnLmlzUmlnaHREaXNwbGF5RW5hYmxlKSB7IC8vIOWPs+S+p+agj+aYvuekugogICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoInNob3dSaWdodCIpCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoInNob3dSaWdodCIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSkgewogICAgICAgICAgICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcnNvIikKICAgICAgICAgICAgICAgIGNvbnN0IGlzU3BlY2lhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNyc28+LmciKSAhPT0gbnVsbCAvLyDlrZjlnKjkuIDkuKroioLngrnljbPkuLpzcGVjaWFsCiAgICAgICAgICAgICAgICBpZihpc1NwZWNpYWwgIT09IENPTlNULmlzR29vZ2xlU3BlY2lhbCAmJiBDT05TVC5pc0dvb2dsZVNwZWNpYWwgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgQ09OU1QuaXNHb29nbGVTcGVjaWFsID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIHNhZmVSZW1vdmUoInN0eWxlW2NsYXNzPSdBQy1Ud29QYWdlRXhTdHlsZSddLHN0eWxlW2NsYXNzPSdBQy1UaHJlZVBhZ2VFeFN0eWxlJ10sc3R5bGVbY2xhc3M9J0FDLUZvdXJQYWdlRXhTdHlsZSddIik7CiAgICAgICAgICAgICAgICAgICAgYWNDc3NMb2FkRmxhZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmluaXQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKG5vZGUpIHsKICAgICAgICAgICAgICAgICAgaWYgKENPTlNULmlzR29vZ2xlU3BlY2lhbCkgewogICAgICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSAhPT0gJ2dyaWQnID8gbm9kZS5zdHlsZS5kaXNwbGF5ID0gJ2dyaWQnOiAnJwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSAhPT0gJ3Vuc2V0JyA/IG5vZGUuc3R5bGUuZGlzcGxheSA9ICd1bnNldCc6ICcnCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpbnNlcnRMb2NrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWNTZXRDb29raWUoY25hbWUsIGN2YWx1ZSwgZG9tYWluLCBleGRheXMpIHsKICAgICAgICAgIGV4ZGF5cyA9IGV4ZGF5cyB8fCAzMDsKICAgICAgICAgIGxldCBkID0gbmV3IERhdGUoKTsKICAgICAgICAgIGRvbWFpbiA9IChkb21haW4gPyAiZG9tYWluPSIgKyBkb21haW4gOiAiIikgKyAiOyI7CiAgICAgICAgICBkLnNldFRpbWUoZC5nZXRUaW1lKCkgKyAoZXhkYXlzICogMjQgKiA2MCAqIDYwICogMTAwMCkpOwogICAgICAgICAgbGV0IGV4cGlyZXMgPSAiZXhwaXJlcz0iICsgZC50b1VUQ1N0cmluZygpOwogICAgICAgICAgZG9jdW1lbnQuY29va2llID0gY25hbWUgKyAiPSIgKyBjdmFsdWUgKyAiOyAiICsgZG9tYWluICsgZXhwaXJlcyArICI7cGF0aD0vIjsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZ2V0Tm9kZUhvc3Qoc2l0ZXRwTm9kZSkgewogICAgICAgICAgaWYoc2l0ZXRwTm9kZSBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50KXsKICAgICAgICAgICAgcmV0dXJuIHtjdXJIb3N0OiBzaXRldHBOb2RlLmhvc3QsIGN1clVybDogc2l0ZXRwTm9kZS5ocmVmfTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVKSB7CiAgICAgICAgICAgIHZhciBocmVmID0gbnVsbDsKICAgICAgICAgICAgaWYgKHNpdGV0cE5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkgewogICAgICAgICAgICAgIGhyZWYgPSBzaXRldHBOb2RlLmdldEF0dHJpYnV0ZSgiaHJlZiIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGhyZWYgIT0gbnVsbCAmJiBocmVmLmluY2x1ZGVzKCJiYWlkdS5jb20vbGluayIpKSB7CiAgICAgICAgICAgICAgLy8g5bey57uP6Kej5p6Q5Ye65p2l5LqGCiAgICAgICAgICAgICAgcmV0dXJuICB7Y3VySG9zdDogZ2V0VGV4dEhvc3QoaHJlZiksIGN1clVybDogaHJlZn07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB7Y3VySG9zdDogZ2V0VGV4dEhvc3Qoc2l0ZXRwTm9kZS5pbm5lclRleHQgfHwgc2l0ZXRwTm9kZS50ZXh0Q29udGVudCksIGN1clVybDogbnVsbH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBBQ0hhbmRsZSgpIHsKICAgICAgICAgIC8vIOWkhOeQhuS4u+mHjeWumuWQkQogICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuT1RIRVJTIHx8IGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuU09HT1UpIHJldHVybjsKICAgICAgICAgIGlmIChBQ0NvbmZpZy5pc1JlZGlyZWN0RW5hYmxlKSB7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlN0eXBlX05vcm1hbCAhPT0gbnVsbCAmJiBjdXJTaXRlLlN0eXBlX05vcm1hbCAhPT0gIiIpIHsKICAgICAgICAgICAgICAvLyDnmb7luqbmkJzni5fljrvph43lrprlkJEt5pmu6YCa5qih5byP44CQ5rOo5oSP5LiN6IO95Li6ZG9jdW1lbnQucXVlcnkuLuOAkQogICAgICAgICAgICAgIHJlc2V0VVJMTm9ybWFsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY3VyU2l0ZS5TdHlwZV9Ob3JtYWwpKTsKICAgICAgICAgICAgICBpZiAoY2hlY2tJU0JhaWR1TWFpbigpKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuc19mb3JtIC5pbmRleC1sb2dvLXNyY1tzcmMqPSdnaWYnXSwgLnNfZm9ybSAuaW5kZXgtbG9nby1zcmNuZXdbc3JjKj0nZ2lmJ10iKS5mb3JFYWNoKGZ1bmN0aW9uIChwZXIpIHsKICAgICAgICAgICAgICAgICAgcGVyLnNyYyA9ICJodHRwczovL3BpYy5ybWIuYmRzdGF0aWMuY29tL2M4NjI1NWU4MDI4Njk2MTM5ZDNlM2U0YmI0NGMwNDdiLnBuZyI7CiAgICAgICAgICAgICAgICAgIC8vIOelnuWlh+eahOeZvuW6pueZvuWutuWPtwogICAgICAgICAgICAgICAgICAvLyBodHRwczovL2ltZ3NhLmJhaWR1LmNvbS9mZXgvcGljL2l0ZW0vODcxODM2N2FkYWI0NGFlZGNjOTFhYjJiYmUxYzg3MDFhMDhiZmIyNi5qcGcKICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9iYWlkdS5udGFvdy5jb20vbmV3Y3NzL2JhaWR1LnBuZwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSkgcmVtb3ZlT25Nb3VzZURvd25GdW5jKCk7IC8vIOenu+mZpG9uTW91c2VEb3du5LqL5Lu277yM6LC35q2M5Y676YeN5a6a5ZCRCiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLk1CQUlEVSkgcmVtb3ZlTW9iaWxlQmFpZHVEaXJlY3RMaW5rKCk7IC8vIOWkhOeQhueZvuW6puaJi+acuueJiOacrOeahOmHjeWumuWQkeWcsOWdgAogICAgICAgICAgICByZW1vdmVSZWRpcmVjdExpbmtUYXJnZXQoKTsgLy8g5Y+q56e76Zmk55+l5LmO55qE6YeN5a6a5ZCR6Zeu6aKYICYg55m+5bqm5a2m5pyv6YeN5a6a5ZCR6Zeu6aKYCiAgICAgICAgICAgIHNhZmVSZW1vdmUoIi5yZXNfdG9wX2Jhbm5lciIpOyAvLyDnp7vpmaTnmb7luqblj6/og73mmL7npLrnmoTliqvmjIEKICAgICAgICAgIH0KCiAgICAgICAgICB0cnkgeyAvLyDmlL7lhaXlvILluLjmjZXojrfvvIzpmLLmraLnlLHkuo5odG1s5o+S5YWl6L+H5oWi5a+86Ie055qEanPnu4jmraIKICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtc3R5bGUiKS5jaGVja2VkKSB7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZSo9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfJ10iKS5mb3JFYWNoKHBlciA9PiB7CiAgICAgICAgICAgICAgICBwZXIuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsICJkaXNhYmxlZCIpOwogICAgICAgICAgICAgICAgcGVyLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCJ0aXRsZSIsICLor7flvIDlkK/oh6rlrprkuYnmoLflvI8iKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W25hbWUqPSdzcC1hYy1hX2ZvcmNlX3N0eWxlXyddIikuZm9yRWFjaChwZXIgPT4gewogICAgICAgICAgICAgICAgcGVyLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKICAgICAgICAgICAgICAgIHBlci5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgidGl0bGUiLCAiQUMt6Ieq5a6a5LmJ5qC35byP5YaF5a65IikKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1ibG9jayIpLmNoZWNrZWQpIHsKICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIjc3AtYWMtcmVtb3ZlQmxvY2ssICNzcC1hYy1ibG9ja0J0bkRpc3BsYXkiKS5mb3JFYWNoKHBlciA9PiB7CiAgICAgICAgICAgICAgICBwZXIuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsICJkaXNhYmxlZCIpOwogICAgICAgICAgICAgICAgcGVyLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCJ0aXRsZSIsICLor7flvIDlkK/oh6rlrprkuYnmoLflvI8iKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNzcC1hYy1yZW1vdmVCbG9jaywgI3NwLWFjLWJsb2NrQnRuRGlzcGxheSIpLmZvckVhY2gocGVyID0+IHsKICAgICAgICAgICAgICAgIHBlci5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CiAgICAgICAgICAgICAgICBwZXIucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgIkFDLeiHquS4u+aLpuaIquWKn+iDvSIpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEFDdG9nZ2xlU2V0dGluZ0Rpc3BsYXkoZSkgewogICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgIC8vIOaYvuekuu+8n+makOiXj+iuvue9rueVjOmdogogICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5pZnJhbWUtZmF0aGVyIGlmcmFtZSIpID09PSBudWxsKSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5pZnJhbWUtZmF0aGVyIikuaW5zZXJ0QWRqYWNlbnRIVE1MKCJiZWZvcmVlbmQiLCAiPGlmcmFtZSBzcmM9J2h0dHBzOi8vZ2hidG5zLmNvbS9naXRodWItYnRuLmh0bWw/dXNlcj1sYW5ncmVuMTM1MyZyZXBvPUdNX3NjcmlwdCZ0eXBlPXN0YXImY291bnQ9dHJ1ZScgZnJhbWVib3JkZXI9JzAnIHNjcm9sbGluZz0nMCcgc3R5bGU9J2hlaWdodDogMjBweDttYXgtd2lkdGg6IDEwOHB4O3BhZGRpbmctbGVmdDo1cHg7Ym94LXNpemluZzogYm9yZGVyLWJveDttYXJnaW4tYm90dG9tOiAtNXB4O2Rpc3BsYXk6dW5zZXQgIWltcG9ydGFudDsnPjwvaWZyYW1lPiIpOwogICAgICAgICAgfQogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaycpIHsKICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgREJDb25maWcub2xkVmVyc2lvbiA9IEFDQ29uZmlnLm9sZFZlcnNpb24gPSBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uOyAvLyDlj6rpnIDopoHlhpnlh7rkuIDpg6jliIbnmoTlhbPplK7mlbDmja7ljbPlj68KICAgICAgICAgICAgICBBQ1NldFZhbHVlKCJDb25maWciLCBKU09OLnN0cmluZ2lmeShEQkNvbmZpZykpOwogICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5hYy1uZXd2ZXJzaW9uRGlzcGxheSIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWNvbnRlbnQiKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgMTAwKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFNob3dTZXR0aW5nKCkgewogICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuT1RIRVJTKSByZXR1cm47CiAgICAgICAgICAvLyDlpoLmnpzkuI3lrZjlnKjnmoTor53vvIzpgqPkuYjoh6rlt7HliJvlu7rkuIDkuKotY29weSBmcm9tIHN1cGVyUHJlbG9hZAogICAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkgIT09IG51bGwgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWNvbnRhaW5lciIpID09PSBudWxsKSB7CiAgICAgICAgICAgIGxldCBDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgQ29udGFpbmVyLmlkID0gInNwLWFjLWNvbnRhaW5lciI7CiAgICAgICAgICAgIENvbnRhaW5lci5pbm5lckhUTUwgPQogICAgICAgICAgICAgIGA8ZGl2IGlkPSJzcC1hYy1jb250ZW50IiBzdHlsZT0iZGlzcGxheTogbm9uZTsiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L2h0bWwiPgogICAgICAgICAgICAgICAgPGRpdiBpZD0ic3AtYWMtbWFpbiI+CiAgICAgICAgICAgICAgICAgIDxmaWVsZHNldCBpZD0ic3AtYWMtYXV0b3BhZ2VyLWZpZWxkIiBzdHlsZT0iZGlzcGxheTpibG9jazsiPgogICAgICAgICAgICAgICAgICAgIDxsZWdlbmQgY2xhc3M9ImlmcmFtZS1mYXRoZXIiPgogICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJsaW5raHJlZiIgaHJlZj0iaHR0cHM6Ly93d3cubnRhb3cuY29tL2Fib3V0c2NyaXB0Lmh0bWwiIHRhcmdldD0iX2JsYW5rIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwucGFuZWxfdGl0bGUiPjwvYT4KICAgICAgICAgICAgICAgICAgICA8L2xlZ2VuZD4KICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9InNldHRpbmctbWFpbiIgdi1zaG93PSJvdGhlci5jdXJUYWIgPT09IDEiPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwucmVkaXJlY3RfdGl0bGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtcmVkaXJlY3QiIG5hbWU9InNwLWFjLWFfc2VwYXJhdG9yIiB0eXBlPSJjaGVja2JveCIgIHYtbW9kZWw9IkFDQ29uZmlnLmlzUmVkaXJlY3RFbmFibGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5yZWRpcmVjdF90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLWlzRW5MYW5nIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCIgdi1tb2RlbD0iQUNDb25maWcuaXNFbkxhbmciPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VFbl90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJzcC1hYy1zYXZlYnV0dG9uIiBAY2xpY2s9InNhdmVDb25maWciIGNsYXNzPSJzcC1hYy1zcGFuYnV0dG9uIGVuZGJ1dHRvbiIgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwub2tCdG5fdGV4dCIgc3R5bGU9InBvc2l0aW9uOiByZWxhdGl2ZTtmbG9hdDogcmlnaHQ7bWFyZ2luLXRvcDogLTZweDsiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLm9rQnRuX3RleHQiPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5hZHNfdGl0bGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtYWRzIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCIgdi1tb2RlbD0iQUNDb25maWcuaXNBZHNFbmFibGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5hZHNfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYXV0b3BhZ2VfdGl0bGUiIGNsYXNzPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtaXNBdXRvcGFnZSIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdHlwZT0iY2hlY2tib3giIHYtbW9kZWw9IkFDQ29uZmlnLmlzQXV0b3BhZ2UiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5hdXRvcGFnZV90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5ibG9ja2VuYWJsZV90aXRsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcC1hYy1ibG9jayIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdHlwZT0iY2hlY2tib3giIHYtbW9kZWw9IkFDQ29uZmlnLmlzQmxvY2tFbmFibGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5ibG9ja2VuYWJsZV90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJzcC1hYy1ibG9ja2RpeWJ1dHRvbiIgY2xhc3M9InNwLWFjLXNwYW5idXR0b24iIEBjbGljaz0ib3RoZXIuY3VyVGFiID0gMiIgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYmxvY2tEaXlCdG5fdGl0bGUiIHN0eWxlPSJtYXJnaW4tbGVmdDogNXB4O2NvbG9yOiAjODg4ODg4OyIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYmxvY2tEaXlCdG5fdGV4dCI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYmxvY2tlbmFibGVfdGV4dCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrQXV0b1JlbW92ZV90aXRsZSIgdi1tb2RlbD0iQUNDb25maWcuaXNCbG9ja0Rpc3BsYXkiIGlkPSJzcC1hYy1yZW1vdmVCbG9jayIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5ibG9ja0F1dG9SZW1vdmVfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYmxvY2tCdG5TaG93X3RpdGxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYmxvY2tCdG5TaG93X3RpdGxlIiAgdi1tb2RlbD0iQUNDb25maWcuaXNCbG9ja0J0bk5vdERpc3BsYXkiIGlkPSJzcC1hYy1ibG9ja0J0bkRpc3BsYXkiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYmxvY2tCdG5TaG93X3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfdGV4dCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcC1hYy1zdHlsZSIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdHlwZT0iY2hlY2tib3giIHYtbW9kZWw9IkFDQ29uZmlnLkFkc1N0eWxlRW5hYmxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t55m+5bqm5qC35byPLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iY29udGFpbmVyLWxhYmVsIGJhaWR1Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImxhYmVsX2hpZGUiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iYWlkdV9sYWJsZSIgQGNsaWNrPSJsYWJlbFNob3dIaWRlRW52Ij48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUiIHZhbHVlPSIwIiB2LW1vZGVsPSJBQ0NvbmZpZy5iYWlkdS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1X29yaWdpbiB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCAgbmFtZT0nc3AtYWMtaHV5YW5fc3R5bGVfYmFpZHUnIHR5cGU9J2NoZWNrYm94JyB2LW1vZGVsPSJBQ0NvbmZpZy5iYWlkdS5IdVlhbk1vZGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmFpZHVfaHV5YW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iIj48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdWxpdGUiIHR5cGU9ImNoZWNrYm94IiB2LW1vZGVsPSJBQ0NvbmZpZy5TdHlsZV9CYWlkdUxpdGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmFpZHVfYmFpZHVMaXRlIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4Ij48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdSIgdmFsdWU9IjEiIHYtbW9kZWw9IkFDQ29uZmlnLmJhaWR1LkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmFpZHVfMWxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdSIgdmFsdWU9IjIiIHR5cGU9InJhZGlvIiB2LW1vZGVsPSJBQ0NvbmZpZy5iYWlkdS5BZHNTdHlsZU1vZGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmFpZHVfMWxpbmVfZW50ZXIgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdSIgdmFsdWU9IjMiIHR5cGU9InJhZGlvIiB2LW1vZGVsPSJBQ0NvbmZpZy5iYWlkdS5BZHNTdHlsZU1vZGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmFpZHVfMmxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdSIgdmFsdWU9IjQiIHR5cGU9InJhZGlvIiB2LW1vZGVsPSJBQ0NvbmZpZy5iYWlkdS5BZHNTdHlsZU1vZGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmFpZHVfM2xpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdSIgdmFsdWU9IjUiIHR5cGU9InJhZGlvIiB2LW1vZGVsPSJBQ0NvbmZpZy5iYWlkdS5BZHNTdHlsZU1vZGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmFpZHVfNGxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3nmb7luqbmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OiAxcHg7d2lkdGg6MjY3cHg7bWFyZ2luLWxlZnQ6MjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNkOGQ4ZDg7bWFyZ2luLXRvcDoxcHg7Ij48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3osLfmrYzmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJjb250YWluZXItbGFiZWwgZ29vZ2xlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImxhYmVsX2hpZGUiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfbGFibGUiIEBjbGljaz0ibGFiZWxTaG93SGlkZUVudiI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2dvb2dsZSIgdmFsdWU9IjAiIHR5cGU9InJhZGlvIiB2LW1vZGVsPSJBQ0NvbmZpZy5nb29nbGUuQWRzU3R5bGVNb2RlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2dvb2dsZV9vcmlnaW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlX2h1eWFuIj48aW5wdXQgbmFtZT0ic3AtYWMtaHV5YW5fc3R5bGVfZ29vZ2xlIiB2LW1vZGVsPSJBQ0NvbmZpZy5nb29nbGUuSHVZYW5Nb2RlIiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfaHV5YW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlX2dvb2dsZUxpdGUiIHN0eWxlPSIiPjxpbnB1dCBuYW1lPSJzcC1hYy1nb29nbGVfaW5fYmFpZHVtb2RlIiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0dvb2xlSW5CYWlkdU1vZGVFbmFibGUiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2dvb2dsZV9nb29nbGVMaXRlIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4Ij48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUiIHZhbHVlPSIxIiB2LW1vZGVsPSJBQ0NvbmZpZy5nb29nbGUuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfMWxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUiIHZhbHVlPSIyIiB2LW1vZGVsPSJBQ0NvbmZpZy5nb29nbGUuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyIgY2hlY2tlZD0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2dvb2dsZV8xbGluZV9lbnRlciB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2dvb2dsZSIgdmFsdWU9IjMiIHYtbW9kZWw9IkFDQ29uZmlnLmdvb2dsZS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2dvb2dsZV8ybGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2dvb2dsZSIgdmFsdWU9IjQiIHYtbW9kZWw9IkFDQ29uZmlnLmdvb2dsZS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2dvb2dsZV8zbGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2dvb2dsZSIgdmFsdWU9IjUiIHYtbW9kZWw9IkFDQ29uZmlnLmdvb2dsZS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2dvb2dsZV80bGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyPgogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLeiwt+atjOagt+W8jy0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDFweDt3aWR0aDoyNjdweDttYXJnaW4tbGVmdDoyNXB4O2JhY2tncm91bmQtY29sb3I6I2Q4ZDhkODttYXJnaW4tdG9wOjFweDsiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLeW/heW6lOagt+W8jy0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImNvbnRhaW5lci1sYWJlbCBiaW5nIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImxhYmVsX2hpZGUiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nX2xhYmxlIiBAY2xpY2s9ImxhYmVsU2hvd0hpZGVFbnYiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4Ij48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iaW5nIiB2LW1vZGVsPSJBQ0NvbmZpZy5iaW5nLkFkc1N0eWxlTW9kZSIgdmFsdWU9IjAiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2Jpbmdfb3JpZ2luIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JpbmdfaHV5YW4iPjxpbnB1dCBuYW1lPSJzcC1hYy1odXlhbl9zdHlsZV9iaW5nIiB2LW1vZGVsPSJBQ0NvbmZpZy5iaW5nLkh1WWFuTW9kZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmluZ19odXlhbiB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmluZyIgdi1tb2RlbD0iQUNDb25maWcuYmluZy5BZHNTdHlsZU1vZGUiIHZhbHVlPSIxIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nXzFsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmluZyIgdmFsdWU9IjIiIHYtbW9kZWw9IkFDQ29uZmlnLmJpbmcuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nXzFsaW5lX2VudGVyIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfYmluZyIgdmFsdWU9IjMiIHYtbW9kZWw9IkFDQ29uZmlnLmJpbmcuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyIgY2hlY2tlZD0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JpbmdfMmxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iaW5nIiB2YWx1ZT0iNCIgdi1tb2RlbD0iQUNDb25maWcuYmluZy5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JpbmdfM2xpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iaW5nIiB2YWx1ZT0iNSIgdi1tb2RlbD0iQUNDb25maWcuYmluZy5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JpbmdfNGxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLeW/heW6lOagt+W8jy0tLS0tLS0tLS0tLS0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OiAxcHg7d2lkdGg6MjY3cHg7bWFyZ2luLWxlZnQ6MjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNkOGQ4ZDg7bWFyZ2luLXRvcDoxcHg7Ij48L2Rpdj4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICZsdDshJm5kYXNoOyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU75pCc54uX5qC35byPJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7Jm5kYXNoOyZndDstLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iY29udGFpbmVyLWxhYmVsIHNvZ291Ij4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJsYWJlbF9oaWRlIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfc29nb3VfbGFibGUiIEBjbGljaz0ibGFiZWxTaG93SGlkZUVudiI+PC9sYWJlbD4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4Ij48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9zb2dvdSIgdi1tb2RlbD0iQUNDb25maWcuc29nb3UuQWRzU3R5bGVNb2RlIiB2YWx1ZT0iMCIgdHlwZT0icmFkaW8iPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX3NvZ291X29yaWdpbiB9fS0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX3NvZ291X2h1eWFuIj48aW5wdXQgbmFtZT0ic3AtYWMtaHV5YW5fc3R5bGVfc29nb3UiIHYtbW9kZWw9IkFDQ29uZmlnLnNvZ291Lkh1WWFuTW9kZSIgdHlwZT0iY2hlY2tib3giPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX3NvZ291X2h1eWFuIH19LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4Ij4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UiIHZhbHVlPSIxIiB2LW1vZGVsPSJBQ0NvbmZpZy5zb2dvdS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV8xbGluZSB9fS0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UiIHZhbHVlPSIyIiB2LW1vZGVsPSJBQ0NvbmZpZy5zb2dvdS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV8xbGluZV9lbnRlciB9fS0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfc29nb3UiIHZhbHVlPSIzIiB2LW1vZGVsPSJBQ0NvbmZpZy5zb2dvdS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIiBjaGVja2VkPSIiPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX3NvZ291XzJsaW5lIH19LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9zb2dvdSIgdmFsdWU9IjQiIHYtbW9kZWw9IkFDQ29uZmlnLnNvZ291LkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX3NvZ291XzNsaW5lIH19LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9zb2dvdSIgdmFsdWU9IjUiIHYtbW9kZWw9IkFDQ29uZmlnLnNvZ291LkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX3NvZ291XzRsaW5lIH19LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgJmx0OyEmbmRhc2g7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTvmkJzni5fmoLflvI8mIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmbmRhc2g7Jmd0Oy0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDFweDt3aWR0aDoyNjdweDttYXJnaW4tbGVmdDoyNXB4O2JhY2tncm91bmQtY29sb3I6I2Q4ZDhkODttYXJnaW4tdG9wOjFweDsiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLem4rem4reaQnOagt+W8jy0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImNvbnRhaW5lci1sYWJlbCBkdWNrIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImxhYmVsX2hpZGUiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrX2xhYmxlIiBAY2xpY2s9ImxhYmVsU2hvd0hpZGVFbnYiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4Ij48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9kdWNrIiB2LW1vZGVsPSJBQ0NvbmZpZy5kdWNrLkFkc1N0eWxlTW9kZSIgdmFsdWU9IjAiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2R1Y2tfb3JpZ2luIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2R1Y2tfaHV5YW4iPjxpbnB1dCBuYW1lPSJzcC1hYy1odXlhbl9zdHlsZV9kdWNrIiB2LW1vZGVsPSJBQ0NvbmZpZy5kdWNrLkh1WWFuTW9kZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja19odXlhbiB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja19ub3JtYWwiIHN0eWxlPSIiPjxpbnB1dCB2LW1vZGVsPSJBQ0NvbmZpZy5ub3JtYWxpemVEdWNrIiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrX25vcm1hbCB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZHVjayIgdmFsdWU9IjEiIHYtbW9kZWw9IkFDQ29uZmlnLmR1Y2suQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrXzFsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZHVjayIgdmFsdWU9IjIiIHYtbW9kZWw9IkFDQ29uZmlnLmR1Y2suQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrXzFsaW5lX2VudGVyIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZHVjayIgdmFsdWU9IjMiIHYtbW9kZWw9IkFDQ29uZmlnLmR1Y2suQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyIgY2hlY2tlZD0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2R1Y2tfMmxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9kdWNrIiB2YWx1ZT0iNCIgdi1tb2RlbD0iQUNDb25maWcuZHVjay5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2R1Y2tfM2xpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9kdWNrIiB2YWx1ZT0iNSIgdi1tb2RlbD0iQUNDb25maWcuZHVjay5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2R1Y2tfNGxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLem4rem4reaQnOagt+W8jy0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDFweDt3aWR0aDoyNjdweDttYXJnaW4tbGVmdDoyNXB4O2JhY2tncm91bmQtY29sb3I6I2Q4ZDhkODttYXJnaW4tdG9wOjFweDsiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLeWkmuWQieagt+W8jy0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImNvbnRhaW5lci1sYWJlbCBkb2dlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImxhYmVsX2hpZGUiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlX2xhYmxlIiBAY2xpY2s9ImxhYmVsU2hvd0hpZGVFbnYiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4Ij48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9kb2dlIiB2LW1vZGVsPSJBQ0NvbmZpZy5kb2dlLkFkc1N0eWxlTW9kZSIgdmFsdWU9IjAiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2RvZ2Vfb3JpZ2luIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2RvZ2VfaHV5YW4iPjxpbnB1dCBuYW1lPSJzcC1hYy1odXlhbl9zdHlsZV9kb2dlIiB2LW1vZGVsPSJBQ0NvbmZpZy5kb2dlLkh1WWFuTW9kZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV9odXlhbiB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV9ub3JtYWwiIHN0eWxlPSIiPjxpbnB1dCB2LW1vZGVsPSJBQ0NvbmZpZy5ub3JtYWxpemVEb2dlIiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlX25vcm1hbCB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZG9nZSIgdmFsdWU9IjEiIHYtbW9kZWw9IkFDQ29uZmlnLmRvZ2UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlXzFsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZG9nZSIgdmFsdWU9IjIiIHYtbW9kZWw9IkFDQ29uZmlnLmRvZ2UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlXzFsaW5lX2VudGVyIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZG9nZSIgdmFsdWU9IjMiIHYtbW9kZWw9IkFDQ29uZmlnLmRvZ2UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyIgY2hlY2tlZD0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2RvZ2VfMmxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9kb2dlIiB2YWx1ZT0iNCIgdi1tb2RlbD0iQUNDb25maWcuZG9nZS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2RvZ2VfM2xpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9kb2dlIiB2YWx1ZT0iNSIgdi1tb2RlbD0iQUNDb25maWcuZG9nZS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2RvZ2VfNGxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3lpJrlkInmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLeaKpOecvOaooeW8j+iuvue9ri0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuaHV5YW5Nb2RlX3RpdGxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLXVzZXJjb2xvciIgdi1tb2RlbD0iQUNDb25maWcuaXNVc2VyQ29sb3JFbmFibGUiIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5odXlhbk1vZGVfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJtZW51LWJveC1jb250YWluZXIiIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmh1eWFuTW9kZV90aXRsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4OyIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuaHV5YW5Db2xvcl90ZXh0Ij48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz0ic3AtYWMtbWVudWh1eWFuQ29sb3IiIEBpbnB1dC5zdG9wPSJ1c2VUaGlzSHV5YW5Db2xvciIgdi1tb2RlbD0iQUNDb25maWcuZGVmYXVsdEh1WWFuQ29sb3IiIHR5cGU9ImNvbG9yIiA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5odXlhbkNvbG9yX3RpdGxlIiBzdHlsZT0iY3Vyc29yOiBwb2ludGVyO21hcmdpbi10b3A6LTAuMDVyZW07aGVpZ2h0OjIzcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9Im1lbnUtYm94LXNtYWxsIiBkYXRhLXZhbHVlPSIjREVGMUVGIiBAY2xpY2suc3RvcD0idXNlVGhpc0h1eWFuQ29sb3IiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNERUYxRUY7Ij4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDs8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibWVudS1ib3gtc21hbGwiIGRhdGEtdmFsdWU9IiNGM0YyRUUiIEBjbGljay5zdG9wPSJ1c2VUaGlzSHV5YW5Db2xvciIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6I0YzRjJFRTsiPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOzwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJtZW51LWJveC1zbWFsbCIgZGF0YS12YWx1ZT0iI0U1RTVFNSIgQGNsaWNrLnN0b3A9InVzZVRoaXNIdXlhbkNvbG9yIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjojRTVFNUU1OyI+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImxpbmtocmVmIiBkYXRhLWhyZWY9Imh0dHBzOi8vd3d3Lm50YW93LmNvbS9jb2xvcnBpY2tlci5odG1sIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7bWFyZ2luLXJpZ2h0OiAxMHB4OyIgb25jbGljaz0id2luZG93Lm9wZW4odGhpcy5kYXRhc2V0LmhyZWYpIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5odXlhbkNvbG9yTW9yZV90ZXh0Ij48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0tRmF2aWNvbuWbvuagh+iuvue9ri0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmZhdmljb25fdGl0bGUiIHYtbW9kZWw9IkFDQ29uZmlnLmlzRmF2aWNvbkVuYWJsZSIgaWQ9InNwLWFjLWZhdmljb24iIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5mYXZpY29uX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHg7IiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5mYXZpY29uX2RlZmF1bHRJY29uX3RleHQiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcC1hYy1mYXZpY29uVXJsIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB2LW1vZGVsPSJBQ0NvbmZpZy5kZWZhdWx0RmF2aWNvblVybCIgdmFsdWU9Imh0dHBzOi8vYWUwMS5hbGljZG4uY29tL2tmL0hUQjFkUlkwWDhPRDNLVmpTWkZGcTZBbjlwWGF5LmpwZyIgc3R5bGU9IndpZHRoOjU1JTttYXJnaW4tdG9wOi0wLjNlbTsiIHR5cGU9ImlucHV0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLeenu+mZpOeZvuW6puaQnOe0oumihOa1iy0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNlYXJjaE9yaWdpbl90aXRsZSIgdi1tb2RlbD0iQUNDb25maWcuZG9EaXNhYmxlU3VnIiBpZD0ic3AtYWMtc3VnX29yaWdpbiIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNlYXJjaE9yaWdpbl90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3pmYTliqA344CBOOOAgTktLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtcmlnaHQiIHYtbW9kZWw9IkFDQ29uZmlnLmlzUmlnaHREaXNwbGF5RW5hYmxlIiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNob3dSaWdodF90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLWNvdW50ZXIiIHYtbW9kZWw9IkFDQ29uZmlnLmlzQ291bnRlckVuYWJsZSIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zaG93Q291bnRlcl90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLWFsaW5lIiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0FMaW5lRW5hYmxlIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNob3dBTGluZV90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3oh6rlrprkuYnmoLflvI/lhoXlrrktLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtdXNlcnN0eWxlIiB2LW1vZGVsPSJBQ0NvbmZpZy5pc1VzZXJTdHlsZUVuYWJsZSIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zaG93VXNlclN0eWxlX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0ic3AtYWMtdXNlcnN0eWxlVEVYVCIgdi1tb2RlbD0iQUNDb25maWcuVXNlclN0eWxlVGV4dCIgQGtleXVwPSJsb2FkQ3VzdG9tU3R5bGUiIEBjaGFuZ2U9ImxvYWRDdXN0b21TdHlsZSIgQHBhc3RlPSJsb2FkQ3VzdG9tU3R5bGUiIG5hbWU9InNwLWFjLWFfZm9yY2UiIHN0eWxlPSJ3aWR0aDo4NSU7aGVpZ2h0OiA2NnB4O21hcmdpbi1sZWZ0OjMwcHg7IiB0eXBlPSJpbnB1dCIgPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0ibGlua2hyZWYiIHRhcmdldD0iX2JsYW5rIiA6aHJlZj0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmNvbnRhY3RNZV91cmwiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmNvbnRhY3RNZV90ZXh0Ij48L2E+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3mi6bmiKrln5/lkI3orr7nva5wYW5lbC0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ic2V0dGluZy1zZWNvbmQiIHYtc2hvdz0ib3RoZXIuY3VyVGFiID09PSAyIj4KICAgICAgICAgICAgICAgICAgICAgIDxsaSBzdHlsZT0nbWFyZ2luLWJvdHRvbTogOHB4ICFpbXBvcnRhbnQ7Jz4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSdzcC1hYy1ibG9ja2RpeWJ1dHRvbi1iYWNrJyBAY2xpY2s9Im90aGVyLmN1clRhYj0xLG90aGVyLnNob3dCbG9ja0xpc3RBcmVhID0gZmFsc2UiIGNsYXNzPSdzcC1hYy1zcGFuYnV0dG9uJz57eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2V0dGluZ19wYW5lbF9zZWNvbmQuYmFja0J0bl90ZXh0IH19PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2V0dGluZ19wYW5lbF9zZWNvbmQuYmxvY2tMYWJlbF90ZXh0IH19fQogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDxsaSBzdHlsZT0nbWFyZ2luLWJvdHRvbTogOHB4ICFpbXBvcnRhbnQ7Jz4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9J3NwLWFjLWJsb2NrZGl5YnV0dG9uLWRpeWxpc3QnIGNsYXNzPSdzcC1hYy1zcGFuYnV0dG9uJyBAY2xpY2s9Im90aGVyLnNob3dCbG9ja0xpc3RBcmVhID0gIW90aGVyLnNob3dCbG9ja0xpc3RBcmVhIiB2LXRleHQ9ImNhbF9kaXlCbG9ja0xpc3RCdG4iPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9J2FjLWJsb2NrTGlzdCcgQGNsaWNrPSJyZW1vdmVBQmxvY2tMaXN0SXRlbSIgc3R5bGU9J21heC1oZWlnaHQ6NjB2aDtvdmVyZmxvdy15OiBzY3JvbGw7Jz4KICAgICAgICAgICAgICAgICAgICAgICAgPHVsIHYtc2hvdz0iIW90aGVyLnNob3dCbG9ja0xpc3RBcmVhIiB2LWh0bWw9ImdldEJsb2NrTGlzdCI+PC91bD4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9J2FjLWJsb2NrQm94Q29uJyBzdHlsZT0nbWF4LWhlaWdodDogNjB2aDt0ZXh0LWFsaWduOiBjZW50ZXI7bWFyZ2luLWxlZnQ6IDI2cHg7Jz4KICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIHYtc2hvdz0ib3RoZXIuc2hvd0Jsb2NrTGlzdEFyZWEiICBAa2V5dXA9InN5bmNUb0Jsb2NrTGlzdCIgQGNoYW5nZT0ic3luY1RvQmxvY2tMaXN0IiBAcGFzdGU9InN5bmNUb0Jsb2NrTGlzdCIgcm93cz0iMjAiIHYtdGV4dD0iQUNDb25maWcuVXNlckJsb2NrTGlzdC5qb2luKCdcXG4nKSI+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zZXR0aW5nX3BhbmVsX3NlY29uZC5hZGRCbG9ja0xhYmVsX3RleHQgfX08aW5wdXQgY2xhc3M9InNwLWFjLWFkZFJ1bGVPbmUiIEBrZXl1cC5lbnRlcj0iY2tBZGRSdWxlIiB2LW1vZGVsPSJvdGhlci5hZGRCbG9ja0l0ZW0iIHN0eWxlPSd3aWR0aDo1NSU7Jz4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9J3NwLWFjLWFkZFJ1bGVidXR0b24nIGNsYXNzPSdzcC1hYy1zcGFuYnV0dG9uIGVuZGJ1dHRvbicgQGNsaWNrPSJja0FkZFJ1bGUiIHN0eWxlPSdwb3NpdGlvbjogcmVsYXRpdmUgIWltcG9ydGFudDtsaW5lLWhlaWdodDogMTdweDsnIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNldHRpbmdfcGFuZWxfc2Vjb25kLmFkZEJ0bkxhYmVsX3RleHQiPuaWsOWinjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgICAgICA8dWwgdi1zaG93PSJvdGhlci5jdXJUYWIgPT09IDMiIHN0eWxlPSJ3aWR0aDogMzAwcHgiPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWFsb2ctYm9keSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9J3NwLWFjLWJsb2NrZGl5YnV0dG9uLWJhY2snIEBjbGljaz0ib3RoZXIuY3VyVGFiPTEiIGNsYXNzPSdzcC1hYy1zcGFuYnV0dG9uJz7ov5Tlm548L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj7kvb/nlKjor7TmmI7vvJo8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+LTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+MS4g5pys6ISa5pys5LiN5YyF5ZCr5Lu75L2V5bm/5ZGK5YaF5a6577yM5Lmf5peg5oSP5LqO56C05Z2P572R56uZ546w5pyJ5Yqf6IO955qE5a6M5pW05oCn77yM5LuF5biM5pyb6YCa6L+H5LiA5Lqb5pi+56S65pWI5p6c55qE5Y+Y5pu06IO95pu05aW955qE55WZ5a2Y5a+55bqU572R56uZ546w5pyJ55qE55So5oi377yM5LiA5a6a56iL5bqm5LiK5pu05aW95Zyw5L+d6K+B5LqG55uu5qCH572R56uZ55qE5pel5rS744CCPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIuIOWQjOaXtuacrOiEmuacrOS4reaJgOacieWKn+iDveWdh+S4uuWtpuS5oOWSjOeglOeptndlYuWJjeerr+aKgOacr+eahOWPkeWxleiAjOW8gOWPke+8jOW4jOacm+S4uuWtpuS5oOWJjeerr+aKgOacr+eahOeglOeptuS6uuWRmOaPkOS+m+S4gOS4quabtOWlveeahOWPguiAg+S7o+egge+8jOS/g+i/m3dlYuWJjeerr+aKgOacr+eahOWPkeWxle+8jOS+v+S6juaKgOacr+eahOWtpuS5oOWSjOS6pOa1ge+8jOacrOiEmuacrOS4jea2ieWPiuWvuee9keermea6kOeggeeahOiwg+ivleWSjOS/ruaUue+8jOWboOS9v+eUqOacrOiEmuacrOi/m+ihjOmdnuazleeUqOmAlOS4juacrOiEmuacrOaXoOWFs+OAggogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLeS/neWtmOOAgeWPlua2iOaMiemSri0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJzcC1hYy1jYW5jZWxidXR0b24iIGNsYXNzPSJzcC1hYy1zcGFuYnV0dG9uIGVuZGJ1dHRvbiIgQGNsaWNrPSJjbG9zZVBhbmVsIiA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5jYW5jZWxCdG5fdGV4dCIgc3R5bGU9InBvc2l0aW9uOiByZWxhdGl2ZTtmbG9hdDogbGVmdDsiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmNhbmNlbEJ0bl90ZXh0Ij48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNwLWFjLXNhdmVidXR0b24iIHJlZj0iYm90dG9tU2F2ZUJ1dHRvbiIgQGNsaWNrPSJzYXZlQ29uZmlnIiBjbGFzcz0ic3AtYWMtc3BhbmJ1dHRvbiBlbmRidXR0b24iIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLm9rQnRuX3RleHQiIHN0eWxlPSJwb3NpdGlvbjogcmVsYXRpdmU7ZmxvYXQ6IHJpZ2h0OyIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwub2tCdG5fdGV4dCI+PC9zcGFuPgogICAgICAgICAgICAgICAgICA8L2ZpZWxkc2V0PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKENvbnRhaW5lcik7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbGV0IGFsbE5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLkFDLWZhdmljb25ULCAuQUMtQ291bnRlclQiKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGFsbE5vZGVzW2ldLmdldEF0dHJpYnV0ZSgnYWNDbGljaycpID09PSBudWxsKSB7CiAgICAgICAgICAgICAgYWxsTm9kZXNbaV0uc2V0QXR0cmlidXRlKCdhY0NsaWNrJywgJzEnKTsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYWxsTm9kZXNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gQUN0b2dnbGVTZXR0aW5nRGlzcGxheShlKTsKICAgICAgICAgICAgICAgIH0sIHRydWUpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYm9keSAjc3AtYWMtY29udGFpbmVyIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7IC8vIOmYu+atoueCueWHu+iHqui6q+eahOaXtuWAmeWFs+mXrQogICAgICAgICAgICB9LCBmYWxzZSk7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImJvZHkiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgc2FmZUZ1bmN0aW9uKCAoKSA9PiB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgfQoKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGlzRWxlbWVudFZpc2libGUoZG9tKSB7CiAgICAgICAgICBjb25zdCBzY3JUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgcmV0dXJuICEoc2NyVG9wID4gKGRvbS5vZmZzZXRUb3AgKyBkb20ub2Zmc2V0SGVpZ2h0KSB8fCAoc2NyVG9wICsgd2luZG93LmlubmVySGVpZ2h0KSA8IGRvbS5vZmZzZXRUb3ApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTW9iaWxlQmFpZHVEaXJlY3RMaW5rKCkgewogICAgICAgICAgbGV0IG5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI3BhZ2UgI3BhZ2UtYmQgI3Jlc3VsdHMgLnJlc3VsdDpub3QoW2FjX3JlZGlyZWN0U3RhdHVzXSkiKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBub2Rlc1tpXTsKICAgICAgICAgICAgc2FmZUZ1bmN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBsZXQgY3VyRGF0YSA9IEpTT04ucGFyc2UoY3VyTm9kZS5kYXRhc2V0LmxvZy5yZXBsYWNlKC8nL2dtLCAiXCIiKSk7CiAgICAgICAgICAgICAgbGV0IHRydWVMaW5rID0gY3VyRGF0YS5tdTsKICAgICAgICAgICAgICBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoImFydGljbGUiKS5zZXRBdHRyaWJ1dGUoInJsLWxpbmstaHJlZiIsIHRydWVMaW5rKTsKICAgICAgICAgICAgICBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoImEiKS5mb3JFYWNoKGZ1bmN0aW9uIChwZXIpIHsKICAgICAgICAgICAgICAgIHBlci5zZXRBdHRyaWJ1dGUoImhyZWYiLCB0cnVlTGluayk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjdXJOb2RlLnNldEF0dHJpYnV0ZSgiYWNfcmVkaXJlY3RTdGF0dXMiLCAiMSIpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlT25Nb3VzZURvd25GdW5jKCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHJlc3VsdE5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmcgLnJjIGEsICNycywgI3JzbyAuZyBhIik7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0Tm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBsZXQgb25lID0gcmVzdWx0Tm9kZXNbaV07CiAgICAgICAgICAgICAgb25lLnNldEF0dHJpYnV0ZSgib25tb3VzZWRvd24iLCAiIik7IC8vIOiwt+atjOWOu+mHjeWumuWQkeW5suaJsAogICAgICAgICAgICAgIG9uZS5zZXRBdHRyaWJ1dGUoInRhcmdldCIsICJfYmxhbmsiKTsgLy8g6LC35q2M6ZO+5o6l5paw5qCH562+5omT5byACiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW1vdmVSZWRpcmVjdExpbmtUYXJnZXQoKSB7CiAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5aSElIVSkgewogICAgICAgICAgICBsZXQgbm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuUmljaFRleHQgYVtocmVmKj0nLy9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0J10iKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGxldCB1cmwgPSBkZWNvZGVVUklDb21wb25lbnQobm9kZXNbaV0uaHJlZi5yZXBsYWNlKC9odHRwcz86XC9cL2xpbmtcLnpoaWh1XC5jb21cL1w/dGFyZ2V0PS8sICIiKSk7CiAgICAgICAgICAgICAgbm9kZXNbaV0uaHJlZiA9IHVybDsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVX1hVRVNIVSkgewogICAgICAgICAgICBsZXQgeG5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiYVtocmVmKj0nc2NfdnVybD1odHRwJ10iKTsKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGkgPCB4bm9kZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBsZXQgeHVybCA9IGdldFVybEF0dHJpYnV0ZSh4bm9kZXNbal0uaHJlZiwgInNjX3Z1cmwiLCB0cnVlKTsKICAgICAgICAgICAgICB4bm9kZXNbal0uaHJlZiA9IHh1cmw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIOaPkOWPlnVybOWFg+e0oOeahOWPguaVsOWAvAogICAgICAgIGZ1bmN0aW9uIGdldFVybEF0dHJpYnV0ZSh1cmwsIGF0dHJpYnV0ZSwgbmVlZERlY29kZSkgewogICAgICAgICAgbGV0IHNlYXJjaFZhbHVlUyA9ICh1cmwuc3Vic3RyKDEpICsgIiIpLnNwbGl0KCImIik7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlYXJjaFZhbHVlUy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBsZXQga2V5X3ZhbHVlID0gc2VhcmNoVmFsdWVTW2ldLnNwbGl0KCI9Iik7CiAgICAgICAgICAgIGxldCByZWcgPSBuZXcgUmVnRXhwKCJeIiArIGF0dHJpYnV0ZSArICIkIik7CiAgICAgICAgICAgIGlmIChyZWcudGVzdChrZXlfdmFsdWVbMF0pKSB7CiAgICAgICAgICAgICAgbGV0IHNlYXJjaFdvcmRzID0ga2V5X3ZhbHVlWzFdOwogICAgICAgICAgICAgIHJldHVybiBuZWVkRGVjb2RlID8gZGVjb2RlVVJJQ29tcG9uZW50KHNlYXJjaFdvcmRzKSA6IHNlYXJjaFdvcmRzOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZXNldFVSTE5vcm1hbChsaXN0KSB7CiAgICAgICAgICAvLyDms6jmhI/mnInph43lpI3nmoTlnLDlnYDvvIzlsL3ph4/lr7nph43lpI3lnLDlnYDov5vooYzljrvph40KICAgICAgICAgIHZhciBoYXNEZWFsSHJlZlNldCA9IG5ldyBTZXQoKTsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAvLyDmraTmlrnms5XmmK/lvILmraXvvIzmlYXlnKjnu5PmnZ/nmoTml7blgJnkvb/nlKhp5Lya5Ye66Zeu6aKYLeS4pemHjSEKICAgICAgICAgICAgLy8g6YeH55So6Zet5YyF55qE5pa55rOV5p2l6L+b6KGM5pWw5o2u55qE5Lyg6YCSCiAgICAgICAgICAgIGxldCBjdXJOb2RlID0gbGlzdFtpXTsKICAgICAgICAgICAgbGV0IGN1cmhyZWYgPSBjdXJOb2RlLmhyZWY7CiAgICAgICAgICAgIGlmIChsaXN0W2ldICE9PSBudWxsICYmIGxpc3RbaV0uZ2V0QXR0cmlidXRlKCJhY19yZWRpcmVjdFN0YXR1cyIpID09PSBudWxsKSB7CiAgICAgICAgICAgICAgbGlzdFtpXS5zZXRBdHRyaWJ1dGUoImFjX3JlZGlyZWN0U3RhdHVzIiwgIjAiKTsKICAgICAgICAgICAgICBsZXQgbGVuMSA9IGhhc0RlYWxIcmVmU2V0LnNpemU7CiAgICAgICAgICAgICAgaGFzRGVhbEhyZWZTZXQuYWRkKGN1cmhyZWYpOwogICAgICAgICAgICAgIGxldCBsZW4yID0gaGFzRGVhbEhyZWZTZXQuc2l6ZTsKICAgICAgICAgICAgICBpZiAobGVuMSA9PT0gbGVuMikgY29udGludWU7IC8vIOivtOaYjuaVsOaNruW3sue7j+WkhOeQhui/h++8jOWtmOWcqOebuOWQjOeahOiusOW9lQogICAgICAgICAgICAgIGlmIChjdXJocmVmLmluY2x1ZGVzKCJ3d3cuYmFpZHUuY29tL2xpbmsiKSB8fAogICAgICAgICAgICAgICAgY3VyaHJlZi5pbmNsdWRlcygibS5iYWlkdS5jb20vZnJvbSIpIHx8CiAgICAgICAgICAgICAgICBjdXJocmVmLmluY2x1ZGVzKCJ3d3cuc29nb3UuY29tL2xpbmsiKSB8fAogICAgICAgICAgICAgICAgY3VyaHJlZi5pbmNsdWRlcygic28uY29tL2xpbmsiKSkgewogICAgICAgICAgICAgICAgKGZ1bmN0aW9uIChjX2N1cm5vZGUsIGNfY3VyaHJlZikgewogICAgICAgICAgICAgICAgICBsZXQgdXJsID0gY19jdXJocmVmLnJlcGxhY2UoL15odHRwOi8sICJodHRwczoiKTsKICAgICAgICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFUgJiYgIXVybC5pbmNsdWRlcygiZXFpZCIpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5piv55m+5bqm77yM5bm25LiU5rKh5pyJ5bim5pyJ6Kej5p6Q5Y+C5pWw77yM6YKj5LmI5omL5Yqo5bim5LiKCiAgICAgICAgICAgICAgICAgICAgdXJsID0gdXJsICsgIiZ3ZD0mZXFpZD0iOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGxldCBnbVJlcXVlc3ROb2RlID0gR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgIC8vIGZyb206ICJhY3hociIsCiAgICAgICAgICAgICAgICAgICAgZXh0RGF0YTogY19jdXJocmVmLCAvLyDnlKjkuo7mianlsZUKICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IkFjY2VwdCI6ICIqLyoiLCAiUmVmZXJlciI6IGNfY3VyaHJlZi5yZXBsYWNlKC9eaHR0cDovLCAiaHR0cHM6Iil9LAogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogODAwMCwKICAgICAgICAgICAgICAgICAgICBvbnJlYWR5c3RhdGVjaGFuZ2U6IGZ1bmN0aW9uIChyZXNwb25zZSkgeyAvLyBNQVJLIOacieaXtuWAmei/meS4quWHveaVsOagueacrOS4jei/m+adpSAtIOiwg+ivleeahOmXrumimCAtIHRpbWVvdXQKICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCB8fCByZXNwb25zZS5yZXNwb25zZUhlYWRlcnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g55Sx5LqO5piv54m55q6K6L+U5ZueLeW5tuS4lOWlveaQnC3mkJzni5ct55m+5bqm6YO95piv6L+Z5Liq5qC85byP77yM5pWF5o+Q5Ye6CiAgICAgICAgICAgICAgICAgICAgICAgIERlYWxSZWRpcmVjdChnbVJlcXVlc3ROb2RlLCBjX2N1cmhyZWYsIHJlc3BvbnNlLnJlc3BvbnNlVGV4dCwgIlVSTD0nKFteJ10rKSciKQogICAgICAgICAgICAgICAgICAgICAgICAvLyDov5nkuKrmmK/lnKjkuIrpnaLml6Dms5XlpITnkIbnmoTmg4XlhrXkuIvvvIzlpIfnlKjnmoQgdG0tZmluYWx1cmxkaGRnICB0bS1maW5hbHVybG1mZGgKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZXNwb25zZUhlYWRlcnMuaW5jbHVkZXMoInRtLWZpbmFsdXJsIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVsVVJMID0gUmVnX0dldChyZXNwb25zZS5yZXNwb25zZUhlYWRlcnMsICJ0bS1maW5hbHVybFxcdys6IChbXlxcc10rKSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWxVUkwgPT09IG51bGwgfHwgcmVsVVJMID09PSAiIiB8fCByZWxVUkwuaW5jbHVkZXMoInd3dy5iYWlkdS5jb20vc2VhcmNoL2Vycm9yIikpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICBEZWFsUmVkaXJlY3QoZ21SZXF1ZXN0Tm9kZSwgY19jdXJocmVmLCByZWxVUkwpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pKGN1ck5vZGUsIGN1cmhyZWYpOyAvL+S8oOmAkuaXp+eahOe9keWdgOi/h+WOu++8jOivu+S9nGNfY3VyaHJlZgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBjdXJOb2RlLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsICgpPT4gewogICAgICAgICAgICAgIC8vICAgY29uc3QgQUJLZXkgPSBSZWRpcmVjdE1hcC5nZXQoY3VyTm9kZS5ocmVmKTsgLy8g5Y6f5aeLIC0+IOS5i+WQjueahOmTvuaOpQogICAgICAgICAgICAgIC8vICAgaWYoQUJLZXkpIGN1ck5vZGUuaHJlZiA9IEFCS2V5OwogICAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICAgICAgLy8gY3VyTm9kZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsICgpPT4gewogICAgICAgICAgICAgIC8vICAgY29uc3QgQkFLZXkgPSBSZWRpcmVjdE1hcC5nZXQoY3VyTm9kZS5ocmVmKTsgLy8g5LmL5ZCO55qE6L+e5o6lIC0+IOWOn+WniwogICAgICAgICAgICAgIC8vICAgaWYoQkFLZXkpIGN1ck5vZGUuaHJlZiA9IEJBS2V5OwogICAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChoYXNEZWFsSHJlZlNldC5zaXplID4gMCAmJiBsaXN0Lmxlbmd0aCAtIGhhc0RlYWxIcmVmU2V0LnNpemUgPiAwKSBjb25zb2xlLmxvZygi5Lii5byD5o6JIiwgbGlzdC5sZW5ndGggLSBoYXNEZWFsSHJlZlNldC5zaXplLCAi5Liq6YeN5aSN6ZO+5o6lIik7CiAgICAgICAgfQoKICAgICAgICB2YXIgRGVhbFJlZGlyZWN0ID0gZnVuY3Rpb24gKHJlcXVlc3QsIGN1ck5vZGVIcmVmLCByZXNwVGV4dCwgUmVnVGV4dCkgewogICAgICAgICAgaWYgKHJlc3BUZXh0ID09PSBudWxsIHx8IHR5cGVvZiAocmVzcFRleHQpID09PSAidW5kZWZpbmVkIikgcmV0dXJuOwogICAgICAgICAgbGV0IHJlc3VsdFJlc3BvbnNlVXJsID0gIiI7CiAgICAgICAgICBpZiAoUmVnVGV4dCAhPSBudWxsKSB7CiAgICAgICAgICAgIHJlc3VsdFJlc3BvbnNlVXJsID0gUmVnX0dldChyZXNwVGV4dCwgUmVnVGV4dCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHRSZXNwb25zZVVybCA9IHJlc3BUZXh0OwogICAgICAgICAgfQogICAgICAgICAgaWYgKHJlc3VsdFJlc3BvbnNlVXJsICE9PSBudWxsICYmIHJlc3VsdFJlc3BvbnNlVXJsICE9PSAiIiAmJiAhcmVzdWx0UmVzcG9uc2VVcmwuaW5jbHVkZXMoInd3dy5iYWlkdS5jb20vbGluayIpKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuU09HT1UpIGN1ck5vZGVIcmVmID0gY3VyTm9kZUhyZWYucmVwbGFjZSgvXmh0dHBzOlwvXC93d3cuc29nb3UuY29tLywgIiIpOwogICAgICAgICAgICAgIGxldCBob3N0ID0gZ2V0VGV4dEhvc3QocmVzdWx0UmVzcG9uc2VVcmwpOwogICAgICAgICAgICAgIC8vIFJlZGlyZWN0TWFwLnNldChjdXJOb2RlSHJlZiwgcmVzdWx0UmVzcG9uc2VVcmwpOyAvLyDov5vooYzkuIDkuKrmlbDmja7lhbPogZQKICAgICAgICAgICAgICAvLyBSZWRpcmVjdE1hcC5zZXQocmVzdWx0UmVzcG9uc2VVcmwsIGN1ck5vZGVIcmVmKTsgLy8g6L+b6KGM5LiA5Liq5pWw5o2u5YWz6IGUCiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiKltocmVmKj0nIiArIGN1ck5vZGVIcmVmICsgIiddIikuZm9yRWFjaCggcGVyID0+IHsKICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VOb2RlID0gcGVyOwoKICAgICAgICAgICAgICAgIGNoYW5nZU5vZGUuc2V0QXR0cmlidXRlKCJhY19yZWRpcmVjdFN0YXR1cyIsICIyIik7CiAgICAgICAgICAgICAgICBjaGFuZ2VOb2RlLmhyZWYgPSByZXN1bHRSZXNwb25zZVVybDsKICAgICAgICAgICAgICAgIC8vIGNoYW5nZU5vZGUuc2V0QXR0cmlidXRlKCJkYXRhLW9yaWhyZWYiLCBjaGFuZ2VOb2RlLmhyZWYpOwogICAgICAgICAgICAgICAgaWYgKGNoYW5nZU5vZGUuaGFzQXR0cmlidXRlKCJtZXRhIikpIHsKICAgICAgICAgICAgICAgICAgY2hhbmdlTm9kZS5zZXRBdHRyaWJ1dGUoIm1ldGEiLCBob3N0KTsKICAgICAgICAgICAgICAgICAgY2hhbmdlTm9kZS5kYXRhc2V0Lmhvc3QgPSBob3N0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGNoYW5nZU5vZGUudGV4dCAmJiBjaGFuZ2VOb2RlLnRleHQubGVuZ3RoIDwgMTAgJiYgIWNoYW5nZU5vZGUudGV4dC5pbmNsdWRlcyhob3N0KQogICAgICAgICAgICAgICAgICAvLyDkuI3og73mmK9yZWRpcmVjdCB1cmwg5LiN6IO95pivaDJcaDPkuIvnm7TlsZ7pk77mjqUKICAgICAgICAgICAgICAgICAgJiYgIWNoYW5nZU5vZGUucGFyZW50RWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoImgiKSkgewogICAgICAgICAgICAgICAgICBjaGFuZ2VOb2RlLmluc2VydEFkamFjZW50SFRNTCgiYmVmb3JlRW5kIiwgIiZuYnNwOy0mbmJzcDsiICsgaG9zdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgb3RoZXJEYXRhLm90aGVyLmN1ckhvc3RzLmFjcHVzaChob3N0ICsgIiMjIyIgKyByZXN1bHRSZXNwb25zZVVybCk7CiAgICAgICAgICAgICAgcmVxdWVzdC5hYm9ydCgpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiByZW1vdmVBRF9iYWlkdV9zb2dvdSgpIHsgLy8g56e76Zmk572R56uZ6Ieq5pyJ5bm/5ZGKCiAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CQUlEVSkgewoKICAgICAgICAgICAgLy8g56e76Zmkc2hhZG93RE9N5bm/5ZGK77yb5pCc57Si5YWz6ZSu5a2X77ya5reY5a6d77yb54S25ZCO54K55Ye75pCc57Si5qGG77yM5bm/5ZGK5Lya5aSa5qyh6YeN546wc2hhZG93ZG9tCiAgICAgICAgICAgIHNhZmVGdW5jdGlvbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgJCgnLmMtY29udGFpbmVyID4+PiAuYy1jb250YWluZXInKS5oYXMoJy5mMTM+c3BhbjpzdGFydHMtd2l0aCgi5bm/5ZGKIiknKS5yZW1vdmUoKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDnp7vpmaTlj7PkvqfmoI/lub/lkYoKICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ2NvbnRlbnRfcmlnaHQnKS9kaXZbLi8vYVtzdGFydHMtd2l0aCh0ZXh0KCksICflub/lkYonKV1dIik7CiAgICAgICAgICAgIC8vIOenu+mZpOagh+WHhuW5v+WRigogICAgICAgICAgICBzYWZlUmVtb3ZlX3hwYXRoKCJpZCgnY29udGVudF9sZWZ0JykvZGl2Wy4vL3NwYW5bY29udGFpbnModGV4dCgpLCAn5bm/5ZGKJyldXSIpOwogICAgICAgICAgICAvLyDnp7vpmaTlj7PkvqfmoI/pobbpg6gt5bqV6YOo5peg55So5bm/5ZGKCiAgICAgICAgICAgIHNhZmVSZW1vdmVfeHBhdGgoImlkKCdjb250ZW50X3JpZ2h0JykvYnIiKTsKICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ2NvbnRlbnRfcmlnaHQnKS9kaXZbbm90KEBpZCldIik7CiAgICAgICAgICAgIC8vIOenu+mZpOmhtumDqOWPr+iDveWHuueOsOeahCAi5Li65oKo5o6o6I2QIgogICAgICAgICAgICBzYWZlUmVtb3ZlX3hwYXRoKCJpZCgnY29udGVudF9sZWZ0JykvL2Rpdltjb250YWlucyhAY2xhc3MsICdfcnMnKV0iKTsKCiAgICAgICAgICB9IGVsc2UgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuTUJBSURVKSB7CiAgICAgICAgICAgIC8qKioq56e76Zmk5omL5py65qih5byP5LiK55qE6YOo5YiG5bm/5ZGKKioqKi8KICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ3BhZ2UtYmQnKS9kaXZbbm90KGNvbnRhaW5zKEBjbGFzcywgJ3Jlc3VsdCcpKV0iKTsKICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ3BhZ2UtYmQnKS9kaXZbbm90KEBjbGFzcyldIik7CiAgICAgICAgICAgIHNhZmVSZW1vdmVfeHBhdGgoIi8vZGl2W0BjbGFzcz0nbmEtbGlrZS1jb250YWluZXInXSIpOwogICAgICAgICAgICAvLyBzYWZlRnVuY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyAgICQoJyNwYWdlLWJkICNyZXN1bHRzPmRpdjpub3QoW2NsYXNzKj0icmVzdWx0Il0pJykucmVtb3ZlKCk7CiAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICAvLyBzYWZlRnVuY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyAgICQoJyNwYWdlLWJkICNyZXN1bHRzPmRpdjpub3QoW2NsYXNzXSknKS5yZW1vdmUoKTsKICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuU08pIHsKICAgICAgICAgICAgc2FmZVJlbW92ZSgiI3NvX2t3LWFkIik7CiAgICAgICAgICAgIHNhZmVSZW1vdmUoIiNtLXNwcmVhZC1sZWZ0Iik7CiAgICAgICAgICAgIC8vIOenu+mZpOaQnOe0ouS4reW6lemDqOW5v+WRigogICAgICAgICAgICBzYWZlUmVtb3ZlKCIjbS1zcHJlYWQtYm90dG9tIik7CiAgICAgICAgICAgIC8vIOenu+mZpOWPs+S+p+agj+mhtumDqOW5v+WRigogICAgICAgICAgICBzYWZlUmVtb3ZlX3hwYXRoKCJpZCgncmlnaHR0b3BfYm94JykvL2xpWy4vL3NwYW5bY29udGFpbnModGV4dCgpLCAn5bm/5ZGKJyldXSIpOwogICAgICAgICAgfSBlbHNlIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJJTkcpIHsKICAgICAgICAgICAgc2FmZVJlbW92ZSgiLmJfYWQiKTsKICAgICAgICAgIH0gZWxzZSBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5HT09HTEUpIHsKICAgICAgICAgICAgc2FmZVJlbW92ZSgiI2JvdHRvbWFkcyIpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkQ291bnRlcihjaXRlTGlzdCkgewogICAgICAgICAgbGV0IGNzc1RleHQgPSAicG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDoxO21hcmdpbi1yaWdodDo0cHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7Y29sb3I6d2hpdGU7Zm9udC1mYW1pbHk6J+W+rui9r+mbhem7kSc7Zm9udC1zaXplOjE2cHg7dGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MjJweDtsaW5lLWhlaWdodDoyMnB4O2JvcmRlci1yYWRpdXM6NTAlOyI7CiAgICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNpdGVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxldCBjdXIgPSBjaXRlTGlzdFtpXQogICAgICAgICAgICBjb25zdCBpbmRleCA9IGN1ci5nZXRBdHRyaWJ1dGUoJ1NvcnRJbmRleCcpOwogICAgICAgICAgICBpZiAoaW5kZXggPT09IG51bGwgfHwgdHlwZW9mIChpbmRleCkgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgY3VyLnNldEF0dHJpYnV0ZSgnU29ydEluZGV4JywgQ09OU1Quc29ydEluZGV4KTsKICAgICAgICAgICAgICBjdXIuaW5uZXIgPSBjdXIuaW5uZXJIVE1MOwogICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSAiPGVtIGNsYXNzPSdBQy1Db3VudGVyVCcgc3R5bGU9IiArIGNzc1RleHQgKyAiPiIgKyBDT05TVC5zb3J0SW5kZXggKyAiPC9lbT4iOwogICAgICAgICAgICAgIGN1ci5pbm5lckhUTUwgPSBkaXYuaW5uZXJIVE1MICsgY3VyLmlubmVyOwogICAgICAgICAgICAgIENPTlNULnNvcnRJbmRleCsrOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbnN0IGN1ckNvdW50ZXIgPSBjdXIucXVlcnlTZWxlY3RvcigiLkFDLUNvdW50ZXJUIikKICAgICAgICAgICAgICBjb25zdCBvcmlJbmRleCA9IGN1ckNvdW50ZXIuaW5uZXJUZXh0CiAgICAgICAgICAgICAgY29uc3QgY2hlY2tWYWx1ZSA9IChpICsgMSkgJSAxMDA7CiAgICAgICAgICAgICAgLy8g5pWw5o2u5YC85LiN5ZCMCiAgICAgICAgICAgICAgLy8g5pWw5o2u5rKh5pyJ6KKr57+76K+RCiAgICAgICAgICAgICAgaWYgKCtpbmRleCAhPT0gY2hlY2tWYWx1ZSAmJiAhL15cZCskLy50ZXN0KG9yaUluZGV4KSkgeyAvLyDmjInpnIDmm7TmlrAKICAgICAgICAgICAgICAgIGN1ckNvdW50ZXIuaW5uZXJUZXh0ID1jaGVja1ZhbHVlOwogICAgICAgICAgICAgICAgY3VyLnNldEF0dHJpYnV0ZSgnU29ydEluZGV4JywgY2hlY2tWYWx1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgSG9zdFJlZyA9IG5ldyBSZWdFeHAoLyhodHRwcz86XC9cLyk/KFteL1xzXSspL2kpOwoKICAgICAgICBmdW5jdGlvbiBnZXRUZXh0SG9zdChzYmVmb3JlKSB7CiAgICAgICAgICBzYmVmb3JlID0gKHNiZWZvcmUgJiYgc2JlZm9yZS50cmltKCkpLnJlcGxhY2UoL1xzLVxzXGR7NH0tXGR7MSwyfS1cZHsxLDJ9LywgIiIpIHx8ICIiOwogICAgICAgICAgbGV0IHNlbmQ7CiAgICAgICAgICBsZXQgcmVzdWx0ID0gc2JlZm9yZS5zcGxpdCgnLScpOwogICAgICAgICAgLy8gLS3mkJzni5fnmb7luqbkuJPnlKjvvJvlpoLmnpznrKzkuIDkuKrmmK/kuK3mlofnmoTor53vvIzlnLDlnYDlsLHmmK/nrKzkuozkuKoKICAgICAgICAgIGlmICgocmVzdWx0Lmxlbmd0aCA+IDEgJiYgbmV3IFJlZ0V4cCgiW1xcdTRFMDAtXFx1OUZGRl0rIiwgImciKS50ZXN0KHNiZWZvcmUpKSAmJiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CQUlEVSB8fCBjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLlNPR09VKSkgewogICAgICAgICAgICBzYmVmb3JlID0gcmVzdWx0WzFdOwogICAgICAgICAgfQogICAgICAgICAgLy8g5q2k5pe2c2JlZm9yZeWHoOS5juaYr+etieS6jue9keWdgOS6hu+8jOS9huaYr+acieaXtuWAmeS8muacieWkmueahOepuuagvO+8jOWkmueahOWGheWuue+8jOWkmueahOWJjee8gGh0dHDvvIzlpJrkvZnnmoTot6/lvoQKICAgICAgICAgIGxldCByZXMgPSBIb3N0UmVnLmV4ZWMoc2JlZm9yZSk7CiAgICAgICAgICBzZW5kID0gKHJlcyAmJiByZXNbMl0udHJpbSgpKSB8fCAiIjsKICAgICAgICAgIC8vIHNlbmQgPSBzYmVmb3JlLnJlcGxhY2UoLyhcL1teL10qfFxzKikvLCAiIikucmVwbGFjZSgvPFtePl0qPi9nLCAiIikucmVwbGFjZSgvaHR0cHM/OlwvXC8vZywgIiIpLnJlcGxhY2UoLzxcLz9zdHJvbmc+L2csICIiKS5yZXBsYWNlKC88XC8/Yj4vZywgIiIpLnJlcGxhY2UoLzw/Pj8vZywgIiIpLnJlcGxhY2UoLyggfFwvKS4qL2csICIiKS5yZXBsYWNlKC9cLlwuLiovLCAiIik7CiAgICAgICAgICBpZiAoc2VuZCA9PT0gIiIpIHJldHVybiBudWxsOwogICAgICAgICAgaWYgKHNlbmQuaW5kZXhPZigiLiIpIDwgMCkgcmV0dXJuIG51bGw7CiAgICAgICAgICBpZiAoc2VuZC5pbmRleE9mKCLihrUiKSA+PSAwKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiBzZW5kLnRyaW0oKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFkZEZhdmljb24oY2l0ZUxpc3QpIHsKICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLkRPR0UpIHsKICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNpdGVMaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgIGlmIChudWxsID09PSBjaXRlTGlzdFtpbmRleF0uZ2V0QXR0cmlidXRlKCJhY19mYXZpY29uU3RhdHVzIikpIHsKICAgICAgICAgICAgICAgIGxldCBjdXJOb2RlID0gY2l0ZUxpc3RbaW5kZXhdOwogICAgICAgICAgICAgICAgbGV0IHRhcmdldE5vZGUgPSBjdXJOb2RlOwogICAgICAgICAgICAgICAgbGV0IHsgY3VySG9zdCwgY3VyVXJsIH0gPSBnZXROb2RlSG9zdCh0YXJnZXROb2RlKTsKICAgICAgICAgICAgICAgIGlmIChjdXJIb3N0ID09PSBudWxsIHx8IChjdXJVcmwgJiYgY3VyVXJsLmluY2x1ZGVzKCJ3d3cuYmFpZHUuY29tL2xpbmsiKSkpIHsgLy8g6Lez6L+HYmFpZHUuY2xpY2sKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBvdGhlckRhdGEub3RoZXIuY3VySG9zdHMuYWNwdXNoKGN1ckhvc3QgKyAiIyMjIiArIGN1clVybCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsZXQgZmF2aWNvblVybCA9IGN1ckhvc3Q7CiAgICAgICAgICAgICAgICBsZXQgSUkgPSAwOwogICAgICAgICAgICAgICAgZm9yICg7IElJIDw9IDU7IElJKyspIHsKICAgICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZSA9IHRhcmdldE5vZGUucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldE5vZGUgIT0gbnVsbCAmJiB0YXJnZXROb2RlLnF1ZXJ5U2VsZWN0b3IoY3VyU2l0ZS5GYXZpY29uQWRkVG8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpbmRleCsiLiIrZmF2aWNvblVybCsiLS0iK0lJKTsKICAgICAgICAgICAgICAgIGlmIChJSSA8PSA1KSB7CiAgICAgICAgICAgICAgICAgIC8vIOWFiOeUqOeItuiKgueCueWIpOaWreS4gOS4i+aYr+WQpuWtmOWcqGltZwogICAgICAgICAgICAgICAgICBsZXQgdG1wSFRNTCA9IHRhcmdldE5vZGUuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgICBsZXQgcG9zID0gdG1wSFRNTC5pbmRleE9mKCJmYXYtdXJsIikKICAgICAgICAgICAgICAgICAgICAmIHRtcEhUTUwuaW5kZXhPZigiZmF2dXJsIikKICAgICAgICAgICAgICAgICAgICAmIHRtcEhUTUwuaW5kZXhPZigidGl0LWljbyIpCiAgICAgICAgICAgICAgICAgICAgJiB0bXBIVE1MLmluZGV4T2YoImltZ19mYXYgcm1zX2ltZyIpCiAgICAgICAgICAgICAgICAgICAgJiB0bXBIVE1MLmluZGV4T2YoImMtdG9vbC0iKQogICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJzcGFuIGNsYXNzPVwiYy1pY29uIGMtaWNvbi0iKQogICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJpbWcgY2xhc3M9XCJ4QTMzR2MiKTsKICAgICAgICAgICAgICAgICAgLy/ku5boh6rlt7Hlt7Lnu4/lgZrkuoZmYXZpY29u5LqGCiAgICAgICAgICAgICAgICAgIGlmIChwb3MgPiAtMSkgewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCLlt7LmnInlm77niYfvvJoiKTsKICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnNldEF0dHJpYnV0ZSgiYWNfZmF2aWNvblN0YXR1cyIsICItMiIpOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRhcmdldE5vZGUgPSB0YXJnZXROb2RlLnF1ZXJ5U2VsZWN0b3IoY3VyU2l0ZS5GYXZpY29uQWRkVG8pOwogICAgICAgICAgICAgICAgICAvLyDnibnmrorlpITnkIZCSU5HCiAgICAgICAgICAgICAgICAgIC8vIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJJTkcpIGN1ck5vZGUgPSBjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoImgyIik7CiAgICAgICAgICAgICAgICAgIC8vaHR0cHM6Ly9hcGkuYnlpLnB3L2Zhdmljb24vP3VybD0/Pz8/IOS4jeeos+WumgogICAgICAgICAgICAgICAgICAvL2h0dHA6Ly8iK2Zhdmljb25VcmwrIi9jZG4uaWNvP2RlZmF1bHRpY29uPWh0dHA6Ly9zb3ouaW0vZmF2aWNvbi5pY28g5LiN56iz5a6aCiAgICAgICAgICAgICAgICAgIC8vaHR0cHM6Ly93d3cueHR3aW5kLmNvbS9hcGkvaW5kZXgucGhwP3VybD0/Pz8/IOaMguS6huOAguOAguOAggogICAgICAgICAgICAgICAgICAvL2h0dHBzOi8vc3RhdGljcy5kbnNwb2QuY24vcHJveHlfZmF2aWNvbi9fL2Zhdmljb24/ZG9tYWluPXNpbmEuY24KICAgICAgICAgICAgICAgICAgLy93d3cuZ29vZ2xlLmNvbS9zMi9mYXZpY29ucz9kb21haW49NzY0MzUwMTc3LmxvZnRlci5jb20KICAgICAgICAgICAgICAgICAgLy/lpoLmnpzlnLDlnYDkuI3mraPnoa7vvIzpgqPkuYjkuKLlvIMKICAgICAgICAgICAgICAgICAgbGV0IGhvc3QgPSBmYXZpY29uVXJsLnJlcGxhY2UoL1teLl0rXC4oW14uXSspXC4oW14uXSspLywgIiQxLiQyIik7CiAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXROb2RlLnF1ZXJ5U2VsZWN0b3IoIi5BQy1mYXZpY29uVCIpID09PSBudWxsICYmIGhvc3QubGVuZ3RoID4gMykgewogICAgICAgICAgICAgICAgICAgIGxldCBpbnNOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgICAgICAgICAgICAgICAgLy8gY3VyTm9kZSA9IGN1ck5vZGUuY2hpbGRyZW5bMF0gfHwgY3VyTm9kZS5maXJzdENoaWxkIDsgLy8gZmlyc3RDaGlsZOWuueaYk+mBh+WIsHRleHTlr7nosaEKICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLnNldEF0dHJpYnV0ZSgiYWNfZmF2aWNvblN0YXR1cyIsICIxIik7CiAgICAgICAgICAgICAgICAgICAgLy8gY3VyTm9kZS5pbnNlcnRCZWZvcmUoaW5zTm9kZSwgY3VyTm9kZS5maXJzdENoaWxkKTsKICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLmNsYXNzTmFtZSA9ICJBQy1mYXZpY29uVCI7CiAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5zZXRBdHRyaWJ1dGUoInJlZmVycmVycG9saWN5IiwgIm5vLXJlZmVycmVyIik7CiAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5zdHlsZSA9ICJwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjE7dmVydGljYWwtYWxpZ246c3ViO2hlaWdodDoxNnB4O3dpZHRoOjE2cHg7bWFyZ2luLXJpZ2h0OjVweDttYXJnaW4tYm90dG9tOiAycHg7dXNlci1zZWxlY3Q6bm9uZTsiOwoKICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLnNyYyA9ICJodHRwczovL2Zhdmljb24ueWFuZGV4Lm5ldC9mYXZpY29uL3YyLyIgKyAoY3VyTm9kZS5ocmVmIHx8IGhvc3QpOyAvLyBNQVJLIHlhbmRleOaUr+aMgei/meenjeafpeivouinhOWImQogICAgICAgICAgICAgICAgICAgIGluc05vZGUuc2V0QXR0cmlidXRlKCJmYXZpY29uSUQiLCAiMCIpOwogICAgICAgICAgICAgICAgICAgIGluc05vZGUuc2V0QXR0cmlidXRlKCJvbmRyYWdzdGFydCIsICJyZXR1cm4gZmFsc2U7IikgLy8g56aB5q2i5ouW5Yqo5Zu+54mHLemBv+WFjeaLlumUmeS6hgogICAgICAgICAgICAgICAgICAgIC8vIGN1ck5vZGUuaW5uZXJIVE1MID0gaW5zTm9kZS5vdXRlckhUTUwgKyBjdXJOb2RlLmlubmVySFRNTDsKICAgICAgICAgICAgICAgICAgICAvLyBjdXJOb2RlLmluc2VydEFkamFjZW50SFRNTCgiYWZ0ZXJFbmQiLCBpbnNOb2RlLmlubmVySFRNTCk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGJlZm9yZUluZGV4ID0gMDsKICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Tm9kZS5jaGlsZE5vZGVzW2JlZm9yZUluZGV4XS5jbGFzc05hbWUgPT09ICJBQy1Db3VudGVyVCIpIHsKICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZUluZGV4ID0gMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZS5pbnNlcnRCZWZvcmUoaW5zTm9kZSwgdGFyZ2V0Tm9kZS5jaGlsZE5vZGVzW2JlZm9yZUluZGV4XSk7CiAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uICh4Y3VyKSB7CiAgICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLm9ubG9hZCA9IGZ1bmN0aW9uIChlbnYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZ05vZGUgPSB4Y3VyLnF1ZXJ5U2VsZWN0b3IoIi5BQy1mYXZpY29uVCIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGltZ05vZGUgfHwge30pLm5hdHVyYWxXaWR0aCA8IDEwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nTm9kZS5zZXRBdHRyaWJ1dGUoIm9sZC1zcmMiLCBpbWdOb2RlLnNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nTm9kZS5zcmMgPSBBQ0NvbmZpZy5kZWZhdWx0RmF2aWNvblVybDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpbWdOb2RlLm9ubG9hZCA9ICJqYXZhc2NyaXB0OnZvaWQoMCk7IjsKICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSkodGFyZ2V0Tm9kZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBjaGVja05vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAiKTsKICAgICAgICAgICAgZm9yIChsZXQgZmFOb2RlIG9mIGNoZWNrTm9kZXMpIHsKICAgICAgICAgICAgICBsZXQgZmF2aWNvbk5vZGUgPSBmYU5vZGUucXVlcnlTZWxlY3RvcigiLnJlc3VsdF9faWNvbiBpbWciKTsKICAgICAgICAgICAgICBsZXQgYmVmb3JlTm9kZSA9IGZhTm9kZS5xdWVyeVNlbGVjdG9yKCIucmVzdWx0X190aXRsZSBhIik7CiAgICAgICAgICAgICAgaWYoZmF2aWNvbk5vZGUgJiYgYmVmb3JlTm9kZSl7CiAgICAgICAgICAgICAgICBmYXZpY29uTm9kZS5zdHlsZSA9ICJ2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7bWFyZ2luLXJpZ2h0OjVweDsiOwogICAgICAgICAgICAgICAgYmVmb3JlTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShmYXZpY29uTm9kZSwgYmVmb3JlTm9kZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBJbnNlcnRTZXR0aW5nTWVudSgpIHsKICAgICAgICAgIGlmICgoY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5PVEhFUlMpICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNteXVzZXIiKSA9PT0gbnVsbCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGxldCBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdSwgI2diPmRpdj5kaXY+ZGl2LCAjYl9oZWFkZXI+I2lkX2gsIC50b3AtYmFyIC5zb2dvdS1zZXQtYm94LCAjaGVhZGVyX3dyYXBwZXIgLmpzLWhsLWJ1dHRvbiwgYm9keVtkb2dlXSAjaGVhZGVyX3dyYXBwZXIgI2hlYWRlciIpOyAvL2JhaWR1OyBnb29nbGU7IGJpbmc7IOaQnOeLlwogICAgICAgICAgICAgIHBhcmVudC5zdHlsZSA9ICJ3aWR0aDogYXV0bzsiOwogICAgICAgICAgICAgIGxldCB1c2VyQWRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgIHVzZXJBZGl2LmlkID0gIm15dXNlciI7CiAgICAgICAgICAgICAgdXNlckFkaXYuaW5uZXJIVE1MID0gYDxpbnB1dCB0eXBlPSdzdWJtaXQnIGNsYXNzPSdteXVzZXJjb25maWcnIHZhbHVlPScke0FsbERhdGEubGFuLnVzZS5tZW51X3RleHR9Jy8+PHNwYW4gY2xhc3M9J2FjLW5ld3ZlcnNpb25EaXNwbGF5JyBzdHlsZT0nYmFja2dyb3VuZC1jb2xvcjogcmVkO2Zsb2F0OiBsZWZ0O2hlaWdodDogOHB4O3dpZHRoOiA4cHg7Ym9yZGVyLXJhZGl1czogNHB4O2Rpc3BsYXk6JHsoQ09OU1QuaGFzTmV3RnVuY05lZWREaXNwbGF5ID8gInVuc2V0IiA6ICJub25lIil9Jz4mbmJzcDs8L3NwYW4+YDsKICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHVzZXJBZGl2LCBwYXJlbnQuY2hpbGROb2Rlc1swXSk7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI215dXNlciAubXl1c2VyY29uZmlnIikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIEFDdG9nZ2xlU2V0dGluZ0Rpc3BsYXkoZSk7CiAgICAgICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSgpOyAvLyDor7vlj5bkuKrkurrorr7nva7kv6Hmga8KICAgICAgLyoqCiAgICAgICAqIEBwYXJhbSBjYWxsYmFjayDlm57osIPlh73mlbDvvIzpnIDopoHov5Tlm57mmK/lkKbnu5PmnZ9UcnVl44CBRmFsc2XjgIHlkKbliJnnm7jlvZPkuo7lrprml7blmagKICAgICAgICogY2FsbGJhY2sgcmV0dXJuOgogICAgICAgKiAgdHJ1ZSA9IOWAkuiuoeaXtgogICAgICAgKiAgZmFsc2UgPSDorqHml7blmagKICAgICAgICogIG5vbmUgPSDorqHml7blmagKICAgICAgICogQHBhcmFtIHBlcmlvZCDlkajmnJ/vvIzlpoI6MjAwbXMKICAgICAgICogQHBhcmFtIHJ1bk5vdyDnq4vljbPmiafooYwKICAgICAgICovCiAgICAgIGZ1bmN0aW9uIFJBRkludGVydmFsKGNhbGxiYWNrLCBwZXJpb2QsIHJ1bk5vdykgewogICAgICAgIC8vIOS4gOenkjYw5qyh77yM5a+55bqUMeenkjEwMDBtcwogICAgICAgIGNvbnN0IG5lZWRDb3VudCA9IHBlcmlvZCAvIDEwMDAgKiA2MDsKICAgICAgICBsZXQgdGltZXMgPSAwOyAvLyDlt7Lnu4/orqHmlbDnmoTmlbDph48KCiAgICAgICAgaWYocnVuTm93ID09PSB0cnVlKXsgLy8g5a+55LqO56uL5Y2z5omn6KGM5Ye95pWw55qE56uL5Y2z5Yik5a6a77yM5ZCm5YiZ6L+b6KGMCiAgICAgICAgICBjb25zdCBzaG91bGRGaW5pc2ggPSBjYWxsYmFjaygpOwogICAgICAgICAgaWYoc2hvdWxkRmluaXNoKSByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdGVwKCkgewogICAgICAgICAgaWYodGltZXMgPCBuZWVkQ291bnQpewogICAgICAgICAgICAvLyDorqHmlbDmnKrnu5PmnZ8t57un57ut6K6h5pWwCiAgICAgICAgICAgIHRpbWVzKys7CiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKQogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIC8vIOiuoeaVsOe7k+adny3lgZzmraLorqHmlbDvvIzliKTlrprnu5PmnpwKICAgICAgICAgICAgY29uc3Qgc2hvdWxkRmluaXNoID0gY2FsbGJhY2soKSB8fCBmYWxzZTsKICAgICAgICAgICAgaWYoIXNob3VsZEZpbmlzaCl7CiAgICAgICAgICAgICAgLy8g6L+U5Zue5YC85Li6ZmFsc2XvvIzph43lkK/orqHmlbDlmagKICAgICAgICAgICAgICB0aW1lcyA9IDA7CiAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIC8vIOi/lOWbnuWAvOS4unRydWXvvIznu5PmnZ/orqHmlbDlmagKICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHNhZmVGdW5jdGlvbihmdW5jKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZ1bmMoKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiBzYWZlV2FpdEZ1bmMoc2VsZWN0b3IsIGNhbGxiYWNrRnVuYywgdGltZSwgbm90Q2xlYXIpIHsKICAgICAgICB0aW1lID0gdGltZSB8fCA1MDsKICAgICAgICBub3RDbGVhciA9IG5vdENsZWFyIHx8IGZhbHNlOwogICAgICAgIGxldCBkb0NsZWFyID0gIW5vdENsZWFyOwogICAgICAgIFJBRkludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICgodHlwZW9mIChzZWxlY3RvcikgPT09ICJzdHJpbmciICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpICE9IG51bGwpKSB7CiAgICAgICAgICAgIGNhbGxiYWNrRnVuYyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSk7CiAgICAgICAgICAgIGlmIChkb0NsZWFyKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIChzZWxlY3RvcikgPT09ICJmdW5jdGlvbiIgJiYgKHNlbGVjdG9yKCkgIT0gbnVsbCB8fCAoc2VsZWN0b3IoKSB8fCBbXSkubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgY2FsbGJhY2tGdW5jKHNlbGVjdG9yKClbMF0pOwogICAgICAgICAgICBpZiAoZG9DbGVhcikgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSwgdGltZSwgdHJ1ZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIEFDX2FkZFN0eWxlKGNzcywgY2xhc3NOYW1lLCBhZGRUb1RhcmdldCwgaXNSZWxvYWQsIGluaXRUeXBlKSB7IC8vIOa3u+WKoENTU+S7o+egge+8jOS4jeiAg+iZkeaWh+acrOi9veWFpeaXtumXtO+8jOWPquaJp+ihjOS4gOasoS3ml6DorrrmiJDlip/kuI7lkKbvvIzluKbmnIljbGFzc05hbWUKICAgICAgICBSQUZJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvKioKICAgICAgICAgICAqIGFkZFRvVGFyZ2V06L+Z6YeM5LiN6KaB5L2/55SoaGVhZOagh+etvixoZWFk5qCH562+55qEY3Nz5Lya5ZyoaHRtbOi9veWFpeaXtuWKoOi9ve+8jAogICAgICAgICAgICogaHRtbOWKoOi9veWQjuS8vOS5juS4jeS8muWGjeasoeWKoOi9ve+8jGJvZHnkvJroh6rliqjliqDovb0KICAgICAgICAgICAqICoqLwogICAgICAgICAgbGV0IGFkZFRvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhZGRUb1RhcmdldCk7CiAgICAgICAgICBpZiAodHlwZW9mIChhZGRUb1RhcmdldCkgPT09ICJ1bmRlZmluZWQiKQogICAgICAgICAgICBhZGRUbyA9IChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmJvZHkgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTsKICAgICAgICAgIGlzUmVsb2FkID0gaXNSZWxvYWQgfHwgZmFsc2U7IC8vIOm7mOiupOaYr+mdnuWKoOi9veWeiwogICAgICAgICAgaW5pdFR5cGUgPSBpbml0VHlwZSB8fCAidGV4dC9jc3MiOwogICAgICAgICAgLy8g5aaC5p6c5rKh5pyJ55uu5qCH6IqC54K5KOWImeebtOaOpeWKoCkgfHwg5pyJ55uu5qCH6IqC54K55LiU5om+5Yiw5LqG6IqC54K5KOi/m+ihjOaWsOWinikKICAgICAgICAgIGlmICh0eXBlb2YgKGFkZFRvVGFyZ2V0KSA9PT0gInVuZGVmaW5lZCIgfHwgKHR5cGVvZiAoYWRkVG9UYXJnZXQpICE9ICJ1bmRlZmluZWQiICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWRkVG9UYXJnZXQpICE9IG51bGwpKSB7CiAgICAgICAgICAgIC8vIGNsZWFySW50ZXJ2YWwodG91dCk7CiAgICAgICAgICAgIC8vIOWmguaenHRydWUg5by66KGM6KaG55uW77yM5LiN566h5pyJ5rKh5pyJLS3lhYjliKDpmaQKICAgICAgICAgICAgLy8g5aaC5p6cZmFsc2XvvIzkuI3opobnm5bvvIzkvYbmmK/lpoLmnpzmnInnmoTor53vvIzopoHpgIDlh7rvvIzkuI3lrZjlnKjliJnmlrDlop4tLeaXoOmcgOWIoOmZpAogICAgICAgICAgICBpZiAoaXNSZWxvYWQgPT09IHRydWUpIHsKICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCIuIiArIGNsYXNzTmFtZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZWxvYWQgPT09IGZhbHNlICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi4iICsgY2xhc3NOYW1lKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgLy8g6IqC54K55a2Y5ZyoICYmIOS4jeWHhuWkh+imhueblgogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSAhPSBudWxsKSBjc3NOb2RlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTsKICAgICAgICAgICAgY3NzTm9kZS5zZXRBdHRyaWJ1dGUoInR5cGUiLCBpbml0VHlwZSk7CiAgICAgICAgICAgIGNzc05vZGUuaW5uZXJIVE1MID0gY3NzOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGFkZFRvLmFwcGVuZENoaWxkKGNzc05vZGUpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9LCAyMCwgdHJ1ZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHNhZmVSZW1vdmUoY3NzU2VsZWN0b3IpIHsKICAgICAgICBzYWZlRnVuY3Rpb24oKCkgPT4gewogICAgICAgICAgbGV0IHJlbW92ZU5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjc3NTZWxlY3Rvcik7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbW92ZU5vZGVzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICByZW1vdmVOb2Rlc1tpXS5yZW1vdmUoKTsKICAgICAgICB9KQogICAgICB9CgogICAgICBmdW5jdGlvbiBzYWZlUmVtb3ZlX3hwYXRoKHhwYXRoU2VsZWN0b3IpIHsKICAgICAgICBzYWZlRnVuY3Rpb24oKCkgPT4gewogICAgICAgICAgbGV0IHJlbW92ZU5vZGVzID0gZ2V0QWxsRWxlbWVudHMoeHBhdGhTZWxlY3Rvcik7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbW92ZU5vZGVzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICByZW1vdmVOb2Rlc1tpXS5yZW1vdmUoKTsKICAgICAgICB9KQogICAgICB9CgogICAgICBmdW5jdGlvbiBjaGVja0lTQmFpZHVNYWluKCkgeyAvLyDpppbpobU9dHJ1ZTvpnZ7pppbpobU9ZmFsc2UKICAgICAgICAvLyDlpoLmnpzmmK/nmb7luqYgJiYgIOayoeaciSjnmb7luqbmkJzntKLnu5PmnpznmoTmoIflv5ctW+WtmOWcqF3nmb7luqbnmoTlhoXlrrkpIHJldHVybjsKICAgICAgICByZXR1cm4gIShjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVICYmICEobG9jYXRpb24uaHJlZi5yZXBsYWNlKC8oJnxcPykod2R8d29yZCk9LywgIiIpICE9PSBsb2NhdGlvbi5ocmVmIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNjb250ZW50X2xlZnQiKSB8fAogICAgICAgICAgICAoKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNrdyIpICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNrdyIpLmdldEF0dHJpYnV0ZSgidmFsdWUiKSkgfHwgIiIpICE9PSAiIikKICAgICAgICApCiAgICAgIH0KCiAgICAgIC8qKgogICAgICAgKiDmo4Dmn6Vkb2N1bWVudOeahOWtkOiKgueCueaYr+WQpuWQq+acieWFg+e0oAogICAgICAgKiBAcGFyYW0gbm9kZUNsYXNzIOW+heajgOafpeWFg+e0oAogICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHxGCiAgICAgICAqLwogICAgICBmdW5jdGlvbiBjaGVja0RvY21lbnRIYXNOb2RlKG5vZGVDbGFzcykgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKGRvY3VtZW50LmNoaWxkTm9kZXNbaV0uZGF0YSAmJiBkb2N1bWVudC5jaGlsZE5vZGVzW2ldLmRhdGEuaW5kZXhPZihub2RlQ2xhc3MpID4gMCkKICAgICAgICAgICAgcmV0dXJuIHtyZXM6IHRydWUsIG5vZGU6IGRvY3VtZW50LmNoaWxkTm9kZXNbaV19OwogICAgICAgIH0KICAgICAgICByZXR1cm4ge3JlczogZmFsc2UsIG5vZGU6IG51bGx9OwogICAgICB9CgogICAgICBmdW5jdGlvbiBGU0JhaWR1KCkgeyAvLyB0aGFua3MgZm9yIGNvZGUgZnJvbSDmta7nlJ9A5pyq5q2HIEBwYWdlIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtVFcvc2NyaXB0cy8zMTY0MgogICAgICAgIC8vIGRlYnVnKCLliJ3lp4vljJZGU0JBSURVIik7CgogICAgICAgIENPTlNULlN0eWxlTWFuZ2VyID0gewogICAgICAgICAgLyoqCiAgICAgICAgICAgKiDlr7zlhaVjc3PlhoXlrrnkuLrjgJDmlofmnKzmoLzlvI/jgJHvvIHvvIHvvIEKICAgICAgICAgICAqIEBwYXJhbSBkYXRhIGNzc+WGheWuuQogICAgICAgICAgICogQHBhcmFtIHRvQ2xhc3NOYW1lIOmihOacn+eahOexu+WQjQogICAgICAgICAgICovCiAgICAgICAgICBpbXBvcnRTdHlsZTogZnVuY3Rpb24gKGRhdGEsIHRvQ2xhc3NOYW1lLCB1c2VOb3JtYWxDU1MsIG11c3RMb2FkKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgKGRhdGEpID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgIC8vIOi/meS4quWxheeEtuWcqFZN5LiK5Ye66Zeu6aKY5LqG77yM5b6I5aWH5oCqCiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiR01fZ2V0UmVzb3VyY2VUZXh06I635Y+W5YaF5a655pWw5o2u5byC5bi4Iik7CiAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdXNlTm9ybWFsQ1NTID0gdXNlTm9ybWFsQ1NTIHx8IGZhbHNlOwogICAgICAgICAgICBtdXN0TG9hZCA9IG11c3RMb2FkIHx8IGZhbHNlOwogICAgICAgICAgICAvLyDmma7pgJrmtY/op4jlmajmqKHlvI8tLeS9huaYr+S8vOS5juagt+W8j+WKoOi9veeahOS8mOWFiOe6p+S9juS6jmhlYWTkuK3nmoRzdHlsZeS8mOWFiOe6pwogICAgICAgICAgICBpZiAoIXVzZU5vcm1hbENTUyAmJiBjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLkRVQ0spIHsKICAgICAgICAgICAgICAvLyDpgJrov4dtdXN05Y+C5pWw5p2l5Yik5a6ac3R5bGXmmK/lkKbliqDovb0KICAgICAgICAgICAgICAvLyBkYXRhID0gZGF0YS5yZXBsYWNlKC9iYWlkdS5jb20jXCQjL2lnbSwgJycpOwogICAgICAgICAgICAgIGlmIChkYXRhLmluZGV4T2YoImh0dHAiKSAhPT0gMCkgZGF0YSA9ICJkYXRhOnRleHQvY3NzO3V0Zi04LCIgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YSk7CiAgICAgICAgICAgICAgdmFyIHtyZXMsfSA9IGNoZWNrRG9jbWVudEhhc05vZGUodG9DbGFzc05hbWUpOwogICAgICAgICAgICAgIGlmICghcmVzKSB7CiAgICAgICAgICAgICAgICBsZXQgcGkgPSBkb2N1bWVudC5jcmVhdGVQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24oCiAgICAgICAgICAgICAgICAgICJ4bWwtc3R5bGVzaGVldCIsCiAgICAgICAgICAgICAgICAgIGB0eXBlPSJ0ZXh0L2NzcyIgbXVzdD0iJHttdXN0TG9hZH0iIGNsYXNzPSIke3RvQ2xhc3NOYW1lfSIgaHJlZj0iJHtkYXRhfSJgCiAgICAgICAgICAgICAgICApOyAvLyDms6jmhI/lv4XpobvopoHlj4zlvJXlj7cKICAgICAgICAgICAgICAgIGRvY3VtZW50Lmluc2VydEJlZm9yZShwaSwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLyogKioqKioqKioqKuWkmumHjeagt+W8jy3lhbzlrrllZGdlICYmIOm7keWknOiEmuacrCoqKioqKioqKioqKiAqLwogICAgICAgICAgICAgIEFDX2FkZFN0eWxlKGRhdGEsIHRvQ2xhc3NOYW1lLCAiaGVhZCIsIGZhbHNlLCAidGV4dC9jc3MiKTsKICAgICAgICAgICAgICAvKiAqKioqKioqKioq5aSa6YeN5qC35byPLeWFvOWuuWVkZ2UgJiYg6buR5aSc6ISa5pysKioqKioqKioqKioqICovCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICAvL+WKoOi9veaZrumAmuagt+W8jwogICAgICAgICAgbG9hZENvbW1vblN0eWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMubG9hZFN0eWxlKENPTlNULnVzZUl0ZW0ubmFtZSArICJDb21tb25TdHlsZSIsIENPTlNULnVzZUl0ZW0ubmFtZSArICJDb21tb25TdHlsZSIpOwogICAgICAgICAgfSwKICAgICAgICAgIGxvYWRCYWlkdUxpdGVTdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkU3R5bGUoImJhaWR1TGl0ZVN0eWxlIiwgImJhaWR1TGl0ZVN0eWxlIiwgbnVsbCwgZmFsc2UsIHRydWUpOwogICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkUGxhaW5Ub0NTUygiYmFpZHVMaXRlU3R5bGUiKTsKICAgICAgICAgIH0sCiAgICAgICAgICBsb2FkU3R5bGU6IGFzeW5jIGZ1bmN0aW9uIChzdHlsZU5hbWUsIGluc0NsYXNzTmFtZSwgc2V0VXJsLCB1c2VOb3JtYWxDU1MsIG11c3RMb2FkKSB7CiAgICAgICAgICAgIC8vIOWFqOmDqOmHh+eUqHRleHQvY3Nz55qE5YaF5a655p2l6L295YWlCiAgICAgICAgICAgIC8vIOWmguaenOaYr2RlYnVn5qih5byP44CC5oiW6ICF5pivZ23mqKHlvI8KICAgICAgICAgICAgaWYgKGlzTG9jYWxEZWJ1ZykgewogICAgICAgICAgICAgIGRlYnVnKCLmnKzlnLAt5Yqg6L295qC35byP77yaIiArIGluc0NsYXNzTmFtZSk7CiAgICAgICAgICAgICAgc2V0VXJsID0gc2V0VXJsIHx8ICJodHRwOi8vMTI3LjAuMC4xLyIgKyBzdHlsZU5hbWUgKyAiLmNzcyI7CiAgICAgICAgICAgICAgdGhpcy5pbXBvcnRTdHlsZShzZXRVcmwsICJBQy0iICsgaW5zQ2xhc3NOYW1lLCB1c2VOb3JtYWxDU1MsIG11c3RMb2FkKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChpc05ld0dNID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgLy8g5LuF55So5LqOR3JlYXNlTW9ua2V5NC4wKwogICAgICAgICAgICAgIGRlYnVnKCLnibnmrormqKHlvI8t5Yqg6L295qC35byP77yaIiArIGluc0NsYXNzTmFtZSk7CiAgICAgICAgICAgICAgc2V0VXJsID0gc2V0VXJsIHx8ICJodHRwczovL2JhaWR1LnR1amlkdS5jb20vbmV3Y3NzLyIgKyBzdHlsZU5hbWUgKyAiLmNzcyI7CiAgICAgICAgICAgICAgdGhpcy5pbXBvcnRTdHlsZShzZXRVcmwsICJBQy0iICsgaW5zQ2xhc3NOYW1lLCB1c2VOb3JtYWxDU1MsIG11c3RMb2FkKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBkZWJ1Zygi5Yqg6L295qC35byP77yaIiArIGluc0NsYXNzTmFtZSk7CiAgICAgICAgICAgICAgLy8gVGFtcGVyTW9ua2V5ICsgR3JlYXNlTW9ua2V5IDwgNC4wICsgVmlvbGVudE1vbmtleSAoNC4wR3JlYXNlTW9ua2V55LiN5pSv5oyBR2V0UmVzb3VyY2Xmlrnms5UpCiAgICAgICAgICAgICAgdGhpcy5pbXBvcnRTdHlsZShhd2FpdCBHTV9nZXRSZXNvdXJjZVRleHQoc3R5bGVOYW1lKSwgIkFDLSIgKyBpbnNDbGFzc05hbWUsIHVzZU5vcm1hbENTUywgbXVzdExvYWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgLy/liqDovb3miqTnnLzmqKHlvI/moLflvI8KICAgICAgICAgIGxvYWRIdVlhblN0eWxlOiBmdW5jdGlvbiAoY29sb3IpIHsKICAgICAgICAgICAgbGV0IHN0eWxlID0gImJvZHlbYmFpZHVdLCN3cmFwcGVyICNoZWFkLCN3cmFwcGVyICNzX3RhYixmb3JtLmZtIC5zX2lwdF93ci5iZ3tiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9I2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AsI2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5yZXN1bHQsI2NvbnRhaW5lciAjcnMsI2NvbnRhaW5lciAjY29udGVudF9yaWdodHtiYWNrZ3JvdW5kLWNvbG9yOiNhYWE7Ym9yZGVyOjFweCBkb3VibGUgI2EyZDdkNDtib3JkZXItcmFkaXVzOjB9I2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3A6aG92ZXIsI2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5yZXN1bHQ6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojY2NjIWltcG9ydGFudH0jY29udGFpbmVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoMywjY29udGFpbmVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIGgzLCNjb250YWluZXIgI3JzIC50dHtiYWNrZ3JvdW5kLWNvbG9yOiNiYmJ9Lm5hX2NudCAubndzX2l0bSwubndzX2l0bWIsI2JfY29udGVudCAjYl9yZXN1bHRzIGxpLGJvZHkgI2JfaGVhZGVye2JhY2tncm91bmQtY29sb3I6I2FhYTtib3JkZXI6MXB4IGRvdWJsZSAjYTJkN2Q0O2JvcmRlci1yYWRpdXM6MH0jYl9jb250ZW50ICNiX3Jlc3VsdHMgbGk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojY2NjIWltcG9ydGFudH0jYl9jb250ZW50ICNiX3Jlc3VsdHMgbGkgaDJ7YmFja2dyb3VuZC1jb2xvcjojYmJifSNyc28gLmcsLmJrV01nZD4uZywuYmtXTWdkIGctaW5uZXItY2FyZCwjcmhzY29sICNyaHMsI3Joc2NvbCAjcmhzIC5nPmRpdiwuYzJ4elRiIC5nLC5ydVRjSWQgLmcsLmZtMDZJZiAuZywuY1VuUUtlIC5nLC5IYW5RbWYgLmd7YmFja2dyb3VuZC1jb2xvcjojYWFhO2JvcmRlcjoxcHggZG91YmxlICNhMmQ3ZDQ7Ym9yZGVyLXJhZGl1czowfSNyc28gLmc6aG92ZXIsLmJrV01nZD4uZzpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNjY2MhaW1wb3J0YW50fS5ia1dNZ2QgLmcgZGl2LnIsI3JzbyAuZyBoM3tiYWNrZ3JvdW5kLWNvbG9yOiNiYmJ9IjsKICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzVXNlckNvbG9yRW5hYmxlKSB7CiAgICAgICAgICAgICAgY29sb3IgPSBjb2xvciB8fCBBQ0NvbmZpZy5kZWZhdWx0SHVZYW5Db2xvciB8fCAiI0ZGRkZGRiI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29sb3IgPSBjb2xvciB8fCAiI0ZGRkZGRiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNvbG9yLmluZGV4T2YoIiMiKSAhPT0gMCB8fCBjb2xvci5sZW5ndGggPCA3KSByZXR1cm47CiAgICAgICAgICAgIGlmIChpc05ld0dNID09PSBmYWxzZSkgewogICAgICAgICAgICAgIHN0eWxlID0gR01fZ2V0UmVzb3VyY2VUZXh0KCJNYWluSHVZYW5TdHlsZSIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0eWxlID0gc3R5bGUKICAgICAgICAgICAgLnJlcGxhY2UoLyNhYWEoYSopL2lnbSwgY29sb3IpCiAgICAgICAgICAgIC5yZXBsYWNlKC8jYmJiKGIqKS9pZ20sIHRoaXMuTGlnaHRlcihjb2xvciwgLTQwKSkKICAgICAgICAgICAgLnJlcGxhY2UoLyNjY2MoYyopL2lnbSwgdGhpcy5MaWdodGVyKGNvbG9yLCA0NSkpOwogICAgICAgICAgICBBQ19hZGRTdHlsZShzdHlsZSwgIkFDLSIgKyBDT05TVC51c2VJdGVtLm5hbWUgKyAiSHVZYW5TdHlsZSIgKyAoaXNOZXdHTSA/ICIiIDogIi1GaWxlIiksICJoZWFkIiwgdHJ1ZSk7IC8vIOmcgOimgeS/ruaUueeahO+8jOaJgOS7peS4unRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBjbGlwMjU1OiBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgaWYgKHZhbHVlID4gMjU1KSByZXR1cm4gMjU1OwogICAgICAgICAgICBpZiAodmFsdWUgPCAwKSByZXR1cm4gMDsKICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgfSwKICAgICAgICAgIExpZ2h0ZXI6IGZ1bmN0aW9uIChvcmlSR0IsIGRlbHRhWSkgewogICAgICAgICAgICAvLyDmjInmr5TkvovnvKnmlL4gKyAxL2RlbHRhWQogICAgICAgICAgICAvLyBIRVggMiBSR0IKICAgICAgICAgICAgbGV0IHJnYiA9IG9yaVJHQi5yZXBsYWNlKCIjIiwgIiIpOwogICAgICAgICAgICBsZXQgUiA9IHBhcnNlSW50KCIweCIgKyByZ2Iuc3Vic3RyKDAsIDIpKTsKICAgICAgICAgICAgbGV0IEcgPSBwYXJzZUludCgiMHgiICsgcmdiLnN1YnN0cigyLCAyKSk7CiAgICAgICAgICAgIGxldCBCID0gcGFyc2VJbnQoIjB4IiArIHJnYi5zdWJzdHIoNCwgMikpOwogICAgICAgICAgICAvLyBSR0IgMiBZVVYKICAgICAgICAgICAgbGV0IFkgPSAoKDY2ICogUiArIDEyOSAqIEcgKyAyNSAqIEIgKyAxMjgpID4+IDgpICsgMTY7CiAgICAgICAgICAgIGxldCBVID0gKCgtMzggKiBSIC0gNzQgKiBHICsgMTEyICogQiArIDEyOCkgPj4gOCkgKyAxMjg7CiAgICAgICAgICAgIGxldCBWID0gKCgxMTIgKiBSIC0gOTQgKiBHIC0gMTggKiBCICsgMTI4KSA+PiA4KSArIDEyODsKICAgICAgICAgICAgWSA9IFkgKiAoMSArIDEuMCAvIGRlbHRhWSk7Ly8g5o+Q6auY5Lqu5bqmCiAgICAgICAgICAgIC8vIFlVViAyIFJHQgogICAgICAgICAgICBSID0gdGhpcy5jbGlwMjU1KCgyOTggKiAoWSAtIDE2KSArIDQwOSAqIChWIC0gMTI4KSArIDEyOCkgPj4gOCk7CiAgICAgICAgICAgIEcgPSB0aGlzLmNsaXAyNTUoKDI5OCAqIChZIC0gMTYpIC0gMTAwICogKFUgLSAxMjgpIC0gMjA4ICogKFYgLSAxMjgpICsgMTI4KSA+PiA4KTsKICAgICAgICAgICAgQiA9IHRoaXMuY2xpcDI1NSgoMjk4ICogKFkgLSAxNikgKyA1MTYgKiAoVSAtIDEyOCkgKyAxMjgpID4+IDgpOwogICAgICAgICAgICByZXR1cm4gIiMiICsgKChSIDw8IDE2KSArIChHIDw8IDgpICsgQikudG9TdHJpbmcoMTYpOwogICAgICAgICAgfSwKICAgICAgICAgIC8v5Yqg6L295Y2V6aG15qC35byPCiAgICAgICAgICBsb2FkT25lUGFnZVN0eWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMubG9hZFN0eWxlKENPTlNULnVzZUl0ZW0ubmFtZSArICJPbmVQYWdlU3R5bGUiLCBDT05TVC51c2VJdGVtLm5hbWUgKyAiT25lUGFnZVN0eWxlIik7CiAgICAgICAgICB9LAogICAgICAgICAgLy/liqDovb3lj4zpobXmoLflvI8KICAgICAgICAgIGxvYWRUd29QYWdlU3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5sb2FkU3R5bGUoQ09OU1QudXNlSXRlbS5uYW1lICsgIlR3b1BhZ2VTdHlsZSIsIENPTlNULnVzZUl0ZW0ubmFtZSArICJUd29QYWdlU3R5bGUiKTsKICAgICAgICAgICAgbGV0IGNzc0hlYWQgPSAiIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFUgfHwgY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5NQkFJRFUpIGNzc0hlYWQgPSAiI2NvbnRhaW5lciAjY29udGVudF9sZWZ0LCBib2R5W25ld3NdICNjb250YWluZXIgI2NvbnRlbnRfbGVmdD5kaXY6bm90KFtjbGFzc10pOm5vdChbaWRdKSI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSkgQ09OU1QuaXNHb29nbGVTcGVjaWFsID8gY3NzSGVhZCA9ICIuc3JnLCAjcnNvIiA6IGNzc0hlYWQgPSAiLnNyZywgI3Jzbz5kaXY6bm90KC5nKSI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJJTkcpIGNzc0hlYWQgPSAiI2JfY29udGVudCAjYl9yZXN1bHRzIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuU09HT1UpIGNzc0hlYWQgPSAiI21haW4gLnJlc3VsdHMiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5EVUNLKSBjc3NIZWFkID0gIiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluICNsaW5rcyI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRPR0UpIGNzc0hlYWQgPSAiI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzIjsKICAgICAgICAgICAgQUNfYWRkU3R5bGUoY3NzSGVhZCArICJ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgbWlubWF4KDUwJSwxZnIpKTtncmlkLXRlbXBsYXRlLWFyZWFzOid4bWFpbiB4bWFpbic7Z3JpZC1jb2x1bW4tZ2FwOiAxcHg7fS5BQy5zcC1zZXBhcmF0b3J7Z3JpZC1jb2x1bW4tc3RhcnQ6IDE7Z3JpZC1jb2x1bW4tZW5kOiB4bWFpbi1lbmQ7fSIsCiAgICAgICAgICAgICAgIkFDLVR3b1BhZ2VFeFN0eWxlIiwgImhlYWQiKTsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyDliqDovb3kuInliJfmoLflvI8KICAgICAgICAgIGxvYWRUaHJlZVBhZ2VTdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgY3NzSGVhZCA9ICIiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CQUlEVSB8fCBjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLk1CQUlEVSkgY3NzSGVhZCA9ICIjY29udGFpbmVyICNjb250ZW50X2xlZnQsIGJvZHlbbmV3c10gI2NvbnRhaW5lciAjY29udGVudF9sZWZ0PmRpdjpub3QoW2NsYXNzXSk6bm90KFtpZF0pIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFKSBDT05TVC5pc0dvb2dsZVNwZWNpYWwgPyBjc3NIZWFkID0gIi5zcmcsICNyc28iIDogY3NzSGVhZCA9ICIuc3JnLCAjcnNvPmRpdjpub3QoLmcpIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQklORykgY3NzSGVhZCA9ICIjYl9jb250ZW50ICNiX3Jlc3VsdHMiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5TT0dPVSkgY3NzSGVhZCA9ICIjbWFpbiAucmVzdWx0cyI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRVQ0spIGNzc0hlYWQgPSAiI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuRE9HRSkgY3NzSGVhZCA9ICIjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbiAjbGlua3MiOwogICAgICAgICAgICBBQ19hZGRTdHlsZShjc3NIZWFkICsgIntncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCBtaW5tYXgoMzMuMyUsMWZyKSk7Z3JpZC10ZW1wbGF0ZS1hcmVhczoneG1haW4geG1haW4geG1haW4nO2dyaWQtY29sdW1uLWdhcDogMTBweDt9IiwKICAgICAgICAgICAgICAiQUMtVGhyZWVQYWdlRXhTdHlsZSIsICJoZWFkIik7CiAgICAgICAgICB9LAogICAgICAgICAgLy8g5Yqg6L295Zub5YiX5qC35byPCiAgICAgICAgICBsb2FkRm91clBhZ2VTdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgY3NzSGVhZCA9ICIiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CQUlEVSB8fCBjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLk1CQUlEVSkgY3NzSGVhZCA9ICIjY29udGFpbmVyICNjb250ZW50X2xlZnQsIGJvZHlbbmV3c10gI2NvbnRhaW5lciAjY29udGVudF9sZWZ0PmRpdjpub3QoW2NsYXNzXSk6bm90KFtpZF0pIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFKSBDT05TVC5pc0dvb2dsZVNwZWNpYWwgPyBjc3NIZWFkID0gIi5zcmcsICNyc28iIDogY3NzSGVhZCA9ICIuc3JnLCAjcnNvPmRpdjpub3QoLmcpIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQklORykgY3NzSGVhZCA9ICIjYl9jb250ZW50ICNiX3Jlc3VsdHMiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5TT0dPVSkgY3NzSGVhZCA9ICIjbWFpbiAucmVzdWx0cyI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRPR0UpIGNzc0hlYWQgPSAiI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuRE9HRSkgY3NzSGVhZCA9ICIjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbiAjbGlua3MiOwogICAgICAgICAgICBBQ19hZGRTdHlsZShjc3NIZWFkICsgIntncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCg0LCBtaW5tYXgoMjUlLDFmcikpO2dyaWQtdGVtcGxhdGUtYXJlYXM6J3htYWluIHhtYWluIHhtYWluIHhtYWluJztncmlkLWNvbHVtbi1nYXA6IDFweDt9IiwKICAgICAgICAgICAgICAiQUMtRm91clBhZ2VFeFN0eWxlIiwgImhlYWQiKTsKICAgICAgICAgIH0sCiAgICAgICAgICBsb2FkUGxhaW5Ub0NTUzogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3VtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBsZXQgY3VyTm9kZSA9IGRvY3VtZW50LmNoaWxkTm9kZXNbaV07CiAgICAgICAgICAgICAgaWYgKGN1ck5vZGUuZGVsKSBjdXJOb2RlLnJlbW92ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNhZmVSZW1vdmUoInN0eWxlW2NsYXNzKj0nQUMnXVtkZWw9JzEnXSIpOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIOemgeatoueLrOeri+eahOagt+W8j+WKoOi9vQogICAgICAgICAgbG9hZENTU1RvUGxhaW46IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBkb2N1bWVudC5jaGlsZE5vZGVzW2ldOwogICAgICAgICAgICAgIC8vIOWmguaenOaYr+WtmOWcqGNzc++8jCDkuJTpnZ7lv4XpobvmlbDmja4KICAgICAgICAgICAgICBpZiAoY3VyTm9kZS50YXJnZXQgPT09ICJ4bWwtc3R5bGVzaGVldCIgJiYgY3VyTm9kZS5kYXRhLmluZGV4T2YoIm11c3Q9XCJ0cnVlIikgPCAwKSB7CiAgICAgICAgICAgICAgICBjdXJOb2RlLmRhdGEgPSAiIjsKICAgICAgICAgICAgICAgIGN1ck5vZGUuZGVsID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAvLyDlr7nkuo5lZGdl5ZKMc2FmYXJp6YO954m55q6K5aSE55CG5LiA5LiL5ZCnCiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImVkZ2UiKSA+IDAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoInNhZmFyaSIpID4gMCkgewogICAgICAgICAgICAgICAgICBjdXJOb2RlLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGluaXQoKSB7CiAgICAgICAgICAgIENvbnRyb2xNYW5hZ2VyLmluaXQoKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHZhciBDb250cm9sTWFuYWdlciA9IHsKICAgICAgICAgIC8v5bGF5Lit5pi+56S6IC0tLSDlv4XpobvmmK/nmb7luqblkozosLfmrYznmoTmkJzntKLnu5PmnpzpobXpnaLvvIzlhbbku5bpobXpnaLkuI3og73liqDovb3nmoQtLeW3sue7j+mAmui/h+iEmuacrGluY2x1ZGXmoIfnrb7pmZDliLbkuobkuIDpg6jliIYKICAgICAgICAgIGNlbnRlckRpc3BsYXk6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8g5aaC5p6c5piv55m+5bqmICYmICgo5Zyw5Z2A5pu/5o2iLT7ljIXlkKt3ZOWFs+mUruivjVvmm7/mjaLkuYvlkI7kuI3nrYkt5piv55m+5bqm57uT5p6c6aG16Z2iXSkgfHwg5pyJ5Y+z6L655qCPLeiCr+WumuaYr+eZvuW6puaQnOe0oue7k+aenOmhtSB8fCB2YWx1ZeS4reWtmOWcqOaQnOe0ouWGheWuuSkgcmV0dXJuOwogICAgICAgICAgICBpZiAoIWNoZWNrSVNCYWlkdU1haW4oKSkgewogICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRDU1NUb1BsYWluKCk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIEFDX2FkZFN0eWxlKCIubWluaWRpdiAjbG9nbyBpbWd7d2lkdGg6IDEwMHB4O2hlaWdodDogdW5zZXQ7bWFyZ2luLXRvcDogMC4zcmVtO30iLCAiQUMtc3R5bGUtbG9nbyIsICJoZWFkIik7CiAgICAgICAgICAgIGxldCByZXN1bHQgPSBwYXJzZUludChDT05TVC51c2VJdGVtLkFkc1N0eWxlTW9kZSB8fCAtMSk7CiAgICAgICAgICAgIGlmIChhY0Nzc0xvYWRGbGFnID09PSBmYWxzZSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuQUNFeHRlbnNpb24iKSA9PT0gbnVsbCkgewogICAgICAgICAgICAgIGRlYnVnKCJpbuagt+W8j+WNs+WwhuWKoOi9vToiICsgcmVzdWx0KTsKICAgICAgICAgICAgICBsZXQgZXhwYW5kU3R5bGUgPSAiI3dyYXBwZXIgI3JzLCAjd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQsICN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVye21pbi13aWR0aDo2NzBweDt9LmMtc3BhbjE4e3dpZHRoOjc4JSFpbXBvcnRhbnQ7bWluLXdpZHRoOjU1MHB4O30uYy1zcGFuMjR7d2lkdGg6IGF1dG8haW1wb3J0YW50O30iOwogICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IDEpIHsKICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKGV4cGFuZFN0eWxlLCAiQUMtU3R5bGUtZXhwYW5kIiwgImhlYWQiKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRDb21tb25TdHlsZSgpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSAyKSB7Ly/ljZXpobXlsYXkuK0KICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKGV4cGFuZFN0eWxlLCAiQUMtU3R5bGUtZXhwYW5kIiwgImhlYWQiKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRDb21tb25TdHlsZSgpOwogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZE9uZVBhZ2VTdHlsZSgpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSAzKSB7IC8v5Y+M6aG15bGF5LitCiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ29tbW9uU3R5bGUoKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRUd29QYWdlU3R5bGUoKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gNCkgeyAvLyDkuInliJcKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRDb21tb25TdHlsZSgpOwogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFR3b1BhZ2VTdHlsZSgpOwogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFRocmVlUGFnZVN0eWxlKCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IDUpIHsgLy8g5Zub5YiXCiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ29tbW9uU3R5bGUoKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRUd29QYWdlU3R5bGUoKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRGb3VyUGFnZVN0eWxlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGFjQ3NzTG9hZEZsYWcgPSB0cnVlOwogICAgICAgICAgICAgIGRlYnVnKCJpbuagt+W8j+i/kOihjOe7k+adnyIpOwogICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVICYmIEFDQ29uZmlnLlN0eWxlX0JhaWR1TGl0ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoR01fZ2V0UmVzb3VyY2VUZXh0KCJiYWlkdUxpdGVTdHlsZSIpLCAiQUMtYmFpZHVMaXRlU3R5bGUiLCAiaGVhZCIpCiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQmFpZHVMaXRlU3R5bGUoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLkJBSURVICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuQkFJRFVfWFVFU0hVICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuR09PR0xFICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuQklORyAmJiBjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLlNPR09VICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuRFVDSyAmJiBjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLkRPR0UpIHJldHVybjsKCiAgICAgICAgICAgIC8vIOWmguaenOaYr+iwt+atjCAmJiAo5Zyw5Z2A5pu/5o2iLT7mmK/osLfmrYzlm77lg4/pobXpnaIgfHwg5piv5Zyw5Zu+6aG16Z2iKVvmm7/mjaLopoHlj5hdIHJldHVybjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFICYmIGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvdGJtPShpc2NofGxjbHxzaG9wfGZsbSkvLCAiIikgIT09IGxvY2F0aW9uLmhyZWYpIHsKICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ1NTVG9QbGFpbigpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICAvKirmiqTnnLxTdHlsZeacgOWQjui9veWFpSoqLwogICAgICAgICAgICBpZiAoQ09OU1QudXNlSXRlbS5IdVlhbk1vZGUgPT09IHRydWUgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcigic3R5bGVbY2xhc3MqPSdkYXJrcmVhZGVyJ10iKSAhPSBudWxsKSBDT05TVC5TdHlsZU1hbmdlci5sb2FkSHVZYW5TdHlsZSgpOwoKICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFBsYWluVG9DU1MoKTsKICAgICAgICAgIH0sCiAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChDT05TVC5pc0dvb2dsZUltYWdlVXJsKSByZXR1cm47CiAgICAgICAgICAgIHRoaXMuY2VudGVyRGlzcGxheSgpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLy8gZGVidWcoIuiwg+eUqOWKoOi9veiHquWumuS5iWNzcyIpOwogICAgICAgIENvbnRyb2xNYW5hZ2VyLmluaXQoKTsKICAgICAgICByZXR1cm4gQ09OU1QuU3R5bGVNYW5nZXI7CiAgICAgIH0KICAgIH0KICB9KSgpOwp9KCk7Cg==","resources":[{"meta":{"name":"baiduCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/baiduCommonStyle.css?t=24.19","ts":1614930447401,"mimetype":"text/css"},"source":"LyoqU3RvcmUgQmFpZHVDb21tb25TdHlsZSoqLw0KaWZyYW1lOm5vdChbc3JjKj0nY2hyb21lJ10pLA0KLnJlc190b3BfYmFubmVyICNmb290LA0KI3BhZ2UgLmZrLA0KI2hlYWQgLmhlYWRCbG9jaywNCiNyc190b3BfbmV3LA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD50YWJsZSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtcmVjb21tZW5kLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAubGVmdEJsb2NrLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucnJlY29tLWJ0bi1wYXJlbnQsDQojZGVtbywNCiN3cmFwcGVyICNnb3RvUGFnZSwNCmJvZHk+ZGl2LnJlc3VsdC1vcCwNCi5ycmVjb20tY29udGFpbmVyLA0KLmNodW53YW4td3JhcHBlcnsNCiAgICBkaXNwbGF5OiBub25lIWltcG9ydGFudDsNCn0NCmJvZHlbYmFpZHVdIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1Ow0KICAgIHRyYW5zaXRpb246IGFsbCAxLjVzOw0KfQ0KI2FsYV9pbWdfcmVzdWx0c3sNCiAgICBvdmVyZmxvdzpoaWRkZW47DQp9DQpib2R5IGEsDQpib2R5IGEgZW0sDQojdSBhICwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYSBlbSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhIGVtIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQoNCmJvZHkgYTpob3ZlciwNCmJvZHkgYTpob3ZlciBlbXsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQojd3JhcHBlciAjc190YWIgew0KICAgIGJvcmRlci1ib3R0b206ICNlMGUwZTAgMXB4IHNvbGlkOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7DQp9DQpib2R5ICNoZWFkew0KICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQ4LCAyNDgsIDI0OCwgMC40KTsNCiAgICBib3JkZXItYm90dG9tOiBub25lOw0KICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KQ0KfQ0KZm9ybS5mbSB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogdW5zZXQ7DQp9DQpmb3JtLmZtIC5iZHN1ZyBsaSB7DQogICAgd2lkdGg6IGF1dG87DQogICAgY29sb3I6ICMwMDA7DQogICAgZm9udDogMTVweCBhcmlhbDsNCiAgICBsaW5lLWhlaWdodDogMjZweDsNCn0NCmZvcm0uZm0gLnNfaXB0X3dyLmJnew0KICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgd2lkdGg6IDY2JTsNCiAgICBtaW4td2lkdGg6IDU3MHB4Ow0KfQ0KI2NvbnRlbnRfbGVmdCAubmV3LXBtZCAuYy1zcGFuOSwNCiNjb250ZW50X2xlZnQgLm5ldy1wbWQgLmMtc3BhbjEwew0KICAgIHdpZHRoOiB1bnNldDsNCiAgICBmbG9hdDogdW5zZXQ7DQp9DQovKioqZml4IDJrKyBwcm9ibGVtKioqLw0KI2hlYWQgLmhlYWRfd3JhcHBlcnsNCiAgICB3aWR0aDogdW5zZXQ7IC8qZWRpdDogZml4IGJhaWR1IGJhbm5lciBwb3NpdGlvbiovDQp9DQpmb3JtLmZtIC5zX2J0biB7DQogICAgYmFja2dyb3VuZDogIzM0NzZkMjsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzM0NzZkMjsNCn0NCmZvcm0uZm0gLnNfYnRuOmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kOiAjNEY3RmJGOw0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMzQ3NmQyOw0KfQ0KI3dyYXBwZXIgI3NfdGFiIGIgew0KICAgIGNvbG9yOiAjMzQ3NmQyOw0KICAgIGJvcmRlci1ib3R0b206IDNweCAjMzQ3NmQyIHNvbGlkOw0KfQ0KDQojd3JhcHBlciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLnNlYXJjaF90b29sX2NvbnRlciwNCiN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAubnVtcyB7DQogICAgd2lkdGg6IDYzMHB4Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCB7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9ib3R0b21Ub3RvcDsNCiAgICAtd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjogLjJzOw0KICAgIC13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsNCn0NCiNoZWFkIC5oZWFkX3dyYXBwZXJ7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9sZWZ0VG9yaWdodDsNCiAgICAtd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjogLjJzOw0KICAgIC13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1vdXQ7DQp9DQoNCiN3cmFwcGVyICNycywNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIHsNCiAgICB3aWR0aDogNjcwcHg7DQogICAgcGFkZGluZzogMHB4IDIwcHggMTVweDsNCiAgICBtYXJnaW4tdG9wOiAwcHg7DQogICAgbWFyZ2luLWJvdHRvbTogMzBweDsNCiAgICBib3JkZXItcmFkaXVzOiAwOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuMSk7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXI6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQ6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lcjpob3ZlciBhcnRpY2xlew0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsLjMpOw0KICAgIGJveC1zaGFkb3c6IDAgMCAxcHggZ3JleTsNCiAgICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMCAxcHggZ3JleTsNCiAgICAtbW96LWJveC1zaGFkb3c6IDAgMCAxcHggZ3JheTsNCn0NCiN3cmFwcGVyICNyc1thYy1uZWVkaGlkZV0sDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHRbYWMtbmVlZGhpZGVdLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXJbYWMtbmVlZGhpZGVdew0KICAgIHBhZGRpbmc6IDVweDsNCiAgICBwYWRkaW5nLWxlZnQ6IDE1cHg7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHRbdHBsPSdzb2Z0J10gLm9wLXNvZnQtdGl0bGUsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciBoMyB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODsNCiAgICBtYXJnaW46IDBweCAtMjBweCAxMHB4IC0yMHB4Ow0KICAgIHBhZGRpbmc6IDhweCAyMHB4IDVweDsNCiAgICBib3JkZXItcmFkaXVzOiA1cHggNXB4IDBweCAwcHg7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5mMTMgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmYxMyBlbSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtc3BhbjE4IGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5zdWJMaW5rX2ZhY3RvcnkgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnN1YkxpbmtfYW5zd2VyIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLXRhYnMtY29udGVudCBhLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Bfb2ZmaWNhbF93ZWlib19jb250ZW50IGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF9vZmZpY2FsX3dlaWJvX3B6IGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF90aWViYTJfdGFibGlua3NfY29udGFpbmVyIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC10aWViYS1nZW5lcmFsLXJpZ2h0LA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfZHEwMV90aXRsZSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX2RxMDFfdGFibGUgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX2RxMDFfbW9yZWxpbmsgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXRpZWJhLWdlbmVyYWwtbWFpbnBsIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zZS1saXN0ZW4tcmVjb21tZW5kLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1vZmZzZXQ+ZGl2IGEgew0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmYxMyBhOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuZjEzIGVtOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuc3ViTGlua19mYWN0b3J5IGE6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5zdWJMaW5rX2Fuc3dlciBhOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy10YWJzLWNvbnRlbnQgYTpob3ZlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX3RpZWJhMl90YWJsaW5rc19jb250YWluZXIgYTpob3ZlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXRpZWJhLWdlbmVyYWwtcmlnaHQ6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF9kcTAxX3RpdGxlOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfZHEwMV90YWJsZSBhOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfZHEwMV9tb3JlbGluayBhOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3AtdGllYmEtZ2VuZXJhbC1tYWlucGwgYTpob3ZlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNlLWxpc3Rlbi1yZWNvbW1lbmQ6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLW9mZnNldD5kaXYgYTpob3ZlciB7DQogICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmUhaW1wb3J0YW50Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuZjEzIGEgew0KICAgIGNvbG9yOiAjMDA4MDAwOw0KfQ0KDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLXNwYW4xOCwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtc3BhbjI0ew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIG1pbi13aWR0aDogdW5zZXQ7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWJvcmRlciB7DQogICAgd2lkdGg6IGF1dG87DQogICAgYm9yZGVyOiBub25lOw0KICAgIGJvcmRlci1ib3R0b20tY29sb3I6IHRyYW5zcGFyZW50Ow0KICAgIGJvcmRlci1yaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7DQogICAgYm94LXNoYWRvdzogMHB4IDBweCAwcHggdHJhbnNwYXJlbnQ7DQogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwcHggMHB4IDBweCB0cmFuc3BhcmVudDsNCiAgICAtbW96LWJveC1zaGFkb3c6IDBweCAwcHggMHB4IHRyYW5zcGFyZW50Ow0KICAgIC1vLWJveC1zaGFkb3c6IDBweCAwcHggMHB4IHRyYW5zcGFyZW50Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuc2VfY29tX2lycmVndWxhcl9nYWxsZXJ5IHVsIGxpLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfamluZ3lhbl9saXN0LA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IC5vcC1pbWctYWRkcmVzcy1saW5rLXR5cGUgew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICBtYXJnaW4tbGVmdDogMTBweDsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyW3RwbD0nc29mdCddIC5vcC1zb2Z0LXRpdGxlIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lclt0cGw9J3NvZnQnXSAub3Atc29mdC10aXRsZSBhIGVtLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXIgaDMgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhIGVtLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzIGEgZW0gew0KICAgIGNvbG9yOiAjMzQ3NmQyOw0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMgYSB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOmhvdmVyOmFmdGVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGE6aG92ZXI6YWZ0ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMgYTpob3ZlcjphZnRlciB7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zb2Z0LXRpdGxlIGE6YWZ0ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYTphZnRlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoMyBhOmFmdGVyIHsNCiAgICBjb250ZW50OiAiIjsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMzNDc2ZDI7DQogICAgYm90dG9tOiAtMnB4Ow0KICAgIGxlZnQ6IDEwMCU7DQogICAgd2lkdGg6IDA7DQogICAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICAtbW96LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KICAgIHRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXIgaDN7DQogICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgZm9udC1zaXplOiBtZWRpdW07DQp9DQoNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYSAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYSAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMgYSB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZCBlbSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhOnZpc2l0ZWQsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYTp2aXNpdGVkIGVtIHsNCiAgICBjb2xvcjogIzY2MDA5OTsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYTp2aXNpdGVkOmhvdmVyOmFmdGVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGE6dmlzaXRlZDpob3ZlcjphZnRlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoMyBhOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXIgew0KICAgIGxlZnQ6IDA7DQogICAgd2lkdGg6IDEwMCU7DQogICAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICAtbW96LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIHRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQ6YWZ0ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYTp2aXNpdGVkOmFmdGVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzIGE6dmlzaXRlZDphZnRlciB7DQogICAgY29udGVudDogIiI7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNjYwMDk5Ow0KICAgIGJvdHRvbTogLTJweDsNCiAgICBsZWZ0OiAxMDAlOw0KICAgIHdpZHRoOiAwOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtZ3JvdXAtd3JhcHBlcnsNCiAgICBwYWRkaW5nOiAwOw0KICAgIG1hcmdpbjogMCAyMHB4IDIwcHggMTBweDsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtZ3JvdXAtd3JhcHBlciAuYy1ncm91cHsNCiAgICBtYXJnaW46IDA7DQogICAgcGFkZGluZy10b3A6IDEwcHg7DQp9DQojd3JhcHBlciAjcnN7DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICAgIHBhZGRpbmc6IDBweCAyMHB4IDE1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIHotaW5kZXg6IDE7DQp9DQoud3JhcHBlcl9uZXcgI2Zvcm0gLmJkc3VnLW5ld3sNCiAgICBwYWRkaW5nLXJpZ2h0OiAxMXB4Ow0KfQ0KI3dyYXBwZXIgI3JzIC50dCB7DQogICAgbWFyZ2luOiAwcHggLTIwcHggNXB4IC0yMHB4Ow0KICAgIHBhZGRpbmc6IDVweCAyMHB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KI3dyYXBwZXIgI3JzIHRhYmxlIHsNCiAgICB3aWR0aDogNjMwcHg7DQogICAgcGFkZGluZzogNXB4IDE1cHg7DQp9DQojd3JhcHBlciAjcnMgdGFibGUgdHIgYSB7DQogICAgbWFyZ2luLXRvcDogNXB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDVweDsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiN3cmFwcGVyICNycyB0YWJsZSB0ciBhOmhvdmVyIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCn0NCiN3cmFwcGVyICNwYWdlIHsNCiAgICBtaW4td2lkdGg6IDcxMHB4Ow0KICAgIGhlaWdodDogNDBweDsNCiAgICBsaW5lLWhlaWdodDogNDBweDsNCiAgICBwYWRkaW5nLXRvcDogNXB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDUwcHg7DQogICAgbWFyZ2luLWxlZnQ6IDBweDsNCn0NCi5vcC1pbWctYWRkcmVzcy1kZXNrdG9wLWNvbnR7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCiN3cmFwcGVyICNwYWdlIGEsDQojd3JhcHBlciAjcGFnZSBzdHJvbmcgew0KICAgIGNvbG9yOiMzNDc2ZDI7DQogICAgaGVpZ2h0OiBhdXRvOw0KfQ0KI3dyYXBwZXIgI3BhZ2UgLm57DQogICAgaGVpZ2h0OiAzNHB4Ow0KfQ0KI3dyYXBwZXIgI3BhZ2UgLm46aG92ZXIsDQojd3JhcHBlciAjcGFnZSBhOmhvdmVyIC5wYyB7DQogICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7DQogICAgYmFja2dyb3VuZDogI2Q4ZDhkODsNCiAgICBjb2xvcjogIzAwNTdkYTsNCn0NCiN3cmFwcGVyICNwYWdlIHN0cm9uZyAucGMgew0KICAgIGJhY2tncm91bmQ6ICMzNDc2ZDI7DQogICAgY29sb3I6IHdoaXRlOw0KfQ0KLm9wLWltZy1hZGRyZXNzLWRpdmlkZS1oaWdoew0KICAgIG92ZXJmbG93OiBoaWRkZW47DQp9DQojd3JhcHBlciAja3d7DQogICAgd2lkdGg6IDk0JTsNCn0NCiNjb250YWluZXIuc2FtX25ld2dyaWQgLmMtY29udGFpbmVyIC50IC5BQy1mYXZpY29uVH5hLCAjY29udGFpbmVyLnNhbV9uZXdncmlkIC5jLWNvbnRhaW5lciAudCAuYy1pY29ufmF7DQogICAgZGlzcGxheTppbmxpbmUNCn0NCmJvZHkgI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCBhW2hyZWYqPSdvZmZpY2lhbCddIHsNCiAgICBjb2xvcjogd2hpdGU7DQp9DQojY29udGVudF9sZWZ0IC5jLWdyb3VwLW1pZGRsZSwjY29udGVudF9sZWZ0ICAuYy1ncm91cC10b3B7DQogICAgbWFyZ2luLWJvdHRvbTogMzBweCAhaW1wb3J0YW50Ow0KfQ0KQC13ZWJraXQta2V5ZnJhbWVzIGFuaV9ib3R0b21Ub3RvcCB7DQogICAgMCUgew0KICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWSgzMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQpALXdlYmtpdC1rZXlmcmFtZXMgYW5pX2xlZnRUb3JpZ2h0IHsNCiAgICAwJSB7DQogICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQpALXdlYmtpdC1rZXlmcmFtZXMgYW5pX3RvcFRvYnV0dG9tIHsNCiAgICAwJSB7DQogICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQojY29udGFpbmVyLnNhbV9uZXdncmlkICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIC5jLWNvbnRhaW5lcnsNCiAgICB3aWR0aDogYXV0bzsNCiAgICBtaW4td2lkdGg6IHVuc2V0Ow0KfQ0KLmMtY29udGFpbmVyIC5jLXJlc3VsdC1jb250ZW50ew0KICAgIHBhZGRpbmctdG9wOiAyMHB4Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAgLmMtY29udGFpbmVyIGFydGljbGV7DQogICAgcGFkZGluZy10b3A6IDE1cHg7DQogICAgYm9yZGVyOiB1bnNldCAhaW1wb3J0YW50Ow0KICAgIGJveC1zaGFkb3c6IHVuc2V0ICFpbXBvcnRhbnQ7DQp9DQpib2R5IC53cmFwcGVyX25ldyAjaGVhZC5maXgtaGVhZCAuc19mb3Jtew0KICAgIGhlaWdodDogNzBweDsNCn0NCi5BQy5zcC1zZXBhcmF0b3J7DQogICAgbWFyZ2luLXRvcDogLTEwcHg7DQogICAgd2lkdGg6IDY1MHB4Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfcmlnaHR7DQogICAgZGlzcGxheTogbm9uZTsNCn0NCmJvZHkuc2hvd1JpZ2h0ICN3cmFwcGVyICNjb250ZW50X3JpZ2h0ew0KICAgIGRpc3BsYXk6IHVuc2V0Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXJbdHBsPSdyZWNvbW1lbmRfbGlzdCddew0KICAgIHBhZGRpbmctdG9wOiAxMHB4Ow0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCn0NCkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6MTI4MHB4KXsNCiAgICAjdSAudG9pbmRleCwgI3UgI2ltc2d7DQogICAgICAgIGRpc3BsYXk6IG5vbmU7DQogICAgfQ0KfQ0KQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTkyMXB4KXsNCiAgICAvKkJhaWR1IGluIDJLIHNjcmVlbiBkZWZhdWx0IGluIDogY2VudGVyKi8NCiAgICAjaGVhZCAuaGVhZF93cmFwcGVyew0KICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKC0xMjBweCwwLDFweCk7DQogICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIH0NCn0NCg=="},{"meta":{"name":"baiduOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/baiduOnePageStyle.css?t=24.19","ts":1614930447398,"mimetype":"text/css"},"source":"LyoqU3RvcmUgQmFpZHVPbmVQYWdlU3R5bGUqKi8NCiN3cmFwcGVyX3dyYXBwZXIgI2NvbnRhaW5lcnsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBtYXJnaW4tbGVmdDogdW5zZXQ7DQp9DQpmb3JtLmZtew0KICAgIHBvc2l0aW9uOnJlbGF0aXZlOw0KICAgIGJhY2tncm91bmQtY29sb3I6IHVuc2V0Ow0KfQ0KYm9keVtiYWlkdV0gLnBhZ2Vmb290Lmdqew0KICAgIG1hcmdpbi10b3A6IDEwMHB4Ow0KfQ0KLndyYXBwZXJfbmV3IC5oZWFkX3dyYXBwZXIgI3Jlc3VsdF9sb2dvew0KICAgIG1hcmdpbi1sZWZ0OiAtMTUwcHg7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KI3NfdGFiIGIsI3NfdGFiIGF7DQogICAgcG9zaXRpb246cmVsYXRpdmU7DQp9DQojd3JhcHBlciAgLmhlYWRfbnVtc19jb250X291dGVyew0KICAgIHBvc2l0aW9uOmFic29sdXRlOw0KICAgIGxlZnQ6IDIwJTsNCiAgICB3aWR0aDogNjAlOw0KfQ0KI3dyYXBwZXIgICNjb250ZW50X2xlZnQsI3dyYXBwZXIgI2NvbnRhaW5lci5zYW1fbmV3Z3JpZCAjcnMsICN3cmFwcGVyICNwYWdlew0KICAgIHRvcDogMzVweDsNCiAgICBwb3NpdGlvbjpyZWxhdGl2ZTsNCiAgICBwYWRkaW5nLWxlZnQ6IDBweDsNCiAgICB3aWR0aDogNDAlICFpbXBvcnRhbnQ7DQogICAgbWluLXdpZHRoOiA2NzBweDsNCiAgICBmbG9hdDp1bnNldDsNCiAgICBtYXJnaW4tbGVmdDogdW5zZXQ7DQogICAgbWFyZ2luOiAwIGF1dG87DQp9DQoNCiN3cmFwcGVyICNwYWdlew0KICAgIGJhY2tncm91bmQ6IHVuc2V0Ow0KfQ0KI3dyYXBwZXIgI3JzIHRoew0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCiN3cmFwcGVyICNyc3sNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgbWFyZ2luOiAzMHB4IGF1dG8gLTIwcHggYXV0bzsNCn0NCiN3cmFwcGVyICAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lcnsNCiAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50Ow0KICAgIG1pbi13aWR0aDo2NTBweDsNCn0NCkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEwMDBweCkgew0KICAgICN3cmFwcGVyICAjY29udGVudF9sZWZ0LCAjd3JhcHBlciAgI3Jzew0KICAgICAgICBtaW4td2lkdGg6ODAwcHg7DQogICAgfQ0KfQ0KI3dyYXBwZXIgI2NvbnRhaW5lci5zYW1fbmV3Z3JpZCAjY29udGVudF9sZWZ0ew0KICAgIHBhZGRpbmctbGVmdDogMjBweDsNCiAgICBkaXNwbGF5OiBibG9jazsNCn0NCiN3cmFwcGVyICNjb250ZW50X3JpZ2h0ew0KICAgIGZsb2F0OiB1bnNldDsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQp9DQpib2R5LnNob3dSaWdodCAjd3JhcHBlciAjY29udGFpbmVyLnNhbV9uZXdncmlkICNjb250ZW50X2xlZnR7DQogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKGNhbGMoNnZ3IC0gMjUxcHgpKTsNCn0NCmJvZHkuc2hvd1JpZ2h0ICN3cmFwcGVyICNjb250ZW50X3JpZ2h0ew0KICAgIHJpZ2h0OiBjYWxjKDM3LjV2dyAtIDQ3MHB4KTsNCn0NCkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDEyODBweCl7DQogICAgYm9keS5zaG93UmlnaHQgI3dyYXBwZXIgI2NvbnRhaW5lci5zYW1fbmV3Z3JpZCAjY29udGVudF9sZWZ0ew0KICAgICAgICB0cmFuc2Zvcm06IHVuc2V0Ow0KICAgIH0NCiAgICBib2R5LnNob3dSaWdodCAjd3JhcHBlciAjY29udGVudF9yaWdodHsNCiAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICB9DQp9DQojd3JhcHBlciAjcGFnZSBhLCAjd3JhcHBlciAjcGFnZSBzdHJvbmd7DQogICAgbWFyZ2luLXJpZ2h0OiAyMnB4ICFpbXBvcnRhbnQ7DQp9DQojd3JhcHBlciAjcGFnZSAucGFnZS1pbm5lcnsNCiAgICBwYWRkaW5nLWxlZnQ6IDIycHg7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCn0NCi5zX3RhYl9pbm5lcnsNCiAgICBkaXNwbGF5OmJsb2NrICFpbXBvcnRhbnQ7DQp9DQojY29udGFpbmVyIC5oaW50X2NvbW1vbl9yZXN0b3B7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGxlZnQ6IGNhbGMoNDV2dyAtIDUwMHB4KTsNCiAgICBtYXJnaW4tdG9wOiAyNXB4Ow0KfQ0KLkFDLnNwLXNlcGFyYXRvcnsNCiAgICB3aWR0aDogYXV0bzsNCn0NCi8qc2VhcmNoIGVuZ2luZSBqdW1wKi8NCiNzZWotY29udGFpbmVyew0KICAgIHBhZGRpbmctbGVmdDogMDsNCiAgICBtYXJnaW4tbGVmdDogMDsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQouc19mb3JtX3dyYXBwZXIgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQp9DQojd3JhcHBlciAjc190YWJ7DQogICAgcGFkZGluZy1sZWZ0OiAwOw0KICAgIG1hcmdpbi1sZWZ0OiAwOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQp9DQojd3JhcHBlciAjY29udGFpbmVyIC5oZWFkX251bXNfY29udF9vdXRlciAuc2VhcmNoX3Rvb2xfY29udGVyLA0KI3dyYXBwZXIgI2NvbnRhaW5lciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLm51bXMgew0KICAgIHdpZHRoOiA2OSU7DQogICAgbWFyZ2luLWxlZnQ6IDE2JTsNCn0NCmZvcm0uZm0gLnNfaXB0X3dyLmJnew0KICAgIG1pbi13aWR0aDogY2FsYygzNy41dncgLSAxNTBweCk7DQp9DQpAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxOTIxcHgpIHsNCiAgICAjaGVhZCAuaGVhZF93cmFwcGVyew0KICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDE0MHB4LDAsMXB4KTsNCiAgICB9DQogICAgLndyYXBwZXJfbmV3ICNzX3RhYi5zX3RhYiAuc190YWJfaW5uZXIgew0KICAgICAgICB3aWR0aDogOTAwcHg7DQogICAgICAgIHBhZGRpbmctbGVmdDogMjk2cHg7DQogICAgfQ0KICAgIGZvcm0uZm0gLnNfaXB0X3dyLmJnew0KICAgICAgICBtaW4td2lkdGg6IGNhbGMoMzcuNXZ3IC0gMTUwcHgpOw0KICAgIH0NCn0NCkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEzNjZweCkgYW5kIChtYXgtd2lkdGg6IDE5MjBweCkgew0KICAgIC53cmFwcGVyX25ldyAuaGVhZF93cmFwcGVyICNyZXN1bHRfbG9nb3sNCiAgICAgICAgbWFyZ2luLWxlZnQ6IDBweDsNCiAgICB9DQp9"},{"meta":{"name":"baiduTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/baiduTwoPageStyle.css?t=24.19","ts":1614930447399,"mimetype":"text/css"},"source":"LyoqU3RvcmUgQmFpZHVUb3dQYWdlU3R5bGUqKi8NCiN3cmFwcGVyX3dyYXBwZXIgI2NvbnRhaW5lciB7DQogICAgd2lkdGg6IGF1dG87DQp9DQpmb3JtLmZtew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB1bnNldDsNCn0NCiNzX3RhYiBiLCAjc190YWIgYSB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KI3dyYXBwZXIgI3NfdGFiew0KICAgIHBhZGRpbmctbGVmdDogMDsNCiAgICBtYXJnaW4tbGVmdDogMDsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KfQ0KI3dyYXBwZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5zZWFyY2hfdG9vbF9jb250ZXIsDQojd3JhcHBlciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLm51bXMgew0KICAgIHdpZHRoOiA4MCU7DQogICAgbWFyZ2luLWxlZnQ6IDEwJTsNCn0NCiN3cmFwcGVyICAuaGVhZF9udW1zX2NvbnRfb3V0ZXIsDQouaGludF9jb21tb25fcmVzdG9wLA0KI2hlYWRlcl90b3BfYmFyIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgbGVmdDogMTAlOw0KICAgIHdpZHRoOiA4MCU7DQp9DQojd3JhcHBlciAjaGVhZGVyX3RvcF9iYXJ7DQogICAgbWFyZ2luLWJvdHRvbTogMHB4Ow0KfQ0KYm9keSAjY29udGFpbmVyLnNhbV9uZXdncmlkICNjb250ZW50X2xlZnR7DQogICAgd2lkdGg6IDgwJTsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnR7DQogICAgZGlzcGxheTogaW5saW5lLWdyaWQ7DQogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiA1MCUgNTAlOw0KICAgIGdyaWQtdGVtcGxhdGUtYXJlYXM6ICJ4bWFpbiB4bWFpbiI7DQogICAgbWFyZ2luOiAwIGF1dG87DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHBhZGRpbmctbGVmdDogNSU7DQogICAgZmxvYXQ6IHVuc2V0Ow0KICAgIHdpZHRoOiA4MCU7DQogICAgbWFyZ2luLWxlZnQ6NyU7DQogICAgbWFyZ2luLWJvdHRvbTogMzBweDsNCn0NCmJvZHlbbmV3c10gI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD5kaXY6bm90KFtjbGFzc10pOm5vdChbaWRdKXsNCiAgICBkaXNwbGF5OiBpbmxpbmUtZ3JpZDsNCiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDUwJSA1MCU7DQogICAgZ3JpZC10ZW1wbGF0ZS1hcmVhczogInhtYWluIHhtYWluIjsNCn0NCiN3cmFwcGVyICNjb250ZW50X3JpZ2h0ew0KICAgIGRpc3BsYXk6bm9uZSAhaW1wb3J0YW50Ow0KfQ0KI3dyYXBwZXJfd3JhcHBlciAjY29udGFpbmVyICNyc3sNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgbWFyZ2luOiAwIGF1dG87DQp9DQojd3JhcHBlciAjcGFnZSB7DQogICAgbWluLXdpZHRoOiA3MTBweDsNCiAgICBoZWlnaHQ6IDQwcHg7DQogICAgbGluZS1oZWlnaHQ6IDQwcHg7DQogICAgcGFkZGluZzogNXB4IDEwcHg7DQogICAgbWFyZ2luOiAwIGF1dG87DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCiN3cmFwcGVyICNwYWdlIC5wYWdlLWlubmVyew0KICAgIHBhZGRpbmctbGVmdDogMDsNCn0NCiN3cmFwcGVyICAjY29udGVudF9sZWZ0IC5yZXN1bHQsDQojd3JhcHBlciAgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXIgew0KICAgIHdpZHRoOiB1bnNldCAhaW1wb3J0YW50Ow0KICAgIG1heC13aWR0aDogMTAwJTsNCiAgICBtYXJnaW4tbGVmdDogNXB4Ow0KICAgIG1hcmdpbi1yaWdodDogMTVweDsNCn0NCg0KI3dyYXBwZXIgICNjb250ZW50X2xlZnQ+Kjpub3QoW2NsYXNzKj0ncmVzdWx0J10pOm5vdChbY2xhc3MqPSdjLWdyb3VwLXdyYXBwZXInXSl7DQoJZ3JpZC1jb2x1bW4tc3RhcnQ6IDE7DQogICAgZ3JpZC1jb2x1bW4tZW5kOiB4bWFpbi1lbmQ7DQp9DQouYy1jb250YWluZXIgaDMgYXsNCiAgICB6LWluZGV4OjE7DQp9DQouQUMuc3Atc2VwYXJhdG9yew0KICAgIHdpZHRoOiBhdXRvOw0KfQ0KLypzZWFyY2ggZW5naW5lIGp1bXAqLw0KI3Nlai1jb250YWluZXJ7DQogICAgcGFkZGluZy1sZWZ0OiAwOw0KICAgIG1hcmdpbi1sZWZ0OiAwOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi5zX2Zvcm1fd3JhcHBlciB7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgZGlzcGxheTogZmxleDsNCn0NCg0KI3dyYXBwZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5zZWFyY2hfdG9vbF9jb250ZXIsDQojd3JhcHBlciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLm51bXMgew0KICAgIHdpZHRoOiA4MCU7DQp9DQpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxNTAwcHgpIHsNCiAgICBmb3JtLmZtIC5zX2lwdF93ci5iZ3sNCiAgICAgICAgbWluLXdpZHRoOiA0NTBweA0KICAgIH0NCiAgICAud3JhcHBlcl9uZXcgLmhlYWRfd3JhcHBlciAjcmVzdWx0X2xvZ297DQogICAgICAgIG1hcmdpbi1sZWZ0OiAtMTcwcHg7DQogICAgfQ0KfQ0KQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTkyMXB4KSB7DQogICAgI3NfdGFiLnNfdGFiIC5zX3RhYl9pbm5lciB7DQogICAgICAgIHdpZHRoOiA5MDBweDsNCiAgICB9DQogICAgZm9ybS5mbSAuc19pcHRfd3IuYmd7DQogICAgICAgIG1pbi13aWR0aDogOTAwcHgNCiAgICB9DQp9"},{"meta":{"name":"baiduLiteStyle.css","url":"http://ibaidu.tujidu.com/newcss/baiduLiteStyle.css?t=24.19","ts":1614930447406,"mimetype":"text/css"},"source":"LyoNCiEgVmVyc2lvbjogMjAxODA0MjcwMDANCiEgVGl0bGU6ICBiYWlkdS1saXRlWzIwMTgwNDI3MDAwXQ0KISBMYXN0IG1vZGlmaWVkOiAyMDE5LzA5LzA1DQohIEV4cGlyZXM6IDEgZGF5cyAodXBkYXRlIGZyZXF1ZW5jeSkNCg0KVGhpcyBzdHlsZSBpcyBmcm9tIHd3dy55aWNsZWFyLmNvbSwgYW5kIHRoYW5rcyB0aGUgYXV0aG9yIG9mIHRoZSBzaXRlLg0KKi8NCip7Zm9udC1mYW1pbHk6LWFwcGxlLXN5c3RlbSwiSGVsdmV0aWNhIE5ldWUiLEhlbHZldGljYSwiTmltYnVzIFNhbnMgTCIsQXJpYWwsIkxpYmVyYXRpb24gU2FucyIsIlBpbmdGYW5nIFNDIiwiSGlyYWdpbm8gU2FucyBHQiIsIlNvdXJjZSBIYW4gU2FucyBDTiIsIlNvdXJjZSBIYW4gU2FucyBTQyIsIk1pY3Jvc29mdCBZYUhlaSIsIldlbnF1YW55aSBNaWNybyBIZWkiLCJXZW5RdWFuWWkgWmVuIEhlaSIsIlNUIEhlaXRpIixTaW1IZWksIldlblF1YW5ZaSBaZW4gSGVpIFNoYXJwIixzYW5zLXNlcmlmfQ0KOjotd2Via2l0LXNjcm9sbGJhcnt3aWR0aDo2cHg7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLDApfQ0KOjotd2Via2l0LXNjcm9sbGJhci10cmFja3tiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjEpfQ0KOjotd2Via2l0LXNjcm9sbGJhci10aHVtYntib3JkZXItcmFkaXVzOjNweDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjIpO3RyYW5zaXRpb246YWxsIC40cyBlYXNlOy1tb3otdHJhbnNpdGlvbjphbGwgLjRzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuNHMgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuNHMgZWFzZX0NCjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXJ7Ym9yZGVyLXJhZGl1czozcHg7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC40KTt0cmFuc2l0aW9uOmFsbCAuNHMgZWFzZTstbW96LXRyYW5zaXRpb246YWxsIC40cyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjRzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjRzIGVhc2V9DQouYW5pbWF0ZWR7LXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246MXM7YW5pbWF0aW9uLWR1cmF0aW9uOjFzO2FuaW1hdGlvbi1maWxsLW1vZGU6Ym90aH0NCkAtd2Via2l0LWtleWZyYW1lcyBmYWRlSW5VcHtmcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwMCUsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMTAwJSwwKX10b3tvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19DQpAa2V5ZnJhbWVzIGZhZGVJblVwe2Zyb217b3BhY2l0eTowOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMTAwJSwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwxMDAlLDApfXRve29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTpub25lO3RyYW5zZm9ybTpub25lfX0NCi5mYWRlSW5VcHstd2Via2l0LWFuaW1hdGlvbi1uYW1lOmZhZGVJblVwO2FuaW1hdGlvbi1uYW1lOmZhZGVJblVwfQ0KQC13ZWJraXQta2V5ZnJhbWVzIGJvdW5jZUluUmlnaHR7NjAlLDc1JSw5MCUsZnJvbSx0b3std2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSk7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoLjIxNSwuNjEsLjM1NSwxKX1mcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgzMDAwcHgsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMzAwMHB4LDAsMCl9NjAle29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApfTc1JXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgxMHB4LDAsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEwcHgsMCwwKX05MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtNXB4LDAsMCl9dG97LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19DQpAa2V5ZnJhbWVzIGJvdW5jZUluUmlnaHR7NjAlLDc1JSw5MCUsZnJvbSx0b3std2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSk7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoLjIxNSwuNjEsLjM1NSwxKX1mcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgzMDAwcHgsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMzAwMHB4LDAsMCl9NjAle29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApfTc1JXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgxMHB4LDAsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEwcHgsMCwwKX05MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtNXB4LDAsMCl9dG97LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19DQouYm91bmNlSW5SaWdodHstd2Via2l0LWFuaW1hdGlvbi1uYW1lOmJvdW5jZUluUmlnaHQ7YW5pbWF0aW9uLW5hbWU6Ym91bmNlSW5SaWdodH0NCkAtd2Via2l0LWtleWZyYW1lcyBib3VuY2VJblVwezYwJSw3NSUsOTAlLGZyb20sdG97LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllciguMjE1LC42MSwuMzU1LDEpO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSl9ZnJvbXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwzMDAwcHgsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMzAwMHB4LDApfTYwJXtvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMjBweCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMjBweCwwKX03NSV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwxMHB4LDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwcHgsMCl9OTAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsLTVweCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtNXB4LDApfXRvey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwwLDApfX0NCmF7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bWFyZ2luLWJvdHRvbToycHh9DQouYy1zaG93dXJsOmhvdmVye3RleHQtZGVjb3JhdGlvbjpub25lO2JvcmRlcjpub25lO29wYWNpdHk6Ljg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQoucmVzLWdhcC1yaWdodDE2OmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxLjJweCBzb2xpZH0NCi5jLXNob3d1cmx7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQouYy10aXAtYXJyb3c6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyOm5vbmV9DQouYy1kZWZhdWx0IGF7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyOm5vbmV9DQouYy1nYXAtYm90dG9tIGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0NCi5vcF9kaWN0M19tb3JlbGluayBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9DQouYy1idG46aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fQ0KdGQgYTpob3Zlcnt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfQ0KZW17dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fQ0KI3Nfd3JhcHtkaXNwbGF5Om5vbmV9DQoucy10b3AtbmF2e2Rpc3BsYXk6bm9uZX0NCiNzX2N0bmVyX21lbnVze2Rpc3BsYXk6bm9uZX0NCiNzX21lbnVfZ3VyZHtkaXNwbGF5Om5vbmV9DQojc19zdHJweF9zcGFuMXtkaXNwbGF5Om5vbmV9DQojZnRDb257ZGlzcGxheTpub25lfQ0KI2JvdHRvbV9jb250YWluZXJ7ZGlzcGxheTpub25lfQ0KI2xne2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtoZWlnaHQ6NzBweDtwYWRkaW5nLXRvcDoxNTBweH0NCiNsZyBpbWd7ZGlzcGxheTpub25lfQ0KI2xnIGF7ZGlzcGxheTpub25lfQ0KI2hlYWRfd3JhcHBlcntwYWRkaW5nLWJvdHRvbTowfQ0KLnNfZm9ybV93cmFwcGVye21hcmdpbi10b3A6YXV0bztkaXNwbGF5OiBmbGV4O30NCiNzX2xnX2ltZywjc19sZ19pbWdfbmV3e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9DQojZm9ybSAuc19pcHRfd3J7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czozcHg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7YmFja2dyb3VuZC1wb3NpdGlvbjoxMDAlIWltcG9ydGFudDtoZWlnaHQ6MzlweDtmb250LWZhbWlseTotYXBwbGUtc3lzdGVtLCJIZWx2ZXRpY2EgTmV1ZSIsSGVsdmV0aWNhLCJOaW1idXMgU2FucyBMIixBcmlhbCwiTGliZXJhdGlvbiBTYW5zIiwiUGluZ0ZhbmcgU0MiLCJIaXJhZ2lubyBTYW5zIEdCIiwiU291cmNlIEhhbiBTYW5zIENOIiwiU291cmNlIEhhbiBTYW5zIFNDIiwiTWljcm9zb2Z0IFlhSGVpIiwiV2VucXVhbnlpIE1pY3JvIEhlaSIsIldlblF1YW5ZaSBaZW4gSGVpIiwiU1QgSGVpdGkiLFNpbUhlaSwiV2VuUXVhbllpIFplbiBIZWkgU2hhcnAiLHNhbnMtc2VyaWY7cGFkZGluZy10b3A6NHB4fQ0KLnNfaXB0e2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0sIkhlbHZldGljYSBOZXVlIixIZWx2ZXRpY2EsIk5pbWJ1cyBTYW5zIEwiLEFyaWFsLCJMaWJlcmF0aW9uIFNhbnMiLCJQaW5nRmFuZyBTQyIsIkhpcmFnaW5vIFNhbnMgR0IiLCJTb3VyY2UgSGFuIFNhbnMgQ04iLCJTb3VyY2UgSGFuIFNhbnMgU0MiLCJNaWNyb3NvZnQgWWFIZWkiLCJXZW5xdWFueWkgTWljcm8gSGVpIiwiV2VuUXVhbllpIFplbiBIZWkiLCJTVCBIZWl0aSIsU2ltSGVpLCJXZW5RdWFuWWkgWmVuIEhlaSBTaGFycCIsc2Fucy1zZXJpZn0NCiNmb3JtIC5zX2lwdF93cjpob3Zlcntib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjJweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5pcHRob3Zlcnt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5pcHRmb2N1c3tib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpfQ0KYm9keSAjZm9ybSAuc19idG57d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtib3JkZXItcmFkaXVzOjUwJTtmb250LXNpemU6MDtib3JkZXI6bm9uZTtib3gtc2hhZG93Om5vbmU7bWFyZ2luLWxlZnQ6MDt6LWluZGV4OjEwMDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczttYXJnaW4tdG9wOjA7b3BhY2l0eTowfQ0KYm9keSAjZm9ybSAuc19idG46aG92ZXJ7b3BhY2l0eTouNTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMCk7Ym9yZGVyOm5vbmU7Ym94LXNoYWRvdzpub25lO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KYm9keSAjZm9ybSAuc19idG5fd3J7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtib3JkZXItcmFkaXVzOjUwJTtmb250LXNpemU6MDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMCk7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCU7Ym9yZGVyOm5vbmU7Ym94LXNoYWRvdzpub25lO21hcmdpbi1sZWZ0OjVweDt6LWluZGV4OjEwMDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczttYXJnaW4tdG9wOjZweH0NCmJvZHkgI2Zvcm0gLnNfYnRuX3dyOmhvdmVye29wYWNpdHk6LjU7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDApO2JvcmRlcjpub25lO2JveC1zaGFkb3c6bm9uZTt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5idG5ob3ZlcntvcGFjaXR5Oi41O2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwwKSFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2JveC1zaGFkb3c6bm9uZTt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5oaW50X3RvcHJxX3RpcHN7bWFyZ2luLWJvdHRvbToxMnB4fQ0KLnNfZm9ybXtoZWlnaHQ6NzVweDtwYWRkaW5nLXRvcDoxMHB4fQ0KI3NfdGFie3BhZGRpbmc6ODdweCAwIDAgMTIxcHg7fQ0KI2hlYWQuc19kb3due2JveC1zaGFkb3c6MCAwIDVweCAjNjY2O3BhZGRpbmctYm90dG9tOiA4cHg7fQ0KLmJkc3Vne3RvcDo0MnB4O2JveC1zaGFkb3c6MCAycHggNXB4IDAgcmdiYSgwLDAsMCwuMTYpLDAgMnB4IDEwcHggMCByZ2JhKDAsMCwwLC4xMik7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czowIDAgMnB4IDJweDtmb250LWZhbWlseTotYXBwbGUtc3lzdGVtLCJIZWx2ZXRpY2EgTmV1ZSIsSGVsdmV0aWNhLCJOaW1idXMgU2FucyBMIixBcmlhbCwiTGliZXJhdGlvbiBTYW5zIiwiUGluZ0ZhbmcgU0MiLCJIaXJhZ2lubyBTYW5zIEdCIiwiU291cmNlIEhhbiBTYW5zIENOIiwiU291cmNlIEhhbiBTYW5zIFNDIiwiTWljcm9zb2Z0IFlhSGVpIiwiV2VucXVhbnlpIE1pY3JvIEhlaSIsIldlblF1YW5ZaSBaZW4gSGVpIiwiU1QgSGVpdGkiLFNpbUhlaSwiV2VuUXVhbllpIFplbiBIZWkgU2hhcnAiLHNhbnMtc2VyaWY7fQ0KLmJnc3VnIGxpe2ZvbnQtZmFtaWx5OkhlbHZldGljYSwiTWljcm9zb2Z0IFlhaGVpIFVJIiFpbXBvcnRhbnQ7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6MzZweCFpbXBvcnRhbnR9DQouYmdzdWcgdWwgbGl7bGluZS1oZWlnaHQ6MzJweCFpbXBvcnRhbnR9DQouYmRzdWctb3ZlcmZsb3d7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLCJNaWNyb3NvZnQgWWFoZWkgVUkiIWltcG9ydGFudDt3aWR0aDo1ODNweCFpbXBvcnRhbnR9DQojcXVpY2tkZWxldGV7dG9wOjVweCFpbXBvcnRhbnQ7b3BhY2l0eTouNX0NCiNrd190aXB7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLCJNaWNyb3NvZnQgWWFoZWkgVUkgTGlnaHQifQ0KI3Jlc3VsdF9sb2dve2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTVRBeElETXpJaUJ6ZEhsc1pUMGlaVzVoWW14bExXSmhZMnRuY205MWJtUTZibVYzSURBZ01DQXhNREVnTXpNN0lpQjRiV3c2YzNCaFkyVTlJbkJ5WlhObGNuWmxJajRLUEhOMGVXeGxJSFI1Y0dVOUluUmxlSFF2WTNOeklqNEtDUzV6ZERCN1ptbHNiRG9qTkRnM09VSkVPMzBLQ1M1emRERjdabWxzYkRvalJFUTBORE0yTzMwS0NTNXpkREo3Wm1sc2JEb2pSa1pHUmtaR08zMEtQQzl6ZEhsc1pUNEtQSEJoZEdnZ1kyeGhjM005SW5OME1DSWdaRDBpVFRVd0xqUXNNVFV1TTJNdE15NDRMREF1TXkwMExESXVOaTAxTGpjc05DNDNZeTB4TGpnc01pNHlMVFV1TlN3MExqRXROaXcyTGpkakxUQXVOaXd6TGpNc01TNHpMRFV1TVN3ekxEVXVOMk14TGprc01DNDJMRFl1TWkwd0xqVXNPQzQwTFRBdU5XZ3dMaklLQ1dnd0xqSmpNaTR5TERBc05pNDBMREV1TVN3NExqUXNNQzQxWXpFdU9DMHdMallzTXk0MUxUTXVNaXd6TFRVdU4yTXRNQzQwTFRJdU1TMDBMalF0TkM0MUxUWXVNaTAyTGpkRE5UUXVNaXd4T0N3MU5DNHpMREUxTGpZc05UQXVOQ3d4TlM0emVpQk5NemNzTVRRdU9Bb0pZekFzTWk0MExERXVOaXcwTGpNc015NDBMRFF1TTJNeExqa3NNQ3d6TGpRdE1TNDVMRE11TkMwMExqTmpNQzB5TGpRdE1TNDJMVFF1TXkwekxqUXROQzR6VXpNM0xERXlMalVzTXpjc01UUXVPSG9nVFRRekxqa3NPQzQyWXpBc01pNDFMREV1TlN3MExqVXNNeTR6TERRdU5Rb0pZekV1T0N3d0xETXVNeTB5TGpFc015NHpMVFF1TlZNME9TdzBMakVzTkRjdU1TdzBMakZETkRVdU15dzBMRFF6TGprc05pdzBNeTQ1TERndU5ub2dUVFV5TGpJc09DNDFZekFzTWk0ekxERXVOQ3cwTGpNc015NHlMRFF1TTNNekxqSXRNUzQ1TERNdU1pMDBMak56TFRFdU5DMDBMak10TXk0eUxUUXVNd29KVXpVeUxqSXNOaTR5TERVeUxqSXNPQzQxZWlCTk5UY3VOU3d4TlM0NVl6QXNNaTR6TERFdU5TdzBMak1zTXk0ekxEUXVNMk14TGpnc01Dd3pMak10TVM0NUxETXVNeTAwTGpOekxURXVOUzAwTGpNdE15NHpMVFF1TTBNMU9DNDVMREV4TGpZc05UY3VOU3d4TXk0MkxEVTNMalVzTVRVdU9Yb2lMejRLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUUXNNekF1TkhZdE5TNHhhRFl1TkdNeExqWXNNQ3d4TGpZc01DNHpMREV1Tml3eWRqRXVOR013TERFdU5pMHlMak1zTVM0NExUTXVPU3d4TGpoTU5Dd3pNQzQwVERRc016QXVOSG9nVFRRc01qTjJMVFF1T0dnMExqRUtDV014TGpZc01Dd3pMamtzTUN3ekxqa3NNaTR4ZGpBdU1XTXdMREV1TkMwd0xqVXNNaTQyTFRFdU9Dd3lMalpETVRBdU15d3lNeXcwTERJekxEUXNNak42SUUweExqY3NNVFoyTVRZdU0yZzJMalJqTXl3d0xEWXVNaXd3TERZdU1pMHpMaloyTFRFdU1XTXdMVEV1Tmkwd0xqRXRNaTQzTFRFdU1TMHpMalVLQ1dNeExUQXVPQ3d4TGpFdE1pNHpMREV1TVMwekxqWnNNQ3d3WXpBdE5DNDFMVE11TWkwMExqVXROaTR5TFRRdU5Vd3hMamNzTVRaTU1TNDNMREUyZWlJdlBnbzhjR0YwYUNCamJHRnpjejBpYzNReElpQmtQU0pOTWpVc01qZ3VPV010TVM0eExERXVNUzB6TGpNc01TNHpMVE11TlN3eExqTmpMVEV1TXl3d0xUSXVOeTB3TGpVdE1pNDNMVEl1TVdNd0xURXVOQ3d3TGpVdE1pNHpMREl1TVMweUxqTmpNUzR6TERBc01pNDRMREF1TVN3MExqRXNNQzQyVmpJNExqbDZDZ2tnVFRJeExqUXNNekl1TTJNd0xqUXNNQ3d5TGpNdE1DNHhMRE11Tnkwd0xqbHNNQzR5TERBdU4yZ3lMakYyTFRndU9XTXdMVE11TmkweUxqTXROUzAxTGpjdE5XTXRNUzQ0TERBdE5DNHpMREF1TnkwMExqY3NNQzQ1YkRBdU5Dd3lMak5qTVM0MkxUQXVOaXd6TFRBdU5pdzBMakl0TUM0MkNnbGpNUzQ0TERBc015NHpMREF1Tml3ekxqTXNNaTQyVmpJMFl5MHhMVEF1TkMweUxqUXRNQzQyTFRRdU1TMHdMalpqTFRNc01DMDBMalVzTVM0MkxUUXVOU3cwTGpkRE1UWXVOQ3d6TVM0NExERTVMallzTXpJdU15d3lNUzQwTERNeUxqTjZJaTgrQ2p4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMHpNQzR5TERFMkxqRmpNQ3d3TGpZc01DNDJMREV1TWl3eExqTXNNUzR5WXpBdU9Dd3dMREV1TXkwd0xqWXNNUzR6TFRFdU1tTXdMVEF1Tnkwd0xqWXRNUzR6TFRFdU15MHhMak5ETXpBdU9Dd3hOQzQ0TERNd0xqSXNNVFV1TXl3ek1DNHlMREUyTGpGNkNna2dUVE13TGpNc016SXVNV2d5TGpSV01UZ3VOV2d0TWk0MFZqTXlMakY2SWk4K0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazAzTVM0eUxESXlMakZvT0M0MFl6QXVOQ3d3TGpFc01DNDJMREF1TXl3d0xqWXNNQzQzZGpJdU5tZ3RPUzQzZGkweUxqWkROekF1Tml3eU1pNDBMRGN3TGpnc01qSXVNaXczTVM0eUxESXlMakY2SUUwM01TNHlMRE13TGpVS0NXTXRNQzQwTERBdE1DNDJMVEF1TXkwd0xqY3RNQzQ0ZGkweUxqWm9PUzQzZGpJdU5tTXdMREF1TkMwd0xqSXNNQzQzTFRBdU5pd3dMamRJTnpFdU1ub2dUVGN6TGpZc01UaGpMVEF1TVN3d0xqUXRNQzR4TERBdU9TMHdMalFzTVM0M1l5MHdMakVzTUM0ekxUQXVNU3d3TGpVdE1DNHhMREF1TndvSmFDMHlMalpqTFRFdU15d3dMakV0TVM0NUxEQXVPQzB5TERKMk55NDVZekF1TVN3eExqRXNNQzQ0TERFdU9Dd3lMREV1T1dneE1HTXhMakl0TUM0eExERXVPQzB3TGpjc01TNDVMVEV1T0hZdE55NDVZeTB3TGpFdE1TNHpMVEF1TnkweExqa3RNUzQ1TFRJdU1XZ3ROUW9KWXpBdU1TMHdMak1zTUM0eExUQXVPQ3d3TGpNdE1TNDBZekF1TVMwd0xqUXNNQzR4TFRBdU55d3dMakV0TUM0NWFEY3VNbll0TVM0NFNEWTNMalJXTVRoTU56TXVOaXd4T0V3M015NDJMREU0ZWlJdlBnbzhjR0YwYUNCamJHRnpjejBpYzNReElpQmtQU0pOT1RNdU55d3lNaTQzWXkwd0xqUXRNQzR4TFRBdU5TMHdMakl0TUM0MUxUQXVOWFl0TUM0MmFETXVNbll3TGpaakxUQXVNU3d3TGpNdE1DNHlMREF1TkMwd0xqVXNNQzQxU0RrekxqZDZJRTA1Tmk0MkxESTBMakVLQ1dNeExqRXRNQzR4TERFdU5pMHdMalVzTVM0MkxURXVOSFl0TVdneUxqTjJMVEV1TldndE1pNHpkaTB4TGpGb0xURXVPSFl4TGpGb0xUTXVNbll0TVM0eGFDMHhMamgyTVM0eGFDMHlMak4yTVM0MWFESXVNM1l4WXpBdU1Td3dMamtzTUM0MkxERXVOQ3d4TGpZc01TNDBTRGsyTGpaNkNna2dUVGswTGpnc016QXVOR014TGpZc01DNDRMRE11TkN3eExqTXNOUzQwTERFdU9Hd3dMamt0TVM0M1l5MHhMalF0TUM0eUxUSXVPUzB3TGpZdE5DNDBMVEV1TVdNeExqRXRNQzQ0TERJdE1TNDJMREl1TnkweUxqVmpNQzR6TFRBdU5Dd3dMalF0TUM0NUxEQXVNaTB4TGpNS0NXTXRNQzR6TFRBdU5pMHdMamd0TUM0NUxURXVOQzB3TGpsb0xUbDJNUzQxYURjdU4yTXdMaklzTUN3d0xqUXNNQzR4TERBdU5Dd3dMakZ6TUN3d0xqRXRNQzR4TERBdU0yTXRNQzQyTERBdU5pMHhMalFzTVM0ekxUSXVNeXd4TGpoakxURXVNaTB3TGpjdE1pNHhMVEV1TXkweUxqUXRNUzQ0YUMweUxqSUtDV013TGprc01Td3hMamdzTVM0NUxESXVPU3d5TGpkakxURXVOaXd3TGpZdE15NHpMREV1TVMwMExqa3NNUzR6YkRBdU9Td3hMalpET1RFdU15d3pNUzQ0TERrekxqSXNNekV1TVN3NU5DNDRMRE13TGpSNklFMDRPQzR6TERJMUxqSjJMVFpqTUM0eExUQXVOaXd3TGpNdE1DNDVMREF1T0Mwd0xqa0tDV2d4TVM0NGRpMHhMalpJT1RWakxUQXVNUzB3TGpFdE1pNHlMVEF1TVMweUxqSXNNR2d0TkM0M1l5MHhMakVzTUM0eExURXVOeXd3TGprdE1TNDRMREl1TWxZeU5XTXdMakVzTWk0eExUQXVOQ3cwTGpRdE1TNHhMRFl1TjJ3eExqa3NNQzQyQ2dsRE9EY3VPU3d5T1M0NUxEZzRMak1zTWpjdU5pdzRPQzR6TERJMUxqSjZJaTgrQ2p4d1lYUm9JR05zWVhOelBTSnpkRElpSUdROUlrMDBOaTR6TERJMExqSmpNQzQyTERBc01TNHlMREF1TVN3eExqY3NNQzQwZGpNdU5HTXdMREF1TXkwd0xqWXNNUzB4TGprc01XTXRNUzQxTERBdE1TNDRMVEF1TmkweExqZ3RNaTR4ZGkwd0xqWUtDVU0wTkM0eUxESTBMamdzTkRRdU55d3lOQzR5TERRMkxqTXNNalF1TW5vZ1RUUTVMaklzTWpBdU4wZzBPSFl5TGpWRE5EY3VOaXd5TXk0eExEUTNMREl6TERRMkxqTXNNak5qTFRJdU55d3dMVE11TXl3eExUTXVNeXd6TGpWMk1DNHpZekFzTWk0MExEQXVPU3d6TGpNc015NHlMRE11TXdvSll6QXVPQ3d3TERFdU15MHdMakVzTVM0NExUQXVOV3d3TGpFc01DNDJhREV1TVV3ME9TNHlMREl3TGpkTU5Ea3VNaXd5TUM0M2VpSXZQZ284Y0dGMGFDQmpiR0Z6Y3owaWMzUXlJaUJrUFNKTk5UWXVOeXd5TTJndE1TNHlkalV1TW1NdE1DNDJMREF1TkMweExqY3NNQzQyTFRJdU5Dd3dMalpqTFRBdU9Dd3dMVEV0TUM0MExURXRNUzR6ZGkwMExqWm9MVEV1TVhZMExqaGpNQ3d4TGpZc01DNDFMREl1TXl3eUxqRXNNaTR6Q2dsak1Td3dMREl1TVMwd0xqTXNNaTQyTFRBdU5td3dMakVzTUM0MmFERXVNVll5TTNvaUx6NEtQSEJoZEdnZ1kyeGhjM005SW5OME1TSWdaRDBpVFRreUxqY3NNVFV1TjJNd0xUQXVOeXd3TGpZdE1TNHpMREV1TWkweExqTmpNQzQyTERBc01TNHlMREF1Tml3eExqSXNNUzR6VXprMExqVXNNVGNzT1RNdU9Td3hOME01TXk0ekxERTJMamtzT1RJdU55d3hOaTR6TERreUxqY3NNVFV1TjNvaUx6NEtQQzl6ZG1jK0NnPT0iKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7d2lkdGg6MTAxcHg7aGVpZ2h0OjMzcHg7bWFyZ2luLXRvcDo5cHh9DQojcmVzdWx0X2xvZ28gaW1ne2Rpc3BsYXk6bm9uZTt2aXNpYmlsaXR5OmhpZGRlbn0NCiNyZXN1bHRfbG9nbyBhIGltZ3tkaXNwbGF5Om5vbmU7dmlzaWJpbGl0eTpoaWRkZW59DQouYy1jb250YWluZXJ7bGluZS1oZWlnaHQ6MS42NX0NCiNyc3tiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMCkhaW1wb3J0YW50fQ0KLmMtYm9yZGVyey13ZWJraXQtYm94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpO2JvcmRlci1yYWRpdXM6MnB4O2JvcmRlcjpub25lO3BhZGRpbmc6MjBweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5jLWJvcmRlcjpob3Zlcntib3gtc2hhZG93OjAgM3B4IDEwcHggcmdiYSgwLDAsMCwuMTYpLDAgM3B4IDEwcHggcmdiYSgwLDAsMCwuMjMpO3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5jLXRhYnMtbmF2e2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MnB4IDJweCAwIDA7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KLmMtdGFicy1uYXYtbW92ZXRvcHttYXJnaW4tbGVmdDotMjBweDttYXJnaW4tcmlnaHQ6LTIwcHg7bWFyZ2luLXRvcDotMjBweDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQouYy10YWJzLW5hdi1zZWxlY3RlZHtib3JkZXItdG9wOm5vbmUhaW1wb3J0YW50O2JvcmRlci1sZWZ0Om5vbmUhaW1wb3J0YW50O2JvcmRlci1yaWdodDpub25lIWltcG9ydGFudDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQouYy10YWJzLW5hdi1zZXB7ZGlzcGxheTpub25lIWltcG9ydGFudH0NCiNwYWdlIGF7aGVpZ2h0OjM0cHg7Ym9yZGVyLXJhZGl1czoycHg7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwwKTt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojcGFnZSBhOmhvdmVye3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCiNwYWdlIGEgLnBjOmhvdmVye3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCiNwYWdlIHN0cm9uZ3toZWlnaHQ6MzRweDtib3JkZXItcmFkaXVzOjJweDtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6LTJweDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojcGFnZSBzdHJvbmcgLnBje2xpbmUtaGVpZ2h0OjM0cHg7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KLmZre2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9DQoucGN7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2hlaWdodDozNXB4O3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5wYzpob3Zlcnt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojc190YWIgYXt3aWR0aDo1OXB4O2xpbmUtaGVpZ2h0OjQ0cHh9DQojc190YWIgYnt3aWR0aDo1OXB4O2xpbmUtaGVpZ2h0OjQ0cHh9DQojc190YWJ7cGFkZGluZy1ib3R0b206OHB4O3BhZGRpbmctdG9wOjg5cHh9DQouYy1pY29uLXRpZWJhe2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcn0NCi50b2luZGV4e2Rpc3BsYXk6bm9uZX0NCi53cmFwcGVyX25ldyAuc190YWJfaW5uZXJ7cGFkZGluZy10b3A6IDEwcHg7fQ0KLndyYXBwZXJfbmV3IC5zX2lwdF93cntiYWNrZ3JvdW5kOiAjZmZmZmZmO30NCi53cmFwcGVyX25ldy53cmFwcGVyX3MgI2Zvcm0gLmJkc3VnLW5ld3t3aWR0aDogOTMlO30NCiN1IC5wZntiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Zm9udC1zaXplOjA7cGFkZGluZzoxNHB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3BhZGRpbmctdG9wOjE4cHg7cGFkZGluZy1ib3R0b206MTBweDt9DQojdSAucGY6aG92ZXJ7b3BhY2l0eToxOyAtbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2V9DQoud3JhcHBlcl9uZXcgI3U+YS5wZntjb2xvcjpyZ2JhKDAsMCwwLDApOyBtYXJnaW46IDRweCAwIDAgMjRweDt9DQoud3JhcHBlcl9uZXcgI3U+YS5wZjpob3Zlcntjb2xvcjpyZ2JhKDAsMCwwLDApfQ0KLnBmIC5jLWljb257ZGlzcGxheTpub25lIWltcG9ydGFudH0NCi5jLWljb24tdHJpYW5nbGUtZG93bntkaXNwbGF5Om5vbmV9DQouYmRwZm1lbnV7Ym94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtib3JkZXItcmFkaXVzOjJweCFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmU7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7bWFyZ2luLWxlZnQ6LTEwcHg7bWFyZ2luLXRvcDozMHB4O3otaW5kZXg6ODg4OCFpbXBvcnRhbnR9DQouYmRwZm1lbnUgYTpob3Zlcnt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5iZG51YXJyb3d7ZGlzcGxheTpub25lIWltcG9ydGFudH0NCi5zZXRwcmVme2JvcmRlci1yYWRpdXM6MnB4IDJweCAwIDA7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQouc2V0cHJlZjpob3Zlcnt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCiN1IC5sYntwYWRkaW5nOjIzcHg7Ym9yZGVyLXJhZGl1czo1MHB4O2ZvbnQtc2l6ZTowO3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjUwcHg7dG9wOjM4MDAlO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojdSAubGI6aG92ZXJ7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojdSAubGI6YWN0aXZle2JveC1zaGFkb3c6MCAxMHB4IDMwcHggcmdiYSgwLDAsMCwuMTkpLDAgNnB4IDEwcHggcmdiYSgwLDAsMCwuMjMpO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KLnRhbmctZm9yZWdyb3VuZHtib3JkZXItcmFkaXVzOjJweDtib3gtc2hhZG93OjAgMTlweCA2MHB4IHJnYmEoMCwwLDAsLjMpLDAgMTVweCAyMHB4IHJnYmEoMCwwLDAsLjIyKX0NCiNzX3VwZnVuY19tZW51c3tkaXNwbGF5Om5vbmV9DQojYmd7YmFja2dyb3VuZC1jb2xvcjojRkZGRkZGIWltcG9ydGFudDtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjNweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztiYWNrZ3JvdW5kLXBvc2l0aW9uOjEwMCUhaW1wb3J0YW50O3otaW5kZXg6LTE7d2lkdGg6NjAwcHg7aGVpZ2h0OjM5cHg7Zm9udC1mYW1pbHk6LWFwcGxlLXN5c3RlbSwiSGVsdmV0aWNhIE5ldWUiLEhlbHZldGljYSwiTmltYnVzIFNhbnMgTCIsQXJpYWwsIkxpYmVyYXRpb24gU2FucyIsIlBpbmdGYW5nIFNDIiwiSGlyYWdpbm8gU2FucyBHQiIsIlNvdXJjZSBIYW4gU2FucyBDTiIsIlNvdXJjZSBIYW4gU2FucyBTQyIsIk1pY3Jvc29mdCBZYUhlaSIsIldlbnF1YW55aSBNaWNybyBIZWkiLCJXZW5RdWFuWWkgWmVuIEhlaSIsIlNUIEhlaXRpIixTaW1IZWksIldlblF1YW5ZaSBaZW4gSGVpIFNoYXJwIixzYW5zLXNlcmlmO3BhZGRpbmctdG9wOjVweCFpbXBvcnRhbnR9DQojaGVhZF93cmFwcGVyIC5zX2lwdHtib3JkZXI6MCFpbXBvcnRhbnQ7aGVpZ2h0OjIwcHghaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MnB4O3dpZHRoOjU4NnB4IWltcG9ydGFudH0NCiNoZWFkX3dyYXBwZXIgLm5vYmdfc19mbV9ob3Zlcntib3JkZXI6MCFpbXBvcnRhbnR9DQojaGVhZF93cmFwcGVyIC5ub2JnX3NfZm1fZm9jdXN7Ym9yZGVyOjAhaW1wb3J0YW50O2JvcmRlci10b3A6MCBzb2xpZCAjZmZmIWltcG9ydGFudDtib3JkZXItYm90dG9tOjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLWxlZnQ6MCBzb2xpZCAjZmZmIWltcG9ydGFudDtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICMzOGZ9DQoucy10aXRsZS1pbWFnZXtib3JkZXI6bm9uZSFpbXBvcnRhbnQ7Ym9yZGVyLXRvcDowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1ib3R0b206MCBzb2xpZCAjZmZmIWltcG9ydGFudDtib3JkZXItbGVmdDowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1yaWdodDowIHNvbGlkICNmZmYhaW1wb3J0YW50fQ0KI3NfbGdfaW1ne2Rpc3BsYXk6bm9uZX0NCiNmb3Jtey13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOjAuMnM7YW5pbWF0aW9uLWR1cmF0aW9uOjAuMnM7LXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlOmJvdGg7YW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO2FuaW1hdGlvbi1uYW1lOmZhZGVJblVwOy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6ZmFkZUluVXA7YW5pbWF0aW9uLWRlbGF5Oi4zczstd2Via2l0LWFuaW1hdGlvbi1kZWxheTouM3N9DQpib2R5Om5vdChbbmV3c10pICNoZWFkX3dyYXBwZXIgI2Zvcm0uZm17bWluLXdpZHRoOiA1MCU7d2lkdGg6IDExMCU7fQ0KLnMtcC10b3B7dHJhbnNmb3JtOnNjYWxlKC44KTtib3R0b206OXB4IWltcG9ydGFudH0NCi5tbmF2e2Rpc3BsYXk6bm9uZX0NCiN1X3NwIC5tbmF2e2Rpc3BsYXk6bm9uZX0NCiN1MSBhLmxie3BhZGRpbmc6MjNweDtib3JkZXItcmFkaXVzOjUwJTtmb250LXNpemU6MDtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDo0NHB4O3RvcDoxMDQwJTtiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ05EWWdORFlpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRFEySURRMk95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krQ2p4emRIbHNaU0IwZVhCbFBTSjBaWGgwTDJOemN5SStDZ2t1YzNRd2UyWnBiR3c2STBaR1JrWkdSanQ5Q2p3dmMzUjViR1UrQ2p4d1lYUm9JR05zWVhOelBTSnpkREFpSUdROUlrMHlNeXd5TTJNeUxqa3NNQ3cxTGpJdE1pNHpMRFV1TWkwMUxqSnpMVEl1TXkwMUxqSXROUzR5TFRVdU1uTXROUzR5TERJdU15MDFMaklzTlM0eVV6SXdMakVzTWpNc01qTXNNak42SUUweU15d3lOUzQyQ2dsakxUTXVOU3d3TFRFd0xqUXNNUzQzTFRFd0xqUXNOUzR5ZGpJdU5tZ3lNQzQzZGkweUxqWkRNek11TkN3eU55NHpMREkyTGpVc01qVXVOaXd5TXl3eU5TNDJlaUl2UGdvOEwzTjJaejRLIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztsaW5lLWhlaWdodDowO3otaW5kZXg6MTAwfQ0KI3UxIGEubGI6aG92ZXJ7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojdTEgYS5sYjphY3RpdmV7Ym94LXNoYWRvdzowIDEwcHggMzBweCByZ2JhKDAsMCwwLC4xOSksMCA2cHggMTBweCByZ2JhKDAsMCwwLC4yMyk7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojdTEgYS5wZntiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Zm9udC1zaXplOjA7cGFkZGluZzoxNHB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3otaW5kZXg6MH0NCiN1MSBhLmJyaXtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMCk7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2ZvbnQtc2l6ZTowO3BhZGRpbmc6MnB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO2JvcmRlcjpub25lO21hcmdpbi10b3A6MTJweH0NCiN3cmFwcGVyIC5iZGJyaWltZ3RpdGxle3BhZGRpbmctdG9wOjIzcHh9DQojd3JhcHBlciAuYmRicmkuYmRicmlpbWcgLmJkbWFpbmxpbmsgYXtib3JkZXI6bm9uZX0NCiN3cmFwcGVyIC5iZGJyaXt6LWluZGV4OjJ9DQojd3JhcHBlciAjdV9zcCAuc19icml7cGFkZGluZzo1cHg7Ym9yZGVyLXJhZGl1czo1MCU7Zm9udC1zaXplOjA7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejROQ2p3aExTMGdSMlZ1WlhKaGRHOXlPaUJCWkc5aVpTQkpiR3gxYzNSeVlYUnZjaUF4T1M0eUxqRXNJRk5XUnlCRmVIQnZjblFnVUd4MVp5MUpiaUF1SUZOV1J5QldaWEp6YVc5dU9pQTJMakF3SUVKMWFXeGtJREFwSUNBdExUNE5Danh6ZG1jZ2RtVnljMmx2YmowaU1TNHhJaUJwWkQwaTVadSs1YkdDWHpFaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpSUhnOUlqQndlQ0lnZVQwaU1IQjRJZzBLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0RRbzhjM1I1YkdVZ2RIbHdaVDBpZEdWNGRDOWpjM01pUGcwS0NTNXpkREI3Wm1sc2JEb2pSa1pHUmtaR08zME5Dand2YzNSNWJHVStEUW84Y0dGMGFDQmpiR0Z6Y3owaWMzUXdJaUJrUFNKTk1UQXNNVE5vTTNZdE0yZ3RNMVl4TTNvZ1RURTBMalVzTWpKb00zWXRNMmd0TTBNeE5DNDFMREU1TERFMExqVXNNaklzTVRRdU5Td3lNbm9nVFRFd0xESXlhRE4yTFROb0xUTldNako2SUUweE1Dd3hOeTQxYUROMkxUTm9MVE5XTVRjdU5Yb05DZ2tnVFRFMExqVXNNVGN1TldnemRpMHphQzB6UXpFMExqVXNNVFF1TlN3eE5DNDFMREUzTGpVc01UUXVOU3d4Tnk0MWVpQk5NVGtzTVRCMk0yZ3pkaTB6U0RFNWVpQk5NVFF1TlN3eE0yZ3pkaTB6YUMwelF6RTBMalVzTVRBc01UUXVOU3d4TXl3eE5DNDFMREV6ZWlCTk1Ua3NNVGN1TldnemRpMHphQzB6RFFvSlZqRTNMalY2SUUweE9Td3lNbWd6ZGkwemFDMHpWakl5ZWlJdlBnMEtQQzl6ZG1jK0RRbz0iKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO2xpbmUtaGVpZ2h0OjA7ei1pbmRleDoxMDA7bWFyZ2luLXJpZ2h0OjIycHg7bWFyZ2luLXRvcDoxcHh9DQojdV9zcCAuc19iZGJyaWltZ3RpdGxle3BhZGRpbmctdG9wOjczcHh9DQojc191c2Vyc2V0dGluZ190b3B7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2ZvbnQtc2l6ZTowO3BhZGRpbmc6MTRweDtvcGFjaXR5Oi44Oy1tb3otdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTttYXJnaW4tdG9wOjEycHg7bWFyZ2luLXJpZ2h0OjRweDt6LWluZGV4Oi0xMDB9DQojc190b3Bfd3JhcHt6LWluZGV4Oi0xMDtib3JkZXItYm90dG9tOnVuc2V0O30NCiN1IC50b2luZGV4e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9DQojc191c2VybmFtZV90b3B7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bWFyZ2luLXRvcDoyNnB4O21hcmdpbi1sZWZ0OjVweDtib3JkZXI6bm9uZTtwYWRkaW5nLWxlZnQ6MTBweDtwYWRkaW5nLXJpZ2h0OjEwcHg7Ym9yZGVyLXJhZGl1czoxNnB4O21hcmdpbi1yaWdodDotM3B4fQ0KLnVzZXItbmFtZXt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnR9DQoubWVudS1hcnJvd3tkaXNwbGF5Om5vbmUhaW1wb3J0YW50fQ0KLnNfdXNlcl9uYW1lX21lbnV7dGV4dC1hbGlnbjpjZW50ZXIhaW1wb3J0YW50fQ0KLnMtdXNlci1zZXQtbWVudS5tZW51LXRvcHt3aWR0aDoxMDBweH0NCi5zLXVzZXItc2V0LW1lbnUgZGl2e2JvcmRlcjpub25lIWltcG9ydGFudDtib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHh9DQoucy11c2VyLXNldC1tZW51e3BhZGRpbmctdG9wOjA7bWFyZ2luLXRvcDozNnB4O2JvcmRlci1yYWRpdXM6MnB4IWltcG9ydGFudH0NCi5zLXVzZXItc2V0LW1lbnUgYXtwYWRkaW5nLWxlZnQ6MjVweDstbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2V9DQoucy11c2VyLXNldC1tZW51IGE6aG92ZXJ7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlfQ0KI3VzZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50O21hcmdpbi10b3A6MzBweDttYXJnaW4tbGVmdDo1cHg7Ym9yZGVyOm5vbmU7cGFkZGluZy1sZWZ0OjEwcHg7cGFkZGluZy1yaWdodDoxMHB4O2JvcmRlci1yYWRpdXM6MTZweDttYXJnaW4tcmlnaHQ6LTNweDtoZWlnaHQ6MjNweDtwYWRkaW5nLXRvcDo4cHg7LXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246MXM7YW5pbWF0aW9uLWR1cmF0aW9uOjFzOy13ZWJraXQtYW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO2FuaW1hdGlvbi1maWxsLW1vZGU6Ym90aDthbmltYXRpb24tbmFtZTpib3VuY2VJblJpZ2h0Oy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6Ym91bmNlSW5SaWdodH0NCi51c2VybWVudXtib3JkZXI6bm9uZSFpbXBvcnRhbnQ7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4IWltcG9ydGFudDstd2Via2l0LWJveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7d2lkdGg6ODNweDtib3JkZXItcmFkaXVzOjJweCFpbXBvcnRhbnQ7dG9wOjM1cHghaW1wb3J0YW50O21hcmdpbjogMCBhdXRvO30NCi51c2VybmFtZSBhey1tb3otdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtib3JkZXItcmFkaXVzOjJweH0NCi51c2VybmFtZSBhOmhvdmVye2JhY2tncm91bmQ6IzM0NzZkMiFpbXBvcnRhbnQ7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlfQ0KLnVzZXJuYW1lIGE6YWN0aXZle2JhY2tncm91bmQ6IzM0NzZkMiFpbXBvcnRhbnQ7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlfQ0KI3VzZXIgLmMtaWNvbntkaXNwbGF5Om5vbmV9DQojaW1zZ3tiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Zm9udC1zaXplOjA7cGFkZGluZzoxNHB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3otaW5kZXg6MDtwYWRkaW5nLXRvcDoyNXB4O3BhZGRpbmctYm90dG9tOjIxcHh9DQojaW1zZzpob3ZlcntvcGFjaXR5OjF9DQouaGVhZF93cmFwcGVyICNiZHMtbWVzc2FnZS13cmFwcGVye3RvcDo2NHB4fQ0KLnMtbW9kLW1zZ3tib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50Oy13ZWJraXQtYm94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4IWltcG9ydGFudDtib3JkZXItcmFkaXVzOjNweH0NCi5tc2ctYnRue2JvcmRlci1yYWRpdXM6MnB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQoubXNnLWJ0bjpob3Zlcntib3JkZXItcmFkaXVzOjJweDtib3gtc2hhZG93OjAgMXB4IDZweCByZ2JhKDAsMCwwLC4xMiksMCAxcHggNHB4IHJnYmEoMCwwLDAsLjEyKTt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KLm1zZy1idG46YWN0aXZle2JvcmRlci1yYWRpdXM6MnB4O2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQoubm8tdXNlOmhvdmVye2JveC1zaGFkb3c6bm9uZSFpbXBvcnRhbnR9DQoudG9wLWxvZ28gaW1ne2Rpc3BsYXk6bm9uZX0NCi50b3AtbG9nb3tiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ01UQXhJRE16SWlCemRIbHNaVDBpWlc1aFlteGxMV0poWTJ0bmNtOTFibVE2Ym1WM0lEQWdNQ0F4TURFZ016TTdJaUI0Yld3NmMzQmhZMlU5SW5CeVpYTmxjblpsSWo0S1BITjBlV3hsSUhSNWNHVTlJblJsZUhRdlkzTnpJajRLQ1M1emREQjdabWxzYkRvak5EZzNPVUpFTzMwS0NTNXpkREY3Wm1sc2JEb2pSRVEwTkRNMk8zMEtDUzV6ZERKN1ptbHNiRG9qUmtaR1JrWkdPMzBLUEM5emRIbHNaVDRLUEhCaGRHZ2dZMnhoYzNNOUluTjBNQ0lnWkQwaVRUVXdMalFzTVRVdU0yTXRNeTQ0TERBdU15MDBMREl1TmkwMUxqY3NOQzQzWXkweExqZ3NNaTR5TFRVdU5TdzBMakV0Tml3MkxqZGpMVEF1Tml3ekxqTXNNUzR6TERVdU1Td3pMRFV1TjJNeExqa3NNQzQyTERZdU1pMHdMalVzT0M0MExUQXVOV2d3TGpJS0NXZ3dMakpqTWk0eUxEQXNOaTQwTERFdU1TdzRMalFzTUM0MVl6RXVPQzB3TGpZc015NDFMVE11TWl3ekxUVXVOMk10TUM0MExUSXVNUzAwTGpRdE5DNDFMVFl1TWkwMkxqZEROVFF1TWl3eE9DdzFOQzR6TERFMUxqWXNOVEF1TkN3eE5TNHplaUJOTXpjc01UUXVPQW9KWXpBc01pNDBMREV1Tml3MExqTXNNeTQwTERRdU0yTXhMamtzTUN3ekxqUXRNUzQ1TERNdU5DMDBMak5qTUMweUxqUXRNUzQyTFRRdU15MHpMalF0TkM0elV6TTNMREV5TGpVc016Y3NNVFF1T0hvZ1RUUXpMamtzT0M0Mll6QXNNaTQxTERFdU5TdzBMalVzTXk0ekxEUXVOUW9KWXpFdU9Dd3dMRE11TXkweUxqRXNNeTR6TFRRdU5WTTBPU3cwTGpFc05EY3VNU3cwTGpGRE5EVXVNeXcwTERRekxqa3NOaXcwTXk0NUxEZ3VObm9nVFRVeUxqSXNPQzQxWXpBc01pNHpMREV1TkN3MExqTXNNeTR5TERRdU0zTXpMakl0TVM0NUxETXVNaTAwTGpOekxURXVOQzAwTGpNdE15NHlMVFF1TXdvSlV6VXlMaklzTmk0eUxEVXlMaklzT0M0MWVpQk5OVGN1TlN3eE5TNDVZekFzTWk0ekxERXVOU3cwTGpNc015NHpMRFF1TTJNeExqZ3NNQ3d6TGpNdE1TNDVMRE11TXkwMExqTnpMVEV1TlMwMExqTXRNeTR6TFRRdU0wTTFPQzQ1TERFeExqWXNOVGN1TlN3eE15NDJMRFUzTGpVc01UVXVPWG9pTHo0S1BIQmhkR2dnWTJ4aGMzTTlJbk4wTVNJZ1pEMGlUVFFzTXpBdU5IWXROUzR4YURZdU5HTXhMallzTUN3eExqWXNNQzR6TERFdU5pd3lkakV1TkdNd0xERXVOaTB5TGpNc01TNDRMVE11T1N3eExqaE1OQ3d6TUM0MFREUXNNekF1TkhvZ1RUUXNNak4yTFRRdU9HZzBMakVLQ1dNeExqWXNNQ3d6TGprc01Dd3pMamtzTWk0eGRqQXVNV013TERFdU5DMHdMalVzTWk0MkxURXVPQ3d5TGpaRE1UQXVNeXd5TXl3MExESXpMRFFzTWpONklFMHhMamNzTVRaMk1UWXVNMmcyTGpSak15d3dMRFl1TWl3d0xEWXVNaTB6TGpaMkxURXVNV013TFRFdU5pMHdMakV0TWk0M0xURXVNUzB6TGpVS0NXTXhMVEF1T0N3eExqRXRNaTR6TERFdU1TMHpMalpzTUN3d1l6QXROQzQxTFRNdU1pMDBMalV0Tmk0eUxUUXVOVXd4TGpjc01UWk1NUzQzTERFMmVpSXZQZ284Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1qVXNNamd1T1dNdE1TNHhMREV1TVMwekxqTXNNUzR6TFRNdU5Td3hMak5qTFRFdU15d3dMVEl1Tnkwd0xqVXRNaTQzTFRJdU1XTXdMVEV1TkN3d0xqVXRNaTR6TERJdU1TMHlMak5qTVM0ekxEQXNNaTQ0TERBdU1TdzBMakVzTUM0MlZqSTRMamw2Q2drZ1RUSXhMalFzTXpJdU0yTXdMalFzTUN3eUxqTXRNQzR4TERNdU55MHdMamxzTUM0eUxEQXVOMmd5TGpGMkxUZ3VPV013TFRNdU5pMHlMak10TlMwMUxqY3ROV010TVM0NExEQXROQzR6TERBdU55MDBMamNzTUM0NWJEQXVOQ3d5TGpOak1TNDJMVEF1Tml3ekxUQXVOaXcwTGpJdE1DNDJDZ2xqTVM0NExEQXNNeTR6TERBdU5pd3pMak1zTWk0MlZqSTBZeTB4TFRBdU5DMHlMalF0TUM0MkxUUXVNUzB3TGpaakxUTXNNQzAwTGpVc01TNDJMVFF1TlN3MExqZERNVFl1TkN3ek1TNDRMREU1TGpZc016SXVNeXd5TVM0MExETXlMak42SWk4K0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazB6TUM0eUxERTJMakZqTUN3d0xqWXNNQzQyTERFdU1pd3hMak1zTVM0eVl6QXVPQ3d3TERFdU15MHdMallzTVM0ekxURXVNbU13TFRBdU55MHdMall0TVM0ekxURXVNeTB4TGpORE16QXVPQ3d4TkM0NExETXdMaklzTVRVdU15d3pNQzR5TERFMkxqRjZDZ2tnVFRNd0xqTXNNekl1TVdneUxqUldNVGd1TldndE1pNDBWak15TGpGNklpOCtDanh3WVhSb0lHTnNZWE56UFNKemRERWlJR1E5SWswM01TNHlMREl5TGpGb09DNDBZekF1TkN3d0xqRXNNQzQyTERBdU15d3dMallzTUM0M2RqSXVObWd0T1M0M2RpMHlMalpETnpBdU5pd3lNaTQwTERjd0xqZ3NNakl1TWl3M01TNHlMREl5TGpGNklFMDNNUzR5TERNd0xqVUtDV010TUM0MExEQXRNQzQyTFRBdU15MHdMamN0TUM0NGRpMHlMalpvT1M0M2RqSXVObU13TERBdU5DMHdMaklzTUM0M0xUQXVOaXd3TGpkSU56RXVNbm9nVFRjekxqWXNNVGhqTFRBdU1Td3dMalF0TUM0eExEQXVPUzB3TGpRc01TNDNZeTB3TGpFc01DNHpMVEF1TVN3d0xqVXRNQzR4TERBdU53b0phQzB5TGpaakxURXVNeXd3TGpFdE1TNDVMREF1T0MweUxESjJOeTQ1WXpBdU1Td3hMakVzTUM0NExERXVPQ3d5TERFdU9XZ3hNR014TGpJdE1DNHhMREV1T0Mwd0xqY3NNUzQ1TFRFdU9IWXROeTQ1WXkwd0xqRXRNUzR6TFRBdU55MHhMamt0TVM0NUxUSXVNV2d0TlFvSll6QXVNUzB3TGpNc01DNHhMVEF1T0N3d0xqTXRNUzQwWXpBdU1TMHdMalFzTUM0eExUQXVOeXd3TGpFdE1DNDVhRGN1TW5ZdE1TNDRTRFkzTGpSV01UaE1Oek11Tml3eE9FdzNNeTQyTERFNGVpSXZQZ284Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk9UTXVOeXd5TWk0M1l5MHdMalF0TUM0eExUQXVOUzB3TGpJdE1DNDFMVEF1TlhZdE1DNDJhRE11TW5Zd0xqWmpMVEF1TVN3d0xqTXRNQzR5TERBdU5DMHdMalVzTUM0MVNEa3pMamQ2SUUwNU5pNDJMREkwTGpFS0NXTXhMakV0TUM0eExERXVOaTB3TGpVc01TNDJMVEV1TkhZdE1XZ3lMak4yTFRFdU5XZ3RNaTR6ZGkweExqRm9MVEV1T0hZeExqRm9MVE11TW5ZdE1TNHhhQzB4TGpoMk1TNHhhQzB5TGpOMk1TNDFhREl1TTNZeFl6QXVNU3d3TGprc01DNDJMREV1TkN3eExqWXNNUzQwU0RrMkxqWjZDZ2tnVFRrMExqZ3NNekF1TkdNeExqWXNNQzQ0TERNdU5Dd3hMak1zTlM0MExERXVPR3d3TGprdE1TNDNZeTB4TGpRdE1DNHlMVEl1T1Mwd0xqWXROQzQwTFRFdU1XTXhMakV0TUM0NExESXRNUzQyTERJdU55MHlMalZqTUM0ekxUQXVOQ3d3TGpRdE1DNDVMREF1TWkweExqTUtDV010TUM0ekxUQXVOaTB3TGpndE1DNDVMVEV1TkMwd0xqbG9MVGwyTVM0MWFEY3VOMk13TGpJc01Dd3dMalFzTUM0eExEQXVOQ3d3TGpGek1Dd3dMakV0TUM0eExEQXVNMk10TUM0MkxEQXVOaTB4TGpRc01TNHpMVEl1TXl3eExqaGpMVEV1TWkwd0xqY3RNaTR4TFRFdU15MHlMalF0TVM0NGFDMHlMaklLQ1dNd0xqa3NNU3d4TGpnc01TNDVMREl1T1N3eUxqZGpMVEV1Tml3d0xqWXRNeTR6TERFdU1TMDBMamtzTVM0emJEQXVPU3d4TGpaRE9URXVNeXd6TVM0NExEa3pMaklzTXpFdU1TdzVOQzQ0TERNd0xqUjZJRTA0T0M0ekxESTFMakoyTFRaak1DNHhMVEF1Tml3d0xqTXRNQzQ1TERBdU9DMHdMamtLQ1dneE1TNDRkaTB4TGpaSU9UVmpMVEF1TVMwd0xqRXRNaTR5TFRBdU1TMHlMaklzTUdndE5DNDNZeTB4TGpFc01DNHhMVEV1Tnl3d0xqa3RNUzQ0TERJdU1sWXlOV013TGpFc01pNHhMVEF1TkN3MExqUXRNUzR4TERZdU4yd3hMamtzTUM0MkNnbERPRGN1T1N3eU9TNDVMRGc0TGpNc01qY3VOaXc0T0M0ekxESTFMako2SWk4K0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERJaUlHUTlJazAwTmk0ekxESTBMakpqTUM0MkxEQXNNUzR5TERBdU1Td3hMamNzTUM0MGRqTXVOR013TERBdU15MHdMallzTVMweExqa3NNV010TVM0MUxEQXRNUzQ0TFRBdU5pMHhMamd0TWk0eGRpMHdMallLQ1VNME5DNHlMREkwTGpnc05EUXVOeXd5TkM0eUxEUTJMak1zTWpRdU1ub2dUVFE1TGpJc01qQXVOMGcwT0hZeUxqVkRORGN1Tml3eU15NHhMRFEzTERJekxEUTJMak1zTWpOakxUSXVOeXd3TFRNdU15d3hMVE11TXl3ekxqVjJNQzR6WXpBc01pNDBMREF1T1N3ekxqTXNNeTR5TERNdU13b0pZekF1T0N3d0xERXVNeTB3TGpFc01TNDRMVEF1Tld3d0xqRXNNQzQyYURFdU1VdzBPUzR5TERJd0xqZE1ORGt1TWl3eU1DNDNlaUl2UGdvOGNHRjBhQ0JqYkdGemN6MGljM1F5SWlCa1BTSk5OVFl1Tnl3eU0yZ3RNUzR5ZGpVdU1tTXRNQzQyTERBdU5DMHhMamNzTUM0MkxUSXVOQ3d3TGpaakxUQXVPQ3d3TFRFdE1DNDBMVEV0TVM0emRpMDBMalpvTFRFdU1YWTBMamhqTUN3eExqWXNNQzQxTERJdU15d3lMakVzTWk0ekNnbGpNU3d3TERJdU1TMHdMak1zTWk0MkxUQXVObXd3TGpFc01DNDJhREV1TVZZeU0zb2lMejRLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUa3lMamNzTVRVdU4yTXdMVEF1Tnl3d0xqWXRNUzR6TERFdU1pMHhMak5qTUM0MkxEQXNNUzR5TERBdU5pd3hMaklzTVM0elV6azBMalVzTVRjc09UTXVPU3d4TjBNNU15NHpMREUyTGprc09USXVOeXd4Tmk0ekxEa3lMamNzTVRVdU4zb2lMejRLUEM5emRtYytDZz09Iik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2hlaWdodDoxMDBweDt3aWR0aDoyMDBweH0NCiN1X3NwIC5zX2JyaXtib3JkZXI6MCFpbXBvcnRhbnR9DQoucGFzcy10ZXh0LWlucHV0e2JhY2tncm91bmQtaW1hZ2U6bm9uZSFpbXBvcnRhbnR9DQoucGFzcy10ZXh0LWlucHV0LWZvY3Vze2JhY2tncm91bmQtaW1hZ2U6bm9uZSFpbXBvcnRhbnR9DQojcGFzc3BvcnQtbG9naW4tcG9we2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0sIkhlbHZldGljYSBOZXVlIixIZWx2ZXRpY2EsIk5pbWJ1cyBTYW5zIEwiLEFyaWFsLCJMaWJlcmF0aW9uIFNhbnMiLCJQaW5nRmFuZyBTQyIsIkhpcmFnaW5vIFNhbnMgR0IiLCJTb3VyY2UgSGFuIFNhbnMgQ04iLCJTb3VyY2UgSGFuIFNhbnMgU0MiLCJNaWNyb3NvZnQgWWFIZWkiLCJXZW5xdWFueWkgTWljcm8gSGVpIiwiV2VuUXVhbllpIFplbiBIZWkiLCJTVCBIZWl0aSIsU2ltSGVpLCJXZW5RdWFuWWkgWmVuIEhlaSBTaGFycCIsc2Fucy1zZXJpZjtib3JkZXItcmFkaXVzOjJweH0NCiNUQU5HUkFNX19QU1BfMl9fdGl0bGVUZXh0e2ZvbnQtZmFtaWx5OkhlbHZldGljYSwiTWljcm9zb2Z0IFlhaGVpIFVJIExpZ2h0In0NCi5wYXNzLWZndHB3ZHtmb250LWZhbWlseTpIZWx2ZXRpY2EsIk1pY3Jvc29mdCBZYWhlaSBVSSIhaW1wb3J0YW50fQ0KLnBhc3Mtc21zLWJ0bntmb250LWZhbWlseTpIZWx2ZXRpY2EsIk1pY3Jvc29mdCBZYWhlaSBVSSIhaW1wb3J0YW50fQ0KLnBhc3MtcmVnbGlua3tmb250LWZhbWlseTpIZWx2ZXRpY2EsIk1pY3Jvc29mdCBZYWhlaSBVSSIhaW1wb3J0YW50fQ0KLnRhbmctZm9yZWdyb3VuZHtib3JkZXItcmFkaXVzOjJweCFpbXBvcnRhbnQ7Ym9yZGVyOjAhaW1wb3J0YW50fQ0KLnRhbmctdGl0bGV7Ym9yZGVyLXJhZGl1czoycHggMnB4IDAgMCFpbXBvcnRhbnR9DQoudGFuZy1wYXNzLXBvcC1sb2dpbiBkaXYudGFuZy10aXRsZXtib3JkZXItcmFkaXVzOjJweCAycHggMCAwIWltcG9ydGFudH0NCi5wYXNzLWNoZWNrYm94LWlucHV0e3dpZHRoOjE3cHg7aGVpZ2h0OjE3cHg7Ym9yZGVyOiNlMGUwZTAgM3B4IHNvbGlkIWltcG9ydGFudDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmYhaW1wb3J0YW50O2JveC1zaGFkb3c6bm9uZX0NCi50YW5nLXBhc3MtcG9wLWxvZ2luLWNvbG9yLWJsdWUgLnBhc3MtYnV0dG9uOmZvY3Vze2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50fQ0KLnJyZWNvbS1idG4tcGFyZW50e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9DQoucy1wLXRvcHtib3R0b206LThweCFpbXBvcnRhbnR9DQppbnB1dFt0eXBlPXRleHRdOmZvY3Vze2JvcmRlcjpub25lIWltcG9ydGFudDtib3JkZXItdG9wOjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLWJvdHRvbTowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1sZWZ0OjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLXJpZ2h0OjAgc29saWQgI2ZmZiFpbXBvcnRhbnR9DQphW3NvZnRfaWRde2Rpc3BsYXk6bm9uZX0NCi5vcC1zb2Z0LWJ0bmJveCAuYy1nYXAtbGVmdC1zbWFsbHttYXJnaW4tbGVmdDowIWltcG9ydGFudDtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzM0NzZkMjtwYWRkaW5nOjdweCAxNXB4O2JvcmRlci1yYWRpdXM6MnB4O2ZvbnQtc2l6ZToxNHB4O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlfQ0KLm9wLXNvZnQtYnRuYm94IC5jLWdhcC1sZWZ0LXNtYWxsOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzcwOThEMDt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpfQ0KLnNvdXR1LWlucHV0LWltYWdle3RvcDo2cHg7bGVmdDo1cHh9DQoja3d7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0NCi5zLXNraW4taGFzYmcgI2t3e2JveC1zaGFkb3c6MCAwIDAgcmdiYSgwLDAsMCwuMil9DQoucy1za2luLWhhc2JnIC5idG5fd3J7d2lkdGg6MzVweH0NCiNzX3VzZXJzZXR0aW5nX3RvcHttYXJnaW4tdG9wOi03cHh9DQojc191c2VybmFtZV90b3B7bWFyZ2luLXRvcDo3cHh9DQojdV9zcHtwYWRkaW5nLXRvcDoxNnB4fQ0KLmlwdF9yZWN7YmFja2dyb3VuZDowIDA7YmFja2dyb3VuZC1pbWFnZTpub25lfQ0KLmlwdF9yZWM6aG92ZXJ7YmFja2dyb3VuZDowIDA7YmFja2dyb3VuZC1pbWFnZTpub25lfQ0KLmlwdF9yZWM6YWZ0ZXJ7ZGlzcGxheTpub25lO21hcmdpbi10b3A6NTBweH0NCi5iZHBmbWVudSwudXNlcm1lbnV7Ym9yZGVyOm5vbmU7Ym94LXNoYWRvdzpub25lOy13ZWJraXQtYm94LXNoYWRvdzpub25lOy1tb3otYm94LXNoYWRvdzpub25lOy1vLWJveC1zaGFkb3c6bm9uZX0NCi5xcmNvZGVDb257dmlzaWJpbGl0eTpoaWRkZW59DQojaGVhZCAuaGVhZEJsb2Nre21hcmdpbjoxMnB4IDAgNnB4IDEyMXB4fQ0KYXtjb2xvcjojMzQ3NmQyfQ0KaDMgYTpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMS4ycHggc29saWR9DQouYy1zaG93dXJse2NvbG9yOiM0Q0FGNTB9DQoub3Atc2UtbGlzdGVuLXJlY29tbWVuZDpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMS4ycHggc29saWR9DQouYy1nYXAtYm90dG9tLXNtYWxsIGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDEuMnB4IHNvbGlkfQ0KLmMtcm93IGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDEuMnB4IHNvbGlkfQ0KI3JzIGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDEuMnB4IHNvbGlkfQ0KLmhpbnRfdG9wcnFfdGlwc19pdGVtcyBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxLjJweCBzb2xpZH0NCi5jOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxLjJweCBzb2xpZH0NCmVte2NvbG9yOiNFQTQzMzV9DQoub3AtdmlkZW8tdmFzdC11bCBsaSBhe21hcmdpbi1ib3R0b206IHVuc2V0O30NCmJvZHl7YmFja2dyb3VuZC1jb2xvcjojRjdGN0Y3fQ0KI2Zvcm0gLnNfYnRue2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwwKX0NCiN3cmFwcGVyICNoZWFkIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI0OCwgMjQ4LCAyNDgsIDAuNCk7DQogICAgYm9yZGVyLWJvdHRvbTogbm9uZTsNCiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCkNCn0NCi5jLXRhYnMtbmF2e2JhY2tncm91bmQtY29sb3I6I0VFRX0NCi5jLXRhYnMtbmF2LXNlbGVjdGVke2JvcmRlci1ib3R0b206I0Y0NDMzNiAycHggc29saWQhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6IzIxOTZGMyFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiFpbXBvcnRhbnR9DQojcGFnZSBhe2JhY2tncm91bmQ6I2ZmZjtjb2xvcjojNDI0MjQyfQ0KI3BhZ2UgYTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlMGUwZTAhaW1wb3J0YW50fQ0KI3BhZ2UgYSAucGM6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZTBlMGUwfQ0KI3BhZ2Ugc3Ryb25ne2JhY2tncm91bmQtY29sb3I6IzQyODVGNCFpbXBvcnRhbnQ7Y29sb3I6I2ZmZn0NCiNwYWdlIHN0cm9uZyAucGN7YmFja2dyb3VuZC1jb2xvcjojNDI4NUY0IWltcG9ydGFudH0NCi5wYzpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlMGUwZTB9DQojc190YWIgYntib3JkZXItYm90dG9tOjNweCAjMzQ3NmQyIHNvbGlkO2NvbG9yOiMzNDc2ZDJ9DQojc190YWJ7Ym9yZGVyLWJvdHRvbTojZTBlMGUwIDFweCBzb2xpZH0NCi5iZHBmbWVudSBhOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzM0NzZkMiFpbXBvcnRhbnR9DQouc2V0cHJlZjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMzNDc2ZDIhaW1wb3J0YW50fQ0KI3UgLmxie2JhY2tncm91bmQtY29sb3I6IzM0NzZkMn0NCiN1IC5sYjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM2MThDQzd9DQojdSAubGI6YWN0aXZle2JhY2tncm91bmQtY29sb3I6IzdEQTBEMH0NCiNiZ3tiYWNrZ3JvdW5kLWNvbG9yOiNGRkYhaW1wb3J0YW50O2JhY2tncm91bmQ6I0ZGRn0NCiN1MSBhLmxie2JhY2tncm91bmQtY29sb3I6IzM0NzZkMn0NCiN1MSBhLmxiOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzYxOENDN30NCiN1MSBhLmxiOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiM3REEwRDB9DQojdV9zcCAuc19icml7YmFja2dyb3VuZC1jb2xvcjojRjQ0MzM2fQ0KI3NfdXNlcm5hbWVfdG9we2JhY2tncm91bmQtY29sb3I6I2UwZTBlMH0NCi5zLXVzZXItc2V0LW1lbnUgYTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMzNDc2ZDIhaW1wb3J0YW50fQ0KI3VzZXJ7YmFja2dyb3VuZC1jb2xvcjojZTBlMGUwfQ0KLm1zZy1zZXR0aW5nLWJ0bntiYWNrZ3JvdW5kLWNvbG9yOiMzNDc2ZDIhaW1wb3J0YW50fQ0KLm5vLXVzZXtiYWNrZ3JvdW5kLWNvbG9yOiNFNUU1RTUhaW1wb3J0YW50fQ0KLnBhc3MtdGV4dC1pbnB1dHtib3JkZXItYm90dG9tOiNlMGUwZTAgMnB4IHNvbGlkIWltcG9ydGFudDtib3JkZXItbGVmdDojZmZmIDAgc29saWQhaW1wb3J0YW50O2JvcmRlci1yaWdodDojZmZmIDAgc29saWQhaW1wb3J0YW50O2JvcmRlci10b3A6I2ZmZiAwIHNvbGlkIWltcG9ydGFudH0NCi5wYXNzLXRleHQtaW5wdXQtZm9jdXN7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDJweCBzb2xpZCFpbXBvcnRhbnQ7Ym9yZGVyLWxlZnQ6I2ZmZiAwIHNvbGlkIWltcG9ydGFudDtib3JkZXItcmlnaHQ6I2ZmZiAwIHNvbGlkIWltcG9ydGFudDtib3JkZXItdG9wOiNmZmYgMCBzb2xpZCFpbXBvcnRhbnR9DQoudGFuZy1wYXNzLXBvcC1sb2dpbi1jb2xvci1ibHVlIC5wYXNzLWJ1dHRvbntiYWNrZ3JvdW5kLWNvbG9yOiMzNDc2ZDJ9DQoudGFuZy1wYXNzLXBvcC1sb2dpbi1jb2xvci1ibHVlIC5wYXNzLWJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM2MThDQzd9DQojbGd7bWFyZ2luLWxlZnQ6LTNyZW07YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0TkNqd2hMUzBnUjJWdVpYSmhkRzl5T2lCQlpHOWlaU0JKYkd4MWMzUnlZWFJ2Y2lBeE9TNHlMakVzSUZOV1J5QkZlSEJ2Y25RZ1VHeDFaeTFKYmlBdUlGTldSeUJXWlhKemFXOXVPaUEyTGpBd0lFSjFhV3hrSURBcElDQXRMVDROQ2p4emRtY2dkbVZ5YzJsdmJqMGlNUzR4SWlCcFpEMGk1YkdDWHpFaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpSUhnOUlqQndlQ0lnZVQwaU1IQjRJZzBLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNalU1SURFeE5pSWdjM1I1YkdVOUltVnVZV0pzWlMxaVlXTnJaM0p2ZFc1a09tNWxkeUF3SURBZ01qVTVJREV4TmpzaUlIaHRiRHB6Y0dGalpUMGljSEpsYzJWeWRtVWlQZzBLUEhOMGVXeGxJSFI1Y0dVOUluUmxlSFF2WTNOeklqNE5DZ2t1YzNRd2UyWnBiR3c2SXpReU9EVkdORHQ5RFFvSkxuTjBNWHRtYVd4c09pTkZRVFF6TXpVN2ZRMEtDUzV6ZERKN1ptbHNiRG9qUmtaR1JrWkdPMzBOQ2p3dmMzUjViR1UrRFFvOGNHRjBhQ0JqYkdGemN6MGljM1F3SWlCa1BTSk5NVEk0TGpJc056ZGpMVFV1TkN3d0xqUXROUzQyTERNdU55MDRMakVzTmk0M1l5MHlMalVzTXk0eExUY3VOeXcxTGpndE9DNDBMRGt1TldNdE1DNDRMRFF1Tnl3eExqZ3NOeTR5TERRdU15dzRZekl1Tnl3d0xqa3NPQzQ0TFRBdU55d3hNUzQ1TFRBdU53MEtDV2d3TGpOb01DNHpZek11TVN3d0xEa3VNU3d4TGpZc01URXVPU3d3TGpkak1pNDFMVEF1T1N3MExqa3ROQzQxTERRdU15MDRZeTB3TGpVdE15MDJMakl0Tmk0MExUZ3VOeTA1TGpWRE1UTXpMallzT0RBdU55d3hNek11Tnl3M055NDBMREV5T0M0eUxEYzNlaUJOTVRBNUxqTXNOell1TXcwS0NXTXdMRE11TkN3eUxqSXNOaTR4TERRdU9DdzJMakZqTWk0M0xEQXNOQzQ0TFRJdU55dzBMamd0Tmk0eGN5MHlMakl0Tmk0eExUUXVPQzAyTGpGVE1UQTVMak1zTnpNc01UQTVMak1zTnpZdU0zb2dUVEV4T1N3Mk55NDFZekFzTXk0MUxESXVNU3cyTGpRc05DNDJMRFl1TkEwS0NXTXlMallzTUN3MExqY3RNaTQ1TERRdU55MDJMalJ6TFRJdU1TMDJMalF0TkM0M0xUWXVORU14TWpFc05qRXNNVEU1TERZekxqa3NNVEU1TERZM0xqVjZJRTB4TXpBdU55dzJOeTQwWXpBc015NHpMRElzTml3MExqVXNObk0wTGpVdE1pNDNMRFF1TlMwMll6QXRNeTR6TFRJdE5pMDBMalV0TmcwS0NWTXhNekF1Tnl3Mk5DNHhMREV6TUM0M0xEWTNMalI2SUUweE16Z3VNaXczTnk0NFl6QXNNeTR6TERJdU1TdzJMRFF1Tml3Mll6SXVOaXd3TERRdU55MHlMamNzTkM0M0xUWmpNQzB6TGpNdE1pNHhMVFl0TkM0M0xUWkRNVFF3TGpJc056RXVPQ3d4TXpndU1pdzNOQzQxTERFek9DNHlMRGMzTGpoNklnMEtDUzgrRFFvOGNHRjBhQ0JqYkdGemN6MGljM1F4SWlCa1BTSk5Oakl1T0N3NU9DNHlWamt4YURsak1pNHlMREFzTWk0ekxEQXVOQ3d5TGpNc01pNDRkakpqTUN3eUxqTXRNeTR5TERJdU5TMDFMalVzTWk0MWFDMDFMamhXT1RndU1ub2dUVFl5TGpnc09EY3VPRlk0TVdnMUxqZ05DZ2xqTWk0ekxEQXNOUzQxTERBc05TNDFMRE4yTUM0eFl6QXNNaTB3TGpjc015NDNMVEl1TlN3ekxqZEROekV1Tml3NE55NDRMRFl5TGpnc09EY3VPQ3cyTWk0NExEZzNMamg2SUUwMU9TNDFMRGMzTGpsMk1qTm9PUzR4WXpRdU15d3dMRGd1Tnl3d0xEZ3VOeTAxTGpGMkxURXVOUTBLQ1dNd0xUSXVNeTB3TGpJdE15NDRMVEV1TlMwMExqbGpNUzQwTFRFdU1Td3hMalV0TXk0eUxERXVOUzAxTGpGc01Dd3dZekF0Tmk0ekxUUXVOUzAyTGpNdE9DNDNMVFl1TTB3MU9TNDFMRGMzTGpsTU5Ua3VOU3czTnk0NWVpSXZQZzBLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUa3lMalFzT1RZdU1XTXRNUzQxTERFdU5pMDBMallzTVM0NExUUXVPU3d4TGpoakxURXVPU3d3TFRNdU9DMHdMamN0TXk0NExUSXVPV013TFRJc01DNDNMVE11TXl3eUxqa3RNeTR6WXpFdU9Dd3dMRFFzTUM0eUxEVXVPQ3d3TGpoV09UWXVNWG9OQ2drZ1RUZzNMak1zTVRBd0xqbGpNQzQxTERBc015NHpMVEF1TWl3MUxqSXRNUzR6YkRBdU15d3hhREl1T1ZZNE9HTXdMVFV1TVMwekxqSXROeTR4TFRndE55NHhZeTB5TGpVc01DMDJMakVzTVMwMkxqWXNNUzR5YkRBdU5pd3pMakpqTWk0eUxUQXVPQ3cwTGpJdE1DNDVMRFV1T1Mwd0xqa05DZ2xqTWk0MkxEQXNOQzQyTERBdU9TdzBMallzTXk0M2RqRXVNV010TVM0MExUQXVOUzB6TGpRdE1DNDVMVFV1T0Mwd0xqbGpMVFF1TWl3d0xUWXVNeXd5TGpNdE5pNHpMRFl1TmtNNE1DNHpMREV3TUM0ekxEZzBMamNzTVRBd0xqa3NPRGN1TXl3eE1EQXVPWG9pTHo0TkNqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazA1T1M0M0xEYzRMakZqTUN3d0xqa3NNQzQ1TERFdU55d3hMamdzTVM0M1l6RXVNU3d3TERFdU9TMHdMamdzTVM0NUxURXVOMk13TFRFdE1DNDRMVEV1T0MweExqa3RNUzQ0UXpFd01DNDJMRGMyTGpNc09Ua3VOeXczTnl3NU9TNDNMRGM0TGpGNkRRb0pJRTA1T1M0NUxERXdNQzQyYURNdU5GWTRNUzQxYUMwekxqUldNVEF3TGpaNklpOCtEUW84Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1UVTNMallzT0RZdU5tZ3hNUzQ0WXpBdU5Td3dMakVzTUM0NExEQXVOQ3d3TGprc01YWXpMalpvTFRFekxqZDJMVE11TmtNeE5UWXVOeXc0Tnl3eE5UY3NPRFl1Tnl3eE5UY3VOaXc0Tmk0MmVpQk5NVFUzTGpZc09UZ3VOQTBLQ1dNdE1DNDJMREF0TUM0NUxUQXVOQzB4TFRFdU1YWXRNeTQyYURFekxqZDJNeTQzWXpBc01DNDJMVEF1TXl3eExUQXVPU3d4U0RFMU55NDJlaUJOTVRZd0xqa3NPREF1TjJNdE1DNHhMREF1TlMwd0xqSXNNUzR6TFRBdU5Td3lMalJqTFRBdU1Td3dMalF0TUM0eExEQXVOeTB3TGpJc01XZ3RNeTQzRFFvSll5MHhMamdzTUM0eExUSXVOeXd4TGpFdE1pNDRMREl1T0ZZNU9HTXdMakVzTVM0MkxERXVNU3d5TGpVc01pNDRMREl1TjJneE5DNHhZekV1Tnkwd0xqRXNNaTQyTFRFc01pNDNMVEl1TlZZNE4yTXRNQzR4TFRFdU9DMHhMVEl1TnkweUxqY3RNaTQ1YUMwM0RRb0pZekF1TVMwd0xqUXNNQzR5TFRFdU1Td3dMalF0TW1Nd0xqRXRNQzQyTERBdU1TMHhMREF1TWkweExqTm9NVEF1TW5ZdE1pNDJhQzB5TWk0eWRqSXVOa3d4TmpBdU9TdzRNQzQzVERFMk1DNDVMRGd3TGpkNklpOCtEUW84Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1UZzVMalFzT0RjdU5HTXRNQzQxTFRBdU1TMHdMamN0TUM0ekxUQXVOeTB3TGpkMkxUQXVPV2cwTGpWMk1DNDVZeTB3TGpFc01DNDBMVEF1TXl3d0xqWXRNQzQzTERBdU4wZ3hPRGt1TkhvZ1RURTVNeTQwTERnNUxqUU5DZ2xqTVM0MUxUQXVNU3d5TGpJdE1DNDNMREl1TXkweVZqZzJhRE11TW5ZdE1pNHhhQzB6TGpKMkxURXVObWd0TWk0MWRqRXVObWd0TkM0MWRpMHhMalpvTFRJdU5uWXhMalpvTFRNdU1sWTRObWd6TGpKMk1TNDBZekF1TVN3eExqTXNNQzQ0TERJc01pNHlMREpJTVRrekxqUjZJRTB4T1RBdU9TdzVPQzR6RFFvSll6SXVNeXd4TGpFc05DNDRMREV1T1N3M0xqWXNNaTQyYkRFdU1pMHlMalJqTFRJdE1DNHpMVFF1TVMwd0xqZ3ROaTR5TFRFdU5tTXhMalV0TVM0eExESXVPQzB5TGpJc015NDRMVE11TldNd0xqUXRNQzQyTERBdU5TMHhMaklzTUM0ekxURXVPV010TUM0MExUQXVPQzB4TGpFdE1TNHlMVEl0TVM0eURRb0phQzB4TWk0M2RqSXVNV2d4TUM0NFl6QXVNeXd3TERBdU5Td3dMakVzTUM0MkxEQXVNbk13TERBdU1pMHdMaklzTUM0MFl5MHdMamtzTUM0NUxUSXNNUzQ0TFRNdU15d3lMalpqTFRFdU55MHhMVEl1T1MweExqa3RNeTQwTFRJdU5tZ3RNeTR4WXpFdU1pd3hMalFzTWk0MkxESXVOeXcwTGpFc015NDREUW9KWXkweUxqTXNNQzQ1TFRRdU5pd3hMalV0Tmk0NUxERXVPR3d4TGpNc01pNHlRekU0TlM0NUxERXdNQzR5TERFNE9DNDJMRGs1TGpNc01Ua3dMamtzT1RndU0zb2dUVEU0TVM0M0xEa3dMamwyTFRndU5XTXdMakV0TUM0NExEQXVOQzB4TGpJc01TNHhMVEV1TTJneE5pNDNkaTB5TGpOb0xUZ3VNdzBLQ1dNdE1DNHhMVEF1TWkwekxqRXRNQzR4TFRNdU1Td3dhQzAyTGpkakxURXVOU3d3TGpJdE1pNDBMREV1TXkweUxqVXNNeTR4ZGpndU4yTXdMakVzTXkwd0xqVXNOaTR5TFRFdU5pdzVMalJzTWk0M0xEQXVPRU14T0RFdU1TdzVOeTQyTERFNE1TNDNMRGswTGpNc01UZ3hMamNzT1RBdU9Yb2lMejROQ2p4d1lYUm9JR05zWVhOelBTSnpkRElpSUdROUlrMHhNakl1TlN3NE9TNDFZekF1T0N3d0xERXVOeXd3TGpJc01pNDBMREF1TlhZMExqaGpNQ3d3TGpRdE1DNDVMREV1TkMweUxqY3NNUzQwWXkweUxqRXNNQzB5TGpZdE1DNDVMVEl1TmkweUxqbDJMVEF1T0EwS0NVTXhNVGt1TlN3NU1DNDBMREV5TUM0eUxEZzVMalVzTVRJeUxqVXNPRGt1TlhvZ1RURXlOaTQyTERnMExqWm9MVEV1TjNZekxqVmpMVEF1Tmkwd0xqSXRNUzQxTFRBdU15MHlMalF0TUM0ell5MHpMamdzTUMwMExqWXNNUzQwTFRRdU5pdzBMamwyTUM0MERRb0pZekFzTXk0MExERXVNeXcwTGpZc05DNDFMRFF1Tm1NeExqRXNNQ3d4TGprdE1DNHlMREl1Tmkwd0xqZHNNQzR5TERBdU9HZ3hMalZNTVRJMkxqWXNPRFF1Tmt3eE1qWXVOaXc0TkM0MmVpSXZQZzBLUEhCaGRHZ2dZMnhoYzNNOUluTjBNaUlnWkQwaVRURXpOeTR4TERnM0xqaG9MVEV1TjNZM0xqUmpMVEF1T1N3d0xqVXRNaTQwTERBdU9DMHpMalFzTUM0NFl5MHhMakVzTUMweExqUXRNQzQyTFRFdU5DMHhMamwyTFRZdU5VZ3hNamwyTmk0NFl6QXNNaTR6TERBdU55d3pMaklzTWk0NUxETXVNZzBLQ1dNeExqUXNNQ3d5TGprdE1DNDBMRE11Tmkwd0xqaHNNQzR4TERBdU9HZ3hMalZXT0RjdU9Ib2lMejROQ2p4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMHhPRGN1T1N3M055NDFZekF0TVN3d0xqZ3RNUzQ0TERFdU55MHhMamh6TVM0M0xEQXVPQ3d4TGpjc01TNDRjeTB3TGpnc01TNDRMVEV1Tnl3eExqaERNVGc0TGpjc056a3VNaXd4T0RjdU9TdzNPQzQwTERFNE55NDVMRGMzTGpWNklpOCtEUW84TDNOMlp6NE5DZz09Iil9DQojZm9ybSAuc19idG57YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6UTNOemxDUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB4TkM0NExESXhMalZqTFRBdU5Dd3dMVEF1Tnl3d0xURXVNUzB3TGpGakxUSXVNUzB3TGpNdE15NDVMVEV1TkMwMUxqSXRNMk10TVM0ekxURXVOeTB4TGpndE15NDNMVEV1TmkwMUxqaGpNQzR6TFRJdU1Td3hMalF0TXk0NUxETXROUzR5Q2dsak1TNDNMVEV1TXl3ekxqZ3RNUzQ0TERVdU9DMHhMalpqTWk0eExEQXVNeXd6TGprc01TNDBMRFV1TWl3ell6RXVNeXd4TGpjc01TNDRMRE11T0N3eExqWXNOUzQ0WXkwd0xqTXNNaTR4TFRFdU5Dd3pMamt0TXl3MUxqSkRNVGd1TWl3eU1Td3hOaTQxTERJeExqVXNNVFF1T0N3eU1TNDFlZ29KSUUweE5DNDRMRGd1TVdNdE1TNHlMREF0TWk0MExEQXVOQzB6TGpNc01TNHhZeTB5TGpRc01TNDRMVEl1T1N3MUxqTXRNU3czTGpkak1TNDRMREl1TkN3MUxqTXNNaTQ1TERjdU55d3hZekV1TWkwd0xqa3NNUzQ1TFRJdU1pd3lMakV0TXk0Mll6QXVNaTB4TGpVdE1DNHlMVEl1T1MweExqRXROQzR4Q2dsVE1UY3NPQzQwTERFMUxqVXNPQzR5UXpFMUxqTXNPQzR5TERFMUxEZ3VNU3d4TkM0NExEZ3VNWG9pTHo0S1BHYytDZ2s4Wno0S0NRazhjR0YwYUNCamJHRnpjejBpYzNRd0lpQmtQU0pOTWpVdU15d3lOeTQxVERJMUxqTXNNamN1TldNdE1DNDJMREF1TkMweExqUXNNQzR6TFRFdU9DMHdMakpzTFRVdU1TMDJMamRqTFRBdU5DMHdMall0TUM0ekxURXVOQ3d3TGpJdE1TNDRiREFzTUFvSkNRbGpNQzQyTFRBdU5Dd3hMalF0TUM0ekxERXVPQ3d3TGpKc05TNHhMRFl1TjBNeU5pd3lOaTR6TERJMUxqa3NNamN1TVN3eU5TNHpMREkzTGpWNklpOCtDZ2s4TDJjK0Nqd3ZaejRLUEM5emRtYytDZz09IikhaW1wb3J0YW50fQ0KI2Zvcm0gLnNfYnRuX3dye2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTXpJZ016SWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lETXlJRE15T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStDanh6ZEhsc1pTQjBlWEJsUFNKMFpYaDBMMk56Y3lJK0Nna3VjM1F3ZTJacGJHdzZJelEzTnpsQ1JEdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWsweE5DNDRMREl4TGpWakxUQXVOQ3d3TFRBdU55d3dMVEV1TVMwd0xqRmpMVEl1TVMwd0xqTXRNeTQ1TFRFdU5DMDFMakl0TTJNdE1TNHpMVEV1TnkweExqZ3RNeTQzTFRFdU5pMDFMamhqTUM0ekxUSXVNU3d4TGpRdE15NDVMRE10TlM0eUNnbGpNUzQzTFRFdU15d3pMamd0TVM0NExEVXVPQzB4TGpaak1pNHhMREF1TXl3ekxqa3NNUzQwTERVdU1pd3pZekV1TXl3eExqY3NNUzQ0TERNdU9Dd3hMallzTlM0NFl5MHdMak1zTWk0eExURXVOQ3d6TGprdE15dzFMakpETVRndU1pd3lNU3d4Tmk0MUxESXhMalVzTVRRdU9Dd3lNUzQxZWdvSklFMHhOQzQ0TERndU1XTXRNUzR5TERBdE1pNDBMREF1TkMwekxqTXNNUzR4WXkweUxqUXNNUzQ0TFRJdU9TdzFMak10TVN3M0xqZGpNUzQ0TERJdU5DdzFMak1zTWk0NUxEY3VOeXd4WXpFdU1pMHdMamtzTVM0NUxUSXVNaXd5TGpFdE15NDJZekF1TWkweExqVXRNQzR5TFRJdU9TMHhMakV0TkM0eENnbFRNVGNzT0M0MExERTFMalVzT0M0eVF6RTFMak1zT0M0eUxERTFMRGd1TVN3eE5DNDRMRGd1TVhvaUx6NEtQR2MrQ2drOFp6NEtDUWs4Y0dGMGFDQmpiR0Z6Y3owaWMzUXdJaUJrUFNKTk1qVXVNeXd5Tnk0MVRESTFMak1zTWpjdU5XTXRNQzQyTERBdU5DMHhMalFzTUM0ekxURXVPQzB3TGpKc0xUVXVNUzAyTGpkakxUQXVOQzB3TGpZdE1DNHpMVEV1TkN3d0xqSXRNUzQ0YkRBc01Bb0pDUWxqTUM0MkxUQXVOQ3d4TGpRdE1DNHpMREV1T0N3d0xqSnNOUzR4TERZdU4wTXlOaXd5Tmk0ekxESTFMamtzTWpjdU1Td3lOUzR6TERJM0xqVjZJaTgrQ2drOEwyYytDand2Wno0S1BDOXpkbWMrQ2c9PSIpIWltcG9ydGFudH0NCi5jLWljb24tdGllYmF7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNalFnTWpRaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURJMElESTBPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6TTNRVUpGTXp0OUNna3VjM1F4ZTJacGJHdzZJMFpHUmtaR1JqdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWsweU1DNDVMREl6TGpOSU15NHhZeTB4TGpFc01DMHlMVEF1T1MweUxUSldNaTQ0WXpBdE1TNHhMREF1T1MweUxESXRNbWd4Tnk0NFl6RXVNU3d3TERJc01DNDVMRElzTW5ZeE9DNDFRekl5TGprc01qSXVOQ3d5TWl3eU15NHpMREl3TGprc01qTXVNM29pQ2drdlBnbzhaejRLQ1R4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMDFMaklzTVRrdU9VdzBMREU1TGpKak1TNDFMVEV1T1N3eUxqTXRNeTQ1TERJdU5DMDFMamhqTUMweExEQXVNUzB6TGpFc01DNHhMVFl1TTBnNFl6QXNNaTR5TERBc05DNHpMVEF1TVN3MkxqUmpNQ3d3TGpZdE1DNHhMREV1TWkwd0xqTXNNUzQ0Q2drSmFERXVNV013TGpVc01DNDRMREV1TWl3eUxqUXNNaTR5TERRdU5rZzVZeTB3TGpZdE1TNDFMVEV1TWkweUxqZ3RNUzQyTFRNdU9VTTNMREUzTGpJc05pNHpMREU0TGpZc05TNHlMREU1TGpsNklFMDBMakVzTVRRdU9GWTJMakZqTUMweExqSXNNQzQxTFRFdU9Dd3hMall0TVM0NGFETUtDUWxqTVN3d0xERXVOaXd3TGpjc01TNDJMREV1T0hZNExqWklPQzQ1VmpZdU0yTXdMVEF1TkMwd0xqTXRNQzQyTFRBdU5pMHdMalpvTFRKakxUQXVOQ3d3TFRBdU5pd3dMakl0TUM0MkxEQXVOblk0TGpWSU5DNHhlaUJOTVRJdU9Td3hPUzQxWXkweExqRXNNQzB4TGpjdE1DNDJMVEV1T0MweExqWldNVE1LQ1Fsak1DMHhMakVzTUM0M0xURXVOeXd4TGpndE1TNDRhREZXTkM0eGFERXVOM1l5TGpWSU1qQldPR2d0TkM0emRqTXVNbWd4TGpoak1TNHhMREFzTVM0M0xEQXVOeXd4TGpnc01TNDRkalF1T0dNd0xERXVNUzB3TGpZc01TNDJMVEV1T0N3eExqZElNVEl1T1hvZ1RURXlMamdzTVRNdU0zWTBMak1LQ1Fsak1Dd3dMalFzTUM0ekxEQXVOeXd3TGpjc01DNDNhRE11TW1Nd0xqVXNNQ3d3TGpjdE1DNHpMREF1T0Mwd0xqZDJMVFF1TkdNd0xUQXVOQzB3TGpNdE1DNDNMVEF1Tnkwd0xqZG9MVE11TTBNeE15NHhMREV5TGpZc01USXVPU3d4TWk0NExERXlMamdzTVRNdU0zb2lMejRLUEM5blBnbzhMM04yWno0SyIpfQ0KI3UgLnBme2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTXpJZ016SWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lETXlJRE15T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStDanh6ZEhsc1pTQjBlWEJsUFNKMFpYaDBMMk56Y3lJK0Nna3VjM1F3ZTJacGJHdzZJelpFTmtRMlJEdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWsweU5TNHlMREUzTGpKak1DMHdMalFzTUM0eExUQXVPQ3d3TGpFdE1TNHlZekF0TUM0MExEQXRNQzQ0TFRBdU1TMHhMakpzTWk0MkxUSmpNQzR5TFRBdU1pd3dMak10TUM0MUxEQXVNUzB3TGpoc0xUSXVOUzAwTGpNS0NXTXRNQzR4TFRBdU15MHdMalV0TUM0MExUQXVPQzB3TGpOc0xUTXVNU3d4TGpKakxUQXVOaTB3TGpVdE1TNHpMVEF1T1MweUxqRXRNUzR5YkMwd0xqVXRNeTR6WXpBdE1DNHpMVEF1TXkwd0xqVXRNQzQyTFRBdU5XZ3ROV010TUM0ekxEQXRNQzQyTERBdU1pMHdMallzTUM0MWJDMHdMalVzTXk0ekNnbGpMVEF1T0N3d0xqTXRNUzQwTERBdU55MHlMakVzTVM0eVREY3VNeXczTGpSRE55dzNMak1zTmk0M0xEY3VOQ3cyTGpVc055NDNURFFzTVRFdU9XTXRNQzR5TERBdU15MHdMakVzTUM0MkxEQXVNU3d3TGpoc01pNDJMREpqTUN3d0xqUXRNQzR4TERBdU9DMHdMakVzTVM0eUNnbGpNQ3d3TGpRc01Dd3dMamdzTUM0eExERXVNbXd0TWk0MkxESmpMVEF1TWl3d0xqSXRNQzR6TERBdU5TMHdMakVzTUM0NGJESXVOU3cwTGpOak1DNHhMREF1TXl3d0xqVXNNQzQwTERBdU9Dd3dMak5zTXk0eExURXVNbU13TGpZc01DNDFMREV1TXl3d0xqa3NNaTR4TERFdU1td3dMalVzTXk0ekNnbGpNQ3d3TGpNc01DNHpMREF1TlN3d0xqWXNNQzQxYURWak1DNHpMREFzTUM0MkxUQXVNaXd3TGpZdE1DNDFiREF1TlMwekxqTmpNQzQ0TFRBdU15d3hMalF0TUM0M0xESXVNUzB4TGpKc015NHhMREV1TW1Nd0xqTXNNQzR4TERBdU5pd3dMREF1T0Mwd0xqTnNNaTQxTFRRdU13b0pZekF1TVMwd0xqTXNNQzR4TFRBdU5pMHdMakV0TUM0NFRESTFMaklzTVRjdU1ub2dUVEUyTERJd0xqTmpMVEl1TkN3d0xUUXVNeTB4TGprdE5DNHpMVFF1TTNNeExqa3ROQzR6TERRdU15MDBMak56TkM0ekxERXVPU3cwTGpNc05DNHpVekU0TGpRc01qQXVNeXd4Tml3eU1DNHplaUl2UGdvOEwzTjJaejRLIil9DQojdSAubGJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdORFlnTkRZaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURRMklEUTJPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3NkkwWkdSa1pHUmp0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TXl3eU0yTXlMamtzTUN3MUxqSXRNaTR6TERVdU1pMDFMakp6TFRJdU15MDFMakl0TlM0eUxUVXVNbk10TlM0eUxESXVNeTAxTGpJc05TNHlVekl3TGpFc01qTXNNak1zTWpONklFMHlNeXd5TlM0MkNnbGpMVE11TlN3d0xURXdMalFzTVM0M0xURXdMalFzTlM0eWRqSXVObWd5TUM0M2RpMHlMalpETXpNdU5Dd3lOeTR6TERJMkxqVXNNalV1Tml3eU15d3lOUzQyZWlJdlBnbzhMM04yWno0SyIpfQ0KI3UxIGEucGZ7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6WkVOa1EyUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TlM0eUxERTNMakpqTUMwd0xqUXNNQzR4TFRBdU9Dd3dMakV0TVM0eVl6QXRNQzQwTERBdE1DNDRMVEF1TVMweExqSnNNaTQyTFRKak1DNHlMVEF1TWl3d0xqTXRNQzQxTERBdU1TMHdMamhzTFRJdU5TMDBMak1LQ1dNdE1DNHhMVEF1TXkwd0xqVXRNQzQwTFRBdU9DMHdMak5zTFRNdU1Td3hMakpqTFRBdU5pMHdMalV0TVM0ekxUQXVPUzB5TGpFdE1TNHliQzB3TGpVdE15NHpZekF0TUM0ekxUQXVNeTB3TGpVdE1DNDJMVEF1TldndE5XTXRNQzR6TERBdE1DNDJMREF1TWkwd0xqWXNNQzQxYkMwd0xqVXNNeTR6Q2dsakxUQXVPQ3d3TGpNdE1TNDBMREF1TnkweUxqRXNNUzR5VERjdU15dzNMalJETnl3M0xqTXNOaTQzTERjdU5DdzJMalVzTnk0M1REUXNNVEV1T1dNdE1DNHlMREF1TXkwd0xqRXNNQzQyTERBdU1Td3dMamhzTWk0MkxESmpNQ3d3TGpRdE1DNHhMREF1T0Mwd0xqRXNNUzR5Q2dsak1Dd3dMalFzTUN3d0xqZ3NNQzR4TERFdU1td3RNaTQyTERKakxUQXVNaXd3TGpJdE1DNHpMREF1TlMwd0xqRXNNQzQ0YkRJdU5TdzBMak5qTUM0eExEQXVNeXd3TGpVc01DNDBMREF1T0N3d0xqTnNNeTR4TFRFdU1tTXdMallzTUM0MUxERXVNeXd3TGprc01pNHhMREV1TW13d0xqVXNNeTR6Q2dsak1Dd3dMak1zTUM0ekxEQXVOU3d3TGpZc01DNDFhRFZqTUM0ekxEQXNNQzQyTFRBdU1pd3dMall0TUM0MWJEQXVOUzB6TGpOak1DNDRMVEF1TXl3eExqUXRNQzQzTERJdU1TMHhMakpzTXk0eExERXVNbU13TGpNc01DNHhMREF1Tml3d0xEQXVPQzB3TGpOc01pNDFMVFF1TXdvSll6QXVNUzB3TGpNc01DNHhMVEF1Tmkwd0xqRXRNQzQ0VERJMUxqSXNNVGN1TW5vZ1RURTJMREl3TGpOakxUSXVOQ3d3TFRRdU15MHhMamt0TkM0ekxUUXVNM014TGprdE5DNHpMRFF1TXkwMExqTnpOQzR6TERFdU9TdzBMak1zTkM0elV6RTRMalFzTWpBdU15d3hOaXd5TUM0emVpSXZQZ284TDNOMlp6NEsiKX0NCiN1MSBhLnBmLCAjdTEgYS5sYntjb2xvcjogcmdiYSgwLDAsMCwwKSFpbXBvcnRhbnQ7fQ0KI3UxIGEuYnJpe2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTXpJZ016SWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lETXlJRE15T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStDanh6ZEhsc1pTQjBlWEJsUFNKMFpYaDBMMk56Y3lJK0Nna3VjM1F3ZTJacGJHdzZJelpFTmtRMlJEdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWswekxqY3NPUzQ0YURZdU1sWXpMamRJTXk0M1Zqa3VPSG9nVFRFeUxqa3NNamd1TTJnMkxqSjJMVFl1TW1ndE5pNHlWakk0TGpONklFMHpMamNzTWpndU0yZzJMakoyTFRZdU1rZ3pMamRXTWpndU0zb2dUVE11Tnl3eE9TNHhhRFl1TW5ZdE5pNHlDZ2xJTXk0M1ZqRTVMakY2SUUweE1pNDVMREU1TGpGb05pNHlkaTAyTGpKb0xUWXVNbFl4T1M0eGVpQk5Nakl1TWl3ekxqZDJOaTR5YURZdU1sWXpMamRJTWpJdU1ub2dUVEV5TGprc09TNDRhRFl1TWxZekxqZG9MVFl1TWxZNUxqaDZJRTB5TWk0eUxERTVMakZvTmk0eWRpMDJMakpvTFRZdU1sWXhPUzR4Q2dsNklFMHlNaTR5TERJNExqTm9OaTR5ZGkwMkxqSm9MVFl1TWxZeU9DNHplaUl2UGdvOEwzTjJaejRLIil9DQojc191c2Vyc2V0dGluZ190b3B7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6WkVOa1EyUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TlM0eUxERTNMakpqTUMwd0xqUXNNQzR4TFRBdU9Dd3dMakV0TVM0eVl6QXRNQzQwTERBdE1DNDRMVEF1TVMweExqSnNNaTQyTFRKak1DNHlMVEF1TWl3d0xqTXRNQzQxTERBdU1TMHdMamhzTFRJdU5TMDBMak1LQ1dNdE1DNHhMVEF1TXkwd0xqVXRNQzQwTFRBdU9DMHdMak5zTFRNdU1Td3hMakpqTFRBdU5pMHdMalV0TVM0ekxUQXVPUzB5TGpFdE1TNHliQzB3TGpVdE15NHpZekF0TUM0ekxUQXVNeTB3TGpVdE1DNDJMVEF1TldndE5XTXRNQzR6TERBdE1DNDJMREF1TWkwd0xqWXNNQzQxYkMwd0xqVXNNeTR6Q2dsakxUQXVPQ3d3TGpNdE1TNDBMREF1TnkweUxqRXNNUzR5VERjdU15dzNMalJETnl3M0xqTXNOaTQzTERjdU5DdzJMalVzTnk0M1REUXNNVEV1T1dNdE1DNHlMREF1TXkwd0xqRXNNQzQyTERBdU1Td3dMamhzTWk0MkxESmpNQ3d3TGpRdE1DNHhMREF1T0Mwd0xqRXNNUzR5Q2dsak1Dd3dMalFzTUN3d0xqZ3NNQzR4TERFdU1td3RNaTQyTERKakxUQXVNaXd3TGpJdE1DNHpMREF1TlMwd0xqRXNNQzQ0YkRJdU5TdzBMak5qTUM0eExEQXVNeXd3TGpVc01DNDBMREF1T0N3d0xqTnNNeTR4TFRFdU1tTXdMallzTUM0MUxERXVNeXd3TGprc01pNHhMREV1TW13d0xqVXNNeTR6Q2dsak1Dd3dMak1zTUM0ekxEQXVOU3d3TGpZc01DNDFhRFZqTUM0ekxEQXNNQzQyTFRBdU1pd3dMall0TUM0MWJEQXVOUzB6TGpOak1DNDRMVEF1TXl3eExqUXRNQzQzTERJdU1TMHhMakpzTXk0eExERXVNbU13TGpNc01DNHhMREF1Tml3d0xEQXVPQzB3TGpOc01pNDFMVFF1TXdvSll6QXVNUzB3TGpNc01DNHhMVEF1Tmkwd0xqRXRNQzQ0VERJMUxqSXNNVGN1TW5vZ1RURTJMREl3TGpOakxUSXVOQ3d3TFRRdU15MHhMamt0TkM0ekxUUXVNM014TGprdE5DNHpMRFF1TXkwMExqTnpOQzR6TERFdU9TdzBMak1zTkM0elV6RTRMalFzTWpBdU15d3hOaXd5TUM0emVpSXZQZ284TDNOMlp6NEsiKX0NCiNpbXNne2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NE5DandoTFMwZ1IyVnVaWEpoZEc5eU9pQkJaRzlpWlNCSmJHeDFjM1J5WVhSdmNpQXhPUzR5TGpFc0lGTldSeUJGZUhCdmNuUWdVR3gxWnkxSmJpQXVJRk5XUnlCV1pYSnphVzl1T2lBMkxqQXdJRUoxYVd4a0lEQXBJQ0F0TFQ0TkNqeHpkbWNnZG1WeWMybHZiajBpTVM0eElpQnBaRDBpNVp1KzViR0NYekVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lJSGc5SWpCd2VDSWdlVDBpTUhCNElnMEtDU0IyYVdWM1FtOTRQU0l3SURBZ016SWdNeklpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRE15SURNeU95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krRFFvOGMzUjViR1VnZEhsd1pUMGlkR1Y0ZEM5amMzTWlQZzBLQ1M1emREQjdabWxzYkRvak5rUTJSRFpFTzMwTkNqd3ZjM1I1YkdVK0RRbzhjR0YwYUNCamJHRnpjejBpYzNRd0lpQmtQU0pOTWpVdU15dzBMalpvTFRFNVF6VXNOQzQyTERNdU9TdzFMamNzTXk0NUxEZHNNQ3d5TVM0MGJEUXVPQzAwTGpob01UWXVObU14TGpNc01Dd3lMalF0TVM0eExESXVOQzB5TGpSV04wTXlOeTQzTERVdU55d3lOaTQyTERRdU5pd3lOUzR6TERRdU5ub05DZ2tnVFRJeUxqa3NNVGd1T1VnNExqWjJMVEl1TkdneE5DNHpWakU0TGpsNklFMHlNaTQ1TERFMUxqTklPQzQyZGkweUxqUm9NVFF1TTFZeE5TNHplaUJOTWpJdU9Td3hNUzQzU0RndU5sWTVMalJvTVRRdU0xWXhNUzQzZWlJdlBnMEtQQzl6ZG1jK0RRbz0iKX0NCi5jLWNvbnRhaW5lcntiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLXJhZGl1czoycHg7cGFkZGluZzoyNXB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7Ym94LXNoYWRvdzowIDFweCA0cHggMCByZ2JhKDAsMCwwLC4xNCk7d2lkdGg6NTQ5cHh9DQpoMyBhOnZpc2l0ZWR7b3BhY2l0eTouNCFpbXBvcnRhbnQ7Y29sb3I6I2JiYiFpbXBvcnRhbnR9DQouYy1jb250YWluZXI6aG92ZXJ7dHJhbnNpdGlvbjphbGwgLjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xMTc2NDcpIDAgMXB4IDZweCxyZ2JhKDAsMCwwLC4xMTc2NDcpIDAgMXB4IDRweH0NCi5jLWNvbnRhaW5lcjphY3RpdmV7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE4ODIzNSkgMCAxMHB4IDMwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDZweCAxMHB4fQ0KLnR7cGFkZGluZy1ib3R0b206MTBweH0NCi5jLWJvcmRlcnt3aWR0aDo1NTlweDtib3gtc2hhZG93Om5vbmUhaW1wb3J0YW50O21hcmdpbi10b3A6MTdweDttYXJnaW4tYm90dG9tOjIzcHg7Ym9yZGVyLXRvcDojRUVFIDFweCBzb2xpZDtib3JkZXItYm90dG9tOiNFRUUgMXB4IHNvbGlkfQ0KI2hlbHB7cGFkZGluZy1sZWZ0OjEwN3B4IWltcG9ydGFudH0NCi5jLXRvb2xzIGF7Ym9yZGVyOjAhaW1wb3J0YW50fQ0KLmYxMyBhOmhvdmVye2JvcmRlcjpub25lIWltcG9ydGFudH0NCi5mMTMgLm06aG92ZXJ7Ym9yZGVyLWJvdHRvbTpzb2xpZCAxcHggIzY2NiFpbXBvcnRhbnR9DQouZyAubTpob3Zlcntib3JkZXItYm90dG9tOnNvbGlkIDFweCAjNjY2IWltcG9ydGFudH0NCi5jLXJvdyBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxcHggc29saWR9DQouYy1zcGFuNiBhOmhvdmVye2JvcmRlci1ib3R0b206bm9uZX0NCi5vcF92ZF9taW5pbmV3ZXN0X2xpbms6aG92ZXJ7b3BhY2l0eTouOH0NCi5vcC10aWViYS1vZmZpY2FsLWxvb2ttb3JlIGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDFweCBzb2xpZH0NCm9wLXRpZWJhLWdlbmVyYWwtbG9va21vcmUgYTpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMXB4IHNvbGlkfQ0KLmMtdGlwLW1lbnUgdWwgbGkgYXtjb2xvcjojMzQ3NmQyIWltcG9ydGFudH0NCmgzIGE6aG92ZXJ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O29wYWNpdHk6Ljc7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCmgzIGF7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5zaXRlbGlua19zdW1tYXJ5IGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDFweCBzb2xpZH0NCi5jLWdyYXk6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojNjY2IDFweCBzb2xpZH0NCi5vcF9rZWZ1dGFibGVfY29tbWl0dGVsOmhvdmVye2JvcmRlci1ib3R0b206IzY2NiAxcHggc29saWR9DQoub3Atc29mdC1idG5ib3ggYTpob3Zlcntib3JkZXI6bm9uZSFpbXBvcnRhbnR9DQoub3Atc29mdC1hcy1wYy1kb3duYnRue21hcmdpbi1sZWZ0OjAhaW1wb3J0YW50O2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMzQ3NmQyO3BhZGRpbmc6M3B4IDE1cHg7Ym9yZGVyLXJhZGl1czoycHg7Zm9udC1zaXplOjE0cHg7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7Ym9yZGVyOm5vbmU7bWFyZ2luLXRvcDotM3B4fQ0KLm9wLXNvZnQtYXMtcGMtZG93bmJ0bjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM3MDk4RDA7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7Ym94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtiYWNrZ3JvdW5kLWltYWdlOm5vbmV9DQouYy1idG4tcHJpbWFyeXttYXJnaW4tbGVmdDowIWltcG9ydGFudDtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzM0NzZkMjtwYWRkaW5nOjNweCAxNXB4O2JvcmRlci1yYWRpdXM6MnB4O2ZvbnQtc2l6ZToxNHB4O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlO2JvcmRlcjpub25lO21hcmdpbi10b3A6LTNweH0NCi5jLWJ0bi1wcmltYXJ5OmhvdmVye2JhY2tncm91bmQtY29sb3I6IzcwOThEMDt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpO2JhY2tncm91bmQtaW1hZ2U6bm9uZX0NCi5vcC1zb2Z0LXRpdGxlIGE6aG92ZXJ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O29wYWNpdHk6Ljc7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5vcC1zb2Z0LXRpdGxlIGF7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5udW1ze3dpZHRoOjU5OHB4fQ0KLnNlYXJjaF90b29sX2NvbnRlcnt3aWR0aDo1OThweH0NCi5vcF9vZmZpY2FsX3dlaWJvX290aGVyIGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fQ0KLm9wX29mZmljYWxfd2VpYm9faW5mbyBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjpub25lIWltcG9ydGFudH0NCi5vcF9vZmZpY2FsX3dlaWJvX2NvbnRlbnQgYTpob3Zlcnt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnR9DQouYy1idG57Ym9yZGVyOm5vbmUhaW1wb3J0YW50fQ0KLm9wLXp4LW5ldy1tdmlkZW8taW5mbzpob3Zlcntib3JkZXItYm90dG9tOm5vbmV9DQoub3AtengtbmV3LW12aWRlby1ybHQgYTpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMXB4IHNvbGlkfQ0KLm9wLXp4LW5ldy1tdmlkZW8tb25lbGluZSBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxcHggc29saWR9DQouaGludF9jb21tb25fcmVzdG9we2NvbG9yOiNFQTQzMzU7Zm9udC1zaXplOm1lZGl1bTtmb250LXdlaWdodDo3MDB9DQoub3AtdGllYmEtZ2VuZXJhbC1tYWluLWNvbCBwOmhvdmVye2JvcmRlcjpub25lIWltcG9ydGFudH0NCi5jLXRleHR7YmFja2dyb3VuZDojMzQ3NmQyO2NvbG9yOiNmZmY7Ym9yZGVyOiMzNDc2ZDIgMXB4IHNvbGlkO3BhZGRpbmctdG9wOjNweDtib3JkZXItcmFkaXVzOjJweH0NCi5jLXRleHQ6aG92ZXJ7YmFja2dyb3VuZDowIDA7Y29sb3I6IzM0NzZkMjtib3JkZXI6IzM0NzZkMiAxcHggc29saWQhaW1wb3J0YW50O3BhZGRpbmctdG9wOjNweDtib3JkZXItcmFkaXVzOjJweH0NCg=="},{"meta":{"name":"googleCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/googleCommonStyle.css?t=24.19","ts":1614930447400,"mimetype":"text/css"},"source":"LyoqKioqKioqKioqKioqKioqKiogU3RvcmUgR29vZ2xlQ29tbW9uU3R5bGUgKioqKioqKioqKioqKioqKioqKi8NCi8qIHJlZ3VsYXIgaXRlbXMsIHdhcnJpbmc6IGlmcmFtZXMgY291bGQgYmUgdmlkZW9zKi8NCmRpdi5yZXNfdG9wX2Jhbm5lciwNCiNwYWdlIC5maywNCiNoZWFkIC5oZWFkQmxvY2ssDQojcnNfdG9wX25ldywNCiNjb250ZW50X3JpZ2h0LA0KI3Jzbz50YWJsZSwNCiNyc28+ZGl2W2lkKj0iMzAiXSwNCiNyc28gLmMtcmVjb21tZW5kLA0KI3JzbyAubGVmdEJsb2NrLA0KI3JzbyAuaGl0X3RvcF9uZXcsDQojcnNvICNmbGQsDQojcnNvIGRpdi5ycmVjb20tYnRuLXBhcmVudCwNCiNjb250ZW50X3JpZ2h0LA0KI2NlbnRlcl9jb2w+I3RhdywNCiNmbGQsDQojZGVtbyB7DQogICAgZGlzcGxheTogbm9uZSFpbXBvcnRhbnQ7DQp9DQovKioqKioqKioqKioqKioqKioqKiBpbml0ICoqKioqKioqKioqKioqKioqKiovDQpib2R5W2dvb2dsZV0gew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmRGZEZkQ7DQp9DQojdG9wX25hdiAjaGR0YnsNCiAgICBiYWNrZ3JvdW5kOiB1bnNldDsNCn0NCiNjbnQgI2hkdGJTdW0sICNjbnQ+I2FwcGJhcnsNCiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDApOw0KfQ0KI2Zvcm0gLmJkc3Vnew0KICAgIHdpZHRoOiA3NiU7DQp9DQojYWxhX2ltZ19yZXN1bHRzew0KICAgIG92ZXJmbG93OmhpZGRlbjsNCn0NCmEsDQphIGVtLA0KI3UgYSB7DQogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KfQ0KYTpob3ZlciwNCmE6aG92ZXIgaDN7DQogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7DQp9DQovKioqKioqKioqKioqKioqKioqKiByZXdyaXRlIGhlYWRlciAqKioqKioqKioqKioqKioqKioqLw0KDQojaGVhZCwNCiNzX3RhYiB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODsNCn0NCiNoZWFkIHsNCiAgICBib3JkZXItYm90dG9tOiBub25lOw0KfQ0KI2Zvcm0gew0KICAgIGJhY2tncm91bmQtY29sb3I6IHVuc2V0Ow0KfQ0KI2Zvcm0gLmJkc3VnIGxpIHsNCiAgICB3aWR0aDogYXV0bzsNCiAgICBjb2xvcjogIzAwMDsNCiAgICBmb250OiAxNXB4IGFyaWFsOw0KICAgIGxpbmUtaGVpZ2h0OiAyNnB4Ow0KfQ0KI2Zvcm0gLnNfaXB0X3dyLmJnIHsNCiAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgIHdpZHRoOiA3NiU7DQp9DQojZm9ybSAuc19idG4gew0KICAgIGJhY2tncm91bmQ6ICMzNDc2ZDI7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMzNDc2ZDI7DQp9DQojZm9ybSAuc19idG46aG92ZXIgew0KICAgIGJhY2tncm91bmQ6ICMzNDc2ZDI7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMzNDc2ZDI7DQp9DQojc190YWIgYiB7DQogICAgY29sb3I6ICMzNDc2ZDI7DQogICAgYm9yZGVyLWJvdHRvbTogM3B4ICMzNDc2ZDIgc29saWQ7DQp9DQojc190YWIgew0KICAgIGJvcmRlci1ib3R0b206ICNlMGUwZTAgMXB4IHNvbGlkOw0KfQ0KLyoqKioqKioqKioqKioqKioqKiogcmV3cml0ZSAtIHNlYXJjaEJveCAqKioqKioqKioqKioqKioqKioqLw0KLyogU2VhcmNoVG9vbHMgKi8NCiNjb250YWluZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5zZWFyY2hfdG9vbF9jb250ZXIsDQojY29udGFpbmVyIC5oZWFkX251bXNfY29udF9vdXRlciAubnVtcyB7DQogICAgd2lkdGg6IDYzMHB4Ow0KfQ0KDQovKiBTZWFyY2hJdG1lcyBCb3R0b20gdG8gVG9wIGFuaSAqLw0KI3NlYXJjaCAjcnNvew0KICAgIGFuaW1hdGlvbi1uYW1lOiBhbmlfYm90dG9tVG90b3A7DQogICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAuM3M7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsNCn0NCi8qIFNlYXJjaEJhciBMZWZ0IHRvIFJpZ2h0IGFuaSAqLw0KLnNycCBmb3Jtew0KICAgIGFuaW1hdGlvbi1uYW1lOiBhbmlfbGVmdFRvcmlnaHQ7DQogICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAuM3M7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1vdXQ7DQp9DQoNCiNyc28gLmpVbWtGYjpob3ZlciB7DQogICAgbWFyZ2luOiAwIGF1dG87DQogICAgYm9yZGVyLWxlZnQ6dW5zZXQ7DQogICAgcGFkZGluZzogMHB4IDIwcHggMTVweDsNCiAgICBtYXJnaW4tYm90dG9tOiA0MHB4Ow0KfQ0KI3JzLCAjcnNvIC5new0KICAgIHdpZHRoOiA3NjBweDsNCiAgICBwYWRkaW5nOiAwcHggMjBweCAxNXB4Ow0KICAgIG1hcmdpbi10b3A6IDBweDsNCiAgICBtYXJnaW4tYm90dG9tOiA0MHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjEpOw0KICAgIHRyYW5zaXRpb246IGFsbCAwLjI1cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOw0KfQ0KI3JzLCAjcnNvIC5nIGRpdi5yYyAuc3sNCiAgICBtYXgtd2lkdGg6dW5zZXQ7DQp9DQojcnNvIC5nOmhvdmVyew0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsMC4zKTsNCiAgICBib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLW1vei1ib3gtc2hhZG93OiAwIDAgMXB4IGdyYXk7DQp9DQojcnNvIC5nW3RwbD0nc29mdCddIC5vcC1zb2Z0LXRpdGxlLA0KI3JzbyAuZyBkaXYuciB7DQogICAgbWFyZ2luOiAwcHggLTIwcHggMTBweCAtMjBweDsNCiAgICBwYWRkaW5nOiA4cHggMjBweCA1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KLyogSXRlbXMgLSBDb2xvciAqLw0KI3JzbyAuZjEzIGEsDQojcnNvIC5mMTMgZW0sDQojcnNvIC5jLXNwYW4xOCBhLA0KI3JzbyAuc3ViTGlua19mYWN0b3J5IGEsDQojcnNvIC5jLXRhYnMtY29udGVudCBhLA0KI3JzbyAub3Bfb2ZmaWNhbF93ZWlib19jb250ZW50IGEsDQojcnNvIC5vcF9vZmZpY2FsX3dlaWJvX3B6IGEsDQojcnNvIC5vcF90aWViYTJfdGFibGlua3NfY29udGFpbmVyIGEsDQojcnNvIC5vcC10aWViYS1nZW5lcmFsLXJpZ2h0LA0KI3JzbyAub3BfZHEwMV90aXRsZSwNCiNyc28gLm9wX2RxMDFfdGFibGUgYSwNCiNyc28gLm9wX2RxMDFfbW9yZWxpbmsgYSwNCiNyc28gLm9wLXRpZWJhLWdlbmVyYWwtbWFpbnBsIGEsDQojcnNvIC5vcC1zZS1saXN0ZW4tcmVjb21tZW5kLA0KI3JzbyAuYy1vZmZzZXQ+ZGl2IGEgew0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiNyc28gLmYxMyBhOmhvdmVyLA0KI3JzbyAuZjEzIGVtOmhvdmVyLA0KI3JzbyAuc3ViTGlua19mYWN0b3J5IGE6aG92ZXIsDQojcnNvIC5jLXRhYnMtY29udGVudCBhOmhvdmVyLA0KI3JzbyAub3BfdGllYmEyX3RhYmxpbmtzX2NvbnRhaW5lciBhOmhvdmVyLA0KI3JzbyAub3AtdGllYmEtZ2VuZXJhbC1yaWdodDpob3ZlciwNCiNyc28gLm9wX2RxMDFfdGl0bGU6aG92ZXIsDQojcnNvIC5vcF9kcTAxX3RhYmxlIGE6aG92ZXIsDQojcnNvIC5vcF9kcTAxX21vcmVsaW5rIGE6aG92ZXIsDQojcnNvIC5vcC10aWViYS1nZW5lcmFsLW1haW5wbCBhOmhvdmVyLA0KI3JzbyAub3Atc2UtbGlzdGVuLXJlY29tbWVuZDpob3ZlciwNCiNyc28gLmMtb2Zmc2V0PmRpdiBhOmhvdmVyIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZSFpbXBvcnRhbnQ7DQp9DQojcnNvIC5mMTMgYSB7DQogICAgY29sb3I6ICMwMDgwMDA7DQp9DQovKiBJdGVtcyAtIEFkaiAqLw0KDQojcnNvIC5jLXNwYW4xOCwgI3JzbyAuYy1zcGFuMjR7DQogICAgd2lkdGg6IDEwMCU7DQogICAgbWluLXdpZHRoOiB1bnNldDsNCn0NCiNyc28gLmMtYm9yZGVyIHsNCiAgICB3aWR0aDogYXV0bzsNCiAgICBib3JkZXI6IG5vbmU7DQogICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogdHJhbnNwYXJlbnQ7DQogICAgYm9yZGVyLXJpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDsNCiAgICBib3gtc2hhZG93OiAwcHggMHB4IDBweCB0cmFuc3BhcmVudDsNCiAgICAtd2Via2l0LWJveC1zaGFkb3c6IDBweCAwcHggMHB4IHRyYW5zcGFyZW50Ow0KICAgIC1tb3otYm94LXNoYWRvdzogMHB4IDBweCAwcHggdHJhbnNwYXJlbnQ7DQogICAgLW8tYm94LXNoYWRvdzogMHB4IDBweCAwcHggdHJhbnNwYXJlbnQ7DQp9DQovKiBJbWcgKi8NCg0KI3JzbyAuc2VfY29tX2lycmVndWxhcl9nYWxsZXJ5IHVsIGxpLA0KI3JzbyAub3BfamluZ3lhbl9saXN0LA0KI3JzbyAuZyAub3AtaW1nLWFkZHJlc3MtbGluay10eXBlIHsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQp9DQovKiB0aXRsZSAqLw0KI3JzbyAuZ1t0cGw9J3NvZnQnXSAub3Atc29mdC10aXRsZSBhLA0KI3JzbyAuZ1t0cGw9J3NvZnQnXSAub3Atc29mdC10aXRsZSBhIGVtLA0KI3JzbyAuZyBkaXYucj4gYSwNCiNyc28gLmcgYSBoMywNCiNyc28gLmcgZGl2LnI+IGEgZW0sDQojcmNudCAjcmVzIGgzLA0KI3JjbnQgI2V4dHJhcmVzIGgzew0KICAgIGNvbG9yOiAjMzQ3NmQyOw0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KLyogdGl0bGU6dmlzaWVkICovDQojcnNvIC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZCwNCiNyc28gLm9wLXNvZnQtdGl0bGUgYTp2aXNpdGVkIGVtLA0KI3JzbyAuZyBkaXYucj4gYTp2aXNpdGVkLA0KI3JzbyAuZyBkaXYucj4gYTp2aXNpdGVkIGVtLA0KI3JjbnQgI3JlcyBhOnZpc2l0ZWQgaDMsDQojcnNvIC5nIGE6dmlzaXRlZCBoMyB7DQogICAgY29sb3I6ICM2NjAwOTk7DQp9DQojcnNvIC5vcC1zb2Z0LXRpdGxlIGEsDQojcnNvIC5nIGRpdi5yPiBhIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQojcnNvIC5vcC1zb2Z0LXRpdGxlIGEgZW0sDQojcnNvIC5nIGRpdi5yPiBhIGVtIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQojcnNvIC5vcC1zb2Z0LXRpdGxlIGE6aG92ZXI6YWZ0ZXIsDQojcnNvIC5nIGRpdi5yPiBhOmhvdmVyOmFmdGVyIHsNCiAgICBsZWZ0OiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCn0NCiNyc28gLm9wLXNvZnQtdGl0bGUgYTphZnRlciwNCiNyc28gLmcgZGl2LnI+IGE6YWZ0ZXIgew0KICAgIGNvbnRlbnQ6ICIiOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzM0NzZkMjsNCiAgICBib3R0b206IC0ycHg7DQogICAgbGVmdDogMTAwJTsNCiAgICB3aWR0aDogMDsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQp9DQoNCiNyc28gLm9wLXNvZnQtdGl0bGUgYSwgI3JzbyAuZyBkaXYucj4gYSB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KDQojcnNvIC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZDpob3ZlcjphZnRlciwNCiNyc28gLmcgZGl2LnI+IGE6dmlzaXRlZDpob3ZlcjphZnRlciB7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQp9DQojcnNvIC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZDphZnRlciwNCiNyc28gLmcgZGl2LnI+IGE6dmlzaXRlZDphZnRlciB7DQogICAgY29udGVudDogIiI7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNjYwMDk5Ow0KICAgIGJvdHRvbTogLTJweDsNCiAgICBsZWZ0OiAxMDAlOw0KICAgIHdpZHRoOiAwOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCn0NCi8qICBBYm91dCBTZWFyY2ggUmVzdWx0ICovDQoNCiNycyB7DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICAgIHBhZGRpbmc6IDBweCAyMHB4IDE1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KfQ0KI3JzIC50dCB7DQogICAgbWFyZ2luOiAwcHggLTIwcHggNXB4IC0yMHB4Ow0KICAgIHBhZGRpbmc6IDVweCAyMHB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KI3JzIHRhYmxlIHsNCiAgICB3aWR0aDogNjMwcHg7DQogICAgcGFkZGluZzogNXB4IDE1cHg7DQp9DQojcnMgdGFibGUgdHIgYSB7DQogICAgbWFyZ2luLXRvcDogNXB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDVweDsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiNycyB0YWJsZSB0ciBhOmhvdmVyIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCn0NCi8qIHBhZ2UgbnVtcyAqLw0KDQojcGFnZSB7DQogICAgbWluLXdpZHRoOiA3MTBweDsNCiAgICBoZWlnaHQ6IDQwcHg7DQogICAgbGluZS1oZWlnaHQ6IDQwcHg7DQogICAgcGFkZGluZy10b3A6IDVweDsNCiAgICBtYXJnaW46IDBweCAwcHggNTBweCA4MHB4Ow0KfQ0KLm9wLWltZy1hZGRyZXNzLWRlc2t0b3AtY29udHsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KI3BhZ2UgYSwNCiNwYWdlIHN0cm9uZyB7DQogICAgY29sb3I6IzM0NzZkMjsNCiAgICBoZWlnaHQ6IGF1dG87DQogICAgYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOw0KICAgIC13ZWJraXQtYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOw0KICAgIC1tb3otYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOw0KfQ0KI3BhZ2UgLm46aG92ZXIsDQojcGFnZSBhOmhvdmVyIC5wYyB7DQogICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7DQogICAgYmFja2dyb3VuZDogI2Q4ZDhkODsNCiAgICBjb2xvcjogIzAwNTdkYTsNCn0NCiNwYWdlIHN0cm9uZyAucGMgew0KICAgIGJhY2tncm91bmQ6ICMzNDc2ZDI7DQogICAgY29sb3I6IHdoaXRlOw0KfQ0KLyogYW5pICovDQpAa2V5ZnJhbWVzIGFuaV9ib3R0b21Ub3RvcCB7DQogICAgMCUgew0KICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMzJweCk7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDIwJSB7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDMwJSB7DQogICAgICAgIG9wYWNpdHk6IDAuODsNCiAgICB9DQogICAgMTAwJSB7DQogICAgICAgIG9wYWNpdHk6IDE7DQogICAgfQ0KfQ0KQGtleWZyYW1lcyBhbmlfbGVmdFRvcmlnaHQgew0KICAgIDAlIHsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQojcnNvIGRpdi5nOm5vdChbY2xhc3NdKXsNCiAgICBtYXJnaW4tbGVmdDogMThweDsNCiAgICBtYXJnaW4tcmlnaHQ6IDE4cHg7DQp9DQojcnNvIC5nIC5leHAtb3V0bGluZXsNCiAgICBkaXNwbGF5Om5vbmU7DQp9DQojbWFpbiAjcmNudCAjcmhzIHsNCiAgICBtYXJnaW4tbGVmdDogMTAyMHB4Ow0KfQ0KI3JlcyAuZyAudHN7DQogICAgbWF4LXdpZHRoOiB1bnNldDsNCn0NCiNtYWluICNyY250ICNyaHN7DQogICAgZGlzcGxheTpub25lOw0KfQ0KLnNob3dSaWdodCAjbWFpbiAjcmNudCAjcmhzew0KICAgIGRpc3BsYXk6dW5zZXQ7DQp9DQpjaXRlew0KICAgIGZvbnQtd2VpZ2h0Om5vcm1hbDsNCiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KfQ0KLyoqTW9vbmNhbiAtU1RBUlQqKi8NCi8qKkFqYSBMaW5lSGVpZ2h0Ki8NCmRpdi5yZXNfdG9wX2Jhbm5lciAjZm9vdCwjcGFnDQojcmVzIC5yew0KICAgIGxpbmUtaGVpZ2h0OiAxLjM7DQp9DQojcmVzew0KICAgIHBhZGRpbmc6IDA7DQp9DQovKipHb29nbGUgQ29ubmVjdGlvbkJveCovDQojcnMsICNyc28gLmcgew0KICAgIG1hcmdpbi1ib3R0b206IDIwcHg7DQogICAgYm9yZGVyLXJhZGl1czogMTBweDsNCn0NCiNyc28gLmcgZGl2LnIgew0KICAgIGJvcmRlci1yYWRpdXM6IDEwcHggMTBweCAwcHggMHB4Ow0KfQ0KI3JzbyAuZyAuY2FyZC1zZWN0aW9uLCAjY2VudGVyX2NvbCAua3AtYmxrew0KICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7DQp9DQovKipSZXdyaXRlIG1haW4gcGFnZSAtPiB3ZWIgc3VtbWFyeSovDQouYzJ4elRiIC5nLCAucnVUY0lkIC5nLCAuZm0wNklmIC5nLCAuY1VuUUtlIC5nLCAuSGFuUW1mIC5nIHsNCiAgICB3aWR0aDogNzU4cHg7DQogICAgcGFkZGluZy1sZWZ0OiAgMjBweCAhaW1wb3J0YW50Ow0KICAgIHBhZGRpbmctcmlnaHQ6IDIwcHggIWltcG9ydGFudDsNCiAgICBib3gtc2hhZG93OiAwIDAgMHB4IDBweCByZ2IoMCwgMCwgMCk7IC8qcmVtb3ZlIHRoZSBzaGFkb3cqLw0KfQ0KZGl2IC54Znh4NWQgew0KICAgIG1hcmdpbi1ib3R0b206IC0xOHB4ICFpbXBvcnRhbnQ7DQogICAgbWFyZ2luLXRvcDogLTI1cHggIWltcG9ydGFudDsNCn0NCmRpdiAueGFxSnpmLnhmeHg1ZCAua25vLWZ0cnsNCiAgICBtYXJnaW4tdG9wOiAxMHB4ICFpbXBvcnRhbnQ7DQp9DQpkaXYgLmtuby1mdHIgYXsNCiAgICBwb3NpdGlvbjogc3RpY2t5Ow0KfQ0KLyoqVGhhbmtzIHRvIE1vb25jYW4gLUVORCoqLw0KI3JjbnQgI3JlcyBoMywgI3JjbnQgI2V4dHJhcmVzIGgzew0KICAgIC8qKnJlc2V0IGZvbnQgc2l6ZSoqLw0KICAgIGZvbnQtc2l6ZTogbWVkaXVtOw0KfQ0KI3JjbnQgI3JlcyBoMyBkaXYsICNyY250ICNleHRyYXJlcyBoMyBkaXZ7DQogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KfQ0KLypkZWFsIHdpdGggY2l0ZSB0b28gbG9uZyBhbmQgdGl0bGUgdG9vIHNob3J0Ki8NCiNyc28gLmcgLnI+YT5kaXZ7DQogICAgd2lkdGg6IDM1cmVtOw0KfQ0KZGl2LnJjW2FjLW5lZWRoaWRlXXsNCiAgICBtYXJnaW4tdG9wOiA1cHg7DQogICAgbWFyZ2luLWJvdHRvbTogLTE1cHg7DQp9DQovKnJlc2V0IGxvZ28gcG9zaXRpb24gYXQgZHJvcCAqLw0KLmxvZ297DQogICAgdG9wOnVuc2V0Ow0KfQ0KYm9keVtnb29nbGVdIC5iaWcgLmJhaWR1ew0KICAgIHRyYW5zZm9ybTogdW5zZXQgIWltcG9ydGFudDsNCiAgICBtYXJnaW4tdG9wOiAtMTBweDsNCiAgICBtYXJnaW4tbGVmdDogLTJyZW07DQp9DQpib2R5W2dvb2dsZV0gLmJpZyAuYmFpZHUgI2xvZ28gaW1new0KICAgIG1hcmdpbi10b3A6IC0xNXB4Ow0KfQ0KYm9keVtnb29nbGVdIC5iaWcubWluaWRpdiAuYmFpZHUgI2xvZ28gaW1new0KICAgIGhlaWdodDogNTlweDsNCiAgICB3aWR0aDogdW5zZXQ7DQogICAgbWFyZ2luLXRvcDogLTE4cHg7DQp9DQouQUMuc3Atc2VwYXJhdG9yew0KICAgIG1hcmdpbi10b3A6IC0yMHB4Ow0KfQ0KLnJjIC5Jc1p2ZWN7DQogICAgbWF4LXdpZHRoOiB1bnNldDsNCn0NCg=="},{"meta":{"name":"googleOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/googleOnePageStyle.css?t=24.19","ts":1614930447402,"mimetype":"text/css"},"source":"LyoqU3RvcmUgR29vZ2xlVHdvUGFnZVN0eWxlKiovDQojcnNvIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgZmxvYXQ6IHVuc2V0Ow0KfQ0KI3JzbyAualVta0ZiOmhvdmVyIHsNCiAgICBtYXJnaW4tYm90dG9tOiAzMHB4Ow0KICAgIG1hcmdpbi1sZWZ0OiAyMHB4Ow0KfQ0KI3JzbyAuZ3sNCiAgICB3aWR0aDogdW5zZXQ7DQogICAgbWFyZ2luLWxlZnQ6IDIwcHg7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICBwYWRkaW5nOiAwcHggMjBweCAxNXB4Ow0KICAgIG1hcmdpbi10b3A6IDBweDsNCiAgICBtYXJnaW4tYm90dG9tOiAzMHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7DQp9DQouc2VhcmNoPiNpcmVzICNyc28+Lmd7DQogICAgbWF4LXdpZHRoOiB1bnNldDsNCn0NCiNtYWluICNyY250ew0KICAgIG1heC13aWR0aDogdW5zZXQ7DQp9DQpib2R5ICNhcHBiYXIsYm9keSAucmhzY29sLCBib2R5ICN0b3BfbmF2LCBib2R5ICNmYmFyew0KICAgIG1pbi13aWR0aDogdW5zZXQ7DQp9DQojcnNvIGctc2Nyb2xsaW5nLWNhcm91c2Vsew0KICAgIG1hcmdpbjogdW5zZXQ7DQogICAgbWFyZ2luLWxlZnQ6IDIwcHg7DQp9DQouY29sew0KICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7DQp9DQouY29sICNjZW50ZXJfY29sew0KICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7DQogICAgbWFyZ2luLWxlZnQ6IHVuc2V0ICFpbXBvcnRhbnQ7DQp9DQouc3JwIC5iaWcgI3RzZnsNCiAgICB3aWR0aDogODMzcHg7DQp9DQovKipzZWFyY2ggYm94IGFsaWduIGNlbnRlcioqLw0KLnNycCBmb3Jtew0KICAgIG1hcmdpbjogMCBhdXRvOw0KfQ0KI3RvcF9uYXZ7DQogICAgbWluLXdpZHRoOiB1bnNldDsNCn0NCi8qKnZpZGVvIGJveCBhbGlnbiBjZW50ZXIqKi8NCmctc2VjdGlvbi13aXRoLWhlYWRlcnsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQojaGR0YiAjaGR0Yi1tc2J7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgd2lkdGg6IDEwMCU7DQp9DQojaGR0YiAjaGR0Yi1tc2Itdmlzew0KICAgIG1hcmdpbi1sZWZ0OiAtMTY5cHg7DQp9DQojbWFpbiAjY250LCAjY250ICNjZW50ZXJfY29sLCAjY250ICNmb290ew0KICAgIHdpZHRoOiBjYWxjKDM2LjN2dyArIDUyNXB4KTsNCiAgICBtYXJnaW46IDAgYXV0bzsNCn0NCkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6MTMwMHB4KXsNCiAgICAuc3JwIGZvcm0gZGl2W2pzY29udHJvbGxlcl17DQogICAgICAgIG1hcmdpbi1sZWZ0OiB1bnNldDsNCiAgICAgICAgbWFyZ2luOiAwIGF1dG87DQogICAgfQ0KfQ=="},{"meta":{"name":"googleTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/googleTwoPageStyle.css?t=24.19","ts":1614930447490,"mimetype":"text/css"},"source":"LyoqU3RvcmUgR29vZ2xlVHdvUGFnZVN0eWxlKiovDQojcnNvIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgZmxvYXQ6IHVuc2V0Ow0KfQ0KI3JzbyAualVta0ZiOmhvdmVyIHsNCiAgICBtYXJnaW4tYm90dG9tOiAzMHB4Ow0KICAgIG1hcmdpbi1sZWZ0OiAyMHB4Ow0KfQ0KI3JzbyAuZywgLnZrX2N7DQogICAgd2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbi1sZWZ0OiAyMHB4Ow0KICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgcGFkZGluZzogMTBweCAyMHB4IDE1cHg7DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDI1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICB0cmFuc2l0aW9uOiBhbGwgMC4yNXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczsNCn0NCi5zZWFyY2g+I2lyZXMgI3JzbyAuZ3sNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KI21haW4gI3JjbnQgI3Joc3sNCiAgICBkaXNwbGF5Om5vbmU7DQp9DQojbWFpbiAjcmNudHsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KI21haW4gI2NudCwgI2NudCAjY2VudGVyX2NvbCwgI2NudCAjZm9vdHsNCiAgICB3aWR0aDogY2FsYygzMi41dncgKyA2NjhweCk7DQogICAgbWFyZ2luOiAwIGF1dG87DQp9DQpib2R5ICNhcHBiYXIsYm9keSAucmhzY29sLCBib2R5ICN0b3BfbmF2LCBib2R5ICNmYmFyew0KICAgIG1pbi13aWR0aDogdW5zZXQ7DQp9DQojcnNvIC5DT0VvaWR7DQogICAgbWFyZ2luOiB1bnNldDsNCn0NCi5jb2x7DQogICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsNCn0NCi5jb2wgI2NlbnRlcl9jb2x7DQogICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsNCiAgICBtYXJnaW4tbGVmdDogdW5zZXQgIWltcG9ydGFudDsNCn0NCi5zcmcsICNyc28sICNyc28+ZGl2ew0KCWRpc3BsYXk6IGdyaWQ7DQoJZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsbWlubWF4KDUwJSwxZnIpKTsNCiAgICBncmlkLXRlbXBsYXRlLWFyZWFzOiAieG1haW4geG1haW4iOw0KfQ0KLyojcnNvPmRpdjpub3QoLmcpLCAjcnNvIC5zcmd7Ki8NCi8qICAgIGdyaWQtY29sdW1uLXN0YXJ0OiAxOyovDQovKiAgICBncmlkLWNvbHVtbi1lbmQ6IHhtYWluLWVuZDsqLw0KLyp9Ki8NCi8qKnNlYXJjaCBib3ggYWxpZ24gY2VudGVyKiovDQouc3JwIGZvcm17DQogICAgbWFyZ2luOjAgYXV0bzsNCn0NCi5zcnAgZm9ybSBkaXZbanNjb250cm9sbGVyXXsNCiAgICBtYXJnaW4tbGVmdDogdW5zZXQ7DQogICAgbWFyZ2luOiAwIGF1dG87DQp9DQovKip2aWRlbyBib3ggYWxpZ24gY2VudGVyKiovDQpnLXNlY3Rpb24td2l0aC1oZWFkZXJ7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KI2hkdGIgI2hkdGItbXNiew0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIHdpZHRoOiAxMDAlOw0KfQ0KI2hkdGIgI2hkdGItbXNiLXZpc3sNCiAgICBtYXJnaW4tbGVmdDogLTE2OXB4Ow0KfQ=="},{"meta":{"name":"bingCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/bingCommonStyle.css?t=24.19","ts":1614930447492,"mimetype":"text/css"},"source":"LypTdG9yZSBCaW5nQ29tbW9uU3R5bGUqLw0KYm9keSB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTsNCn0NCiNiX2NvbnRlbnQgI2JfcmVzdWx0cz5saTpub3QoI21mYV9yb290KSB7DQogICAgd2lkdGg6IDY3MHB4Ow0KICAgIHBhZGRpbmc6IDEycHggMjBweCAhaW1wb3J0YW50Ow0KICAgIG1hcmdpbi10b3A6IDBweDsNCiAgICBtYXJnaW4tYm90dG9tOiAyNXB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjEpOw0KICAgIHRyYW5zaXRpb246IGFsbCAwLjI1cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOw0KICAgIG92ZXJmbG93OiBoaWRkZW47DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHMgYSwNCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgY29sb3I6ICMzNDc2ZDI7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgYSwgI2JfcmVzdWx0cyBoMiBzdHJvbmd7DQogICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgZm9udC1zaXplOiBtZWRpdW07DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHM+bGk6aG92ZXIgew0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsMC4zKTsNCiAgICBiYWNrZ3JvdW5kOiAjRkNGQ0ZDICFpbXBvcnRhbnQ7DQogICAgYm94LXNoYWRvdzogMCAwIDFweCBncmV5Ow0KICAgIC13ZWJraXQtYm94LXNoYWRvdzogMCAwIDFweCBncmV5Ow0KICAgIC1tb3otYm94LXNoYWRvdzogMCAwIDFweCBncmF5Ow0KfQ0KI2JfY29udGVudCA+I2JfcmVzdWx0cyBsaTpub3QoI21mYV9yb290KSBoMiB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODsNCiAgICBtYXJnaW46IC0xMnB4IC0yMHB4IDEwcHggLTIwcHg7DQogICAgcGFkZGluZzogOHB4IDIwcHggNXB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweCA1cHggMHB4IDBweDsNCn0NCg0KYSwgYSBzdHJvbmcgew0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCn0NCg0KI2JfY29udGVudCAjYl9yZXN1bHRzIGEgc3Ryb25nLA0KI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGEgc3Ryb25nIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQouYl9hbGdvOmZpcnN0LWNoaWxkOmhvdmVyIGgyIGF7DQogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHMgYTpob3ZlcjphZnRlciwNCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhOmhvdmVyOmFmdGVyIHsNCiAgICBsZWZ0OiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCn0NCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBhOmhvdmVyLA0KI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGE6aG92ZXJ7DQogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzIGE6YWZ0ZXIsDQojYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgYTphZnRlciB7DQogICAgY29udGVudDogIiI7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMzQ3NmQyOw0KICAgIGJvdHRvbTogLTJweDsNCiAgICBsZWZ0OiAxMDAlOw0KICAgIHdpZHRoOiAwOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCn0NCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhOnZpc2l0ZWQsDQojYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgYTp2aXNpdGVkIHN0cm9uZywNCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBoMiBhOnZpc2l0ZWQsDQojYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgaDIgYTp2aXNpdGVkIHN0cm9uZyB7DQogICAgY29sb3I6ICM2NjAwOTk7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgYTp2aXNpdGVkOmhvdmVyOmFmdGVyLA0KI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGgyIGE6dmlzaXRlZDpob3ZlcjphZnRlciB7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQp9DQojYl9jb250ZW50Pm9sI2JfY29udGV4dHsNCiAgICBkaXNwbGF5Om5vbmU7DQp9DQpib2R5ICNiX2hlYWRlcnsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1Ow0KfQ0KI2JfY29udGVudCAuYl91bmRlclNlYXJjaGJveHsNCiAgICBtYXJnaW4tdG9wOiAxMHB4Ow0KfQ0KI2JfaGVhZGVyIC5iX3Njb3BlYmFyew0KICAgIG1hcmdpbjogdW5zZXQ7DQp9DQovKnNlYXJjaCBlbmdpbmUganVtcCovDQoudHNmLXA+LmxvZ29jb250LCAjc2VqLWNvbnRhaW5lcnsNCiAgICBtYXJnaW4tcmlnaHQ6IDM1MHB4Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi50c2YtcD4uc2ZpYmJiY3sNCiAgICBtYXJnaW4tcmlnaHQ6IDM1MHB4Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi5iX3NlYXJjaGJveEZvcm0gLnNhX3Rtew0KICAgIHRleHQtYWxpZ246IGxlZnQ7IC8qIFNlYXJjaEJveCB0ZXh0IENlbnRlciAqLw0KfQ0KYm9keSAjYl9oZWFkZXIgI2VzdF9zd2l0Y2h7DQogICAgbWFyZ2luOiAwIGF1dG87DQogICAgcGFkZGluZy1yaWdodDogMTAlOyAvKipUT0RPKioqLw0KfQ0KYm9keSAjZXN0X2NuOjphZnRlciwgYm9keSAjZXN0X2VuOjphZnRlcnsNCiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSwxLjMpIHBlcnNwZWN0aXZlKC41ZW0pIHJvdGF0ZVgoMGRlZyk7DQogICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDEuMSwxLjMpIHBlcnNwZWN0aXZlKC41ZW0pIHJvdGF0ZVgoMGRlZyk7DQp9DQpAbWVkaWEgKG1heC13aWR0aDogMTEwMHB4KXsNCiAgICBib2R5ICNiX2hlYWRlciAjZXN0X3N3aXRjaHsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDEuMnJlbSk7DQogICAgfQ0KfQ0KLyogU2VhcmNoSXRtZXMgQm90dG9tIHRvIFRvcCBhbmkgKi8NCiNiX2NvbnRlbnR7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9ib3R0b21Ub3RvcDsNCiAgICBhbmltYXRpb24tZHVyYXRpb246IDAuNnM7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsNCn0NCg0KLyogU2VhcmNoQmFyIExlZnQgdG8gUmlnaHQgYW5pICovDQpib2R5ICNiX2hlYWRlciB7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV90b3BUb2J1dHRvbTsNCiAgICBhbmltYXRpb24tZHVyYXRpb246IDAuNnM7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1vdXQ7DQp9DQpib2R5ew0KICAgIGFuaW1hdGlvbi1uYW1lOiBhbmlfaGlkZVRvU2hvdzsNCiAgICBhbmltYXRpb24tZHVyYXRpb246IDAuNnM7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1vdXQ7DQp9DQouQUMuc3Atc2VwYXJhdG9yew0KICAgIG1hcmdpbi10b3A6IC0xNXB4Ow0KfQ0KQGtleWZyYW1lcyBhbmlfbGVmdFRvcmlnaHQgew0KICAgIDAlIHsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQovKiBhbmkgKi8NCkBrZXlmcmFtZXMgYW5pX2JvdHRvbVRvdG9wIHsNCiAgICAwJSB7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgzMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQpALXdlYmtpdC1rZXlmcmFtZXMgYW5pX3RvcFRvYnV0dG9tIHsNCiAgICAwJSB7DQogICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQpALXdlYmtpdC1rZXlmcmFtZXMgYW5pX2hpZGVUb1Nob3cgew0KICAgIDAlIHsNCiAgICAgICAgZGlzcGxheTpub25lOw0KICAgICAgICBvcGFjaXR5OiAwOw0KICAgIH0NCiAgICAyMCUgew0KICAgICAgICBkaXNwbGF5Om5vbmU7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDMwJSB7DQogICAgICAgIGRpc3BsYXk6bm9uZTsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQo="},{"meta":{"name":"bingOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/bingOnePageStyle.css?t=24.19","ts":1614930447494,"mimetype":"text/css"},"source":"LypTdG9yZSBCaW5nT25lUGFnZVN0eWxlKi8NCiNiX2NvbnRlbnQgYXNpZGV7DQogICAgZGlzcGxheTpub25lOw0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzew0KICAgIHdpZHRoOiA3M3Z3Ow0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIG1heC13aWR0aDogMTAwMHB4Ow0KfQ0KYm9keSAjYl9oZWFkZXJ7DQogICAgd2lkdGg6IDcydnc7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIG1hcmdpbjogMCBhdXRvOw0KfQ0KYm9keSAjYl9jb250ZW50ew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgbWFyZ2luLWxlZnQ6IHVuc2V0Ow0KICAgIHBhZGRpbmctbGVmdDogdW5zZXQ7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHM+bGk6bm90KCNtZmFfcm9vdCkgew0KICAgIHdpZHRoOjk4JTsNCn0NCg=="},{"meta":{"name":"bingTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/bingTwoPageStyle.css?t=24.19","ts":1614930447491,"mimetype":"text/css"},"source":"LypTdG9yZSBCaW5nVHdvUGFnZVN0eWxlKi8NCiNjb250YWluZXIgI2NvbnRlbnRfbGVmdCAuaGl0X3RvcF9uZXcsDQojYl9jb250ZW50IGFzaWRlLCAjYl9yZXN1bHRzICNtZmFfcm9vdHsNCiAgICBkaXNwbGF5Om5vbmU7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHN7DQogICAgd2lkdGg6IDczdnc7DQogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsbWlubWF4KDUwJSwxZnIpKTsNCiAgICBncmlkLXRlbXBsYXRlLWFyZWFzOiAieG1haW4geG1haW4iOw0KICAgIGRpc3BsYXk6IGlubGluZS1ncmlkOw0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzPmxpOm5vdCgjbWZhX3Jvb3QpIHsNCiAgICB3aWR0aDo5OCU7DQogICAgbWFyZ2luLWxlZnQ6IDElOw0KfQ0KI2JfcmVzdWx0cyAuYl9hbGdvIC5iX2RlZXAgdWx7DQogICAgd2lkdGg6IDUwJTsNCn0NCiNiX21zZywgI2JfcGFnew0KICAgIGdyaWQtY29sdW1uLWVuZDogeG1haW4tZW5kOw0KICAgIGdyaWQtY29sdW1uLXN0YXJ0OiAxOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7DQp9DQpib2R5ICNiX2NvbnRlbnR7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBtYXJnaW4tbGVmdDogdW5zZXQ7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldDsNCn0NCmJvZHkgI2JfaGVhZGVyew0KICAgIHdpZHRoOiA3MnZ3Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBtYXJnaW46IDAgYXV0bzsNCn0NCg=="},{"meta":{"name":"duckCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/duckCommonStyle.css?t=24.19","ts":1614930447493,"mimetype":"text/css"},"source":"LypTdG9yZTogRHVja0R1Y2tHb0NvbW1vblN0eWxlKi8NCmJvZHkgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7DQp9DQoucmVzdWx0X19pY29uIC5yZXN1bHRfX2ljb25fX2ltZywgLnJlc3VsdF9faWNvbiAucmVzdWx0X19pY29uIGltZ3sNCiAgICBkaXNwbGF5OiBub25lOw0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDJ7DQogICAgZm9udC13ZWlnaHQ6IDYwMDsNCn0NCiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluew0KICAgIG1heC13aWR0aDogNjcwcHg7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCB7DQogICAgd2lkdGg6IDY3MHB4Ow0KICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDI1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuMSk7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7DQp9DQouZGFyay1iZyAjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzOw0KfQ0KLmRhcmstYmcgI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMzNDU7DQp9DQouZGFyay1iZyAjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X190aXRsZSBhIHsNCiAgICBjb2xvcjogI0NDQ0NDQzsNCn0NCi5kYXJrLWJnICNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIC5yZXN1bHRfX3RpdGxlIGE6dmlzaXRlZCB7DQogICAgY29sb3I6ICNiNzY2M2U7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X190aXRsZSBhIHsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOw0KICAgIG1heC13aWR0aDogNjQwcHg7DQogICAgY29sb3I6ICMzNDc2ZDI7DQogICAgZm9udC1zaXplOiBzbWFsbGVyOw0KfQ0KDQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X19ib2R5ew0KICAgIHBhZGRpbmc6IDEycHggMjBweCAhaW1wb3J0YW50Ow0KfQ0KDQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcDpob3ZlciB7DQogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjMpOw0KICAgIGJveC1zaGFkb3c6IDAgMCAxcHggZ3JleTsNCiAgICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMCAxcHggZ3JleTsNCiAgICAtbW96LWJveC1zaGFkb3c6IDAgMCAxcHggZ3JheTsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOGY4Ow0KICAgIG1hcmdpbjogLTEycHggLTIwcHggMHB4IC0yMHB4Ow0KICAgIHBhZGRpbmc6IDhweCAyMHB4IDVweDsNCiAgICBib3JkZXItcmFkaXVzOiA1cHggNXB4IDBweCAwcHg7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOmhvdmVyOmFmdGVyIHsNCiAgICBsZWZ0OiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6YWZ0ZXIgew0KICAgIGNvbnRlbnQ6ICIiOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzM0NzZkMjsNCiAgICBib3R0b206IDFweDsNCiAgICBsZWZ0OiAxMDAlOw0KICAgIHdpZHRoOiAwOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZCwNCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZCBzdHJvbmcgew0KICAgIGNvbG9yOiAjNjYwMDk5Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTp2aXNpdGVkOmhvdmVyOmFmdGVyLA0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTp2aXNpdGVkOmhvdmVyOmFmdGVyIHsNCiAgICBsZWZ0OiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCn0NCg0KLyogU2VhcmNoSXRtZXMgQm90dG9tIHRvIFRvcCBhbmkgKi8NCiNsaW5rc193cmFwcGVyICNsaW5rcyB7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9ib3R0b21Ub3RvcDsNCiAgICBhbmltYXRpb24tZHVyYXRpb246IC4zczsNCiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOw0KfQ0KDQovKiBTZWFyY2hCYXIgTGVmdCB0byBSaWdodCBhbmkgKi8NCiNoZWFkZXJfd3JhcHBlciAuaGVhZGVyX19zZWFyY2gtd3JhcCB7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9sZWZ0VG9yaWdodDsNCiAgICBhbmltYXRpb24tZHVyYXRpb246IC4zczsNCiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLW91dDsNCn0NCkBrZXlmcmFtZXMgYW5pX2xlZnRUb3JpZ2h0IHsNCiAgICAwJSB7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMzJweCk7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDIwJSB7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDMwJSB7DQogICAgICAgIG9wYWNpdHk6IDAuODsNCiAgICB9DQogICAgMTAwJSB7DQogICAgICAgIG9wYWNpdHk6IDE7DQogICAgfQ0KfQ0KLyogYW5pICovDQpAa2V5ZnJhbWVzIGFuaV9ib3R0b21Ub3RvcCB7DQogICAgMCUgew0KICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMzJweCk7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDIwJSB7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDMwJSB7DQogICAgICAgIG9wYWNpdHk6IDAuODsNCiAgICB9DQogICAgMTAwJSB7DQogICAgICAgIG9wYWNpdHk6IDE7DQogICAgfQ0KfQ0K"},{"meta":{"name":"duckOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/duckOnePageStyle.css?t=24.19","ts":1614930447494,"mimetype":"text/css"},"source":"LypTdG9yZTogRHVja0R1Y2tHb09uZVBhZ2VTdHlsZSovDQouanMtc2lkZWJhci1hZHMsICNvcmdhbmljLW1vZHVsZSwgLnBpbm5lZC10by1ib3R0b217DQogICAgZGlzcGxheTogbm9uZTsNCn0NCi5qcy1yZXN1bHQtaGlkZGVuLWVsew0KICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsNCn0NCi5zaXRlLXdyYXBwZXIgI3dlYl9jb250ZW50X3dyYXBwZXIgLmN3IHsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIG1heC13aWR0aDogdW5zZXQ7DQogICAgbWFyZ2luLWxlZnQ6IC0xNTBweDsNCn0NCg0KI2hlYWRlcl93cmFwcGVyICNoZWFkZXIsDQojd2ViX2NvbnRlbnRfd3JhcHBlciAjbGlua3Nfd3JhcHBlciAuc2VhcmNoLWZpbHRlcnMtd3JhcCwNCiN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tZXNzYWdlew0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIGRpc3BsYXk6IGdyaWQ7DQp9DQojaGVhZGVyX3dyYXBwZXIgI2hlYWRlciB7DQogICAgbWF4LXdpZHRoOiB1bnNldDsNCn0NCg0KDQojaGVhZGVyX3dyYXBwZXIgI2hlYWRlciAuaGVhZGVyX19zZWFyY2gtd3JhcCB7DQogICAgd2lkdGg6IDUwMHB4Ow0KfQ0KI2xpbmtzX3dyYXBwZXJ7DQogICAgZGlzcGxheTogaW5saW5lLWZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbnsNCiAgICBmbG9hdDogdW5zZXQ7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tc2lkZWJhcnsNCiAgICBtaW4td2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbjogdW5zZXQ7DQp9DQouYm9keS0tc2VycCAuZm9vdGVyew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldDsNCn0NCg=="},{"meta":{"name":"duckTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/duckTwoPageStyle.css?t=24.19","ts":1614930447639,"mimetype":"text/css"},"source":"LypTdG9yZTogRHVja0R1Y2tHb1R3b1BhZ2VTdHlsZSovDQouanMtc2lkZWJhci1hZHMsDQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tc2lkZWJhciwNCiNvcmdhbmljLW1vZHVsZSwNCi5waW5uZWQtdG8tYm90dG9tew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQouanMtcmVzdWx0LWhpZGRlbi1lbHsNCiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7DQp9DQouc2l0ZS13cmFwcGVyICN3ZWJfY29udGVudF93cmFwcGVyIC5jdyB7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbi1sZWZ0OiAtMTUwcHg7DQp9DQoNCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyLA0KI3dlYl9jb250ZW50X3dyYXBwZXIgI2xpbmtzX3dyYXBwZXIgLnNlYXJjaC1maWx0ZXJzLXdyYXAsDQojd2ViX2NvbnRlbnRfd3JhcHBlciAjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWVzc2FnZXsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBkaXNwbGF5OiBncmlkOw0KfQ0KI2hlYWRlcl93cmFwcGVyICNoZWFkZXIgew0KICAgIG1heC13aWR0aDogdW5zZXQ7DQp9DQoNCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyIC5oZWFkZXJfX3NlYXJjaC13cmFwIHsNCiAgICB3aWR0aDogNTAwcHg7DQp9DQojbGlua3Nfd3JhcHBlcnsNCiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCn0NCiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluew0KICAgIGZsb2F0OiB1bnNldDsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLXNpZGViYXJ7DQogICAgbWluLXdpZHRoOiB1bnNldDsNCiAgICBtYXJnaW46IHVuc2V0Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzew0KICAgIHdpZHRoOiA4MHZ3Ow0KICAgIC8qIFRoaXMgbWF5IGNhdXNlIFBhZ2UgZmFpbGVkICovDQogICAgZGlzcGxheTogaW5saW5lLWdyaWQ7DQogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiA1MCUgNTAlOw0KICAgIGdyaWQtdGVtcGxhdGUtYXJlYXM6ICJ4bWFpbiB4bWFpbiI7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbiAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcHsNCiAgICB3aWR0aDogdW5zZXQ7DQogICAgbWFyZ2luLXJpZ2h0OiAxNXB4Ow0KfQ0KI2xpbmtzIC5yZXN1bHQtLW1vcmUsICNsaW5rcyAucmVzdWx0LS1zZXB7DQogICAgZ3JpZC1jb2x1bW4tc3RhcnQ6IDE7DQogICAgZ3JpZC1jb2x1bW4tZW5kOiB4bWFpbi1lbmQ7DQogICAgd2lkdGg6IHVuc2V0ICFpbXBvcnRhbnQ7DQogICAgcGFkZGluZzogMDsNCiAgICBwYWRkaW5nLXJpZ2h0OiAxNXB4Ow0KfQ0KI2xpbmtzIC5yZXN1bHQtLXNlcHsNCiAgICBtYXJnaW4tYm90dG9tOiAyZW07DQp9DQouYm9keS0tc2VycCAuZm9vdGVyew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldDsNCn0NCg=="},{"meta":{"name":"dogeCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/dogeCommonStyle.css?t=24.19","ts":1614930447636,"mimetype":"text/css"},"source":"LypTdG9yZTogRG9nZUNvbW1vblN0eWxlKi8NCmJvZHkgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7DQp9DQoucmVzdWx0c19saW5rc19kZWVwIC5yZXN1bHRfX2ljb257DQogICAgZGlzcGxheTogbm9uZTsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyew0KICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbnsNCiAgICBtYXgtd2lkdGg6IDY3MHB4Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgew0KICAgIHdpZHRoOiA2NzBweDsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIG1hcmdpbi10b3A6IDBweDsNCiAgICBtYXJnaW4tYm90dG9tOiAyNXB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjEpOw0KICAgIHRyYW5zaXRpb246IGFsbCAwLjI1cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOw0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fdGl0bGUgYSB7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsNCiAgICBtYXgtd2lkdGg6IDY0MHB4Ow0KICAgIGNvbG9yOiAjMzQ3NmQyOw0KICAgIGZvbnQtc2l6ZTogc21hbGxlcjsNCn0NCg0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fYm9keXsNCiAgICBwYWRkaW5nOiAxMnB4IDIwcHggIWltcG9ydGFudDsNCn0NCg0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXA6aG92ZXIgew0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsMC4zKTsNCiAgICBib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLW1vei1ib3gtc2hhZG93OiAwIDAgMXB4IGdyYXk7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODsNCiAgICBtYXJnaW46IC0xMnB4IC0yMHB4IDBweCAtMjBweDsNCiAgICBwYWRkaW5nOiA4cHggMjBweCA1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTpob3ZlcjphZnRlciB7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOmFmdGVyIHsNCiAgICBjb250ZW50OiAiIjsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMzNDc2ZDI7DQogICAgYm90dG9tOiAxcHg7DQogICAgbGVmdDogMTAwJTsNCiAgICB3aWR0aDogMDsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOnZpc2l0ZWQsDQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOnZpc2l0ZWQgc3Ryb25nIHsNCiAgICBjb2xvcjogIzY2MDA5OTsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZDpob3ZlcjphZnRlciwNCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZDpob3ZlcjphZnRlciB7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQp9DQoNCi8qIFNlYXJjaEl0bWVzIEJvdHRvbSB0byBUb3AgYW5pICovDQojbGlua3Nfd3JhcHBlciAjbGlua3Mgew0KICAgIGFuaW1hdGlvbi1uYW1lOiBhbmlfYm90dG9tVG90b3A7DQogICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAuM3M7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsNCn0NCg0KLyogU2VhcmNoQmFyIExlZnQgdG8gUmlnaHQgYW5pICovDQojaGVhZGVyX3dyYXBwZXIgLmhlYWRlcl9fc2VhcmNoLXdyYXAgew0KICAgIGFuaW1hdGlvbi1uYW1lOiBhbmlfbGVmdFRvcmlnaHQ7DQogICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAuM3M7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1vdXQ7DQp9DQouQUMuc3Atc2VwYXJhdG9yew0KICAgIG1hcmdpbi10b3A6IC0xNXB4Ow0KfQ0KQGtleWZyYW1lcyBhbmlfbGVmdFRvcmlnaHQgew0KICAgIDAlIHsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQovKiBhbmkgKi8NCkBrZXlmcmFtZXMgYW5pX2JvdHRvbVRvdG9wIHsNCiAgICAwJSB7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgzMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQo="},{"meta":{"name":"dogeOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/dogeOnePageStyle.css?t=24.19","ts":1614930447633,"mimetype":"text/css"},"source":"LypTdG9yZTogRG9nZU9uZVBhZ2VTdHlsZSovDQouanMtc2lkZWJhci1hZHMsICNvcmdhbmljLW1vZHVsZSwgLnBpbm5lZC10by1ib3R0b217DQogICAgZGlzcGxheTogbm9uZTsNCn0NCi5qcy1yZXN1bHQtaGlkZGVuLWVsew0KICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsNCn0NCi5zaXRlLXdyYXBwZXIgI3dlYl9jb250ZW50X3dyYXBwZXIgLmN3IHsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIG1heC13aWR0aDogdW5zZXQ7DQp9DQoNCkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEwMDBweCkgew0KICAgICNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIHsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgfQ0KfQ0KDQojaGVhZGVyX3dyYXBwZXIgI2hlYWRlciwNCiN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5zZWFyY2gtZmlsdGVycy13cmFwLA0KI3dlYl9jb250ZW50X3dyYXBwZXIgI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1lc3NhZ2V7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgZGlzcGxheTogZ3JpZDsNCn0NCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyIHsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KDQojaGVhZGVyX3dyYXBwZXIgI2hlYWRlciAuaGVhZGVyX19zZWFyY2gtd3JhcCB7DQogICAgd2lkdGg6IDUwMHB4Ow0KfQ0KI2xpbmtzX3dyYXBwZXJ7DQogICAgZGlzcGxheTogaW5saW5lLWZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgcGFkZGluZy1sZWZ0OiAwOw0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW57DQogICAgZmxvYXQ6IHVuc2V0Ow0KICAgIG1heC13aWR0aDogODYwcHg7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tc2lkZWJhcnsNCiAgICBtaW4td2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbjogdW5zZXQ7DQp9DQouYm9keS0tc2VycCAuZm9vdGVyew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldDsNCn0NCg=="},{"meta":{"name":"dogeTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/dogeTwoPageStyle.css?t=24.19","ts":1614930447638,"mimetype":"text/css"},"source":"LypTdG9yZTogRG9nZVR3b1BhZ2VTdHlsZSovDQouanMtc2lkZWJhci1hZHMsDQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tc2lkZWJhciwNCiNvcmdhbmljLW1vZHVsZSwNCi5waW5uZWQtdG8tYm90dG9tew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQouanMtcmVzdWx0LWhpZGRlbi1lbHsNCiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7DQp9DQouc2l0ZS13cmFwcGVyICN3ZWJfY29udGVudF93cmFwcGVyIC5jdyB7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbi1sZWZ0OiAtMTUwcHg7DQp9DQoNCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyLA0KI3dlYl9jb250ZW50X3dyYXBwZXIgI2xpbmtzX3dyYXBwZXIgLnNlYXJjaC1maWx0ZXJzLXdyYXAsDQojd2ViX2NvbnRlbnRfd3JhcHBlciAjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWVzc2FnZXsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBkaXNwbGF5OiBncmlkOw0KfQ0KI2hlYWRlcl93cmFwcGVyICNoZWFkZXIgew0KICAgIG1heC13aWR0aDogdW5zZXQ7DQp9DQoNCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyIC5oZWFkZXJfX3NlYXJjaC13cmFwIHsNCiAgICB3aWR0aDogNTAwcHg7DQp9DQojbGlua3Nfd3JhcHBlcnsNCiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCn0NCiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluew0KICAgIGZsb2F0OiB1bnNldDsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLXNpZGViYXJ7DQogICAgbWluLXdpZHRoOiB1bnNldDsNCiAgICBtYXJnaW46IHVuc2V0Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzew0KICAgIHdpZHRoOiA4MHZ3Ow0KICAgIC8qIFRoaXMgbWF5IGNhdXNlIFBhZ2UgZmFpbGVkICovDQogICAgZGlzcGxheTogaW5saW5lLWdyaWQ7DQogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiA1MCUgNTAlOw0KICAgIGdyaWQtdGVtcGxhdGUtYXJlYXM6ICJ4bWFpbiB4bWFpbiI7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbiAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcHsNCiAgICB3aWR0aDogdW5zZXQ7DQogICAgbWFyZ2luLXJpZ2h0OiAxNXB4Ow0KfQ0KI2xpbmtzIC5yZXN1bHQtLW1vcmUsICNsaW5rcyAucmVzdWx0LS1zZXB7DQogICAgZ3JpZC1jb2x1bW4tc3RhcnQ6IDE7DQogICAgZ3JpZC1jb2x1bW4tZW5kOiB4bWFpbi1lbmQ7DQogICAgd2lkdGg6IHVuc2V0ICFpbXBvcnRhbnQ7DQogICAgcGFkZGluZzogMDsNCiAgICBwYWRkaW5nLXJpZ2h0OiAxNXB4Ow0KfQ0KI2xpbmtzIC5yZXN1bHQtLXNlcHsNCiAgICBtYXJnaW4tYm90dG9tOiAyZW07DQp9DQouYm9keS0tc2VycCAuZm9vdGVyew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldDsNCn0NCg=="},{"meta":{"name":"HuYanStyle.css","url":"http://ibaidu.tujidu.com/newcss/HuYanStyle.css?t=24.19","ts":1614930447639,"mimetype":"text/css"},"source":"LyoqU3RvcmUgSHVZYW5TdHlsZSoqLw0KLyoqKioqQmFpZHUtSHVZYW5TdHlsZSoqKioqLw0KYm9keVtiYWlkdV0sDQojd3JhcHBlciAjaGVhZCwNCiN3cmFwcGVyICNzX3RhYiwNCmZvcm0uZm0gLnNfaXB0X3dyLmJnew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IGFydGljbGUsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciwNCiN3cmFwcGVyICNycywNCiN3cmFwcGVyICNjb250ZW50X3JpZ2h0ew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNBQUFBQUEgOw0KICAgIGJvcmRlcjogMXB4IGRvdWJsZSAjQTJEN0Q0IDsNCiAgICBib3JkZXItcmFkaXVzOiAwcHg7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3A6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQ6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3A6aG92ZXIgYXJ0aWNsZXsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDICFpbXBvcnRhbnQ7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciBoMywNCiN3cmFwcGVyICNycyAudHR7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0JCQkJCQiA7DQp9DQovKioqQmluZy1IdVlhblN0eWxlKioqKi8NCi5uYV9jbnQgLm53c19pdG0sDQoubndzX2l0bWIsDQojYl9jb250ZW50ICNiX3Jlc3VsdHM+bGk6bm90KCNtZmFfcm9vdCksDQpib2R5ICNiX2hlYWRlcnsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQUFBQUFBIDsNCiAgICBib3JkZXI6IDFweCBkb3VibGUgI0EyRDdENCA7DQogICAgYm9yZGVyLXJhZGl1czogMHB4Ow0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzIGxpOmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDICFpbXBvcnRhbnQ7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHMgbGkgaDJ7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0JCQkJCQiA7DQp9DQovKioqR29vZ2xlLUh1WWFuU3R5bGUqKioqLw0KYm9keVtnb29nbGVdew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmRGZEZkQ7DQp9DQojcnNvIC5nLCAuYmtXTWdkPi5nLA0KLmJrV01nZCBnLWlubmVyLWNhcmQsDQojcmhzY29sICNyaHMsDQojcmhzY29sICNyaHMgLmc+ZGl2LA0KLmMyeHpUYiAuZywNCi5ydVRjSWQgLmcsDQouZm0wNklmIC5nLA0KLmNVblFLZSAuZywNCi5IYW5RbWYgLmcsDQojcnNvIC5nLA0KI3Jzbz5kaXY6bm90KC5nKT4qew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNBQUFBQUEgOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkICM5Y2QyY2ZBQTsNCiAgICBib3JkZXItcmFkaXVzOiAwcHg7DQp9DQojcnNvIC5nOmhvdmVyLA0KLmJrV01nZD4uZzpob3ZlciB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0NDQ0NDQyAhaW1wb3J0YW50Ow0KICAgIGJvcmRlcjogMXB4IGRvdWJsZSAjOWNkMmNmOw0KfQ0KLmJrV01nZCAuZyBkaXYuciwNCiNyc28gLmcgaDN7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0JCQkJCQiA7DQp9DQovKioqU29nb3UtSHVZYW5TdHlsZSoqKiovDQpib2R5W3NvZ291XSwgI3BhZ2ViYXJfY29udGFpbmVyIGF7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZEZkRmRDsNCn0NCiNtYWluIC5yZXN1bHRzPmRpdnsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQUFBQUFBIDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjOWNkMmNmQUE7DQogICAgYm9yZGVyLXJhZGl1czogMHB4Ow0KfQ0KI21haW4gLnJlc3VsdHM+ZGl2OmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDICFpbXBvcnRhbnQ7DQogICAgYm9yZGVyOiAxcHggZG91YmxlICM5Y2QyY2Y7DQp9DQojbWFpbiAucmVzdWx0cz5kaXYgaDN7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0JCQkJCQiA7DQp9DQovKioqRHVja19Eb2dlLUh1WWFuU3R5bGUqKioqLw0KYm9keVtkdWNrXSxib2R5W2RvZ2Vdew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmRGZEZkQ7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQUFBQUFBIDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjOWNkMmNmQUE7DQogICAgYm9yZGVyLXJhZGl1czogMHB4Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXA6aG92ZXIgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNDQ0NDQ0MgIWltcG9ydGFudDsNCiAgICBib3JkZXI6IDFweCBkb3VibGUgIzljZDJjZjsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNCQkJCQkIgOw0KfQ0K"},{"meta":{"name":"SiteConfigRules.conf","url":"http://ibaidu.tujidu.com/newcss/SiteConfigRules.conf?t=24.19","ts":1614930447637,"mimetype":"text/plain"},"source":"b25saW5lREIgPSB7DQogICBiYWlkdTogew0KICAgICAgIFNpdGVUeXBlSUQ6IDEsDQogICAgICAgTWFpblR5cGU6ICIjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciIsDQogICAgICAgU3R5cGVfTm9ybWFsOiAiaDMudD5hLCAuYy1jb250YWluZXIgYXJ0aWNsZSBhIiwNCiAgICAgICBGYXZpY29uVHlwZTogIi5jLXNob3d1cmwiLA0KICAgICAgIEZhdmljb25BZGRUbzogImgzIiwNCiAgICAgICBDb3VudGVyVHlwZTogIiNjb250ZW50X2xlZnQ+I2RvdWJsZT5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dLCNjb250ZW50X2xlZnQ+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSIsDQogICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsDQogICAgICAgcGFnZXI6ew0KICAgICAgICAgICBuZXh0TGluazogJy8vZGl2W0BpZD0icGFnZSJdLy9hW2NvbnRhaW5zKHRleHQoKSwiw6TCuMKLw6TCuMKAw6nCocK1IildW0BocmVmXScsDQogICAgICAgICAgIHBhZ2VFbGVtZW50OiAiY3NzO2RpdiNjb250ZW50X2xlZnQgPiAqIiwNCiAgICAgICAgICAgSFRfaW5zZXJ0OiBbICJjc3M7ZGl2I2NvbnRlbnRfbGVmdCIsIDIgXSwNCiAgICAgICAgICAgcmVwbGFjZUU6ICJjc3M7I3BhZ2UiLA0KICAgICAgICAgICBzdHlsaXNoOiAiLmF1dG9wYWdlcml6ZV9wYWdlX2luZm8sIGRpdi5zcC1zZXBhcmF0b3Ige21hcmdpbi1ib3R0b206IDEwcHggIWltcG9ydGFudDt9IiwNCiAgICAgICB9DQogICB9LA0KICAgc29nb3U6IHsNCiAgICAgICBTaXRlVHlwZUlEOiAyLA0KICAgICAgIE1haW5UeXBlOiAiI21haW4gLnJlc3VsdHM+ZGl2IiwNCiAgICAgICBTdHlwZV9Ob3JtYWw6ICJoMy5wdD5hLCBoMy52clRpdGxlPmEiLA0KICAgICAgIEZhdmljb25UeXBlOiAiY2l0ZVtpZCo9J2NhY2hlcmVzdWx0X2luZm9fJ10iLA0KICAgICAgIEZhdmljb25BZGRUbzogImgzIiwNCiAgICAgICBDb3VudGVyVHlwZTogIi5yZXN1bHRzPmRpdiIsDQogICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsDQogICAgICAgcGFnZXI6ew0KICAgICAgICAgICBuZXh0TGluazogIi8vZGl2W0BpZD1cInBhZ2ViYXJfY29udGFpbmVyXCJdLy9hW0BpZD1cInNvZ291X25leHRcIl0iLA0KICAgICAgICAgICBwYWdlRWxlbWVudDogIi8vZGl2W0BjbGFzcz0ncmVzdWx0cyddL2RpdiIsDQogICAgICAgICAgIEhUX2luc2VydDogWyIvL2RpdltAY2xhc3M9J3Jlc3VsdHMnXSIsIDJdLA0KICAgICAgICAgICByZXBsYWNlRTogImlkKCdwYWdlYmFyX2NvbnRhaW5lcicpIg0KICAgICAgIH0NCiAgIH0sDQogICBoYW9zb3U6IHsNCiAgICAgICBTaXRlVHlwZUlEOiAzLA0KICAgICAgIE1haW5UeXBlOiAiLnJlcy1saXN0IiwNCiAgICAgICBTdHlwZV9Ob3JtYWw6ICIucmVzLWxpc3QgaDM+YSIsDQogICAgICAgRmF2aWNvblR5cGU6ICJjaXRlIiwNCiAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsDQogICAgICAgQ291bnRlclR5cGU6ICIucmVzdWx0cz5kaXYiLA0KICAgICAgIEJsb2NrVHlwZTogImgzIGEiLA0KICAgICAgIHBhZ2VyOnsNCiAgICAgICAgICAgbmV4dExpbms6ICIvL2RpdltAaWQ9J3BhZ2UnXS8vYVt0ZXh0KCk9J8OkwrjCi8OkwrjCgMOpwqHCtT4nXSB8IGlkKCdzbmV4dCcpIiwNCiAgICAgICAgICAgcGFnZUVsZW1lbnQ6ICIvL2RpdltAaWQ9J2NvbnRhaW5lciddL2RpdiIsDQogICAgICAgICAgIEhUX2luc2VydDogWyIvL2RpdltAaWQ9J2NvbnRhaW5lciddIiwgMl0sDQogICAgICAgICAgIHJlcGxhY2VFOiAiaWQoJ3BhZ2UnKSINCiAgICAgICB9DQogICB9LA0KICAgZ29vZ2xlOiB7DQogICAgICAgU2l0ZVR5cGVJRDogNCwNCiAgICAgICBNYWluVHlwZTogIiNyc28gLmciLA0KICAgICAgIEZhdmljb25UeXBlOiAiLmlVaDMwIiwNCiAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsDQogICAgICAgQ291bnRlclR5cGU6ICIjcnNvIC5nIGgzLC5feUU+ZGl2W2NsYXNzfj1fa2tdIGgzIiwNCiAgICAgICBCbG9ja1R5cGU6ICIucmM+ZGl2PmEsICNycywgI3JzbyAuZyBhIiwNCiAgICAgICBwYWdlcjp7DQogICAgICAgICAgIG5leHRMaW5rOiAnaWQoInBubmV4dCIpIHwgaWQoIm5hdmJhciBuYXZjbnQgbmF2IikvL3RkW3NwYW5dL2ZvbGxvd2luZy1zaWJsaW5nOjp0ZFsxXS9hIHwgaWQoIm5uIikvcGFyZW50OjphJywNCiAgICAgICAgICAgcGFnZUVsZW1lbnQ6ICcvL2RpdltAaWQ9InJlcyJdJywNCiAgICAgICAgICAgSFRfaW5zZXJ0OiBbICJjc3M7I3JlcyIsIDIgXSwNCiAgICAgICAgICAgcmVwbGFjZUU6ICcvL2RpdltAaWQ9Im5hdmNudCJdIHwgLy9kaXZbQHJvbGU9Im5hdmlnYXRpb24iXScNCiAgICAgICB9DQogICB9LA0KICAgYmluZzogew0KICAgICAgIFNpdGVUeXBlSUQ6IDUsDQogICAgICAgTWFpblR5cGU6ICIjYl9yZXN1bHRzPmxpIiwNCiAgICAgICBGYXZpY29uVHlwZTogIi5iX2F0dHJpYnV0aW9uPmNpdGUiLA0KICAgICAgIEZhdmljb25BZGRUbzogImgyIiwNCiAgICAgICBDb3VudGVyVHlwZTogIiNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYW5zXT5oMiwjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2FsZ29dPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIiLA0KICAgICAgIEJsb2NrVHlwZTogImgyIGEiLA0KICAgICAgIHBhZ2VyOnsNCiAgICAgICAgICAgbmV4dExpbms6ICIvL2FbY29udGFpbnMoQGNsYXNzLFwic2JfcGFnTlwiKV0iLA0KICAgICAgICAgICBwYWdlRWxlbWVudDogImlkKFwiYl9yZXN1bHRzXCIpL2xpW25vdChjb250YWlucyhAY2xhc3MsXCJiX3BhZ1wiKSBvciBjb250YWlucyhAY2xhc3MsXCJiX2FucyBiX3RvcFwiKSldIiwNCiAgICAgICAgICAgSFRfaW5zZXJ0OiBbImlkKFwiYl9yZXN1bHRzXCIpL2xpW0BjbGFzcz1cImJfcGFnXCJdIiwgMV0sDQogICAgICAgICAgIHJlcGxhY2VFOiAiaWQoXCJiX3Jlc3VsdHNcIikvL25hdltAcm9sZT1cIm5hdmlnYXRpb25cIl0iLA0KICAgICAgIH0NCiAgIH0sDQogICBkdWNrOiB7DQogICAgICAgU2l0ZVR5cGVJRDogMTAsDQogICAgICAgTWFpblR5cGU6ICIjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCIsDQogICAgICAgRmF2aWNvblR5cGU6ICIucmVzdWx0c19saW5rc19kZWVwIC5yZXN1bHRfX3VybF9fZG9tYWluIiwNCiAgICAgICBGYXZpY29uQWRkVG86ICJoMiIsDQogICAgICAgQ291bnRlclR5cGU6ICIjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiIsDQogICAgICAgQmxvY2tUeXBlOiAiaDIgYSIsDQogICAgICAgcGFnZXI6ew0KICAgICAgICAgICBuZXh0TGluazogIi8vYVtjb250YWlucyhAY2xhc3MsXCJzYl9wYWdOXCIpXSIsDQogICAgICAgICAgIHBhZ2VFbGVtZW50OiAiaWQoXCJiX3Jlc3VsdHNcIikvbGlbbm90KGNvbnRhaW5zKEBjbGFzcyxcImJfcGFnXCIpIG9yIGNvbnRhaW5zKEBjbGFzcyxcImJfYW5zIGJfdG9wXCIpKV0iLA0KICAgICAgICAgICBIVF9pbnNlcnQ6IFsiaWQoXCJiX3Jlc3VsdHNcIikvbGlbQGNsYXNzPVwiYl9wYWdcIl0iLCAxXSwNCiAgICAgICAgICAgcmVwbGFjZUU6ICJpZChcImJfcmVzdWx0c1wiKS8vbmF2W0Byb2xlPVwibmF2aWdhdGlvblwiXSIsDQogICAgICAgfQ0KICAgfSwNCiAgIGRvZ2U6IHsNCiAgICAgIFNpdGVUeXBlSUQ6IDExLA0KICAgICAgTWFpblR5cGU6ICIjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCIsDQogICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fdXJsX19kb21haW4iLA0KICAgICAgRmF2aWNvbkFkZFRvOiAiaDIiLA0KICAgICAgQ291bnRlclR5cGU6ICIjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiIsDQogICAgICBCbG9ja1R5cGU6ICJoMiBhIiwNCiAgICAgIHBhZ2VyOnsNCiAgICAgICAgICBuZXh0TGluazogIi8vYVtjb250YWlucyhAY2xhc3MsICdyZXN1bHQtLW1vcmUnKV0iLA0KICAgICAgICAgIHBhZ2VFbGVtZW50OiAiaWQoJ2xpbmtzX3dyYXBwZXInKS8vZGl2W2NvbnRhaW5zKEBjbGFzcywgJ3Jlc3VsdHNfbGlua3NfZGVlcCcpXSIsDQogICAgICAgICAgSFRfaW5zZXJ0OiBbImlkKCdsaW5rc193cmFwcGVyJykvL2RpdltAaWQ9J2xpbmtzJ10vZGl2W2NvbnRhaW5zKEBjbGFzcywgJ3Jlc3VsdC0tbW9yZScpXSIsIDFdLA0KICAgICAgICAgIHJlcGxhY2VFOiAiaWQoJ2xpbmtzX3dyYXBwZXInKS8vZGl2W2NvbnRhaW5zKEBjbGFzcywgJ3Jlc3VsdC0tbW9yZScpXS9hW2NvbnRhaW5zKHRleHQoKSwgJ8OkwrjCi8OkwrjCgMOpwqHCtScpXVtAaHJlZl0iLA0KICAgICAgfQ0KICAgfSwNCiAgIG1CYWlkdTp7DQogICAgICAgU2l0ZVR5cGVJRDogNiwNCiAgICAgICBNYWluVHlwZTogIiNiX3Jlc3VsdHM+bGkiLA0KICAgICAgIEZhdmljb25UeXBlOiAiLmJfYXR0cmlidXRpb24+Y2l0ZSIsDQogICAgICAgRmF2aWNvbkFkZFRvOiAiaDIiLA0KICAgICAgIENvdW50ZXJUeXBlOiAiI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbnNdPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIsI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXT5oMiIsDQogICAgICAgQmxvY2tUeXBlOiAiaDIgYSIsDQogICB9LA0KICAgemhpaHU6IHsNCiAgICAgICBTaXRlVHlwZUlEOiA3LA0KICAgfSwNCiAgIGJhaWR1X3h1ZXNodTp7DQogICAgICAgU2l0ZVR5cGVJRDogOCwNCiAgICAgICBNYWluVHlwZTogIiNjb250ZW50X2xlZnQgLnJlc3VsdCIsDQogICAgICAgU3R5cGVfTm9ybWFsOiAiaDMudD5hLCAjcmVzdWx0cyAuYy1jb250YWluZXI+LmMtYmxvY2thIiwNCiAgICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHQtb3AsIC5jLXNob3d1cmwiLA0KICAgICAgIEZhdmljb25BZGRUbzogImgzIiwNCiAgICAgICBDb3VudGVyVHlwZTogIiNjb250ZW50X2xlZnQ+I2RvdWJsZT5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dLCNjb250ZW50X2xlZnQ+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSIsDQogICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsDQogICB9LA0KICAgb3RoZXI6IHsNCiAgICAgICBTaXRlVHlwZUlEOiA5LA0KICAgfQ0KfQ0K"}],"requires":[{"meta":{"name":"vue.min.js","url":"https://cdn.staticfile.org/vue/2.6.11/vue.min.js","ts":1614930447197,"mimetype":"text/javascript"},"source":"LyohCiAqIFZ1ZS5qcyB2Mi42LjExCiAqIChjKSAyMDE0LTIwMTkgRXZhbiBZb3UKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgogKi8KIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6KGU9ZXx8c2VsZikuVnVlPXQoKX0odGhpcyxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QuZnJlZXplKHt9KTtmdW5jdGlvbiB0KGUpe3JldHVybiBudWxsPT1lfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIG51bGwhPWV9ZnVuY3Rpb24gcihlKXtyZXR1cm4hMD09PWV9ZnVuY3Rpb24gaShlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV8fCJudW1iZXIiPT10eXBlb2YgZXx8InN5bWJvbCI9PXR5cGVvZiBlfHwiYm9vbGVhbiI9PXR5cGVvZiBlfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIG51bGwhPT1lJiYib2JqZWN0Ij09dHlwZW9mIGV9dmFyIGE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBzKGUpe3JldHVybiJbb2JqZWN0IE9iamVjdF0iPT09YS5jYWxsKGUpfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9cGFyc2VGbG9hdChTdHJpbmcoZSkpO3JldHVybiB0Pj0wJiZNYXRoLmZsb29yKHQpPT09dCYmaXNGaW5pdGUoZSl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gbihlKSYmImZ1bmN0aW9uIj09dHlwZW9mIGUudGhlbiYmImZ1bmN0aW9uIj09dHlwZW9mIGUuY2F0Y2h9ZnVuY3Rpb24gbChlKXtyZXR1cm4gbnVsbD09ZT8iIjpBcnJheS5pc0FycmF5KGUpfHxzKGUpJiZlLnRvU3RyaW5nPT09YT9KU09OLnN0cmluZ2lmeShlLG51bGwsMik6U3RyaW5nKGUpfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9cGFyc2VGbG9hdChlKTtyZXR1cm4gaXNOYU4odCk/ZTp0fWZ1bmN0aW9uIHAoZSx0KXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPWUuc3BsaXQoIiwiKSxpPTA7aTxyLmxlbmd0aDtpKyspbltyW2ldXT0hMDtyZXR1cm4gdD9mdW5jdGlvbihlKXtyZXR1cm4gbltlLnRvTG93ZXJDYXNlKCldfTpmdW5jdGlvbihlKXtyZXR1cm4gbltlXX19dmFyIGQ9cCgic2xvdCxjb21wb25lbnQiLCEwKSx2PXAoImtleSxyZWYsc2xvdCxzbG90LXNjb3BlLGlzIik7ZnVuY3Rpb24gaChlLHQpe2lmKGUubGVuZ3RoKXt2YXIgbj1lLmluZGV4T2YodCk7aWYobj4tMSlyZXR1cm4gZS5zcGxpY2UobiwxKX19dmFyIG09T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiB5KGUsdCl7cmV0dXJuIG0uY2FsbChlLHQpfWZ1bmN0aW9uIGcoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHRbbl18fCh0W25dPWUobikpfX12YXIgXz0vLShcdykvZyxiPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShfLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/dC50b1VwcGVyQ2FzZSgpOiIifSl9KSwkPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKX0pLHc9L1xCKFtBLVpdKS9nLEM9ZyhmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKHcsIi0kMSIpLnRvTG93ZXJDYXNlKCl9KTt2YXIgeD1GdW5jdGlvbi5wcm90b3R5cGUuYmluZD9mdW5jdGlvbihlLHQpe3JldHVybiBlLmJpbmQodCl9OmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihuKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoO3JldHVybiByP3I+MT9lLmFwcGx5KHQsYXJndW1lbnRzKTplLmNhbGwodCxuKTplLmNhbGwodCl9cmV0dXJuIG4uX2xlbmd0aD1lLmxlbmd0aCxufTtmdW5jdGlvbiBrKGUsdCl7dD10fHwwO2Zvcih2YXIgbj1lLmxlbmd0aC10LHI9bmV3IEFycmF5KG4pO24tLTspcltuXT1lW24rdF07cmV0dXJuIHJ9ZnVuY3Rpb24gQShlLHQpe2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBPKGUpe2Zvcih2YXIgdD17fSxuPTA7bjxlLmxlbmd0aDtuKyspZVtuXSYmQSh0LGVbbl0pO3JldHVybiB0fWZ1bmN0aW9uIFMoZSx0LG4pe312YXIgVD1mdW5jdGlvbihlLHQsbil7cmV0dXJuITF9LEU9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9O2Z1bmN0aW9uIE4oZSx0KXtpZihlPT09dClyZXR1cm4hMDt2YXIgbj1vKGUpLHI9byh0KTtpZighbnx8IXIpcmV0dXJuIW4mJiFyJiZTdHJpbmcoZSk9PT1TdHJpbmcodCk7dHJ5e3ZhciBpPUFycmF5LmlzQXJyYXkoZSksYT1BcnJheS5pc0FycmF5KHQpO2lmKGkmJmEpcmV0dXJuIGUubGVuZ3RoPT09dC5sZW5ndGgmJmUuZXZlcnkoZnVuY3Rpb24oZSxuKXtyZXR1cm4gTihlLHRbbl0pfSk7aWYoZSBpbnN0YW5jZW9mIERhdGUmJnQgaW5zdGFuY2VvZiBEYXRlKXJldHVybiBlLmdldFRpbWUoKT09PXQuZ2V0VGltZSgpO2lmKGl8fGEpcmV0dXJuITE7dmFyIHM9T2JqZWN0LmtleXMoZSksYz1PYmplY3Qua2V5cyh0KTtyZXR1cm4gcy5sZW5ndGg9PT1jLmxlbmd0aCYmcy5ldmVyeShmdW5jdGlvbihuKXtyZXR1cm4gTihlW25dLHRbbl0pfSl9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIGooZSx0KXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylpZihOKGVbbl0sdCkpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gRChlKXt2YXIgdD0hMTtyZXR1cm4gZnVuY3Rpb24oKXt0fHwodD0hMCxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fXZhciBMPSJkYXRhLXNlcnZlci1yZW5kZXJlZCIsTT1bImNvbXBvbmVudCIsImRpcmVjdGl2ZSIsImZpbHRlciJdLEk9WyJiZWZvcmVDcmVhdGUiLCJjcmVhdGVkIiwiYmVmb3JlTW91bnQiLCJtb3VudGVkIiwiYmVmb3JlVXBkYXRlIiwidXBkYXRlZCIsImJlZm9yZURlc3Ryb3kiLCJkZXN0cm95ZWQiLCJhY3RpdmF0ZWQiLCJkZWFjdGl2YXRlZCIsImVycm9yQ2FwdHVyZWQiLCJzZXJ2ZXJQcmVmZXRjaCJdLEY9e29wdGlvbk1lcmdlU3RyYXRlZ2llczpPYmplY3QuY3JlYXRlKG51bGwpLHNpbGVudDohMSxwcm9kdWN0aW9uVGlwOiExLGRldnRvb2xzOiExLHBlcmZvcm1hbmNlOiExLGVycm9ySGFuZGxlcjpudWxsLHdhcm5IYW5kbGVyOm51bGwsaWdub3JlZEVsZW1lbnRzOltdLGtleUNvZGVzOk9iamVjdC5jcmVhdGUobnVsbCksaXNSZXNlcnZlZFRhZzpULGlzUmVzZXJ2ZWRBdHRyOlQsaXNVbmtub3duRWxlbWVudDpULGdldFRhZ05hbWVzcGFjZTpTLHBhcnNlUGxhdGZvcm1UYWdOYW1lOkUsbXVzdFVzZVByb3A6VCxhc3luYzohMCxfbGlmZWN5Y2xlSG9va3M6SX0sUD0vYS16QS1aXHUwMEI3XHUwMEMwLVx1MDBENlx1MDBEOC1cdTAwRjZcdTAwRjgtXHUwMzdEXHUwMzdGLVx1MUZGRlx1MjAwQy1cdTIwMERcdTIwM0YtXHUyMDQwXHUyMDcwLVx1MjE4Rlx1MkMwMC1cdTJGRUZcdTMwMDEtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRkQvO2Z1bmN0aW9uIFIoZSx0LG4scil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEhcix3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX12YXIgSD1uZXcgUmVnRXhwKCJbXiIrUC5zb3VyY2UrIi4kX1xcZF0iKTt2YXIgQixVPSJfX3Byb3RvX18iaW57fSx6PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LFY9InVuZGVmaW5lZCIhPXR5cGVvZiBXWEVudmlyb25tZW50JiYhIVdYRW52aXJvbm1lbnQucGxhdGZvcm0sSz1WJiZXWEVudmlyb25tZW50LnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksSj16JiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLHE9SiYmL21zaWV8dHJpZGVudC8udGVzdChKKSxXPUomJkouaW5kZXhPZigibXNpZSA5LjAiKT4wLFo9SiYmSi5pbmRleE9mKCJlZGdlLyIpPjAsRz0oSiYmSi5pbmRleE9mKCJhbmRyb2lkIiksSiYmL2lwaG9uZXxpcGFkfGlwb2R8aW9zLy50ZXN0KEopfHwiaW9zIj09PUspLFg9KEomJi9jaHJvbWVcL1xkKy8udGVzdChKKSxKJiYvcGhhbnRvbWpzLy50ZXN0KEopLEomJkoubWF0Y2goL2ZpcmVmb3hcLyhcZCspLykpLFk9e30ud2F0Y2gsUT0hMTtpZih6KXRyeXt2YXIgZWU9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KGVlLCJwYXNzaXZlIix7Z2V0OmZ1bmN0aW9uKCl7UT0hMH19KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidGVzdC1wYXNzaXZlIixudWxsLGVlKX1jYXRjaChlKXt9dmFyIHRlPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PUImJihCPSF6JiYhViYmInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJihnbG9iYWwucHJvY2VzcyYmInNlcnZlciI9PT1nbG9iYWwucHJvY2Vzcy5lbnYuVlVFX0VOVikpLEJ9LG5lPXomJndpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO2Z1bmN0aW9uIHJlKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiYvbmF0aXZlIGNvZGUvLnRlc3QoZS50b1N0cmluZygpKX12YXIgaWUsb2U9InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJnJlKFN5bWJvbCkmJiJ1bmRlZmluZWQiIT10eXBlb2YgUmVmbGVjdCYmcmUoUmVmbGVjdC5vd25LZXlzKTtpZT0idW5kZWZpbmVkIiE9dHlwZW9mIFNldCYmcmUoU2V0KT9TZXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5zZXQ9T2JqZWN0LmNyZWF0ZShudWxsKX1yZXR1cm4gZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiEwPT09dGhpcy5zZXRbZV19LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt0aGlzLnNldFtlXT0hMH0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNldD1PYmplY3QuY3JlYXRlKG51bGwpfSxlfSgpO3ZhciBhZT1TLHNlPTAsY2U9ZnVuY3Rpb24oKXt0aGlzLmlkPXNlKyssdGhpcy5zdWJzPVtdfTtjZS5wcm90b3R5cGUuYWRkU3ViPWZ1bmN0aW9uKGUpe3RoaXMuc3Vicy5wdXNoKGUpfSxjZS5wcm90b3R5cGUucmVtb3ZlU3ViPWZ1bmN0aW9uKGUpe2godGhpcy5zdWJzLGUpfSxjZS5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Y2UudGFyZ2V0JiZjZS50YXJnZXQuYWRkRGVwKHRoaXMpfSxjZS5wcm90b3R5cGUubm90aWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuc3Vicy5zbGljZSgpLHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspZVt0XS51cGRhdGUoKX0sY2UudGFyZ2V0PW51bGw7dmFyIHVlPVtdO2Z1bmN0aW9uIGxlKGUpe3VlLnB1c2goZSksY2UudGFyZ2V0PWV9ZnVuY3Rpb24gZmUoKXt1ZS5wb3AoKSxjZS50YXJnZXQ9dWVbdWUubGVuZ3RoLTFdfXZhciBwZT1mdW5jdGlvbihlLHQsbixyLGksbyxhLHMpe3RoaXMudGFnPWUsdGhpcy5kYXRhPXQsdGhpcy5jaGlsZHJlbj1uLHRoaXMudGV4dD1yLHRoaXMuZWxtPWksdGhpcy5ucz12b2lkIDAsdGhpcy5jb250ZXh0PW8sdGhpcy5mbkNvbnRleHQ9dm9pZCAwLHRoaXMuZm5PcHRpb25zPXZvaWQgMCx0aGlzLmZuU2NvcGVJZD12b2lkIDAsdGhpcy5rZXk9dCYmdC5rZXksdGhpcy5jb21wb25lbnRPcHRpb25zPWEsdGhpcy5jb21wb25lbnRJbnN0YW5jZT12b2lkIDAsdGhpcy5wYXJlbnQ9dm9pZCAwLHRoaXMucmF3PSExLHRoaXMuaXNTdGF0aWM9ITEsdGhpcy5pc1Jvb3RJbnNlcnQ9ITAsdGhpcy5pc0NvbW1lbnQ9ITEsdGhpcy5pc0Nsb25lZD0hMSx0aGlzLmlzT25jZT0hMSx0aGlzLmFzeW5jRmFjdG9yeT1zLHRoaXMuYXN5bmNNZXRhPXZvaWQgMCx0aGlzLmlzQXN5bmNQbGFjZWhvbGRlcj0hMX0sZGU9e2NoaWxkOntjb25maWd1cmFibGU6ITB9fTtkZS5jaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocGUucHJvdG90eXBlLGRlKTt2YXIgdmU9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9IiIpO3ZhciB0PW5ldyBwZTtyZXR1cm4gdC50ZXh0PWUsdC5pc0NvbW1lbnQ9ITAsdH07ZnVuY3Rpb24gaGUoZSl7cmV0dXJuIG5ldyBwZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCxTdHJpbmcoZSkpfWZ1bmN0aW9uIG1lKGUpe3ZhciB0PW5ldyBwZShlLnRhZyxlLmRhdGEsZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5zbGljZSgpLGUudGV4dCxlLmVsbSxlLmNvbnRleHQsZS5jb21wb25lbnRPcHRpb25zLGUuYXN5bmNGYWN0b3J5KTtyZXR1cm4gdC5ucz1lLm5zLHQuaXNTdGF0aWM9ZS5pc1N0YXRpYyx0LmtleT1lLmtleSx0LmlzQ29tbWVudD1lLmlzQ29tbWVudCx0LmZuQ29udGV4dD1lLmZuQ29udGV4dCx0LmZuT3B0aW9ucz1lLmZuT3B0aW9ucyx0LmZuU2NvcGVJZD1lLmZuU2NvcGVJZCx0LmFzeW5jTWV0YT1lLmFzeW5jTWV0YSx0LmlzQ2xvbmVkPSEwLHR9dmFyIHllPUFycmF5LnByb3RvdHlwZSxnZT1PYmplY3QuY3JlYXRlKHllKTtbInB1c2giLCJwb3AiLCJzaGlmdCIsInVuc2hpZnQiLCJzcGxpY2UiLCJzb3J0IiwicmV2ZXJzZSJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9eWVbZV07UihnZSxlLGZ1bmN0aW9uKCl7Zm9yKHZhciBuPVtdLHI9YXJndW1lbnRzLmxlbmd0aDtyLS07KW5bcl09YXJndW1lbnRzW3JdO3ZhciBpLG89dC5hcHBseSh0aGlzLG4pLGE9dGhpcy5fX29iX187c3dpdGNoKGUpe2Nhc2UicHVzaCI6Y2FzZSJ1bnNoaWZ0IjppPW47YnJlYWs7Y2FzZSJzcGxpY2UiOmk9bi5zbGljZSgyKX1yZXR1cm4gaSYmYS5vYnNlcnZlQXJyYXkoaSksYS5kZXAubm90aWZ5KCksb30pfSk7dmFyIF9lPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdlKSxiZT0hMDtmdW5jdGlvbiAkZShlKXtiZT1lfXZhciB3ZT1mdW5jdGlvbihlKXt2YXIgdDt0aGlzLnZhbHVlPWUsdGhpcy5kZXA9bmV3IGNlLHRoaXMudm1Db3VudD0wLFIoZSwiX19vYl9fIix0aGlzKSxBcnJheS5pc0FycmF5KGUpPyhVPyh0PWdlLGUuX19wcm90b19fPXQpOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspe3ZhciBvPW5bcl07UihlLG8sdFtvXSl9fShlLGdlLF9lKSx0aGlzLm9ic2VydmVBcnJheShlKSk6dGhpcy53YWxrKGUpfTtmdW5jdGlvbiBDZShlLHQpe3ZhciBuO2lmKG8oZSkmJiEoZSBpbnN0YW5jZW9mIHBlKSlyZXR1cm4geShlLCJfX29iX18iKSYmZS5fX29iX18gaW5zdGFuY2VvZiB3ZT9uPWUuX19vYl9fOmJlJiYhdGUoKSYmKEFycmF5LmlzQXJyYXkoZSl8fHMoZSkpJiZPYmplY3QuaXNFeHRlbnNpYmxlKGUpJiYhZS5faXNWdWUmJihuPW5ldyB3ZShlKSksdCYmbiYmbi52bUNvdW50Kyssbn1mdW5jdGlvbiB4ZShlLHQsbixyLGkpe3ZhciBvPW5ldyBjZSxhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtpZighYXx8ITEhPT1hLmNvbmZpZ3VyYWJsZSl7dmFyIHM9YSYmYS5nZXQsYz1hJiZhLnNldDtzJiYhY3x8MiE9PWFyZ3VtZW50cy5sZW5ndGh8fChuPWVbdF0pO3ZhciB1PSFpJiZDZShuKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1zP3MuY2FsbChlKTpuO3JldHVybiBjZS50YXJnZXQmJihvLmRlcGVuZCgpLHUmJih1LmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KHQpJiZmdW5jdGlvbiBlKHQpe2Zvcih2YXIgbj12b2lkIDAscj0wLGk9dC5sZW5ndGg7cjxpO3IrKykobj10W3JdKSYmbi5fX29iX18mJm4uX19vYl9fLmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KG4pJiZlKG4pfSh0KSkpLHR9LHNldDpmdW5jdGlvbih0KXt2YXIgcj1zP3MuY2FsbChlKTpuO3Q9PT1yfHx0IT10JiZyIT1yfHxzJiYhY3x8KGM/Yy5jYWxsKGUsdCk6bj10LHU9IWkmJkNlKHQpLG8ubm90aWZ5KCkpfX0pfX1mdW5jdGlvbiBrZShlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSYmYyh0KSlyZXR1cm4gZS5sZW5ndGg9TWF0aC5tYXgoZS5sZW5ndGgsdCksZS5zcGxpY2UodCwxLG4pLG47aWYodCBpbiBlJiYhKHQgaW4gT2JqZWN0LnByb3RvdHlwZSkpcmV0dXJuIGVbdF09bixuO3ZhciByPWUuX19vYl9fO3JldHVybiBlLl9pc1Z1ZXx8ciYmci52bUNvdW50P246cj8oeGUoci52YWx1ZSx0LG4pLHIuZGVwLm5vdGlmeSgpLG4pOihlW3RdPW4sbil9ZnVuY3Rpb24gQWUoZSx0KXtpZihBcnJheS5pc0FycmF5KGUpJiZjKHQpKWUuc3BsaWNlKHQsMSk7ZWxzZXt2YXIgbj1lLl9fb2JfXztlLl9pc1Z1ZXx8biYmbi52bUNvdW50fHx5KGUsdCkmJihkZWxldGUgZVt0XSxuJiZuLmRlcC5ub3RpZnkoKSl9fXdlLnByb3RvdHlwZS53YWxrPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxuPTA7bjx0Lmxlbmd0aDtuKyspeGUoZSx0W25dKX0sd2UucHJvdG90eXBlLm9ic2VydmVBcnJheT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspQ2UoZVt0XSl9O3ZhciBPZT1GLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztmdW5jdGlvbiBTZShlLHQpe2lmKCF0KXJldHVybiBlO2Zvcih2YXIgbixyLGksbz1vZT9SZWZsZWN0Lm93bktleXModCk6T2JqZWN0LmtleXModCksYT0wO2E8by5sZW5ndGg7YSsrKSJfX29iX18iIT09KG49b1thXSkmJihyPWVbbl0saT10W25dLHkoZSxuKT9yIT09aSYmcyhyKSYmcyhpKSYmU2UocixpKTprZShlLG4saSkpO3JldHVybiBlfWZ1bmN0aW9uIFRlKGUsdCxuKXtyZXR1cm4gbj9mdW5jdGlvbigpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbChuLG4pOnQsaT0iZnVuY3Rpb24iPT10eXBlb2YgZT9lLmNhbGwobixuKTplO3JldHVybiByP1NlKHIsaSk6aX06dD9lP2Z1bmN0aW9uKCl7cmV0dXJuIFNlKCJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbCh0aGlzLHRoaXMpOnQsImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5jYWxsKHRoaXMsdGhpcyk6ZSl9OnQ6ZX1mdW5jdGlvbiBFZShlLHQpe3ZhciBuPXQ/ZT9lLmNvbmNhdCh0KTpBcnJheS5pc0FycmF5KHQpP3Q6W3RdOmU7cmV0dXJuIG4/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MDtuPGUubGVuZ3RoO24rKyktMT09PXQuaW5kZXhPZihlW25dKSYmdC5wdXNoKGVbbl0pO3JldHVybiB0fShuKTpufWZ1bmN0aW9uIE5lKGUsdCxuLHIpe3ZhciBpPU9iamVjdC5jcmVhdGUoZXx8bnVsbCk7cmV0dXJuIHQ/QShpLHQpOml9T2UuZGF0YT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG4/VGUoZSx0LG4pOnQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6VGUoZSx0KX0sSS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2VdPUVlfSksTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2UrInMiXT1OZX0pLE9lLndhdGNoPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKGU9PT1ZJiYoZT12b2lkIDApLHQ9PT1ZJiYodD12b2lkIDApLCF0KXJldHVybiBPYmplY3QuY3JlYXRlKGV8fG51bGwpO2lmKCFlKXJldHVybiB0O3ZhciBpPXt9O2Zvcih2YXIgbyBpbiBBKGksZSksdCl7dmFyIGE9aVtvXSxzPXRbb107YSYmIUFycmF5LmlzQXJyYXkoYSkmJihhPVthXSksaVtvXT1hP2EuY29uY2F0KHMpOkFycmF5LmlzQXJyYXkocyk/czpbc119cmV0dXJuIGl9LE9lLnByb3BzPU9lLm1ldGhvZHM9T2UuaW5qZWN0PU9lLmNvbXB1dGVkPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKCFlKXJldHVybiB0O3ZhciBpPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIEEoaSxlKSx0JiZBKGksdCksaX0sT2UucHJvdmlkZT1UZTt2YXIgamU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9lOnR9O2Z1bmN0aW9uIERlKGUsdCxuKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHQ9dC5vcHRpb25zKSxmdW5jdGlvbihlLHQpe3ZhciBuPWUucHJvcHM7aWYobil7dmFyIHIsaSxvPXt9O2lmKEFycmF5LmlzQXJyYXkobikpZm9yKHI9bi5sZW5ndGg7ci0tOykic3RyaW5nIj09dHlwZW9mKGk9bltyXSkmJihvW2IoaSldPXt0eXBlOm51bGx9KTtlbHNlIGlmKHMobikpZm9yKHZhciBhIGluIG4paT1uW2FdLG9bYihhKV09cyhpKT9pOnt0eXBlOml9O2UucHJvcHM9b319KHQpLGZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5pbmplY3Q7aWYobil7dmFyIHI9ZS5pbmplY3Q9e307aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKylyW25baV1dPXtmcm9tOm5baV19O2Vsc2UgaWYocyhuKSlmb3IodmFyIG8gaW4gbil7dmFyIGE9bltvXTtyW29dPXMoYSk/QSh7ZnJvbTpvfSxhKTp7ZnJvbTphfX19fSh0KSxmdW5jdGlvbihlKXt2YXIgdD1lLmRpcmVjdGl2ZXM7aWYodClmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTsiZnVuY3Rpb24iPT10eXBlb2YgciYmKHRbbl09e2JpbmQ6cix1cGRhdGU6cn0pfX0odCksIXQuX2Jhc2UmJih0LmV4dGVuZHMmJihlPURlKGUsdC5leHRlbmRzLG4pKSx0Lm1peGlucykpZm9yKHZhciByPTAsaT10Lm1peGlucy5sZW5ndGg7cjxpO3IrKyllPURlKGUsdC5taXhpbnNbcl0sbik7dmFyIG8sYT17fTtmb3IobyBpbiBlKWMobyk7Zm9yKG8gaW4gdCl5KGUsbyl8fGMobyk7ZnVuY3Rpb24gYyhyKXt2YXIgaT1PZVtyXXx8amU7YVtyXT1pKGVbcl0sdFtyXSxuLHIpfXJldHVybiBhfWZ1bmN0aW9uIExlKGUsdCxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2Ygbil7dmFyIGk9ZVt0XTtpZih5KGksbikpcmV0dXJuIGlbbl07dmFyIG89YihuKTtpZih5KGksbykpcmV0dXJuIGlbb107dmFyIGE9JChvKTtyZXR1cm4geShpLGEpP2lbYV06aVtuXXx8aVtvXXx8aVthXX19ZnVuY3Rpb24gTWUoZSx0LG4scil7dmFyIGk9dFtlXSxvPSF5KG4sZSksYT1uW2VdLHM9UGUoQm9vbGVhbixpLnR5cGUpO2lmKHM+LTEpaWYobyYmIXkoaSwiZGVmYXVsdCIpKWE9ITE7ZWxzZSBpZigiIj09PWF8fGE9PT1DKGUpKXt2YXIgYz1QZShTdHJpbmcsaS50eXBlKTsoYzwwfHxzPGMpJiYoYT0hMCl9aWYodm9pZCAwPT09YSl7YT1mdW5jdGlvbihlLHQsbil7aWYoIXkodCwiZGVmYXVsdCIpKXJldHVybjt2YXIgcj10LmRlZmF1bHQ7aWYoZSYmZS4kb3B0aW9ucy5wcm9wc0RhdGEmJnZvaWQgMD09PWUuJG9wdGlvbnMucHJvcHNEYXRhW25dJiZ2b2lkIDAhPT1lLl9wcm9wc1tuXSlyZXR1cm4gZS5fcHJvcHNbbl07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHImJiJGdW5jdGlvbiIhPT1JZSh0LnR5cGUpP3IuY2FsbChlKTpyfShyLGksZSk7dmFyIHU9YmU7JGUoITApLENlKGEpLCRlKHUpfXJldHVybiBhfWZ1bmN0aW9uIEllKGUpe3ZhciB0PWUmJmUudG9TdHJpbmcoKS5tYXRjaCgvXlxzKmZ1bmN0aW9uIChcdyspLyk7cmV0dXJuIHQ/dFsxXToiIn1mdW5jdGlvbiBGZShlLHQpe3JldHVybiBJZShlKT09PUllKHQpfWZ1bmN0aW9uIFBlKGUsdCl7aWYoIUFycmF5LmlzQXJyYXkodCkpcmV0dXJuIEZlKHQsZSk/MDotMTtmb3IodmFyIG49MCxyPXQubGVuZ3RoO248cjtuKyspaWYoRmUodFtuXSxlKSlyZXR1cm4gbjtyZXR1cm4tMX1mdW5jdGlvbiBSZShlLHQsbil7bGUoKTt0cnl7aWYodClmb3IodmFyIHI9dDtyPXIuJHBhcmVudDspe3ZhciBpPXIuJG9wdGlvbnMuZXJyb3JDYXB0dXJlZDtpZihpKWZvcih2YXIgbz0wO288aS5sZW5ndGg7bysrKXRyeXtpZighMT09PWlbb10uY2FsbChyLGUsdCxuKSlyZXR1cm59Y2F0Y2goZSl7QmUoZSxyLCJlcnJvckNhcHR1cmVkIGhvb2siKX19QmUoZSx0LG4pfWZpbmFsbHl7ZmUoKX19ZnVuY3Rpb24gSGUoZSx0LG4scixpKXt2YXIgbzt0cnl7KG89bj9lLmFwcGx5KHQsbik6ZS5jYWxsKHQpKSYmIW8uX2lzVnVlJiZ1KG8pJiYhby5faGFuZGxlZCYmKG8uY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIFJlKGUscixpKyIgKFByb21pc2UvYXN5bmMpIil9KSxvLl9oYW5kbGVkPSEwKX1jYXRjaChlKXtSZShlLHIsaSl9cmV0dXJuIG99ZnVuY3Rpb24gQmUoZSx0LG4pe2lmKEYuZXJyb3JIYW5kbGVyKXRyeXtyZXR1cm4gRi5lcnJvckhhbmRsZXIuY2FsbChudWxsLGUsdCxuKX1jYXRjaCh0KXt0IT09ZSYmVWUodCxudWxsLCJjb25maWcuZXJyb3JIYW5kbGVyIil9VWUoZSx0LG4pfWZ1bmN0aW9uIFVlKGUsdCxuKXtpZigheiYmIVZ8fCJ1bmRlZmluZWQiPT10eXBlb2YgY29uc29sZSl0aHJvdyBlO2NvbnNvbGUuZXJyb3IoZSl9dmFyIHplLFZlPSExLEtlPVtdLEplPSExO2Z1bmN0aW9uIHFlKCl7SmU9ITE7dmFyIGU9S2Uuc2xpY2UoMCk7S2UubGVuZ3RoPTA7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspZVt0XSgpfWlmKCJ1bmRlZmluZWQiIT10eXBlb2YgUHJvbWlzZSYmcmUoUHJvbWlzZSkpe3ZhciBXZT1Qcm9taXNlLnJlc29sdmUoKTt6ZT1mdW5jdGlvbigpe1dlLnRoZW4ocWUpLEcmJnNldFRpbWVvdXQoUyl9LFZlPSEwfWVsc2UgaWYocXx8InVuZGVmaW5lZCI9PXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyfHwhcmUoTXV0YXRpb25PYnNlcnZlcikmJiJbb2JqZWN0IE11dGF0aW9uT2JzZXJ2ZXJDb25zdHJ1Y3Rvcl0iIT09TXV0YXRpb25PYnNlcnZlci50b1N0cmluZygpKXplPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2V0SW1tZWRpYXRlJiZyZShzZXRJbW1lZGlhdGUpP2Z1bmN0aW9uKCl7c2V0SW1tZWRpYXRlKHFlKX06ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHFlLDApfTtlbHNle3ZhciBaZT0xLEdlPW5ldyBNdXRhdGlvbk9ic2VydmVyKHFlKSxYZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShTdHJpbmcoWmUpKTtHZS5vYnNlcnZlKFhlLHtjaGFyYWN0ZXJEYXRhOiEwfSksemU9ZnVuY3Rpb24oKXtaZT0oWmUrMSklMixYZS5kYXRhPVN0cmluZyhaZSl9LFZlPSEwfWZ1bmN0aW9uIFllKGUsdCl7dmFyIG47aWYoS2UucHVzaChmdW5jdGlvbigpe2lmKGUpdHJ5e2UuY2FsbCh0KX1jYXRjaChlKXtSZShlLHQsIm5leHRUaWNrIil9ZWxzZSBuJiZuKHQpfSksSmV8fChKZT0hMCx6ZSgpKSwhZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBQcm9taXNlKXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtuPWV9KX12YXIgUWU9bmV3IGllO2Z1bmN0aW9uIGV0KGUpeyFmdW5jdGlvbiBlKHQsbil7dmFyIHIsaTt2YXIgYT1BcnJheS5pc0FycmF5KHQpO2lmKCFhJiYhbyh0KXx8T2JqZWN0LmlzRnJvemVuKHQpfHx0IGluc3RhbmNlb2YgcGUpcmV0dXJuO2lmKHQuX19vYl9fKXt2YXIgcz10Ll9fb2JfXy5kZXAuaWQ7aWYobi5oYXMocykpcmV0dXJuO24uYWRkKHMpfWlmKGEpZm9yKHI9dC5sZW5ndGg7ci0tOyllKHRbcl0sbik7ZWxzZSBmb3IoaT1PYmplY3Qua2V5cyh0KSxyPWkubGVuZ3RoO3ItLTspZSh0W2lbcl1dLG4pfShlLFFlKSxRZS5jbGVhcigpfXZhciB0dD1nKGZ1bmN0aW9uKGUpe3ZhciB0PSImIj09PWUuY2hhckF0KDApLG49In4iPT09KGU9dD9lLnNsaWNlKDEpOmUpLmNoYXJBdCgwKSxyPSIhIj09PShlPW4/ZS5zbGljZSgxKTplKS5jaGFyQXQoMCk7cmV0dXJue25hbWU6ZT1yP2Uuc2xpY2UoMSk6ZSxvbmNlOm4sY2FwdHVyZTpyLHBhc3NpdmU6dH19KTtmdW5jdGlvbiBudChlLHQpe2Z1bmN0aW9uIG4oKXt2YXIgZT1hcmd1bWVudHMscj1uLmZucztpZighQXJyYXkuaXNBcnJheShyKSlyZXR1cm4gSGUocixudWxsLGFyZ3VtZW50cyx0LCJ2LW9uIGhhbmRsZXIiKTtmb3IodmFyIGk9ci5zbGljZSgpLG89MDtvPGkubGVuZ3RoO28rKylIZShpW29dLG51bGwsZSx0LCJ2LW9uIGhhbmRsZXIiKX1yZXR1cm4gbi5mbnM9ZSxufWZ1bmN0aW9uIHJ0KGUsbixpLG8sYSxzKXt2YXIgYyx1LGwsZjtmb3IoYyBpbiBlKXU9ZVtjXSxsPW5bY10sZj10dChjKSx0KHUpfHwodChsKT8odCh1LmZucykmJih1PWVbY109bnQodSxzKSkscihmLm9uY2UpJiYodT1lW2NdPWEoZi5uYW1lLHUsZi5jYXB0dXJlKSksaShmLm5hbWUsdSxmLmNhcHR1cmUsZi5wYXNzaXZlLGYucGFyYW1zKSk6dSE9PWwmJihsLmZucz11LGVbY109bCkpO2ZvcihjIGluIG4pdChlW2NdKSYmbygoZj10dChjKSkubmFtZSxuW2NdLGYuY2FwdHVyZSl9ZnVuY3Rpb24gaXQoZSxpLG8pe3ZhciBhO2UgaW5zdGFuY2VvZiBwZSYmKGU9ZS5kYXRhLmhvb2t8fChlLmRhdGEuaG9vaz17fSkpO3ZhciBzPWVbaV07ZnVuY3Rpb24gYygpe28uYXBwbHkodGhpcyxhcmd1bWVudHMpLGgoYS5mbnMsYyl9dChzKT9hPW50KFtjXSk6bihzLmZucykmJnIocy5tZXJnZWQpPyhhPXMpLmZucy5wdXNoKGMpOmE9bnQoW3MsY10pLGEubWVyZ2VkPSEwLGVbaV09YX1mdW5jdGlvbiBvdChlLHQscixpLG8pe2lmKG4odCkpe2lmKHkodCxyKSlyZXR1cm4gZVtyXT10W3JdLG98fGRlbGV0ZSB0W3JdLCEwO2lmKHkodCxpKSlyZXR1cm4gZVtyXT10W2ldLG98fGRlbGV0ZSB0W2ldLCEwfXJldHVybiExfWZ1bmN0aW9uIGF0KGUpe3JldHVybiBpKGUpP1toZShlKV06QXJyYXkuaXNBcnJheShlKT9mdW5jdGlvbiBlKG8sYSl7dmFyIHM9W107dmFyIGMsdSxsLGY7Zm9yKGM9MDtjPG8ubGVuZ3RoO2MrKyl0KHU9b1tjXSl8fCJib29sZWFuIj09dHlwZW9mIHV8fChsPXMubGVuZ3RoLTEsZj1zW2xdLEFycmF5LmlzQXJyYXkodSk/dS5sZW5ndGg+MCYmKHN0KCh1PWUodSwoYXx8IiIpKyJfIitjKSlbMF0pJiZzdChmKSYmKHNbbF09aGUoZi50ZXh0K3VbMF0udGV4dCksdS5zaGlmdCgpKSxzLnB1c2guYXBwbHkocyx1KSk6aSh1KT9zdChmKT9zW2xdPWhlKGYudGV4dCt1KToiIiE9PXUmJnMucHVzaChoZSh1KSk6c3QodSkmJnN0KGYpP3NbbF09aGUoZi50ZXh0K3UudGV4dCk6KHIoby5faXNWTGlzdCkmJm4odS50YWcpJiZ0KHUua2V5KSYmbihhKSYmKHUua2V5PSJfX3ZsaXN0IithKyJfIitjKyJfXyIpLHMucHVzaCh1KSkpO3JldHVybiBzfShlKTp2b2lkIDB9ZnVuY3Rpb24gc3QoZSl7cmV0dXJuIG4oZSkmJm4oZS50ZXh0KSYmITE9PT1lLmlzQ29tbWVudH1mdW5jdGlvbiBjdChlLHQpe2lmKGUpe2Zvcih2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9b2U/UmVmbGVjdC5vd25LZXlzKGUpOk9iamVjdC5rZXlzKGUpLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG89cltpXTtpZigiX19vYl9fIiE9PW8pe2Zvcih2YXIgYT1lW29dLmZyb20scz10O3M7KXtpZihzLl9wcm92aWRlZCYmeShzLl9wcm92aWRlZCxhKSl7bltvXT1zLl9wcm92aWRlZFthXTticmVha31zPXMuJHBhcmVudH1pZighcyYmImRlZmF1bHQiaW4gZVtvXSl7dmFyIGM9ZVtvXS5kZWZhdWx0O25bb109ImZ1bmN0aW9uIj09dHlwZW9mIGM/Yy5jYWxsKHQpOmN9fX1yZXR1cm4gbn19ZnVuY3Rpb24gdXQoZSx0KXtpZighZXx8IWUubGVuZ3RoKXJldHVybnt9O2Zvcih2YXIgbj17fSxyPTAsaT1lLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1lW3JdLGE9by5kYXRhO2lmKGEmJmEuYXR0cnMmJmEuYXR0cnMuc2xvdCYmZGVsZXRlIGEuYXR0cnMuc2xvdCxvLmNvbnRleHQhPT10JiZvLmZuQ29udGV4dCE9PXR8fCFhfHxudWxsPT1hLnNsb3QpKG4uZGVmYXVsdHx8KG4uZGVmYXVsdD1bXSkpLnB1c2gobyk7ZWxzZXt2YXIgcz1hLnNsb3QsYz1uW3NdfHwobltzXT1bXSk7InRlbXBsYXRlIj09PW8udGFnP2MucHVzaC5hcHBseShjLG8uY2hpbGRyZW58fFtdKTpjLnB1c2gobyl9fWZvcih2YXIgdSBpbiBuKW5bdV0uZXZlcnkobHQpJiZkZWxldGUgblt1XTtyZXR1cm4gbn1mdW5jdGlvbiBsdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJiFlLmFzeW5jRmFjdG9yeXx8IiAiPT09ZS50ZXh0fWZ1bmN0aW9uIGZ0KHQsbixyKXt2YXIgaSxvPU9iamVjdC5rZXlzKG4pLmxlbmd0aD4wLGE9dD8hIXQuJHN0YWJsZTohbyxzPXQmJnQuJGtleTtpZih0KXtpZih0Ll9ub3JtYWxpemVkKXJldHVybiB0Ll9ub3JtYWxpemVkO2lmKGEmJnImJnIhPT1lJiZzPT09ci4ka2V5JiYhbyYmIXIuJGhhc05vcm1hbClyZXR1cm4gcjtmb3IodmFyIGMgaW4gaT17fSx0KXRbY10mJiIkIiE9PWNbMF0mJihpW2NdPXB0KG4sYyx0W2NdKSl9ZWxzZSBpPXt9O2Zvcih2YXIgdSBpbiBuKXUgaW4gaXx8KGlbdV09ZHQobix1KSk7cmV0dXJuIHQmJk9iamVjdC5pc0V4dGVuc2libGUodCkmJih0Ll9ub3JtYWxpemVkPWkpLFIoaSwiJHN0YWJsZSIsYSksUihpLCIka2V5IixzKSxSKGksIiRoYXNOb3JtYWwiLG8pLGl9ZnVuY3Rpb24gcHQoZSx0LG4pe3ZhciByPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD9uLmFwcGx5KG51bGwsYXJndW1lbnRzKTpuKHt9KTtyZXR1cm4oZT1lJiYib2JqZWN0Ij09dHlwZW9mIGUmJiFBcnJheS5pc0FycmF5KGUpP1tlXTphdChlKSkmJigwPT09ZS5sZW5ndGh8fDE9PT1lLmxlbmd0aCYmZVswXS5pc0NvbW1lbnQpP3ZvaWQgMDplfTtyZXR1cm4gbi5wcm94eSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Z2V0OnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyfWZ1bmN0aW9uIGR0KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGVbdF19fWZ1bmN0aW9uIHZ0KGUsdCl7dmFyIHIsaSxhLHMsYztpZihBcnJheS5pc0FycmF5KGUpfHwic3RyaW5nIj09dHlwZW9mIGUpZm9yKHI9bmV3IEFycmF5KGUubGVuZ3RoKSxpPTAsYT1lLmxlbmd0aDtpPGE7aSsrKXJbaV09dChlW2ldLGkpO2Vsc2UgaWYoIm51bWJlciI9PXR5cGVvZiBlKWZvcihyPW5ldyBBcnJheShlKSxpPTA7aTxlO2krKylyW2ldPXQoaSsxLGkpO2Vsc2UgaWYobyhlKSlpZihvZSYmZVtTeW1ib2wuaXRlcmF0b3JdKXtyPVtdO2Zvcih2YXIgdT1lW1N5bWJvbC5pdGVyYXRvcl0oKSxsPXUubmV4dCgpOyFsLmRvbmU7KXIucHVzaCh0KGwudmFsdWUsci5sZW5ndGgpKSxsPXUubmV4dCgpfWVsc2UgZm9yKHM9T2JqZWN0LmtleXMoZSkscj1uZXcgQXJyYXkocy5sZW5ndGgpLGk9MCxhPXMubGVuZ3RoO2k8YTtpKyspYz1zW2ldLHJbaV09dChlW2NdLGMsaSk7cmV0dXJuIG4ocil8fChyPVtdKSxyLl9pc1ZMaXN0PSEwLHJ9ZnVuY3Rpb24gaHQoZSx0LG4scil7dmFyIGksbz10aGlzLiRzY29wZWRTbG90c1tlXTtvPyhuPW58fHt9LHImJihuPUEoQSh7fSxyKSxuKSksaT1vKG4pfHx0KTppPXRoaXMuJHNsb3RzW2VdfHx0O3ZhciBhPW4mJm4uc2xvdDtyZXR1cm4gYT90aGlzLiRjcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIse3Nsb3Q6YX0saSk6aX1mdW5jdGlvbiBtdChlKXtyZXR1cm4gTGUodGhpcy4kb3B0aW9ucywiZmlsdGVycyIsZSl8fEV9ZnVuY3Rpb24geXQoZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT8tMT09PWUuaW5kZXhPZih0KTplIT09dH1mdW5jdGlvbiBndChlLHQsbixyLGkpe3ZhciBvPUYua2V5Q29kZXNbdF18fG47cmV0dXJuIGkmJnImJiFGLmtleUNvZGVzW3RdP3l0KGkscik6bz95dChvLGUpOnI/QyhyKSE9PXQ6dm9pZCAwfWZ1bmN0aW9uIF90KGUsdCxuLHIsaSl7aWYobilpZihvKG4pKXt2YXIgYTtBcnJheS5pc0FycmF5KG4pJiYobj1PKG4pKTt2YXIgcz1mdW5jdGlvbihvKXtpZigiY2xhc3MiPT09b3x8InN0eWxlIj09PW98fHYobykpYT1lO2Vsc2V7dmFyIHM9ZS5hdHRycyYmZS5hdHRycy50eXBlO2E9cnx8Ri5tdXN0VXNlUHJvcCh0LHMsbyk/ZS5kb21Qcm9wc3x8KGUuZG9tUHJvcHM9e30pOmUuYXR0cnN8fChlLmF0dHJzPXt9KX12YXIgYz1iKG8pLHU9QyhvKTtjIGluIGF8fHUgaW4gYXx8KGFbb109bltvXSxpJiYoKGUub258fChlLm9uPXt9KSlbInVwZGF0ZToiK29dPWZ1bmN0aW9uKGUpe25bb109ZX0pKX07Zm9yKHZhciBjIGluIG4pcyhjKX1lbHNlO3JldHVybiBlfWZ1bmN0aW9uIGJ0KGUsdCl7dmFyIG49dGhpcy5fc3RhdGljVHJlZXN8fCh0aGlzLl9zdGF0aWNUcmVlcz1bXSkscj1uW2VdO3JldHVybiByJiYhdD9yOih3dChyPW5bZV09dGhpcy4kb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnNbZV0uY2FsbCh0aGlzLl9yZW5kZXJQcm94eSxudWxsLHRoaXMpLCJfX3N0YXRpY19fIitlLCExKSxyKX1mdW5jdGlvbiAkdChlLHQsbil7cmV0dXJuIHd0KGUsIl9fb25jZV9fIit0KyhuPyJfIituOiIiKSwhMCksZX1mdW5jdGlvbiB3dChlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyllW3JdJiYic3RyaW5nIiE9dHlwZW9mIGVbcl0mJkN0KGVbcl0sdCsiXyIrcixuKTtlbHNlIEN0KGUsdCxuKX1mdW5jdGlvbiBDdChlLHQsbil7ZS5pc1N0YXRpYz0hMCxlLmtleT10LGUuaXNPbmNlPW59ZnVuY3Rpb24geHQoZSx0KXtpZih0KWlmKHModCkpe3ZhciBuPWUub249ZS5vbj9BKHt9LGUub24pOnt9O2Zvcih2YXIgciBpbiB0KXt2YXIgaT1uW3JdLG89dFtyXTtuW3JdPWk/W10uY29uY2F0KGksbyk6b319ZWxzZTtyZXR1cm4gZX1mdW5jdGlvbiBrdChlLHQsbixyKXt0PXR8fHskc3RhYmxlOiFufTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG89ZVtpXTtBcnJheS5pc0FycmF5KG8pP2t0KG8sdCxuKTpvJiYoby5wcm94eSYmKG8uZm4ucHJveHk9ITApLHRbby5rZXldPW8uZm4pfXJldHVybiByJiYodC4ka2V5PXIpLHR9ZnVuY3Rpb24gQXQoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRbbl07InN0cmluZyI9PXR5cGVvZiByJiZyJiYoZVt0W25dXT10W24rMV0pfXJldHVybiBlfWZ1bmN0aW9uIE90KGUsdCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP3QrZTplfWZ1bmN0aW9uIFN0KGUpe2UuX289JHQsZS5fbj1mLGUuX3M9bCxlLl9sPXZ0LGUuX3Q9aHQsZS5fcT1OLGUuX2k9aixlLl9tPWJ0LGUuX2Y9bXQsZS5faz1ndCxlLl9iPV90LGUuX3Y9aGUsZS5fZT12ZSxlLl91PWt0LGUuX2c9eHQsZS5fZD1BdCxlLl9wPU90fWZ1bmN0aW9uIFR0KHQsbixpLG8sYSl7dmFyIHMsYz10aGlzLHU9YS5vcHRpb25zO3kobywiX3VpZCIpPyhzPU9iamVjdC5jcmVhdGUobykpLl9vcmlnaW5hbD1vOihzPW8sbz1vLl9vcmlnaW5hbCk7dmFyIGw9cih1Ll9jb21waWxlZCksZj0hbDt0aGlzLmRhdGE9dCx0aGlzLnByb3BzPW4sdGhpcy5jaGlsZHJlbj1pLHRoaXMucGFyZW50PW8sdGhpcy5saXN0ZW5lcnM9dC5vbnx8ZSx0aGlzLmluamVjdGlvbnM9Y3QodS5pbmplY3QsbyksdGhpcy5zbG90cz1mdW5jdGlvbigpe3JldHVybiBjLiRzbG90c3x8ZnQodC5zY29wZWRTbG90cyxjLiRzbG90cz11dChpLG8pKSxjLiRzbG90c30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInNjb3BlZFNsb3RzIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZnQodC5zY29wZWRTbG90cyx0aGlzLnNsb3RzKCkpfX0pLGwmJih0aGlzLiRvcHRpb25zPXUsdGhpcy4kc2xvdHM9dGhpcy5zbG90cygpLHRoaXMuJHNjb3BlZFNsb3RzPWZ0KHQuc2NvcGVkU2xvdHMsdGhpcy4kc2xvdHMpKSx1Ll9zY29wZUlkP3RoaXMuX2M9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9UHQocyxlLHQsbixyLGYpO3JldHVybiBpJiYhQXJyYXkuaXNBcnJheShpKSYmKGkuZm5TY29wZUlkPXUuX3Njb3BlSWQsaS5mbkNvbnRleHQ9byksaX06dGhpcy5fYz1mdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gUHQocyxlLHQsbixyLGYpfX1mdW5jdGlvbiBFdChlLHQsbixyLGkpe3ZhciBvPW1lKGUpO3JldHVybiBvLmZuQ29udGV4dD1uLG8uZm5PcHRpb25zPXIsdC5zbG90JiYoKG8uZGF0YXx8KG8uZGF0YT17fSkpLnNsb3Q9dC5zbG90KSxvfWZ1bmN0aW9uIE50KGUsdCl7Zm9yKHZhciBuIGluIHQpZVtiKG4pXT10W25dfVN0KFR0LnByb3RvdHlwZSk7dmFyIGp0PXtpbml0OmZ1bmN0aW9uKGUsdCl7aWYoZS5jb21wb25lbnRJbnN0YW5jZSYmIWUuY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkJiZlLmRhdGEua2VlcEFsaXZlKXt2YXIgcj1lO2p0LnByZXBhdGNoKHIscil9ZWxzZXsoZS5jb21wb25lbnRJbnN0YW5jZT1mdW5jdGlvbihlLHQpe3ZhciByPXtfaXNDb21wb25lbnQ6ITAsX3BhcmVudFZub2RlOmUscGFyZW50OnR9LGk9ZS5kYXRhLmlubGluZVRlbXBsYXRlO24oaSkmJihyLnJlbmRlcj1pLnJlbmRlcixyLnN0YXRpY1JlbmRlckZucz1pLnN0YXRpY1JlbmRlckZucyk7cmV0dXJuIG5ldyBlLmNvbXBvbmVudE9wdGlvbnMuQ3RvcihyKX0oZSxXdCkpLiRtb3VudCh0P2UuZWxtOnZvaWQgMCx0KX19LHByZXBhdGNoOmZ1bmN0aW9uKHQsbil7dmFyIHI9bi5jb21wb25lbnRPcHRpb25zOyFmdW5jdGlvbih0LG4scixpLG8pe3ZhciBhPWkuZGF0YS5zY29wZWRTbG90cyxzPXQuJHNjb3BlZFNsb3RzLGM9ISEoYSYmIWEuJHN0YWJsZXx8cyE9PWUmJiFzLiRzdGFibGV8fGEmJnQuJHNjb3BlZFNsb3RzLiRrZXkhPT1hLiRrZXkpLHU9ISEob3x8dC4kb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW58fGMpO3QuJG9wdGlvbnMuX3BhcmVudFZub2RlPWksdC4kdm5vZGU9aSx0Ll92bm9kZSYmKHQuX3Zub2RlLnBhcmVudD1pKTtpZih0LiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbj1vLHQuJGF0dHJzPWkuZGF0YS5hdHRyc3x8ZSx0LiRsaXN0ZW5lcnM9cnx8ZSxuJiZ0LiRvcHRpb25zLnByb3BzKXskZSghMSk7Zm9yKHZhciBsPXQuX3Byb3BzLGY9dC4kb3B0aW9ucy5fcHJvcEtleXN8fFtdLHA9MDtwPGYubGVuZ3RoO3ArKyl7dmFyIGQ9ZltwXSx2PXQuJG9wdGlvbnMucHJvcHM7bFtkXT1NZShkLHYsbix0KX0kZSghMCksdC4kb3B0aW9ucy5wcm9wc0RhdGE9bn1yPXJ8fGU7dmFyIGg9dC4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO3QuJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycz1yLHF0KHQscixoKSx1JiYodC4kc2xvdHM9dXQobyxpLmNvbnRleHQpLHQuJGZvcmNlVXBkYXRlKCkpfShuLmNvbXBvbmVudEluc3RhbmNlPXQuY29tcG9uZW50SW5zdGFuY2Usci5wcm9wc0RhdGEsci5saXN0ZW5lcnMsbixyLmNoaWxkcmVuKX0saW5zZXJ0OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5jb250ZXh0LHI9ZS5jb21wb25lbnRJbnN0YW5jZTtyLl9pc01vdW50ZWR8fChyLl9pc01vdW50ZWQ9ITAsWXQociwibW91bnRlZCIpKSxlLmRhdGEua2VlcEFsaXZlJiYobi5faXNNb3VudGVkPygodD1yKS5faW5hY3RpdmU9ITEsZW4ucHVzaCh0KSk6WHQociwhMCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29tcG9uZW50SW5zdGFuY2U7dC5faXNEZXN0cm95ZWR8fChlLmRhdGEua2VlcEFsaXZlP2Z1bmN0aW9uIGUodCxuKXtpZihuJiYodC5fZGlyZWN0SW5hY3RpdmU9ITAsR3QodCkpKXJldHVybjtpZighdC5faW5hY3RpdmUpe3QuX2luYWN0aXZlPSEwO2Zvcih2YXIgcj0wO3I8dC4kY2hpbGRyZW4ubGVuZ3RoO3IrKyllKHQuJGNoaWxkcmVuW3JdKTtZdCh0LCJkZWFjdGl2YXRlZCIpfX0odCwhMCk6dC4kZGVzdHJveSgpKX19LER0PU9iamVjdC5rZXlzKGp0KTtmdW5jdGlvbiBMdChpLGEscyxjLGwpe2lmKCF0KGkpKXt2YXIgZj1zLiRvcHRpb25zLl9iYXNlO2lmKG8oaSkmJihpPWYuZXh0ZW5kKGkpKSwiZnVuY3Rpb24iPT10eXBlb2YgaSl7dmFyIHA7aWYodChpLmNpZCkmJnZvaWQgMD09PShpPWZ1bmN0aW9uKGUsaSl7aWYocihlLmVycm9yKSYmbihlLmVycm9yQ29tcCkpcmV0dXJuIGUuZXJyb3JDb21wO2lmKG4oZS5yZXNvbHZlZCkpcmV0dXJuIGUucmVzb2x2ZWQ7dmFyIGE9SHQ7YSYmbihlLm93bmVycykmJi0xPT09ZS5vd25lcnMuaW5kZXhPZihhKSYmZS5vd25lcnMucHVzaChhKTtpZihyKGUubG9hZGluZykmJm4oZS5sb2FkaW5nQ29tcCkpcmV0dXJuIGUubG9hZGluZ0NvbXA7aWYoYSYmIW4oZS5vd25lcnMpKXt2YXIgcz1lLm93bmVycz1bYV0sYz0hMCxsPW51bGwsZj1udWxsO2EuJG9uKCJob29rOmRlc3Ryb3llZCIsZnVuY3Rpb24oKXtyZXR1cm4gaChzLGEpfSk7dmFyIHA9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1zLmxlbmd0aDt0PG47dCsrKXNbdF0uJGZvcmNlVXBkYXRlKCk7ZSYmKHMubGVuZ3RoPTAsbnVsbCE9PWwmJihjbGVhclRpbWVvdXQobCksbD1udWxsKSxudWxsIT09ZiYmKGNsZWFyVGltZW91dChmKSxmPW51bGwpKX0sZD1EKGZ1bmN0aW9uKHQpe2UucmVzb2x2ZWQ9QnQodCxpKSxjP3MubGVuZ3RoPTA6cCghMCl9KSx2PUQoZnVuY3Rpb24odCl7bihlLmVycm9yQ29tcCkmJihlLmVycm9yPSEwLHAoITApKX0pLG09ZShkLHYpO3JldHVybiBvKG0pJiYodShtKT90KGUucmVzb2x2ZWQpJiZtLnRoZW4oZCx2KTp1KG0uY29tcG9uZW50KSYmKG0uY29tcG9uZW50LnRoZW4oZCx2KSxuKG0uZXJyb3IpJiYoZS5lcnJvckNvbXA9QnQobS5lcnJvcixpKSksbihtLmxvYWRpbmcpJiYoZS5sb2FkaW5nQ29tcD1CdChtLmxvYWRpbmcsaSksMD09PW0uZGVsYXk/ZS5sb2FkaW5nPSEwOmw9c2V0VGltZW91dChmdW5jdGlvbigpe2w9bnVsbCx0KGUucmVzb2x2ZWQpJiZ0KGUuZXJyb3IpJiYoZS5sb2FkaW5nPSEwLHAoITEpKX0sbS5kZWxheXx8MjAwKSksbihtLnRpbWVvdXQpJiYoZj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zj1udWxsLHQoZS5yZXNvbHZlZCkmJnYobnVsbCl9LG0udGltZW91dCkpKSksYz0hMSxlLmxvYWRpbmc/ZS5sb2FkaW5nQ29tcDplLnJlc29sdmVkfX0ocD1pLGYpKSlyZXR1cm4gZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz12ZSgpO3JldHVybiBvLmFzeW5jRmFjdG9yeT1lLG8uYXN5bmNNZXRhPXtkYXRhOnQsY29udGV4dDpuLGNoaWxkcmVuOnIsdGFnOml9LG99KHAsYSxzLGMsbCk7YT1hfHx7fSwkbihpKSxuKGEubW9kZWwpJiZmdW5jdGlvbihlLHQpe3ZhciByPWUubW9kZWwmJmUubW9kZWwucHJvcHx8InZhbHVlIixpPWUubW9kZWwmJmUubW9kZWwuZXZlbnR8fCJpbnB1dCI7KHQuYXR0cnN8fCh0LmF0dHJzPXt9KSlbcl09dC5tb2RlbC52YWx1ZTt2YXIgbz10Lm9ufHwodC5vbj17fSksYT1vW2ldLHM9dC5tb2RlbC5jYWxsYmFjaztuKGEpPyhBcnJheS5pc0FycmF5KGEpPy0xPT09YS5pbmRleE9mKHMpOmEhPT1zKSYmKG9baV09W3NdLmNvbmNhdChhKSk6b1tpXT1zfShpLm9wdGlvbnMsYSk7dmFyIGQ9ZnVuY3Rpb24oZSxyLGkpe3ZhciBvPXIub3B0aW9ucy5wcm9wcztpZighdChvKSl7dmFyIGE9e30scz1lLmF0dHJzLGM9ZS5wcm9wcztpZihuKHMpfHxuKGMpKWZvcih2YXIgdSBpbiBvKXt2YXIgbD1DKHUpO290KGEsYyx1LGwsITApfHxvdChhLHMsdSxsLCExKX1yZXR1cm4gYX19KGEsaSk7aWYocihpLm9wdGlvbnMuZnVuY3Rpb25hbCkpcmV0dXJuIGZ1bmN0aW9uKHQscixpLG8sYSl7dmFyIHM9dC5vcHRpb25zLGM9e30sdT1zLnByb3BzO2lmKG4odSkpZm9yKHZhciBsIGluIHUpY1tsXT1NZShsLHUscnx8ZSk7ZWxzZSBuKGkuYXR0cnMpJiZOdChjLGkuYXR0cnMpLG4oaS5wcm9wcykmJk50KGMsaS5wcm9wcyk7dmFyIGY9bmV3IFR0KGksYyxhLG8sdCkscD1zLnJlbmRlci5jYWxsKG51bGwsZi5fYyxmKTtpZihwIGluc3RhbmNlb2YgcGUpcmV0dXJuIEV0KHAsaSxmLnBhcmVudCxzKTtpZihBcnJheS5pc0FycmF5KHApKXtmb3IodmFyIGQ9YXQocCl8fFtdLHY9bmV3IEFycmF5KGQubGVuZ3RoKSxoPTA7aDxkLmxlbmd0aDtoKyspdltoXT1FdChkW2hdLGksZi5wYXJlbnQscyk7cmV0dXJuIHZ9fShpLGQsYSxzLGMpO3ZhciB2PWEub247aWYoYS5vbj1hLm5hdGl2ZU9uLHIoaS5vcHRpb25zLmFic3RyYWN0KSl7dmFyIG09YS5zbG90O2E9e30sbSYmKGEuc2xvdD1tKX0hZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuaG9va3x8KGUuaG9vaz17fSksbj0wO248RHQubGVuZ3RoO24rKyl7dmFyIHI9RHRbbl0saT10W3JdLG89anRbcl07aT09PW98fGkmJmkuX21lcmdlZHx8KHRbcl09aT9NdChvLGkpOm8pfX0oYSk7dmFyIHk9aS5vcHRpb25zLm5hbWV8fGw7cmV0dXJuIG5ldyBwZSgidnVlLWNvbXBvbmVudC0iK2kuY2lkKyh5PyItIit5OiIiKSxhLHZvaWQgMCx2b2lkIDAsdm9pZCAwLHMse0N0b3I6aSxwcm9wc0RhdGE6ZCxsaXN0ZW5lcnM6dix0YWc6bCxjaGlsZHJlbjpjfSxwKX19fWZ1bmN0aW9uIE10KGUsdCl7dmFyIG49ZnVuY3Rpb24obixyKXtlKG4sciksdChuLHIpfTtyZXR1cm4gbi5fbWVyZ2VkPSEwLG59dmFyIEl0PTEsRnQ9MjtmdW5jdGlvbiBQdChlLGEscyxjLHUsbCl7cmV0dXJuKEFycmF5LmlzQXJyYXkocyl8fGkocykpJiYodT1jLGM9cyxzPXZvaWQgMCkscihsKSYmKHU9RnQpLGZ1bmN0aW9uKGUsaSxhLHMsYyl7aWYobihhKSYmbihhLl9fb2JfXykpcmV0dXJuIHZlKCk7bihhKSYmbihhLmlzKSYmKGk9YS5pcyk7aWYoIWkpcmV0dXJuIHZlKCk7QXJyYXkuaXNBcnJheShzKSYmImZ1bmN0aW9uIj09dHlwZW9mIHNbMF0mJigoYT1hfHx7fSkuc2NvcGVkU2xvdHM9e2RlZmF1bHQ6c1swXX0scy5sZW5ndGg9MCk7Yz09PUZ0P3M9YXQocyk6Yz09PUl0JiYocz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylpZihBcnJheS5pc0FycmF5KGVbdF0pKXJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGUpO3JldHVybiBlfShzKSk7dmFyIHUsbDtpZigic3RyaW5nIj09dHlwZW9mIGkpe3ZhciBmO2w9ZS4kdm5vZGUmJmUuJHZub2RlLm5zfHxGLmdldFRhZ05hbWVzcGFjZShpKSx1PUYuaXNSZXNlcnZlZFRhZyhpKT9uZXcgcGUoRi5wYXJzZVBsYXRmb3JtVGFnTmFtZShpKSxhLHMsdm9pZCAwLHZvaWQgMCxlKTphJiZhLnByZXx8IW4oZj1MZShlLiRvcHRpb25zLCJjb21wb25lbnRzIixpKSk/bmV3IHBlKGksYSxzLHZvaWQgMCx2b2lkIDAsZSk6THQoZixhLGUscyxpKX1lbHNlIHU9THQoaSxhLGUscyk7cmV0dXJuIEFycmF5LmlzQXJyYXkodSk/dTpuKHUpPyhuKGwpJiZmdW5jdGlvbiBlKGksbyxhKXtpLm5zPW87ImZvcmVpZ25PYmplY3QiPT09aS50YWcmJihvPXZvaWQgMCxhPSEwKTtpZihuKGkuY2hpbGRyZW4pKWZvcih2YXIgcz0wLGM9aS5jaGlsZHJlbi5sZW5ndGg7czxjO3MrKyl7dmFyIHU9aS5jaGlsZHJlbltzXTtuKHUudGFnKSYmKHQodS5ucyl8fHIoYSkmJiJzdmciIT09dS50YWcpJiZlKHUsbyxhKX19KHUsbCksbihhKSYmZnVuY3Rpb24oZSl7byhlLnN0eWxlKSYmZXQoZS5zdHlsZSk7byhlLmNsYXNzKSYmZXQoZS5jbGFzcyl9KGEpLHUpOnZlKCl9KGUsYSxzLGMsdSl9dmFyIFJ0LEh0PW51bGw7ZnVuY3Rpb24gQnQoZSx0KXtyZXR1cm4oZS5fX2VzTW9kdWxlfHxvZSYmIk1vZHVsZSI9PT1lW1N5bWJvbC50b1N0cmluZ1RhZ10pJiYoZT1lLmRlZmF1bHQpLG8oZSk/dC5leHRlbmQoZSk6ZX1mdW5jdGlvbiBVdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJmUuYXN5bmNGYWN0b3J5fWZ1bmN0aW9uIHp0KGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07aWYobihyKSYmKG4oci5jb21wb25lbnRPcHRpb25zKXx8VXQocikpKXJldHVybiByfX1mdW5jdGlvbiBWdChlLHQpe1J0LiRvbihlLHQpfWZ1bmN0aW9uIEt0KGUsdCl7UnQuJG9mZihlLHQpfWZ1bmN0aW9uIEp0KGUsdCl7dmFyIG49UnQ7cmV0dXJuIGZ1bmN0aW9uIHIoKXtudWxsIT09dC5hcHBseShudWxsLGFyZ3VtZW50cykmJm4uJG9mZihlLHIpfX1mdW5jdGlvbiBxdChlLHQsbil7UnQ9ZSxydCh0LG58fHt9LFZ0LEt0LEp0LGUpLFJ0PXZvaWQgMH12YXIgV3Q9bnVsbDtmdW5jdGlvbiBadChlKXt2YXIgdD1XdDtyZXR1cm4gV3Q9ZSxmdW5jdGlvbigpe1d0PXR9fWZ1bmN0aW9uIEd0KGUpe2Zvcig7ZSYmKGU9ZS4kcGFyZW50KTspaWYoZS5faW5hY3RpdmUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gWHQoZSx0KXtpZih0KXtpZihlLl9kaXJlY3RJbmFjdGl2ZT0hMSxHdChlKSlyZXR1cm59ZWxzZSBpZihlLl9kaXJlY3RJbmFjdGl2ZSlyZXR1cm47aWYoZS5faW5hY3RpdmV8fG51bGw9PT1lLl9pbmFjdGl2ZSl7ZS5faW5hY3RpdmU9ITE7Zm9yKHZhciBuPTA7bjxlLiRjaGlsZHJlbi5sZW5ndGg7bisrKVh0KGUuJGNoaWxkcmVuW25dKTtZdChlLCJhY3RpdmF0ZWQiKX19ZnVuY3Rpb24gWXQoZSx0KXtsZSgpO3ZhciBuPWUuJG9wdGlvbnNbdF0scj10KyIgaG9vayI7aWYobilmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspSGUobltpXSxlLG51bGwsZSxyKTtlLl9oYXNIb29rRXZlbnQmJmUuJGVtaXQoImhvb2s6Iit0KSxmZSgpfXZhciBRdD1bXSxlbj1bXSx0bj17fSxubj0hMSxybj0hMSxvbj0wO3ZhciBhbj0wLHNuPURhdGUubm93O2lmKHomJiFxKXt2YXIgY249d2luZG93LnBlcmZvcm1hbmNlO2NuJiYiZnVuY3Rpb24iPT10eXBlb2YgY24ubm93JiZzbigpPmRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLnRpbWVTdGFtcCYmKHNuPWZ1bmN0aW9uKCl7cmV0dXJuIGNuLm5vdygpfSl9ZnVuY3Rpb24gdW4oKXt2YXIgZSx0O2Zvcihhbj1zbigpLHJuPSEwLFF0LnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5pZC10LmlkfSksb249MDtvbjxRdC5sZW5ndGg7b24rKykoZT1RdFtvbl0pLmJlZm9yZSYmZS5iZWZvcmUoKSx0PWUuaWQsdG5bdF09bnVsbCxlLnJ1bigpO3ZhciBuPWVuLnNsaWNlKCkscj1RdC5zbGljZSgpO29uPVF0Lmxlbmd0aD1lbi5sZW5ndGg9MCx0bj17fSxubj1ybj0hMSxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdLl9pbmFjdGl2ZT0hMCxYdChlW3RdLCEwKX0obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7Zm9yKDt0LS07KXt2YXIgbj1lW3RdLHI9bi52bTtyLl93YXRjaGVyPT09biYmci5faXNNb3VudGVkJiYhci5faXNEZXN0cm95ZWQmJll0KHIsInVwZGF0ZWQiKX19KHIpLG5lJiZGLmRldnRvb2xzJiZuZS5lbWl0KCJmbHVzaCIpfXZhciBsbj0wLGZuPWZ1bmN0aW9uKGUsdCxuLHIsaSl7dGhpcy52bT1lLGkmJihlLl93YXRjaGVyPXRoaXMpLGUuX3dhdGNoZXJzLnB1c2godGhpcykscj8odGhpcy5kZWVwPSEhci5kZWVwLHRoaXMudXNlcj0hIXIudXNlcix0aGlzLmxhenk9ISFyLmxhenksdGhpcy5zeW5jPSEhci5zeW5jLHRoaXMuYmVmb3JlPXIuYmVmb3JlKTp0aGlzLmRlZXA9dGhpcy51c2VyPXRoaXMubGF6eT10aGlzLnN5bmM9ITEsdGhpcy5jYj1uLHRoaXMuaWQ9Kytsbix0aGlzLmFjdGl2ZT0hMCx0aGlzLmRpcnR5PXRoaXMubGF6eSx0aGlzLmRlcHM9W10sdGhpcy5uZXdEZXBzPVtdLHRoaXMuZGVwSWRzPW5ldyBpZSx0aGlzLm5ld0RlcElkcz1uZXcgaWUsdGhpcy5leHByZXNzaW9uPSIiLCJmdW5jdGlvbiI9PXR5cGVvZiB0P3RoaXMuZ2V0dGVyPXQ6KHRoaXMuZ2V0dGVyPWZ1bmN0aW9uKGUpe2lmKCFILnRlc3QoZSkpe3ZhciB0PWUuc3BsaXQoIi4iKTtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe2lmKCFlKXJldHVybjtlPWVbdFtuXV19cmV0dXJuIGV9fX0odCksdGhpcy5nZXR0ZXJ8fCh0aGlzLmdldHRlcj1TKSksdGhpcy52YWx1ZT10aGlzLmxhenk/dm9pZCAwOnRoaXMuZ2V0KCl9O2ZuLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgZTtsZSh0aGlzKTt2YXIgdD10aGlzLnZtO3RyeXtlPXRoaXMuZ2V0dGVyLmNhbGwodCx0KX1jYXRjaChlKXtpZighdGhpcy51c2VyKXRocm93IGU7UmUoZSx0LCdnZXR0ZXIgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZmluYWxseXt0aGlzLmRlZXAmJmV0KGUpLGZlKCksdGhpcy5jbGVhbnVwRGVwcygpfXJldHVybiBlfSxmbi5wcm90b3R5cGUuYWRkRGVwPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaWQ7dGhpcy5uZXdEZXBJZHMuaGFzKHQpfHwodGhpcy5uZXdEZXBJZHMuYWRkKHQpLHRoaXMubmV3RGVwcy5wdXNoKGUpLHRoaXMuZGVwSWRzLmhhcyh0KXx8ZS5hZGRTdWIodGhpcykpfSxmbi5wcm90b3R5cGUuY2xlYW51cERlcHM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5kZXBzLmxlbmd0aDtlLS07KXt2YXIgdD10aGlzLmRlcHNbZV07dGhpcy5uZXdEZXBJZHMuaGFzKHQuaWQpfHx0LnJlbW92ZVN1Yih0aGlzKX12YXIgbj10aGlzLmRlcElkczt0aGlzLmRlcElkcz10aGlzLm5ld0RlcElkcyx0aGlzLm5ld0RlcElkcz1uLHRoaXMubmV3RGVwSWRzLmNsZWFyKCksbj10aGlzLmRlcHMsdGhpcy5kZXBzPXRoaXMubmV3RGVwcyx0aGlzLm5ld0RlcHM9bix0aGlzLm5ld0RlcHMubGVuZ3RoPTB9LGZuLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmxhenk/dGhpcy5kaXJ0eT0hMDp0aGlzLnN5bmM/dGhpcy5ydW4oKTpmdW5jdGlvbihlKXt2YXIgdD1lLmlkO2lmKG51bGw9PXRuW3RdKXtpZih0blt0XT0hMCxybil7Zm9yKHZhciBuPVF0Lmxlbmd0aC0xO24+b24mJlF0W25dLmlkPmUuaWQ7KW4tLTtRdC5zcGxpY2UobisxLDAsZSl9ZWxzZSBRdC5wdXNoKGUpO25ufHwobm49ITAsWWUodW4pKX19KHRoaXMpfSxmbi5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpe3ZhciBlPXRoaXMuZ2V0KCk7aWYoZSE9PXRoaXMudmFsdWV8fG8oZSl8fHRoaXMuZGVlcCl7dmFyIHQ9dGhpcy52YWx1ZTtpZih0aGlzLnZhbHVlPWUsdGhpcy51c2VyKXRyeXt0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfWNhdGNoKGUpe1JlKGUsdGhpcy52bSwnY2FsbGJhY2sgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZWxzZSB0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfX19LGZuLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbigpe3RoaXMudmFsdWU9dGhpcy5nZXQoKSx0aGlzLmRpcnR5PSExfSxmbi5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuZGVwcy5sZW5ndGg7ZS0tOyl0aGlzLmRlcHNbZV0uZGVwZW5kKCl9LGZuLnByb3RvdHlwZS50ZWFyZG93bj1mdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZlKXt0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkfHxoKHRoaXMudm0uX3dhdGNoZXJzLHRoaXMpO2Zvcih2YXIgZT10aGlzLmRlcHMubGVuZ3RoO2UtLTspdGhpcy5kZXBzW2VdLnJlbW92ZVN1Yih0aGlzKTt0aGlzLmFjdGl2ZT0hMX19O3ZhciBwbj17ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0OlMsc2V0OlN9O2Z1bmN0aW9uIGRuKGUsdCxuKXtwbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1t0XVtuXX0scG4uc2V0PWZ1bmN0aW9uKGUpe3RoaXNbdF1bbl09ZX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbixwbil9ZnVuY3Rpb24gdm4oZSl7ZS5fd2F0Y2hlcnM9W107dmFyIHQ9ZS4kb3B0aW9uczt0LnByb3BzJiZmdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnMucHJvcHNEYXRhfHx7fSxyPWUuX3Byb3BzPXt9LGk9ZS4kb3B0aW9ucy5fcHJvcEtleXM9W107ZS4kcGFyZW50JiYkZSghMSk7dmFyIG89ZnVuY3Rpb24obyl7aS5wdXNoKG8pO3ZhciBhPU1lKG8sdCxuLGUpO3hlKHIsbyxhKSxvIGluIGV8fGRuKGUsIl9wcm9wcyIsbyl9O2Zvcih2YXIgYSBpbiB0KW8oYSk7JGUoITApfShlLHQucHJvcHMpLHQubWV0aG9kcyYmZnVuY3Rpb24oZSx0KXtlLiRvcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWVbbl09ImZ1bmN0aW9uIiE9dHlwZW9mIHRbbl0/Uzp4KHRbbl0sZSl9KGUsdC5tZXRob2RzKSx0LmRhdGE/ZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5kYXRhO3ModD1lLl9kYXRhPSJmdW5jdGlvbiI9PXR5cGVvZiB0P2Z1bmN0aW9uKGUsdCl7bGUoKTt0cnl7cmV0dXJuIGUuY2FsbCh0LHQpfWNhdGNoKGUpe3JldHVybiBSZShlLHQsImRhdGEoKSIpLHt9fWZpbmFsbHl7ZmUoKX19KHQsZSk6dHx8e30pfHwodD17fSk7dmFyIG49T2JqZWN0LmtleXModCkscj1lLiRvcHRpb25zLnByb3BzLGk9KGUuJG9wdGlvbnMubWV0aG9kcyxuLmxlbmd0aCk7Zm9yKDtpLS07KXt2YXIgbz1uW2ldO3ImJnkocixvKXx8KGE9dm9pZCAwLDM2IT09KGE9KG8rIiIpLmNoYXJDb2RlQXQoMCkpJiY5NSE9PWEmJmRuKGUsIl9kYXRhIixvKSl9dmFyIGE7Q2UodCwhMCl9KGUpOkNlKGUuX2RhdGE9e30sITApLHQuY29tcHV0ZWQmJmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5fY29tcHV0ZWRXYXRjaGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGUoKTtmb3IodmFyIGkgaW4gdCl7dmFyIG89dFtpXSxhPSJmdW5jdGlvbiI9PXR5cGVvZiBvP286by5nZXQ7cnx8KG5baV09bmV3IGZuKGUsYXx8UyxTLGhuKSksaSBpbiBlfHxtbihlLGksbyl9fShlLHQuY29tcHV0ZWQpLHQud2F0Y2gmJnQud2F0Y2ghPT1ZJiZmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dO2lmKEFycmF5LmlzQXJyYXkocikpZm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspX24oZSxuLHJbaV0pO2Vsc2UgX24oZSxuLHIpfX0oZSx0LndhdGNoKX12YXIgaG49e2xhenk6ITB9O2Z1bmN0aW9uIG1uKGUsdCxuKXt2YXIgcj0hdGUoKTsiZnVuY3Rpb24iPT10eXBlb2Ygbj8ocG4uZ2V0PXI/eW4odCk6Z24obikscG4uc2V0PVMpOihwbi5nZXQ9bi5nZXQ/ciYmITEhPT1uLmNhY2hlP3luKHQpOmduKG4uZ2V0KTpTLHBuLnNldD1uLnNldHx8UyksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxwbil9ZnVuY3Rpb24geW4oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY29tcHV0ZWRXYXRjaGVycyYmdGhpcy5fY29tcHV0ZWRXYXRjaGVyc1tlXTtpZih0KXJldHVybiB0LmRpcnR5JiZ0LmV2YWx1YXRlKCksY2UudGFyZ2V0JiZ0LmRlcGVuZCgpLHQudmFsdWV9fWZ1bmN0aW9uIGduKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyx0aGlzKX19ZnVuY3Rpb24gX24oZSx0LG4scil7cmV0dXJuIHMobikmJihyPW4sbj1uLmhhbmRsZXIpLCJzdHJpbmciPT10eXBlb2YgbiYmKG49ZVtuXSksZS4kd2F0Y2godCxuLHIpfXZhciBibj0wO2Z1bmN0aW9uICRuKGUpe3ZhciB0PWUub3B0aW9ucztpZihlLnN1cGVyKXt2YXIgbj0kbihlLnN1cGVyKTtpZihuIT09ZS5zdXBlck9wdGlvbnMpe2Uuc3VwZXJPcHRpb25zPW47dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLm9wdGlvbnMscj1lLnNlYWxlZE9wdGlvbnM7Zm9yKHZhciBpIGluIG4pbltpXSE9PXJbaV0mJih0fHwodD17fSksdFtpXT1uW2ldKTtyZXR1cm4gdH0oZSk7ciYmQShlLmV4dGVuZE9wdGlvbnMsciksKHQ9ZS5vcHRpb25zPURlKG4sZS5leHRlbmRPcHRpb25zKSkubmFtZSYmKHQuY29tcG9uZW50c1t0Lm5hbWVdPWUpfX1yZXR1cm4gdH1mdW5jdGlvbiB3bihlKXt0aGlzLl9pbml0KGUpfWZ1bmN0aW9uIENuKGUpe2UuY2lkPTA7dmFyIHQ9MTtlLmV4dGVuZD1mdW5jdGlvbihlKXtlPWV8fHt9O3ZhciBuPXRoaXMscj1uLmNpZCxpPWUuX0N0b3J8fChlLl9DdG9yPXt9KTtpZihpW3JdKXJldHVybiBpW3JdO3ZhciBvPWUubmFtZXx8bi5vcHRpb25zLm5hbWUsYT1mdW5jdGlvbihlKXt0aGlzLl9pbml0KGUpfTtyZXR1cm4oYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWEsYS5jaWQ9dCsrLGEub3B0aW9ucz1EZShuLm9wdGlvbnMsZSksYS5zdXBlcj1uLGEub3B0aW9ucy5wcm9wcyYmZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWRuKGUucHJvdG90eXBlLCJfcHJvcHMiLG4pfShhKSxhLm9wdGlvbnMuY29tcHV0ZWQmJmZ1bmN0aW9uKGUpe3ZhciB0PWUub3B0aW9ucy5jb21wdXRlZDtmb3IodmFyIG4gaW4gdCltbihlLnByb3RvdHlwZSxuLHRbbl0pfShhKSxhLmV4dGVuZD1uLmV4dGVuZCxhLm1peGluPW4ubWl4aW4sYS51c2U9bi51c2UsTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2FbZV09bltlXX0pLG8mJihhLm9wdGlvbnMuY29tcG9uZW50c1tvXT1hKSxhLnN1cGVyT3B0aW9ucz1uLm9wdGlvbnMsYS5leHRlbmRPcHRpb25zPWUsYS5zZWFsZWRPcHRpb25zPUEoe30sYS5vcHRpb25zKSxpW3JdPWEsYX19ZnVuY3Rpb24geG4oZSl7cmV0dXJuIGUmJihlLkN0b3Iub3B0aW9ucy5uYW1lfHxlLnRhZyl9ZnVuY3Rpb24ga24oZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lLmluZGV4T2YodCk+LTE6InN0cmluZyI9PXR5cGVvZiBlP2Uuc3BsaXQoIiwiKS5pbmRleE9mKHQpPi0xOihuPWUsIltvYmplY3QgUmVnRXhwXSI9PT1hLmNhbGwobikmJmUudGVzdCh0KSk7dmFyIG59ZnVuY3Rpb24gQW4oZSx0KXt2YXIgbj1lLmNhY2hlLHI9ZS5rZXlzLGk9ZS5fdm5vZGU7Zm9yKHZhciBvIGluIG4pe3ZhciBhPW5bb107aWYoYSl7dmFyIHM9eG4oYS5jb21wb25lbnRPcHRpb25zKTtzJiYhdChzKSYmT24obixvLHIsaSl9fX1mdW5jdGlvbiBPbihlLHQsbixyKXt2YXIgaT1lW3RdOyFpfHxyJiZpLnRhZz09PXIudGFnfHxpLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCksZVt0XT1udWxsLGgobix0KX0hZnVuY3Rpb24odCl7dC5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcztuLl91aWQ9Ym4rKyxuLl9pc1Z1ZT0hMCx0JiZ0Ll9pc0NvbXBvbmVudD9mdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLmNvbnN0cnVjdG9yLm9wdGlvbnMpLHI9dC5fcGFyZW50Vm5vZGU7bi5wYXJlbnQ9dC5wYXJlbnQsbi5fcGFyZW50Vm5vZGU9cjt2YXIgaT1yLmNvbXBvbmVudE9wdGlvbnM7bi5wcm9wc0RhdGE9aS5wcm9wc0RhdGEsbi5fcGFyZW50TGlzdGVuZXJzPWkubGlzdGVuZXJzLG4uX3JlbmRlckNoaWxkcmVuPWkuY2hpbGRyZW4sbi5fY29tcG9uZW50VGFnPWkudGFnLHQucmVuZGVyJiYobi5yZW5kZXI9dC5yZW5kZXIsbi5zdGF0aWNSZW5kZXJGbnM9dC5zdGF0aWNSZW5kZXJGbnMpfShuLHQpOm4uJG9wdGlvbnM9RGUoJG4obi5jb25zdHJ1Y3RvciksdHx8e30sbiksbi5fcmVuZGVyUHJveHk9bixuLl9zZWxmPW4sZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucyxuPXQucGFyZW50O2lmKG4mJiF0LmFic3RyYWN0KXtmb3IoO24uJG9wdGlvbnMuYWJzdHJhY3QmJm4uJHBhcmVudDspbj1uLiRwYXJlbnQ7bi4kY2hpbGRyZW4ucHVzaChlKX1lLiRwYXJlbnQ9bixlLiRyb290PW4/bi4kcm9vdDplLGUuJGNoaWxkcmVuPVtdLGUuJHJlZnM9e30sZS5fd2F0Y2hlcj1udWxsLGUuX2luYWN0aXZlPW51bGwsZS5fZGlyZWN0SW5hY3RpdmU9ITEsZS5faXNNb3VudGVkPSExLGUuX2lzRGVzdHJveWVkPSExLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITF9KG4pLGZ1bmN0aW9uKGUpe2UuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLGUuX2hhc0hvb2tFdmVudD0hMTt2YXIgdD1lLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7dCYmcXQoZSx0KX0obiksZnVuY3Rpb24odCl7dC5fdm5vZGU9bnVsbCx0Ll9zdGF0aWNUcmVlcz1udWxsO3ZhciBuPXQuJG9wdGlvbnMscj10LiR2bm9kZT1uLl9wYXJlbnRWbm9kZSxpPXImJnIuY29udGV4dDt0LiRzbG90cz11dChuLl9yZW5kZXJDaGlsZHJlbixpKSx0LiRzY29wZWRTbG90cz1lLHQuX2M9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMSl9LHQuJGNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMCl9O3ZhciBvPXImJnIuZGF0YTt4ZSh0LCIkYXR0cnMiLG8mJm8uYXR0cnN8fGUsbnVsbCwhMCkseGUodCwiJGxpc3RlbmVycyIsbi5fcGFyZW50TGlzdGVuZXJzfHxlLG51bGwsITApfShuKSxZdChuLCJiZWZvcmVDcmVhdGUiKSxmdW5jdGlvbihlKXt2YXIgdD1jdChlLiRvcHRpb25zLmluamVjdCxlKTt0JiYoJGUoITEpLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7eGUoZSxuLHRbbl0pfSksJGUoITApKX0obiksdm4obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5wcm92aWRlO3QmJihlLl9wcm92aWRlZD0iZnVuY3Rpb24iPT10eXBlb2YgdD90LmNhbGwoZSk6dCl9KG4pLFl0KG4sImNyZWF0ZWQiKSxuLiRvcHRpb25zLmVsJiZuLiRtb3VudChuLiRvcHRpb25zLmVsKX19KHduKSxmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fSxuPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcHN9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRkYXRhIix0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRwcm9wcyIsbiksZS5wcm90b3R5cGUuJHNldD1rZSxlLnByb3RvdHlwZS4kZGVsZXRlPUFlLGUucHJvdG90eXBlLiR3YXRjaD1mdW5jdGlvbihlLHQsbil7aWYocyh0KSlyZXR1cm4gX24odGhpcyxlLHQsbik7KG49bnx8e30pLnVzZXI9ITA7dmFyIHI9bmV3IGZuKHRoaXMsZSx0LG4pO2lmKG4uaW1tZWRpYXRlKXRyeXt0LmNhbGwodGhpcyxyLnZhbHVlKX1jYXRjaChlKXtSZShlLHRoaXMsJ2NhbGxiYWNrIGZvciBpbW1lZGlhdGUgd2F0Y2hlciAiJytyLmV4cHJlc3Npb24rJyInKX1yZXR1cm4gZnVuY3Rpb24oKXtyLnRlYXJkb3duKCl9fX0od24pLGZ1bmN0aW9uKGUpe3ZhciB0PS9eaG9vazovO2UucHJvdG90eXBlLiRvbj1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXM7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIGk9MCxvPWUubGVuZ3RoO2k8bztpKyspci4kb24oZVtpXSxuKTtlbHNlKHIuX2V2ZW50c1tlXXx8KHIuX2V2ZW50c1tlXT1bXSkpLnB1c2gobiksdC50ZXN0KGUpJiYoci5faGFzSG9va0V2ZW50PSEwKTtyZXR1cm4gcn0sZS5wcm90b3R5cGUuJG9uY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2Z1bmN0aW9uIHIoKXtuLiRvZmYoZSxyKSx0LmFwcGx5KG4sYXJndW1lbnRzKX1yZXR1cm4gci5mbj10LG4uJG9uKGUsciksbn0sZS5wcm90b3R5cGUuJG9mZj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG4uX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLG47aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciByPTAsaT1lLmxlbmd0aDtyPGk7cisrKW4uJG9mZihlW3JdLHQpO3JldHVybiBufXZhciBvLGE9bi5fZXZlbnRzW2VdO2lmKCFhKXJldHVybiBuO2lmKCF0KXJldHVybiBuLl9ldmVudHNbZV09bnVsbCxuO2Zvcih2YXIgcz1hLmxlbmd0aDtzLS07KWlmKChvPWFbc10pPT09dHx8by5mbj09PXQpe2Euc3BsaWNlKHMsMSk7YnJlYWt9cmV0dXJuIG59LGUucHJvdG90eXBlLiRlbWl0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2V2ZW50c1tlXTtpZih0KXt0PXQubGVuZ3RoPjE/ayh0KTp0O2Zvcih2YXIgbj1rKGFyZ3VtZW50cywxKSxyPSdldmVudCBoYW5kbGVyIGZvciAiJytlKyciJyxpPTAsbz10Lmxlbmd0aDtpPG87aSsrKUhlKHRbaV0sdGhpcyxuLHRoaXMscil9cmV0dXJuIHRoaXN9fSh3biksZnVuY3Rpb24oZSl7ZS5wcm90b3R5cGUuX3VwZGF0ZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMscj1uLiRlbCxpPW4uX3Zub2RlLG89WnQobik7bi5fdm5vZGU9ZSxuLiRlbD1pP24uX19wYXRjaF9fKGksZSk6bi5fX3BhdGNoX18obi4kZWwsZSx0LCExKSxvKCksciYmKHIuX192dWVfXz1udWxsKSxuLiRlbCYmKG4uJGVsLl9fdnVlX189biksbi4kdm5vZGUmJm4uJHBhcmVudCYmbi4kdm5vZGU9PT1uLiRwYXJlbnQuX3Zub2RlJiYobi4kcGFyZW50LiRlbD1uLiRlbCl9LGUucHJvdG90eXBlLiRmb3JjZVVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXImJnRoaXMuX3dhdGNoZXIudXBkYXRlKCl9LGUucHJvdG90eXBlLiRkZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighZS5faXNCZWluZ0Rlc3Ryb3llZCl7WXQoZSwiYmVmb3JlRGVzdHJveSIpLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITA7dmFyIHQ9ZS4kcGFyZW50OyF0fHx0Ll9pc0JlaW5nRGVzdHJveWVkfHxlLiRvcHRpb25zLmFic3RyYWN0fHxoKHQuJGNoaWxkcmVuLGUpLGUuX3dhdGNoZXImJmUuX3dhdGNoZXIudGVhcmRvd24oKTtmb3IodmFyIG49ZS5fd2F0Y2hlcnMubGVuZ3RoO24tLTspZS5fd2F0Y2hlcnNbbl0udGVhcmRvd24oKTtlLl9kYXRhLl9fb2JfXyYmZS5fZGF0YS5fX29iX18udm1Db3VudC0tLGUuX2lzRGVzdHJveWVkPSEwLGUuX19wYXRjaF9fKGUuX3Zub2RlLG51bGwpLFl0KGUsImRlc3Ryb3llZCIpLGUuJG9mZigpLGUuJGVsJiYoZS4kZWwuX192dWVfXz1udWxsKSxlLiR2bm9kZSYmKGUuJHZub2RlLnBhcmVudD1udWxsKX19fSh3biksZnVuY3Rpb24oZSl7U3QoZS5wcm90b3R5cGUpLGUucHJvdG90eXBlLiRuZXh0VGljaz1mdW5jdGlvbihlKXtyZXR1cm4gWWUoZSx0aGlzKX0sZS5wcm90b3R5cGUuX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuJG9wdGlvbnMscj1uLnJlbmRlcixpPW4uX3BhcmVudFZub2RlO2kmJih0LiRzY29wZWRTbG90cz1mdChpLmRhdGEuc2NvcGVkU2xvdHMsdC4kc2xvdHMsdC4kc2NvcGVkU2xvdHMpKSx0LiR2bm9kZT1pO3RyeXtIdD10LGU9ci5jYWxsKHQuX3JlbmRlclByb3h5LHQuJGNyZWF0ZUVsZW1lbnQpfWNhdGNoKG4pe1JlKG4sdCwicmVuZGVyIiksZT10Ll92bm9kZX1maW5hbGx5e0h0PW51bGx9cmV0dXJuIEFycmF5LmlzQXJyYXkoZSkmJjE9PT1lLmxlbmd0aCYmKGU9ZVswXSksZSBpbnN0YW5jZW9mIHBlfHwoZT12ZSgpKSxlLnBhcmVudD1pLGV9fSh3bik7dmFyIFNuPVtTdHJpbmcsUmVnRXhwLEFycmF5XSxUbj17S2VlcEFsaXZlOntuYW1lOiJrZWVwLWFsaXZlIixhYnN0cmFjdDohMCxwcm9wczp7aW5jbHVkZTpTbixleGNsdWRlOlNuLG1heDpbU3RyaW5nLE51bWJlcl19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5rZXlzPVtdfSxkZXN0cm95ZWQ6ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gdGhpcy5jYWNoZSlPbih0aGlzLmNhY2hlLGUsdGhpcy5rZXlzKX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy4kd2F0Y2goImluY2x1ZGUiLGZ1bmN0aW9uKHQpe0FuKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGtuKHQsZSl9KX0pLHRoaXMuJHdhdGNoKCJleGNsdWRlIixmdW5jdGlvbih0KXtBbihlLGZ1bmN0aW9uKGUpe3JldHVybiFrbih0LGUpfSl9KX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kc2xvdHMuZGVmYXVsdCx0PXp0KGUpLG49dCYmdC5jb21wb25lbnRPcHRpb25zO2lmKG4pe3ZhciByPXhuKG4pLGk9dGhpcy5pbmNsdWRlLG89dGhpcy5leGNsdWRlO2lmKGkmJighcnx8IWtuKGkscikpfHxvJiZyJiZrbihvLHIpKXJldHVybiB0O3ZhciBhPXRoaXMuY2FjaGUscz10aGlzLmtleXMsYz1udWxsPT10LmtleT9uLkN0b3IuY2lkKyhuLnRhZz8iOjoiK24udGFnOiIiKTp0LmtleTthW2NdPyh0LmNvbXBvbmVudEluc3RhbmNlPWFbY10uY29tcG9uZW50SW5zdGFuY2UsaChzLGMpLHMucHVzaChjKSk6KGFbY109dCxzLnB1c2goYyksdGhpcy5tYXgmJnMubGVuZ3RoPnBhcnNlSW50KHRoaXMubWF4KSYmT24oYSxzWzBdLHMsdGhpcy5fdm5vZGUpKSx0LmRhdGEua2VlcEFsaXZlPSEwfXJldHVybiB0fHxlJiZlWzBdfX19OyFmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEZ9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiY29uZmlnIix0KSxlLnV0aWw9e3dhcm46YWUsZXh0ZW5kOkEsbWVyZ2VPcHRpb25zOkRlLGRlZmluZVJlYWN0aXZlOnhlfSxlLnNldD1rZSxlLmRlbGV0ZT1BZSxlLm5leHRUaWNrPVllLGUub2JzZXJ2YWJsZT1mdW5jdGlvbihlKXtyZXR1cm4gQ2UoZSksZX0sZS5vcHRpb25zPU9iamVjdC5jcmVhdGUobnVsbCksTS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Uub3B0aW9uc1t0KyJzIl09T2JqZWN0LmNyZWF0ZShudWxsKX0pLGUub3B0aW9ucy5fYmFzZT1lLEEoZS5vcHRpb25zLmNvbXBvbmVudHMsVG4pLGZ1bmN0aW9uKGUpe2UudXNlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2luc3RhbGxlZFBsdWdpbnN8fCh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zPVtdKTtpZih0LmluZGV4T2YoZSk+LTEpcmV0dXJuIHRoaXM7dmFyIG49ayhhcmd1bWVudHMsMSk7cmV0dXJuIG4udW5zaGlmdCh0aGlzKSwiZnVuY3Rpb24iPT10eXBlb2YgZS5pbnN0YWxsP2UuaW5zdGFsbC5hcHBseShlLG4pOiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmFwcGx5KG51bGwsbiksdC5wdXNoKGUpLHRoaXN9fShlKSxmdW5jdGlvbihlKXtlLm1peGluPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnM9RGUodGhpcy5vcHRpb25zLGUpLHRoaXN9fShlKSxDbihlKSxmdW5jdGlvbihlKXtNLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBuPygiY29tcG9uZW50Ij09PXQmJnMobikmJihuLm5hbWU9bi5uYW1lfHxlLG49dGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChuKSksImRpcmVjdGl2ZSI9PT10JiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmKG49e2JpbmQ6bix1cGRhdGU6bn0pLHRoaXMub3B0aW9uc1t0KyJzIl1bZV09bixuKTp0aGlzLm9wdGlvbnNbdCsicyJdW2VdfX0pfShlKX0od24pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRpc1NlcnZlciIse2dldDp0ZX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRzc3JDb250ZXh0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHZub2RlJiZ0aGlzLiR2bm9kZS5zc3JDb250ZXh0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3biwiRnVuY3Rpb25hbFJlbmRlckNvbnRleHQiLHt2YWx1ZTpUdH0pLHduLnZlcnNpb249IjIuNi4xMSI7dmFyIEVuPXAoInN0eWxlLGNsYXNzIiksTm49cCgiaW5wdXQsdGV4dGFyZWEsb3B0aW9uLHNlbGVjdCxwcm9ncmVzcyIpLGpuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4idmFsdWUiPT09biYmTm4oZSkmJiJidXR0b24iIT09dHx8InNlbGVjdGVkIj09PW4mJiJvcHRpb24iPT09ZXx8ImNoZWNrZWQiPT09biYmImlucHV0Ij09PWV8fCJtdXRlZCI9PT1uJiYidmlkZW8iPT09ZX0sRG49cCgiY29udGVudGVkaXRhYmxlLGRyYWdnYWJsZSxzcGVsbGNoZWNrIiksTG49cCgiZXZlbnRzLGNhcmV0LHR5cGluZyxwbGFpbnRleHQtb25seSIpLE1uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEhuKHQpfHwiZmFsc2UiPT09dD8iZmFsc2UiOiJjb250ZW50ZWRpdGFibGUiPT09ZSYmTG4odCk/dDoidHJ1ZSJ9LEluPXAoImFsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLGVuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSxyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLHRydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUiKSxGbj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsUG49ZnVuY3Rpb24oZSl7cmV0dXJuIjoiPT09ZS5jaGFyQXQoNSkmJiJ4bGluayI9PT1lLnNsaWNlKDAsNSl9LFJuPWZ1bmN0aW9uKGUpe3JldHVybiBQbihlKT9lLnNsaWNlKDYsZS5sZW5ndGgpOiIifSxIbj1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZXx8ITE9PT1lfTtmdW5jdGlvbiBCbihlKXtmb3IodmFyIHQ9ZS5kYXRhLHI9ZSxpPWU7bihpLmNvbXBvbmVudEluc3RhbmNlKTspKGk9aS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpJiZpLmRhdGEmJih0PVVuKGkuZGF0YSx0KSk7Zm9yKDtuKHI9ci5wYXJlbnQpOylyJiZyLmRhdGEmJih0PVVuKHQsci5kYXRhKSk7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYobihlKXx8bih0KSlyZXR1cm4gem4oZSxWbih0KSk7cmV0dXJuIiJ9KHQuc3RhdGljQ2xhc3MsdC5jbGFzcyl9ZnVuY3Rpb24gVW4oZSx0KXtyZXR1cm57c3RhdGljQ2xhc3M6em4oZS5zdGF0aWNDbGFzcyx0LnN0YXRpY0NsYXNzKSxjbGFzczpuKGUuY2xhc3MpP1tlLmNsYXNzLHQuY2xhc3NdOnQuY2xhc3N9fWZ1bmN0aW9uIHpuKGUsdCl7cmV0dXJuIGU/dD9lKyIgIit0OmU6dHx8IiJ9ZnVuY3Rpb24gVm4oZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9IiIsaT0wLG89ZS5sZW5ndGg7aTxvO2krKyluKHQ9Vm4oZVtpXSkpJiYiIiE9PXQmJihyJiYocis9IiAiKSxyKz10KTtyZXR1cm4gcn0oZSk6byhlKT9mdW5jdGlvbihlKXt2YXIgdD0iIjtmb3IodmFyIG4gaW4gZSllW25dJiYodCYmKHQrPSIgIiksdCs9bik7cmV0dXJuIHR9KGUpOiJzdHJpbmciPT10eXBlb2YgZT9lOiIifXZhciBLbj17c3ZnOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsbWF0aDoiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCJ9LEpuPXAoImh0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGgxLGgyLGgzLGg0LGg1LGg2LGhncm91cCxuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSxkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnRjLHJ1YnkscyxzYW1wLHNtYWxsLHNwYW4sc3Ryb25nLHN1YixzdXAsdGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSxjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsY2FwdGlvbixjb2wsY29sZ3JvdXAsdGFibGUsdGhlYWQsdGJvZHksdGQsdGgsdHIsYnV0dG9uLGRhdGFsaXN0LGZpZWxkc2V0LGZvcm0saW5wdXQsbGFiZWwsbGVnZW5kLG1ldGVyLG9wdGdyb3VwLG9wdGlvbixvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLGRldGFpbHMsZGlhbG9nLG1lbnUsbWVudWl0ZW0sc3VtbWFyeSxjb250ZW50LGVsZW1lbnQsc2hhZG93LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290IikscW49cCgic3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLGZvcmVpZ25PYmplY3QsZyxnbHlwaCxpbWFnZSxsaW5lLG1hcmtlcixtYXNrLG1pc3NpbmctZ2x5cGgscGF0aCxwYXR0ZXJuLHBvbHlnb24scG9seWxpbmUscmVjdCxzd2l0Y2gsc3ltYm9sLHRleHQsdGV4dHBhdGgsdHNwYW4sdXNlLHZpZXciLCEwKSxXbj1mdW5jdGlvbihlKXtyZXR1cm4gSm4oZSl8fHFuKGUpfTtmdW5jdGlvbiBabihlKXtyZXR1cm4gcW4oZSk/InN2ZyI6Im1hdGgiPT09ZT8ibWF0aCI6dm9pZCAwfXZhciBHbj1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBYbj1wKCJ0ZXh0LG51bWJlcixwYXNzd29yZCxzZWFyY2gsZW1haWwsdGVsLHVybCIpO2Z1bmN0aW9uIFluKGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSl7dmFyIHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKTtyZXR1cm4gdHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iil9cmV0dXJuIGV9dmFyIFFuPU9iamVjdC5mcmVlemUoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiJzZWxlY3QiIT09ZT9uOih0LmRhdGEmJnQuZGF0YS5hdHRycyYmdm9pZCAwIT09dC5kYXRhLmF0dHJzLm11bHRpcGxlJiZuLnNldEF0dHJpYnV0ZSgibXVsdGlwbGUiLCJtdWx0aXBsZSIpLG4pfSxjcmVhdGVFbGVtZW50TlM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKEtuW2VdLHQpfSxjcmVhdGVUZXh0Tm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSl9LGNyZWF0ZUNvbW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoZSl9LGluc2VydEJlZm9yZTpmdW5jdGlvbihlLHQsbil7ZS5pbnNlcnRCZWZvcmUodCxuKX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oZSx0KXtlLnJlbW92ZUNoaWxkKHQpfSxhcHBlbmRDaGlsZDpmdW5jdGlvbihlLHQpe2UuYXBwZW5kQ2hpbGQodCl9LHBhcmVudE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZX0sbmV4dFNpYmxpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubmV4dFNpYmxpbmd9LHRhZ05hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnTmFtZX0sc2V0VGV4dENvbnRlbnQ6ZnVuY3Rpb24oZSx0KXtlLnRleHRDb250ZW50PXR9LHNldFN0eWxlU2NvcGU6ZnVuY3Rpb24oZSx0KXtlLnNldEF0dHJpYnV0ZSh0LCIiKX19KSxlcj17Y3JlYXRlOmZ1bmN0aW9uKGUsdCl7dHIodCl9LHVwZGF0ZTpmdW5jdGlvbihlLHQpe2UuZGF0YS5yZWYhPT10LmRhdGEucmVmJiYodHIoZSwhMCksdHIodCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3RyKGUsITApfX07ZnVuY3Rpb24gdHIoZSx0KXt2YXIgcj1lLmRhdGEucmVmO2lmKG4ocikpe3ZhciBpPWUuY29udGV4dCxvPWUuY29tcG9uZW50SW5zdGFuY2V8fGUuZWxtLGE9aS4kcmVmczt0P0FycmF5LmlzQXJyYXkoYVtyXSk/aChhW3JdLG8pOmFbcl09PT1vJiYoYVtyXT12b2lkIDApOmUuZGF0YS5yZWZJbkZvcj9BcnJheS5pc0FycmF5KGFbcl0pP2Fbcl0uaW5kZXhPZihvKTwwJiZhW3JdLnB1c2gobyk6YVtyXT1bb106YVtyXT1vfX12YXIgbnI9bmV3IHBlKCIiLHt9LFtdKSxycj1bImNyZWF0ZSIsImFjdGl2YXRlIiwidXBkYXRlIiwicmVtb3ZlIiwiZGVzdHJveSJdO2Z1bmN0aW9uIGlyKGUsaSl7cmV0dXJuIGUua2V5PT09aS5rZXkmJihlLnRhZz09PWkudGFnJiZlLmlzQ29tbWVudD09PWkuaXNDb21tZW50JiZuKGUuZGF0YSk9PT1uKGkuZGF0YSkmJmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0IiE9PWUudGFnKXJldHVybiEwO3ZhciByLGk9bihyPWUuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlLG89bihyPXQuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlO3JldHVybiBpPT09b3x8WG4oaSkmJlhuKG8pfShlLGkpfHxyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSYmZS5hc3luY0ZhY3Rvcnk9PT1pLmFzeW5jRmFjdG9yeSYmdChpLmFzeW5jRmFjdG9yeS5lcnJvcikpfWZ1bmN0aW9uIG9yKGUsdCxyKXt2YXIgaSxvLGE9e307Zm9yKGk9dDtpPD1yOysraSluKG89ZVtpXS5rZXkpJiYoYVtvXT1pKTtyZXR1cm4gYX12YXIgYXI9e2NyZWF0ZTpzcix1cGRhdGU6c3IsZGVzdHJveTpmdW5jdGlvbihlKXtzcihlLG5yKX19O2Z1bmN0aW9uIHNyKGUsdCl7KGUuZGF0YS5kaXJlY3RpdmVzfHx0LmRhdGEuZGlyZWN0aXZlcykmJmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG89ZT09PW5yLGE9dD09PW5yLHM9dXIoZS5kYXRhLmRpcmVjdGl2ZXMsZS5jb250ZXh0KSxjPXVyKHQuZGF0YS5kaXJlY3RpdmVzLHQuY29udGV4dCksdT1bXSxsPVtdO2ZvcihuIGluIGMpcj1zW25dLGk9Y1tuXSxyPyhpLm9sZFZhbHVlPXIudmFsdWUsaS5vbGRBcmc9ci5hcmcsZnIoaSwidXBkYXRlIix0LGUpLGkuZGVmJiZpLmRlZi5jb21wb25lbnRVcGRhdGVkJiZsLnB1c2goaSkpOihmcihpLCJiaW5kIix0LGUpLGkuZGVmJiZpLmRlZi5pbnNlcnRlZCYmdS5wdXNoKGkpKTtpZih1Lmxlbmd0aCl7dmFyIGY9ZnVuY3Rpb24oKXtmb3IodmFyIG49MDtuPHUubGVuZ3RoO24rKylmcih1W25dLCJpbnNlcnRlZCIsdCxlKX07bz9pdCh0LCJpbnNlcnQiLGYpOmYoKX1sLmxlbmd0aCYmaXQodCwicG9zdHBhdGNoIixmdW5jdGlvbigpe2Zvcih2YXIgbj0wO248bC5sZW5ndGg7bisrKWZyKGxbbl0sImNvbXBvbmVudFVwZGF0ZWQiLHQsZSl9KTtpZighbylmb3IobiBpbiBzKWNbbl18fGZyKHNbbl0sInVuYmluZCIsZSxlLGEpfShlLHQpfXZhciBjcj1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIHVyKGUsdCl7dmFyIG4scixpPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoIWUpcmV0dXJuIGk7Zm9yKG49MDtuPGUubGVuZ3RoO24rKykocj1lW25dKS5tb2RpZmllcnN8fChyLm1vZGlmaWVycz1jciksaVtscihyKV09cixyLmRlZj1MZSh0LiRvcHRpb25zLCJkaXJlY3RpdmVzIixyLm5hbWUpO3JldHVybiBpfWZ1bmN0aW9uIGxyKGUpe3JldHVybiBlLnJhd05hbWV8fGUubmFtZSsiLiIrT2JqZWN0LmtleXMoZS5tb2RpZmllcnN8fHt9KS5qb2luKCIuIil9ZnVuY3Rpb24gZnIoZSx0LG4scixpKXt2YXIgbz1lLmRlZiYmZS5kZWZbdF07aWYobyl0cnl7byhuLmVsbSxlLG4scixpKX1jYXRjaChyKXtSZShyLG4uY29udGV4dCwiZGlyZWN0aXZlICIrZS5uYW1lKyIgIit0KyIgaG9vayIpfX12YXIgcHI9W2VyLGFyXTtmdW5jdGlvbiBkcihlLHIpe3ZhciBpPXIuY29tcG9uZW50T3B0aW9ucztpZighKG4oaSkmJiExPT09aS5DdG9yLm9wdGlvbnMuaW5oZXJpdEF0dHJzfHx0KGUuZGF0YS5hdHRycykmJnQoci5kYXRhLmF0dHJzKSkpe3ZhciBvLGEscz1yLmVsbSxjPWUuZGF0YS5hdHRyc3x8e30sdT1yLmRhdGEuYXR0cnN8fHt9O2ZvcihvIGluIG4odS5fX29iX18pJiYodT1yLmRhdGEuYXR0cnM9QSh7fSx1KSksdSlhPXVbb10sY1tvXSE9PWEmJnZyKHMsbyxhKTtmb3IobyBpbihxfHxaKSYmdS52YWx1ZSE9PWMudmFsdWUmJnZyKHMsInZhbHVlIix1LnZhbHVlKSxjKXQodVtvXSkmJihQbihvKT9zLnJlbW92ZUF0dHJpYnV0ZU5TKEZuLFJuKG8pKTpEbihvKXx8cy5yZW1vdmVBdHRyaWJ1dGUobykpfX1mdW5jdGlvbiB2cihlLHQsbil7ZS50YWdOYW1lLmluZGV4T2YoIi0iKT4tMT9ocihlLHQsbik6SW4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGUodCk6KG49ImFsbG93ZnVsbHNjcmVlbiI9PT10JiYiRU1CRUQiPT09ZS50YWdOYW1lPyJ0cnVlIjp0LGUuc2V0QXR0cmlidXRlKHQsbikpOkRuKHQpP2Uuc2V0QXR0cmlidXRlKHQsTW4odCxuKSk6UG4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGVOUyhGbixSbih0KSk6ZS5zZXRBdHRyaWJ1dGVOUyhGbix0LG4pOmhyKGUsdCxuKX1mdW5jdGlvbiBocihlLHQsbil7aWYoSG4obikpZS5yZW1vdmVBdHRyaWJ1dGUodCk7ZWxzZXtpZihxJiYhVyYmIlRFWFRBUkVBIj09PWUudGFnTmFtZSYmInBsYWNlaG9sZGVyIj09PXQmJiIiIT09biYmIWUuX19pZXBoKXt2YXIgcj1mdW5jdGlvbih0KXt0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiaW5wdXQiLHIpfTtlLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IixyKSxlLl9faWVwaD0hMH1lLnNldEF0dHJpYnV0ZSh0LG4pfX12YXIgbXI9e2NyZWF0ZTpkcix1cGRhdGU6ZHJ9O2Z1bmN0aW9uIHlyKGUscil7dmFyIGk9ci5lbG0sbz1yLmRhdGEsYT1lLmRhdGE7aWYoISh0KG8uc3RhdGljQ2xhc3MpJiZ0KG8uY2xhc3MpJiYodChhKXx8dChhLnN0YXRpY0NsYXNzKSYmdChhLmNsYXNzKSkpKXt2YXIgcz1CbihyKSxjPWkuX3RyYW5zaXRpb25DbGFzc2VzO24oYykmJihzPXpuKHMsVm4oYykpKSxzIT09aS5fcHJldkNsYXNzJiYoaS5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKSxpLl9wcmV2Q2xhc3M9cyl9fXZhciBncixfcixiciwkcix3cixDcix4cj17Y3JlYXRlOnlyLHVwZGF0ZTp5cn0sa3I9L1tcdykuK1wtXyRcXV0vO2Z1bmN0aW9uIEFyKGUpe3ZhciB0LG4scixpLG8sYT0hMSxzPSExLGM9ITEsdT0hMSxsPTAsZj0wLHA9MCxkPTA7Zm9yKHI9MDtyPGUubGVuZ3RoO3IrKylpZihuPXQsdD1lLmNoYXJDb2RlQXQociksYSkzOT09PXQmJjkyIT09biYmKGE9ITEpO2Vsc2UgaWYocykzND09PXQmJjkyIT09biYmKHM9ITEpO2Vsc2UgaWYoYyk5Nj09PXQmJjkyIT09biYmKGM9ITEpO2Vsc2UgaWYodSk0Nz09PXQmJjkyIT09biYmKHU9ITEpO2Vsc2UgaWYoMTI0IT09dHx8MTI0PT09ZS5jaGFyQ29kZUF0KHIrMSl8fDEyND09PWUuY2hhckNvZGVBdChyLTEpfHxsfHxmfHxwKXtzd2l0Y2godCl7Y2FzZSAzNDpzPSEwO2JyZWFrO2Nhc2UgMzk6YT0hMDticmVhaztjYXNlIDk2OmM9ITA7YnJlYWs7Y2FzZSA0MDpwKys7YnJlYWs7Y2FzZSA0MTpwLS07YnJlYWs7Y2FzZSA5MTpmKys7YnJlYWs7Y2FzZSA5MzpmLS07YnJlYWs7Y2FzZSAxMjM6bCsrO2JyZWFrO2Nhc2UgMTI1OmwtLX1pZig0Nz09PXQpe2Zvcih2YXIgdj1yLTEsaD12b2lkIDA7dj49MCYmIiAiPT09KGg9ZS5jaGFyQXQodikpO3YtLSk7aCYma3IudGVzdChoKXx8KHU9ITApfX1lbHNlIHZvaWQgMD09PWk/KGQ9cisxLGk9ZS5zbGljZSgwLHIpLnRyaW0oKSk6bSgpO2Z1bmN0aW9uIG0oKXsob3x8KG89W10pKS5wdXNoKGUuc2xpY2UoZCxyKS50cmltKCkpLGQ9cisxfWlmKHZvaWQgMD09PWk/aT1lLnNsaWNlKDAscikudHJpbSgpOjAhPT1kJiZtKCksbylmb3Iocj0wO3I8by5sZW5ndGg7cisrKWk9T3IoaSxvW3JdKTtyZXR1cm4gaX1mdW5jdGlvbiBPcihlLHQpe3ZhciBuPXQuaW5kZXhPZigiKCIpO2lmKG48MClyZXR1cm4nX2YoIicrdCsnIikoJytlKyIpIjt2YXIgcj10LnNsaWNlKDAsbiksaT10LnNsaWNlKG4rMSk7cmV0dXJuJ19mKCInK3IrJyIpKCcrZSsoIikiIT09aT8iLCIraTppKX1mdW5jdGlvbiBTcihlLHQpe2NvbnNvbGUuZXJyb3IoIltWdWUgY29tcGlsZXJdOiAiK2UpfWZ1bmN0aW9uIFRyKGUsdCl7cmV0dXJuIGU/ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbdF19KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KTpbXX1mdW5jdGlvbiBFcihlLHQsbixyLGkpeyhlLnByb3BzfHwoZS5wcm9wcz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24gTnIoZSx0LG4scixpKXsoaT9lLmR5bmFtaWNBdHRyc3x8KGUuZHluYW1pY0F0dHJzPVtdKTplLmF0dHJzfHwoZS5hdHRycz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24ganIoZSx0LG4scil7ZS5hdHRyc01hcFt0XT1uLGUuYXR0cnNMaXN0LnB1c2goUnIoe25hbWU6dCx2YWx1ZTpufSxyKSl9ZnVuY3Rpb24gRHIoZSx0LG4scixpLG8sYSxzKXsoZS5kaXJlY3RpdmVzfHwoZS5kaXJlY3RpdmVzPVtdKSkucHVzaChScih7bmFtZTp0LHJhd05hbWU6bix2YWx1ZTpyLGFyZzppLGlzRHluYW1pY0FyZzpvLG1vZGlmaWVyczphfSxzKSksZS5wbGFpbj0hMX1mdW5jdGlvbiBMcihlLHQsbil7cmV0dXJuIG4/Il9wKCIrdCsnLCInK2UrJyIpJzplK3R9ZnVuY3Rpb24gTXIodCxuLHIsaSxvLGEscyxjKXt2YXIgdTsoaT1pfHxlKS5yaWdodD9jP249IigiK24rIik9PT0nY2xpY2snPydjb250ZXh0bWVudSc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJjb250ZXh0bWVudSIsZGVsZXRlIGkucmlnaHQpOmkubWlkZGxlJiYoYz9uPSIoIituKyIpPT09J2NsaWNrJz8nbW91c2V1cCc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJtb3VzZXVwIikpLGkuY2FwdHVyZSYmKGRlbGV0ZSBpLmNhcHR1cmUsbj1McigiISIsbixjKSksaS5vbmNlJiYoZGVsZXRlIGkub25jZSxuPUxyKCJ+IixuLGMpKSxpLnBhc3NpdmUmJihkZWxldGUgaS5wYXNzaXZlLG49THIoIiYiLG4sYykpLGkubmF0aXZlPyhkZWxldGUgaS5uYXRpdmUsdT10Lm5hdGl2ZUV2ZW50c3x8KHQubmF0aXZlRXZlbnRzPXt9KSk6dT10LmV2ZW50c3x8KHQuZXZlbnRzPXt9KTt2YXIgbD1Scih7dmFsdWU6ci50cmltKCksZHluYW1pYzpjfSxzKTtpIT09ZSYmKGwubW9kaWZpZXJzPWkpO3ZhciBmPXVbbl07QXJyYXkuaXNBcnJheShmKT9vP2YudW5zaGlmdChsKTpmLnB1c2gobCk6dVtuXT1mP28/W2wsZl06W2YsbF06bCx0LnBsYWluPSExfWZ1bmN0aW9uIElyKGUsdCxuKXt2YXIgcj1GcihlLCI6Iit0KXx8RnIoZSwidi1iaW5kOiIrdCk7aWYobnVsbCE9cilyZXR1cm4gQXIocik7aWYoITEhPT1uKXt2YXIgaT1GcihlLHQpO2lmKG51bGwhPWkpcmV0dXJuIEpTT04uc3RyaW5naWZ5KGkpfX1mdW5jdGlvbiBGcihlLHQsbil7dmFyIHI7aWYobnVsbCE9KHI9ZS5hdHRyc01hcFt0XSkpZm9yKHZhciBpPWUuYXR0cnNMaXN0LG89MCxhPWkubGVuZ3RoO288YTtvKyspaWYoaVtvXS5uYW1lPT09dCl7aS5zcGxpY2UobywxKTticmVha31yZXR1cm4gbiYmZGVsZXRlIGUuYXR0cnNNYXBbdF0scn1mdW5jdGlvbiBQcihlLHQpe2Zvcih2YXIgbj1lLmF0dHJzTGlzdCxyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1uW3JdO2lmKHQudGVzdChvLm5hbWUpKXJldHVybiBuLnNwbGljZShyLDEpLG99fWZ1bmN0aW9uIFJyKGUsdCl7cmV0dXJuIHQmJihudWxsIT10LnN0YXJ0JiYoZS5zdGFydD10LnN0YXJ0KSxudWxsIT10LmVuZCYmKGUuZW5kPXQuZW5kKSksZX1mdW5jdGlvbiBIcihlLHQsbil7dmFyIHI9bnx8e30saT1yLm51bWJlcixvPSIkJHYiO3IudHJpbSYmKG89Iih0eXBlb2YgJCR2ID09PSAnc3RyaW5nJz8gJCR2LnRyaW0oKTogJCR2KSIpLGkmJihvPSJfbigiK28rIikiKTt2YXIgYT1Ccih0LG8pO2UubW9kZWw9e3ZhbHVlOiIoIit0KyIpIixleHByZXNzaW9uOkpTT04uc3RyaW5naWZ5KHQpLGNhbGxiYWNrOiJmdW5jdGlvbiAoJCR2KSB7IithKyJ9In19ZnVuY3Rpb24gQnIoZSx0KXt2YXIgbj1mdW5jdGlvbihlKXtpZihlPWUudHJpbSgpLGdyPWUubGVuZ3RoLGUuaW5kZXhPZigiWyIpPDB8fGUubGFzdEluZGV4T2YoIl0iKTxnci0xKXJldHVybigkcj1lLmxhc3RJbmRleE9mKCIuIikpPi0xP3tleHA6ZS5zbGljZSgwLCRyKSxrZXk6JyInK2Uuc2xpY2UoJHIrMSkrJyInfTp7ZXhwOmUsa2V5Om51bGx9O19yPWUsJHI9d3I9Q3I9MDtmb3IoOyF6cigpOylWcihicj1VcigpKT9Kcihicik6OTE9PT1iciYmS3IoYnIpO3JldHVybntleHA6ZS5zbGljZSgwLHdyKSxrZXk6ZS5zbGljZSh3cisxLENyKX19KGUpO3JldHVybiBudWxsPT09bi5rZXk/ZSsiPSIrdDoiJHNldCgiK24uZXhwKyIsICIrbi5rZXkrIiwgIit0KyIpIn1mdW5jdGlvbiBVcigpe3JldHVybiBfci5jaGFyQ29kZUF0KCsrJHIpfWZ1bmN0aW9uIHpyKCl7cmV0dXJuICRyPj1ncn1mdW5jdGlvbiBWcihlKXtyZXR1cm4gMzQ9PT1lfHwzOT09PWV9ZnVuY3Rpb24gS3IoZSl7dmFyIHQ9MTtmb3Iod3I9JHI7IXpyKCk7KWlmKFZyKGU9VXIoKSkpSnIoZSk7ZWxzZSBpZig5MT09PWUmJnQrKyw5Mz09PWUmJnQtLSwwPT09dCl7Q3I9JHI7YnJlYWt9fWZ1bmN0aW9uIEpyKGUpe2Zvcih2YXIgdD1lOyF6cigpJiYoZT1VcigpKSE9PXQ7KTt9dmFyIHFyLFdyPSJfX3IiLFpyPSJfX2MiO2Z1bmN0aW9uIEdyKGUsdCxuKXt2YXIgcj1xcjtyZXR1cm4gZnVuY3Rpb24gaSgpe251bGwhPT10LmFwcGx5KG51bGwsYXJndW1lbnRzKSYmUXIoZSxpLG4scil9fXZhciBYcj1WZSYmIShYJiZOdW1iZXIoWFsxXSk8PTUzKTtmdW5jdGlvbiBZcihlLHQsbixyKXtpZihYcil7dmFyIGk9YW4sbz10O3Q9by5fd3JhcHBlcj1mdW5jdGlvbihlKXtpZihlLnRhcmdldD09PWUuY3VycmVudFRhcmdldHx8ZS50aW1lU3RhbXA+PWl8fGUudGltZVN0YW1wPD0wfHxlLnRhcmdldC5vd25lckRvY3VtZW50IT09ZG9jdW1lbnQpcmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX1xci5hZGRFdmVudExpc3RlbmVyKGUsdCxRP3tjYXB0dXJlOm4scGFzc2l2ZTpyfTpuKX1mdW5jdGlvbiBRcihlLHQsbixyKXsocnx8cXIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0Ll93cmFwcGVyfHx0LG4pfWZ1bmN0aW9uIGVpKGUscil7aWYoIXQoZS5kYXRhLm9uKXx8IXQoci5kYXRhLm9uKSl7dmFyIGk9ci5kYXRhLm9ufHx7fSxvPWUuZGF0YS5vbnx8e307cXI9ci5lbG0sZnVuY3Rpb24oZSl7aWYobihlW1dyXSkpe3ZhciB0PXE/ImNoYW5nZSI6ImlucHV0IjtlW3RdPVtdLmNvbmNhdChlW1dyXSxlW3RdfHxbXSksZGVsZXRlIGVbV3JdfW4oZVtacl0pJiYoZS5jaGFuZ2U9W10uY29uY2F0KGVbWnJdLGUuY2hhbmdlfHxbXSksZGVsZXRlIGVbWnJdKX0oaSkscnQoaSxvLFlyLFFyLEdyLHIuY29udGV4dCkscXI9dm9pZCAwfX12YXIgdGksbmk9e2NyZWF0ZTplaSx1cGRhdGU6ZWl9O2Z1bmN0aW9uIHJpKGUscil7aWYoIXQoZS5kYXRhLmRvbVByb3BzKXx8IXQoci5kYXRhLmRvbVByb3BzKSl7dmFyIGksbyxhPXIuZWxtLHM9ZS5kYXRhLmRvbVByb3BzfHx7fSxjPXIuZGF0YS5kb21Qcm9wc3x8e307Zm9yKGkgaW4gbihjLl9fb2JfXykmJihjPXIuZGF0YS5kb21Qcm9wcz1BKHt9LGMpKSxzKWkgaW4gY3x8KGFbaV09IiIpO2ZvcihpIGluIGMpe2lmKG89Y1tpXSwidGV4dENvbnRlbnQiPT09aXx8ImlubmVySFRNTCI9PT1pKXtpZihyLmNoaWxkcmVuJiYoci5jaGlsZHJlbi5sZW5ndGg9MCksbz09PXNbaV0pY29udGludWU7MT09PWEuY2hpbGROb2Rlcy5sZW5ndGgmJmEucmVtb3ZlQ2hpbGQoYS5jaGlsZE5vZGVzWzBdKX1pZigidmFsdWUiPT09aSYmIlBST0dSRVNTIiE9PWEudGFnTmFtZSl7YS5fdmFsdWU9bzt2YXIgdT10KG8pPyIiOlN0cmluZyhvKTtpaShhLHUpJiYoYS52YWx1ZT11KX1lbHNlIGlmKCJpbm5lckhUTUwiPT09aSYmcW4oYS50YWdOYW1lKSYmdChhLmlubmVySFRNTCkpeyh0aT10aXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmlubmVySFRNTD0iPHN2Zz4iK28rIjwvc3ZnPiI7Zm9yKHZhciBsPXRpLmZpcnN0Q2hpbGQ7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7Zm9yKDtsLmZpcnN0Q2hpbGQ7KWEuYXBwZW5kQ2hpbGQobC5maXJzdENoaWxkKX1lbHNlIGlmKG8hPT1zW2ldKXRyeXthW2ldPW99Y2F0Y2goZSl7fX19fWZ1bmN0aW9uIGlpKGUsdCl7cmV0dXJuIWUuY29tcG9zaW5nJiYoIk9QVElPTiI9PT1lLnRhZ05hbWV8fGZ1bmN0aW9uKGUsdCl7dmFyIG49ITA7dHJ5e249ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCE9PWV9Y2F0Y2goZSl7fXJldHVybiBuJiZlLnZhbHVlIT09dH0oZSx0KXx8ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnZhbHVlLGk9ZS5fdk1vZGlmaWVycztpZihuKGkpKXtpZihpLm51bWJlcilyZXR1cm4gZihyKSE9PWYodCk7aWYoaS50cmltKXJldHVybiByLnRyaW0oKSE9PXQudHJpbSgpfXJldHVybiByIT09dH0oZSx0KSl9dmFyIG9pPXtjcmVhdGU6cmksdXBkYXRlOnJpfSxhaT1nKGZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49LzooLispLztyZXR1cm4gZS5zcGxpdCgvOyg/IVteKF0qXCkpL2cpLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHI9ZS5zcGxpdChuKTtyLmxlbmd0aD4xJiYodFtyWzBdLnRyaW0oKV09clsxXS50cmltKCkpfX0pLHR9KTtmdW5jdGlvbiBzaShlKXt2YXIgdD1jaShlLnN0eWxlKTtyZXR1cm4gZS5zdGF0aWNTdHlsZT9BKGUuc3RhdGljU3R5bGUsdCk6dH1mdW5jdGlvbiBjaShlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9PKGUpOiJzdHJpbmciPT10eXBlb2YgZT9haShlKTplfXZhciB1aSxsaT0vXi0tLyxmaT0vXHMqIWltcG9ydGFudCQvLHBpPWZ1bmN0aW9uKGUsdCxuKXtpZihsaS50ZXN0KHQpKWUuc3R5bGUuc2V0UHJvcGVydHkodCxuKTtlbHNlIGlmKGZpLnRlc3QobikpZS5zdHlsZS5zZXRQcm9wZXJ0eShDKHQpLG4ucmVwbGFjZShmaSwiIiksImltcG9ydGFudCIpO2Vsc2V7dmFyIHI9dmkodCk7aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspZS5zdHlsZVtyXT1uW2ldO2Vsc2UgZS5zdHlsZVtyXT1ufX0sZGk9WyJXZWJraXQiLCJNb3oiLCJtcyJdLHZpPWcoZnVuY3Rpb24oZSl7aWYodWk9dWl8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLCJmaWx0ZXIiIT09KGU9YihlKSkmJmUgaW4gdWkpcmV0dXJuIGU7Zm9yKHZhciB0PWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPTA7bjxkaS5sZW5ndGg7bisrKXt2YXIgcj1kaVtuXSt0O2lmKHIgaW4gdWkpcmV0dXJuIHJ9fSk7ZnVuY3Rpb24gaGkoZSxyKXt2YXIgaT1yLmRhdGEsbz1lLmRhdGE7aWYoISh0KGkuc3RhdGljU3R5bGUpJiZ0KGkuc3R5bGUpJiZ0KG8uc3RhdGljU3R5bGUpJiZ0KG8uc3R5bGUpKSl7dmFyIGEscyxjPXIuZWxtLHU9by5zdGF0aWNTdHlsZSxsPW8ubm9ybWFsaXplZFN0eWxlfHxvLnN0eWxlfHx7fSxmPXV8fGwscD1jaShyLmRhdGEuc3R5bGUpfHx7fTtyLmRhdGEubm9ybWFsaXplZFN0eWxlPW4ocC5fX29iX18pP0Eoe30scCk6cDt2YXIgZD1mdW5jdGlvbihlLHQpe3ZhciBuLHI9e307aWYodClmb3IodmFyIGk9ZTtpLmNvbXBvbmVudEluc3RhbmNlOykoaT1pLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSkmJmkuZGF0YSYmKG49c2koaS5kYXRhKSkmJkEocixuKTsobj1zaShlLmRhdGEpKSYmQShyLG4pO2Zvcih2YXIgbz1lO289by5wYXJlbnQ7KW8uZGF0YSYmKG49c2koby5kYXRhKSkmJkEocixuKTtyZXR1cm4gcn0ociwhMCk7Zm9yKHMgaW4gZil0KGRbc10pJiZwaShjLHMsIiIpO2ZvcihzIGluIGQpKGE9ZFtzXSkhPT1mW3NdJiZwaShjLHMsbnVsbD09YT8iIjphKX19dmFyIG1pPXtjcmVhdGU6aGksdXBkYXRlOmhpfSx5aT0vXHMrLztmdW5jdGlvbiBnaShlLHQpe2lmKHQmJih0PXQudHJpbSgpKSlpZihlLmNsYXNzTGlzdCl0LmluZGV4T2YoIiAiKT4tMT90LnNwbGl0KHlpKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmNsYXNzTGlzdC5hZGQodCl9KTplLmNsYXNzTGlzdC5hZGQodCk7ZWxzZXt2YXIgbj0iICIrKGUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIikrIiAiO24uaW5kZXhPZigiICIrdCsiICIpPDAmJmUuc2V0QXR0cmlidXRlKCJjbGFzcyIsKG4rdCkudHJpbSgpKX19ZnVuY3Rpb24gX2koZSx0KXtpZih0JiYodD10LnRyaW0oKSkpaWYoZS5jbGFzc0xpc3QpdC5pbmRleE9mKCIgIik+LTE/dC5zcGxpdCh5aSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5jbGFzc0xpc3QucmVtb3ZlKHQpfSk6ZS5jbGFzc0xpc3QucmVtb3ZlKHQpLGUuY2xhc3NMaXN0Lmxlbmd0aHx8ZS5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIik7ZWxzZXtmb3IodmFyIG49IiAiKyhlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpKyIgIixyPSIgIit0KyIgIjtuLmluZGV4T2Yocik+PTA7KW49bi5yZXBsYWNlKHIsIiAiKTsobj1uLnRyaW0oKSk/ZS5zZXRBdHRyaWJ1dGUoImNsYXNzIixuKTplLnJlbW92ZUF0dHJpYnV0ZSgiY2xhc3MiKX19ZnVuY3Rpb24gYmkoZSl7aWYoZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXt2YXIgdD17fTtyZXR1cm4hMSE9PWUuY3NzJiZBKHQsJGkoZS5uYW1lfHwidiIpKSxBKHQsZSksdH1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/JGkoZSk6dm9pZCAwfX12YXIgJGk9ZyhmdW5jdGlvbihlKXtyZXR1cm57ZW50ZXJDbGFzczplKyItZW50ZXIiLGVudGVyVG9DbGFzczplKyItZW50ZXItdG8iLGVudGVyQWN0aXZlQ2xhc3M6ZSsiLWVudGVyLWFjdGl2ZSIsbGVhdmVDbGFzczplKyItbGVhdmUiLGxlYXZlVG9DbGFzczplKyItbGVhdmUtdG8iLGxlYXZlQWN0aXZlQ2xhc3M6ZSsiLWxlYXZlLWFjdGl2ZSJ9fSksd2k9eiYmIVcsQ2k9InRyYW5zaXRpb24iLHhpPSJhbmltYXRpb24iLGtpPSJ0cmFuc2l0aW9uIixBaT0idHJhbnNpdGlvbmVuZCIsT2k9ImFuaW1hdGlvbiIsU2k9ImFuaW1hdGlvbmVuZCI7d2kmJih2b2lkIDA9PT13aW5kb3cub250cmFuc2l0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kJiYoa2k9IldlYmtpdFRyYW5zaXRpb24iLEFpPSJ3ZWJraXRUcmFuc2l0aW9uRW5kIiksdm9pZCAwPT09d2luZG93Lm9uYW5pbWF0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQmJihPaT0iV2Via2l0QW5pbWF0aW9uIixTaT0id2Via2l0QW5pbWF0aW9uRW5kIikpO3ZhciBUaT16P3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdyk6c2V0VGltZW91dDpmdW5jdGlvbihlKXtyZXR1cm4gZSgpfTtmdW5jdGlvbiBFaShlKXtUaShmdW5jdGlvbigpe1RpKGUpfSl9ZnVuY3Rpb24gTmkoZSx0KXt2YXIgbj1lLl90cmFuc2l0aW9uQ2xhc3Nlc3x8KGUuX3RyYW5zaXRpb25DbGFzc2VzPVtdKTtuLmluZGV4T2YodCk8MCYmKG4ucHVzaCh0KSxnaShlLHQpKX1mdW5jdGlvbiBqaShlLHQpe2UuX3RyYW5zaXRpb25DbGFzc2VzJiZoKGUuX3RyYW5zaXRpb25DbGFzc2VzLHQpLF9pKGUsdCl9ZnVuY3Rpb24gRGkoZSx0LG4pe3ZhciByPU1pKGUsdCksaT1yLnR5cGUsbz1yLnRpbWVvdXQsYT1yLnByb3BDb3VudDtpZighaSlyZXR1cm4gbigpO3ZhciBzPWk9PT1DaT9BaTpTaSxjPTAsdT1mdW5jdGlvbigpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihzLGwpLG4oKX0sbD1mdW5jdGlvbih0KXt0LnRhcmdldD09PWUmJisrYz49YSYmdSgpfTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YzxhJiZ1KCl9LG8rMSksZS5hZGRFdmVudExpc3RlbmVyKHMsbCl9dmFyIExpPS9cYih0cmFuc2Zvcm18YWxsKSgsfCQpLztmdW5jdGlvbiBNaShlLHQpe3ZhciBuLHI9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSksaT0ocltraSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLG89KHJba2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSxhPUlpKGksbykscz0ocltPaSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLGM9KHJbT2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSx1PUlpKHMsYyksbD0wLGY9MDtyZXR1cm4gdD09PUNpP2E+MCYmKG49Q2ksbD1hLGY9by5sZW5ndGgpOnQ9PT14aT91PjAmJihuPXhpLGw9dSxmPWMubGVuZ3RoKTpmPShuPShsPU1hdGgubWF4KGEsdSkpPjA/YT51P0NpOnhpOm51bGwpP249PT1DaT9vLmxlbmd0aDpjLmxlbmd0aDowLHt0eXBlOm4sdGltZW91dDpsLHByb3BDb3VudDpmLGhhc1RyYW5zZm9ybTpuPT09Q2kmJkxpLnRlc3QocltraSsiUHJvcGVydHkiXSl9fWZ1bmN0aW9uIElpKGUsdCl7Zm9yKDtlLmxlbmd0aDx0Lmxlbmd0aDspZT1lLmNvbmNhdChlKTtyZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCx0Lm1hcChmdW5jdGlvbih0LG4pe3JldHVybiBGaSh0KStGaShlW25dKX0pKX1mdW5jdGlvbiBGaShlKXtyZXR1cm4gMWUzKk51bWJlcihlLnNsaWNlKDAsLTEpLnJlcGxhY2UoIiwiLCIuIikpfWZ1bmN0aW9uIFBpKGUscil7dmFyIGk9ZS5lbG07bihpLl9sZWF2ZUNiKSYmKGkuX2xlYXZlQ2IuY2FuY2VsbGVkPSEwLGkuX2xlYXZlQ2IoKSk7dmFyIGE9YmkoZS5kYXRhLnRyYW5zaXRpb24pO2lmKCF0KGEpJiYhbihpLl9lbnRlckNiKSYmMT09PWkubm9kZVR5cGUpe2Zvcih2YXIgcz1hLmNzcyxjPWEudHlwZSx1PWEuZW50ZXJDbGFzcyxsPWEuZW50ZXJUb0NsYXNzLHA9YS5lbnRlckFjdGl2ZUNsYXNzLGQ9YS5hcHBlYXJDbGFzcyx2PWEuYXBwZWFyVG9DbGFzcyxoPWEuYXBwZWFyQWN0aXZlQ2xhc3MsbT1hLmJlZm9yZUVudGVyLHk9YS5lbnRlcixnPWEuYWZ0ZXJFbnRlcixfPWEuZW50ZXJDYW5jZWxsZWQsYj1hLmJlZm9yZUFwcGVhciwkPWEuYXBwZWFyLHc9YS5hZnRlckFwcGVhcixDPWEuYXBwZWFyQ2FuY2VsbGVkLHg9YS5kdXJhdGlvbixrPVd0LEE9V3QuJHZub2RlO0EmJkEucGFyZW50OylrPUEuY29udGV4dCxBPUEucGFyZW50O3ZhciBPPSFrLl9pc01vdW50ZWR8fCFlLmlzUm9vdEluc2VydDtpZighT3x8JHx8IiI9PT0kKXt2YXIgUz1PJiZkP2Q6dSxUPU8mJmg/aDpwLEU9TyYmdj92OmwsTj1PJiZifHxtLGo9TyYmImZ1bmN0aW9uIj09dHlwZW9mICQ/JDp5LEw9TyYmd3x8ZyxNPU8mJkN8fF8sST1mKG8oeCk/eC5lbnRlcjp4KSxGPSExIT09cyYmIVcsUD1CaShqKSxSPWkuX2VudGVyQ2I9RChmdW5jdGlvbigpe0YmJihqaShpLEUpLGppKGksVCkpLFIuY2FuY2VsbGVkPyhGJiZqaShpLFMpLE0mJk0oaSkpOkwmJkwoaSksaS5fZW50ZXJDYj1udWxsfSk7ZS5kYXRhLnNob3d8fGl0KGUsImluc2VydCIsZnVuY3Rpb24oKXt2YXIgdD1pLnBhcmVudE5vZGUsbj10JiZ0Ll9wZW5kaW5nJiZ0Ll9wZW5kaW5nW2Uua2V5XTtuJiZuLnRhZz09PWUudGFnJiZuLmVsbS5fbGVhdmVDYiYmbi5lbG0uX2xlYXZlQ2IoKSxqJiZqKGksUil9KSxOJiZOKGkpLEYmJihOaShpLFMpLE5pKGksVCksRWkoZnVuY3Rpb24oKXtqaShpLFMpLFIuY2FuY2VsbGVkfHwoTmkoaSxFKSxQfHwoSGkoSSk/c2V0VGltZW91dChSLEkpOkRpKGksYyxSKSkpfSkpLGUuZGF0YS5zaG93JiYociYmcigpLGomJmooaSxSKSksRnx8UHx8UigpfX19ZnVuY3Rpb24gUmkoZSxyKXt2YXIgaT1lLmVsbTtuKGkuX2VudGVyQ2IpJiYoaS5fZW50ZXJDYi5jYW5jZWxsZWQ9ITAsaS5fZW50ZXJDYigpKTt2YXIgYT1iaShlLmRhdGEudHJhbnNpdGlvbik7aWYodChhKXx8MSE9PWkubm9kZVR5cGUpcmV0dXJuIHIoKTtpZighbihpLl9sZWF2ZUNiKSl7dmFyIHM9YS5jc3MsYz1hLnR5cGUsdT1hLmxlYXZlQ2xhc3MsbD1hLmxlYXZlVG9DbGFzcyxwPWEubGVhdmVBY3RpdmVDbGFzcyxkPWEuYmVmb3JlTGVhdmUsdj1hLmxlYXZlLGg9YS5hZnRlckxlYXZlLG09YS5sZWF2ZUNhbmNlbGxlZCx5PWEuZGVsYXlMZWF2ZSxnPWEuZHVyYXRpb24sXz0hMSE9PXMmJiFXLGI9QmkodiksJD1mKG8oZyk/Zy5sZWF2ZTpnKSx3PWkuX2xlYXZlQ2I9RChmdW5jdGlvbigpe2kucGFyZW50Tm9kZSYmaS5wYXJlbnROb2RlLl9wZW5kaW5nJiYoaS5wYXJlbnROb2RlLl9wZW5kaW5nW2Uua2V5XT1udWxsKSxfJiYoamkoaSxsKSxqaShpLHApKSx3LmNhbmNlbGxlZD8oXyYmamkoaSx1KSxtJiZtKGkpKToocigpLGgmJmgoaSkpLGkuX2xlYXZlQ2I9bnVsbH0pO3k/eShDKTpDKCl9ZnVuY3Rpb24gQygpe3cuY2FuY2VsbGVkfHwoIWUuZGF0YS5zaG93JiZpLnBhcmVudE5vZGUmJigoaS5wYXJlbnROb2RlLl9wZW5kaW5nfHwoaS5wYXJlbnROb2RlLl9wZW5kaW5nPXt9KSlbZS5rZXldPWUpLGQmJmQoaSksXyYmKE5pKGksdSksTmkoaSxwKSxFaShmdW5jdGlvbigpe2ppKGksdSksdy5jYW5jZWxsZWR8fChOaShpLGwpLGJ8fChIaSgkKT9zZXRUaW1lb3V0KHcsJCk6RGkoaSxjLHcpKSl9KSksdiYmdihpLHcpLF98fGJ8fHcoKSl9fWZ1bmN0aW9uIEhpKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmIWlzTmFOKGUpfWZ1bmN0aW9uIEJpKGUpe2lmKHQoZSkpcmV0dXJuITE7dmFyIHI9ZS5mbnM7cmV0dXJuIG4ocik/QmkoQXJyYXkuaXNBcnJheShyKT9yWzBdOnIpOihlLl9sZW5ndGh8fGUubGVuZ3RoKT4xfWZ1bmN0aW9uIFVpKGUsdCl7ITAhPT10LmRhdGEuc2hvdyYmUGkodCl9dmFyIHppPWZ1bmN0aW9uKGUpe3ZhciBvLGEscz17fSxjPWUubW9kdWxlcyx1PWUubm9kZU9wcztmb3Iobz0wO288cnIubGVuZ3RoOysrbylmb3Ioc1tycltvXV09W10sYT0wO2E8Yy5sZW5ndGg7KythKW4oY1thXVtycltvXV0pJiZzW3JyW29dXS5wdXNoKGNbYV1bcnJbb11dKTtmdW5jdGlvbiBsKGUpe3ZhciB0PXUucGFyZW50Tm9kZShlKTtuKHQpJiZ1LnJlbW92ZUNoaWxkKHQsZSl9ZnVuY3Rpb24gZihlLHQsaSxvLGEsYyxsKXtpZihuKGUuZWxtKSYmbihjKSYmKGU9Y1tsXT1tZShlKSksZS5pc1Jvb3RJbnNlcnQ9IWEsIWZ1bmN0aW9uKGUsdCxpLG8pe3ZhciBhPWUuZGF0YTtpZihuKGEpKXt2YXIgYz1uKGUuY29tcG9uZW50SW5zdGFuY2UpJiZhLmtlZXBBbGl2ZTtpZihuKGE9YS5ob29rKSYmbihhPWEuaW5pdCkmJmEoZSwhMSksbihlLmNvbXBvbmVudEluc3RhbmNlKSlyZXR1cm4gZChlLHQpLHYoaSxlLmVsbSxvKSxyKGMpJiZmdW5jdGlvbihlLHQscixpKXtmb3IodmFyIG8sYT1lO2EuY29tcG9uZW50SW5zdGFuY2U7KWlmKGE9YS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUsbihvPWEuZGF0YSkmJm4obz1vLnRyYW5zaXRpb24pKXtmb3Iobz0wO288cy5hY3RpdmF0ZS5sZW5ndGg7KytvKXMuYWN0aXZhdGVbb10obnIsYSk7dC5wdXNoKGEpO2JyZWFrfXYocixlLmVsbSxpKX0oZSx0LGksbyksITB9fShlLHQsaSxvKSl7dmFyIGY9ZS5kYXRhLHA9ZS5jaGlsZHJlbixtPWUudGFnO24obSk/KGUuZWxtPWUubnM/dS5jcmVhdGVFbGVtZW50TlMoZS5ucyxtKTp1LmNyZWF0ZUVsZW1lbnQobSxlKSxnKGUpLGgoZSxwLHQpLG4oZikmJnkoZSx0KSx2KGksZS5lbG0sbykpOnIoZS5pc0NvbW1lbnQpPyhlLmVsbT11LmNyZWF0ZUNvbW1lbnQoZS50ZXh0KSx2KGksZS5lbG0sbykpOihlLmVsbT11LmNyZWF0ZVRleHROb2RlKGUudGV4dCksdihpLGUuZWxtLG8pKX19ZnVuY3Rpb24gZChlLHQpe24oZS5kYXRhLnBlbmRpbmdJbnNlcnQpJiYodC5wdXNoLmFwcGx5KHQsZS5kYXRhLnBlbmRpbmdJbnNlcnQpLGUuZGF0YS5wZW5kaW5nSW5zZXJ0PW51bGwpLGUuZWxtPWUuY29tcG9uZW50SW5zdGFuY2UuJGVsLG0oZSk/KHkoZSx0KSxnKGUpKToodHIoZSksdC5wdXNoKGUpKX1mdW5jdGlvbiB2KGUsdCxyKXtuKGUpJiYobihyKT91LnBhcmVudE5vZGUocik9PT1lJiZ1Lmluc2VydEJlZm9yZShlLHQscik6dS5hcHBlbmRDaGlsZChlLHQpKX1mdW5jdGlvbiBoKGUsdCxuKXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7KytyKWYodFtyXSxuLGUuZWxtLG51bGwsITAsdCxyKTtlbHNlIGkoZS50ZXh0KSYmdS5hcHBlbmRDaGlsZChlLmVsbSx1LmNyZWF0ZVRleHROb2RlKFN0cmluZyhlLnRleHQpKSl9ZnVuY3Rpb24gbShlKXtmb3IoO2UuY29tcG9uZW50SW5zdGFuY2U7KWU9ZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7cmV0dXJuIG4oZS50YWcpfWZ1bmN0aW9uIHkoZSx0KXtmb3IodmFyIHI9MDtyPHMuY3JlYXRlLmxlbmd0aDsrK3Ipcy5jcmVhdGVbcl0obnIsZSk7bihvPWUuZGF0YS5ob29rKSYmKG4oby5jcmVhdGUpJiZvLmNyZWF0ZShucixlKSxuKG8uaW5zZXJ0KSYmdC5wdXNoKGUpKX1mdW5jdGlvbiBnKGUpe3ZhciB0O2lmKG4odD1lLmZuU2NvcGVJZCkpdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpO2Vsc2UgZm9yKHZhciByPWU7cjspbih0PXIuY29udGV4dCkmJm4odD10LiRvcHRpb25zLl9zY29wZUlkKSYmdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpLHI9ci5wYXJlbnQ7bih0PVd0KSYmdCE9PWUuY29udGV4dCYmdCE9PWUuZm5Db250ZXh0JiZuKHQ9dC4kb3B0aW9ucy5fc2NvcGVJZCkmJnUuc2V0U3R5bGVTY29wZShlLmVsbSx0KX1mdW5jdGlvbiBfKGUsdCxuLHIsaSxvKXtmb3IoO3I8PWk7KytyKWYobltyXSxvLGUsdCwhMSxuLHIpfWZ1bmN0aW9uIGIoZSl7dmFyIHQscixpPWUuZGF0YTtpZihuKGkpKWZvcihuKHQ9aS5ob29rKSYmbih0PXQuZGVzdHJveSkmJnQoZSksdD0wO3Q8cy5kZXN0cm95Lmxlbmd0aDsrK3Qpcy5kZXN0cm95W3RdKGUpO2lmKG4odD1lLmNoaWxkcmVuKSlmb3Iocj0wO3I8ZS5jaGlsZHJlbi5sZW5ndGg7KytyKWIoZS5jaGlsZHJlbltyXSl9ZnVuY3Rpb24gJChlLHQscil7Zm9yKDt0PD1yOysrdCl7dmFyIGk9ZVt0XTtuKGkpJiYobihpLnRhZyk/KHcoaSksYihpKSk6bChpLmVsbSkpfX1mdW5jdGlvbiB3KGUsdCl7aWYobih0KXx8bihlLmRhdGEpKXt2YXIgcixpPXMucmVtb3ZlLmxlbmd0aCsxO2ZvcihuKHQpP3QubGlzdGVuZXJzKz1pOnQ9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKCl7MD09LS1uLmxpc3RlbmVycyYmbChlKX1yZXR1cm4gbi5saXN0ZW5lcnM9dCxufShlLmVsbSxpKSxuKHI9ZS5jb21wb25lbnRJbnN0YW5jZSkmJm4ocj1yLl92bm9kZSkmJm4oci5kYXRhKSYmdyhyLHQpLHI9MDtyPHMucmVtb3ZlLmxlbmd0aDsrK3Ipcy5yZW1vdmVbcl0oZSx0KTtuKHI9ZS5kYXRhLmhvb2spJiZuKHI9ci5yZW1vdmUpP3IoZSx0KTp0KCl9ZWxzZSBsKGUuZWxtKX1mdW5jdGlvbiBDKGUsdCxyLGkpe2Zvcih2YXIgbz1yO288aTtvKyspe3ZhciBhPXRbb107aWYobihhKSYmaXIoZSxhKSlyZXR1cm4gb319ZnVuY3Rpb24geChlLGksbyxhLGMsbCl7aWYoZSE9PWkpe24oaS5lbG0pJiZuKGEpJiYoaT1hW2NdPW1lKGkpKTt2YXIgcD1pLmVsbT1lLmVsbTtpZihyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSluKGkuYXN5bmNGYWN0b3J5LnJlc29sdmVkKT9PKGUuZWxtLGksbyk6aS5pc0FzeW5jUGxhY2Vob2xkZXI9ITA7ZWxzZSBpZihyKGkuaXNTdGF0aWMpJiZyKGUuaXNTdGF0aWMpJiZpLmtleT09PWUua2V5JiYocihpLmlzQ2xvbmVkKXx8cihpLmlzT25jZSkpKWkuY29tcG9uZW50SW5zdGFuY2U9ZS5jb21wb25lbnRJbnN0YW5jZTtlbHNle3ZhciBkLHY9aS5kYXRhO24odikmJm4oZD12Lmhvb2spJiZuKGQ9ZC5wcmVwYXRjaCkmJmQoZSxpKTt2YXIgaD1lLmNoaWxkcmVuLHk9aS5jaGlsZHJlbjtpZihuKHYpJiZtKGkpKXtmb3IoZD0wO2Q8cy51cGRhdGUubGVuZ3RoOysrZClzLnVwZGF0ZVtkXShlLGkpO24oZD12Lmhvb2spJiZuKGQ9ZC51cGRhdGUpJiZkKGUsaSl9dChpLnRleHQpP24oaCkmJm4oeSk/aCE9PXkmJmZ1bmN0aW9uKGUscixpLG8sYSl7Zm9yKHZhciBzLGMsbCxwPTAsZD0wLHY9ci5sZW5ndGgtMSxoPXJbMF0sbT1yW3ZdLHk9aS5sZW5ndGgtMSxnPWlbMF0sYj1pW3ldLHc9IWE7cDw9diYmZDw9eTspdChoKT9oPXJbKytwXTp0KG0pP209clstLXZdOmlyKGgsZyk/KHgoaCxnLG8saSxkKSxoPXJbKytwXSxnPWlbKytkXSk6aXIobSxiKT8oeChtLGIsbyxpLHkpLG09clstLXZdLGI9aVstLXldKTppcihoLGIpPyh4KGgsYixvLGkseSksdyYmdS5pbnNlcnRCZWZvcmUoZSxoLmVsbSx1Lm5leHRTaWJsaW5nKG0uZWxtKSksaD1yWysrcF0sYj1pWy0teV0pOmlyKG0sZyk/KHgobSxnLG8saSxkKSx3JiZ1Lmluc2VydEJlZm9yZShlLG0uZWxtLGguZWxtKSxtPXJbLS12XSxnPWlbKytkXSk6KHQocykmJihzPW9yKHIscCx2KSksdChjPW4oZy5rZXkpP3NbZy5rZXldOkMoZyxyLHAsdikpP2YoZyxvLGUsaC5lbG0sITEsaSxkKTppcihsPXJbY10sZyk/KHgobCxnLG8saSxkKSxyW2NdPXZvaWQgMCx3JiZ1Lmluc2VydEJlZm9yZShlLGwuZWxtLGguZWxtKSk6ZihnLG8sZSxoLmVsbSwhMSxpLGQpLGc9aVsrK2RdKTtwPnY/XyhlLHQoaVt5KzFdKT9udWxsOmlbeSsxXS5lbG0saSxkLHksbyk6ZD55JiYkKHIscCx2KX0ocCxoLHksbyxsKTpuKHkpPyhuKGUudGV4dCkmJnUuc2V0VGV4dENvbnRlbnQocCwiIiksXyhwLG51bGwseSwwLHkubGVuZ3RoLTEsbykpOm4oaCk/JChoLDAsaC5sZW5ndGgtMSk6bihlLnRleHQpJiZ1LnNldFRleHRDb250ZW50KHAsIiIpOmUudGV4dCE9PWkudGV4dCYmdS5zZXRUZXh0Q29udGVudChwLGkudGV4dCksbih2KSYmbihkPXYuaG9vaykmJm4oZD1kLnBvc3RwYXRjaCkmJmQoZSxpKX19fWZ1bmN0aW9uIGsoZSx0LGkpe2lmKHIoaSkmJm4oZS5wYXJlbnQpKWUucGFyZW50LmRhdGEucGVuZGluZ0luc2VydD10O2Vsc2UgZm9yKHZhciBvPTA7bzx0Lmxlbmd0aDsrK28pdFtvXS5kYXRhLmhvb2suaW5zZXJ0KHRbb10pfXZhciBBPXAoImF0dHJzLGNsYXNzLHN0YXRpY0NsYXNzLHN0YXRpY1N0eWxlLGtleSIpO2Z1bmN0aW9uIE8oZSx0LGksbyl7dmFyIGEscz10LnRhZyxjPXQuZGF0YSx1PXQuY2hpbGRyZW47aWYobz1vfHxjJiZjLnByZSx0LmVsbT1lLHIodC5pc0NvbW1lbnQpJiZuKHQuYXN5bmNGYWN0b3J5KSlyZXR1cm4gdC5pc0FzeW5jUGxhY2Vob2xkZXI9ITAsITA7aWYobihjKSYmKG4oYT1jLmhvb2spJiZuKGE9YS5pbml0KSYmYSh0LCEwKSxuKGE9dC5jb21wb25lbnRJbnN0YW5jZSkpKXJldHVybiBkKHQsaSksITA7aWYobihzKSl7aWYobih1KSlpZihlLmhhc0NoaWxkTm9kZXMoKSlpZihuKGE9YykmJm4oYT1hLmRvbVByb3BzKSYmbihhPWEuaW5uZXJIVE1MKSl7aWYoYSE9PWUuaW5uZXJIVE1MKXJldHVybiExfWVsc2V7Zm9yKHZhciBsPSEwLGY9ZS5maXJzdENoaWxkLHA9MDtwPHUubGVuZ3RoO3ArKyl7aWYoIWZ8fCFPKGYsdVtwXSxpLG8pKXtsPSExO2JyZWFrfWY9Zi5uZXh0U2libGluZ31pZighbHx8ZilyZXR1cm4hMX1lbHNlIGgodCx1LGkpO2lmKG4oYykpe3ZhciB2PSExO2Zvcih2YXIgbSBpbiBjKWlmKCFBKG0pKXt2PSEwLHkodCxpKTticmVha30hdiYmYy5jbGFzcyYmZXQoYy5jbGFzcyl9fWVsc2UgZS5kYXRhIT09dC50ZXh0JiYoZS5kYXRhPXQudGV4dCk7cmV0dXJuITB9cmV0dXJuIGZ1bmN0aW9uKGUsaSxvLGEpe2lmKCF0KGkpKXt2YXIgYyxsPSExLHA9W107aWYodChlKSlsPSEwLGYoaSxwKTtlbHNle3ZhciBkPW4oZS5ub2RlVHlwZSk7aWYoIWQmJmlyKGUsaSkpeChlLGkscCxudWxsLG51bGwsYSk7ZWxzZXtpZihkKXtpZigxPT09ZS5ub2RlVHlwZSYmZS5oYXNBdHRyaWJ1dGUoTCkmJihlLnJlbW92ZUF0dHJpYnV0ZShMKSxvPSEwKSxyKG8pJiZPKGUsaSxwKSlyZXR1cm4gayhpLHAsITApLGU7Yz1lLGU9bmV3IHBlKHUudGFnTmFtZShjKS50b0xvd2VyQ2FzZSgpLHt9LFtdLHZvaWQgMCxjKX12YXIgdj1lLmVsbSxoPXUucGFyZW50Tm9kZSh2KTtpZihmKGkscCx2Ll9sZWF2ZUNiP251bGw6aCx1Lm5leHRTaWJsaW5nKHYpKSxuKGkucGFyZW50KSlmb3IodmFyIHk9aS5wYXJlbnQsZz1tKGkpO3k7KXtmb3IodmFyIF89MDtfPHMuZGVzdHJveS5sZW5ndGg7KytfKXMuZGVzdHJveVtfXSh5KTtpZih5LmVsbT1pLmVsbSxnKXtmb3IodmFyIHc9MDt3PHMuY3JlYXRlLmxlbmd0aDsrK3cpcy5jcmVhdGVbd10obnIseSk7dmFyIEM9eS5kYXRhLmhvb2suaW5zZXJ0O2lmKEMubWVyZ2VkKWZvcih2YXIgQT0xO0E8Qy5mbnMubGVuZ3RoO0ErKylDLmZuc1tBXSgpfWVsc2UgdHIoeSk7eT15LnBhcmVudH1uKGgpPyQoW2VdLDAsMCk6bihlLnRhZykmJmIoZSl9fXJldHVybiBrKGkscCxsKSxpLmVsbX1uKGUpJiZiKGUpfX0oe25vZGVPcHM6UW4sbW9kdWxlczpbbXIseHIsbmksb2ksbWksej97Y3JlYXRlOlVpLGFjdGl2YXRlOlVpLHJlbW92ZTpmdW5jdGlvbihlLHQpeyEwIT09ZS5kYXRhLnNob3c/UmkoZSx0KTp0KCl9fTp7fV0uY29uY2F0KHByKX0pO1cmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2UmJmUudm1vZGVsJiZYaShlLCJpbnB1dCIpfSk7dmFyIFZpPXtpbnNlcnRlZDpmdW5jdGlvbihlLHQsbixyKXsic2VsZWN0Ij09PW4udGFnPyhyLmVsbSYmIXIuZWxtLl92T3B0aW9ucz9pdChuLCJwb3N0cGF0Y2giLGZ1bmN0aW9uKCl7VmkuY29tcG9uZW50VXBkYXRlZChlLHQsbil9KTpLaShlLHQsbi5jb250ZXh0KSxlLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpKTooInRleHRhcmVhIj09PW4udGFnfHxYbihlLnR5cGUpKSYmKGUuX3ZNb2RpZmllcnM9dC5tb2RpZmllcnMsdC5tb2RpZmllcnMubGF6eXx8KGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25zdGFydCIsWmkpLGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25lbmQiLEdpKSxlLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsR2kpLFcmJihlLnZtb2RlbD0hMCkpKX0sY29tcG9uZW50VXBkYXRlZDpmdW5jdGlvbihlLHQsbil7aWYoInNlbGVjdCI9PT1uLnRhZyl7S2koZSx0LG4uY29udGV4dCk7dmFyIHI9ZS5fdk9wdGlvbnMsaT1lLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpO2lmKGkuc29tZShmdW5jdGlvbihlLHQpe3JldHVybiFOKGUsclt0XSl9KSkoZS5tdWx0aXBsZT90LnZhbHVlLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIHFpKGUsaSl9KTp0LnZhbHVlIT09dC5vbGRWYWx1ZSYmcWkodC52YWx1ZSxpKSkmJlhpKGUsImNoYW5nZSIpfX19O2Z1bmN0aW9uIEtpKGUsdCxuKXtKaShlLHQsbiksKHF8fFopJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7SmkoZSx0LG4pfSwwKX1mdW5jdGlvbiBKaShlLHQsbil7dmFyIHI9dC52YWx1ZSxpPWUubXVsdGlwbGU7aWYoIWl8fEFycmF5LmlzQXJyYXkocikpe2Zvcih2YXIgbyxhLHM9MCxjPWUub3B0aW9ucy5sZW5ndGg7czxjO3MrKylpZihhPWUub3B0aW9uc1tzXSxpKW89aihyLFdpKGEpKT4tMSxhLnNlbGVjdGVkIT09byYmKGEuc2VsZWN0ZWQ9byk7ZWxzZSBpZihOKFdpKGEpLHIpKXJldHVybiB2b2lkKGUuc2VsZWN0ZWRJbmRleCE9PXMmJihlLnNlbGVjdGVkSW5kZXg9cykpO2l8fChlLnNlbGVjdGVkSW5kZXg9LTEpfX1mdW5jdGlvbiBxaShlLHQpe3JldHVybiB0LmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiFOKHQsZSl9KX1mdW5jdGlvbiBXaShlKXtyZXR1cm4iX3ZhbHVlImluIGU/ZS5fdmFsdWU6ZS52YWx1ZX1mdW5jdGlvbiBaaShlKXtlLnRhcmdldC5jb21wb3Npbmc9ITB9ZnVuY3Rpb24gR2koZSl7ZS50YXJnZXQuY29tcG9zaW5nJiYoZS50YXJnZXQuY29tcG9zaW5nPSExLFhpKGUudGFyZ2V0LCJpbnB1dCIpKX1mdW5jdGlvbiBYaShlLHQpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7bi5pbml0RXZlbnQodCwhMCwhMCksZS5kaXNwYXRjaEV2ZW50KG4pfWZ1bmN0aW9uIFlpKGUpe3JldHVybiFlLmNvbXBvbmVudEluc3RhbmNlfHxlLmRhdGEmJmUuZGF0YS50cmFuc2l0aW9uP2U6WWkoZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpfXZhciBRaT17bW9kZWw6Vmksc2hvdzp7YmluZDpmdW5jdGlvbihlLHQsbil7dmFyIHI9dC52YWx1ZSxpPShuPVlpKG4pKS5kYXRhJiZuLmRhdGEudHJhbnNpdGlvbixvPWUuX192T3JpZ2luYWxEaXNwbGF5PSJub25lIj09PWUuc3R5bGUuZGlzcGxheT8iIjplLnN0eWxlLmRpc3BsYXk7ciYmaT8obi5kYXRhLnNob3c9ITAsUGkobixmdW5jdGlvbigpe2Uuc3R5bGUuZGlzcGxheT1vfSkpOmUuc3R5bGUuZGlzcGxheT1yP286Im5vbmUifSx1cGRhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQudmFsdWU7IXIhPSF0Lm9sZFZhbHVlJiYoKG49WWkobikpLmRhdGEmJm4uZGF0YS50cmFuc2l0aW9uPyhuLmRhdGEuc2hvdz0hMCxyP1BpKG4sZnVuY3Rpb24oKXtlLnN0eWxlLmRpc3BsYXk9ZS5fX3ZPcmlnaW5hbERpc3BsYXl9KTpSaShuLGZ1bmN0aW9uKCl7ZS5zdHlsZS5kaXNwbGF5PSJub25lIn0pKTplLnN0eWxlLmRpc3BsYXk9cj9lLl9fdk9yaWdpbmFsRGlzcGxheToibm9uZSIpfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0LG4scixpKXtpfHwoZS5zdHlsZS5kaXNwbGF5PWUuX192T3JpZ2luYWxEaXNwbGF5KX19fSxlbz17bmFtZTpTdHJpbmcsYXBwZWFyOkJvb2xlYW4sY3NzOkJvb2xlYW4sbW9kZTpTdHJpbmcsdHlwZTpTdHJpbmcsZW50ZXJDbGFzczpTdHJpbmcsbGVhdmVDbGFzczpTdHJpbmcsZW50ZXJUb0NsYXNzOlN0cmluZyxsZWF2ZVRvQ2xhc3M6U3RyaW5nLGVudGVyQWN0aXZlQ2xhc3M6U3RyaW5nLGxlYXZlQWN0aXZlQ2xhc3M6U3RyaW5nLGFwcGVhckNsYXNzOlN0cmluZyxhcHBlYXJBY3RpdmVDbGFzczpTdHJpbmcsYXBwZWFyVG9DbGFzczpTdHJpbmcsZHVyYXRpb246W051bWJlcixTdHJpbmcsT2JqZWN0XX07ZnVuY3Rpb24gdG8oZSl7dmFyIHQ9ZSYmZS5jb21wb25lbnRPcHRpb25zO3JldHVybiB0JiZ0LkN0b3Iub3B0aW9ucy5hYnN0cmFjdD90byh6dCh0LmNoaWxkcmVuKSk6ZX1mdW5jdGlvbiBubyhlKXt2YXIgdD17fSxuPWUuJG9wdGlvbnM7Zm9yKHZhciByIGluIG4ucHJvcHNEYXRhKXRbcl09ZVtyXTt2YXIgaT1uLl9wYXJlbnRMaXN0ZW5lcnM7Zm9yKHZhciBvIGluIGkpdFtiKG8pXT1pW29dO3JldHVybiB0fWZ1bmN0aW9uIHJvKGUsdCl7aWYoL1xkLWtlZXAtYWxpdmUkLy50ZXN0KHQudGFnKSlyZXR1cm4gZSgia2VlcC1hbGl2ZSIse3Byb3BzOnQuY29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGF9KX12YXIgaW89ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnfHxVdChlKX0sb289ZnVuY3Rpb24oZSl7cmV0dXJuInNob3ciPT09ZS5uYW1lfSxhbz17bmFtZToidHJhbnNpdGlvbiIscHJvcHM6ZW8sYWJzdHJhY3Q6ITAscmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLiRzbG90cy5kZWZhdWx0O2lmKG4mJihuPW4uZmlsdGVyKGlvKSkubGVuZ3RoKXt2YXIgcj10aGlzLm1vZGUsbz1uWzBdO2lmKGZ1bmN0aW9uKGUpe2Zvcig7ZT1lLnBhcmVudDspaWYoZS5kYXRhLnRyYW5zaXRpb24pcmV0dXJuITB9KHRoaXMuJHZub2RlKSlyZXR1cm4gbzt2YXIgYT10byhvKTtpZighYSlyZXR1cm4gbztpZih0aGlzLl9sZWF2aW5nKXJldHVybiBybyhlLG8pO3ZhciBzPSJfX3RyYW5zaXRpb24tIit0aGlzLl91aWQrIi0iO2Eua2V5PW51bGw9PWEua2V5P2EuaXNDb21tZW50P3MrImNvbW1lbnQiOnMrYS50YWc6aShhLmtleSk/MD09PVN0cmluZyhhLmtleSkuaW5kZXhPZihzKT9hLmtleTpzK2Eua2V5OmEua2V5O3ZhciBjPShhLmRhdGF8fChhLmRhdGE9e30pKS50cmFuc2l0aW9uPW5vKHRoaXMpLHU9dGhpcy5fdm5vZGUsbD10byh1KTtpZihhLmRhdGEuZGlyZWN0aXZlcyYmYS5kYXRhLmRpcmVjdGl2ZXMuc29tZShvbykmJihhLmRhdGEuc2hvdz0hMCksbCYmbC5kYXRhJiYhZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5rZXk9PT1lLmtleSYmdC50YWc9PT1lLnRhZ30oYSxsKSYmIVV0KGwpJiYoIWwuY29tcG9uZW50SW5zdGFuY2V8fCFsLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZS5pc0NvbW1lbnQpKXt2YXIgZj1sLmRhdGEudHJhbnNpdGlvbj1BKHt9LGMpO2lmKCJvdXQtaW4iPT09cilyZXR1cm4gdGhpcy5fbGVhdmluZz0hMCxpdChmLCJhZnRlckxlYXZlIixmdW5jdGlvbigpe3QuX2xlYXZpbmc9ITEsdC4kZm9yY2VVcGRhdGUoKX0pLHJvKGUsbyk7aWYoImluLW91dCI9PT1yKXtpZihVdChhKSlyZXR1cm4gdTt2YXIgcCxkPWZ1bmN0aW9uKCl7cCgpfTtpdChjLCJhZnRlckVudGVyIixkKSxpdChjLCJlbnRlckNhbmNlbGxlZCIsZCksaXQoZiwiZGVsYXlMZWF2ZSIsZnVuY3Rpb24oZSl7cD1lfSl9fXJldHVybiBvfX19LHNvPUEoe3RhZzpTdHJpbmcsbW92ZUNsYXNzOlN0cmluZ30sZW8pO2Z1bmN0aW9uIGNvKGUpe2UuZWxtLl9tb3ZlQ2ImJmUuZWxtLl9tb3ZlQ2IoKSxlLmVsbS5fZW50ZXJDYiYmZS5lbG0uX2VudGVyQ2IoKX1mdW5jdGlvbiB1byhlKXtlLmRhdGEubmV3UG9zPWUuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWZ1bmN0aW9uIGxvKGUpe3ZhciB0PWUuZGF0YS5wb3Msbj1lLmRhdGEubmV3UG9zLHI9dC5sZWZ0LW4ubGVmdCxpPXQudG9wLW4udG9wO2lmKHJ8fGkpe2UuZGF0YS5tb3ZlZD0hMDt2YXIgbz1lLmVsbS5zdHlsZTtvLnRyYW5zZm9ybT1vLldlYmtpdFRyYW5zZm9ybT0idHJhbnNsYXRlKCIrcisicHgsIitpKyJweCkiLG8udHJhbnNpdGlvbkR1cmF0aW9uPSIwcyJ9fWRlbGV0ZSBzby5tb2RlO3ZhciBmbz17VHJhbnNpdGlvbjphbyxUcmFuc2l0aW9uR3JvdXA6e3Byb3BzOnNvLGJlZm9yZU1vdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX3VwZGF0ZTt0aGlzLl91cGRhdGU9ZnVuY3Rpb24obixyKXt2YXIgaT1adChlKTtlLl9fcGF0Y2hfXyhlLl92bm9kZSxlLmtlcHQsITEsITApLGUuX3Zub2RlPWUua2VwdCxpKCksdC5jYWxsKGUsbixyKX19LHJlbmRlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50YWd8fHRoaXMuJHZub2RlLmRhdGEudGFnfHwic3BhbiIsbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGhpcy5wcmV2Q2hpbGRyZW49dGhpcy5jaGlsZHJlbixpPXRoaXMuJHNsb3RzLmRlZmF1bHR8fFtdLG89dGhpcy5jaGlsZHJlbj1bXSxhPW5vKHRoaXMpLHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGM9aVtzXTtjLnRhZyYmbnVsbCE9Yy5rZXkmJjAhPT1TdHJpbmcoYy5rZXkpLmluZGV4T2YoIl9fdmxpc3QiKSYmKG8ucHVzaChjKSxuW2Mua2V5XT1jLChjLmRhdGF8fChjLmRhdGE9e30pKS50cmFuc2l0aW9uPWEpfWlmKHIpe2Zvcih2YXIgdT1bXSxsPVtdLGY9MDtmPHIubGVuZ3RoO2YrKyl7dmFyIHA9cltmXTtwLmRhdGEudHJhbnNpdGlvbj1hLHAuZGF0YS5wb3M9cC5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbltwLmtleV0/dS5wdXNoKHApOmwucHVzaChwKX10aGlzLmtlcHQ9ZSh0LG51bGwsdSksdGhpcy5yZW1vdmVkPWx9cmV0dXJuIGUodCxudWxsLG8pfSx1cGRhdGVkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcmV2Q2hpbGRyZW4sdD10aGlzLm1vdmVDbGFzc3x8KHRoaXMubmFtZXx8InYiKSsiLW1vdmUiO2UubGVuZ3RoJiZ0aGlzLmhhc01vdmUoZVswXS5lbG0sdCkmJihlLmZvckVhY2goY28pLGUuZm9yRWFjaCh1byksZS5mb3JFYWNoKGxvKSx0aGlzLl9yZWZsb3c9ZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQsZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5tb3ZlZCl7dmFyIG49ZS5lbG0scj1uLnN0eWxlO05pKG4sdCksci50cmFuc2Zvcm09ci5XZWJraXRUcmFuc2Zvcm09ci50cmFuc2l0aW9uRHVyYXRpb249IiIsbi5hZGRFdmVudExpc3RlbmVyKEFpLG4uX21vdmVDYj1mdW5jdGlvbiBlKHIpe3ImJnIudGFyZ2V0IT09bnx8ciYmIS90cmFuc2Zvcm0kLy50ZXN0KHIucHJvcGVydHlOYW1lKXx8KG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihBaSxlKSxuLl9tb3ZlQ2I9bnVsbCxqaShuLHQpKX0pfX0pKX0sbWV0aG9kczp7aGFzTW92ZTpmdW5jdGlvbihlLHQpe2lmKCF3aSlyZXR1cm4hMTtpZih0aGlzLl9oYXNNb3ZlKXJldHVybiB0aGlzLl9oYXNNb3ZlO3ZhciBuPWUuY2xvbmVOb2RlKCk7ZS5fdHJhbnNpdGlvbkNsYXNzZXMmJmUuX3RyYW5zaXRpb25DbGFzc2VzLmZvckVhY2goZnVuY3Rpb24oZSl7X2kobixlKX0pLGdpKG4sdCksbi5zdHlsZS5kaXNwbGF5PSJub25lIix0aGlzLiRlbC5hcHBlbmRDaGlsZChuKTt2YXIgcj1NaShuKTtyZXR1cm4gdGhpcy4kZWwucmVtb3ZlQ2hpbGQobiksdGhpcy5faGFzTW92ZT1yLmhhc1RyYW5zZm9ybX19fX07d24uY29uZmlnLm11c3RVc2VQcm9wPWpuLHduLmNvbmZpZy5pc1Jlc2VydmVkVGFnPVduLHduLmNvbmZpZy5pc1Jlc2VydmVkQXR0cj1Fbix3bi5jb25maWcuZ2V0VGFnTmFtZXNwYWNlPVpuLHduLmNvbmZpZy5pc1Vua25vd25FbGVtZW50PWZ1bmN0aW9uKGUpe2lmKCF6KXJldHVybiEwO2lmKFduKGUpKXJldHVybiExO2lmKGU9ZS50b0xvd2VyQ2FzZSgpLG51bGwhPUduW2VdKXJldHVybiBHbltlXTt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiBlLmluZGV4T2YoIi0iKT4tMT9HbltlXT10LmNvbnN0cnVjdG9yPT09d2luZG93LkhUTUxVbmtub3duRWxlbWVudHx8dC5jb25zdHJ1Y3Rvcj09PXdpbmRvdy5IVE1MRWxlbWVudDpHbltlXT0vSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KHQudG9TdHJpbmcoKSl9LEEod24ub3B0aW9ucy5kaXJlY3RpdmVzLFFpKSxBKHduLm9wdGlvbnMuY29tcG9uZW50cyxmbyksd24ucHJvdG90eXBlLl9fcGF0Y2hfXz16P3ppOlMsd24ucHJvdG90eXBlLiRtb3VudD1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGUuJGVsPXQsZS4kb3B0aW9ucy5yZW5kZXJ8fChlLiRvcHRpb25zLnJlbmRlcj12ZSksWXQoZSwiYmVmb3JlTW91bnQiKSxyPWZ1bmN0aW9uKCl7ZS5fdXBkYXRlKGUuX3JlbmRlcigpLG4pfSxuZXcgZm4oZSxyLFMse2JlZm9yZTpmdW5jdGlvbigpe2UuX2lzTW91bnRlZCYmIWUuX2lzRGVzdHJveWVkJiZZdChlLCJiZWZvcmVVcGRhdGUiKX19LCEwKSxuPSExLG51bGw9PWUuJHZub2RlJiYoZS5faXNNb3VudGVkPSEwLFl0KGUsIm1vdW50ZWQiKSksZX0odGhpcyxlPWUmJno/WW4oZSk6dm9pZCAwLHQpfSx6JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Ri5kZXZ0b29scyYmbmUmJm5lLmVtaXQoImluaXQiLHduKX0sMCk7dmFyIHBvPS9ce1x7KCg/Oi58XHI/XG4pKz8pXH1cfS9nLHZvPS9bLS4qKz9eJHt9KCl8W1xdXC9cXF0vZyxobz1nKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0ucmVwbGFjZSh2bywiXFwkJiIpLG49ZVsxXS5yZXBsYWNlKHZvLCJcXCQmIik7cmV0dXJuIG5ldyBSZWdFeHAodCsiKCg/Oi58XFxuKSs/KSIrbiwiZyIpfSk7dmFyIG1vPXtzdGF0aWNLZXlzOlsic3RhdGljQ2xhc3MiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsImNsYXNzIik7biYmKGUuc3RhdGljQ2xhc3M9SlNPTi5zdHJpbmdpZnkobikpO3ZhciByPUlyKGUsImNsYXNzIiwhMSk7ciYmKGUuY2xhc3NCaW5kaW5nPXIpfSxnZW5EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PSIiO3JldHVybiBlLnN0YXRpY0NsYXNzJiYodCs9InN0YXRpY0NsYXNzOiIrZS5zdGF0aWNDbGFzcysiLCIpLGUuY2xhc3NCaW5kaW5nJiYodCs9ImNsYXNzOiIrZS5jbGFzc0JpbmRpbmcrIiwiKSx0fX07dmFyIHlvLGdvPXtzdGF0aWNLZXlzOlsic3RhdGljU3R5bGUiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsInN0eWxlIik7biYmKGUuc3RhdGljU3R5bGU9SlNPTi5zdHJpbmdpZnkoYWkobikpKTt2YXIgcj1JcihlLCJzdHlsZSIsITEpO3ImJihlLnN0eWxlQmluZGluZz1yKX0sZ2VuRGF0YTpmdW5jdGlvbihlKXt2YXIgdD0iIjtyZXR1cm4gZS5zdGF0aWNTdHlsZSYmKHQrPSJzdGF0aWNTdHlsZToiK2Uuc3RhdGljU3R5bGUrIiwiKSxlLnN0eWxlQmluZGluZyYmKHQrPSJzdHlsZTooIitlLnN0eWxlQmluZGluZysiKSwiKSx0fX0sX289ZnVuY3Rpb24oZSl7cmV0dXJuKHlvPXlvfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWUseW8udGV4dENvbnRlbnR9LGJvPXAoImFyZWEsYmFzZSxicixjb2wsZW1iZWQsZnJhbWUsaHIsaW1nLGlucHV0LGlzaW5kZXgsa2V5Z2VuLGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyIiksJG89cCgiY29sZ3JvdXAsZGQsZHQsbGksb3B0aW9ucyxwLHRkLHRmb290LHRoLHRoZWFkLHRyLHNvdXJjZSIpLHdvPXAoImFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxiYXNlLGJsb2NrcXVvdGUsYm9keSxjYXB0aW9uLGNvbCxjb2xncm91cCxkZCxkZXRhaWxzLGRpYWxvZyxkaXYsZGwsZHQsZmllbGRzZXQsZmlnY2FwdGlvbixmaWd1cmUsZm9vdGVyLGZvcm0saDEsaDIsaDMsaDQsaDUsaDYsaGVhZCxoZWFkZXIsaGdyb3VwLGhyLGh0bWwsbGVnZW5kLGxpLG1lbnVpdGVtLG1ldGEsb3B0Z3JvdXAsb3B0aW9uLHBhcmFtLHJwLHJ0LHNvdXJjZSxzdHlsZSxzdW1tYXJ5LHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRpdGxlLHRyLHRyYWNrIiksQ289L15ccyooW15ccyInPD5cLz1dKykoPzpccyooPSlccyooPzoiKFteIl0qKSIrfCcoW14nXSopJyt8KFteXHMiJz08PmBdKykpKT8vLHhvPS9eXHMqKCg/OnYtW1x3LV0rOnxAfDp8IylcW1tePV0rXF1bXlxzIic8PlwvPV0qKSg/OlxzKig9KVxzKig/OiIoW14iXSopIit8JyhbXiddKiknK3woW15ccyInPTw+YF0rKSkpPy8sa289IlthLXpBLVpfXVtcXC1cXC4wLTlfYS16QS1aIitQLnNvdXJjZSsiXSoiLEFvPSIoKD86IitrbysiXFw6KT8iK2tvKyIpIixPbz1uZXcgUmVnRXhwKCJePCIrQW8pLFNvPS9eXHMqKFwvPyk+LyxUbz1uZXcgUmVnRXhwKCJePFxcLyIrQW8rIltePl0qPiIpLEVvPS9ePCFET0NUWVBFIFtePl0rPi9pLE5vPS9ePCFcLS0vLGpvPS9ePCFcWy8sRG89cCgic2NyaXB0LHN0eWxlLHRleHRhcmVhIiwhMCksTG89e30sTW89eyImbHQ7IjoiPCIsIiZndDsiOiI+IiwiJnF1b3Q7IjonIicsIiZhbXA7IjoiJiIsIiYjMTA7IjoiXG4iLCImIzk7IjoiXHQiLCImIzM5OyI6IicifSxJbz0vJig/Omx0fGd0fHF1b3R8YW1wfCMzOSk7L2csRm89LyYoPzpsdHxndHxxdW90fGFtcHwjMzl8IzEwfCM5KTsvZyxQbz1wKCJwcmUsdGV4dGFyZWEiLCEwKSxSbz1mdW5jdGlvbihlLHQpe3JldHVybiBlJiZQbyhlKSYmIlxuIj09PXRbMF19O2Z1bmN0aW9uIEhvKGUsdCl7dmFyIG49dD9GbzpJbztyZXR1cm4gZS5yZXBsYWNlKG4sZnVuY3Rpb24oZSl7cmV0dXJuIE1vW2VdfSl9dmFyIEJvLFVvLHpvLFZvLEtvLEpvLHFvLFdvLFpvPS9eQHxedi1vbjovLEdvPS9edi18XkB8Xjp8XiMvLFhvPS8oW1xzXFNdKj8pXHMrKD86aW58b2YpXHMrKFtcc1xTXSopLyxZbz0vLChbXixcfVxdXSopKD86LChbXixcfVxdXSopKT8kLyxRbz0vXlwofFwpJC9nLGVhPS9eXFsuKlxdJC8sdGE9LzooLiopJC8sbmE9L146fF5cLnxedi1iaW5kOi8scmE9L1wuW14uXF1dKyg/PVteXF1dKiQpL2csaWE9L152LXNsb3QoOnwkKXxeIy8sb2E9L1tcclxuXS8sYWE9L1xzKy9nLHNhPWcoX28pLGNhPSJfZW1wdHlfIjtmdW5jdGlvbiB1YShlLHQsbil7cmV0dXJue3R5cGU6MSx0YWc6ZSxhdHRyc0xpc3Q6dCxhdHRyc01hcDptYSh0KSxyYXdBdHRyc01hcDp7fSxwYXJlbnQ6bixjaGlsZHJlbjpbXX19ZnVuY3Rpb24gbGEoZSx0KXtCbz10Lndhcm58fFNyLEpvPXQuaXNQcmVUYWd8fFQscW89dC5tdXN0VXNlUHJvcHx8VCxXbz10LmdldFRhZ05hbWVzcGFjZXx8VDt0LmlzUmVzZXJ2ZWRUYWc7em89VHIodC5tb2R1bGVzLCJ0cmFuc2Zvcm1Ob2RlIiksVm89VHIodC5tb2R1bGVzLCJwcmVUcmFuc2Zvcm1Ob2RlIiksS289VHIodC5tb2R1bGVzLCJwb3N0VHJhbnNmb3JtTm9kZSIpLFVvPXQuZGVsaW1pdGVyczt2YXIgbixyLGk9W10sbz0hMSE9PXQucHJlc2VydmVXaGl0ZXNwYWNlLGE9dC53aGl0ZXNwYWNlLHM9ITEsYz0hMTtmdW5jdGlvbiB1KGUpe2lmKGwoZSksc3x8ZS5wcm9jZXNzZWR8fChlPWZhKGUsdCkpLGkubGVuZ3RofHxlPT09bnx8bi5pZiYmKGUuZWxzZWlmfHxlLmVsc2UpJiZkYShuLHtleHA6ZS5lbHNlaWYsYmxvY2s6ZX0pLHImJiFlLmZvcmJpZGRlbilpZihlLmVsc2VpZnx8ZS5lbHNlKWE9ZSwodT1mdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aDtmb3IoO3QtLTspe2lmKDE9PT1lW3RdLnR5cGUpcmV0dXJuIGVbdF07ZS5wb3AoKX19KHIuY2hpbGRyZW4pKSYmdS5pZiYmZGEodSx7ZXhwOmEuZWxzZWlmLGJsb2NrOmF9KTtlbHNle2lmKGUuc2xvdFNjb3BlKXt2YXIgbz1lLnNsb3RUYXJnZXR8fCciZGVmYXVsdCInOyhyLnNjb3BlZFNsb3RzfHwoci5zY29wZWRTbG90cz17fSkpW29dPWV9ci5jaGlsZHJlbi5wdXNoKGUpLGUucGFyZW50PXJ9dmFyIGEsdTtlLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlLnNsb3RTY29wZX0pLGwoZSksZS5wcmUmJihzPSExKSxKbyhlLnRhZykmJihjPSExKTtmb3IodmFyIGY9MDtmPEtvLmxlbmd0aDtmKyspS29bZl0oZSx0KX1mdW5jdGlvbiBsKGUpe2lmKCFjKWZvcih2YXIgdDsodD1lLmNoaWxkcmVuW2UuY2hpbGRyZW4ubGVuZ3RoLTFdKSYmMz09PXQudHlwZSYmIiAiPT09dC50ZXh0OyllLmNoaWxkcmVuLnBvcCgpfXJldHVybiBmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyLGk9W10sbz10LmV4cGVjdEhUTUwsYT10LmlzVW5hcnlUYWd8fFQscz10LmNhbkJlTGVmdE9wZW5UYWd8fFQsYz0wO2U7KXtpZihuPWUsciYmRG8ocikpe3ZhciB1PTAsbD1yLnRvTG93ZXJDYXNlKCksZj1Mb1tsXXx8KExvW2xdPW5ldyBSZWdFeHAoIihbXFxzXFxTXSo/KSg8LyIrbCsiW14+XSo+KSIsImkiKSkscD1lLnJlcGxhY2UoZixmdW5jdGlvbihlLG4scil7cmV0dXJuIHU9ci5sZW5ndGgsRG8obCl8fCJub3NjcmlwdCI9PT1sfHwobj1uLnJlcGxhY2UoLzwhXC0tKFtcc1xTXSo/KS0tPi9nLCIkMSIpLnJlcGxhY2UoLzwhXFtDREFUQVxbKFtcc1xTXSo/KV1dPi9nLCIkMSIpKSxSbyhsLG4pJiYobj1uLnNsaWNlKDEpKSx0LmNoYXJzJiZ0LmNoYXJzKG4pLCIifSk7Yys9ZS5sZW5ndGgtcC5sZW5ndGgsZT1wLEEobCxjLXUsYyl9ZWxzZXt2YXIgZD1lLmluZGV4T2YoIjwiKTtpZigwPT09ZCl7aWYoTm8udGVzdChlKSl7dmFyIHY9ZS5pbmRleE9mKCItLVx4M2UiKTtpZih2Pj0wKXt0LnNob3VsZEtlZXBDb21tZW50JiZ0LmNvbW1lbnQoZS5zdWJzdHJpbmcoNCx2KSxjLGMrdiszKSxDKHYrMyk7Y29udGludWV9fWlmKGpvLnRlc3QoZSkpe3ZhciBoPWUuaW5kZXhPZigiXT4iKTtpZihoPj0wKXtDKGgrMik7Y29udGludWV9fXZhciBtPWUubWF0Y2goRW8pO2lmKG0pe0MobVswXS5sZW5ndGgpO2NvbnRpbnVlfXZhciB5PWUubWF0Y2goVG8pO2lmKHkpe3ZhciBnPWM7Qyh5WzBdLmxlbmd0aCksQSh5WzFdLGcsYyk7Y29udGludWV9dmFyIF89eCgpO2lmKF8pe2soXyksUm8oXy50YWdOYW1lLGUpJiZDKDEpO2NvbnRpbnVlfX12YXIgYj12b2lkIDAsJD12b2lkIDAsdz12b2lkIDA7aWYoZD49MCl7Zm9yKCQ9ZS5zbGljZShkKTshKFRvLnRlc3QoJCl8fE9vLnRlc3QoJCl8fE5vLnRlc3QoJCl8fGpvLnRlc3QoJCl8fCh3PSQuaW5kZXhPZigiPCIsMSkpPDApOylkKz13LCQ9ZS5zbGljZShkKTtiPWUuc3Vic3RyaW5nKDAsZCl9ZDwwJiYoYj1lKSxiJiZDKGIubGVuZ3RoKSx0LmNoYXJzJiZiJiZ0LmNoYXJzKGIsYy1iLmxlbmd0aCxjKX1pZihlPT09bil7dC5jaGFycyYmdC5jaGFycyhlKTticmVha319ZnVuY3Rpb24gQyh0KXtjKz10LGU9ZS5zdWJzdHJpbmcodCl9ZnVuY3Rpb24geCgpe3ZhciB0PWUubWF0Y2goT28pO2lmKHQpe3ZhciBuLHIsaT17dGFnTmFtZTp0WzFdLGF0dHJzOltdLHN0YXJ0OmN9O2ZvcihDKHRbMF0ubGVuZ3RoKTshKG49ZS5tYXRjaChTbykpJiYocj1lLm1hdGNoKHhvKXx8ZS5tYXRjaChDbykpOylyLnN0YXJ0PWMsQyhyWzBdLmxlbmd0aCksci5lbmQ9YyxpLmF0dHJzLnB1c2gocik7aWYobilyZXR1cm4gaS51bmFyeVNsYXNoPW5bMV0sQyhuWzBdLmxlbmd0aCksaS5lbmQ9YyxpfX1mdW5jdGlvbiBrKGUpe3ZhciBuPWUudGFnTmFtZSxjPWUudW5hcnlTbGFzaDtvJiYoInAiPT09ciYmd28obikmJkEocikscyhuKSYmcj09PW4mJkEobikpO2Zvcih2YXIgdT1hKG4pfHwhIWMsbD1lLmF0dHJzLmxlbmd0aCxmPW5ldyBBcnJheShsKSxwPTA7cDxsO3ArKyl7dmFyIGQ9ZS5hdHRyc1twXSx2PWRbM118fGRbNF18fGRbNV18fCIiLGg9ImEiPT09biYmImhyZWYiPT09ZFsxXT90LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzO2ZbcF09e25hbWU6ZFsxXSx2YWx1ZTpIbyh2LGgpfX11fHwoaS5wdXNoKHt0YWc6bixsb3dlckNhc2VkVGFnOm4udG9Mb3dlckNhc2UoKSxhdHRyczpmLHN0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kfSkscj1uKSx0LnN0YXJ0JiZ0LnN0YXJ0KG4sZix1LGUuc3RhcnQsZS5lbmQpfWZ1bmN0aW9uIEEoZSxuLG8pe3ZhciBhLHM7aWYobnVsbD09biYmKG49YyksbnVsbD09byYmKG89YyksZSlmb3Iocz1lLnRvTG93ZXJDYXNlKCksYT1pLmxlbmd0aC0xO2E+PTAmJmlbYV0ubG93ZXJDYXNlZFRhZyE9PXM7YS0tKTtlbHNlIGE9MDtpZihhPj0wKXtmb3IodmFyIHU9aS5sZW5ndGgtMTt1Pj1hO3UtLSl0LmVuZCYmdC5lbmQoaVt1XS50YWcsbixvKTtpLmxlbmd0aD1hLHI9YSYmaVthLTFdLnRhZ31lbHNlImJyIj09PXM/dC5zdGFydCYmdC5zdGFydChlLFtdLCEwLG4sbyk6InAiPT09cyYmKHQuc3RhcnQmJnQuc3RhcnQoZSxbXSwhMSxuLG8pLHQuZW5kJiZ0LmVuZChlLG4sbykpfUEoKX0oZSx7d2FybjpCbyxleHBlY3RIVE1MOnQuZXhwZWN0SFRNTCxpc1VuYXJ5VGFnOnQuaXNVbmFyeVRhZyxjYW5CZUxlZnRPcGVuVGFnOnQuY2FuQmVMZWZ0T3BlblRhZyxzaG91bGREZWNvZGVOZXdsaW5lczp0LnNob3VsZERlY29kZU5ld2xpbmVzLHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZixzaG91bGRLZWVwQ29tbWVudDp0LmNvbW1lbnRzLG91dHB1dFNvdXJjZVJhbmdlOnQub3V0cHV0U291cmNlUmFuZ2Usc3RhcnQ6ZnVuY3Rpb24oZSxvLGEsbCxmKXt2YXIgcD1yJiZyLm5zfHxXbyhlKTtxJiYic3ZnIj09PXAmJihvPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07eWEudGVzdChyLm5hbWUpfHwoci5uYW1lPXIubmFtZS5yZXBsYWNlKGdhLCIiKSx0LnB1c2gocikpfXJldHVybiB0fShvKSk7dmFyIGQsdj11YShlLG8scik7cCYmKHYubnM9cCksInN0eWxlIiE9PShkPXYpLnRhZyYmKCJzY3JpcHQiIT09ZC50YWd8fGQuYXR0cnNNYXAudHlwZSYmInRleHQvamF2YXNjcmlwdCIhPT1kLmF0dHJzTWFwLnR5cGUpfHx0ZSgpfHwodi5mb3JiaWRkZW49ITApO2Zvcih2YXIgaD0wO2g8Vm8ubGVuZ3RoO2grKyl2PVZvW2hdKHYsdCl8fHY7c3x8KCFmdW5jdGlvbihlKXtudWxsIT1GcihlLCJ2LXByZSIpJiYoZS5wcmU9ITApfSh2KSx2LnByZSYmKHM9ITApKSxKbyh2LnRhZykmJihjPSEwKSxzP2Z1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cnNMaXN0LG49dC5sZW5ndGg7aWYobilmb3IodmFyIHI9ZS5hdHRycz1uZXcgQXJyYXkobiksaT0wO2k8bjtpKyspcltpXT17bmFtZTp0W2ldLm5hbWUsdmFsdWU6SlNPTi5zdHJpbmdpZnkodFtpXS52YWx1ZSl9LG51bGwhPXRbaV0uc3RhcnQmJihyW2ldLnN0YXJ0PXRbaV0uc3RhcnQscltpXS5lbmQ9dFtpXS5lbmQpO2Vsc2UgZS5wcmV8fChlLnBsYWluPSEwKX0odik6di5wcm9jZXNzZWR8fChwYSh2KSxmdW5jdGlvbihlKXt2YXIgdD1GcihlLCJ2LWlmIik7aWYodCllLmlmPXQsZGEoZSx7ZXhwOnQsYmxvY2s6ZX0pO2Vsc2V7bnVsbCE9RnIoZSwidi1lbHNlIikmJihlLmVsc2U9ITApO3ZhciBuPUZyKGUsInYtZWxzZS1pZiIpO24mJihlLmVsc2VpZj1uKX19KHYpLGZ1bmN0aW9uKGUpe251bGwhPUZyKGUsInYtb25jZSIpJiYoZS5vbmNlPSEwKX0odikpLG58fChuPXYpLGE/dSh2KToocj12LGkucHVzaCh2KSl9LGVuZDpmdW5jdGlvbihlLHQsbil7dmFyIG89aVtpLmxlbmd0aC0xXTtpLmxlbmd0aC09MSxyPWlbaS5sZW5ndGgtMV0sdShvKX0sY2hhcnM6ZnVuY3Rpb24oZSx0LG4pe2lmKHImJighcXx8InRleHRhcmVhIiE9PXIudGFnfHxyLmF0dHJzTWFwLnBsYWNlaG9sZGVyIT09ZSkpe3ZhciBpLHUsbCxmPXIuY2hpbGRyZW47aWYoZT1jfHxlLnRyaW0oKT8ic2NyaXB0Ij09PShpPXIpLnRhZ3x8InN0eWxlIj09PWkudGFnP2U6c2EoZSk6Zi5sZW5ndGg/YT8iY29uZGVuc2UiPT09YSYmb2EudGVzdChlKT8iIjoiICI6bz8iICI6IiI6IiIpY3x8ImNvbmRlbnNlIiE9PWF8fChlPWUucmVwbGFjZShhYSwiICIpKSwhcyYmIiAiIT09ZSYmKHU9ZnVuY3Rpb24oZSx0KXt2YXIgbj10P2hvKHQpOnBvO2lmKG4udGVzdChlKSl7Zm9yKHZhciByLGksbyxhPVtdLHM9W10sYz1uLmxhc3RJbmRleD0wO3I9bi5leGVjKGUpOyl7KGk9ci5pbmRleCk+YyYmKHMucHVzaChvPWUuc2xpY2UoYyxpKSksYS5wdXNoKEpTT04uc3RyaW5naWZ5KG8pKSk7dmFyIHU9QXIoclsxXS50cmltKCkpO2EucHVzaCgiX3MoIit1KyIpIikscy5wdXNoKHsiQGJpbmRpbmciOnV9KSxjPWkrclswXS5sZW5ndGh9cmV0dXJuIGM8ZS5sZW5ndGgmJihzLnB1c2gobz1lLnNsaWNlKGMpKSxhLnB1c2goSlNPTi5zdHJpbmdpZnkobykpKSx7ZXhwcmVzc2lvbjphLmpvaW4oIisiKSx0b2tlbnM6c319fShlLFVvKSk/bD17dHlwZToyLGV4cHJlc3Npb246dS5leHByZXNzaW9uLHRva2Vuczp1LnRva2Vucyx0ZXh0OmV9OiIgIj09PWUmJmYubGVuZ3RoJiYiICI9PT1mW2YubGVuZ3RoLTFdLnRleHR8fChsPXt0eXBlOjMsdGV4dDplfSksbCYmZi5wdXNoKGwpfX0sY29tbWVudDpmdW5jdGlvbihlLHQsbil7aWYocil7dmFyIGk9e3R5cGU6Myx0ZXh0OmUsaXNDb21tZW50OiEwfTtyLmNoaWxkcmVuLnB1c2goaSl9fX0pLG59ZnVuY3Rpb24gZmEoZSx0KXt2YXIgbixyOyhyPUlyKG49ZSwia2V5IikpJiYobi5rZXk9ciksZS5wbGFpbj0hZS5rZXkmJiFlLnNjb3BlZFNsb3RzJiYhZS5hdHRyc0xpc3QubGVuZ3RoLGZ1bmN0aW9uKGUpe3ZhciB0PUlyKGUsInJlZiIpO3QmJihlLnJlZj10LGUucmVmSW5Gb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtmb3IoO3Q7KXtpZih2b2lkIDAhPT10LmZvcilyZXR1cm4hMDt0PXQucGFyZW50fXJldHVybiExfShlKSl9KGUpLGZ1bmN0aW9uKGUpe3ZhciB0OyJ0ZW1wbGF0ZSI9PT1lLnRhZz8odD1GcihlLCJzY29wZSIpLGUuc2xvdFNjb3BlPXR8fEZyKGUsInNsb3Qtc2NvcGUiKSk6KHQ9RnIoZSwic2xvdC1zY29wZSIpKSYmKGUuc2xvdFNjb3BlPXQpO3ZhciBuPUlyKGUsInNsb3QiKTtuJiYoZS5zbG90VGFyZ2V0PSciIic9PT1uPyciZGVmYXVsdCInOm4sZS5zbG90VGFyZ2V0RHluYW1pYz0hKCFlLmF0dHJzTWFwWyI6c2xvdCJdJiYhZS5hdHRyc01hcFsidi1iaW5kOnNsb3QiXSksInRlbXBsYXRlIj09PWUudGFnfHxlLnNsb3RTY29wZXx8TnIoZSwic2xvdCIsbixmdW5jdGlvbihlLHQpe3JldHVybiBlLnJhd0F0dHJzTWFwWyI6Iit0XXx8ZS5yYXdBdHRyc01hcFsidi1iaW5kOiIrdF18fGUucmF3QXR0cnNNYXBbdF19KGUsInNsb3QiKSkpO2lmKCJ0ZW1wbGF0ZSI9PT1lLnRhZyl7dmFyIHI9UHIoZSxpYSk7aWYocil7dmFyIGk9dmEociksbz1pLm5hbWUsYT1pLmR5bmFtaWM7ZS5zbG90VGFyZ2V0PW8sZS5zbG90VGFyZ2V0RHluYW1pYz1hLGUuc2xvdFNjb3BlPXIudmFsdWV8fGNhfX1lbHNle3ZhciBzPVByKGUsaWEpO2lmKHMpe3ZhciBjPWUuc2NvcGVkU2xvdHN8fChlLnNjb3BlZFNsb3RzPXt9KSx1PXZhKHMpLGw9dS5uYW1lLGY9dS5keW5hbWljLHA9Y1tsXT11YSgidGVtcGxhdGUiLFtdLGUpO3Auc2xvdFRhcmdldD1sLHAuc2xvdFRhcmdldER5bmFtaWM9ZixwLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe2lmKCFlLnNsb3RTY29wZSlyZXR1cm4gZS5wYXJlbnQ9cCwhMH0pLHAuc2xvdFNjb3BlPXMudmFsdWV8fGNhLGUuY2hpbGRyZW49W10sZS5wbGFpbj0hMX19fShlKSxmdW5jdGlvbihlKXsic2xvdCI9PT1lLnRhZyYmKGUuc2xvdE5hbWU9SXIoZSwibmFtZSIpKX0oZSksZnVuY3Rpb24oZSl7dmFyIHQ7KHQ9SXIoZSwiaXMiKSkmJihlLmNvbXBvbmVudD10KTtudWxsIT1GcihlLCJpbmxpbmUtdGVtcGxhdGUiKSYmKGUuaW5saW5lVGVtcGxhdGU9ITApfShlKTtmb3IodmFyIGk9MDtpPHpvLmxlbmd0aDtpKyspZT16b1tpXShlLHQpfHxlO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscyxjLHU9ZS5hdHRyc0xpc3Q7Zm9yKHQ9MCxuPXUubGVuZ3RoO3Q8bjt0KyspaWYocj1pPXVbdF0ubmFtZSxvPXVbdF0udmFsdWUsR28udGVzdChyKSlpZihlLmhhc0JpbmRpbmdzPSEwLChhPWhhKHIucmVwbGFjZShHbywiIikpKSYmKHI9ci5yZXBsYWNlKHJhLCIiKSksbmEudGVzdChyKSlyPXIucmVwbGFjZShuYSwiIiksbz1BcihvKSwoYz1lYS50ZXN0KHIpKSYmKHI9ci5zbGljZSgxLC0xKSksYSYmKGEucHJvcCYmIWMmJiJpbm5lckh0bWwiPT09KHI9YihyKSkmJihyPSJpbm5lckhUTUwiKSxhLmNhbWVsJiYhYyYmKHI9YihyKSksYS5zeW5jJiYocz1CcihvLCIkZXZlbnQiKSxjP01yKGUsJyJ1cGRhdGU6IisoJytyKyIpIixzLG51bGwsITEsMCx1W3RdLCEwKTooTXIoZSwidXBkYXRlOiIrYihyKSxzLG51bGwsITEsMCx1W3RdKSxDKHIpIT09YihyKSYmTXIoZSwidXBkYXRlOiIrQyhyKSxzLG51bGwsITEsMCx1W3RdKSkpKSxhJiZhLnByb3B8fCFlLmNvbXBvbmVudCYmcW8oZS50YWcsZS5hdHRyc01hcC50eXBlLHIpP0VyKGUscixvLHVbdF0sYyk6TnIoZSxyLG8sdVt0XSxjKTtlbHNlIGlmKFpvLnRlc3Qocikpcj1yLnJlcGxhY2UoWm8sIiIpLChjPWVhLnRlc3QocikpJiYocj1yLnNsaWNlKDEsLTEpKSxNcihlLHIsbyxhLCExLDAsdVt0XSxjKTtlbHNle3ZhciBsPShyPXIucmVwbGFjZShHbywiIikpLm1hdGNoKHRhKSxmPWwmJmxbMV07Yz0hMSxmJiYocj1yLnNsaWNlKDAsLShmLmxlbmd0aCsxKSksZWEudGVzdChmKSYmKGY9Zi5zbGljZSgxLC0xKSxjPSEwKSksRHIoZSxyLGksbyxmLGMsYSx1W3RdKX1lbHNlIE5yKGUscixKU09OLnN0cmluZ2lmeShvKSx1W3RdKSwhZS5jb21wb25lbnQmJiJtdXRlZCI9PT1yJiZxbyhlLnRhZyxlLmF0dHJzTWFwLnR5cGUscikmJkVyKGUsciwidHJ1ZSIsdVt0XSl9KGUpLGV9ZnVuY3Rpb24gcGEoZSl7dmFyIHQ7aWYodD1GcihlLCJ2LWZvciIpKXt2YXIgbj1mdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKFhvKTtpZighdClyZXR1cm47dmFyIG49e307bi5mb3I9dFsyXS50cmltKCk7dmFyIHI9dFsxXS50cmltKCkucmVwbGFjZShRbywiIiksaT1yLm1hdGNoKFlvKTtpPyhuLmFsaWFzPXIucmVwbGFjZShZbywiIikudHJpbSgpLG4uaXRlcmF0b3IxPWlbMV0udHJpbSgpLGlbMl0mJihuLml0ZXJhdG9yMj1pWzJdLnRyaW0oKSkpOm4uYWxpYXM9cjtyZXR1cm4gbn0odCk7biYmQShlLG4pfX1mdW5jdGlvbiBkYShlLHQpe2UuaWZDb25kaXRpb25zfHwoZS5pZkNvbmRpdGlvbnM9W10pLGUuaWZDb25kaXRpb25zLnB1c2godCl9ZnVuY3Rpb24gdmEoZSl7dmFyIHQ9ZS5uYW1lLnJlcGxhY2UoaWEsIiIpO3JldHVybiB0fHwiIyIhPT1lLm5hbWVbMF0mJih0PSJkZWZhdWx0IiksZWEudGVzdCh0KT97bmFtZTp0LnNsaWNlKDEsLTEpLGR5bmFtaWM6ITB9OntuYW1lOiciJyt0KyciJyxkeW5hbWljOiExfX1mdW5jdGlvbiBoYShlKXt2YXIgdD1lLm1hdGNoKHJhKTtpZih0KXt2YXIgbj17fTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe25bZS5zbGljZSgxKV09ITB9KSxufX1mdW5jdGlvbiBtYShlKXtmb3IodmFyIHQ9e30sbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl0W2Vbbl0ubmFtZV09ZVtuXS52YWx1ZTtyZXR1cm4gdH12YXIgeWE9L154bWxuczpOU1xkKy8sZ2E9L15OU1xkKzovO2Z1bmN0aW9uIF9hKGUpe3JldHVybiB1YShlLnRhZyxlLmF0dHJzTGlzdC5zbGljZSgpLGUucGFyZW50KX12YXIgYmE9W21vLGdvLHtwcmVUcmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0Ij09PWUudGFnKXt2YXIgbixyPWUuYXR0cnNNYXA7aWYoIXJbInYtbW9kZWwiXSlyZXR1cm47aWYoKHJbIjp0eXBlIl18fHJbInYtYmluZDp0eXBlIl0pJiYobj1JcihlLCJ0eXBlIikpLHIudHlwZXx8bnx8IXJbInYtYmluZCJdfHwobj0iKCIrclsidi1iaW5kIl0rIikudHlwZSIpLG4pe3ZhciBpPUZyKGUsInYtaWYiLCEwKSxvPWk/IiYmKCIraSsiKSI6IiIsYT1udWxsIT1GcihlLCJ2LWVsc2UiLCEwKSxzPUZyKGUsInYtZWxzZS1pZiIsITApLGM9X2EoZSk7cGEoYyksanIoYywidHlwZSIsImNoZWNrYm94IiksZmEoYyx0KSxjLnByb2Nlc3NlZD0hMCxjLmlmPSIoIituKyIpPT09J2NoZWNrYm94JyIrbyxkYShjLHtleHA6Yy5pZixibG9jazpjfSk7dmFyIHU9X2EoZSk7RnIodSwidi1mb3IiLCEwKSxqcih1LCJ0eXBlIiwicmFkaW8iKSxmYSh1LHQpLGRhKGMse2V4cDoiKCIrbisiKT09PSdyYWRpbyciK28sYmxvY2s6dX0pO3ZhciBsPV9hKGUpO3JldHVybiBGcihsLCJ2LWZvciIsITApLGpyKGwsIjp0eXBlIixuKSxmYShsLHQpLGRhKGMse2V4cDppLGJsb2NrOmx9KSxhP2MuZWxzZT0hMDpzJiYoYy5lbHNlaWY9cyksY319fX1dO3ZhciAkYSx3YSxDYT17ZXhwZWN0SFRNTDohMCxtb2R1bGVzOmJhLGRpcmVjdGl2ZXM6e21vZGVsOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10LnZhbHVlLGk9dC5tb2RpZmllcnMsbz1lLnRhZyxhPWUuYXR0cnNNYXAudHlwZTtpZihlLmNvbXBvbmVudClyZXR1cm4gSHIoZSxyLGkpLCExO2lmKCJzZWxlY3QiPT09bykhZnVuY3Rpb24oZSx0LG4pe3ZhciByPSd2YXIgJCRzZWxlY3RlZFZhbCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsZnVuY3Rpb24obyl7cmV0dXJuIG8uc2VsZWN0ZWR9KS5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9ICJfdmFsdWUiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7cmV0dXJuICcrKG4mJm4ubnVtYmVyPyJfbih2YWwpIjoidmFsIikrIn0pOyI7cj1yKyIgIitCcih0LCIkZXZlbnQudGFyZ2V0Lm11bHRpcGxlID8gJCRzZWxlY3RlZFZhbCA6ICQkc2VsZWN0ZWRWYWxbMF0iKSxNcihlLCJjaGFuZ2UiLHIsbnVsbCwhMCl9KGUscixpKTtlbHNlIGlmKCJpbnB1dCI9PT1vJiYiY2hlY2tib3giPT09YSkhZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4mJm4ubnVtYmVyLGk9SXIoZSwidmFsdWUiKXx8Im51bGwiLG89SXIoZSwidHJ1ZS12YWx1ZSIpfHwidHJ1ZSIsYT1JcihlLCJmYWxzZS12YWx1ZSIpfHwiZmFsc2UiO0VyKGUsImNoZWNrZWQiLCJBcnJheS5pc0FycmF5KCIrdCsiKT9faSgiK3QrIiwiK2krIik+LTEiKygidHJ1ZSI9PT1vPyI6KCIrdCsiKSI6IjpfcSgiK3QrIiwiK28rIikiKSksTXIoZSwiY2hhbmdlIiwidmFyICQkYT0iK3QrIiwkJGVsPSRldmVudC50YXJnZXQsJCRjPSQkZWwuY2hlY2tlZD8oIitvKyIpOigiK2ErIik7aWYoQXJyYXkuaXNBcnJheSgkJGEpKXt2YXIgJCR2PSIrKHI/Il9uKCIraSsiKSI6aSkrIiwkJGk9X2koJCRhLCQkdik7aWYoJCRlbC5jaGVja2VkKXskJGk8MCYmKCIrQnIodCwiJCRhLmNvbmNhdChbJCR2XSkiKSsiKX1lbHNleyQkaT4tMSYmKCIrQnIodCwiJCRhLnNsaWNlKDAsJCRpKS5jb25jYXQoJCRhLnNsaWNlKCQkaSsxKSkiKSsiKX19ZWxzZXsiK0JyKHQsIiQkYyIpKyJ9IixudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW8mJiJyYWRpbyI9PT1hKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9biYmbi5udW1iZXIsaT1JcihlLCJ2YWx1ZSIpfHwibnVsbCI7RXIoZSwiY2hlY2tlZCIsIl9xKCIrdCsiLCIrKGk9cj8iX24oIitpKyIpIjppKSsiKSIpLE1yKGUsImNoYW5nZSIsQnIodCxpKSxudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW98fCJ0ZXh0YXJlYSI9PT1vKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9ZS5hdHRyc01hcC50eXBlLGk9bnx8e30sbz1pLmxhenksYT1pLm51bWJlcixzPWkudHJpbSxjPSFvJiYicmFuZ2UiIT09cix1PW8/ImNoYW5nZSI6InJhbmdlIj09PXI/V3I6ImlucHV0IixsPSIkZXZlbnQudGFyZ2V0LnZhbHVlIjtzJiYobD0iJGV2ZW50LnRhcmdldC52YWx1ZS50cmltKCkiKSxhJiYobD0iX24oIitsKyIpIik7dmFyIGY9QnIodCxsKTtjJiYoZj0iaWYoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpcmV0dXJuOyIrZiksRXIoZSwidmFsdWUiLCIoIit0KyIpIiksTXIoZSx1LGYsbnVsbCwhMCksKHN8fGEpJiZNcihlLCJibHVyIiwiJGZvcmNlVXBkYXRlKCkiKX0oZSxyLGkpO2Vsc2UgaWYoIUYuaXNSZXNlcnZlZFRhZyhvKSlyZXR1cm4gSHIoZSxyLGkpLCExO3JldHVybiEwfSx0ZXh0OmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwidGV4dENvbnRlbnQiLCJfcygiK3QudmFsdWUrIikiLHQpfSxodG1sOmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwiaW5uZXJIVE1MIiwiX3MoIit0LnZhbHVlKyIpIix0KX19LGlzUHJlVGFnOmZ1bmN0aW9uKGUpe3JldHVybiJwcmUiPT09ZX0saXNVbmFyeVRhZzpibyxtdXN0VXNlUHJvcDpqbixjYW5CZUxlZnRPcGVuVGFnOiRvLGlzUmVzZXJ2ZWRUYWc6V24sZ2V0VGFnTmFtZXNwYWNlOlpuLHN0YXRpY0tleXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29uY2F0KHQuc3RhdGljS2V5c3x8W10pfSxbXSkuam9pbigiLCIpfShiYSl9LHhhPWcoZnVuY3Rpb24oZSl7cmV0dXJuIHAoInR5cGUsdGFnLGF0dHJzTGlzdCxhdHRyc01hcCxwbGFpbixwYXJlbnQsY2hpbGRyZW4sYXR0cnMsc3RhcnQsZW5kLHJhd0F0dHJzTWFwIisoZT8iLCIrZToiIikpfSk7ZnVuY3Rpb24ga2EoZSx0KXtlJiYoJGE9eGEodC5zdGF0aWNLZXlzfHwiIiksd2E9dC5pc1Jlc2VydmVkVGFnfHxULGZ1bmN0aW9uIGUodCl7dC5zdGF0aWM9ZnVuY3Rpb24oZSl7aWYoMj09PWUudHlwZSlyZXR1cm4hMTtpZigzPT09ZS50eXBlKXJldHVybiEwO3JldHVybiEoIWUucHJlJiYoZS5oYXNCaW5kaW5nc3x8ZS5pZnx8ZS5mb3J8fGQoZS50YWcpfHwhd2EoZS50YWcpfHxmdW5jdGlvbihlKXtmb3IoO2UucGFyZW50Oyl7aWYoInRlbXBsYXRlIiE9PShlPWUucGFyZW50KS50YWcpcmV0dXJuITE7aWYoZS5mb3IpcmV0dXJuITB9cmV0dXJuITF9KGUpfHwhT2JqZWN0LmtleXMoZSkuZXZlcnkoJGEpKSl9KHQpO2lmKDE9PT10LnR5cGUpe2lmKCF3YSh0LnRhZykmJiJzbG90IiE9PXQudGFnJiZudWxsPT10LmF0dHJzTWFwWyJpbmxpbmUtdGVtcGxhdGUiXSlyZXR1cm47Zm9yKHZhciBuPTAscj10LmNoaWxkcmVuLmxlbmd0aDtuPHI7bisrKXt2YXIgaT10LmNoaWxkcmVuW25dO2UoaSksaS5zdGF0aWN8fCh0LnN0YXRpYz0hMSl9aWYodC5pZkNvbmRpdGlvbnMpZm9yKHZhciBvPTEsYT10LmlmQ29uZGl0aW9ucy5sZW5ndGg7bzxhO28rKyl7dmFyIHM9dC5pZkNvbmRpdGlvbnNbb10uYmxvY2s7ZShzKSxzLnN0YXRpY3x8KHQuc3RhdGljPSExKX19fShlKSxmdW5jdGlvbiBlKHQsbil7aWYoMT09PXQudHlwZSl7aWYoKHQuc3RhdGljfHx0Lm9uY2UpJiYodC5zdGF0aWNJbkZvcj1uKSx0LnN0YXRpYyYmdC5jaGlsZHJlbi5sZW5ndGgmJigxIT09dC5jaGlsZHJlbi5sZW5ndGh8fDMhPT10LmNoaWxkcmVuWzBdLnR5cGUpKXJldHVybiB2b2lkKHQuc3RhdGljUm9vdD0hMCk7aWYodC5zdGF0aWNSb290PSExLHQuY2hpbGRyZW4pZm9yKHZhciByPTAsaT10LmNoaWxkcmVuLmxlbmd0aDtyPGk7cisrKWUodC5jaGlsZHJlbltyXSxufHwhIXQuZm9yKTtpZih0LmlmQ29uZGl0aW9ucylmb3IodmFyIG89MSxhPXQuaWZDb25kaXRpb25zLmxlbmd0aDtvPGE7bysrKWUodC5pZkNvbmRpdGlvbnNbb10uYmxvY2ssbil9fShlLCExKSl9dmFyIEFhPS9eKFtcdyRfXSt8XChbXildKj9cKSlccyo9PnxeZnVuY3Rpb24oPzpccytbXHckXSspP1xzKlwoLyxPYT0vXChbXildKj9cKTsqJC8sU2E9L15bQS1aYS16XyRdW1x3JF0qKD86XC5bQS1aYS16XyRdW1x3JF0qfFxbJ1teJ10qPyddfFxbIlteIl0qPyJdfFxbXGQrXXxcW1tBLVphLXpfJF1bXHckXSpdKSokLyxUYT17ZXNjOjI3LHRhYjo5LGVudGVyOjEzLHNwYWNlOjMyLHVwOjM4LGxlZnQ6MzcscmlnaHQ6MzksZG93bjo0MCxkZWxldGU6WzgsNDZdfSxFYT17ZXNjOlsiRXNjIiwiRXNjYXBlIl0sdGFiOiJUYWIiLGVudGVyOiJFbnRlciIsc3BhY2U6WyIgIiwiU3BhY2ViYXIiXSx1cDpbIlVwIiwiQXJyb3dVcCJdLGxlZnQ6WyJMZWZ0IiwiQXJyb3dMZWZ0Il0scmlnaHQ6WyJSaWdodCIsIkFycm93UmlnaHQiXSxkb3duOlsiRG93biIsIkFycm93RG93biJdLGRlbGV0ZTpbIkJhY2tzcGFjZSIsIkRlbGV0ZSIsIkRlbCJdfSxOYT1mdW5jdGlvbihlKXtyZXR1cm4iaWYoIitlKyIpcmV0dXJuIG51bGw7In0samE9e3N0b3A6IiRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsiLHByZXZlbnQ6IiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyIsc2VsZjpOYSgiJGV2ZW50LnRhcmdldCAhPT0gJGV2ZW50LmN1cnJlbnRUYXJnZXQiKSxjdHJsOk5hKCIhJGV2ZW50LmN0cmxLZXkiKSxzaGlmdDpOYSgiISRldmVudC5zaGlmdEtleSIpLGFsdDpOYSgiISRldmVudC5hbHRLZXkiKSxtZXRhOk5hKCIhJGV2ZW50Lm1ldGFLZXkiKSxsZWZ0Ok5hKCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMCIpLG1pZGRsZTpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDEiKSxyaWdodDpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDIiKX07ZnVuY3Rpb24gRGEoZSx0KXt2YXIgbj10PyJuYXRpdmVPbjoiOiJvbjoiLHI9IiIsaT0iIjtmb3IodmFyIG8gaW4gZSl7dmFyIGE9TGEoZVtvXSk7ZVtvXSYmZVtvXS5keW5hbWljP2krPW8rIiwiK2ErIiwiOnIrPSciJytvKyciOicrYSsiLCJ9cmV0dXJuIHI9InsiK3Iuc2xpY2UoMCwtMSkrIn0iLGk/bisiX2QoIityKyIsWyIraS5zbGljZSgwLC0xKSsiXSkiOm4rcn1mdW5jdGlvbiBMYShlKXtpZighZSlyZXR1cm4iZnVuY3Rpb24oKXt9IjtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiJbIitlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gTGEoZSl9KS5qb2luKCIsIikrIl0iO3ZhciB0PVNhLnRlc3QoZS52YWx1ZSksbj1BYS50ZXN0KGUudmFsdWUpLHI9U2EudGVzdChlLnZhbHVlLnJlcGxhY2UoT2EsIiIpKTtpZihlLm1vZGlmaWVycyl7dmFyIGk9IiIsbz0iIixhPVtdO2Zvcih2YXIgcyBpbiBlLm1vZGlmaWVycylpZihqYVtzXSlvKz1qYVtzXSxUYVtzXSYmYS5wdXNoKHMpO2Vsc2UgaWYoImV4YWN0Ij09PXMpe3ZhciBjPWUubW9kaWZpZXJzO28rPU5hKFsiY3RybCIsInNoaWZ0IiwiYWx0IiwibWV0YSJdLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hY1tlXX0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iJGV2ZW50LiIrZSsiS2V5In0pLmpvaW4oInx8IikpfWVsc2UgYS5wdXNoKHMpO3JldHVybiBhLmxlbmd0aCYmKGkrPWZ1bmN0aW9uKGUpe3JldHVybiJpZighJGV2ZW50LnR5cGUuaW5kZXhPZigna2V5JykmJiIrZS5tYXAoTWEpLmpvaW4oIiYmIikrIilyZXR1cm4gbnVsbDsifShhKSksbyYmKGkrPW8pLCJmdW5jdGlvbigkZXZlbnQpeyIraSsodD8icmV0dXJuICIrZS52YWx1ZSsiKCRldmVudCkiOm4/InJldHVybiAoIitlLnZhbHVlKyIpKCRldmVudCkiOnI/InJldHVybiAiK2UudmFsdWU6ZS52YWx1ZSkrIn0ifXJldHVybiB0fHxuP2UudmFsdWU6ImZ1bmN0aW9uKCRldmVudCl7Iisocj8icmV0dXJuICIrZS52YWx1ZTplLnZhbHVlKSsifSJ9ZnVuY3Rpb24gTWEoZSl7dmFyIHQ9cGFyc2VJbnQoZSwxMCk7aWYodClyZXR1cm4iJGV2ZW50LmtleUNvZGUhPT0iK3Q7dmFyIG49VGFbZV0scj1FYVtlXTtyZXR1cm4iX2soJGV2ZW50LmtleUNvZGUsIitKU09OLnN0cmluZ2lmeShlKSsiLCIrSlNPTi5zdHJpbmdpZnkobikrIiwkZXZlbnQua2V5LCIrSlNPTi5zdHJpbmdpZnkocikrIikifXZhciBJYT17b246ZnVuY3Rpb24oZSx0KXtlLndyYXBMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIl9nKCIrZSsiLCIrdC52YWx1ZSsiKSJ9fSxiaW5kOmZ1bmN0aW9uKGUsdCl7ZS53cmFwRGF0YT1mdW5jdGlvbihuKXtyZXR1cm4iX2IoIituKyIsJyIrZS50YWcrIicsIit0LnZhbHVlKyIsIisodC5tb2RpZmllcnMmJnQubW9kaWZpZXJzLnByb3A/InRydWUiOiJmYWxzZSIpKyh0Lm1vZGlmaWVycyYmdC5tb2RpZmllcnMuc3luYz8iLHRydWUiOiIiKSsiKSJ9fSxjbG9hazpTfSxGYT1mdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZSx0aGlzLndhcm49ZS53YXJufHxTcix0aGlzLnRyYW5zZm9ybXM9VHIoZS5tb2R1bGVzLCJ0cmFuc2Zvcm1Db2RlIiksdGhpcy5kYXRhR2VuRm5zPVRyKGUubW9kdWxlcywiZ2VuRGF0YSIpLHRoaXMuZGlyZWN0aXZlcz1BKEEoe30sSWEpLGUuZGlyZWN0aXZlcyk7dmFyIHQ9ZS5pc1Jlc2VydmVkVGFnfHxUO3RoaXMubWF5YmVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuISFlLmNvbXBvbmVudHx8IXQoZS50YWcpfSx0aGlzLm9uY2VJZD0wLHRoaXMuc3RhdGljUmVuZGVyRm5zPVtdLHRoaXMucHJlPSExfTtmdW5jdGlvbiBQYShlLHQpe3ZhciBuPW5ldyBGYSh0KTtyZXR1cm57cmVuZGVyOiJ3aXRoKHRoaXMpe3JldHVybiAiKyhlP1JhKGUsbik6J19jKCJkaXYiKScpKyJ9IixzdGF0aWNSZW5kZXJGbnM6bi5zdGF0aWNSZW5kZXJGbnN9fWZ1bmN0aW9uIFJhKGUsdCl7aWYoZS5wYXJlbnQmJihlLnByZT1lLnByZXx8ZS5wYXJlbnQucHJlKSxlLnN0YXRpY1Jvb3QmJiFlLnN0YXRpY1Byb2Nlc3NlZClyZXR1cm4gSGEoZSx0KTtpZihlLm9uY2UmJiFlLm9uY2VQcm9jZXNzZWQpcmV0dXJuIEJhKGUsdCk7aWYoZS5mb3ImJiFlLmZvclByb2Nlc3NlZClyZXR1cm4gemEoZSx0KTtpZihlLmlmJiYhZS5pZlByb2Nlc3NlZClyZXR1cm4gVWEoZSx0KTtpZigidGVtcGxhdGUiIT09ZS50YWd8fGUuc2xvdFRhcmdldHx8dC5wcmUpe2lmKCJzbG90Ij09PWUudGFnKXJldHVybiBmdW5jdGlvbihlLHQpe3ZhciBuPWUuc2xvdE5hbWV8fCciZGVmYXVsdCInLHI9cWEoZSx0KSxpPSJfdCgiK24rKHI/IiwiK3I6IiIpLG89ZS5hdHRyc3x8ZS5keW5hbWljQXR0cnM/R2EoKGUuYXR0cnN8fFtdKS5jb25jYXQoZS5keW5hbWljQXR0cnN8fFtdKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6YihlLm5hbWUpLHZhbHVlOmUudmFsdWUsZHluYW1pYzplLmR5bmFtaWN9fSkpOm51bGwsYT1lLmF0dHJzTWFwWyJ2LWJpbmQiXTshbyYmIWF8fHJ8fChpKz0iLG51bGwiKTtvJiYoaSs9IiwiK28pO2EmJihpKz0obz8iIjoiLG51bGwiKSsiLCIrYSk7cmV0dXJuIGkrIikifShlLHQpO3ZhciBuO2lmKGUuY29tcG9uZW50KW49ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQuaW5saW5lVGVtcGxhdGU/bnVsbDpxYSh0LG4sITApO3JldHVybiJfYygiK2UrIiwiK1ZhKHQsbikrKHI/IiwiK3I6IiIpKyIpIn0oZS5jb21wb25lbnQsZSx0KTtlbHNle3ZhciByOyghZS5wbGFpbnx8ZS5wcmUmJnQubWF5YmVDb21wb25lbnQoZSkpJiYocj1WYShlLHQpKTt2YXIgaT1lLmlubGluZVRlbXBsYXRlP251bGw6cWEoZSx0LCEwKTtuPSJfYygnIitlLnRhZysiJyIrKHI/IiwiK3I6IiIpKyhpPyIsIitpOiIiKSsiKSJ9Zm9yKHZhciBvPTA7bzx0LnRyYW5zZm9ybXMubGVuZ3RoO28rKyluPXQudHJhbnNmb3Jtc1tvXShlLG4pO3JldHVybiBufXJldHVybiBxYShlLHQpfHwidm9pZCAwIn1mdW5jdGlvbiBIYShlLHQpe2Uuc3RhdGljUHJvY2Vzc2VkPSEwO3ZhciBuPXQucHJlO3JldHVybiBlLnByZSYmKHQucHJlPWUucHJlKSx0LnN0YXRpY1JlbmRlckZucy5wdXNoKCJ3aXRoKHRoaXMpe3JldHVybiAiK1JhKGUsdCkrIn0iKSx0LnByZT1uLCJfbSgiKyh0LnN0YXRpY1JlbmRlckZucy5sZW5ndGgtMSkrKGUuc3RhdGljSW5Gb3I/Iix0cnVlIjoiIikrIikifWZ1bmN0aW9uIEJhKGUsdCl7aWYoZS5vbmNlUHJvY2Vzc2VkPSEwLGUuaWYmJiFlLmlmUHJvY2Vzc2VkKXJldHVybiBVYShlLHQpO2lmKGUuc3RhdGljSW5Gb3Ipe2Zvcih2YXIgbj0iIixyPWUucGFyZW50O3I7KXtpZihyLmZvcil7bj1yLmtleTticmVha31yPXIucGFyZW50fXJldHVybiBuPyJfbygiK1JhKGUsdCkrIiwiK3Qub25jZUlkKysrIiwiK24rIikiOlJhKGUsdCl9cmV0dXJuIEhhKGUsdCl9ZnVuY3Rpb24gVWEoZSx0LG4scil7cmV0dXJuIGUuaWZQcm9jZXNzZWQ9ITAsZnVuY3Rpb24gZSh0LG4scixpKXtpZighdC5sZW5ndGgpcmV0dXJuIGl8fCJfZSgpIjt2YXIgbz10LnNoaWZ0KCk7cmV0dXJuIG8uZXhwPyIoIitvLmV4cCsiKT8iK2Eoby5ibG9jaykrIjoiK2UodCxuLHIsaSk6IiIrYShvLmJsb2NrKTtmdW5jdGlvbiBhKGUpe3JldHVybiByP3IoZSxuKTplLm9uY2U/QmEoZSxuKTpSYShlLG4pfX0oZS5pZkNvbmRpdGlvbnMuc2xpY2UoKSx0LG4scil9ZnVuY3Rpb24gemEoZSx0LG4scil7dmFyIGk9ZS5mb3Isbz1lLmFsaWFzLGE9ZS5pdGVyYXRvcjE/IiwiK2UuaXRlcmF0b3IxOiIiLHM9ZS5pdGVyYXRvcjI/IiwiK2UuaXRlcmF0b3IyOiIiO3JldHVybiBlLmZvclByb2Nlc3NlZD0hMCwocnx8Il9sIikrIigoIitpKyIpLGZ1bmN0aW9uKCIrbythK3MrIil7cmV0dXJuICIrKG58fFJhKShlLHQpKyJ9KSJ9ZnVuY3Rpb24gVmEoZSx0KXt2YXIgbj0ieyIscj1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZGlyZWN0aXZlcztpZighbilyZXR1cm47dmFyIHIsaSxvLGEscz0iZGlyZWN0aXZlczpbIixjPSExO2ZvcihyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXtvPW5bcl0sYT0hMDt2YXIgdT10LmRpcmVjdGl2ZXNbby5uYW1lXTt1JiYoYT0hIXUoZSxvLHQud2FybikpLGEmJihjPSEwLHMrPSd7bmFtZToiJytvLm5hbWUrJyIscmF3TmFtZToiJytvLnJhd05hbWUrJyInKyhvLnZhbHVlPyIsdmFsdWU6KCIrby52YWx1ZSsiKSxleHByZXNzaW9uOiIrSlNPTi5zdHJpbmdpZnkoby52YWx1ZSk6IiIpKyhvLmFyZz8iLGFyZzoiKyhvLmlzRHluYW1pY0FyZz9vLmFyZzonIicrby5hcmcrJyInKToiIikrKG8ubW9kaWZpZXJzPyIsbW9kaWZpZXJzOiIrSlNPTi5zdHJpbmdpZnkoby5tb2RpZmllcnMpOiIiKSsifSwiKX1pZihjKXJldHVybiBzLnNsaWNlKDAsLTEpKyJdIn0oZSx0KTtyJiYobis9cisiLCIpLGUua2V5JiYobis9ImtleToiK2Uua2V5KyIsIiksZS5yZWYmJihuKz0icmVmOiIrZS5yZWYrIiwiKSxlLnJlZkluRm9yJiYobis9InJlZkluRm9yOnRydWUsIiksZS5wcmUmJihuKz0icHJlOnRydWUsIiksZS5jb21wb25lbnQmJihuKz0ndGFnOiInK2UudGFnKyciLCcpO2Zvcih2YXIgaT0wO2k8dC5kYXRhR2VuRm5zLmxlbmd0aDtpKyspbis9dC5kYXRhR2VuRm5zW2ldKGUpO2lmKGUuYXR0cnMmJihuKz0iYXR0cnM6IitHYShlLmF0dHJzKSsiLCIpLGUucHJvcHMmJihuKz0iZG9tUHJvcHM6IitHYShlLnByb3BzKSsiLCIpLGUuZXZlbnRzJiYobis9RGEoZS5ldmVudHMsITEpKyIsIiksZS5uYXRpdmVFdmVudHMmJihuKz1EYShlLm5hdGl2ZUV2ZW50cywhMCkrIiwiKSxlLnNsb3RUYXJnZXQmJiFlLnNsb3RTY29wZSYmKG4rPSJzbG90OiIrZS5zbG90VGFyZ2V0KyIsIiksZS5zY29wZWRTbG90cyYmKG4rPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lLmZvcnx8T2JqZWN0LmtleXModCkuc29tZShmdW5jdGlvbihlKXt2YXIgbj10W2VdO3JldHVybiBuLnNsb3RUYXJnZXREeW5hbWljfHxuLmlmfHxuLmZvcnx8S2Eobil9KSxpPSEhZS5pZjtpZighcilmb3IodmFyIG89ZS5wYXJlbnQ7bzspe2lmKG8uc2xvdFNjb3BlJiZvLnNsb3RTY29wZSE9PWNhfHxvLmZvcil7cj0hMDticmVha31vLmlmJiYoaT0hMCksbz1vLnBhcmVudH12YXIgYT1PYmplY3Qua2V5cyh0KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIEphKHRbZV0sbil9KS5qb2luKCIsIik7cmV0dXJuInNjb3BlZFNsb3RzOl91KFsiK2ErIl0iKyhyPyIsbnVsbCx0cnVlIjoiIikrKCFyJiZpPyIsbnVsbCxmYWxzZSwiK2Z1bmN0aW9uKGUpe3ZhciB0PTUzODEsbj1lLmxlbmd0aDtmb3IoO247KXQ9MzMqdF5lLmNoYXJDb2RlQXQoLS1uKTtyZXR1cm4gdD4+PjB9KGEpOiIiKSsiKSJ9KGUsZS5zY29wZWRTbG90cyx0KSsiLCIpLGUubW9kZWwmJihuKz0ibW9kZWw6e3ZhbHVlOiIrZS5tb2RlbC52YWx1ZSsiLGNhbGxiYWNrOiIrZS5tb2RlbC5jYWxsYmFjaysiLGV4cHJlc3Npb246IitlLm1vZGVsLmV4cHJlc3Npb24rIn0sIiksZS5pbmxpbmVUZW1wbGF0ZSl7dmFyIG89ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNoaWxkcmVuWzBdO2lmKG4mJjE9PT1uLnR5cGUpe3ZhciByPVBhKG4sdC5vcHRpb25zKTtyZXR1cm4iaW5saW5lVGVtcGxhdGU6e3JlbmRlcjpmdW5jdGlvbigpeyIrci5yZW5kZXIrIn0sc3RhdGljUmVuZGVyRm5zOlsiK3Iuc3RhdGljUmVuZGVyRm5zLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24oKXsiK2UrIn0ifSkuam9pbigiLCIpKyJdfSJ9fShlLHQpO28mJihuKz1vKyIsIil9cmV0dXJuIG49bi5yZXBsYWNlKC8sJC8sIiIpKyJ9IixlLmR5bmFtaWNBdHRycyYmKG49Il9iKCIrbisnLCInK2UudGFnKyciLCcrR2EoZS5keW5hbWljQXR0cnMpKyIpIiksZS53cmFwRGF0YSYmKG49ZS53cmFwRGF0YShuKSksZS53cmFwTGlzdGVuZXJzJiYobj1lLndyYXBMaXN0ZW5lcnMobikpLG59ZnVuY3Rpb24gS2EoZSl7cmV0dXJuIDE9PT1lLnR5cGUmJigic2xvdCI9PT1lLnRhZ3x8ZS5jaGlsZHJlbi5zb21lKEthKSl9ZnVuY3Rpb24gSmEoZSx0KXt2YXIgbj1lLmF0dHJzTWFwWyJzbG90LXNjb3BlIl07aWYoZS5pZiYmIWUuaWZQcm9jZXNzZWQmJiFuKXJldHVybiBVYShlLHQsSmEsIm51bGwiKTtpZihlLmZvciYmIWUuZm9yUHJvY2Vzc2VkKXJldHVybiB6YShlLHQsSmEpO3ZhciByPWUuc2xvdFNjb3BlPT09Y2E/IiI6U3RyaW5nKGUuc2xvdFNjb3BlKSxpPSJmdW5jdGlvbigiK3IrIil7cmV0dXJuICIrKCJ0ZW1wbGF0ZSI9PT1lLnRhZz9lLmlmJiZuPyIoIitlLmlmKyIpPyIrKHFhKGUsdCl8fCJ1bmRlZmluZWQiKSsiOnVuZGVmaW5lZCI6cWEoZSx0KXx8InVuZGVmaW5lZCI6UmEoZSx0KSkrIn0iLG89cj8iIjoiLHByb3h5OnRydWUiO3JldHVybiJ7a2V5OiIrKGUuc2xvdFRhcmdldHx8JyJkZWZhdWx0IicpKyIsZm46IitpK28rIn0ifWZ1bmN0aW9uIHFhKGUsdCxuLHIsaSl7dmFyIG89ZS5jaGlsZHJlbjtpZihvLmxlbmd0aCl7dmFyIGE9b1swXTtpZigxPT09by5sZW5ndGgmJmEuZm9yJiYidGVtcGxhdGUiIT09YS50YWcmJiJzbG90IiE9PWEudGFnKXt2YXIgcz1uP3QubWF5YmVDb21wb25lbnQoYSk/IiwxIjoiLDAiOiIiO3JldHVybiIiKyhyfHxSYSkoYSx0KStzfXZhciBjPW4/ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBpPWVbcl07aWYoMT09PWkudHlwZSl7aWYoV2EoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiBXYShlLmJsb2NrKX0pKXtuPTI7YnJlYWt9KHQoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiB0KGUuYmxvY2spfSkpJiYobj0xKX19cmV0dXJuIG59KG8sdC5tYXliZUNvbXBvbmVudCk6MCx1PWl8fFphO3JldHVybiJbIitvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdShlLHQpfSkuam9pbigiLCIpKyJdIisoYz8iLCIrYzoiIil9fWZ1bmN0aW9uIFdhKGUpe3JldHVybiB2b2lkIDAhPT1lLmZvcnx8InRlbXBsYXRlIj09PWUudGFnfHwic2xvdCI9PT1lLnRhZ31mdW5jdGlvbiBaYShlLHQpe3JldHVybiAxPT09ZS50eXBlP1JhKGUsdCk6Mz09PWUudHlwZSYmZS5pc0NvbW1lbnQ/KHI9ZSwiX2UoIitKU09OLnN0cmluZ2lmeShyLnRleHQpKyIpIik6Il92KCIrKDI9PT0obj1lKS50eXBlP24uZXhwcmVzc2lvbjpYYShKU09OLnN0cmluZ2lmeShuLnRleHQpKSkrIikiO3ZhciBuLHJ9ZnVuY3Rpb24gR2EoZSl7Zm9yKHZhciB0PSIiLG49IiIscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT1lW3JdLG89WGEoaS52YWx1ZSk7aS5keW5hbWljP24rPWkubmFtZSsiLCIrbysiLCI6dCs9JyInK2kubmFtZSsnIjonK28rIiwifXJldHVybiB0PSJ7Iit0LnNsaWNlKDAsLTEpKyJ9IixuPyJfZCgiK3QrIixbIituLnNsaWNlKDAsLTEpKyJdKSI6dH1mdW5jdGlvbiBYYShlKXtyZXR1cm4gZS5yZXBsYWNlKC9cdTIwMjgvZywiXFx1MjAyOCIpLnJlcGxhY2UoL1x1MjAyOS9nLCJcXHUyMDI5Iil9bmV3IFJlZ0V4cCgiXFxiIisiZG8saWYsZm9yLGxldCxuZXcsdHJ5LHZhcixjYXNlLGVsc2Usd2l0aCxhd2FpdCxicmVhayxjYXRjaCxjbGFzcyxjb25zdCxzdXBlcix0aHJvdyx3aGlsZSx5aWVsZCxkZWxldGUsZXhwb3J0LGltcG9ydCxyZXR1cm4sc3dpdGNoLGRlZmF1bHQsZXh0ZW5kcyxmaW5hbGx5LGNvbnRpbnVlLGRlYnVnZ2VyLGZ1bmN0aW9uLGFyZ3VtZW50cyIuc3BsaXQoIiwiKS5qb2luKCJcXGJ8XFxiIikrIlxcYiIpO2Z1bmN0aW9uIFlhKGUsdCl7dHJ5e3JldHVybiBuZXcgRnVuY3Rpb24oZSl9Y2F0Y2gobil7cmV0dXJuIHQucHVzaCh7ZXJyOm4sY29kZTplfSksU319ZnVuY3Rpb24gUWEoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obixyLGkpeyhyPUEoe30scikpLndhcm47ZGVsZXRlIHIud2Fybjt2YXIgbz1yLmRlbGltaXRlcnM/U3RyaW5nKHIuZGVsaW1pdGVycykrbjpuO2lmKHRbb10pcmV0dXJuIHRbb107dmFyIGE9ZShuLHIpLHM9e30sYz1bXTtyZXR1cm4gcy5yZW5kZXI9WWEoYS5yZW5kZXIsYykscy5zdGF0aWNSZW5kZXJGbnM9YS5zdGF0aWNSZW5kZXJGbnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBZYShlLGMpfSksdFtvXT1zfX12YXIgZXMsdHMsbnM9KGVzPWZ1bmN0aW9uKGUsdCl7dmFyIG49bGEoZS50cmltKCksdCk7ITEhPT10Lm9wdGltaXplJiZrYShuLHQpO3ZhciByPVBhKG4sdCk7cmV0dXJue2FzdDpuLHJlbmRlcjpyLnJlbmRlcixzdGF0aWNSZW5kZXJGbnM6ci5zdGF0aWNSZW5kZXJGbnN9fSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIHI9T2JqZWN0LmNyZWF0ZShlKSxpPVtdLG89W107aWYobilmb3IodmFyIGEgaW4gbi5tb2R1bGVzJiYoci5tb2R1bGVzPShlLm1vZHVsZXN8fFtdKS5jb25jYXQobi5tb2R1bGVzKSksbi5kaXJlY3RpdmVzJiYoci5kaXJlY3RpdmVzPUEoT2JqZWN0LmNyZWF0ZShlLmRpcmVjdGl2ZXN8fG51bGwpLG4uZGlyZWN0aXZlcykpLG4pIm1vZHVsZXMiIT09YSYmImRpcmVjdGl2ZXMiIT09YSYmKHJbYV09blthXSk7ci53YXJuPWZ1bmN0aW9uKGUsdCxuKXsobj9vOmkpLnB1c2goZSl9O3ZhciBzPWVzKHQudHJpbSgpLHIpO3JldHVybiBzLmVycm9ycz1pLHMudGlwcz1vLHN9cmV0dXJue2NvbXBpbGU6dCxjb21waWxlVG9GdW5jdGlvbnM6UWEodCl9fSkoQ2EpLHJzPShucy5jb21waWxlLG5zLmNvbXBpbGVUb0Z1bmN0aW9ucyk7ZnVuY3Rpb24gaXMoZSl7cmV0dXJuKHRzPXRzfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWU/JzxhIGhyZWY9IlxuIi8+JzonPGRpdiBhPSJcbiIvPicsdHMuaW5uZXJIVE1MLmluZGV4T2YoIiYjMTA7Iik+MH12YXIgb3M9ISF6JiZpcyghMSksYXM9ISF6JiZpcyghMCksc3M9ZyhmdW5jdGlvbihlKXt2YXIgdD1ZbihlKTtyZXR1cm4gdCYmdC5pbm5lckhUTUx9KSxjcz13bi5wcm90b3R5cGUuJG1vdW50O3JldHVybiB3bi5wcm90b3R5cGUuJG1vdW50PWZ1bmN0aW9uKGUsdCl7aWYoKGU9ZSYmWW4oZSkpPT09ZG9jdW1lbnQuYm9keXx8ZT09PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudClyZXR1cm4gdGhpczt2YXIgbj10aGlzLiRvcHRpb25zO2lmKCFuLnJlbmRlcil7dmFyIHI9bi50ZW1wbGF0ZTtpZihyKWlmKCJzdHJpbmciPT10eXBlb2YgcikiIyI9PT1yLmNoYXJBdCgwKSYmKHI9c3MocikpO2Vsc2V7aWYoIXIubm9kZVR5cGUpcmV0dXJuIHRoaXM7cj1yLmlubmVySFRNTH1lbHNlIGUmJihyPWZ1bmN0aW9uKGUpe2lmKGUub3V0ZXJIVE1MKXJldHVybiBlLm91dGVySFRNTDt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gdC5hcHBlbmRDaGlsZChlLmNsb25lTm9kZSghMCkpLHQuaW5uZXJIVE1MfShlKSk7aWYocil7dmFyIGk9cnMocix7b3V0cHV0U291cmNlUmFuZ2U6ITEsc2hvdWxkRGVjb2RlTmV3bGluZXM6b3Msc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOmFzLGRlbGltaXRlcnM6bi5kZWxpbWl0ZXJzLGNvbW1lbnRzOm4uY29tbWVudHN9LHRoaXMpLG89aS5yZW5kZXIsYT1pLnN0YXRpY1JlbmRlckZucztuLnJlbmRlcj1vLG4uc3RhdGljUmVuZGVyRm5zPWF9fXJldHVybiBjcy5jYWxsKHRoaXMsZSx0KX0sd24uY29tcGlsZT1ycyx3bn0pOw=="},{"meta":{"name":"vue.min.js","url":"https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.min.js","ts":1614930447204,"mimetype":"text/javascript"},"source":"LyohCiAqIFZ1ZS5qcyB2Mi42LjEyCiAqIChjKSAyMDE0LTIwMjAgRXZhbiBZb3UKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgogKi8KIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6KGU9ZXx8c2VsZikuVnVlPXQoKX0odGhpcyxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QuZnJlZXplKHt9KTtmdW5jdGlvbiB0KGUpe3JldHVybiBudWxsPT1lfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIG51bGwhPWV9ZnVuY3Rpb24gcihlKXtyZXR1cm4hMD09PWV9ZnVuY3Rpb24gaShlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV8fCJudW1iZXIiPT10eXBlb2YgZXx8InN5bWJvbCI9PXR5cGVvZiBlfHwiYm9vbGVhbiI9PXR5cGVvZiBlfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIG51bGwhPT1lJiYib2JqZWN0Ij09dHlwZW9mIGV9dmFyIGE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBzKGUpe3JldHVybiJbb2JqZWN0IE9iamVjdF0iPT09YS5jYWxsKGUpfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9cGFyc2VGbG9hdChTdHJpbmcoZSkpO3JldHVybiB0Pj0wJiZNYXRoLmZsb29yKHQpPT09dCYmaXNGaW5pdGUoZSl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gbihlKSYmImZ1bmN0aW9uIj09dHlwZW9mIGUudGhlbiYmImZ1bmN0aW9uIj09dHlwZW9mIGUuY2F0Y2h9ZnVuY3Rpb24gbChlKXtyZXR1cm4gbnVsbD09ZT8iIjpBcnJheS5pc0FycmF5KGUpfHxzKGUpJiZlLnRvU3RyaW5nPT09YT9KU09OLnN0cmluZ2lmeShlLG51bGwsMik6U3RyaW5nKGUpfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9cGFyc2VGbG9hdChlKTtyZXR1cm4gaXNOYU4odCk/ZTp0fWZ1bmN0aW9uIHAoZSx0KXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPWUuc3BsaXQoIiwiKSxpPTA7aTxyLmxlbmd0aDtpKyspbltyW2ldXT0hMDtyZXR1cm4gdD9mdW5jdGlvbihlKXtyZXR1cm4gbltlLnRvTG93ZXJDYXNlKCldfTpmdW5jdGlvbihlKXtyZXR1cm4gbltlXX19dmFyIGQ9cCgic2xvdCxjb21wb25lbnQiLCEwKSx2PXAoImtleSxyZWYsc2xvdCxzbG90LXNjb3BlLGlzIik7ZnVuY3Rpb24gaChlLHQpe2lmKGUubGVuZ3RoKXt2YXIgbj1lLmluZGV4T2YodCk7aWYobj4tMSlyZXR1cm4gZS5zcGxpY2UobiwxKX19dmFyIG09T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiB5KGUsdCl7cmV0dXJuIG0uY2FsbChlLHQpfWZ1bmN0aW9uIGcoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHRbbl18fCh0W25dPWUobikpfX12YXIgXz0vLShcdykvZyxiPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShfLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/dC50b1VwcGVyQ2FzZSgpOiIifSl9KSwkPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKX0pLHc9L1xCKFtBLVpdKS9nLEM9ZyhmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKHcsIi0kMSIpLnRvTG93ZXJDYXNlKCl9KTt2YXIgeD1GdW5jdGlvbi5wcm90b3R5cGUuYmluZD9mdW5jdGlvbihlLHQpe3JldHVybiBlLmJpbmQodCl9OmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihuKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoO3JldHVybiByP3I+MT9lLmFwcGx5KHQsYXJndW1lbnRzKTplLmNhbGwodCxuKTplLmNhbGwodCl9cmV0dXJuIG4uX2xlbmd0aD1lLmxlbmd0aCxufTtmdW5jdGlvbiBrKGUsdCl7dD10fHwwO2Zvcih2YXIgbj1lLmxlbmd0aC10LHI9bmV3IEFycmF5KG4pO24tLTspcltuXT1lW24rdF07cmV0dXJuIHJ9ZnVuY3Rpb24gQShlLHQpe2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBPKGUpe2Zvcih2YXIgdD17fSxuPTA7bjxlLmxlbmd0aDtuKyspZVtuXSYmQSh0LGVbbl0pO3JldHVybiB0fWZ1bmN0aW9uIFMoZSx0LG4pe312YXIgVD1mdW5jdGlvbihlLHQsbil7cmV0dXJuITF9LEU9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9O2Z1bmN0aW9uIE4oZSx0KXtpZihlPT09dClyZXR1cm4hMDt2YXIgbj1vKGUpLHI9byh0KTtpZighbnx8IXIpcmV0dXJuIW4mJiFyJiZTdHJpbmcoZSk9PT1TdHJpbmcodCk7dHJ5e3ZhciBpPUFycmF5LmlzQXJyYXkoZSksYT1BcnJheS5pc0FycmF5KHQpO2lmKGkmJmEpcmV0dXJuIGUubGVuZ3RoPT09dC5sZW5ndGgmJmUuZXZlcnkoZnVuY3Rpb24oZSxuKXtyZXR1cm4gTihlLHRbbl0pfSk7aWYoZSBpbnN0YW5jZW9mIERhdGUmJnQgaW5zdGFuY2VvZiBEYXRlKXJldHVybiBlLmdldFRpbWUoKT09PXQuZ2V0VGltZSgpO2lmKGl8fGEpcmV0dXJuITE7dmFyIHM9T2JqZWN0LmtleXMoZSksYz1PYmplY3Qua2V5cyh0KTtyZXR1cm4gcy5sZW5ndGg9PT1jLmxlbmd0aCYmcy5ldmVyeShmdW5jdGlvbihuKXtyZXR1cm4gTihlW25dLHRbbl0pfSl9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIGooZSx0KXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylpZihOKGVbbl0sdCkpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gRChlKXt2YXIgdD0hMTtyZXR1cm4gZnVuY3Rpb24oKXt0fHwodD0hMCxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fXZhciBMPSJkYXRhLXNlcnZlci1yZW5kZXJlZCIsTT1bImNvbXBvbmVudCIsImRpcmVjdGl2ZSIsImZpbHRlciJdLEk9WyJiZWZvcmVDcmVhdGUiLCJjcmVhdGVkIiwiYmVmb3JlTW91bnQiLCJtb3VudGVkIiwiYmVmb3JlVXBkYXRlIiwidXBkYXRlZCIsImJlZm9yZURlc3Ryb3kiLCJkZXN0cm95ZWQiLCJhY3RpdmF0ZWQiLCJkZWFjdGl2YXRlZCIsImVycm9yQ2FwdHVyZWQiLCJzZXJ2ZXJQcmVmZXRjaCJdLEY9e29wdGlvbk1lcmdlU3RyYXRlZ2llczpPYmplY3QuY3JlYXRlKG51bGwpLHNpbGVudDohMSxwcm9kdWN0aW9uVGlwOiExLGRldnRvb2xzOiExLHBlcmZvcm1hbmNlOiExLGVycm9ySGFuZGxlcjpudWxsLHdhcm5IYW5kbGVyOm51bGwsaWdub3JlZEVsZW1lbnRzOltdLGtleUNvZGVzOk9iamVjdC5jcmVhdGUobnVsbCksaXNSZXNlcnZlZFRhZzpULGlzUmVzZXJ2ZWRBdHRyOlQsaXNVbmtub3duRWxlbWVudDpULGdldFRhZ05hbWVzcGFjZTpTLHBhcnNlUGxhdGZvcm1UYWdOYW1lOkUsbXVzdFVzZVByb3A6VCxhc3luYzohMCxfbGlmZWN5Y2xlSG9va3M6SX0sUD0vYS16QS1aXHUwMEI3XHUwMEMwLVx1MDBENlx1MDBEOC1cdTAwRjZcdTAwRjgtXHUwMzdEXHUwMzdGLVx1MUZGRlx1MjAwQy1cdTIwMERcdTIwM0YtXHUyMDQwXHUyMDcwLVx1MjE4Rlx1MkMwMC1cdTJGRUZcdTMwMDEtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRkQvO2Z1bmN0aW9uIFIoZSx0LG4scil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEhcix3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX12YXIgSD1uZXcgUmVnRXhwKCJbXiIrUC5zb3VyY2UrIi4kX1xcZF0iKTt2YXIgQixVPSJfX3Byb3RvX18iaW57fSx6PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LFY9InVuZGVmaW5lZCIhPXR5cGVvZiBXWEVudmlyb25tZW50JiYhIVdYRW52aXJvbm1lbnQucGxhdGZvcm0sSz1WJiZXWEVudmlyb25tZW50LnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksSj16JiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLHE9SiYmL21zaWV8dHJpZGVudC8udGVzdChKKSxXPUomJkouaW5kZXhPZigibXNpZSA5LjAiKT4wLFo9SiYmSi5pbmRleE9mKCJlZGdlLyIpPjAsRz0oSiYmSi5pbmRleE9mKCJhbmRyb2lkIiksSiYmL2lwaG9uZXxpcGFkfGlwb2R8aW9zLy50ZXN0KEopfHwiaW9zIj09PUspLFg9KEomJi9jaHJvbWVcL1xkKy8udGVzdChKKSxKJiYvcGhhbnRvbWpzLy50ZXN0KEopLEomJkoubWF0Y2goL2ZpcmVmb3hcLyhcZCspLykpLFk9e30ud2F0Y2gsUT0hMTtpZih6KXRyeXt2YXIgZWU9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KGVlLCJwYXNzaXZlIix7Z2V0OmZ1bmN0aW9uKCl7UT0hMH19KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidGVzdC1wYXNzaXZlIixudWxsLGVlKX1jYXRjaChlKXt9dmFyIHRlPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PUImJihCPSF6JiYhViYmInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJihnbG9iYWwucHJvY2VzcyYmInNlcnZlciI9PT1nbG9iYWwucHJvY2Vzcy5lbnYuVlVFX0VOVikpLEJ9LG5lPXomJndpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO2Z1bmN0aW9uIHJlKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiYvbmF0aXZlIGNvZGUvLnRlc3QoZS50b1N0cmluZygpKX12YXIgaWUsb2U9InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJnJlKFN5bWJvbCkmJiJ1bmRlZmluZWQiIT10eXBlb2YgUmVmbGVjdCYmcmUoUmVmbGVjdC5vd25LZXlzKTtpZT0idW5kZWZpbmVkIiE9dHlwZW9mIFNldCYmcmUoU2V0KT9TZXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5zZXQ9T2JqZWN0LmNyZWF0ZShudWxsKX1yZXR1cm4gZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiEwPT09dGhpcy5zZXRbZV19LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt0aGlzLnNldFtlXT0hMH0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNldD1PYmplY3QuY3JlYXRlKG51bGwpfSxlfSgpO3ZhciBhZT1TLHNlPTAsY2U9ZnVuY3Rpb24oKXt0aGlzLmlkPXNlKyssdGhpcy5zdWJzPVtdfTtjZS5wcm90b3R5cGUuYWRkU3ViPWZ1bmN0aW9uKGUpe3RoaXMuc3Vicy5wdXNoKGUpfSxjZS5wcm90b3R5cGUucmVtb3ZlU3ViPWZ1bmN0aW9uKGUpe2godGhpcy5zdWJzLGUpfSxjZS5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Y2UudGFyZ2V0JiZjZS50YXJnZXQuYWRkRGVwKHRoaXMpfSxjZS5wcm90b3R5cGUubm90aWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuc3Vicy5zbGljZSgpLHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspZVt0XS51cGRhdGUoKX0sY2UudGFyZ2V0PW51bGw7dmFyIHVlPVtdO2Z1bmN0aW9uIGxlKGUpe3VlLnB1c2goZSksY2UudGFyZ2V0PWV9ZnVuY3Rpb24gZmUoKXt1ZS5wb3AoKSxjZS50YXJnZXQ9dWVbdWUubGVuZ3RoLTFdfXZhciBwZT1mdW5jdGlvbihlLHQsbixyLGksbyxhLHMpe3RoaXMudGFnPWUsdGhpcy5kYXRhPXQsdGhpcy5jaGlsZHJlbj1uLHRoaXMudGV4dD1yLHRoaXMuZWxtPWksdGhpcy5ucz12b2lkIDAsdGhpcy5jb250ZXh0PW8sdGhpcy5mbkNvbnRleHQ9dm9pZCAwLHRoaXMuZm5PcHRpb25zPXZvaWQgMCx0aGlzLmZuU2NvcGVJZD12b2lkIDAsdGhpcy5rZXk9dCYmdC5rZXksdGhpcy5jb21wb25lbnRPcHRpb25zPWEsdGhpcy5jb21wb25lbnRJbnN0YW5jZT12b2lkIDAsdGhpcy5wYXJlbnQ9dm9pZCAwLHRoaXMucmF3PSExLHRoaXMuaXNTdGF0aWM9ITEsdGhpcy5pc1Jvb3RJbnNlcnQ9ITAsdGhpcy5pc0NvbW1lbnQ9ITEsdGhpcy5pc0Nsb25lZD0hMSx0aGlzLmlzT25jZT0hMSx0aGlzLmFzeW5jRmFjdG9yeT1zLHRoaXMuYXN5bmNNZXRhPXZvaWQgMCx0aGlzLmlzQXN5bmNQbGFjZWhvbGRlcj0hMX0sZGU9e2NoaWxkOntjb25maWd1cmFibGU6ITB9fTtkZS5jaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocGUucHJvdG90eXBlLGRlKTt2YXIgdmU9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9IiIpO3ZhciB0PW5ldyBwZTtyZXR1cm4gdC50ZXh0PWUsdC5pc0NvbW1lbnQ9ITAsdH07ZnVuY3Rpb24gaGUoZSl7cmV0dXJuIG5ldyBwZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCxTdHJpbmcoZSkpfWZ1bmN0aW9uIG1lKGUpe3ZhciB0PW5ldyBwZShlLnRhZyxlLmRhdGEsZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5zbGljZSgpLGUudGV4dCxlLmVsbSxlLmNvbnRleHQsZS5jb21wb25lbnRPcHRpb25zLGUuYXN5bmNGYWN0b3J5KTtyZXR1cm4gdC5ucz1lLm5zLHQuaXNTdGF0aWM9ZS5pc1N0YXRpYyx0LmtleT1lLmtleSx0LmlzQ29tbWVudD1lLmlzQ29tbWVudCx0LmZuQ29udGV4dD1lLmZuQ29udGV4dCx0LmZuT3B0aW9ucz1lLmZuT3B0aW9ucyx0LmZuU2NvcGVJZD1lLmZuU2NvcGVJZCx0LmFzeW5jTWV0YT1lLmFzeW5jTWV0YSx0LmlzQ2xvbmVkPSEwLHR9dmFyIHllPUFycmF5LnByb3RvdHlwZSxnZT1PYmplY3QuY3JlYXRlKHllKTtbInB1c2giLCJwb3AiLCJzaGlmdCIsInVuc2hpZnQiLCJzcGxpY2UiLCJzb3J0IiwicmV2ZXJzZSJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9eWVbZV07UihnZSxlLGZ1bmN0aW9uKCl7Zm9yKHZhciBuPVtdLHI9YXJndW1lbnRzLmxlbmd0aDtyLS07KW5bcl09YXJndW1lbnRzW3JdO3ZhciBpLG89dC5hcHBseSh0aGlzLG4pLGE9dGhpcy5fX29iX187c3dpdGNoKGUpe2Nhc2UicHVzaCI6Y2FzZSJ1bnNoaWZ0IjppPW47YnJlYWs7Y2FzZSJzcGxpY2UiOmk9bi5zbGljZSgyKX1yZXR1cm4gaSYmYS5vYnNlcnZlQXJyYXkoaSksYS5kZXAubm90aWZ5KCksb30pfSk7dmFyIF9lPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdlKSxiZT0hMDtmdW5jdGlvbiAkZShlKXtiZT1lfXZhciB3ZT1mdW5jdGlvbihlKXt2YXIgdDt0aGlzLnZhbHVlPWUsdGhpcy5kZXA9bmV3IGNlLHRoaXMudm1Db3VudD0wLFIoZSwiX19vYl9fIix0aGlzKSxBcnJheS5pc0FycmF5KGUpPyhVPyh0PWdlLGUuX19wcm90b19fPXQpOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspe3ZhciBvPW5bcl07UihlLG8sdFtvXSl9fShlLGdlLF9lKSx0aGlzLm9ic2VydmVBcnJheShlKSk6dGhpcy53YWxrKGUpfTtmdW5jdGlvbiBDZShlLHQpe3ZhciBuO2lmKG8oZSkmJiEoZSBpbnN0YW5jZW9mIHBlKSlyZXR1cm4geShlLCJfX29iX18iKSYmZS5fX29iX18gaW5zdGFuY2VvZiB3ZT9uPWUuX19vYl9fOmJlJiYhdGUoKSYmKEFycmF5LmlzQXJyYXkoZSl8fHMoZSkpJiZPYmplY3QuaXNFeHRlbnNpYmxlKGUpJiYhZS5faXNWdWUmJihuPW5ldyB3ZShlKSksdCYmbiYmbi52bUNvdW50Kyssbn1mdW5jdGlvbiB4ZShlLHQsbixyLGkpe3ZhciBvPW5ldyBjZSxhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtpZighYXx8ITEhPT1hLmNvbmZpZ3VyYWJsZSl7dmFyIHM9YSYmYS5nZXQsYz1hJiZhLnNldDtzJiYhY3x8MiE9PWFyZ3VtZW50cy5sZW5ndGh8fChuPWVbdF0pO3ZhciB1PSFpJiZDZShuKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1zP3MuY2FsbChlKTpuO3JldHVybiBjZS50YXJnZXQmJihvLmRlcGVuZCgpLHUmJih1LmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KHQpJiZmdW5jdGlvbiBlKHQpe2Zvcih2YXIgbj12b2lkIDAscj0wLGk9dC5sZW5ndGg7cjxpO3IrKykobj10W3JdKSYmbi5fX29iX18mJm4uX19vYl9fLmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KG4pJiZlKG4pfSh0KSkpLHR9LHNldDpmdW5jdGlvbih0KXt2YXIgcj1zP3MuY2FsbChlKTpuO3Q9PT1yfHx0IT10JiZyIT1yfHxzJiYhY3x8KGM/Yy5jYWxsKGUsdCk6bj10LHU9IWkmJkNlKHQpLG8ubm90aWZ5KCkpfX0pfX1mdW5jdGlvbiBrZShlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSYmYyh0KSlyZXR1cm4gZS5sZW5ndGg9TWF0aC5tYXgoZS5sZW5ndGgsdCksZS5zcGxpY2UodCwxLG4pLG47aWYodCBpbiBlJiYhKHQgaW4gT2JqZWN0LnByb3RvdHlwZSkpcmV0dXJuIGVbdF09bixuO3ZhciByPWUuX19vYl9fO3JldHVybiBlLl9pc1Z1ZXx8ciYmci52bUNvdW50P246cj8oeGUoci52YWx1ZSx0LG4pLHIuZGVwLm5vdGlmeSgpLG4pOihlW3RdPW4sbil9ZnVuY3Rpb24gQWUoZSx0KXtpZihBcnJheS5pc0FycmF5KGUpJiZjKHQpKWUuc3BsaWNlKHQsMSk7ZWxzZXt2YXIgbj1lLl9fb2JfXztlLl9pc1Z1ZXx8biYmbi52bUNvdW50fHx5KGUsdCkmJihkZWxldGUgZVt0XSxuJiZuLmRlcC5ub3RpZnkoKSl9fXdlLnByb3RvdHlwZS53YWxrPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxuPTA7bjx0Lmxlbmd0aDtuKyspeGUoZSx0W25dKX0sd2UucHJvdG90eXBlLm9ic2VydmVBcnJheT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspQ2UoZVt0XSl9O3ZhciBPZT1GLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztmdW5jdGlvbiBTZShlLHQpe2lmKCF0KXJldHVybiBlO2Zvcih2YXIgbixyLGksbz1vZT9SZWZsZWN0Lm93bktleXModCk6T2JqZWN0LmtleXModCksYT0wO2E8by5sZW5ndGg7YSsrKSJfX29iX18iIT09KG49b1thXSkmJihyPWVbbl0saT10W25dLHkoZSxuKT9yIT09aSYmcyhyKSYmcyhpKSYmU2UocixpKTprZShlLG4saSkpO3JldHVybiBlfWZ1bmN0aW9uIFRlKGUsdCxuKXtyZXR1cm4gbj9mdW5jdGlvbigpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbChuLG4pOnQsaT0iZnVuY3Rpb24iPT10eXBlb2YgZT9lLmNhbGwobixuKTplO3JldHVybiByP1NlKHIsaSk6aX06dD9lP2Z1bmN0aW9uKCl7cmV0dXJuIFNlKCJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbCh0aGlzLHRoaXMpOnQsImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5jYWxsKHRoaXMsdGhpcyk6ZSl9OnQ6ZX1mdW5jdGlvbiBFZShlLHQpe3ZhciBuPXQ/ZT9lLmNvbmNhdCh0KTpBcnJheS5pc0FycmF5KHQpP3Q6W3RdOmU7cmV0dXJuIG4/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MDtuPGUubGVuZ3RoO24rKyktMT09PXQuaW5kZXhPZihlW25dKSYmdC5wdXNoKGVbbl0pO3JldHVybiB0fShuKTpufWZ1bmN0aW9uIE5lKGUsdCxuLHIpe3ZhciBpPU9iamVjdC5jcmVhdGUoZXx8bnVsbCk7cmV0dXJuIHQ/QShpLHQpOml9T2UuZGF0YT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG4/VGUoZSx0LG4pOnQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6VGUoZSx0KX0sSS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2VdPUVlfSksTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2UrInMiXT1OZX0pLE9lLndhdGNoPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKGU9PT1ZJiYoZT12b2lkIDApLHQ9PT1ZJiYodD12b2lkIDApLCF0KXJldHVybiBPYmplY3QuY3JlYXRlKGV8fG51bGwpO2lmKCFlKXJldHVybiB0O3ZhciBpPXt9O2Zvcih2YXIgbyBpbiBBKGksZSksdCl7dmFyIGE9aVtvXSxzPXRbb107YSYmIUFycmF5LmlzQXJyYXkoYSkmJihhPVthXSksaVtvXT1hP2EuY29uY2F0KHMpOkFycmF5LmlzQXJyYXkocyk/czpbc119cmV0dXJuIGl9LE9lLnByb3BzPU9lLm1ldGhvZHM9T2UuaW5qZWN0PU9lLmNvbXB1dGVkPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKCFlKXJldHVybiB0O3ZhciBpPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIEEoaSxlKSx0JiZBKGksdCksaX0sT2UucHJvdmlkZT1UZTt2YXIgamU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9lOnR9O2Z1bmN0aW9uIERlKGUsdCxuKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHQ9dC5vcHRpb25zKSxmdW5jdGlvbihlLHQpe3ZhciBuPWUucHJvcHM7aWYobil7dmFyIHIsaSxvPXt9O2lmKEFycmF5LmlzQXJyYXkobikpZm9yKHI9bi5sZW5ndGg7ci0tOykic3RyaW5nIj09dHlwZW9mKGk9bltyXSkmJihvW2IoaSldPXt0eXBlOm51bGx9KTtlbHNlIGlmKHMobikpZm9yKHZhciBhIGluIG4paT1uW2FdLG9bYihhKV09cyhpKT9pOnt0eXBlOml9O2UucHJvcHM9b319KHQpLGZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5pbmplY3Q7aWYobil7dmFyIHI9ZS5pbmplY3Q9e307aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKylyW25baV1dPXtmcm9tOm5baV19O2Vsc2UgaWYocyhuKSlmb3IodmFyIG8gaW4gbil7dmFyIGE9bltvXTtyW29dPXMoYSk/QSh7ZnJvbTpvfSxhKTp7ZnJvbTphfX19fSh0KSxmdW5jdGlvbihlKXt2YXIgdD1lLmRpcmVjdGl2ZXM7aWYodClmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTsiZnVuY3Rpb24iPT10eXBlb2YgciYmKHRbbl09e2JpbmQ6cix1cGRhdGU6cn0pfX0odCksIXQuX2Jhc2UmJih0LmV4dGVuZHMmJihlPURlKGUsdC5leHRlbmRzLG4pKSx0Lm1peGlucykpZm9yKHZhciByPTAsaT10Lm1peGlucy5sZW5ndGg7cjxpO3IrKyllPURlKGUsdC5taXhpbnNbcl0sbik7dmFyIG8sYT17fTtmb3IobyBpbiBlKWMobyk7Zm9yKG8gaW4gdCl5KGUsbyl8fGMobyk7ZnVuY3Rpb24gYyhyKXt2YXIgaT1PZVtyXXx8amU7YVtyXT1pKGVbcl0sdFtyXSxuLHIpfXJldHVybiBhfWZ1bmN0aW9uIExlKGUsdCxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2Ygbil7dmFyIGk9ZVt0XTtpZih5KGksbikpcmV0dXJuIGlbbl07dmFyIG89YihuKTtpZih5KGksbykpcmV0dXJuIGlbb107dmFyIGE9JChvKTtyZXR1cm4geShpLGEpP2lbYV06aVtuXXx8aVtvXXx8aVthXX19ZnVuY3Rpb24gTWUoZSx0LG4scil7dmFyIGk9dFtlXSxvPSF5KG4sZSksYT1uW2VdLHM9UGUoQm9vbGVhbixpLnR5cGUpO2lmKHM+LTEpaWYobyYmIXkoaSwiZGVmYXVsdCIpKWE9ITE7ZWxzZSBpZigiIj09PWF8fGE9PT1DKGUpKXt2YXIgYz1QZShTdHJpbmcsaS50eXBlKTsoYzwwfHxzPGMpJiYoYT0hMCl9aWYodm9pZCAwPT09YSl7YT1mdW5jdGlvbihlLHQsbil7aWYoIXkodCwiZGVmYXVsdCIpKXJldHVybjt2YXIgcj10LmRlZmF1bHQ7aWYoZSYmZS4kb3B0aW9ucy5wcm9wc0RhdGEmJnZvaWQgMD09PWUuJG9wdGlvbnMucHJvcHNEYXRhW25dJiZ2b2lkIDAhPT1lLl9wcm9wc1tuXSlyZXR1cm4gZS5fcHJvcHNbbl07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHImJiJGdW5jdGlvbiIhPT1JZSh0LnR5cGUpP3IuY2FsbChlKTpyfShyLGksZSk7dmFyIHU9YmU7JGUoITApLENlKGEpLCRlKHUpfXJldHVybiBhfWZ1bmN0aW9uIEllKGUpe3ZhciB0PWUmJmUudG9TdHJpbmcoKS5tYXRjaCgvXlxzKmZ1bmN0aW9uIChcdyspLyk7cmV0dXJuIHQ/dFsxXToiIn1mdW5jdGlvbiBGZShlLHQpe3JldHVybiBJZShlKT09PUllKHQpfWZ1bmN0aW9uIFBlKGUsdCl7aWYoIUFycmF5LmlzQXJyYXkodCkpcmV0dXJuIEZlKHQsZSk/MDotMTtmb3IodmFyIG49MCxyPXQubGVuZ3RoO248cjtuKyspaWYoRmUodFtuXSxlKSlyZXR1cm4gbjtyZXR1cm4tMX1mdW5jdGlvbiBSZShlLHQsbil7bGUoKTt0cnl7aWYodClmb3IodmFyIHI9dDtyPXIuJHBhcmVudDspe3ZhciBpPXIuJG9wdGlvbnMuZXJyb3JDYXB0dXJlZDtpZihpKWZvcih2YXIgbz0wO288aS5sZW5ndGg7bysrKXRyeXtpZighMT09PWlbb10uY2FsbChyLGUsdCxuKSlyZXR1cm59Y2F0Y2goZSl7QmUoZSxyLCJlcnJvckNhcHR1cmVkIGhvb2siKX19QmUoZSx0LG4pfWZpbmFsbHl7ZmUoKX19ZnVuY3Rpb24gSGUoZSx0LG4scixpKXt2YXIgbzt0cnl7KG89bj9lLmFwcGx5KHQsbik6ZS5jYWxsKHQpKSYmIW8uX2lzVnVlJiZ1KG8pJiYhby5faGFuZGxlZCYmKG8uY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIFJlKGUscixpKyIgKFByb21pc2UvYXN5bmMpIil9KSxvLl9oYW5kbGVkPSEwKX1jYXRjaChlKXtSZShlLHIsaSl9cmV0dXJuIG99ZnVuY3Rpb24gQmUoZSx0LG4pe2lmKEYuZXJyb3JIYW5kbGVyKXRyeXtyZXR1cm4gRi5lcnJvckhhbmRsZXIuY2FsbChudWxsLGUsdCxuKX1jYXRjaCh0KXt0IT09ZSYmVWUodCxudWxsLCJjb25maWcuZXJyb3JIYW5kbGVyIil9VWUoZSx0LG4pfWZ1bmN0aW9uIFVlKGUsdCxuKXtpZigheiYmIVZ8fCJ1bmRlZmluZWQiPT10eXBlb2YgY29uc29sZSl0aHJvdyBlO2NvbnNvbGUuZXJyb3IoZSl9dmFyIHplLFZlPSExLEtlPVtdLEplPSExO2Z1bmN0aW9uIHFlKCl7SmU9ITE7dmFyIGU9S2Uuc2xpY2UoMCk7S2UubGVuZ3RoPTA7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspZVt0XSgpfWlmKCJ1bmRlZmluZWQiIT10eXBlb2YgUHJvbWlzZSYmcmUoUHJvbWlzZSkpe3ZhciBXZT1Qcm9taXNlLnJlc29sdmUoKTt6ZT1mdW5jdGlvbigpe1dlLnRoZW4ocWUpLEcmJnNldFRpbWVvdXQoUyl9LFZlPSEwfWVsc2UgaWYocXx8InVuZGVmaW5lZCI9PXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyfHwhcmUoTXV0YXRpb25PYnNlcnZlcikmJiJbb2JqZWN0IE11dGF0aW9uT2JzZXJ2ZXJDb25zdHJ1Y3Rvcl0iIT09TXV0YXRpb25PYnNlcnZlci50b1N0cmluZygpKXplPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2V0SW1tZWRpYXRlJiZyZShzZXRJbW1lZGlhdGUpP2Z1bmN0aW9uKCl7c2V0SW1tZWRpYXRlKHFlKX06ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHFlLDApfTtlbHNle3ZhciBaZT0xLEdlPW5ldyBNdXRhdGlvbk9ic2VydmVyKHFlKSxYZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShTdHJpbmcoWmUpKTtHZS5vYnNlcnZlKFhlLHtjaGFyYWN0ZXJEYXRhOiEwfSksemU9ZnVuY3Rpb24oKXtaZT0oWmUrMSklMixYZS5kYXRhPVN0cmluZyhaZSl9LFZlPSEwfWZ1bmN0aW9uIFllKGUsdCl7dmFyIG47aWYoS2UucHVzaChmdW5jdGlvbigpe2lmKGUpdHJ5e2UuY2FsbCh0KX1jYXRjaChlKXtSZShlLHQsIm5leHRUaWNrIil9ZWxzZSBuJiZuKHQpfSksSmV8fChKZT0hMCx6ZSgpKSwhZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBQcm9taXNlKXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtuPWV9KX12YXIgUWU9bmV3IGllO2Z1bmN0aW9uIGV0KGUpeyFmdW5jdGlvbiBlKHQsbil7dmFyIHIsaTt2YXIgYT1BcnJheS5pc0FycmF5KHQpO2lmKCFhJiYhbyh0KXx8T2JqZWN0LmlzRnJvemVuKHQpfHx0IGluc3RhbmNlb2YgcGUpcmV0dXJuO2lmKHQuX19vYl9fKXt2YXIgcz10Ll9fb2JfXy5kZXAuaWQ7aWYobi5oYXMocykpcmV0dXJuO24uYWRkKHMpfWlmKGEpZm9yKHI9dC5sZW5ndGg7ci0tOyllKHRbcl0sbik7ZWxzZSBmb3IoaT1PYmplY3Qua2V5cyh0KSxyPWkubGVuZ3RoO3ItLTspZSh0W2lbcl1dLG4pfShlLFFlKSxRZS5jbGVhcigpfXZhciB0dD1nKGZ1bmN0aW9uKGUpe3ZhciB0PSImIj09PWUuY2hhckF0KDApLG49In4iPT09KGU9dD9lLnNsaWNlKDEpOmUpLmNoYXJBdCgwKSxyPSIhIj09PShlPW4/ZS5zbGljZSgxKTplKS5jaGFyQXQoMCk7cmV0dXJue25hbWU6ZT1yP2Uuc2xpY2UoMSk6ZSxvbmNlOm4sY2FwdHVyZTpyLHBhc3NpdmU6dH19KTtmdW5jdGlvbiBudChlLHQpe2Z1bmN0aW9uIG4oKXt2YXIgZT1hcmd1bWVudHMscj1uLmZucztpZighQXJyYXkuaXNBcnJheShyKSlyZXR1cm4gSGUocixudWxsLGFyZ3VtZW50cyx0LCJ2LW9uIGhhbmRsZXIiKTtmb3IodmFyIGk9ci5zbGljZSgpLG89MDtvPGkubGVuZ3RoO28rKylIZShpW29dLG51bGwsZSx0LCJ2LW9uIGhhbmRsZXIiKX1yZXR1cm4gbi5mbnM9ZSxufWZ1bmN0aW9uIHJ0KGUsbixpLG8sYSxzKXt2YXIgYyx1LGwsZjtmb3IoYyBpbiBlKXU9ZVtjXSxsPW5bY10sZj10dChjKSx0KHUpfHwodChsKT8odCh1LmZucykmJih1PWVbY109bnQodSxzKSkscihmLm9uY2UpJiYodT1lW2NdPWEoZi5uYW1lLHUsZi5jYXB0dXJlKSksaShmLm5hbWUsdSxmLmNhcHR1cmUsZi5wYXNzaXZlLGYucGFyYW1zKSk6dSE9PWwmJihsLmZucz11LGVbY109bCkpO2ZvcihjIGluIG4pdChlW2NdKSYmbygoZj10dChjKSkubmFtZSxuW2NdLGYuY2FwdHVyZSl9ZnVuY3Rpb24gaXQoZSxpLG8pe3ZhciBhO2UgaW5zdGFuY2VvZiBwZSYmKGU9ZS5kYXRhLmhvb2t8fChlLmRhdGEuaG9vaz17fSkpO3ZhciBzPWVbaV07ZnVuY3Rpb24gYygpe28uYXBwbHkodGhpcyxhcmd1bWVudHMpLGgoYS5mbnMsYyl9dChzKT9hPW50KFtjXSk6bihzLmZucykmJnIocy5tZXJnZWQpPyhhPXMpLmZucy5wdXNoKGMpOmE9bnQoW3MsY10pLGEubWVyZ2VkPSEwLGVbaV09YX1mdW5jdGlvbiBvdChlLHQscixpLG8pe2lmKG4odCkpe2lmKHkodCxyKSlyZXR1cm4gZVtyXT10W3JdLG98fGRlbGV0ZSB0W3JdLCEwO2lmKHkodCxpKSlyZXR1cm4gZVtyXT10W2ldLG98fGRlbGV0ZSB0W2ldLCEwfXJldHVybiExfWZ1bmN0aW9uIGF0KGUpe3JldHVybiBpKGUpP1toZShlKV06QXJyYXkuaXNBcnJheShlKT9mdW5jdGlvbiBlKG8sYSl7dmFyIHM9W107dmFyIGMsdSxsLGY7Zm9yKGM9MDtjPG8ubGVuZ3RoO2MrKyl0KHU9b1tjXSl8fCJib29sZWFuIj09dHlwZW9mIHV8fChsPXMubGVuZ3RoLTEsZj1zW2xdLEFycmF5LmlzQXJyYXkodSk/dS5sZW5ndGg+MCYmKHN0KCh1PWUodSwoYXx8IiIpKyJfIitjKSlbMF0pJiZzdChmKSYmKHNbbF09aGUoZi50ZXh0K3VbMF0udGV4dCksdS5zaGlmdCgpKSxzLnB1c2guYXBwbHkocyx1KSk6aSh1KT9zdChmKT9zW2xdPWhlKGYudGV4dCt1KToiIiE9PXUmJnMucHVzaChoZSh1KSk6c3QodSkmJnN0KGYpP3NbbF09aGUoZi50ZXh0K3UudGV4dCk6KHIoby5faXNWTGlzdCkmJm4odS50YWcpJiZ0KHUua2V5KSYmbihhKSYmKHUua2V5PSJfX3ZsaXN0IithKyJfIitjKyJfXyIpLHMucHVzaCh1KSkpO3JldHVybiBzfShlKTp2b2lkIDB9ZnVuY3Rpb24gc3QoZSl7cmV0dXJuIG4oZSkmJm4oZS50ZXh0KSYmITE9PT1lLmlzQ29tbWVudH1mdW5jdGlvbiBjdChlLHQpe2lmKGUpe2Zvcih2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9b2U/UmVmbGVjdC5vd25LZXlzKGUpOk9iamVjdC5rZXlzKGUpLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG89cltpXTtpZigiX19vYl9fIiE9PW8pe2Zvcih2YXIgYT1lW29dLmZyb20scz10O3M7KXtpZihzLl9wcm92aWRlZCYmeShzLl9wcm92aWRlZCxhKSl7bltvXT1zLl9wcm92aWRlZFthXTticmVha31zPXMuJHBhcmVudH1pZighcyYmImRlZmF1bHQiaW4gZVtvXSl7dmFyIGM9ZVtvXS5kZWZhdWx0O25bb109ImZ1bmN0aW9uIj09dHlwZW9mIGM/Yy5jYWxsKHQpOmN9fX1yZXR1cm4gbn19ZnVuY3Rpb24gdXQoZSx0KXtpZighZXx8IWUubGVuZ3RoKXJldHVybnt9O2Zvcih2YXIgbj17fSxyPTAsaT1lLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1lW3JdLGE9by5kYXRhO2lmKGEmJmEuYXR0cnMmJmEuYXR0cnMuc2xvdCYmZGVsZXRlIGEuYXR0cnMuc2xvdCxvLmNvbnRleHQhPT10JiZvLmZuQ29udGV4dCE9PXR8fCFhfHxudWxsPT1hLnNsb3QpKG4uZGVmYXVsdHx8KG4uZGVmYXVsdD1bXSkpLnB1c2gobyk7ZWxzZXt2YXIgcz1hLnNsb3QsYz1uW3NdfHwobltzXT1bXSk7InRlbXBsYXRlIj09PW8udGFnP2MucHVzaC5hcHBseShjLG8uY2hpbGRyZW58fFtdKTpjLnB1c2gobyl9fWZvcih2YXIgdSBpbiBuKW5bdV0uZXZlcnkobHQpJiZkZWxldGUgblt1XTtyZXR1cm4gbn1mdW5jdGlvbiBsdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJiFlLmFzeW5jRmFjdG9yeXx8IiAiPT09ZS50ZXh0fWZ1bmN0aW9uIGZ0KHQsbixyKXt2YXIgaSxvPU9iamVjdC5rZXlzKG4pLmxlbmd0aD4wLGE9dD8hIXQuJHN0YWJsZTohbyxzPXQmJnQuJGtleTtpZih0KXtpZih0Ll9ub3JtYWxpemVkKXJldHVybiB0Ll9ub3JtYWxpemVkO2lmKGEmJnImJnIhPT1lJiZzPT09ci4ka2V5JiYhbyYmIXIuJGhhc05vcm1hbClyZXR1cm4gcjtmb3IodmFyIGMgaW4gaT17fSx0KXRbY10mJiIkIiE9PWNbMF0mJihpW2NdPXB0KG4sYyx0W2NdKSl9ZWxzZSBpPXt9O2Zvcih2YXIgdSBpbiBuKXUgaW4gaXx8KGlbdV09ZHQobix1KSk7cmV0dXJuIHQmJk9iamVjdC5pc0V4dGVuc2libGUodCkmJih0Ll9ub3JtYWxpemVkPWkpLFIoaSwiJHN0YWJsZSIsYSksUihpLCIka2V5IixzKSxSKGksIiRoYXNOb3JtYWwiLG8pLGl9ZnVuY3Rpb24gcHQoZSx0LG4pe3ZhciByPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD9uLmFwcGx5KG51bGwsYXJndW1lbnRzKTpuKHt9KTtyZXR1cm4oZT1lJiYib2JqZWN0Ij09dHlwZW9mIGUmJiFBcnJheS5pc0FycmF5KGUpP1tlXTphdChlKSkmJigwPT09ZS5sZW5ndGh8fDE9PT1lLmxlbmd0aCYmZVswXS5pc0NvbW1lbnQpP3ZvaWQgMDplfTtyZXR1cm4gbi5wcm94eSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Z2V0OnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyfWZ1bmN0aW9uIGR0KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGVbdF19fWZ1bmN0aW9uIHZ0KGUsdCl7dmFyIHIsaSxhLHMsYztpZihBcnJheS5pc0FycmF5KGUpfHwic3RyaW5nIj09dHlwZW9mIGUpZm9yKHI9bmV3IEFycmF5KGUubGVuZ3RoKSxpPTAsYT1lLmxlbmd0aDtpPGE7aSsrKXJbaV09dChlW2ldLGkpO2Vsc2UgaWYoIm51bWJlciI9PXR5cGVvZiBlKWZvcihyPW5ldyBBcnJheShlKSxpPTA7aTxlO2krKylyW2ldPXQoaSsxLGkpO2Vsc2UgaWYobyhlKSlpZihvZSYmZVtTeW1ib2wuaXRlcmF0b3JdKXtyPVtdO2Zvcih2YXIgdT1lW1N5bWJvbC5pdGVyYXRvcl0oKSxsPXUubmV4dCgpOyFsLmRvbmU7KXIucHVzaCh0KGwudmFsdWUsci5sZW5ndGgpKSxsPXUubmV4dCgpfWVsc2UgZm9yKHM9T2JqZWN0LmtleXMoZSkscj1uZXcgQXJyYXkocy5sZW5ndGgpLGk9MCxhPXMubGVuZ3RoO2k8YTtpKyspYz1zW2ldLHJbaV09dChlW2NdLGMsaSk7cmV0dXJuIG4ocil8fChyPVtdKSxyLl9pc1ZMaXN0PSEwLHJ9ZnVuY3Rpb24gaHQoZSx0LG4scil7dmFyIGksbz10aGlzLiRzY29wZWRTbG90c1tlXTtvPyhuPW58fHt9LHImJihuPUEoQSh7fSxyKSxuKSksaT1vKG4pfHx0KTppPXRoaXMuJHNsb3RzW2VdfHx0O3ZhciBhPW4mJm4uc2xvdDtyZXR1cm4gYT90aGlzLiRjcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIse3Nsb3Q6YX0saSk6aX1mdW5jdGlvbiBtdChlKXtyZXR1cm4gTGUodGhpcy4kb3B0aW9ucywiZmlsdGVycyIsZSl8fEV9ZnVuY3Rpb24geXQoZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT8tMT09PWUuaW5kZXhPZih0KTplIT09dH1mdW5jdGlvbiBndChlLHQsbixyLGkpe3ZhciBvPUYua2V5Q29kZXNbdF18fG47cmV0dXJuIGkmJnImJiFGLmtleUNvZGVzW3RdP3l0KGkscik6bz95dChvLGUpOnI/QyhyKSE9PXQ6dm9pZCAwfWZ1bmN0aW9uIF90KGUsdCxuLHIsaSl7aWYobilpZihvKG4pKXt2YXIgYTtBcnJheS5pc0FycmF5KG4pJiYobj1PKG4pKTt2YXIgcz1mdW5jdGlvbihvKXtpZigiY2xhc3MiPT09b3x8InN0eWxlIj09PW98fHYobykpYT1lO2Vsc2V7dmFyIHM9ZS5hdHRycyYmZS5hdHRycy50eXBlO2E9cnx8Ri5tdXN0VXNlUHJvcCh0LHMsbyk/ZS5kb21Qcm9wc3x8KGUuZG9tUHJvcHM9e30pOmUuYXR0cnN8fChlLmF0dHJzPXt9KX12YXIgYz1iKG8pLHU9QyhvKTtjIGluIGF8fHUgaW4gYXx8KGFbb109bltvXSxpJiYoKGUub258fChlLm9uPXt9KSlbInVwZGF0ZToiK29dPWZ1bmN0aW9uKGUpe25bb109ZX0pKX07Zm9yKHZhciBjIGluIG4pcyhjKX1lbHNlO3JldHVybiBlfWZ1bmN0aW9uIGJ0KGUsdCl7dmFyIG49dGhpcy5fc3RhdGljVHJlZXN8fCh0aGlzLl9zdGF0aWNUcmVlcz1bXSkscj1uW2VdO3JldHVybiByJiYhdD9yOih3dChyPW5bZV09dGhpcy4kb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnNbZV0uY2FsbCh0aGlzLl9yZW5kZXJQcm94eSxudWxsLHRoaXMpLCJfX3N0YXRpY19fIitlLCExKSxyKX1mdW5jdGlvbiAkdChlLHQsbil7cmV0dXJuIHd0KGUsIl9fb25jZV9fIit0KyhuPyJfIituOiIiKSwhMCksZX1mdW5jdGlvbiB3dChlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyllW3JdJiYic3RyaW5nIiE9dHlwZW9mIGVbcl0mJkN0KGVbcl0sdCsiXyIrcixuKTtlbHNlIEN0KGUsdCxuKX1mdW5jdGlvbiBDdChlLHQsbil7ZS5pc1N0YXRpYz0hMCxlLmtleT10LGUuaXNPbmNlPW59ZnVuY3Rpb24geHQoZSx0KXtpZih0KWlmKHModCkpe3ZhciBuPWUub249ZS5vbj9BKHt9LGUub24pOnt9O2Zvcih2YXIgciBpbiB0KXt2YXIgaT1uW3JdLG89dFtyXTtuW3JdPWk/W10uY29uY2F0KGksbyk6b319ZWxzZTtyZXR1cm4gZX1mdW5jdGlvbiBrdChlLHQsbixyKXt0PXR8fHskc3RhYmxlOiFufTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG89ZVtpXTtBcnJheS5pc0FycmF5KG8pP2t0KG8sdCxuKTpvJiYoby5wcm94eSYmKG8uZm4ucHJveHk9ITApLHRbby5rZXldPW8uZm4pfXJldHVybiByJiYodC4ka2V5PXIpLHR9ZnVuY3Rpb24gQXQoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRbbl07InN0cmluZyI9PXR5cGVvZiByJiZyJiYoZVt0W25dXT10W24rMV0pfXJldHVybiBlfWZ1bmN0aW9uIE90KGUsdCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP3QrZTplfWZ1bmN0aW9uIFN0KGUpe2UuX289JHQsZS5fbj1mLGUuX3M9bCxlLl9sPXZ0LGUuX3Q9aHQsZS5fcT1OLGUuX2k9aixlLl9tPWJ0LGUuX2Y9bXQsZS5faz1ndCxlLl9iPV90LGUuX3Y9aGUsZS5fZT12ZSxlLl91PWt0LGUuX2c9eHQsZS5fZD1BdCxlLl9wPU90fWZ1bmN0aW9uIFR0KHQsbixpLG8sYSl7dmFyIHMsYz10aGlzLHU9YS5vcHRpb25zO3kobywiX3VpZCIpPyhzPU9iamVjdC5jcmVhdGUobykpLl9vcmlnaW5hbD1vOihzPW8sbz1vLl9vcmlnaW5hbCk7dmFyIGw9cih1Ll9jb21waWxlZCksZj0hbDt0aGlzLmRhdGE9dCx0aGlzLnByb3BzPW4sdGhpcy5jaGlsZHJlbj1pLHRoaXMucGFyZW50PW8sdGhpcy5saXN0ZW5lcnM9dC5vbnx8ZSx0aGlzLmluamVjdGlvbnM9Y3QodS5pbmplY3QsbyksdGhpcy5zbG90cz1mdW5jdGlvbigpe3JldHVybiBjLiRzbG90c3x8ZnQodC5zY29wZWRTbG90cyxjLiRzbG90cz11dChpLG8pKSxjLiRzbG90c30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInNjb3BlZFNsb3RzIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZnQodC5zY29wZWRTbG90cyx0aGlzLnNsb3RzKCkpfX0pLGwmJih0aGlzLiRvcHRpb25zPXUsdGhpcy4kc2xvdHM9dGhpcy5zbG90cygpLHRoaXMuJHNjb3BlZFNsb3RzPWZ0KHQuc2NvcGVkU2xvdHMsdGhpcy4kc2xvdHMpKSx1Ll9zY29wZUlkP3RoaXMuX2M9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9UHQocyxlLHQsbixyLGYpO3JldHVybiBpJiYhQXJyYXkuaXNBcnJheShpKSYmKGkuZm5TY29wZUlkPXUuX3Njb3BlSWQsaS5mbkNvbnRleHQ9byksaX06dGhpcy5fYz1mdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gUHQocyxlLHQsbixyLGYpfX1mdW5jdGlvbiBFdChlLHQsbixyLGkpe3ZhciBvPW1lKGUpO3JldHVybiBvLmZuQ29udGV4dD1uLG8uZm5PcHRpb25zPXIsdC5zbG90JiYoKG8uZGF0YXx8KG8uZGF0YT17fSkpLnNsb3Q9dC5zbG90KSxvfWZ1bmN0aW9uIE50KGUsdCl7Zm9yKHZhciBuIGluIHQpZVtiKG4pXT10W25dfVN0KFR0LnByb3RvdHlwZSk7dmFyIGp0PXtpbml0OmZ1bmN0aW9uKGUsdCl7aWYoZS5jb21wb25lbnRJbnN0YW5jZSYmIWUuY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkJiZlLmRhdGEua2VlcEFsaXZlKXt2YXIgcj1lO2p0LnByZXBhdGNoKHIscil9ZWxzZXsoZS5jb21wb25lbnRJbnN0YW5jZT1mdW5jdGlvbihlLHQpe3ZhciByPXtfaXNDb21wb25lbnQ6ITAsX3BhcmVudFZub2RlOmUscGFyZW50OnR9LGk9ZS5kYXRhLmlubGluZVRlbXBsYXRlO24oaSkmJihyLnJlbmRlcj1pLnJlbmRlcixyLnN0YXRpY1JlbmRlckZucz1pLnN0YXRpY1JlbmRlckZucyk7cmV0dXJuIG5ldyBlLmNvbXBvbmVudE9wdGlvbnMuQ3RvcihyKX0oZSxXdCkpLiRtb3VudCh0P2UuZWxtOnZvaWQgMCx0KX19LHByZXBhdGNoOmZ1bmN0aW9uKHQsbil7dmFyIHI9bi5jb21wb25lbnRPcHRpb25zOyFmdW5jdGlvbih0LG4scixpLG8pe3ZhciBhPWkuZGF0YS5zY29wZWRTbG90cyxzPXQuJHNjb3BlZFNsb3RzLGM9ISEoYSYmIWEuJHN0YWJsZXx8cyE9PWUmJiFzLiRzdGFibGV8fGEmJnQuJHNjb3BlZFNsb3RzLiRrZXkhPT1hLiRrZXkpLHU9ISEob3x8dC4kb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW58fGMpO3QuJG9wdGlvbnMuX3BhcmVudFZub2RlPWksdC4kdm5vZGU9aSx0Ll92bm9kZSYmKHQuX3Zub2RlLnBhcmVudD1pKTtpZih0LiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbj1vLHQuJGF0dHJzPWkuZGF0YS5hdHRyc3x8ZSx0LiRsaXN0ZW5lcnM9cnx8ZSxuJiZ0LiRvcHRpb25zLnByb3BzKXskZSghMSk7Zm9yKHZhciBsPXQuX3Byb3BzLGY9dC4kb3B0aW9ucy5fcHJvcEtleXN8fFtdLHA9MDtwPGYubGVuZ3RoO3ArKyl7dmFyIGQ9ZltwXSx2PXQuJG9wdGlvbnMucHJvcHM7bFtkXT1NZShkLHYsbix0KX0kZSghMCksdC4kb3B0aW9ucy5wcm9wc0RhdGE9bn1yPXJ8fGU7dmFyIGg9dC4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO3QuJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycz1yLHF0KHQscixoKSx1JiYodC4kc2xvdHM9dXQobyxpLmNvbnRleHQpLHQuJGZvcmNlVXBkYXRlKCkpfShuLmNvbXBvbmVudEluc3RhbmNlPXQuY29tcG9uZW50SW5zdGFuY2Usci5wcm9wc0RhdGEsci5saXN0ZW5lcnMsbixyLmNoaWxkcmVuKX0saW5zZXJ0OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5jb250ZXh0LHI9ZS5jb21wb25lbnRJbnN0YW5jZTtyLl9pc01vdW50ZWR8fChyLl9pc01vdW50ZWQ9ITAsWXQociwibW91bnRlZCIpKSxlLmRhdGEua2VlcEFsaXZlJiYobi5faXNNb3VudGVkPygodD1yKS5faW5hY3RpdmU9ITEsZW4ucHVzaCh0KSk6WHQociwhMCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29tcG9uZW50SW5zdGFuY2U7dC5faXNEZXN0cm95ZWR8fChlLmRhdGEua2VlcEFsaXZlP2Z1bmN0aW9uIGUodCxuKXtpZihuJiYodC5fZGlyZWN0SW5hY3RpdmU9ITAsR3QodCkpKXJldHVybjtpZighdC5faW5hY3RpdmUpe3QuX2luYWN0aXZlPSEwO2Zvcih2YXIgcj0wO3I8dC4kY2hpbGRyZW4ubGVuZ3RoO3IrKyllKHQuJGNoaWxkcmVuW3JdKTtZdCh0LCJkZWFjdGl2YXRlZCIpfX0odCwhMCk6dC4kZGVzdHJveSgpKX19LER0PU9iamVjdC5rZXlzKGp0KTtmdW5jdGlvbiBMdChpLGEscyxjLGwpe2lmKCF0KGkpKXt2YXIgZj1zLiRvcHRpb25zLl9iYXNlO2lmKG8oaSkmJihpPWYuZXh0ZW5kKGkpKSwiZnVuY3Rpb24iPT10eXBlb2YgaSl7dmFyIHA7aWYodChpLmNpZCkmJnZvaWQgMD09PShpPWZ1bmN0aW9uKGUsaSl7aWYocihlLmVycm9yKSYmbihlLmVycm9yQ29tcCkpcmV0dXJuIGUuZXJyb3JDb21wO2lmKG4oZS5yZXNvbHZlZCkpcmV0dXJuIGUucmVzb2x2ZWQ7dmFyIGE9SHQ7YSYmbihlLm93bmVycykmJi0xPT09ZS5vd25lcnMuaW5kZXhPZihhKSYmZS5vd25lcnMucHVzaChhKTtpZihyKGUubG9hZGluZykmJm4oZS5sb2FkaW5nQ29tcCkpcmV0dXJuIGUubG9hZGluZ0NvbXA7aWYoYSYmIW4oZS5vd25lcnMpKXt2YXIgcz1lLm93bmVycz1bYV0sYz0hMCxsPW51bGwsZj1udWxsO2EuJG9uKCJob29rOmRlc3Ryb3llZCIsZnVuY3Rpb24oKXtyZXR1cm4gaChzLGEpfSk7dmFyIHA9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1zLmxlbmd0aDt0PG47dCsrKXNbdF0uJGZvcmNlVXBkYXRlKCk7ZSYmKHMubGVuZ3RoPTAsbnVsbCE9PWwmJihjbGVhclRpbWVvdXQobCksbD1udWxsKSxudWxsIT09ZiYmKGNsZWFyVGltZW91dChmKSxmPW51bGwpKX0sZD1EKGZ1bmN0aW9uKHQpe2UucmVzb2x2ZWQ9QnQodCxpKSxjP3MubGVuZ3RoPTA6cCghMCl9KSx2PUQoZnVuY3Rpb24odCl7bihlLmVycm9yQ29tcCkmJihlLmVycm9yPSEwLHAoITApKX0pLG09ZShkLHYpO3JldHVybiBvKG0pJiYodShtKT90KGUucmVzb2x2ZWQpJiZtLnRoZW4oZCx2KTp1KG0uY29tcG9uZW50KSYmKG0uY29tcG9uZW50LnRoZW4oZCx2KSxuKG0uZXJyb3IpJiYoZS5lcnJvckNvbXA9QnQobS5lcnJvcixpKSksbihtLmxvYWRpbmcpJiYoZS5sb2FkaW5nQ29tcD1CdChtLmxvYWRpbmcsaSksMD09PW0uZGVsYXk/ZS5sb2FkaW5nPSEwOmw9c2V0VGltZW91dChmdW5jdGlvbigpe2w9bnVsbCx0KGUucmVzb2x2ZWQpJiZ0KGUuZXJyb3IpJiYoZS5sb2FkaW5nPSEwLHAoITEpKX0sbS5kZWxheXx8MjAwKSksbihtLnRpbWVvdXQpJiYoZj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zj1udWxsLHQoZS5yZXNvbHZlZCkmJnYobnVsbCl9LG0udGltZW91dCkpKSksYz0hMSxlLmxvYWRpbmc/ZS5sb2FkaW5nQ29tcDplLnJlc29sdmVkfX0ocD1pLGYpKSlyZXR1cm4gZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz12ZSgpO3JldHVybiBvLmFzeW5jRmFjdG9yeT1lLG8uYXN5bmNNZXRhPXtkYXRhOnQsY29udGV4dDpuLGNoaWxkcmVuOnIsdGFnOml9LG99KHAsYSxzLGMsbCk7YT1hfHx7fSwkbihpKSxuKGEubW9kZWwpJiZmdW5jdGlvbihlLHQpe3ZhciByPWUubW9kZWwmJmUubW9kZWwucHJvcHx8InZhbHVlIixpPWUubW9kZWwmJmUubW9kZWwuZXZlbnR8fCJpbnB1dCI7KHQuYXR0cnN8fCh0LmF0dHJzPXt9KSlbcl09dC5tb2RlbC52YWx1ZTt2YXIgbz10Lm9ufHwodC5vbj17fSksYT1vW2ldLHM9dC5tb2RlbC5jYWxsYmFjaztuKGEpPyhBcnJheS5pc0FycmF5KGEpPy0xPT09YS5pbmRleE9mKHMpOmEhPT1zKSYmKG9baV09W3NdLmNvbmNhdChhKSk6b1tpXT1zfShpLm9wdGlvbnMsYSk7dmFyIGQ9ZnVuY3Rpb24oZSxyLGkpe3ZhciBvPXIub3B0aW9ucy5wcm9wcztpZighdChvKSl7dmFyIGE9e30scz1lLmF0dHJzLGM9ZS5wcm9wcztpZihuKHMpfHxuKGMpKWZvcih2YXIgdSBpbiBvKXt2YXIgbD1DKHUpO290KGEsYyx1LGwsITApfHxvdChhLHMsdSxsLCExKX1yZXR1cm4gYX19KGEsaSk7aWYocihpLm9wdGlvbnMuZnVuY3Rpb25hbCkpcmV0dXJuIGZ1bmN0aW9uKHQscixpLG8sYSl7dmFyIHM9dC5vcHRpb25zLGM9e30sdT1zLnByb3BzO2lmKG4odSkpZm9yKHZhciBsIGluIHUpY1tsXT1NZShsLHUscnx8ZSk7ZWxzZSBuKGkuYXR0cnMpJiZOdChjLGkuYXR0cnMpLG4oaS5wcm9wcykmJk50KGMsaS5wcm9wcyk7dmFyIGY9bmV3IFR0KGksYyxhLG8sdCkscD1zLnJlbmRlci5jYWxsKG51bGwsZi5fYyxmKTtpZihwIGluc3RhbmNlb2YgcGUpcmV0dXJuIEV0KHAsaSxmLnBhcmVudCxzKTtpZihBcnJheS5pc0FycmF5KHApKXtmb3IodmFyIGQ9YXQocCl8fFtdLHY9bmV3IEFycmF5KGQubGVuZ3RoKSxoPTA7aDxkLmxlbmd0aDtoKyspdltoXT1FdChkW2hdLGksZi5wYXJlbnQscyk7cmV0dXJuIHZ9fShpLGQsYSxzLGMpO3ZhciB2PWEub247aWYoYS5vbj1hLm5hdGl2ZU9uLHIoaS5vcHRpb25zLmFic3RyYWN0KSl7dmFyIG09YS5zbG90O2E9e30sbSYmKGEuc2xvdD1tKX0hZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuaG9va3x8KGUuaG9vaz17fSksbj0wO248RHQubGVuZ3RoO24rKyl7dmFyIHI9RHRbbl0saT10W3JdLG89anRbcl07aT09PW98fGkmJmkuX21lcmdlZHx8KHRbcl09aT9NdChvLGkpOm8pfX0oYSk7dmFyIHk9aS5vcHRpb25zLm5hbWV8fGw7cmV0dXJuIG5ldyBwZSgidnVlLWNvbXBvbmVudC0iK2kuY2lkKyh5PyItIit5OiIiKSxhLHZvaWQgMCx2b2lkIDAsdm9pZCAwLHMse0N0b3I6aSxwcm9wc0RhdGE6ZCxsaXN0ZW5lcnM6dix0YWc6bCxjaGlsZHJlbjpjfSxwKX19fWZ1bmN0aW9uIE10KGUsdCl7dmFyIG49ZnVuY3Rpb24obixyKXtlKG4sciksdChuLHIpfTtyZXR1cm4gbi5fbWVyZ2VkPSEwLG59dmFyIEl0PTEsRnQ9MjtmdW5jdGlvbiBQdChlLGEscyxjLHUsbCl7cmV0dXJuKEFycmF5LmlzQXJyYXkocyl8fGkocykpJiYodT1jLGM9cyxzPXZvaWQgMCkscihsKSYmKHU9RnQpLGZ1bmN0aW9uKGUsaSxhLHMsYyl7aWYobihhKSYmbihhLl9fb2JfXykpcmV0dXJuIHZlKCk7bihhKSYmbihhLmlzKSYmKGk9YS5pcyk7aWYoIWkpcmV0dXJuIHZlKCk7QXJyYXkuaXNBcnJheShzKSYmImZ1bmN0aW9uIj09dHlwZW9mIHNbMF0mJigoYT1hfHx7fSkuc2NvcGVkU2xvdHM9e2RlZmF1bHQ6c1swXX0scy5sZW5ndGg9MCk7Yz09PUZ0P3M9YXQocyk6Yz09PUl0JiYocz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylpZihBcnJheS5pc0FycmF5KGVbdF0pKXJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGUpO3JldHVybiBlfShzKSk7dmFyIHUsbDtpZigic3RyaW5nIj09dHlwZW9mIGkpe3ZhciBmO2w9ZS4kdm5vZGUmJmUuJHZub2RlLm5zfHxGLmdldFRhZ05hbWVzcGFjZShpKSx1PUYuaXNSZXNlcnZlZFRhZyhpKT9uZXcgcGUoRi5wYXJzZVBsYXRmb3JtVGFnTmFtZShpKSxhLHMsdm9pZCAwLHZvaWQgMCxlKTphJiZhLnByZXx8IW4oZj1MZShlLiRvcHRpb25zLCJjb21wb25lbnRzIixpKSk/bmV3IHBlKGksYSxzLHZvaWQgMCx2b2lkIDAsZSk6THQoZixhLGUscyxpKX1lbHNlIHU9THQoaSxhLGUscyk7cmV0dXJuIEFycmF5LmlzQXJyYXkodSk/dTpuKHUpPyhuKGwpJiZmdW5jdGlvbiBlKGksbyxhKXtpLm5zPW87ImZvcmVpZ25PYmplY3QiPT09aS50YWcmJihvPXZvaWQgMCxhPSEwKTtpZihuKGkuY2hpbGRyZW4pKWZvcih2YXIgcz0wLGM9aS5jaGlsZHJlbi5sZW5ndGg7czxjO3MrKyl7dmFyIHU9aS5jaGlsZHJlbltzXTtuKHUudGFnKSYmKHQodS5ucyl8fHIoYSkmJiJzdmciIT09dS50YWcpJiZlKHUsbyxhKX19KHUsbCksbihhKSYmZnVuY3Rpb24oZSl7byhlLnN0eWxlKSYmZXQoZS5zdHlsZSk7byhlLmNsYXNzKSYmZXQoZS5jbGFzcyl9KGEpLHUpOnZlKCl9KGUsYSxzLGMsdSl9dmFyIFJ0LEh0PW51bGw7ZnVuY3Rpb24gQnQoZSx0KXtyZXR1cm4oZS5fX2VzTW9kdWxlfHxvZSYmIk1vZHVsZSI9PT1lW1N5bWJvbC50b1N0cmluZ1RhZ10pJiYoZT1lLmRlZmF1bHQpLG8oZSk/dC5leHRlbmQoZSk6ZX1mdW5jdGlvbiBVdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJmUuYXN5bmNGYWN0b3J5fWZ1bmN0aW9uIHp0KGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07aWYobihyKSYmKG4oci5jb21wb25lbnRPcHRpb25zKXx8VXQocikpKXJldHVybiByfX1mdW5jdGlvbiBWdChlLHQpe1J0LiRvbihlLHQpfWZ1bmN0aW9uIEt0KGUsdCl7UnQuJG9mZihlLHQpfWZ1bmN0aW9uIEp0KGUsdCl7dmFyIG49UnQ7cmV0dXJuIGZ1bmN0aW9uIHIoKXtudWxsIT09dC5hcHBseShudWxsLGFyZ3VtZW50cykmJm4uJG9mZihlLHIpfX1mdW5jdGlvbiBxdChlLHQsbil7UnQ9ZSxydCh0LG58fHt9LFZ0LEt0LEp0LGUpLFJ0PXZvaWQgMH12YXIgV3Q9bnVsbDtmdW5jdGlvbiBadChlKXt2YXIgdD1XdDtyZXR1cm4gV3Q9ZSxmdW5jdGlvbigpe1d0PXR9fWZ1bmN0aW9uIEd0KGUpe2Zvcig7ZSYmKGU9ZS4kcGFyZW50KTspaWYoZS5faW5hY3RpdmUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gWHQoZSx0KXtpZih0KXtpZihlLl9kaXJlY3RJbmFjdGl2ZT0hMSxHdChlKSlyZXR1cm59ZWxzZSBpZihlLl9kaXJlY3RJbmFjdGl2ZSlyZXR1cm47aWYoZS5faW5hY3RpdmV8fG51bGw9PT1lLl9pbmFjdGl2ZSl7ZS5faW5hY3RpdmU9ITE7Zm9yKHZhciBuPTA7bjxlLiRjaGlsZHJlbi5sZW5ndGg7bisrKVh0KGUuJGNoaWxkcmVuW25dKTtZdChlLCJhY3RpdmF0ZWQiKX19ZnVuY3Rpb24gWXQoZSx0KXtsZSgpO3ZhciBuPWUuJG9wdGlvbnNbdF0scj10KyIgaG9vayI7aWYobilmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspSGUobltpXSxlLG51bGwsZSxyKTtlLl9oYXNIb29rRXZlbnQmJmUuJGVtaXQoImhvb2s6Iit0KSxmZSgpfXZhciBRdD1bXSxlbj1bXSx0bj17fSxubj0hMSxybj0hMSxvbj0wO3ZhciBhbj0wLHNuPURhdGUubm93O2lmKHomJiFxKXt2YXIgY249d2luZG93LnBlcmZvcm1hbmNlO2NuJiYiZnVuY3Rpb24iPT10eXBlb2YgY24ubm93JiZzbigpPmRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLnRpbWVTdGFtcCYmKHNuPWZ1bmN0aW9uKCl7cmV0dXJuIGNuLm5vdygpfSl9ZnVuY3Rpb24gdW4oKXt2YXIgZSx0O2Zvcihhbj1zbigpLHJuPSEwLFF0LnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5pZC10LmlkfSksb249MDtvbjxRdC5sZW5ndGg7b24rKykoZT1RdFtvbl0pLmJlZm9yZSYmZS5iZWZvcmUoKSx0PWUuaWQsdG5bdF09bnVsbCxlLnJ1bigpO3ZhciBuPWVuLnNsaWNlKCkscj1RdC5zbGljZSgpO29uPVF0Lmxlbmd0aD1lbi5sZW5ndGg9MCx0bj17fSxubj1ybj0hMSxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdLl9pbmFjdGl2ZT0hMCxYdChlW3RdLCEwKX0obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7Zm9yKDt0LS07KXt2YXIgbj1lW3RdLHI9bi52bTtyLl93YXRjaGVyPT09biYmci5faXNNb3VudGVkJiYhci5faXNEZXN0cm95ZWQmJll0KHIsInVwZGF0ZWQiKX19KHIpLG5lJiZGLmRldnRvb2xzJiZuZS5lbWl0KCJmbHVzaCIpfXZhciBsbj0wLGZuPWZ1bmN0aW9uKGUsdCxuLHIsaSl7dGhpcy52bT1lLGkmJihlLl93YXRjaGVyPXRoaXMpLGUuX3dhdGNoZXJzLnB1c2godGhpcykscj8odGhpcy5kZWVwPSEhci5kZWVwLHRoaXMudXNlcj0hIXIudXNlcix0aGlzLmxhenk9ISFyLmxhenksdGhpcy5zeW5jPSEhci5zeW5jLHRoaXMuYmVmb3JlPXIuYmVmb3JlKTp0aGlzLmRlZXA9dGhpcy51c2VyPXRoaXMubGF6eT10aGlzLnN5bmM9ITEsdGhpcy5jYj1uLHRoaXMuaWQ9Kytsbix0aGlzLmFjdGl2ZT0hMCx0aGlzLmRpcnR5PXRoaXMubGF6eSx0aGlzLmRlcHM9W10sdGhpcy5uZXdEZXBzPVtdLHRoaXMuZGVwSWRzPW5ldyBpZSx0aGlzLm5ld0RlcElkcz1uZXcgaWUsdGhpcy5leHByZXNzaW9uPSIiLCJmdW5jdGlvbiI9PXR5cGVvZiB0P3RoaXMuZ2V0dGVyPXQ6KHRoaXMuZ2V0dGVyPWZ1bmN0aW9uKGUpe2lmKCFILnRlc3QoZSkpe3ZhciB0PWUuc3BsaXQoIi4iKTtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe2lmKCFlKXJldHVybjtlPWVbdFtuXV19cmV0dXJuIGV9fX0odCksdGhpcy5nZXR0ZXJ8fCh0aGlzLmdldHRlcj1TKSksdGhpcy52YWx1ZT10aGlzLmxhenk/dm9pZCAwOnRoaXMuZ2V0KCl9O2ZuLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgZTtsZSh0aGlzKTt2YXIgdD10aGlzLnZtO3RyeXtlPXRoaXMuZ2V0dGVyLmNhbGwodCx0KX1jYXRjaChlKXtpZighdGhpcy51c2VyKXRocm93IGU7UmUoZSx0LCdnZXR0ZXIgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZmluYWxseXt0aGlzLmRlZXAmJmV0KGUpLGZlKCksdGhpcy5jbGVhbnVwRGVwcygpfXJldHVybiBlfSxmbi5wcm90b3R5cGUuYWRkRGVwPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaWQ7dGhpcy5uZXdEZXBJZHMuaGFzKHQpfHwodGhpcy5uZXdEZXBJZHMuYWRkKHQpLHRoaXMubmV3RGVwcy5wdXNoKGUpLHRoaXMuZGVwSWRzLmhhcyh0KXx8ZS5hZGRTdWIodGhpcykpfSxmbi5wcm90b3R5cGUuY2xlYW51cERlcHM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5kZXBzLmxlbmd0aDtlLS07KXt2YXIgdD10aGlzLmRlcHNbZV07dGhpcy5uZXdEZXBJZHMuaGFzKHQuaWQpfHx0LnJlbW92ZVN1Yih0aGlzKX12YXIgbj10aGlzLmRlcElkczt0aGlzLmRlcElkcz10aGlzLm5ld0RlcElkcyx0aGlzLm5ld0RlcElkcz1uLHRoaXMubmV3RGVwSWRzLmNsZWFyKCksbj10aGlzLmRlcHMsdGhpcy5kZXBzPXRoaXMubmV3RGVwcyx0aGlzLm5ld0RlcHM9bix0aGlzLm5ld0RlcHMubGVuZ3RoPTB9LGZuLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmxhenk/dGhpcy5kaXJ0eT0hMDp0aGlzLnN5bmM/dGhpcy5ydW4oKTpmdW5jdGlvbihlKXt2YXIgdD1lLmlkO2lmKG51bGw9PXRuW3RdKXtpZih0blt0XT0hMCxybil7Zm9yKHZhciBuPVF0Lmxlbmd0aC0xO24+b24mJlF0W25dLmlkPmUuaWQ7KW4tLTtRdC5zcGxpY2UobisxLDAsZSl9ZWxzZSBRdC5wdXNoKGUpO25ufHwobm49ITAsWWUodW4pKX19KHRoaXMpfSxmbi5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpe3ZhciBlPXRoaXMuZ2V0KCk7aWYoZSE9PXRoaXMudmFsdWV8fG8oZSl8fHRoaXMuZGVlcCl7dmFyIHQ9dGhpcy52YWx1ZTtpZih0aGlzLnZhbHVlPWUsdGhpcy51c2VyKXRyeXt0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfWNhdGNoKGUpe1JlKGUsdGhpcy52bSwnY2FsbGJhY2sgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZWxzZSB0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfX19LGZuLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbigpe3RoaXMudmFsdWU9dGhpcy5nZXQoKSx0aGlzLmRpcnR5PSExfSxmbi5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuZGVwcy5sZW5ndGg7ZS0tOyl0aGlzLmRlcHNbZV0uZGVwZW5kKCl9LGZuLnByb3RvdHlwZS50ZWFyZG93bj1mdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZlKXt0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkfHxoKHRoaXMudm0uX3dhdGNoZXJzLHRoaXMpO2Zvcih2YXIgZT10aGlzLmRlcHMubGVuZ3RoO2UtLTspdGhpcy5kZXBzW2VdLnJlbW92ZVN1Yih0aGlzKTt0aGlzLmFjdGl2ZT0hMX19O3ZhciBwbj17ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0OlMsc2V0OlN9O2Z1bmN0aW9uIGRuKGUsdCxuKXtwbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1t0XVtuXX0scG4uc2V0PWZ1bmN0aW9uKGUpe3RoaXNbdF1bbl09ZX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbixwbil9ZnVuY3Rpb24gdm4oZSl7ZS5fd2F0Y2hlcnM9W107dmFyIHQ9ZS4kb3B0aW9uczt0LnByb3BzJiZmdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnMucHJvcHNEYXRhfHx7fSxyPWUuX3Byb3BzPXt9LGk9ZS4kb3B0aW9ucy5fcHJvcEtleXM9W107ZS4kcGFyZW50JiYkZSghMSk7dmFyIG89ZnVuY3Rpb24obyl7aS5wdXNoKG8pO3ZhciBhPU1lKG8sdCxuLGUpO3hlKHIsbyxhKSxvIGluIGV8fGRuKGUsIl9wcm9wcyIsbyl9O2Zvcih2YXIgYSBpbiB0KW8oYSk7JGUoITApfShlLHQucHJvcHMpLHQubWV0aG9kcyYmZnVuY3Rpb24oZSx0KXtlLiRvcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWVbbl09ImZ1bmN0aW9uIiE9dHlwZW9mIHRbbl0/Uzp4KHRbbl0sZSl9KGUsdC5tZXRob2RzKSx0LmRhdGE/ZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5kYXRhO3ModD1lLl9kYXRhPSJmdW5jdGlvbiI9PXR5cGVvZiB0P2Z1bmN0aW9uKGUsdCl7bGUoKTt0cnl7cmV0dXJuIGUuY2FsbCh0LHQpfWNhdGNoKGUpe3JldHVybiBSZShlLHQsImRhdGEoKSIpLHt9fWZpbmFsbHl7ZmUoKX19KHQsZSk6dHx8e30pfHwodD17fSk7dmFyIG49T2JqZWN0LmtleXModCkscj1lLiRvcHRpb25zLnByb3BzLGk9KGUuJG9wdGlvbnMubWV0aG9kcyxuLmxlbmd0aCk7Zm9yKDtpLS07KXt2YXIgbz1uW2ldO3ImJnkocixvKXx8KGE9dm9pZCAwLDM2IT09KGE9KG8rIiIpLmNoYXJDb2RlQXQoMCkpJiY5NSE9PWEmJmRuKGUsIl9kYXRhIixvKSl9dmFyIGE7Q2UodCwhMCl9KGUpOkNlKGUuX2RhdGE9e30sITApLHQuY29tcHV0ZWQmJmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5fY29tcHV0ZWRXYXRjaGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGUoKTtmb3IodmFyIGkgaW4gdCl7dmFyIG89dFtpXSxhPSJmdW5jdGlvbiI9PXR5cGVvZiBvP286by5nZXQ7cnx8KG5baV09bmV3IGZuKGUsYXx8UyxTLGhuKSksaSBpbiBlfHxtbihlLGksbyl9fShlLHQuY29tcHV0ZWQpLHQud2F0Y2gmJnQud2F0Y2ghPT1ZJiZmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dO2lmKEFycmF5LmlzQXJyYXkocikpZm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspX24oZSxuLHJbaV0pO2Vsc2UgX24oZSxuLHIpfX0oZSx0LndhdGNoKX12YXIgaG49e2xhenk6ITB9O2Z1bmN0aW9uIG1uKGUsdCxuKXt2YXIgcj0hdGUoKTsiZnVuY3Rpb24iPT10eXBlb2Ygbj8ocG4uZ2V0PXI/eW4odCk6Z24obikscG4uc2V0PVMpOihwbi5nZXQ9bi5nZXQ/ciYmITEhPT1uLmNhY2hlP3luKHQpOmduKG4uZ2V0KTpTLHBuLnNldD1uLnNldHx8UyksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxwbil9ZnVuY3Rpb24geW4oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY29tcHV0ZWRXYXRjaGVycyYmdGhpcy5fY29tcHV0ZWRXYXRjaGVyc1tlXTtpZih0KXJldHVybiB0LmRpcnR5JiZ0LmV2YWx1YXRlKCksY2UudGFyZ2V0JiZ0LmRlcGVuZCgpLHQudmFsdWV9fWZ1bmN0aW9uIGduKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyx0aGlzKX19ZnVuY3Rpb24gX24oZSx0LG4scil7cmV0dXJuIHMobikmJihyPW4sbj1uLmhhbmRsZXIpLCJzdHJpbmciPT10eXBlb2YgbiYmKG49ZVtuXSksZS4kd2F0Y2godCxuLHIpfXZhciBibj0wO2Z1bmN0aW9uICRuKGUpe3ZhciB0PWUub3B0aW9ucztpZihlLnN1cGVyKXt2YXIgbj0kbihlLnN1cGVyKTtpZihuIT09ZS5zdXBlck9wdGlvbnMpe2Uuc3VwZXJPcHRpb25zPW47dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLm9wdGlvbnMscj1lLnNlYWxlZE9wdGlvbnM7Zm9yKHZhciBpIGluIG4pbltpXSE9PXJbaV0mJih0fHwodD17fSksdFtpXT1uW2ldKTtyZXR1cm4gdH0oZSk7ciYmQShlLmV4dGVuZE9wdGlvbnMsciksKHQ9ZS5vcHRpb25zPURlKG4sZS5leHRlbmRPcHRpb25zKSkubmFtZSYmKHQuY29tcG9uZW50c1t0Lm5hbWVdPWUpfX1yZXR1cm4gdH1mdW5jdGlvbiB3bihlKXt0aGlzLl9pbml0KGUpfWZ1bmN0aW9uIENuKGUpe2UuY2lkPTA7dmFyIHQ9MTtlLmV4dGVuZD1mdW5jdGlvbihlKXtlPWV8fHt9O3ZhciBuPXRoaXMscj1uLmNpZCxpPWUuX0N0b3J8fChlLl9DdG9yPXt9KTtpZihpW3JdKXJldHVybiBpW3JdO3ZhciBvPWUubmFtZXx8bi5vcHRpb25zLm5hbWUsYT1mdW5jdGlvbihlKXt0aGlzLl9pbml0KGUpfTtyZXR1cm4oYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWEsYS5jaWQ9dCsrLGEub3B0aW9ucz1EZShuLm9wdGlvbnMsZSksYS5zdXBlcj1uLGEub3B0aW9ucy5wcm9wcyYmZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWRuKGUucHJvdG90eXBlLCJfcHJvcHMiLG4pfShhKSxhLm9wdGlvbnMuY29tcHV0ZWQmJmZ1bmN0aW9uKGUpe3ZhciB0PWUub3B0aW9ucy5jb21wdXRlZDtmb3IodmFyIG4gaW4gdCltbihlLnByb3RvdHlwZSxuLHRbbl0pfShhKSxhLmV4dGVuZD1uLmV4dGVuZCxhLm1peGluPW4ubWl4aW4sYS51c2U9bi51c2UsTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2FbZV09bltlXX0pLG8mJihhLm9wdGlvbnMuY29tcG9uZW50c1tvXT1hKSxhLnN1cGVyT3B0aW9ucz1uLm9wdGlvbnMsYS5leHRlbmRPcHRpb25zPWUsYS5zZWFsZWRPcHRpb25zPUEoe30sYS5vcHRpb25zKSxpW3JdPWEsYX19ZnVuY3Rpb24geG4oZSl7cmV0dXJuIGUmJihlLkN0b3Iub3B0aW9ucy5uYW1lfHxlLnRhZyl9ZnVuY3Rpb24ga24oZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lLmluZGV4T2YodCk+LTE6InN0cmluZyI9PXR5cGVvZiBlP2Uuc3BsaXQoIiwiKS5pbmRleE9mKHQpPi0xOihuPWUsIltvYmplY3QgUmVnRXhwXSI9PT1hLmNhbGwobikmJmUudGVzdCh0KSk7dmFyIG59ZnVuY3Rpb24gQW4oZSx0KXt2YXIgbj1lLmNhY2hlLHI9ZS5rZXlzLGk9ZS5fdm5vZGU7Zm9yKHZhciBvIGluIG4pe3ZhciBhPW5bb107aWYoYSl7dmFyIHM9eG4oYS5jb21wb25lbnRPcHRpb25zKTtzJiYhdChzKSYmT24obixvLHIsaSl9fX1mdW5jdGlvbiBPbihlLHQsbixyKXt2YXIgaT1lW3RdOyFpfHxyJiZpLnRhZz09PXIudGFnfHxpLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCksZVt0XT1udWxsLGgobix0KX0hZnVuY3Rpb24odCl7dC5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcztuLl91aWQ9Ym4rKyxuLl9pc1Z1ZT0hMCx0JiZ0Ll9pc0NvbXBvbmVudD9mdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLmNvbnN0cnVjdG9yLm9wdGlvbnMpLHI9dC5fcGFyZW50Vm5vZGU7bi5wYXJlbnQ9dC5wYXJlbnQsbi5fcGFyZW50Vm5vZGU9cjt2YXIgaT1yLmNvbXBvbmVudE9wdGlvbnM7bi5wcm9wc0RhdGE9aS5wcm9wc0RhdGEsbi5fcGFyZW50TGlzdGVuZXJzPWkubGlzdGVuZXJzLG4uX3JlbmRlckNoaWxkcmVuPWkuY2hpbGRyZW4sbi5fY29tcG9uZW50VGFnPWkudGFnLHQucmVuZGVyJiYobi5yZW5kZXI9dC5yZW5kZXIsbi5zdGF0aWNSZW5kZXJGbnM9dC5zdGF0aWNSZW5kZXJGbnMpfShuLHQpOm4uJG9wdGlvbnM9RGUoJG4obi5jb25zdHJ1Y3RvciksdHx8e30sbiksbi5fcmVuZGVyUHJveHk9bixuLl9zZWxmPW4sZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucyxuPXQucGFyZW50O2lmKG4mJiF0LmFic3RyYWN0KXtmb3IoO24uJG9wdGlvbnMuYWJzdHJhY3QmJm4uJHBhcmVudDspbj1uLiRwYXJlbnQ7bi4kY2hpbGRyZW4ucHVzaChlKX1lLiRwYXJlbnQ9bixlLiRyb290PW4/bi4kcm9vdDplLGUuJGNoaWxkcmVuPVtdLGUuJHJlZnM9e30sZS5fd2F0Y2hlcj1udWxsLGUuX2luYWN0aXZlPW51bGwsZS5fZGlyZWN0SW5hY3RpdmU9ITEsZS5faXNNb3VudGVkPSExLGUuX2lzRGVzdHJveWVkPSExLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITF9KG4pLGZ1bmN0aW9uKGUpe2UuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLGUuX2hhc0hvb2tFdmVudD0hMTt2YXIgdD1lLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7dCYmcXQoZSx0KX0obiksZnVuY3Rpb24odCl7dC5fdm5vZGU9bnVsbCx0Ll9zdGF0aWNUcmVlcz1udWxsO3ZhciBuPXQuJG9wdGlvbnMscj10LiR2bm9kZT1uLl9wYXJlbnRWbm9kZSxpPXImJnIuY29udGV4dDt0LiRzbG90cz11dChuLl9yZW5kZXJDaGlsZHJlbixpKSx0LiRzY29wZWRTbG90cz1lLHQuX2M9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMSl9LHQuJGNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMCl9O3ZhciBvPXImJnIuZGF0YTt4ZSh0LCIkYXR0cnMiLG8mJm8uYXR0cnN8fGUsbnVsbCwhMCkseGUodCwiJGxpc3RlbmVycyIsbi5fcGFyZW50TGlzdGVuZXJzfHxlLG51bGwsITApfShuKSxZdChuLCJiZWZvcmVDcmVhdGUiKSxmdW5jdGlvbihlKXt2YXIgdD1jdChlLiRvcHRpb25zLmluamVjdCxlKTt0JiYoJGUoITEpLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7eGUoZSxuLHRbbl0pfSksJGUoITApKX0obiksdm4obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5wcm92aWRlO3QmJihlLl9wcm92aWRlZD0iZnVuY3Rpb24iPT10eXBlb2YgdD90LmNhbGwoZSk6dCl9KG4pLFl0KG4sImNyZWF0ZWQiKSxuLiRvcHRpb25zLmVsJiZuLiRtb3VudChuLiRvcHRpb25zLmVsKX19KHduKSxmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fSxuPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcHN9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRkYXRhIix0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRwcm9wcyIsbiksZS5wcm90b3R5cGUuJHNldD1rZSxlLnByb3RvdHlwZS4kZGVsZXRlPUFlLGUucHJvdG90eXBlLiR3YXRjaD1mdW5jdGlvbihlLHQsbil7aWYocyh0KSlyZXR1cm4gX24odGhpcyxlLHQsbik7KG49bnx8e30pLnVzZXI9ITA7dmFyIHI9bmV3IGZuKHRoaXMsZSx0LG4pO2lmKG4uaW1tZWRpYXRlKXRyeXt0LmNhbGwodGhpcyxyLnZhbHVlKX1jYXRjaChlKXtSZShlLHRoaXMsJ2NhbGxiYWNrIGZvciBpbW1lZGlhdGUgd2F0Y2hlciAiJytyLmV4cHJlc3Npb24rJyInKX1yZXR1cm4gZnVuY3Rpb24oKXtyLnRlYXJkb3duKCl9fX0od24pLGZ1bmN0aW9uKGUpe3ZhciB0PS9eaG9vazovO2UucHJvdG90eXBlLiRvbj1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXM7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIGk9MCxvPWUubGVuZ3RoO2k8bztpKyspci4kb24oZVtpXSxuKTtlbHNlKHIuX2V2ZW50c1tlXXx8KHIuX2V2ZW50c1tlXT1bXSkpLnB1c2gobiksdC50ZXN0KGUpJiYoci5faGFzSG9va0V2ZW50PSEwKTtyZXR1cm4gcn0sZS5wcm90b3R5cGUuJG9uY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2Z1bmN0aW9uIHIoKXtuLiRvZmYoZSxyKSx0LmFwcGx5KG4sYXJndW1lbnRzKX1yZXR1cm4gci5mbj10LG4uJG9uKGUsciksbn0sZS5wcm90b3R5cGUuJG9mZj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG4uX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLG47aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciByPTAsaT1lLmxlbmd0aDtyPGk7cisrKW4uJG9mZihlW3JdLHQpO3JldHVybiBufXZhciBvLGE9bi5fZXZlbnRzW2VdO2lmKCFhKXJldHVybiBuO2lmKCF0KXJldHVybiBuLl9ldmVudHNbZV09bnVsbCxuO2Zvcih2YXIgcz1hLmxlbmd0aDtzLS07KWlmKChvPWFbc10pPT09dHx8by5mbj09PXQpe2Euc3BsaWNlKHMsMSk7YnJlYWt9cmV0dXJuIG59LGUucHJvdG90eXBlLiRlbWl0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2V2ZW50c1tlXTtpZih0KXt0PXQubGVuZ3RoPjE/ayh0KTp0O2Zvcih2YXIgbj1rKGFyZ3VtZW50cywxKSxyPSdldmVudCBoYW5kbGVyIGZvciAiJytlKyciJyxpPTAsbz10Lmxlbmd0aDtpPG87aSsrKUhlKHRbaV0sdGhpcyxuLHRoaXMscil9cmV0dXJuIHRoaXN9fSh3biksZnVuY3Rpb24oZSl7ZS5wcm90b3R5cGUuX3VwZGF0ZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMscj1uLiRlbCxpPW4uX3Zub2RlLG89WnQobik7bi5fdm5vZGU9ZSxuLiRlbD1pP24uX19wYXRjaF9fKGksZSk6bi5fX3BhdGNoX18obi4kZWwsZSx0LCExKSxvKCksciYmKHIuX192dWVfXz1udWxsKSxuLiRlbCYmKG4uJGVsLl9fdnVlX189biksbi4kdm5vZGUmJm4uJHBhcmVudCYmbi4kdm5vZGU9PT1uLiRwYXJlbnQuX3Zub2RlJiYobi4kcGFyZW50LiRlbD1uLiRlbCl9LGUucHJvdG90eXBlLiRmb3JjZVVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXImJnRoaXMuX3dhdGNoZXIudXBkYXRlKCl9LGUucHJvdG90eXBlLiRkZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighZS5faXNCZWluZ0Rlc3Ryb3llZCl7WXQoZSwiYmVmb3JlRGVzdHJveSIpLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITA7dmFyIHQ9ZS4kcGFyZW50OyF0fHx0Ll9pc0JlaW5nRGVzdHJveWVkfHxlLiRvcHRpb25zLmFic3RyYWN0fHxoKHQuJGNoaWxkcmVuLGUpLGUuX3dhdGNoZXImJmUuX3dhdGNoZXIudGVhcmRvd24oKTtmb3IodmFyIG49ZS5fd2F0Y2hlcnMubGVuZ3RoO24tLTspZS5fd2F0Y2hlcnNbbl0udGVhcmRvd24oKTtlLl9kYXRhLl9fb2JfXyYmZS5fZGF0YS5fX29iX18udm1Db3VudC0tLGUuX2lzRGVzdHJveWVkPSEwLGUuX19wYXRjaF9fKGUuX3Zub2RlLG51bGwpLFl0KGUsImRlc3Ryb3llZCIpLGUuJG9mZigpLGUuJGVsJiYoZS4kZWwuX192dWVfXz1udWxsKSxlLiR2bm9kZSYmKGUuJHZub2RlLnBhcmVudD1udWxsKX19fSh3biksZnVuY3Rpb24oZSl7U3QoZS5wcm90b3R5cGUpLGUucHJvdG90eXBlLiRuZXh0VGljaz1mdW5jdGlvbihlKXtyZXR1cm4gWWUoZSx0aGlzKX0sZS5wcm90b3R5cGUuX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuJG9wdGlvbnMscj1uLnJlbmRlcixpPW4uX3BhcmVudFZub2RlO2kmJih0LiRzY29wZWRTbG90cz1mdChpLmRhdGEuc2NvcGVkU2xvdHMsdC4kc2xvdHMsdC4kc2NvcGVkU2xvdHMpKSx0LiR2bm9kZT1pO3RyeXtIdD10LGU9ci5jYWxsKHQuX3JlbmRlclByb3h5LHQuJGNyZWF0ZUVsZW1lbnQpfWNhdGNoKG4pe1JlKG4sdCwicmVuZGVyIiksZT10Ll92bm9kZX1maW5hbGx5e0h0PW51bGx9cmV0dXJuIEFycmF5LmlzQXJyYXkoZSkmJjE9PT1lLmxlbmd0aCYmKGU9ZVswXSksZSBpbnN0YW5jZW9mIHBlfHwoZT12ZSgpKSxlLnBhcmVudD1pLGV9fSh3bik7dmFyIFNuPVtTdHJpbmcsUmVnRXhwLEFycmF5XSxUbj17S2VlcEFsaXZlOntuYW1lOiJrZWVwLWFsaXZlIixhYnN0cmFjdDohMCxwcm9wczp7aW5jbHVkZTpTbixleGNsdWRlOlNuLG1heDpbU3RyaW5nLE51bWJlcl19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5rZXlzPVtdfSxkZXN0cm95ZWQ6ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gdGhpcy5jYWNoZSlPbih0aGlzLmNhY2hlLGUsdGhpcy5rZXlzKX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy4kd2F0Y2goImluY2x1ZGUiLGZ1bmN0aW9uKHQpe0FuKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGtuKHQsZSl9KX0pLHRoaXMuJHdhdGNoKCJleGNsdWRlIixmdW5jdGlvbih0KXtBbihlLGZ1bmN0aW9uKGUpe3JldHVybiFrbih0LGUpfSl9KX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kc2xvdHMuZGVmYXVsdCx0PXp0KGUpLG49dCYmdC5jb21wb25lbnRPcHRpb25zO2lmKG4pe3ZhciByPXhuKG4pLGk9dGhpcy5pbmNsdWRlLG89dGhpcy5leGNsdWRlO2lmKGkmJighcnx8IWtuKGkscikpfHxvJiZyJiZrbihvLHIpKXJldHVybiB0O3ZhciBhPXRoaXMuY2FjaGUscz10aGlzLmtleXMsYz1udWxsPT10LmtleT9uLkN0b3IuY2lkKyhuLnRhZz8iOjoiK24udGFnOiIiKTp0LmtleTthW2NdPyh0LmNvbXBvbmVudEluc3RhbmNlPWFbY10uY29tcG9uZW50SW5zdGFuY2UsaChzLGMpLHMucHVzaChjKSk6KGFbY109dCxzLnB1c2goYyksdGhpcy5tYXgmJnMubGVuZ3RoPnBhcnNlSW50KHRoaXMubWF4KSYmT24oYSxzWzBdLHMsdGhpcy5fdm5vZGUpKSx0LmRhdGEua2VlcEFsaXZlPSEwfXJldHVybiB0fHxlJiZlWzBdfX19OyFmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEZ9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiY29uZmlnIix0KSxlLnV0aWw9e3dhcm46YWUsZXh0ZW5kOkEsbWVyZ2VPcHRpb25zOkRlLGRlZmluZVJlYWN0aXZlOnhlfSxlLnNldD1rZSxlLmRlbGV0ZT1BZSxlLm5leHRUaWNrPVllLGUub2JzZXJ2YWJsZT1mdW5jdGlvbihlKXtyZXR1cm4gQ2UoZSksZX0sZS5vcHRpb25zPU9iamVjdC5jcmVhdGUobnVsbCksTS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Uub3B0aW9uc1t0KyJzIl09T2JqZWN0LmNyZWF0ZShudWxsKX0pLGUub3B0aW9ucy5fYmFzZT1lLEEoZS5vcHRpb25zLmNvbXBvbmVudHMsVG4pLGZ1bmN0aW9uKGUpe2UudXNlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2luc3RhbGxlZFBsdWdpbnN8fCh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zPVtdKTtpZih0LmluZGV4T2YoZSk+LTEpcmV0dXJuIHRoaXM7dmFyIG49ayhhcmd1bWVudHMsMSk7cmV0dXJuIG4udW5zaGlmdCh0aGlzKSwiZnVuY3Rpb24iPT10eXBlb2YgZS5pbnN0YWxsP2UuaW5zdGFsbC5hcHBseShlLG4pOiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmFwcGx5KG51bGwsbiksdC5wdXNoKGUpLHRoaXN9fShlKSxmdW5jdGlvbihlKXtlLm1peGluPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnM9RGUodGhpcy5vcHRpb25zLGUpLHRoaXN9fShlKSxDbihlKSxmdW5jdGlvbihlKXtNLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBuPygiY29tcG9uZW50Ij09PXQmJnMobikmJihuLm5hbWU9bi5uYW1lfHxlLG49dGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChuKSksImRpcmVjdGl2ZSI9PT10JiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmKG49e2JpbmQ6bix1cGRhdGU6bn0pLHRoaXMub3B0aW9uc1t0KyJzIl1bZV09bixuKTp0aGlzLm9wdGlvbnNbdCsicyJdW2VdfX0pfShlKX0od24pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRpc1NlcnZlciIse2dldDp0ZX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRzc3JDb250ZXh0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHZub2RlJiZ0aGlzLiR2bm9kZS5zc3JDb250ZXh0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3biwiRnVuY3Rpb25hbFJlbmRlckNvbnRleHQiLHt2YWx1ZTpUdH0pLHduLnZlcnNpb249IjIuNi4xMiI7dmFyIEVuPXAoInN0eWxlLGNsYXNzIiksTm49cCgiaW5wdXQsdGV4dGFyZWEsb3B0aW9uLHNlbGVjdCxwcm9ncmVzcyIpLGpuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4idmFsdWUiPT09biYmTm4oZSkmJiJidXR0b24iIT09dHx8InNlbGVjdGVkIj09PW4mJiJvcHRpb24iPT09ZXx8ImNoZWNrZWQiPT09biYmImlucHV0Ij09PWV8fCJtdXRlZCI9PT1uJiYidmlkZW8iPT09ZX0sRG49cCgiY29udGVudGVkaXRhYmxlLGRyYWdnYWJsZSxzcGVsbGNoZWNrIiksTG49cCgiZXZlbnRzLGNhcmV0LHR5cGluZyxwbGFpbnRleHQtb25seSIpLE1uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEhuKHQpfHwiZmFsc2UiPT09dD8iZmFsc2UiOiJjb250ZW50ZWRpdGFibGUiPT09ZSYmTG4odCk/dDoidHJ1ZSJ9LEluPXAoImFsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLGVuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSxyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLHRydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUiKSxGbj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsUG49ZnVuY3Rpb24oZSl7cmV0dXJuIjoiPT09ZS5jaGFyQXQoNSkmJiJ4bGluayI9PT1lLnNsaWNlKDAsNSl9LFJuPWZ1bmN0aW9uKGUpe3JldHVybiBQbihlKT9lLnNsaWNlKDYsZS5sZW5ndGgpOiIifSxIbj1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZXx8ITE9PT1lfTtmdW5jdGlvbiBCbihlKXtmb3IodmFyIHQ9ZS5kYXRhLHI9ZSxpPWU7bihpLmNvbXBvbmVudEluc3RhbmNlKTspKGk9aS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpJiZpLmRhdGEmJih0PVVuKGkuZGF0YSx0KSk7Zm9yKDtuKHI9ci5wYXJlbnQpOylyJiZyLmRhdGEmJih0PVVuKHQsci5kYXRhKSk7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYobihlKXx8bih0KSlyZXR1cm4gem4oZSxWbih0KSk7cmV0dXJuIiJ9KHQuc3RhdGljQ2xhc3MsdC5jbGFzcyl9ZnVuY3Rpb24gVW4oZSx0KXtyZXR1cm57c3RhdGljQ2xhc3M6em4oZS5zdGF0aWNDbGFzcyx0LnN0YXRpY0NsYXNzKSxjbGFzczpuKGUuY2xhc3MpP1tlLmNsYXNzLHQuY2xhc3NdOnQuY2xhc3N9fWZ1bmN0aW9uIHpuKGUsdCl7cmV0dXJuIGU/dD9lKyIgIit0OmU6dHx8IiJ9ZnVuY3Rpb24gVm4oZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9IiIsaT0wLG89ZS5sZW5ndGg7aTxvO2krKyluKHQ9Vm4oZVtpXSkpJiYiIiE9PXQmJihyJiYocis9IiAiKSxyKz10KTtyZXR1cm4gcn0oZSk6byhlKT9mdW5jdGlvbihlKXt2YXIgdD0iIjtmb3IodmFyIG4gaW4gZSllW25dJiYodCYmKHQrPSIgIiksdCs9bik7cmV0dXJuIHR9KGUpOiJzdHJpbmciPT10eXBlb2YgZT9lOiIifXZhciBLbj17c3ZnOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsbWF0aDoiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCJ9LEpuPXAoImh0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGgxLGgyLGgzLGg0LGg1LGg2LGhncm91cCxuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSxkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnRjLHJ1YnkscyxzYW1wLHNtYWxsLHNwYW4sc3Ryb25nLHN1YixzdXAsdGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSxjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsY2FwdGlvbixjb2wsY29sZ3JvdXAsdGFibGUsdGhlYWQsdGJvZHksdGQsdGgsdHIsYnV0dG9uLGRhdGFsaXN0LGZpZWxkc2V0LGZvcm0saW5wdXQsbGFiZWwsbGVnZW5kLG1ldGVyLG9wdGdyb3VwLG9wdGlvbixvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLGRldGFpbHMsZGlhbG9nLG1lbnUsbWVudWl0ZW0sc3VtbWFyeSxjb250ZW50LGVsZW1lbnQsc2hhZG93LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290IikscW49cCgic3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLGZvcmVpZ25PYmplY3QsZyxnbHlwaCxpbWFnZSxsaW5lLG1hcmtlcixtYXNrLG1pc3NpbmctZ2x5cGgscGF0aCxwYXR0ZXJuLHBvbHlnb24scG9seWxpbmUscmVjdCxzd2l0Y2gsc3ltYm9sLHRleHQsdGV4dHBhdGgsdHNwYW4sdXNlLHZpZXciLCEwKSxXbj1mdW5jdGlvbihlKXtyZXR1cm4gSm4oZSl8fHFuKGUpfTtmdW5jdGlvbiBabihlKXtyZXR1cm4gcW4oZSk/InN2ZyI6Im1hdGgiPT09ZT8ibWF0aCI6dm9pZCAwfXZhciBHbj1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBYbj1wKCJ0ZXh0LG51bWJlcixwYXNzd29yZCxzZWFyY2gsZW1haWwsdGVsLHVybCIpO2Z1bmN0aW9uIFluKGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSl7dmFyIHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKTtyZXR1cm4gdHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iil9cmV0dXJuIGV9dmFyIFFuPU9iamVjdC5mcmVlemUoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiJzZWxlY3QiIT09ZT9uOih0LmRhdGEmJnQuZGF0YS5hdHRycyYmdm9pZCAwIT09dC5kYXRhLmF0dHJzLm11bHRpcGxlJiZuLnNldEF0dHJpYnV0ZSgibXVsdGlwbGUiLCJtdWx0aXBsZSIpLG4pfSxjcmVhdGVFbGVtZW50TlM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKEtuW2VdLHQpfSxjcmVhdGVUZXh0Tm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSl9LGNyZWF0ZUNvbW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoZSl9LGluc2VydEJlZm9yZTpmdW5jdGlvbihlLHQsbil7ZS5pbnNlcnRCZWZvcmUodCxuKX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oZSx0KXtlLnJlbW92ZUNoaWxkKHQpfSxhcHBlbmRDaGlsZDpmdW5jdGlvbihlLHQpe2UuYXBwZW5kQ2hpbGQodCl9LHBhcmVudE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZX0sbmV4dFNpYmxpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubmV4dFNpYmxpbmd9LHRhZ05hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnTmFtZX0sc2V0VGV4dENvbnRlbnQ6ZnVuY3Rpb24oZSx0KXtlLnRleHRDb250ZW50PXR9LHNldFN0eWxlU2NvcGU6ZnVuY3Rpb24oZSx0KXtlLnNldEF0dHJpYnV0ZSh0LCIiKX19KSxlcj17Y3JlYXRlOmZ1bmN0aW9uKGUsdCl7dHIodCl9LHVwZGF0ZTpmdW5jdGlvbihlLHQpe2UuZGF0YS5yZWYhPT10LmRhdGEucmVmJiYodHIoZSwhMCksdHIodCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3RyKGUsITApfX07ZnVuY3Rpb24gdHIoZSx0KXt2YXIgcj1lLmRhdGEucmVmO2lmKG4ocikpe3ZhciBpPWUuY29udGV4dCxvPWUuY29tcG9uZW50SW5zdGFuY2V8fGUuZWxtLGE9aS4kcmVmczt0P0FycmF5LmlzQXJyYXkoYVtyXSk/aChhW3JdLG8pOmFbcl09PT1vJiYoYVtyXT12b2lkIDApOmUuZGF0YS5yZWZJbkZvcj9BcnJheS5pc0FycmF5KGFbcl0pP2Fbcl0uaW5kZXhPZihvKTwwJiZhW3JdLnB1c2gobyk6YVtyXT1bb106YVtyXT1vfX12YXIgbnI9bmV3IHBlKCIiLHt9LFtdKSxycj1bImNyZWF0ZSIsImFjdGl2YXRlIiwidXBkYXRlIiwicmVtb3ZlIiwiZGVzdHJveSJdO2Z1bmN0aW9uIGlyKGUsaSl7cmV0dXJuIGUua2V5PT09aS5rZXkmJihlLnRhZz09PWkudGFnJiZlLmlzQ29tbWVudD09PWkuaXNDb21tZW50JiZuKGUuZGF0YSk9PT1uKGkuZGF0YSkmJmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0IiE9PWUudGFnKXJldHVybiEwO3ZhciByLGk9bihyPWUuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlLG89bihyPXQuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlO3JldHVybiBpPT09b3x8WG4oaSkmJlhuKG8pfShlLGkpfHxyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSYmZS5hc3luY0ZhY3Rvcnk9PT1pLmFzeW5jRmFjdG9yeSYmdChpLmFzeW5jRmFjdG9yeS5lcnJvcikpfWZ1bmN0aW9uIG9yKGUsdCxyKXt2YXIgaSxvLGE9e307Zm9yKGk9dDtpPD1yOysraSluKG89ZVtpXS5rZXkpJiYoYVtvXT1pKTtyZXR1cm4gYX12YXIgYXI9e2NyZWF0ZTpzcix1cGRhdGU6c3IsZGVzdHJveTpmdW5jdGlvbihlKXtzcihlLG5yKX19O2Z1bmN0aW9uIHNyKGUsdCl7KGUuZGF0YS5kaXJlY3RpdmVzfHx0LmRhdGEuZGlyZWN0aXZlcykmJmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG89ZT09PW5yLGE9dD09PW5yLHM9dXIoZS5kYXRhLmRpcmVjdGl2ZXMsZS5jb250ZXh0KSxjPXVyKHQuZGF0YS5kaXJlY3RpdmVzLHQuY29udGV4dCksdT1bXSxsPVtdO2ZvcihuIGluIGMpcj1zW25dLGk9Y1tuXSxyPyhpLm9sZFZhbHVlPXIudmFsdWUsaS5vbGRBcmc9ci5hcmcsZnIoaSwidXBkYXRlIix0LGUpLGkuZGVmJiZpLmRlZi5jb21wb25lbnRVcGRhdGVkJiZsLnB1c2goaSkpOihmcihpLCJiaW5kIix0LGUpLGkuZGVmJiZpLmRlZi5pbnNlcnRlZCYmdS5wdXNoKGkpKTtpZih1Lmxlbmd0aCl7dmFyIGY9ZnVuY3Rpb24oKXtmb3IodmFyIG49MDtuPHUubGVuZ3RoO24rKylmcih1W25dLCJpbnNlcnRlZCIsdCxlKX07bz9pdCh0LCJpbnNlcnQiLGYpOmYoKX1sLmxlbmd0aCYmaXQodCwicG9zdHBhdGNoIixmdW5jdGlvbigpe2Zvcih2YXIgbj0wO248bC5sZW5ndGg7bisrKWZyKGxbbl0sImNvbXBvbmVudFVwZGF0ZWQiLHQsZSl9KTtpZighbylmb3IobiBpbiBzKWNbbl18fGZyKHNbbl0sInVuYmluZCIsZSxlLGEpfShlLHQpfXZhciBjcj1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIHVyKGUsdCl7dmFyIG4scixpPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoIWUpcmV0dXJuIGk7Zm9yKG49MDtuPGUubGVuZ3RoO24rKykocj1lW25dKS5tb2RpZmllcnN8fChyLm1vZGlmaWVycz1jciksaVtscihyKV09cixyLmRlZj1MZSh0LiRvcHRpb25zLCJkaXJlY3RpdmVzIixyLm5hbWUpO3JldHVybiBpfWZ1bmN0aW9uIGxyKGUpe3JldHVybiBlLnJhd05hbWV8fGUubmFtZSsiLiIrT2JqZWN0LmtleXMoZS5tb2RpZmllcnN8fHt9KS5qb2luKCIuIil9ZnVuY3Rpb24gZnIoZSx0LG4scixpKXt2YXIgbz1lLmRlZiYmZS5kZWZbdF07aWYobyl0cnl7byhuLmVsbSxlLG4scixpKX1jYXRjaChyKXtSZShyLG4uY29udGV4dCwiZGlyZWN0aXZlICIrZS5uYW1lKyIgIit0KyIgaG9vayIpfX12YXIgcHI9W2VyLGFyXTtmdW5jdGlvbiBkcihlLHIpe3ZhciBpPXIuY29tcG9uZW50T3B0aW9ucztpZighKG4oaSkmJiExPT09aS5DdG9yLm9wdGlvbnMuaW5oZXJpdEF0dHJzfHx0KGUuZGF0YS5hdHRycykmJnQoci5kYXRhLmF0dHJzKSkpe3ZhciBvLGEscz1yLmVsbSxjPWUuZGF0YS5hdHRyc3x8e30sdT1yLmRhdGEuYXR0cnN8fHt9O2ZvcihvIGluIG4odS5fX29iX18pJiYodT1yLmRhdGEuYXR0cnM9QSh7fSx1KSksdSlhPXVbb10sY1tvXSE9PWEmJnZyKHMsbyxhKTtmb3IobyBpbihxfHxaKSYmdS52YWx1ZSE9PWMudmFsdWUmJnZyKHMsInZhbHVlIix1LnZhbHVlKSxjKXQodVtvXSkmJihQbihvKT9zLnJlbW92ZUF0dHJpYnV0ZU5TKEZuLFJuKG8pKTpEbihvKXx8cy5yZW1vdmVBdHRyaWJ1dGUobykpfX1mdW5jdGlvbiB2cihlLHQsbil7ZS50YWdOYW1lLmluZGV4T2YoIi0iKT4tMT9ocihlLHQsbik6SW4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGUodCk6KG49ImFsbG93ZnVsbHNjcmVlbiI9PT10JiYiRU1CRUQiPT09ZS50YWdOYW1lPyJ0cnVlIjp0LGUuc2V0QXR0cmlidXRlKHQsbikpOkRuKHQpP2Uuc2V0QXR0cmlidXRlKHQsTW4odCxuKSk6UG4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGVOUyhGbixSbih0KSk6ZS5zZXRBdHRyaWJ1dGVOUyhGbix0LG4pOmhyKGUsdCxuKX1mdW5jdGlvbiBocihlLHQsbil7aWYoSG4obikpZS5yZW1vdmVBdHRyaWJ1dGUodCk7ZWxzZXtpZihxJiYhVyYmIlRFWFRBUkVBIj09PWUudGFnTmFtZSYmInBsYWNlaG9sZGVyIj09PXQmJiIiIT09biYmIWUuX19pZXBoKXt2YXIgcj1mdW5jdGlvbih0KXt0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiaW5wdXQiLHIpfTtlLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IixyKSxlLl9faWVwaD0hMH1lLnNldEF0dHJpYnV0ZSh0LG4pfX12YXIgbXI9e2NyZWF0ZTpkcix1cGRhdGU6ZHJ9O2Z1bmN0aW9uIHlyKGUscil7dmFyIGk9ci5lbG0sbz1yLmRhdGEsYT1lLmRhdGE7aWYoISh0KG8uc3RhdGljQ2xhc3MpJiZ0KG8uY2xhc3MpJiYodChhKXx8dChhLnN0YXRpY0NsYXNzKSYmdChhLmNsYXNzKSkpKXt2YXIgcz1CbihyKSxjPWkuX3RyYW5zaXRpb25DbGFzc2VzO24oYykmJihzPXpuKHMsVm4oYykpKSxzIT09aS5fcHJldkNsYXNzJiYoaS5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKSxpLl9wcmV2Q2xhc3M9cyl9fXZhciBncixfcixiciwkcix3cixDcix4cj17Y3JlYXRlOnlyLHVwZGF0ZTp5cn0sa3I9L1tcdykuK1wtXyRcXV0vO2Z1bmN0aW9uIEFyKGUpe3ZhciB0LG4scixpLG8sYT0hMSxzPSExLGM9ITEsdT0hMSxsPTAsZj0wLHA9MCxkPTA7Zm9yKHI9MDtyPGUubGVuZ3RoO3IrKylpZihuPXQsdD1lLmNoYXJDb2RlQXQociksYSkzOT09PXQmJjkyIT09biYmKGE9ITEpO2Vsc2UgaWYocykzND09PXQmJjkyIT09biYmKHM9ITEpO2Vsc2UgaWYoYyk5Nj09PXQmJjkyIT09biYmKGM9ITEpO2Vsc2UgaWYodSk0Nz09PXQmJjkyIT09biYmKHU9ITEpO2Vsc2UgaWYoMTI0IT09dHx8MTI0PT09ZS5jaGFyQ29kZUF0KHIrMSl8fDEyND09PWUuY2hhckNvZGVBdChyLTEpfHxsfHxmfHxwKXtzd2l0Y2godCl7Y2FzZSAzNDpzPSEwO2JyZWFrO2Nhc2UgMzk6YT0hMDticmVhaztjYXNlIDk2OmM9ITA7YnJlYWs7Y2FzZSA0MDpwKys7YnJlYWs7Y2FzZSA0MTpwLS07YnJlYWs7Y2FzZSA5MTpmKys7YnJlYWs7Y2FzZSA5MzpmLS07YnJlYWs7Y2FzZSAxMjM6bCsrO2JyZWFrO2Nhc2UgMTI1OmwtLX1pZig0Nz09PXQpe2Zvcih2YXIgdj1yLTEsaD12b2lkIDA7dj49MCYmIiAiPT09KGg9ZS5jaGFyQXQodikpO3YtLSk7aCYma3IudGVzdChoKXx8KHU9ITApfX1lbHNlIHZvaWQgMD09PWk/KGQ9cisxLGk9ZS5zbGljZSgwLHIpLnRyaW0oKSk6bSgpO2Z1bmN0aW9uIG0oKXsob3x8KG89W10pKS5wdXNoKGUuc2xpY2UoZCxyKS50cmltKCkpLGQ9cisxfWlmKHZvaWQgMD09PWk/aT1lLnNsaWNlKDAscikudHJpbSgpOjAhPT1kJiZtKCksbylmb3Iocj0wO3I8by5sZW5ndGg7cisrKWk9T3IoaSxvW3JdKTtyZXR1cm4gaX1mdW5jdGlvbiBPcihlLHQpe3ZhciBuPXQuaW5kZXhPZigiKCIpO2lmKG48MClyZXR1cm4nX2YoIicrdCsnIikoJytlKyIpIjt2YXIgcj10LnNsaWNlKDAsbiksaT10LnNsaWNlKG4rMSk7cmV0dXJuJ19mKCInK3IrJyIpKCcrZSsoIikiIT09aT8iLCIraTppKX1mdW5jdGlvbiBTcihlLHQpe2NvbnNvbGUuZXJyb3IoIltWdWUgY29tcGlsZXJdOiAiK2UpfWZ1bmN0aW9uIFRyKGUsdCl7cmV0dXJuIGU/ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbdF19KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KTpbXX1mdW5jdGlvbiBFcihlLHQsbixyLGkpeyhlLnByb3BzfHwoZS5wcm9wcz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24gTnIoZSx0LG4scixpKXsoaT9lLmR5bmFtaWNBdHRyc3x8KGUuZHluYW1pY0F0dHJzPVtdKTplLmF0dHJzfHwoZS5hdHRycz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24ganIoZSx0LG4scil7ZS5hdHRyc01hcFt0XT1uLGUuYXR0cnNMaXN0LnB1c2goUnIoe25hbWU6dCx2YWx1ZTpufSxyKSl9ZnVuY3Rpb24gRHIoZSx0LG4scixpLG8sYSxzKXsoZS5kaXJlY3RpdmVzfHwoZS5kaXJlY3RpdmVzPVtdKSkucHVzaChScih7bmFtZTp0LHJhd05hbWU6bix2YWx1ZTpyLGFyZzppLGlzRHluYW1pY0FyZzpvLG1vZGlmaWVyczphfSxzKSksZS5wbGFpbj0hMX1mdW5jdGlvbiBMcihlLHQsbil7cmV0dXJuIG4/Il9wKCIrdCsnLCInK2UrJyIpJzplK3R9ZnVuY3Rpb24gTXIodCxuLHIsaSxvLGEscyxjKXt2YXIgdTsoaT1pfHxlKS5yaWdodD9jP249IigiK24rIik9PT0nY2xpY2snPydjb250ZXh0bWVudSc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJjb250ZXh0bWVudSIsZGVsZXRlIGkucmlnaHQpOmkubWlkZGxlJiYoYz9uPSIoIituKyIpPT09J2NsaWNrJz8nbW91c2V1cCc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJtb3VzZXVwIikpLGkuY2FwdHVyZSYmKGRlbGV0ZSBpLmNhcHR1cmUsbj1McigiISIsbixjKSksaS5vbmNlJiYoZGVsZXRlIGkub25jZSxuPUxyKCJ+IixuLGMpKSxpLnBhc3NpdmUmJihkZWxldGUgaS5wYXNzaXZlLG49THIoIiYiLG4sYykpLGkubmF0aXZlPyhkZWxldGUgaS5uYXRpdmUsdT10Lm5hdGl2ZUV2ZW50c3x8KHQubmF0aXZlRXZlbnRzPXt9KSk6dT10LmV2ZW50c3x8KHQuZXZlbnRzPXt9KTt2YXIgbD1Scih7dmFsdWU6ci50cmltKCksZHluYW1pYzpjfSxzKTtpIT09ZSYmKGwubW9kaWZpZXJzPWkpO3ZhciBmPXVbbl07QXJyYXkuaXNBcnJheShmKT9vP2YudW5zaGlmdChsKTpmLnB1c2gobCk6dVtuXT1mP28/W2wsZl06W2YsbF06bCx0LnBsYWluPSExfWZ1bmN0aW9uIElyKGUsdCxuKXt2YXIgcj1GcihlLCI6Iit0KXx8RnIoZSwidi1iaW5kOiIrdCk7aWYobnVsbCE9cilyZXR1cm4gQXIocik7aWYoITEhPT1uKXt2YXIgaT1GcihlLHQpO2lmKG51bGwhPWkpcmV0dXJuIEpTT04uc3RyaW5naWZ5KGkpfX1mdW5jdGlvbiBGcihlLHQsbil7dmFyIHI7aWYobnVsbCE9KHI9ZS5hdHRyc01hcFt0XSkpZm9yKHZhciBpPWUuYXR0cnNMaXN0LG89MCxhPWkubGVuZ3RoO288YTtvKyspaWYoaVtvXS5uYW1lPT09dCl7aS5zcGxpY2UobywxKTticmVha31yZXR1cm4gbiYmZGVsZXRlIGUuYXR0cnNNYXBbdF0scn1mdW5jdGlvbiBQcihlLHQpe2Zvcih2YXIgbj1lLmF0dHJzTGlzdCxyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1uW3JdO2lmKHQudGVzdChvLm5hbWUpKXJldHVybiBuLnNwbGljZShyLDEpLG99fWZ1bmN0aW9uIFJyKGUsdCl7cmV0dXJuIHQmJihudWxsIT10LnN0YXJ0JiYoZS5zdGFydD10LnN0YXJ0KSxudWxsIT10LmVuZCYmKGUuZW5kPXQuZW5kKSksZX1mdW5jdGlvbiBIcihlLHQsbil7dmFyIHI9bnx8e30saT1yLm51bWJlcixvPSIkJHYiO3IudHJpbSYmKG89Iih0eXBlb2YgJCR2ID09PSAnc3RyaW5nJz8gJCR2LnRyaW0oKTogJCR2KSIpLGkmJihvPSJfbigiK28rIikiKTt2YXIgYT1Ccih0LG8pO2UubW9kZWw9e3ZhbHVlOiIoIit0KyIpIixleHByZXNzaW9uOkpTT04uc3RyaW5naWZ5KHQpLGNhbGxiYWNrOiJmdW5jdGlvbiAoJCR2KSB7IithKyJ9In19ZnVuY3Rpb24gQnIoZSx0KXt2YXIgbj1mdW5jdGlvbihlKXtpZihlPWUudHJpbSgpLGdyPWUubGVuZ3RoLGUuaW5kZXhPZigiWyIpPDB8fGUubGFzdEluZGV4T2YoIl0iKTxnci0xKXJldHVybigkcj1lLmxhc3RJbmRleE9mKCIuIikpPi0xP3tleHA6ZS5zbGljZSgwLCRyKSxrZXk6JyInK2Uuc2xpY2UoJHIrMSkrJyInfTp7ZXhwOmUsa2V5Om51bGx9O19yPWUsJHI9d3I9Q3I9MDtmb3IoOyF6cigpOylWcihicj1VcigpKT9Kcihicik6OTE9PT1iciYmS3IoYnIpO3JldHVybntleHA6ZS5zbGljZSgwLHdyKSxrZXk6ZS5zbGljZSh3cisxLENyKX19KGUpO3JldHVybiBudWxsPT09bi5rZXk/ZSsiPSIrdDoiJHNldCgiK24uZXhwKyIsICIrbi5rZXkrIiwgIit0KyIpIn1mdW5jdGlvbiBVcigpe3JldHVybiBfci5jaGFyQ29kZUF0KCsrJHIpfWZ1bmN0aW9uIHpyKCl7cmV0dXJuICRyPj1ncn1mdW5jdGlvbiBWcihlKXtyZXR1cm4gMzQ9PT1lfHwzOT09PWV9ZnVuY3Rpb24gS3IoZSl7dmFyIHQ9MTtmb3Iod3I9JHI7IXpyKCk7KWlmKFZyKGU9VXIoKSkpSnIoZSk7ZWxzZSBpZig5MT09PWUmJnQrKyw5Mz09PWUmJnQtLSwwPT09dCl7Q3I9JHI7YnJlYWt9fWZ1bmN0aW9uIEpyKGUpe2Zvcih2YXIgdD1lOyF6cigpJiYoZT1VcigpKSE9PXQ7KTt9dmFyIHFyLFdyPSJfX3IiLFpyPSJfX2MiO2Z1bmN0aW9uIEdyKGUsdCxuKXt2YXIgcj1xcjtyZXR1cm4gZnVuY3Rpb24gaSgpe251bGwhPT10LmFwcGx5KG51bGwsYXJndW1lbnRzKSYmUXIoZSxpLG4scil9fXZhciBYcj1WZSYmIShYJiZOdW1iZXIoWFsxXSk8PTUzKTtmdW5jdGlvbiBZcihlLHQsbixyKXtpZihYcil7dmFyIGk9YW4sbz10O3Q9by5fd3JhcHBlcj1mdW5jdGlvbihlKXtpZihlLnRhcmdldD09PWUuY3VycmVudFRhcmdldHx8ZS50aW1lU3RhbXA+PWl8fGUudGltZVN0YW1wPD0wfHxlLnRhcmdldC5vd25lckRvY3VtZW50IT09ZG9jdW1lbnQpcmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX1xci5hZGRFdmVudExpc3RlbmVyKGUsdCxRP3tjYXB0dXJlOm4scGFzc2l2ZTpyfTpuKX1mdW5jdGlvbiBRcihlLHQsbixyKXsocnx8cXIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0Ll93cmFwcGVyfHx0LG4pfWZ1bmN0aW9uIGVpKGUscil7aWYoIXQoZS5kYXRhLm9uKXx8IXQoci5kYXRhLm9uKSl7dmFyIGk9ci5kYXRhLm9ufHx7fSxvPWUuZGF0YS5vbnx8e307cXI9ci5lbG0sZnVuY3Rpb24oZSl7aWYobihlW1dyXSkpe3ZhciB0PXE/ImNoYW5nZSI6ImlucHV0IjtlW3RdPVtdLmNvbmNhdChlW1dyXSxlW3RdfHxbXSksZGVsZXRlIGVbV3JdfW4oZVtacl0pJiYoZS5jaGFuZ2U9W10uY29uY2F0KGVbWnJdLGUuY2hhbmdlfHxbXSksZGVsZXRlIGVbWnJdKX0oaSkscnQoaSxvLFlyLFFyLEdyLHIuY29udGV4dCkscXI9dm9pZCAwfX12YXIgdGksbmk9e2NyZWF0ZTplaSx1cGRhdGU6ZWl9O2Z1bmN0aW9uIHJpKGUscil7aWYoIXQoZS5kYXRhLmRvbVByb3BzKXx8IXQoci5kYXRhLmRvbVByb3BzKSl7dmFyIGksbyxhPXIuZWxtLHM9ZS5kYXRhLmRvbVByb3BzfHx7fSxjPXIuZGF0YS5kb21Qcm9wc3x8e307Zm9yKGkgaW4gbihjLl9fb2JfXykmJihjPXIuZGF0YS5kb21Qcm9wcz1BKHt9LGMpKSxzKWkgaW4gY3x8KGFbaV09IiIpO2ZvcihpIGluIGMpe2lmKG89Y1tpXSwidGV4dENvbnRlbnQiPT09aXx8ImlubmVySFRNTCI9PT1pKXtpZihyLmNoaWxkcmVuJiYoci5jaGlsZHJlbi5sZW5ndGg9MCksbz09PXNbaV0pY29udGludWU7MT09PWEuY2hpbGROb2Rlcy5sZW5ndGgmJmEucmVtb3ZlQ2hpbGQoYS5jaGlsZE5vZGVzWzBdKX1pZigidmFsdWUiPT09aSYmIlBST0dSRVNTIiE9PWEudGFnTmFtZSl7YS5fdmFsdWU9bzt2YXIgdT10KG8pPyIiOlN0cmluZyhvKTtpaShhLHUpJiYoYS52YWx1ZT11KX1lbHNlIGlmKCJpbm5lckhUTUwiPT09aSYmcW4oYS50YWdOYW1lKSYmdChhLmlubmVySFRNTCkpeyh0aT10aXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmlubmVySFRNTD0iPHN2Zz4iK28rIjwvc3ZnPiI7Zm9yKHZhciBsPXRpLmZpcnN0Q2hpbGQ7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7Zm9yKDtsLmZpcnN0Q2hpbGQ7KWEuYXBwZW5kQ2hpbGQobC5maXJzdENoaWxkKX1lbHNlIGlmKG8hPT1zW2ldKXRyeXthW2ldPW99Y2F0Y2goZSl7fX19fWZ1bmN0aW9uIGlpKGUsdCl7cmV0dXJuIWUuY29tcG9zaW5nJiYoIk9QVElPTiI9PT1lLnRhZ05hbWV8fGZ1bmN0aW9uKGUsdCl7dmFyIG49ITA7dHJ5e249ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCE9PWV9Y2F0Y2goZSl7fXJldHVybiBuJiZlLnZhbHVlIT09dH0oZSx0KXx8ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnZhbHVlLGk9ZS5fdk1vZGlmaWVycztpZihuKGkpKXtpZihpLm51bWJlcilyZXR1cm4gZihyKSE9PWYodCk7aWYoaS50cmltKXJldHVybiByLnRyaW0oKSE9PXQudHJpbSgpfXJldHVybiByIT09dH0oZSx0KSl9dmFyIG9pPXtjcmVhdGU6cmksdXBkYXRlOnJpfSxhaT1nKGZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49LzooLispLztyZXR1cm4gZS5zcGxpdCgvOyg/IVteKF0qXCkpL2cpLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHI9ZS5zcGxpdChuKTtyLmxlbmd0aD4xJiYodFtyWzBdLnRyaW0oKV09clsxXS50cmltKCkpfX0pLHR9KTtmdW5jdGlvbiBzaShlKXt2YXIgdD1jaShlLnN0eWxlKTtyZXR1cm4gZS5zdGF0aWNTdHlsZT9BKGUuc3RhdGljU3R5bGUsdCk6dH1mdW5jdGlvbiBjaShlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9PKGUpOiJzdHJpbmciPT10eXBlb2YgZT9haShlKTplfXZhciB1aSxsaT0vXi0tLyxmaT0vXHMqIWltcG9ydGFudCQvLHBpPWZ1bmN0aW9uKGUsdCxuKXtpZihsaS50ZXN0KHQpKWUuc3R5bGUuc2V0UHJvcGVydHkodCxuKTtlbHNlIGlmKGZpLnRlc3QobikpZS5zdHlsZS5zZXRQcm9wZXJ0eShDKHQpLG4ucmVwbGFjZShmaSwiIiksImltcG9ydGFudCIpO2Vsc2V7dmFyIHI9dmkodCk7aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspZS5zdHlsZVtyXT1uW2ldO2Vsc2UgZS5zdHlsZVtyXT1ufX0sZGk9WyJXZWJraXQiLCJNb3oiLCJtcyJdLHZpPWcoZnVuY3Rpb24oZSl7aWYodWk9dWl8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLCJmaWx0ZXIiIT09KGU9YihlKSkmJmUgaW4gdWkpcmV0dXJuIGU7Zm9yKHZhciB0PWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPTA7bjxkaS5sZW5ndGg7bisrKXt2YXIgcj1kaVtuXSt0O2lmKHIgaW4gdWkpcmV0dXJuIHJ9fSk7ZnVuY3Rpb24gaGkoZSxyKXt2YXIgaT1yLmRhdGEsbz1lLmRhdGE7aWYoISh0KGkuc3RhdGljU3R5bGUpJiZ0KGkuc3R5bGUpJiZ0KG8uc3RhdGljU3R5bGUpJiZ0KG8uc3R5bGUpKSl7dmFyIGEscyxjPXIuZWxtLHU9by5zdGF0aWNTdHlsZSxsPW8ubm9ybWFsaXplZFN0eWxlfHxvLnN0eWxlfHx7fSxmPXV8fGwscD1jaShyLmRhdGEuc3R5bGUpfHx7fTtyLmRhdGEubm9ybWFsaXplZFN0eWxlPW4ocC5fX29iX18pP0Eoe30scCk6cDt2YXIgZD1mdW5jdGlvbihlLHQpe3ZhciBuLHI9e307aWYodClmb3IodmFyIGk9ZTtpLmNvbXBvbmVudEluc3RhbmNlOykoaT1pLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSkmJmkuZGF0YSYmKG49c2koaS5kYXRhKSkmJkEocixuKTsobj1zaShlLmRhdGEpKSYmQShyLG4pO2Zvcih2YXIgbz1lO289by5wYXJlbnQ7KW8uZGF0YSYmKG49c2koby5kYXRhKSkmJkEocixuKTtyZXR1cm4gcn0ociwhMCk7Zm9yKHMgaW4gZil0KGRbc10pJiZwaShjLHMsIiIpO2ZvcihzIGluIGQpKGE9ZFtzXSkhPT1mW3NdJiZwaShjLHMsbnVsbD09YT8iIjphKX19dmFyIG1pPXtjcmVhdGU6aGksdXBkYXRlOmhpfSx5aT0vXHMrLztmdW5jdGlvbiBnaShlLHQpe2lmKHQmJih0PXQudHJpbSgpKSlpZihlLmNsYXNzTGlzdCl0LmluZGV4T2YoIiAiKT4tMT90LnNwbGl0KHlpKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmNsYXNzTGlzdC5hZGQodCl9KTplLmNsYXNzTGlzdC5hZGQodCk7ZWxzZXt2YXIgbj0iICIrKGUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIikrIiAiO24uaW5kZXhPZigiICIrdCsiICIpPDAmJmUuc2V0QXR0cmlidXRlKCJjbGFzcyIsKG4rdCkudHJpbSgpKX19ZnVuY3Rpb24gX2koZSx0KXtpZih0JiYodD10LnRyaW0oKSkpaWYoZS5jbGFzc0xpc3QpdC5pbmRleE9mKCIgIik+LTE/dC5zcGxpdCh5aSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5jbGFzc0xpc3QucmVtb3ZlKHQpfSk6ZS5jbGFzc0xpc3QucmVtb3ZlKHQpLGUuY2xhc3NMaXN0Lmxlbmd0aHx8ZS5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIik7ZWxzZXtmb3IodmFyIG49IiAiKyhlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpKyIgIixyPSIgIit0KyIgIjtuLmluZGV4T2Yocik+PTA7KW49bi5yZXBsYWNlKHIsIiAiKTsobj1uLnRyaW0oKSk/ZS5zZXRBdHRyaWJ1dGUoImNsYXNzIixuKTplLnJlbW92ZUF0dHJpYnV0ZSgiY2xhc3MiKX19ZnVuY3Rpb24gYmkoZSl7aWYoZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXt2YXIgdD17fTtyZXR1cm4hMSE9PWUuY3NzJiZBKHQsJGkoZS5uYW1lfHwidiIpKSxBKHQsZSksdH1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/JGkoZSk6dm9pZCAwfX12YXIgJGk9ZyhmdW5jdGlvbihlKXtyZXR1cm57ZW50ZXJDbGFzczplKyItZW50ZXIiLGVudGVyVG9DbGFzczplKyItZW50ZXItdG8iLGVudGVyQWN0aXZlQ2xhc3M6ZSsiLWVudGVyLWFjdGl2ZSIsbGVhdmVDbGFzczplKyItbGVhdmUiLGxlYXZlVG9DbGFzczplKyItbGVhdmUtdG8iLGxlYXZlQWN0aXZlQ2xhc3M6ZSsiLWxlYXZlLWFjdGl2ZSJ9fSksd2k9eiYmIVcsQ2k9InRyYW5zaXRpb24iLHhpPSJhbmltYXRpb24iLGtpPSJ0cmFuc2l0aW9uIixBaT0idHJhbnNpdGlvbmVuZCIsT2k9ImFuaW1hdGlvbiIsU2k9ImFuaW1hdGlvbmVuZCI7d2kmJih2b2lkIDA9PT13aW5kb3cub250cmFuc2l0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kJiYoa2k9IldlYmtpdFRyYW5zaXRpb24iLEFpPSJ3ZWJraXRUcmFuc2l0aW9uRW5kIiksdm9pZCAwPT09d2luZG93Lm9uYW5pbWF0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQmJihPaT0iV2Via2l0QW5pbWF0aW9uIixTaT0id2Via2l0QW5pbWF0aW9uRW5kIikpO3ZhciBUaT16P3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdyk6c2V0VGltZW91dDpmdW5jdGlvbihlKXtyZXR1cm4gZSgpfTtmdW5jdGlvbiBFaShlKXtUaShmdW5jdGlvbigpe1RpKGUpfSl9ZnVuY3Rpb24gTmkoZSx0KXt2YXIgbj1lLl90cmFuc2l0aW9uQ2xhc3Nlc3x8KGUuX3RyYW5zaXRpb25DbGFzc2VzPVtdKTtuLmluZGV4T2YodCk8MCYmKG4ucHVzaCh0KSxnaShlLHQpKX1mdW5jdGlvbiBqaShlLHQpe2UuX3RyYW5zaXRpb25DbGFzc2VzJiZoKGUuX3RyYW5zaXRpb25DbGFzc2VzLHQpLF9pKGUsdCl9ZnVuY3Rpb24gRGkoZSx0LG4pe3ZhciByPU1pKGUsdCksaT1yLnR5cGUsbz1yLnRpbWVvdXQsYT1yLnByb3BDb3VudDtpZighaSlyZXR1cm4gbigpO3ZhciBzPWk9PT1DaT9BaTpTaSxjPTAsdT1mdW5jdGlvbigpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihzLGwpLG4oKX0sbD1mdW5jdGlvbih0KXt0LnRhcmdldD09PWUmJisrYz49YSYmdSgpfTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YzxhJiZ1KCl9LG8rMSksZS5hZGRFdmVudExpc3RlbmVyKHMsbCl9dmFyIExpPS9cYih0cmFuc2Zvcm18YWxsKSgsfCQpLztmdW5jdGlvbiBNaShlLHQpe3ZhciBuLHI9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSksaT0ocltraSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLG89KHJba2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSxhPUlpKGksbykscz0ocltPaSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLGM9KHJbT2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSx1PUlpKHMsYyksbD0wLGY9MDtyZXR1cm4gdD09PUNpP2E+MCYmKG49Q2ksbD1hLGY9by5sZW5ndGgpOnQ9PT14aT91PjAmJihuPXhpLGw9dSxmPWMubGVuZ3RoKTpmPShuPShsPU1hdGgubWF4KGEsdSkpPjA/YT51P0NpOnhpOm51bGwpP249PT1DaT9vLmxlbmd0aDpjLmxlbmd0aDowLHt0eXBlOm4sdGltZW91dDpsLHByb3BDb3VudDpmLGhhc1RyYW5zZm9ybTpuPT09Q2kmJkxpLnRlc3QocltraSsiUHJvcGVydHkiXSl9fWZ1bmN0aW9uIElpKGUsdCl7Zm9yKDtlLmxlbmd0aDx0Lmxlbmd0aDspZT1lLmNvbmNhdChlKTtyZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCx0Lm1hcChmdW5jdGlvbih0LG4pe3JldHVybiBGaSh0KStGaShlW25dKX0pKX1mdW5jdGlvbiBGaShlKXtyZXR1cm4gMWUzKk51bWJlcihlLnNsaWNlKDAsLTEpLnJlcGxhY2UoIiwiLCIuIikpfWZ1bmN0aW9uIFBpKGUscil7dmFyIGk9ZS5lbG07bihpLl9sZWF2ZUNiKSYmKGkuX2xlYXZlQ2IuY2FuY2VsbGVkPSEwLGkuX2xlYXZlQ2IoKSk7dmFyIGE9YmkoZS5kYXRhLnRyYW5zaXRpb24pO2lmKCF0KGEpJiYhbihpLl9lbnRlckNiKSYmMT09PWkubm9kZVR5cGUpe2Zvcih2YXIgcz1hLmNzcyxjPWEudHlwZSx1PWEuZW50ZXJDbGFzcyxsPWEuZW50ZXJUb0NsYXNzLHA9YS5lbnRlckFjdGl2ZUNsYXNzLGQ9YS5hcHBlYXJDbGFzcyx2PWEuYXBwZWFyVG9DbGFzcyxoPWEuYXBwZWFyQWN0aXZlQ2xhc3MsbT1hLmJlZm9yZUVudGVyLHk9YS5lbnRlcixnPWEuYWZ0ZXJFbnRlcixfPWEuZW50ZXJDYW5jZWxsZWQsYj1hLmJlZm9yZUFwcGVhciwkPWEuYXBwZWFyLHc9YS5hZnRlckFwcGVhcixDPWEuYXBwZWFyQ2FuY2VsbGVkLHg9YS5kdXJhdGlvbixrPVd0LEE9V3QuJHZub2RlO0EmJkEucGFyZW50OylrPUEuY29udGV4dCxBPUEucGFyZW50O3ZhciBPPSFrLl9pc01vdW50ZWR8fCFlLmlzUm9vdEluc2VydDtpZighT3x8JHx8IiI9PT0kKXt2YXIgUz1PJiZkP2Q6dSxUPU8mJmg/aDpwLEU9TyYmdj92OmwsTj1PJiZifHxtLGo9TyYmImZ1bmN0aW9uIj09dHlwZW9mICQ/JDp5LEw9TyYmd3x8ZyxNPU8mJkN8fF8sST1mKG8oeCk/eC5lbnRlcjp4KSxGPSExIT09cyYmIVcsUD1CaShqKSxSPWkuX2VudGVyQ2I9RChmdW5jdGlvbigpe0YmJihqaShpLEUpLGppKGksVCkpLFIuY2FuY2VsbGVkPyhGJiZqaShpLFMpLE0mJk0oaSkpOkwmJkwoaSksaS5fZW50ZXJDYj1udWxsfSk7ZS5kYXRhLnNob3d8fGl0KGUsImluc2VydCIsZnVuY3Rpb24oKXt2YXIgdD1pLnBhcmVudE5vZGUsbj10JiZ0Ll9wZW5kaW5nJiZ0Ll9wZW5kaW5nW2Uua2V5XTtuJiZuLnRhZz09PWUudGFnJiZuLmVsbS5fbGVhdmVDYiYmbi5lbG0uX2xlYXZlQ2IoKSxqJiZqKGksUil9KSxOJiZOKGkpLEYmJihOaShpLFMpLE5pKGksVCksRWkoZnVuY3Rpb24oKXtqaShpLFMpLFIuY2FuY2VsbGVkfHwoTmkoaSxFKSxQfHwoSGkoSSk/c2V0VGltZW91dChSLEkpOkRpKGksYyxSKSkpfSkpLGUuZGF0YS5zaG93JiYociYmcigpLGomJmooaSxSKSksRnx8UHx8UigpfX19ZnVuY3Rpb24gUmkoZSxyKXt2YXIgaT1lLmVsbTtuKGkuX2VudGVyQ2IpJiYoaS5fZW50ZXJDYi5jYW5jZWxsZWQ9ITAsaS5fZW50ZXJDYigpKTt2YXIgYT1iaShlLmRhdGEudHJhbnNpdGlvbik7aWYodChhKXx8MSE9PWkubm9kZVR5cGUpcmV0dXJuIHIoKTtpZighbihpLl9sZWF2ZUNiKSl7dmFyIHM9YS5jc3MsYz1hLnR5cGUsdT1hLmxlYXZlQ2xhc3MsbD1hLmxlYXZlVG9DbGFzcyxwPWEubGVhdmVBY3RpdmVDbGFzcyxkPWEuYmVmb3JlTGVhdmUsdj1hLmxlYXZlLGg9YS5hZnRlckxlYXZlLG09YS5sZWF2ZUNhbmNlbGxlZCx5PWEuZGVsYXlMZWF2ZSxnPWEuZHVyYXRpb24sXz0hMSE9PXMmJiFXLGI9QmkodiksJD1mKG8oZyk/Zy5sZWF2ZTpnKSx3PWkuX2xlYXZlQ2I9RChmdW5jdGlvbigpe2kucGFyZW50Tm9kZSYmaS5wYXJlbnROb2RlLl9wZW5kaW5nJiYoaS5wYXJlbnROb2RlLl9wZW5kaW5nW2Uua2V5XT1udWxsKSxfJiYoamkoaSxsKSxqaShpLHApKSx3LmNhbmNlbGxlZD8oXyYmamkoaSx1KSxtJiZtKGkpKToocigpLGgmJmgoaSkpLGkuX2xlYXZlQ2I9bnVsbH0pO3k/eShDKTpDKCl9ZnVuY3Rpb24gQygpe3cuY2FuY2VsbGVkfHwoIWUuZGF0YS5zaG93JiZpLnBhcmVudE5vZGUmJigoaS5wYXJlbnROb2RlLl9wZW5kaW5nfHwoaS5wYXJlbnROb2RlLl9wZW5kaW5nPXt9KSlbZS5rZXldPWUpLGQmJmQoaSksXyYmKE5pKGksdSksTmkoaSxwKSxFaShmdW5jdGlvbigpe2ppKGksdSksdy5jYW5jZWxsZWR8fChOaShpLGwpLGJ8fChIaSgkKT9zZXRUaW1lb3V0KHcsJCk6RGkoaSxjLHcpKSl9KSksdiYmdihpLHcpLF98fGJ8fHcoKSl9fWZ1bmN0aW9uIEhpKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmIWlzTmFOKGUpfWZ1bmN0aW9uIEJpKGUpe2lmKHQoZSkpcmV0dXJuITE7dmFyIHI9ZS5mbnM7cmV0dXJuIG4ocik/QmkoQXJyYXkuaXNBcnJheShyKT9yWzBdOnIpOihlLl9sZW5ndGh8fGUubGVuZ3RoKT4xfWZ1bmN0aW9uIFVpKGUsdCl7ITAhPT10LmRhdGEuc2hvdyYmUGkodCl9dmFyIHppPWZ1bmN0aW9uKGUpe3ZhciBvLGEscz17fSxjPWUubW9kdWxlcyx1PWUubm9kZU9wcztmb3Iobz0wO288cnIubGVuZ3RoOysrbylmb3Ioc1tycltvXV09W10sYT0wO2E8Yy5sZW5ndGg7KythKW4oY1thXVtycltvXV0pJiZzW3JyW29dXS5wdXNoKGNbYV1bcnJbb11dKTtmdW5jdGlvbiBsKGUpe3ZhciB0PXUucGFyZW50Tm9kZShlKTtuKHQpJiZ1LnJlbW92ZUNoaWxkKHQsZSl9ZnVuY3Rpb24gZihlLHQsaSxvLGEsYyxsKXtpZihuKGUuZWxtKSYmbihjKSYmKGU9Y1tsXT1tZShlKSksZS5pc1Jvb3RJbnNlcnQ9IWEsIWZ1bmN0aW9uKGUsdCxpLG8pe3ZhciBhPWUuZGF0YTtpZihuKGEpKXt2YXIgYz1uKGUuY29tcG9uZW50SW5zdGFuY2UpJiZhLmtlZXBBbGl2ZTtpZihuKGE9YS5ob29rKSYmbihhPWEuaW5pdCkmJmEoZSwhMSksbihlLmNvbXBvbmVudEluc3RhbmNlKSlyZXR1cm4gZChlLHQpLHYoaSxlLmVsbSxvKSxyKGMpJiZmdW5jdGlvbihlLHQscixpKXtmb3IodmFyIG8sYT1lO2EuY29tcG9uZW50SW5zdGFuY2U7KWlmKGE9YS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUsbihvPWEuZGF0YSkmJm4obz1vLnRyYW5zaXRpb24pKXtmb3Iobz0wO288cy5hY3RpdmF0ZS5sZW5ndGg7KytvKXMuYWN0aXZhdGVbb10obnIsYSk7dC5wdXNoKGEpO2JyZWFrfXYocixlLmVsbSxpKX0oZSx0LGksbyksITB9fShlLHQsaSxvKSl7dmFyIGY9ZS5kYXRhLHA9ZS5jaGlsZHJlbixtPWUudGFnO24obSk/KGUuZWxtPWUubnM/dS5jcmVhdGVFbGVtZW50TlMoZS5ucyxtKTp1LmNyZWF0ZUVsZW1lbnQobSxlKSxnKGUpLGgoZSxwLHQpLG4oZikmJnkoZSx0KSx2KGksZS5lbG0sbykpOnIoZS5pc0NvbW1lbnQpPyhlLmVsbT11LmNyZWF0ZUNvbW1lbnQoZS50ZXh0KSx2KGksZS5lbG0sbykpOihlLmVsbT11LmNyZWF0ZVRleHROb2RlKGUudGV4dCksdihpLGUuZWxtLG8pKX19ZnVuY3Rpb24gZChlLHQpe24oZS5kYXRhLnBlbmRpbmdJbnNlcnQpJiYodC5wdXNoLmFwcGx5KHQsZS5kYXRhLnBlbmRpbmdJbnNlcnQpLGUuZGF0YS5wZW5kaW5nSW5zZXJ0PW51bGwpLGUuZWxtPWUuY29tcG9uZW50SW5zdGFuY2UuJGVsLG0oZSk/KHkoZSx0KSxnKGUpKToodHIoZSksdC5wdXNoKGUpKX1mdW5jdGlvbiB2KGUsdCxyKXtuKGUpJiYobihyKT91LnBhcmVudE5vZGUocik9PT1lJiZ1Lmluc2VydEJlZm9yZShlLHQscik6dS5hcHBlbmRDaGlsZChlLHQpKX1mdW5jdGlvbiBoKGUsdCxuKXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7KytyKWYodFtyXSxuLGUuZWxtLG51bGwsITAsdCxyKTtlbHNlIGkoZS50ZXh0KSYmdS5hcHBlbmRDaGlsZChlLmVsbSx1LmNyZWF0ZVRleHROb2RlKFN0cmluZyhlLnRleHQpKSl9ZnVuY3Rpb24gbShlKXtmb3IoO2UuY29tcG9uZW50SW5zdGFuY2U7KWU9ZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7cmV0dXJuIG4oZS50YWcpfWZ1bmN0aW9uIHkoZSx0KXtmb3IodmFyIHI9MDtyPHMuY3JlYXRlLmxlbmd0aDsrK3Ipcy5jcmVhdGVbcl0obnIsZSk7bihvPWUuZGF0YS5ob29rKSYmKG4oby5jcmVhdGUpJiZvLmNyZWF0ZShucixlKSxuKG8uaW5zZXJ0KSYmdC5wdXNoKGUpKX1mdW5jdGlvbiBnKGUpe3ZhciB0O2lmKG4odD1lLmZuU2NvcGVJZCkpdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpO2Vsc2UgZm9yKHZhciByPWU7cjspbih0PXIuY29udGV4dCkmJm4odD10LiRvcHRpb25zLl9zY29wZUlkKSYmdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpLHI9ci5wYXJlbnQ7bih0PVd0KSYmdCE9PWUuY29udGV4dCYmdCE9PWUuZm5Db250ZXh0JiZuKHQ9dC4kb3B0aW9ucy5fc2NvcGVJZCkmJnUuc2V0U3R5bGVTY29wZShlLmVsbSx0KX1mdW5jdGlvbiBfKGUsdCxuLHIsaSxvKXtmb3IoO3I8PWk7KytyKWYobltyXSxvLGUsdCwhMSxuLHIpfWZ1bmN0aW9uIGIoZSl7dmFyIHQscixpPWUuZGF0YTtpZihuKGkpKWZvcihuKHQ9aS5ob29rKSYmbih0PXQuZGVzdHJveSkmJnQoZSksdD0wO3Q8cy5kZXN0cm95Lmxlbmd0aDsrK3Qpcy5kZXN0cm95W3RdKGUpO2lmKG4odD1lLmNoaWxkcmVuKSlmb3Iocj0wO3I8ZS5jaGlsZHJlbi5sZW5ndGg7KytyKWIoZS5jaGlsZHJlbltyXSl9ZnVuY3Rpb24gJChlLHQscil7Zm9yKDt0PD1yOysrdCl7dmFyIGk9ZVt0XTtuKGkpJiYobihpLnRhZyk/KHcoaSksYihpKSk6bChpLmVsbSkpfX1mdW5jdGlvbiB3KGUsdCl7aWYobih0KXx8bihlLmRhdGEpKXt2YXIgcixpPXMucmVtb3ZlLmxlbmd0aCsxO2ZvcihuKHQpP3QubGlzdGVuZXJzKz1pOnQ9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKCl7MD09LS1uLmxpc3RlbmVycyYmbChlKX1yZXR1cm4gbi5saXN0ZW5lcnM9dCxufShlLmVsbSxpKSxuKHI9ZS5jb21wb25lbnRJbnN0YW5jZSkmJm4ocj1yLl92bm9kZSkmJm4oci5kYXRhKSYmdyhyLHQpLHI9MDtyPHMucmVtb3ZlLmxlbmd0aDsrK3Ipcy5yZW1vdmVbcl0oZSx0KTtuKHI9ZS5kYXRhLmhvb2spJiZuKHI9ci5yZW1vdmUpP3IoZSx0KTp0KCl9ZWxzZSBsKGUuZWxtKX1mdW5jdGlvbiBDKGUsdCxyLGkpe2Zvcih2YXIgbz1yO288aTtvKyspe3ZhciBhPXRbb107aWYobihhKSYmaXIoZSxhKSlyZXR1cm4gb319ZnVuY3Rpb24geChlLGksbyxhLGMsbCl7aWYoZSE9PWkpe24oaS5lbG0pJiZuKGEpJiYoaT1hW2NdPW1lKGkpKTt2YXIgcD1pLmVsbT1lLmVsbTtpZihyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSluKGkuYXN5bmNGYWN0b3J5LnJlc29sdmVkKT9PKGUuZWxtLGksbyk6aS5pc0FzeW5jUGxhY2Vob2xkZXI9ITA7ZWxzZSBpZihyKGkuaXNTdGF0aWMpJiZyKGUuaXNTdGF0aWMpJiZpLmtleT09PWUua2V5JiYocihpLmlzQ2xvbmVkKXx8cihpLmlzT25jZSkpKWkuY29tcG9uZW50SW5zdGFuY2U9ZS5jb21wb25lbnRJbnN0YW5jZTtlbHNle3ZhciBkLHY9aS5kYXRhO24odikmJm4oZD12Lmhvb2spJiZuKGQ9ZC5wcmVwYXRjaCkmJmQoZSxpKTt2YXIgaD1lLmNoaWxkcmVuLHk9aS5jaGlsZHJlbjtpZihuKHYpJiZtKGkpKXtmb3IoZD0wO2Q8cy51cGRhdGUubGVuZ3RoOysrZClzLnVwZGF0ZVtkXShlLGkpO24oZD12Lmhvb2spJiZuKGQ9ZC51cGRhdGUpJiZkKGUsaSl9dChpLnRleHQpP24oaCkmJm4oeSk/aCE9PXkmJmZ1bmN0aW9uKGUscixpLG8sYSl7Zm9yKHZhciBzLGMsbCxwPTAsZD0wLHY9ci5sZW5ndGgtMSxoPXJbMF0sbT1yW3ZdLHk9aS5sZW5ndGgtMSxnPWlbMF0sYj1pW3ldLHc9IWE7cDw9diYmZDw9eTspdChoKT9oPXJbKytwXTp0KG0pP209clstLXZdOmlyKGgsZyk/KHgoaCxnLG8saSxkKSxoPXJbKytwXSxnPWlbKytkXSk6aXIobSxiKT8oeChtLGIsbyxpLHkpLG09clstLXZdLGI9aVstLXldKTppcihoLGIpPyh4KGgsYixvLGkseSksdyYmdS5pbnNlcnRCZWZvcmUoZSxoLmVsbSx1Lm5leHRTaWJsaW5nKG0uZWxtKSksaD1yWysrcF0sYj1pWy0teV0pOmlyKG0sZyk/KHgobSxnLG8saSxkKSx3JiZ1Lmluc2VydEJlZm9yZShlLG0uZWxtLGguZWxtKSxtPXJbLS12XSxnPWlbKytkXSk6KHQocykmJihzPW9yKHIscCx2KSksdChjPW4oZy5rZXkpP3NbZy5rZXldOkMoZyxyLHAsdikpP2YoZyxvLGUsaC5lbG0sITEsaSxkKTppcihsPXJbY10sZyk/KHgobCxnLG8saSxkKSxyW2NdPXZvaWQgMCx3JiZ1Lmluc2VydEJlZm9yZShlLGwuZWxtLGguZWxtKSk6ZihnLG8sZSxoLmVsbSwhMSxpLGQpLGc9aVsrK2RdKTtwPnY/XyhlLHQoaVt5KzFdKT9udWxsOmlbeSsxXS5lbG0saSxkLHksbyk6ZD55JiYkKHIscCx2KX0ocCxoLHksbyxsKTpuKHkpPyhuKGUudGV4dCkmJnUuc2V0VGV4dENvbnRlbnQocCwiIiksXyhwLG51bGwseSwwLHkubGVuZ3RoLTEsbykpOm4oaCk/JChoLDAsaC5sZW5ndGgtMSk6bihlLnRleHQpJiZ1LnNldFRleHRDb250ZW50KHAsIiIpOmUudGV4dCE9PWkudGV4dCYmdS5zZXRUZXh0Q29udGVudChwLGkudGV4dCksbih2KSYmbihkPXYuaG9vaykmJm4oZD1kLnBvc3RwYXRjaCkmJmQoZSxpKX19fWZ1bmN0aW9uIGsoZSx0LGkpe2lmKHIoaSkmJm4oZS5wYXJlbnQpKWUucGFyZW50LmRhdGEucGVuZGluZ0luc2VydD10O2Vsc2UgZm9yKHZhciBvPTA7bzx0Lmxlbmd0aDsrK28pdFtvXS5kYXRhLmhvb2suaW5zZXJ0KHRbb10pfXZhciBBPXAoImF0dHJzLGNsYXNzLHN0YXRpY0NsYXNzLHN0YXRpY1N0eWxlLGtleSIpO2Z1bmN0aW9uIE8oZSx0LGksbyl7dmFyIGEscz10LnRhZyxjPXQuZGF0YSx1PXQuY2hpbGRyZW47aWYobz1vfHxjJiZjLnByZSx0LmVsbT1lLHIodC5pc0NvbW1lbnQpJiZuKHQuYXN5bmNGYWN0b3J5KSlyZXR1cm4gdC5pc0FzeW5jUGxhY2Vob2xkZXI9ITAsITA7aWYobihjKSYmKG4oYT1jLmhvb2spJiZuKGE9YS5pbml0KSYmYSh0LCEwKSxuKGE9dC5jb21wb25lbnRJbnN0YW5jZSkpKXJldHVybiBkKHQsaSksITA7aWYobihzKSl7aWYobih1KSlpZihlLmhhc0NoaWxkTm9kZXMoKSlpZihuKGE9YykmJm4oYT1hLmRvbVByb3BzKSYmbihhPWEuaW5uZXJIVE1MKSl7aWYoYSE9PWUuaW5uZXJIVE1MKXJldHVybiExfWVsc2V7Zm9yKHZhciBsPSEwLGY9ZS5maXJzdENoaWxkLHA9MDtwPHUubGVuZ3RoO3ArKyl7aWYoIWZ8fCFPKGYsdVtwXSxpLG8pKXtsPSExO2JyZWFrfWY9Zi5uZXh0U2libGluZ31pZighbHx8ZilyZXR1cm4hMX1lbHNlIGgodCx1LGkpO2lmKG4oYykpe3ZhciB2PSExO2Zvcih2YXIgbSBpbiBjKWlmKCFBKG0pKXt2PSEwLHkodCxpKTticmVha30hdiYmYy5jbGFzcyYmZXQoYy5jbGFzcyl9fWVsc2UgZS5kYXRhIT09dC50ZXh0JiYoZS5kYXRhPXQudGV4dCk7cmV0dXJuITB9cmV0dXJuIGZ1bmN0aW9uKGUsaSxvLGEpe2lmKCF0KGkpKXt2YXIgYyxsPSExLHA9W107aWYodChlKSlsPSEwLGYoaSxwKTtlbHNle3ZhciBkPW4oZS5ub2RlVHlwZSk7aWYoIWQmJmlyKGUsaSkpeChlLGkscCxudWxsLG51bGwsYSk7ZWxzZXtpZihkKXtpZigxPT09ZS5ub2RlVHlwZSYmZS5oYXNBdHRyaWJ1dGUoTCkmJihlLnJlbW92ZUF0dHJpYnV0ZShMKSxvPSEwKSxyKG8pJiZPKGUsaSxwKSlyZXR1cm4gayhpLHAsITApLGU7Yz1lLGU9bmV3IHBlKHUudGFnTmFtZShjKS50b0xvd2VyQ2FzZSgpLHt9LFtdLHZvaWQgMCxjKX12YXIgdj1lLmVsbSxoPXUucGFyZW50Tm9kZSh2KTtpZihmKGkscCx2Ll9sZWF2ZUNiP251bGw6aCx1Lm5leHRTaWJsaW5nKHYpKSxuKGkucGFyZW50KSlmb3IodmFyIHk9aS5wYXJlbnQsZz1tKGkpO3k7KXtmb3IodmFyIF89MDtfPHMuZGVzdHJveS5sZW5ndGg7KytfKXMuZGVzdHJveVtfXSh5KTtpZih5LmVsbT1pLmVsbSxnKXtmb3IodmFyIHc9MDt3PHMuY3JlYXRlLmxlbmd0aDsrK3cpcy5jcmVhdGVbd10obnIseSk7dmFyIEM9eS5kYXRhLmhvb2suaW5zZXJ0O2lmKEMubWVyZ2VkKWZvcih2YXIgQT0xO0E8Qy5mbnMubGVuZ3RoO0ErKylDLmZuc1tBXSgpfWVsc2UgdHIoeSk7eT15LnBhcmVudH1uKGgpPyQoW2VdLDAsMCk6bihlLnRhZykmJmIoZSl9fXJldHVybiBrKGkscCxsKSxpLmVsbX1uKGUpJiZiKGUpfX0oe25vZGVPcHM6UW4sbW9kdWxlczpbbXIseHIsbmksb2ksbWksej97Y3JlYXRlOlVpLGFjdGl2YXRlOlVpLHJlbW92ZTpmdW5jdGlvbihlLHQpeyEwIT09ZS5kYXRhLnNob3c/UmkoZSx0KTp0KCl9fTp7fV0uY29uY2F0KHByKX0pO1cmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2UmJmUudm1vZGVsJiZYaShlLCJpbnB1dCIpfSk7dmFyIFZpPXtpbnNlcnRlZDpmdW5jdGlvbihlLHQsbixyKXsic2VsZWN0Ij09PW4udGFnPyhyLmVsbSYmIXIuZWxtLl92T3B0aW9ucz9pdChuLCJwb3N0cGF0Y2giLGZ1bmN0aW9uKCl7VmkuY29tcG9uZW50VXBkYXRlZChlLHQsbil9KTpLaShlLHQsbi5jb250ZXh0KSxlLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpKTooInRleHRhcmVhIj09PW4udGFnfHxYbihlLnR5cGUpKSYmKGUuX3ZNb2RpZmllcnM9dC5tb2RpZmllcnMsdC5tb2RpZmllcnMubGF6eXx8KGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25zdGFydCIsWmkpLGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25lbmQiLEdpKSxlLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsR2kpLFcmJihlLnZtb2RlbD0hMCkpKX0sY29tcG9uZW50VXBkYXRlZDpmdW5jdGlvbihlLHQsbil7aWYoInNlbGVjdCI9PT1uLnRhZyl7S2koZSx0LG4uY29udGV4dCk7dmFyIHI9ZS5fdk9wdGlvbnMsaT1lLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpO2lmKGkuc29tZShmdW5jdGlvbihlLHQpe3JldHVybiFOKGUsclt0XSl9KSkoZS5tdWx0aXBsZT90LnZhbHVlLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIHFpKGUsaSl9KTp0LnZhbHVlIT09dC5vbGRWYWx1ZSYmcWkodC52YWx1ZSxpKSkmJlhpKGUsImNoYW5nZSIpfX19O2Z1bmN0aW9uIEtpKGUsdCxuKXtKaShlLHQsbiksKHF8fFopJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7SmkoZSx0LG4pfSwwKX1mdW5jdGlvbiBKaShlLHQsbil7dmFyIHI9dC52YWx1ZSxpPWUubXVsdGlwbGU7aWYoIWl8fEFycmF5LmlzQXJyYXkocikpe2Zvcih2YXIgbyxhLHM9MCxjPWUub3B0aW9ucy5sZW5ndGg7czxjO3MrKylpZihhPWUub3B0aW9uc1tzXSxpKW89aihyLFdpKGEpKT4tMSxhLnNlbGVjdGVkIT09byYmKGEuc2VsZWN0ZWQ9byk7ZWxzZSBpZihOKFdpKGEpLHIpKXJldHVybiB2b2lkKGUuc2VsZWN0ZWRJbmRleCE9PXMmJihlLnNlbGVjdGVkSW5kZXg9cykpO2l8fChlLnNlbGVjdGVkSW5kZXg9LTEpfX1mdW5jdGlvbiBxaShlLHQpe3JldHVybiB0LmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiFOKHQsZSl9KX1mdW5jdGlvbiBXaShlKXtyZXR1cm4iX3ZhbHVlImluIGU/ZS5fdmFsdWU6ZS52YWx1ZX1mdW5jdGlvbiBaaShlKXtlLnRhcmdldC5jb21wb3Npbmc9ITB9ZnVuY3Rpb24gR2koZSl7ZS50YXJnZXQuY29tcG9zaW5nJiYoZS50YXJnZXQuY29tcG9zaW5nPSExLFhpKGUudGFyZ2V0LCJpbnB1dCIpKX1mdW5jdGlvbiBYaShlLHQpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7bi5pbml0RXZlbnQodCwhMCwhMCksZS5kaXNwYXRjaEV2ZW50KG4pfWZ1bmN0aW9uIFlpKGUpe3JldHVybiFlLmNvbXBvbmVudEluc3RhbmNlfHxlLmRhdGEmJmUuZGF0YS50cmFuc2l0aW9uP2U6WWkoZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpfXZhciBRaT17bW9kZWw6Vmksc2hvdzp7YmluZDpmdW5jdGlvbihlLHQsbil7dmFyIHI9dC52YWx1ZSxpPShuPVlpKG4pKS5kYXRhJiZuLmRhdGEudHJhbnNpdGlvbixvPWUuX192T3JpZ2luYWxEaXNwbGF5PSJub25lIj09PWUuc3R5bGUuZGlzcGxheT8iIjplLnN0eWxlLmRpc3BsYXk7ciYmaT8obi5kYXRhLnNob3c9ITAsUGkobixmdW5jdGlvbigpe2Uuc3R5bGUuZGlzcGxheT1vfSkpOmUuc3R5bGUuZGlzcGxheT1yP286Im5vbmUifSx1cGRhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQudmFsdWU7IXIhPSF0Lm9sZFZhbHVlJiYoKG49WWkobikpLmRhdGEmJm4uZGF0YS50cmFuc2l0aW9uPyhuLmRhdGEuc2hvdz0hMCxyP1BpKG4sZnVuY3Rpb24oKXtlLnN0eWxlLmRpc3BsYXk9ZS5fX3ZPcmlnaW5hbERpc3BsYXl9KTpSaShuLGZ1bmN0aW9uKCl7ZS5zdHlsZS5kaXNwbGF5PSJub25lIn0pKTplLnN0eWxlLmRpc3BsYXk9cj9lLl9fdk9yaWdpbmFsRGlzcGxheToibm9uZSIpfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0LG4scixpKXtpfHwoZS5zdHlsZS5kaXNwbGF5PWUuX192T3JpZ2luYWxEaXNwbGF5KX19fSxlbz17bmFtZTpTdHJpbmcsYXBwZWFyOkJvb2xlYW4sY3NzOkJvb2xlYW4sbW9kZTpTdHJpbmcsdHlwZTpTdHJpbmcsZW50ZXJDbGFzczpTdHJpbmcsbGVhdmVDbGFzczpTdHJpbmcsZW50ZXJUb0NsYXNzOlN0cmluZyxsZWF2ZVRvQ2xhc3M6U3RyaW5nLGVudGVyQWN0aXZlQ2xhc3M6U3RyaW5nLGxlYXZlQWN0aXZlQ2xhc3M6U3RyaW5nLGFwcGVhckNsYXNzOlN0cmluZyxhcHBlYXJBY3RpdmVDbGFzczpTdHJpbmcsYXBwZWFyVG9DbGFzczpTdHJpbmcsZHVyYXRpb246W051bWJlcixTdHJpbmcsT2JqZWN0XX07ZnVuY3Rpb24gdG8oZSl7dmFyIHQ9ZSYmZS5jb21wb25lbnRPcHRpb25zO3JldHVybiB0JiZ0LkN0b3Iub3B0aW9ucy5hYnN0cmFjdD90byh6dCh0LmNoaWxkcmVuKSk6ZX1mdW5jdGlvbiBubyhlKXt2YXIgdD17fSxuPWUuJG9wdGlvbnM7Zm9yKHZhciByIGluIG4ucHJvcHNEYXRhKXRbcl09ZVtyXTt2YXIgaT1uLl9wYXJlbnRMaXN0ZW5lcnM7Zm9yKHZhciBvIGluIGkpdFtiKG8pXT1pW29dO3JldHVybiB0fWZ1bmN0aW9uIHJvKGUsdCl7aWYoL1xkLWtlZXAtYWxpdmUkLy50ZXN0KHQudGFnKSlyZXR1cm4gZSgia2VlcC1hbGl2ZSIse3Byb3BzOnQuY29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGF9KX12YXIgaW89ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnfHxVdChlKX0sb289ZnVuY3Rpb24oZSl7cmV0dXJuInNob3ciPT09ZS5uYW1lfSxhbz17bmFtZToidHJhbnNpdGlvbiIscHJvcHM6ZW8sYWJzdHJhY3Q6ITAscmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLiRzbG90cy5kZWZhdWx0O2lmKG4mJihuPW4uZmlsdGVyKGlvKSkubGVuZ3RoKXt2YXIgcj10aGlzLm1vZGUsbz1uWzBdO2lmKGZ1bmN0aW9uKGUpe2Zvcig7ZT1lLnBhcmVudDspaWYoZS5kYXRhLnRyYW5zaXRpb24pcmV0dXJuITB9KHRoaXMuJHZub2RlKSlyZXR1cm4gbzt2YXIgYT10byhvKTtpZighYSlyZXR1cm4gbztpZih0aGlzLl9sZWF2aW5nKXJldHVybiBybyhlLG8pO3ZhciBzPSJfX3RyYW5zaXRpb24tIit0aGlzLl91aWQrIi0iO2Eua2V5PW51bGw9PWEua2V5P2EuaXNDb21tZW50P3MrImNvbW1lbnQiOnMrYS50YWc6aShhLmtleSk/MD09PVN0cmluZyhhLmtleSkuaW5kZXhPZihzKT9hLmtleTpzK2Eua2V5OmEua2V5O3ZhciBjPShhLmRhdGF8fChhLmRhdGE9e30pKS50cmFuc2l0aW9uPW5vKHRoaXMpLHU9dGhpcy5fdm5vZGUsbD10byh1KTtpZihhLmRhdGEuZGlyZWN0aXZlcyYmYS5kYXRhLmRpcmVjdGl2ZXMuc29tZShvbykmJihhLmRhdGEuc2hvdz0hMCksbCYmbC5kYXRhJiYhZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5rZXk9PT1lLmtleSYmdC50YWc9PT1lLnRhZ30oYSxsKSYmIVV0KGwpJiYoIWwuY29tcG9uZW50SW5zdGFuY2V8fCFsLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZS5pc0NvbW1lbnQpKXt2YXIgZj1sLmRhdGEudHJhbnNpdGlvbj1BKHt9LGMpO2lmKCJvdXQtaW4iPT09cilyZXR1cm4gdGhpcy5fbGVhdmluZz0hMCxpdChmLCJhZnRlckxlYXZlIixmdW5jdGlvbigpe3QuX2xlYXZpbmc9ITEsdC4kZm9yY2VVcGRhdGUoKX0pLHJvKGUsbyk7aWYoImluLW91dCI9PT1yKXtpZihVdChhKSlyZXR1cm4gdTt2YXIgcCxkPWZ1bmN0aW9uKCl7cCgpfTtpdChjLCJhZnRlckVudGVyIixkKSxpdChjLCJlbnRlckNhbmNlbGxlZCIsZCksaXQoZiwiZGVsYXlMZWF2ZSIsZnVuY3Rpb24oZSl7cD1lfSl9fXJldHVybiBvfX19LHNvPUEoe3RhZzpTdHJpbmcsbW92ZUNsYXNzOlN0cmluZ30sZW8pO2Z1bmN0aW9uIGNvKGUpe2UuZWxtLl9tb3ZlQ2ImJmUuZWxtLl9tb3ZlQ2IoKSxlLmVsbS5fZW50ZXJDYiYmZS5lbG0uX2VudGVyQ2IoKX1mdW5jdGlvbiB1byhlKXtlLmRhdGEubmV3UG9zPWUuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWZ1bmN0aW9uIGxvKGUpe3ZhciB0PWUuZGF0YS5wb3Msbj1lLmRhdGEubmV3UG9zLHI9dC5sZWZ0LW4ubGVmdCxpPXQudG9wLW4udG9wO2lmKHJ8fGkpe2UuZGF0YS5tb3ZlZD0hMDt2YXIgbz1lLmVsbS5zdHlsZTtvLnRyYW5zZm9ybT1vLldlYmtpdFRyYW5zZm9ybT0idHJhbnNsYXRlKCIrcisicHgsIitpKyJweCkiLG8udHJhbnNpdGlvbkR1cmF0aW9uPSIwcyJ9fWRlbGV0ZSBzby5tb2RlO3ZhciBmbz17VHJhbnNpdGlvbjphbyxUcmFuc2l0aW9uR3JvdXA6e3Byb3BzOnNvLGJlZm9yZU1vdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX3VwZGF0ZTt0aGlzLl91cGRhdGU9ZnVuY3Rpb24obixyKXt2YXIgaT1adChlKTtlLl9fcGF0Y2hfXyhlLl92bm9kZSxlLmtlcHQsITEsITApLGUuX3Zub2RlPWUua2VwdCxpKCksdC5jYWxsKGUsbixyKX19LHJlbmRlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50YWd8fHRoaXMuJHZub2RlLmRhdGEudGFnfHwic3BhbiIsbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGhpcy5wcmV2Q2hpbGRyZW49dGhpcy5jaGlsZHJlbixpPXRoaXMuJHNsb3RzLmRlZmF1bHR8fFtdLG89dGhpcy5jaGlsZHJlbj1bXSxhPW5vKHRoaXMpLHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGM9aVtzXTtjLnRhZyYmbnVsbCE9Yy5rZXkmJjAhPT1TdHJpbmcoYy5rZXkpLmluZGV4T2YoIl9fdmxpc3QiKSYmKG8ucHVzaChjKSxuW2Mua2V5XT1jLChjLmRhdGF8fChjLmRhdGE9e30pKS50cmFuc2l0aW9uPWEpfWlmKHIpe2Zvcih2YXIgdT1bXSxsPVtdLGY9MDtmPHIubGVuZ3RoO2YrKyl7dmFyIHA9cltmXTtwLmRhdGEudHJhbnNpdGlvbj1hLHAuZGF0YS5wb3M9cC5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbltwLmtleV0/dS5wdXNoKHApOmwucHVzaChwKX10aGlzLmtlcHQ9ZSh0LG51bGwsdSksdGhpcy5yZW1vdmVkPWx9cmV0dXJuIGUodCxudWxsLG8pfSx1cGRhdGVkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcmV2Q2hpbGRyZW4sdD10aGlzLm1vdmVDbGFzc3x8KHRoaXMubmFtZXx8InYiKSsiLW1vdmUiO2UubGVuZ3RoJiZ0aGlzLmhhc01vdmUoZVswXS5lbG0sdCkmJihlLmZvckVhY2goY28pLGUuZm9yRWFjaCh1byksZS5mb3JFYWNoKGxvKSx0aGlzLl9yZWZsb3c9ZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQsZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5tb3ZlZCl7dmFyIG49ZS5lbG0scj1uLnN0eWxlO05pKG4sdCksci50cmFuc2Zvcm09ci5XZWJraXRUcmFuc2Zvcm09ci50cmFuc2l0aW9uRHVyYXRpb249IiIsbi5hZGRFdmVudExpc3RlbmVyKEFpLG4uX21vdmVDYj1mdW5jdGlvbiBlKHIpe3ImJnIudGFyZ2V0IT09bnx8ciYmIS90cmFuc2Zvcm0kLy50ZXN0KHIucHJvcGVydHlOYW1lKXx8KG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihBaSxlKSxuLl9tb3ZlQ2I9bnVsbCxqaShuLHQpKX0pfX0pKX0sbWV0aG9kczp7aGFzTW92ZTpmdW5jdGlvbihlLHQpe2lmKCF3aSlyZXR1cm4hMTtpZih0aGlzLl9oYXNNb3ZlKXJldHVybiB0aGlzLl9oYXNNb3ZlO3ZhciBuPWUuY2xvbmVOb2RlKCk7ZS5fdHJhbnNpdGlvbkNsYXNzZXMmJmUuX3RyYW5zaXRpb25DbGFzc2VzLmZvckVhY2goZnVuY3Rpb24oZSl7X2kobixlKX0pLGdpKG4sdCksbi5zdHlsZS5kaXNwbGF5PSJub25lIix0aGlzLiRlbC5hcHBlbmRDaGlsZChuKTt2YXIgcj1NaShuKTtyZXR1cm4gdGhpcy4kZWwucmVtb3ZlQ2hpbGQobiksdGhpcy5faGFzTW92ZT1yLmhhc1RyYW5zZm9ybX19fX07d24uY29uZmlnLm11c3RVc2VQcm9wPWpuLHduLmNvbmZpZy5pc1Jlc2VydmVkVGFnPVduLHduLmNvbmZpZy5pc1Jlc2VydmVkQXR0cj1Fbix3bi5jb25maWcuZ2V0VGFnTmFtZXNwYWNlPVpuLHduLmNvbmZpZy5pc1Vua25vd25FbGVtZW50PWZ1bmN0aW9uKGUpe2lmKCF6KXJldHVybiEwO2lmKFduKGUpKXJldHVybiExO2lmKGU9ZS50b0xvd2VyQ2FzZSgpLG51bGwhPUduW2VdKXJldHVybiBHbltlXTt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiBlLmluZGV4T2YoIi0iKT4tMT9HbltlXT10LmNvbnN0cnVjdG9yPT09d2luZG93LkhUTUxVbmtub3duRWxlbWVudHx8dC5jb25zdHJ1Y3Rvcj09PXdpbmRvdy5IVE1MRWxlbWVudDpHbltlXT0vSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KHQudG9TdHJpbmcoKSl9LEEod24ub3B0aW9ucy5kaXJlY3RpdmVzLFFpKSxBKHduLm9wdGlvbnMuY29tcG9uZW50cyxmbyksd24ucHJvdG90eXBlLl9fcGF0Y2hfXz16P3ppOlMsd24ucHJvdG90eXBlLiRtb3VudD1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGUuJGVsPXQsZS4kb3B0aW9ucy5yZW5kZXJ8fChlLiRvcHRpb25zLnJlbmRlcj12ZSksWXQoZSwiYmVmb3JlTW91bnQiKSxyPWZ1bmN0aW9uKCl7ZS5fdXBkYXRlKGUuX3JlbmRlcigpLG4pfSxuZXcgZm4oZSxyLFMse2JlZm9yZTpmdW5jdGlvbigpe2UuX2lzTW91bnRlZCYmIWUuX2lzRGVzdHJveWVkJiZZdChlLCJiZWZvcmVVcGRhdGUiKX19LCEwKSxuPSExLG51bGw9PWUuJHZub2RlJiYoZS5faXNNb3VudGVkPSEwLFl0KGUsIm1vdW50ZWQiKSksZX0odGhpcyxlPWUmJno/WW4oZSk6dm9pZCAwLHQpfSx6JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Ri5kZXZ0b29scyYmbmUmJm5lLmVtaXQoImluaXQiLHduKX0sMCk7dmFyIHBvPS9ce1x7KCg/Oi58XHI/XG4pKz8pXH1cfS9nLHZvPS9bLS4qKz9eJHt9KCl8W1xdXC9cXF0vZyxobz1nKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0ucmVwbGFjZSh2bywiXFwkJiIpLG49ZVsxXS5yZXBsYWNlKHZvLCJcXCQmIik7cmV0dXJuIG5ldyBSZWdFeHAodCsiKCg/Oi58XFxuKSs/KSIrbiwiZyIpfSk7dmFyIG1vPXtzdGF0aWNLZXlzOlsic3RhdGljQ2xhc3MiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsImNsYXNzIik7biYmKGUuc3RhdGljQ2xhc3M9SlNPTi5zdHJpbmdpZnkobikpO3ZhciByPUlyKGUsImNsYXNzIiwhMSk7ciYmKGUuY2xhc3NCaW5kaW5nPXIpfSxnZW5EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PSIiO3JldHVybiBlLnN0YXRpY0NsYXNzJiYodCs9InN0YXRpY0NsYXNzOiIrZS5zdGF0aWNDbGFzcysiLCIpLGUuY2xhc3NCaW5kaW5nJiYodCs9ImNsYXNzOiIrZS5jbGFzc0JpbmRpbmcrIiwiKSx0fX07dmFyIHlvLGdvPXtzdGF0aWNLZXlzOlsic3RhdGljU3R5bGUiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsInN0eWxlIik7biYmKGUuc3RhdGljU3R5bGU9SlNPTi5zdHJpbmdpZnkoYWkobikpKTt2YXIgcj1JcihlLCJzdHlsZSIsITEpO3ImJihlLnN0eWxlQmluZGluZz1yKX0sZ2VuRGF0YTpmdW5jdGlvbihlKXt2YXIgdD0iIjtyZXR1cm4gZS5zdGF0aWNTdHlsZSYmKHQrPSJzdGF0aWNTdHlsZToiK2Uuc3RhdGljU3R5bGUrIiwiKSxlLnN0eWxlQmluZGluZyYmKHQrPSJzdHlsZTooIitlLnN0eWxlQmluZGluZysiKSwiKSx0fX0sX289ZnVuY3Rpb24oZSl7cmV0dXJuKHlvPXlvfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWUseW8udGV4dENvbnRlbnR9LGJvPXAoImFyZWEsYmFzZSxicixjb2wsZW1iZWQsZnJhbWUsaHIsaW1nLGlucHV0LGlzaW5kZXgsa2V5Z2VuLGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyIiksJG89cCgiY29sZ3JvdXAsZGQsZHQsbGksb3B0aW9ucyxwLHRkLHRmb290LHRoLHRoZWFkLHRyLHNvdXJjZSIpLHdvPXAoImFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxiYXNlLGJsb2NrcXVvdGUsYm9keSxjYXB0aW9uLGNvbCxjb2xncm91cCxkZCxkZXRhaWxzLGRpYWxvZyxkaXYsZGwsZHQsZmllbGRzZXQsZmlnY2FwdGlvbixmaWd1cmUsZm9vdGVyLGZvcm0saDEsaDIsaDMsaDQsaDUsaDYsaGVhZCxoZWFkZXIsaGdyb3VwLGhyLGh0bWwsbGVnZW5kLGxpLG1lbnVpdGVtLG1ldGEsb3B0Z3JvdXAsb3B0aW9uLHBhcmFtLHJwLHJ0LHNvdXJjZSxzdHlsZSxzdW1tYXJ5LHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRpdGxlLHRyLHRyYWNrIiksQ289L15ccyooW15ccyInPD5cLz1dKykoPzpccyooPSlccyooPzoiKFteIl0qKSIrfCcoW14nXSopJyt8KFteXHMiJz08PmBdKykpKT8vLHhvPS9eXHMqKCg/OnYtW1x3LV0rOnxAfDp8IylcW1tePV0rXF1bXlxzIic8PlwvPV0qKSg/OlxzKig9KVxzKig/OiIoW14iXSopIit8JyhbXiddKiknK3woW15ccyInPTw+YF0rKSkpPy8sa289IlthLXpBLVpfXVtcXC1cXC4wLTlfYS16QS1aIitQLnNvdXJjZSsiXSoiLEFvPSIoKD86IitrbysiXFw6KT8iK2tvKyIpIixPbz1uZXcgUmVnRXhwKCJePCIrQW8pLFNvPS9eXHMqKFwvPyk+LyxUbz1uZXcgUmVnRXhwKCJePFxcLyIrQW8rIltePl0qPiIpLEVvPS9ePCFET0NUWVBFIFtePl0rPi9pLE5vPS9ePCFcLS0vLGpvPS9ePCFcWy8sRG89cCgic2NyaXB0LHN0eWxlLHRleHRhcmVhIiwhMCksTG89e30sTW89eyImbHQ7IjoiPCIsIiZndDsiOiI+IiwiJnF1b3Q7IjonIicsIiZhbXA7IjoiJiIsIiYjMTA7IjoiXG4iLCImIzk7IjoiXHQiLCImIzM5OyI6IicifSxJbz0vJig/Omx0fGd0fHF1b3R8YW1wfCMzOSk7L2csRm89LyYoPzpsdHxndHxxdW90fGFtcHwjMzl8IzEwfCM5KTsvZyxQbz1wKCJwcmUsdGV4dGFyZWEiLCEwKSxSbz1mdW5jdGlvbihlLHQpe3JldHVybiBlJiZQbyhlKSYmIlxuIj09PXRbMF19O2Z1bmN0aW9uIEhvKGUsdCl7dmFyIG49dD9GbzpJbztyZXR1cm4gZS5yZXBsYWNlKG4sZnVuY3Rpb24oZSl7cmV0dXJuIE1vW2VdfSl9dmFyIEJvLFVvLHpvLFZvLEtvLEpvLHFvLFdvLFpvPS9eQHxedi1vbjovLEdvPS9edi18XkB8Xjp8XiMvLFhvPS8oW1xzXFNdKj8pXHMrKD86aW58b2YpXHMrKFtcc1xTXSopLyxZbz0vLChbXixcfVxdXSopKD86LChbXixcfVxdXSopKT8kLyxRbz0vXlwofFwpJC9nLGVhPS9eXFsuKlxdJC8sdGE9LzooLiopJC8sbmE9L146fF5cLnxedi1iaW5kOi8scmE9L1wuW14uXF1dKyg/PVteXF1dKiQpL2csaWE9L152LXNsb3QoOnwkKXxeIy8sb2E9L1tcclxuXS8sYWE9L1xzKy9nLHNhPWcoX28pLGNhPSJfZW1wdHlfIjtmdW5jdGlvbiB1YShlLHQsbil7cmV0dXJue3R5cGU6MSx0YWc6ZSxhdHRyc0xpc3Q6dCxhdHRyc01hcDptYSh0KSxyYXdBdHRyc01hcDp7fSxwYXJlbnQ6bixjaGlsZHJlbjpbXX19ZnVuY3Rpb24gbGEoZSx0KXtCbz10Lndhcm58fFNyLEpvPXQuaXNQcmVUYWd8fFQscW89dC5tdXN0VXNlUHJvcHx8VCxXbz10LmdldFRhZ05hbWVzcGFjZXx8VDt0LmlzUmVzZXJ2ZWRUYWc7em89VHIodC5tb2R1bGVzLCJ0cmFuc2Zvcm1Ob2RlIiksVm89VHIodC5tb2R1bGVzLCJwcmVUcmFuc2Zvcm1Ob2RlIiksS289VHIodC5tb2R1bGVzLCJwb3N0VHJhbnNmb3JtTm9kZSIpLFVvPXQuZGVsaW1pdGVyczt2YXIgbixyLGk9W10sbz0hMSE9PXQucHJlc2VydmVXaGl0ZXNwYWNlLGE9dC53aGl0ZXNwYWNlLHM9ITEsYz0hMTtmdW5jdGlvbiB1KGUpe2lmKGwoZSksc3x8ZS5wcm9jZXNzZWR8fChlPWZhKGUsdCkpLGkubGVuZ3RofHxlPT09bnx8bi5pZiYmKGUuZWxzZWlmfHxlLmVsc2UpJiZkYShuLHtleHA6ZS5lbHNlaWYsYmxvY2s6ZX0pLHImJiFlLmZvcmJpZGRlbilpZihlLmVsc2VpZnx8ZS5lbHNlKWE9ZSwodT1mdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aDtmb3IoO3QtLTspe2lmKDE9PT1lW3RdLnR5cGUpcmV0dXJuIGVbdF07ZS5wb3AoKX19KHIuY2hpbGRyZW4pKSYmdS5pZiYmZGEodSx7ZXhwOmEuZWxzZWlmLGJsb2NrOmF9KTtlbHNle2lmKGUuc2xvdFNjb3BlKXt2YXIgbz1lLnNsb3RUYXJnZXR8fCciZGVmYXVsdCInOyhyLnNjb3BlZFNsb3RzfHwoci5zY29wZWRTbG90cz17fSkpW29dPWV9ci5jaGlsZHJlbi5wdXNoKGUpLGUucGFyZW50PXJ9dmFyIGEsdTtlLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlLnNsb3RTY29wZX0pLGwoZSksZS5wcmUmJihzPSExKSxKbyhlLnRhZykmJihjPSExKTtmb3IodmFyIGY9MDtmPEtvLmxlbmd0aDtmKyspS29bZl0oZSx0KX1mdW5jdGlvbiBsKGUpe2lmKCFjKWZvcih2YXIgdDsodD1lLmNoaWxkcmVuW2UuY2hpbGRyZW4ubGVuZ3RoLTFdKSYmMz09PXQudHlwZSYmIiAiPT09dC50ZXh0OyllLmNoaWxkcmVuLnBvcCgpfXJldHVybiBmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyLGk9W10sbz10LmV4cGVjdEhUTUwsYT10LmlzVW5hcnlUYWd8fFQscz10LmNhbkJlTGVmdE9wZW5UYWd8fFQsYz0wO2U7KXtpZihuPWUsciYmRG8ocikpe3ZhciB1PTAsbD1yLnRvTG93ZXJDYXNlKCksZj1Mb1tsXXx8KExvW2xdPW5ldyBSZWdFeHAoIihbXFxzXFxTXSo/KSg8LyIrbCsiW14+XSo+KSIsImkiKSkscD1lLnJlcGxhY2UoZixmdW5jdGlvbihlLG4scil7cmV0dXJuIHU9ci5sZW5ndGgsRG8obCl8fCJub3NjcmlwdCI9PT1sfHwobj1uLnJlcGxhY2UoLzwhXC0tKFtcc1xTXSo/KS0tPi9nLCIkMSIpLnJlcGxhY2UoLzwhXFtDREFUQVxbKFtcc1xTXSo/KV1dPi9nLCIkMSIpKSxSbyhsLG4pJiYobj1uLnNsaWNlKDEpKSx0LmNoYXJzJiZ0LmNoYXJzKG4pLCIifSk7Yys9ZS5sZW5ndGgtcC5sZW5ndGgsZT1wLEEobCxjLXUsYyl9ZWxzZXt2YXIgZD1lLmluZGV4T2YoIjwiKTtpZigwPT09ZCl7aWYoTm8udGVzdChlKSl7dmFyIHY9ZS5pbmRleE9mKCItLVx4M2UiKTtpZih2Pj0wKXt0LnNob3VsZEtlZXBDb21tZW50JiZ0LmNvbW1lbnQoZS5zdWJzdHJpbmcoNCx2KSxjLGMrdiszKSxDKHYrMyk7Y29udGludWV9fWlmKGpvLnRlc3QoZSkpe3ZhciBoPWUuaW5kZXhPZigiXT4iKTtpZihoPj0wKXtDKGgrMik7Y29udGludWV9fXZhciBtPWUubWF0Y2goRW8pO2lmKG0pe0MobVswXS5sZW5ndGgpO2NvbnRpbnVlfXZhciB5PWUubWF0Y2goVG8pO2lmKHkpe3ZhciBnPWM7Qyh5WzBdLmxlbmd0aCksQSh5WzFdLGcsYyk7Y29udGludWV9dmFyIF89eCgpO2lmKF8pe2soXyksUm8oXy50YWdOYW1lLGUpJiZDKDEpO2NvbnRpbnVlfX12YXIgYj12b2lkIDAsJD12b2lkIDAsdz12b2lkIDA7aWYoZD49MCl7Zm9yKCQ9ZS5zbGljZShkKTshKFRvLnRlc3QoJCl8fE9vLnRlc3QoJCl8fE5vLnRlc3QoJCl8fGpvLnRlc3QoJCl8fCh3PSQuaW5kZXhPZigiPCIsMSkpPDApOylkKz13LCQ9ZS5zbGljZShkKTtiPWUuc3Vic3RyaW5nKDAsZCl9ZDwwJiYoYj1lKSxiJiZDKGIubGVuZ3RoKSx0LmNoYXJzJiZiJiZ0LmNoYXJzKGIsYy1iLmxlbmd0aCxjKX1pZihlPT09bil7dC5jaGFycyYmdC5jaGFycyhlKTticmVha319ZnVuY3Rpb24gQyh0KXtjKz10LGU9ZS5zdWJzdHJpbmcodCl9ZnVuY3Rpb24geCgpe3ZhciB0PWUubWF0Y2goT28pO2lmKHQpe3ZhciBuLHIsaT17dGFnTmFtZTp0WzFdLGF0dHJzOltdLHN0YXJ0OmN9O2ZvcihDKHRbMF0ubGVuZ3RoKTshKG49ZS5tYXRjaChTbykpJiYocj1lLm1hdGNoKHhvKXx8ZS5tYXRjaChDbykpOylyLnN0YXJ0PWMsQyhyWzBdLmxlbmd0aCksci5lbmQ9YyxpLmF0dHJzLnB1c2gocik7aWYobilyZXR1cm4gaS51bmFyeVNsYXNoPW5bMV0sQyhuWzBdLmxlbmd0aCksaS5lbmQ9YyxpfX1mdW5jdGlvbiBrKGUpe3ZhciBuPWUudGFnTmFtZSxjPWUudW5hcnlTbGFzaDtvJiYoInAiPT09ciYmd28obikmJkEocikscyhuKSYmcj09PW4mJkEobikpO2Zvcih2YXIgdT1hKG4pfHwhIWMsbD1lLmF0dHJzLmxlbmd0aCxmPW5ldyBBcnJheShsKSxwPTA7cDxsO3ArKyl7dmFyIGQ9ZS5hdHRyc1twXSx2PWRbM118fGRbNF18fGRbNV18fCIiLGg9ImEiPT09biYmImhyZWYiPT09ZFsxXT90LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzO2ZbcF09e25hbWU6ZFsxXSx2YWx1ZTpIbyh2LGgpfX11fHwoaS5wdXNoKHt0YWc6bixsb3dlckNhc2VkVGFnOm4udG9Mb3dlckNhc2UoKSxhdHRyczpmLHN0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kfSkscj1uKSx0LnN0YXJ0JiZ0LnN0YXJ0KG4sZix1LGUuc3RhcnQsZS5lbmQpfWZ1bmN0aW9uIEEoZSxuLG8pe3ZhciBhLHM7aWYobnVsbD09biYmKG49YyksbnVsbD09byYmKG89YyksZSlmb3Iocz1lLnRvTG93ZXJDYXNlKCksYT1pLmxlbmd0aC0xO2E+PTAmJmlbYV0ubG93ZXJDYXNlZFRhZyE9PXM7YS0tKTtlbHNlIGE9MDtpZihhPj0wKXtmb3IodmFyIHU9aS5sZW5ndGgtMTt1Pj1hO3UtLSl0LmVuZCYmdC5lbmQoaVt1XS50YWcsbixvKTtpLmxlbmd0aD1hLHI9YSYmaVthLTFdLnRhZ31lbHNlImJyIj09PXM/dC5zdGFydCYmdC5zdGFydChlLFtdLCEwLG4sbyk6InAiPT09cyYmKHQuc3RhcnQmJnQuc3RhcnQoZSxbXSwhMSxuLG8pLHQuZW5kJiZ0LmVuZChlLG4sbykpfUEoKX0oZSx7d2FybjpCbyxleHBlY3RIVE1MOnQuZXhwZWN0SFRNTCxpc1VuYXJ5VGFnOnQuaXNVbmFyeVRhZyxjYW5CZUxlZnRPcGVuVGFnOnQuY2FuQmVMZWZ0T3BlblRhZyxzaG91bGREZWNvZGVOZXdsaW5lczp0LnNob3VsZERlY29kZU5ld2xpbmVzLHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZixzaG91bGRLZWVwQ29tbWVudDp0LmNvbW1lbnRzLG91dHB1dFNvdXJjZVJhbmdlOnQub3V0cHV0U291cmNlUmFuZ2Usc3RhcnQ6ZnVuY3Rpb24oZSxvLGEsbCxmKXt2YXIgcD1yJiZyLm5zfHxXbyhlKTtxJiYic3ZnIj09PXAmJihvPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07eWEudGVzdChyLm5hbWUpfHwoci5uYW1lPXIubmFtZS5yZXBsYWNlKGdhLCIiKSx0LnB1c2gocikpfXJldHVybiB0fShvKSk7dmFyIGQsdj11YShlLG8scik7cCYmKHYubnM9cCksInN0eWxlIiE9PShkPXYpLnRhZyYmKCJzY3JpcHQiIT09ZC50YWd8fGQuYXR0cnNNYXAudHlwZSYmInRleHQvamF2YXNjcmlwdCIhPT1kLmF0dHJzTWFwLnR5cGUpfHx0ZSgpfHwodi5mb3JiaWRkZW49ITApO2Zvcih2YXIgaD0wO2g8Vm8ubGVuZ3RoO2grKyl2PVZvW2hdKHYsdCl8fHY7c3x8KCFmdW5jdGlvbihlKXtudWxsIT1GcihlLCJ2LXByZSIpJiYoZS5wcmU9ITApfSh2KSx2LnByZSYmKHM9ITApKSxKbyh2LnRhZykmJihjPSEwKSxzP2Z1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cnNMaXN0LG49dC5sZW5ndGg7aWYobilmb3IodmFyIHI9ZS5hdHRycz1uZXcgQXJyYXkobiksaT0wO2k8bjtpKyspcltpXT17bmFtZTp0W2ldLm5hbWUsdmFsdWU6SlNPTi5zdHJpbmdpZnkodFtpXS52YWx1ZSl9LG51bGwhPXRbaV0uc3RhcnQmJihyW2ldLnN0YXJ0PXRbaV0uc3RhcnQscltpXS5lbmQ9dFtpXS5lbmQpO2Vsc2UgZS5wcmV8fChlLnBsYWluPSEwKX0odik6di5wcm9jZXNzZWR8fChwYSh2KSxmdW5jdGlvbihlKXt2YXIgdD1GcihlLCJ2LWlmIik7aWYodCllLmlmPXQsZGEoZSx7ZXhwOnQsYmxvY2s6ZX0pO2Vsc2V7bnVsbCE9RnIoZSwidi1lbHNlIikmJihlLmVsc2U9ITApO3ZhciBuPUZyKGUsInYtZWxzZS1pZiIpO24mJihlLmVsc2VpZj1uKX19KHYpLGZ1bmN0aW9uKGUpe251bGwhPUZyKGUsInYtb25jZSIpJiYoZS5vbmNlPSEwKX0odikpLG58fChuPXYpLGE/dSh2KToocj12LGkucHVzaCh2KSl9LGVuZDpmdW5jdGlvbihlLHQsbil7dmFyIG89aVtpLmxlbmd0aC0xXTtpLmxlbmd0aC09MSxyPWlbaS5sZW5ndGgtMV0sdShvKX0sY2hhcnM6ZnVuY3Rpb24oZSx0LG4pe2lmKHImJighcXx8InRleHRhcmVhIiE9PXIudGFnfHxyLmF0dHJzTWFwLnBsYWNlaG9sZGVyIT09ZSkpe3ZhciBpLHUsbCxmPXIuY2hpbGRyZW47aWYoZT1jfHxlLnRyaW0oKT8ic2NyaXB0Ij09PShpPXIpLnRhZ3x8InN0eWxlIj09PWkudGFnP2U6c2EoZSk6Zi5sZW5ndGg/YT8iY29uZGVuc2UiPT09YSYmb2EudGVzdChlKT8iIjoiICI6bz8iICI6IiI6IiIpY3x8ImNvbmRlbnNlIiE9PWF8fChlPWUucmVwbGFjZShhYSwiICIpKSwhcyYmIiAiIT09ZSYmKHU9ZnVuY3Rpb24oZSx0KXt2YXIgbj10P2hvKHQpOnBvO2lmKG4udGVzdChlKSl7Zm9yKHZhciByLGksbyxhPVtdLHM9W10sYz1uLmxhc3RJbmRleD0wO3I9bi5leGVjKGUpOyl7KGk9ci5pbmRleCk+YyYmKHMucHVzaChvPWUuc2xpY2UoYyxpKSksYS5wdXNoKEpTT04uc3RyaW5naWZ5KG8pKSk7dmFyIHU9QXIoclsxXS50cmltKCkpO2EucHVzaCgiX3MoIit1KyIpIikscy5wdXNoKHsiQGJpbmRpbmciOnV9KSxjPWkrclswXS5sZW5ndGh9cmV0dXJuIGM8ZS5sZW5ndGgmJihzLnB1c2gobz1lLnNsaWNlKGMpKSxhLnB1c2goSlNPTi5zdHJpbmdpZnkobykpKSx7ZXhwcmVzc2lvbjphLmpvaW4oIisiKSx0b2tlbnM6c319fShlLFVvKSk/bD17dHlwZToyLGV4cHJlc3Npb246dS5leHByZXNzaW9uLHRva2Vuczp1LnRva2Vucyx0ZXh0OmV9OiIgIj09PWUmJmYubGVuZ3RoJiYiICI9PT1mW2YubGVuZ3RoLTFdLnRleHR8fChsPXt0eXBlOjMsdGV4dDplfSksbCYmZi5wdXNoKGwpfX0sY29tbWVudDpmdW5jdGlvbihlLHQsbil7aWYocil7dmFyIGk9e3R5cGU6Myx0ZXh0OmUsaXNDb21tZW50OiEwfTtyLmNoaWxkcmVuLnB1c2goaSl9fX0pLG59ZnVuY3Rpb24gZmEoZSx0KXt2YXIgbixyOyhyPUlyKG49ZSwia2V5IikpJiYobi5rZXk9ciksZS5wbGFpbj0hZS5rZXkmJiFlLnNjb3BlZFNsb3RzJiYhZS5hdHRyc0xpc3QubGVuZ3RoLGZ1bmN0aW9uKGUpe3ZhciB0PUlyKGUsInJlZiIpO3QmJihlLnJlZj10LGUucmVmSW5Gb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtmb3IoO3Q7KXtpZih2b2lkIDAhPT10LmZvcilyZXR1cm4hMDt0PXQucGFyZW50fXJldHVybiExfShlKSl9KGUpLGZ1bmN0aW9uKGUpe3ZhciB0OyJ0ZW1wbGF0ZSI9PT1lLnRhZz8odD1GcihlLCJzY29wZSIpLGUuc2xvdFNjb3BlPXR8fEZyKGUsInNsb3Qtc2NvcGUiKSk6KHQ9RnIoZSwic2xvdC1zY29wZSIpKSYmKGUuc2xvdFNjb3BlPXQpO3ZhciBuPUlyKGUsInNsb3QiKTtuJiYoZS5zbG90VGFyZ2V0PSciIic9PT1uPyciZGVmYXVsdCInOm4sZS5zbG90VGFyZ2V0RHluYW1pYz0hKCFlLmF0dHJzTWFwWyI6c2xvdCJdJiYhZS5hdHRyc01hcFsidi1iaW5kOnNsb3QiXSksInRlbXBsYXRlIj09PWUudGFnfHxlLnNsb3RTY29wZXx8TnIoZSwic2xvdCIsbixmdW5jdGlvbihlLHQpe3JldHVybiBlLnJhd0F0dHJzTWFwWyI6Iit0XXx8ZS5yYXdBdHRyc01hcFsidi1iaW5kOiIrdF18fGUucmF3QXR0cnNNYXBbdF19KGUsInNsb3QiKSkpO2lmKCJ0ZW1wbGF0ZSI9PT1lLnRhZyl7dmFyIHI9UHIoZSxpYSk7aWYocil7dmFyIGk9dmEociksbz1pLm5hbWUsYT1pLmR5bmFtaWM7ZS5zbG90VGFyZ2V0PW8sZS5zbG90VGFyZ2V0RHluYW1pYz1hLGUuc2xvdFNjb3BlPXIudmFsdWV8fGNhfX1lbHNle3ZhciBzPVByKGUsaWEpO2lmKHMpe3ZhciBjPWUuc2NvcGVkU2xvdHN8fChlLnNjb3BlZFNsb3RzPXt9KSx1PXZhKHMpLGw9dS5uYW1lLGY9dS5keW5hbWljLHA9Y1tsXT11YSgidGVtcGxhdGUiLFtdLGUpO3Auc2xvdFRhcmdldD1sLHAuc2xvdFRhcmdldER5bmFtaWM9ZixwLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe2lmKCFlLnNsb3RTY29wZSlyZXR1cm4gZS5wYXJlbnQ9cCwhMH0pLHAuc2xvdFNjb3BlPXMudmFsdWV8fGNhLGUuY2hpbGRyZW49W10sZS5wbGFpbj0hMX19fShlKSxmdW5jdGlvbihlKXsic2xvdCI9PT1lLnRhZyYmKGUuc2xvdE5hbWU9SXIoZSwibmFtZSIpKX0oZSksZnVuY3Rpb24oZSl7dmFyIHQ7KHQ9SXIoZSwiaXMiKSkmJihlLmNvbXBvbmVudD10KTtudWxsIT1GcihlLCJpbmxpbmUtdGVtcGxhdGUiKSYmKGUuaW5saW5lVGVtcGxhdGU9ITApfShlKTtmb3IodmFyIGk9MDtpPHpvLmxlbmd0aDtpKyspZT16b1tpXShlLHQpfHxlO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscyxjLHU9ZS5hdHRyc0xpc3Q7Zm9yKHQ9MCxuPXUubGVuZ3RoO3Q8bjt0KyspaWYocj1pPXVbdF0ubmFtZSxvPXVbdF0udmFsdWUsR28udGVzdChyKSlpZihlLmhhc0JpbmRpbmdzPSEwLChhPWhhKHIucmVwbGFjZShHbywiIikpKSYmKHI9ci5yZXBsYWNlKHJhLCIiKSksbmEudGVzdChyKSlyPXIucmVwbGFjZShuYSwiIiksbz1BcihvKSwoYz1lYS50ZXN0KHIpKSYmKHI9ci5zbGljZSgxLC0xKSksYSYmKGEucHJvcCYmIWMmJiJpbm5lckh0bWwiPT09KHI9YihyKSkmJihyPSJpbm5lckhUTUwiKSxhLmNhbWVsJiYhYyYmKHI9YihyKSksYS5zeW5jJiYocz1CcihvLCIkZXZlbnQiKSxjP01yKGUsJyJ1cGRhdGU6IisoJytyKyIpIixzLG51bGwsITEsMCx1W3RdLCEwKTooTXIoZSwidXBkYXRlOiIrYihyKSxzLG51bGwsITEsMCx1W3RdKSxDKHIpIT09YihyKSYmTXIoZSwidXBkYXRlOiIrQyhyKSxzLG51bGwsITEsMCx1W3RdKSkpKSxhJiZhLnByb3B8fCFlLmNvbXBvbmVudCYmcW8oZS50YWcsZS5hdHRyc01hcC50eXBlLHIpP0VyKGUscixvLHVbdF0sYyk6TnIoZSxyLG8sdVt0XSxjKTtlbHNlIGlmKFpvLnRlc3Qocikpcj1yLnJlcGxhY2UoWm8sIiIpLChjPWVhLnRlc3QocikpJiYocj1yLnNsaWNlKDEsLTEpKSxNcihlLHIsbyxhLCExLDAsdVt0XSxjKTtlbHNle3ZhciBsPShyPXIucmVwbGFjZShHbywiIikpLm1hdGNoKHRhKSxmPWwmJmxbMV07Yz0hMSxmJiYocj1yLnNsaWNlKDAsLShmLmxlbmd0aCsxKSksZWEudGVzdChmKSYmKGY9Zi5zbGljZSgxLC0xKSxjPSEwKSksRHIoZSxyLGksbyxmLGMsYSx1W3RdKX1lbHNlIE5yKGUscixKU09OLnN0cmluZ2lmeShvKSx1W3RdKSwhZS5jb21wb25lbnQmJiJtdXRlZCI9PT1yJiZxbyhlLnRhZyxlLmF0dHJzTWFwLnR5cGUscikmJkVyKGUsciwidHJ1ZSIsdVt0XSl9KGUpLGV9ZnVuY3Rpb24gcGEoZSl7dmFyIHQ7aWYodD1GcihlLCJ2LWZvciIpKXt2YXIgbj1mdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKFhvKTtpZighdClyZXR1cm47dmFyIG49e307bi5mb3I9dFsyXS50cmltKCk7dmFyIHI9dFsxXS50cmltKCkucmVwbGFjZShRbywiIiksaT1yLm1hdGNoKFlvKTtpPyhuLmFsaWFzPXIucmVwbGFjZShZbywiIikudHJpbSgpLG4uaXRlcmF0b3IxPWlbMV0udHJpbSgpLGlbMl0mJihuLml0ZXJhdG9yMj1pWzJdLnRyaW0oKSkpOm4uYWxpYXM9cjtyZXR1cm4gbn0odCk7biYmQShlLG4pfX1mdW5jdGlvbiBkYShlLHQpe2UuaWZDb25kaXRpb25zfHwoZS5pZkNvbmRpdGlvbnM9W10pLGUuaWZDb25kaXRpb25zLnB1c2godCl9ZnVuY3Rpb24gdmEoZSl7dmFyIHQ9ZS5uYW1lLnJlcGxhY2UoaWEsIiIpO3JldHVybiB0fHwiIyIhPT1lLm5hbWVbMF0mJih0PSJkZWZhdWx0IiksZWEudGVzdCh0KT97bmFtZTp0LnNsaWNlKDEsLTEpLGR5bmFtaWM6ITB9OntuYW1lOiciJyt0KyciJyxkeW5hbWljOiExfX1mdW5jdGlvbiBoYShlKXt2YXIgdD1lLm1hdGNoKHJhKTtpZih0KXt2YXIgbj17fTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe25bZS5zbGljZSgxKV09ITB9KSxufX1mdW5jdGlvbiBtYShlKXtmb3IodmFyIHQ9e30sbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl0W2Vbbl0ubmFtZV09ZVtuXS52YWx1ZTtyZXR1cm4gdH12YXIgeWE9L154bWxuczpOU1xkKy8sZ2E9L15OU1xkKzovO2Z1bmN0aW9uIF9hKGUpe3JldHVybiB1YShlLnRhZyxlLmF0dHJzTGlzdC5zbGljZSgpLGUucGFyZW50KX12YXIgYmE9W21vLGdvLHtwcmVUcmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0Ij09PWUudGFnKXt2YXIgbixyPWUuYXR0cnNNYXA7aWYoIXJbInYtbW9kZWwiXSlyZXR1cm47aWYoKHJbIjp0eXBlIl18fHJbInYtYmluZDp0eXBlIl0pJiYobj1JcihlLCJ0eXBlIikpLHIudHlwZXx8bnx8IXJbInYtYmluZCJdfHwobj0iKCIrclsidi1iaW5kIl0rIikudHlwZSIpLG4pe3ZhciBpPUZyKGUsInYtaWYiLCEwKSxvPWk/IiYmKCIraSsiKSI6IiIsYT1udWxsIT1GcihlLCJ2LWVsc2UiLCEwKSxzPUZyKGUsInYtZWxzZS1pZiIsITApLGM9X2EoZSk7cGEoYyksanIoYywidHlwZSIsImNoZWNrYm94IiksZmEoYyx0KSxjLnByb2Nlc3NlZD0hMCxjLmlmPSIoIituKyIpPT09J2NoZWNrYm94JyIrbyxkYShjLHtleHA6Yy5pZixibG9jazpjfSk7dmFyIHU9X2EoZSk7RnIodSwidi1mb3IiLCEwKSxqcih1LCJ0eXBlIiwicmFkaW8iKSxmYSh1LHQpLGRhKGMse2V4cDoiKCIrbisiKT09PSdyYWRpbyciK28sYmxvY2s6dX0pO3ZhciBsPV9hKGUpO3JldHVybiBGcihsLCJ2LWZvciIsITApLGpyKGwsIjp0eXBlIixuKSxmYShsLHQpLGRhKGMse2V4cDppLGJsb2NrOmx9KSxhP2MuZWxzZT0hMDpzJiYoYy5lbHNlaWY9cyksY319fX1dO3ZhciAkYSx3YSxDYT17ZXhwZWN0SFRNTDohMCxtb2R1bGVzOmJhLGRpcmVjdGl2ZXM6e21vZGVsOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10LnZhbHVlLGk9dC5tb2RpZmllcnMsbz1lLnRhZyxhPWUuYXR0cnNNYXAudHlwZTtpZihlLmNvbXBvbmVudClyZXR1cm4gSHIoZSxyLGkpLCExO2lmKCJzZWxlY3QiPT09bykhZnVuY3Rpb24oZSx0LG4pe3ZhciByPSd2YXIgJCRzZWxlY3RlZFZhbCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsZnVuY3Rpb24obyl7cmV0dXJuIG8uc2VsZWN0ZWR9KS5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9ICJfdmFsdWUiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7cmV0dXJuICcrKG4mJm4ubnVtYmVyPyJfbih2YWwpIjoidmFsIikrIn0pOyI7cj1yKyIgIitCcih0LCIkZXZlbnQudGFyZ2V0Lm11bHRpcGxlID8gJCRzZWxlY3RlZFZhbCA6ICQkc2VsZWN0ZWRWYWxbMF0iKSxNcihlLCJjaGFuZ2UiLHIsbnVsbCwhMCl9KGUscixpKTtlbHNlIGlmKCJpbnB1dCI9PT1vJiYiY2hlY2tib3giPT09YSkhZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4mJm4ubnVtYmVyLGk9SXIoZSwidmFsdWUiKXx8Im51bGwiLG89SXIoZSwidHJ1ZS12YWx1ZSIpfHwidHJ1ZSIsYT1JcihlLCJmYWxzZS12YWx1ZSIpfHwiZmFsc2UiO0VyKGUsImNoZWNrZWQiLCJBcnJheS5pc0FycmF5KCIrdCsiKT9faSgiK3QrIiwiK2krIik+LTEiKygidHJ1ZSI9PT1vPyI6KCIrdCsiKSI6IjpfcSgiK3QrIiwiK28rIikiKSksTXIoZSwiY2hhbmdlIiwidmFyICQkYT0iK3QrIiwkJGVsPSRldmVudC50YXJnZXQsJCRjPSQkZWwuY2hlY2tlZD8oIitvKyIpOigiK2ErIik7aWYoQXJyYXkuaXNBcnJheSgkJGEpKXt2YXIgJCR2PSIrKHI/Il9uKCIraSsiKSI6aSkrIiwkJGk9X2koJCRhLCQkdik7aWYoJCRlbC5jaGVja2VkKXskJGk8MCYmKCIrQnIodCwiJCRhLmNvbmNhdChbJCR2XSkiKSsiKX1lbHNleyQkaT4tMSYmKCIrQnIodCwiJCRhLnNsaWNlKDAsJCRpKS5jb25jYXQoJCRhLnNsaWNlKCQkaSsxKSkiKSsiKX19ZWxzZXsiK0JyKHQsIiQkYyIpKyJ9IixudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW8mJiJyYWRpbyI9PT1hKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9biYmbi5udW1iZXIsaT1JcihlLCJ2YWx1ZSIpfHwibnVsbCI7RXIoZSwiY2hlY2tlZCIsIl9xKCIrdCsiLCIrKGk9cj8iX24oIitpKyIpIjppKSsiKSIpLE1yKGUsImNoYW5nZSIsQnIodCxpKSxudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW98fCJ0ZXh0YXJlYSI9PT1vKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9ZS5hdHRyc01hcC50eXBlLGk9bnx8e30sbz1pLmxhenksYT1pLm51bWJlcixzPWkudHJpbSxjPSFvJiYicmFuZ2UiIT09cix1PW8/ImNoYW5nZSI6InJhbmdlIj09PXI/V3I6ImlucHV0IixsPSIkZXZlbnQudGFyZ2V0LnZhbHVlIjtzJiYobD0iJGV2ZW50LnRhcmdldC52YWx1ZS50cmltKCkiKSxhJiYobD0iX24oIitsKyIpIik7dmFyIGY9QnIodCxsKTtjJiYoZj0iaWYoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpcmV0dXJuOyIrZiksRXIoZSwidmFsdWUiLCIoIit0KyIpIiksTXIoZSx1LGYsbnVsbCwhMCksKHN8fGEpJiZNcihlLCJibHVyIiwiJGZvcmNlVXBkYXRlKCkiKX0oZSxyLGkpO2Vsc2UgaWYoIUYuaXNSZXNlcnZlZFRhZyhvKSlyZXR1cm4gSHIoZSxyLGkpLCExO3JldHVybiEwfSx0ZXh0OmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwidGV4dENvbnRlbnQiLCJfcygiK3QudmFsdWUrIikiLHQpfSxodG1sOmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwiaW5uZXJIVE1MIiwiX3MoIit0LnZhbHVlKyIpIix0KX19LGlzUHJlVGFnOmZ1bmN0aW9uKGUpe3JldHVybiJwcmUiPT09ZX0saXNVbmFyeVRhZzpibyxtdXN0VXNlUHJvcDpqbixjYW5CZUxlZnRPcGVuVGFnOiRvLGlzUmVzZXJ2ZWRUYWc6V24sZ2V0VGFnTmFtZXNwYWNlOlpuLHN0YXRpY0tleXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29uY2F0KHQuc3RhdGljS2V5c3x8W10pfSxbXSkuam9pbigiLCIpfShiYSl9LHhhPWcoZnVuY3Rpb24oZSl7cmV0dXJuIHAoInR5cGUsdGFnLGF0dHJzTGlzdCxhdHRyc01hcCxwbGFpbixwYXJlbnQsY2hpbGRyZW4sYXR0cnMsc3RhcnQsZW5kLHJhd0F0dHJzTWFwIisoZT8iLCIrZToiIikpfSk7ZnVuY3Rpb24ga2EoZSx0KXtlJiYoJGE9eGEodC5zdGF0aWNLZXlzfHwiIiksd2E9dC5pc1Jlc2VydmVkVGFnfHxULGZ1bmN0aW9uIGUodCl7dC5zdGF0aWM9ZnVuY3Rpb24oZSl7aWYoMj09PWUudHlwZSlyZXR1cm4hMTtpZigzPT09ZS50eXBlKXJldHVybiEwO3JldHVybiEoIWUucHJlJiYoZS5oYXNCaW5kaW5nc3x8ZS5pZnx8ZS5mb3J8fGQoZS50YWcpfHwhd2EoZS50YWcpfHxmdW5jdGlvbihlKXtmb3IoO2UucGFyZW50Oyl7aWYoInRlbXBsYXRlIiE9PShlPWUucGFyZW50KS50YWcpcmV0dXJuITE7aWYoZS5mb3IpcmV0dXJuITB9cmV0dXJuITF9KGUpfHwhT2JqZWN0LmtleXMoZSkuZXZlcnkoJGEpKSl9KHQpO2lmKDE9PT10LnR5cGUpe2lmKCF3YSh0LnRhZykmJiJzbG90IiE9PXQudGFnJiZudWxsPT10LmF0dHJzTWFwWyJpbmxpbmUtdGVtcGxhdGUiXSlyZXR1cm47Zm9yKHZhciBuPTAscj10LmNoaWxkcmVuLmxlbmd0aDtuPHI7bisrKXt2YXIgaT10LmNoaWxkcmVuW25dO2UoaSksaS5zdGF0aWN8fCh0LnN0YXRpYz0hMSl9aWYodC5pZkNvbmRpdGlvbnMpZm9yKHZhciBvPTEsYT10LmlmQ29uZGl0aW9ucy5sZW5ndGg7bzxhO28rKyl7dmFyIHM9dC5pZkNvbmRpdGlvbnNbb10uYmxvY2s7ZShzKSxzLnN0YXRpY3x8KHQuc3RhdGljPSExKX19fShlKSxmdW5jdGlvbiBlKHQsbil7aWYoMT09PXQudHlwZSl7aWYoKHQuc3RhdGljfHx0Lm9uY2UpJiYodC5zdGF0aWNJbkZvcj1uKSx0LnN0YXRpYyYmdC5jaGlsZHJlbi5sZW5ndGgmJigxIT09dC5jaGlsZHJlbi5sZW5ndGh8fDMhPT10LmNoaWxkcmVuWzBdLnR5cGUpKXJldHVybiB2b2lkKHQuc3RhdGljUm9vdD0hMCk7aWYodC5zdGF0aWNSb290PSExLHQuY2hpbGRyZW4pZm9yKHZhciByPTAsaT10LmNoaWxkcmVuLmxlbmd0aDtyPGk7cisrKWUodC5jaGlsZHJlbltyXSxufHwhIXQuZm9yKTtpZih0LmlmQ29uZGl0aW9ucylmb3IodmFyIG89MSxhPXQuaWZDb25kaXRpb25zLmxlbmd0aDtvPGE7bysrKWUodC5pZkNvbmRpdGlvbnNbb10uYmxvY2ssbil9fShlLCExKSl9dmFyIEFhPS9eKFtcdyRfXSt8XChbXildKj9cKSlccyo9PnxeZnVuY3Rpb24oPzpccytbXHckXSspP1xzKlwoLyxPYT0vXChbXildKj9cKTsqJC8sU2E9L15bQS1aYS16XyRdW1x3JF0qKD86XC5bQS1aYS16XyRdW1x3JF0qfFxbJ1teJ10qPyddfFxbIlteIl0qPyJdfFxbXGQrXXxcW1tBLVphLXpfJF1bXHckXSpdKSokLyxUYT17ZXNjOjI3LHRhYjo5LGVudGVyOjEzLHNwYWNlOjMyLHVwOjM4LGxlZnQ6MzcscmlnaHQ6MzksZG93bjo0MCxkZWxldGU6WzgsNDZdfSxFYT17ZXNjOlsiRXNjIiwiRXNjYXBlIl0sdGFiOiJUYWIiLGVudGVyOiJFbnRlciIsc3BhY2U6WyIgIiwiU3BhY2ViYXIiXSx1cDpbIlVwIiwiQXJyb3dVcCJdLGxlZnQ6WyJMZWZ0IiwiQXJyb3dMZWZ0Il0scmlnaHQ6WyJSaWdodCIsIkFycm93UmlnaHQiXSxkb3duOlsiRG93biIsIkFycm93RG93biJdLGRlbGV0ZTpbIkJhY2tzcGFjZSIsIkRlbGV0ZSIsIkRlbCJdfSxOYT1mdW5jdGlvbihlKXtyZXR1cm4iaWYoIitlKyIpcmV0dXJuIG51bGw7In0samE9e3N0b3A6IiRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsiLHByZXZlbnQ6IiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyIsc2VsZjpOYSgiJGV2ZW50LnRhcmdldCAhPT0gJGV2ZW50LmN1cnJlbnRUYXJnZXQiKSxjdHJsOk5hKCIhJGV2ZW50LmN0cmxLZXkiKSxzaGlmdDpOYSgiISRldmVudC5zaGlmdEtleSIpLGFsdDpOYSgiISRldmVudC5hbHRLZXkiKSxtZXRhOk5hKCIhJGV2ZW50Lm1ldGFLZXkiKSxsZWZ0Ok5hKCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMCIpLG1pZGRsZTpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDEiKSxyaWdodDpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDIiKX07ZnVuY3Rpb24gRGEoZSx0KXt2YXIgbj10PyJuYXRpdmVPbjoiOiJvbjoiLHI9IiIsaT0iIjtmb3IodmFyIG8gaW4gZSl7dmFyIGE9TGEoZVtvXSk7ZVtvXSYmZVtvXS5keW5hbWljP2krPW8rIiwiK2ErIiwiOnIrPSciJytvKyciOicrYSsiLCJ9cmV0dXJuIHI9InsiK3Iuc2xpY2UoMCwtMSkrIn0iLGk/bisiX2QoIityKyIsWyIraS5zbGljZSgwLC0xKSsiXSkiOm4rcn1mdW5jdGlvbiBMYShlKXtpZighZSlyZXR1cm4iZnVuY3Rpb24oKXt9IjtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiJbIitlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gTGEoZSl9KS5qb2luKCIsIikrIl0iO3ZhciB0PVNhLnRlc3QoZS52YWx1ZSksbj1BYS50ZXN0KGUudmFsdWUpLHI9U2EudGVzdChlLnZhbHVlLnJlcGxhY2UoT2EsIiIpKTtpZihlLm1vZGlmaWVycyl7dmFyIGk9IiIsbz0iIixhPVtdO2Zvcih2YXIgcyBpbiBlLm1vZGlmaWVycylpZihqYVtzXSlvKz1qYVtzXSxUYVtzXSYmYS5wdXNoKHMpO2Vsc2UgaWYoImV4YWN0Ij09PXMpe3ZhciBjPWUubW9kaWZpZXJzO28rPU5hKFsiY3RybCIsInNoaWZ0IiwiYWx0IiwibWV0YSJdLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hY1tlXX0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iJGV2ZW50LiIrZSsiS2V5In0pLmpvaW4oInx8IikpfWVsc2UgYS5wdXNoKHMpO3JldHVybiBhLmxlbmd0aCYmKGkrPWZ1bmN0aW9uKGUpe3JldHVybiJpZighJGV2ZW50LnR5cGUuaW5kZXhPZigna2V5JykmJiIrZS5tYXAoTWEpLmpvaW4oIiYmIikrIilyZXR1cm4gbnVsbDsifShhKSksbyYmKGkrPW8pLCJmdW5jdGlvbigkZXZlbnQpeyIraSsodD8icmV0dXJuICIrZS52YWx1ZSsiKCRldmVudCkiOm4/InJldHVybiAoIitlLnZhbHVlKyIpKCRldmVudCkiOnI/InJldHVybiAiK2UudmFsdWU6ZS52YWx1ZSkrIn0ifXJldHVybiB0fHxuP2UudmFsdWU6ImZ1bmN0aW9uKCRldmVudCl7Iisocj8icmV0dXJuICIrZS52YWx1ZTplLnZhbHVlKSsifSJ9ZnVuY3Rpb24gTWEoZSl7dmFyIHQ9cGFyc2VJbnQoZSwxMCk7aWYodClyZXR1cm4iJGV2ZW50LmtleUNvZGUhPT0iK3Q7dmFyIG49VGFbZV0scj1FYVtlXTtyZXR1cm4iX2soJGV2ZW50LmtleUNvZGUsIitKU09OLnN0cmluZ2lmeShlKSsiLCIrSlNPTi5zdHJpbmdpZnkobikrIiwkZXZlbnQua2V5LCIrSlNPTi5zdHJpbmdpZnkocikrIikifXZhciBJYT17b246ZnVuY3Rpb24oZSx0KXtlLndyYXBMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIl9nKCIrZSsiLCIrdC52YWx1ZSsiKSJ9fSxiaW5kOmZ1bmN0aW9uKGUsdCl7ZS53cmFwRGF0YT1mdW5jdGlvbihuKXtyZXR1cm4iX2IoIituKyIsJyIrZS50YWcrIicsIit0LnZhbHVlKyIsIisodC5tb2RpZmllcnMmJnQubW9kaWZpZXJzLnByb3A/InRydWUiOiJmYWxzZSIpKyh0Lm1vZGlmaWVycyYmdC5tb2RpZmllcnMuc3luYz8iLHRydWUiOiIiKSsiKSJ9fSxjbG9hazpTfSxGYT1mdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZSx0aGlzLndhcm49ZS53YXJufHxTcix0aGlzLnRyYW5zZm9ybXM9VHIoZS5tb2R1bGVzLCJ0cmFuc2Zvcm1Db2RlIiksdGhpcy5kYXRhR2VuRm5zPVRyKGUubW9kdWxlcywiZ2VuRGF0YSIpLHRoaXMuZGlyZWN0aXZlcz1BKEEoe30sSWEpLGUuZGlyZWN0aXZlcyk7dmFyIHQ9ZS5pc1Jlc2VydmVkVGFnfHxUO3RoaXMubWF5YmVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuISFlLmNvbXBvbmVudHx8IXQoZS50YWcpfSx0aGlzLm9uY2VJZD0wLHRoaXMuc3RhdGljUmVuZGVyRm5zPVtdLHRoaXMucHJlPSExfTtmdW5jdGlvbiBQYShlLHQpe3ZhciBuPW5ldyBGYSh0KTtyZXR1cm57cmVuZGVyOiJ3aXRoKHRoaXMpe3JldHVybiAiKyhlP1JhKGUsbik6J19jKCJkaXYiKScpKyJ9IixzdGF0aWNSZW5kZXJGbnM6bi5zdGF0aWNSZW5kZXJGbnN9fWZ1bmN0aW9uIFJhKGUsdCl7aWYoZS5wYXJlbnQmJihlLnByZT1lLnByZXx8ZS5wYXJlbnQucHJlKSxlLnN0YXRpY1Jvb3QmJiFlLnN0YXRpY1Byb2Nlc3NlZClyZXR1cm4gSGEoZSx0KTtpZihlLm9uY2UmJiFlLm9uY2VQcm9jZXNzZWQpcmV0dXJuIEJhKGUsdCk7aWYoZS5mb3ImJiFlLmZvclByb2Nlc3NlZClyZXR1cm4gemEoZSx0KTtpZihlLmlmJiYhZS5pZlByb2Nlc3NlZClyZXR1cm4gVWEoZSx0KTtpZigidGVtcGxhdGUiIT09ZS50YWd8fGUuc2xvdFRhcmdldHx8dC5wcmUpe2lmKCJzbG90Ij09PWUudGFnKXJldHVybiBmdW5jdGlvbihlLHQpe3ZhciBuPWUuc2xvdE5hbWV8fCciZGVmYXVsdCInLHI9cWEoZSx0KSxpPSJfdCgiK24rKHI/IiwiK3I6IiIpLG89ZS5hdHRyc3x8ZS5keW5hbWljQXR0cnM/R2EoKGUuYXR0cnN8fFtdKS5jb25jYXQoZS5keW5hbWljQXR0cnN8fFtdKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6YihlLm5hbWUpLHZhbHVlOmUudmFsdWUsZHluYW1pYzplLmR5bmFtaWN9fSkpOm51bGwsYT1lLmF0dHJzTWFwWyJ2LWJpbmQiXTshbyYmIWF8fHJ8fChpKz0iLG51bGwiKTtvJiYoaSs9IiwiK28pO2EmJihpKz0obz8iIjoiLG51bGwiKSsiLCIrYSk7cmV0dXJuIGkrIikifShlLHQpO3ZhciBuO2lmKGUuY29tcG9uZW50KW49ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQuaW5saW5lVGVtcGxhdGU/bnVsbDpxYSh0LG4sITApO3JldHVybiJfYygiK2UrIiwiK1ZhKHQsbikrKHI/IiwiK3I6IiIpKyIpIn0oZS5jb21wb25lbnQsZSx0KTtlbHNle3ZhciByOyghZS5wbGFpbnx8ZS5wcmUmJnQubWF5YmVDb21wb25lbnQoZSkpJiYocj1WYShlLHQpKTt2YXIgaT1lLmlubGluZVRlbXBsYXRlP251bGw6cWEoZSx0LCEwKTtuPSJfYygnIitlLnRhZysiJyIrKHI/IiwiK3I6IiIpKyhpPyIsIitpOiIiKSsiKSJ9Zm9yKHZhciBvPTA7bzx0LnRyYW5zZm9ybXMubGVuZ3RoO28rKyluPXQudHJhbnNmb3Jtc1tvXShlLG4pO3JldHVybiBufXJldHVybiBxYShlLHQpfHwidm9pZCAwIn1mdW5jdGlvbiBIYShlLHQpe2Uuc3RhdGljUHJvY2Vzc2VkPSEwO3ZhciBuPXQucHJlO3JldHVybiBlLnByZSYmKHQucHJlPWUucHJlKSx0LnN0YXRpY1JlbmRlckZucy5wdXNoKCJ3aXRoKHRoaXMpe3JldHVybiAiK1JhKGUsdCkrIn0iKSx0LnByZT1uLCJfbSgiKyh0LnN0YXRpY1JlbmRlckZucy5sZW5ndGgtMSkrKGUuc3RhdGljSW5Gb3I/Iix0cnVlIjoiIikrIikifWZ1bmN0aW9uIEJhKGUsdCl7aWYoZS5vbmNlUHJvY2Vzc2VkPSEwLGUuaWYmJiFlLmlmUHJvY2Vzc2VkKXJldHVybiBVYShlLHQpO2lmKGUuc3RhdGljSW5Gb3Ipe2Zvcih2YXIgbj0iIixyPWUucGFyZW50O3I7KXtpZihyLmZvcil7bj1yLmtleTticmVha31yPXIucGFyZW50fXJldHVybiBuPyJfbygiK1JhKGUsdCkrIiwiK3Qub25jZUlkKysrIiwiK24rIikiOlJhKGUsdCl9cmV0dXJuIEhhKGUsdCl9ZnVuY3Rpb24gVWEoZSx0LG4scil7cmV0dXJuIGUuaWZQcm9jZXNzZWQ9ITAsZnVuY3Rpb24gZSh0LG4scixpKXtpZighdC5sZW5ndGgpcmV0dXJuIGl8fCJfZSgpIjt2YXIgbz10LnNoaWZ0KCk7cmV0dXJuIG8uZXhwPyIoIitvLmV4cCsiKT8iK2Eoby5ibG9jaykrIjoiK2UodCxuLHIsaSk6IiIrYShvLmJsb2NrKTtmdW5jdGlvbiBhKGUpe3JldHVybiByP3IoZSxuKTplLm9uY2U/QmEoZSxuKTpSYShlLG4pfX0oZS5pZkNvbmRpdGlvbnMuc2xpY2UoKSx0LG4scil9ZnVuY3Rpb24gemEoZSx0LG4scil7dmFyIGk9ZS5mb3Isbz1lLmFsaWFzLGE9ZS5pdGVyYXRvcjE/IiwiK2UuaXRlcmF0b3IxOiIiLHM9ZS5pdGVyYXRvcjI/IiwiK2UuaXRlcmF0b3IyOiIiO3JldHVybiBlLmZvclByb2Nlc3NlZD0hMCwocnx8Il9sIikrIigoIitpKyIpLGZ1bmN0aW9uKCIrbythK3MrIil7cmV0dXJuICIrKG58fFJhKShlLHQpKyJ9KSJ9ZnVuY3Rpb24gVmEoZSx0KXt2YXIgbj0ieyIscj1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZGlyZWN0aXZlcztpZighbilyZXR1cm47dmFyIHIsaSxvLGEscz0iZGlyZWN0aXZlczpbIixjPSExO2ZvcihyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXtvPW5bcl0sYT0hMDt2YXIgdT10LmRpcmVjdGl2ZXNbby5uYW1lXTt1JiYoYT0hIXUoZSxvLHQud2FybikpLGEmJihjPSEwLHMrPSd7bmFtZToiJytvLm5hbWUrJyIscmF3TmFtZToiJytvLnJhd05hbWUrJyInKyhvLnZhbHVlPyIsdmFsdWU6KCIrby52YWx1ZSsiKSxleHByZXNzaW9uOiIrSlNPTi5zdHJpbmdpZnkoby52YWx1ZSk6IiIpKyhvLmFyZz8iLGFyZzoiKyhvLmlzRHluYW1pY0FyZz9vLmFyZzonIicrby5hcmcrJyInKToiIikrKG8ubW9kaWZpZXJzPyIsbW9kaWZpZXJzOiIrSlNPTi5zdHJpbmdpZnkoby5tb2RpZmllcnMpOiIiKSsifSwiKX1pZihjKXJldHVybiBzLnNsaWNlKDAsLTEpKyJdIn0oZSx0KTtyJiYobis9cisiLCIpLGUua2V5JiYobis9ImtleToiK2Uua2V5KyIsIiksZS5yZWYmJihuKz0icmVmOiIrZS5yZWYrIiwiKSxlLnJlZkluRm9yJiYobis9InJlZkluRm9yOnRydWUsIiksZS5wcmUmJihuKz0icHJlOnRydWUsIiksZS5jb21wb25lbnQmJihuKz0ndGFnOiInK2UudGFnKyciLCcpO2Zvcih2YXIgaT0wO2k8dC5kYXRhR2VuRm5zLmxlbmd0aDtpKyspbis9dC5kYXRhR2VuRm5zW2ldKGUpO2lmKGUuYXR0cnMmJihuKz0iYXR0cnM6IitHYShlLmF0dHJzKSsiLCIpLGUucHJvcHMmJihuKz0iZG9tUHJvcHM6IitHYShlLnByb3BzKSsiLCIpLGUuZXZlbnRzJiYobis9RGEoZS5ldmVudHMsITEpKyIsIiksZS5uYXRpdmVFdmVudHMmJihuKz1EYShlLm5hdGl2ZUV2ZW50cywhMCkrIiwiKSxlLnNsb3RUYXJnZXQmJiFlLnNsb3RTY29wZSYmKG4rPSJzbG90OiIrZS5zbG90VGFyZ2V0KyIsIiksZS5zY29wZWRTbG90cyYmKG4rPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lLmZvcnx8T2JqZWN0LmtleXModCkuc29tZShmdW5jdGlvbihlKXt2YXIgbj10W2VdO3JldHVybiBuLnNsb3RUYXJnZXREeW5hbWljfHxuLmlmfHxuLmZvcnx8S2Eobil9KSxpPSEhZS5pZjtpZighcilmb3IodmFyIG89ZS5wYXJlbnQ7bzspe2lmKG8uc2xvdFNjb3BlJiZvLnNsb3RTY29wZSE9PWNhfHxvLmZvcil7cj0hMDticmVha31vLmlmJiYoaT0hMCksbz1vLnBhcmVudH12YXIgYT1PYmplY3Qua2V5cyh0KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIEphKHRbZV0sbil9KS5qb2luKCIsIik7cmV0dXJuInNjb3BlZFNsb3RzOl91KFsiK2ErIl0iKyhyPyIsbnVsbCx0cnVlIjoiIikrKCFyJiZpPyIsbnVsbCxmYWxzZSwiK2Z1bmN0aW9uKGUpe3ZhciB0PTUzODEsbj1lLmxlbmd0aDtmb3IoO247KXQ9MzMqdF5lLmNoYXJDb2RlQXQoLS1uKTtyZXR1cm4gdD4+PjB9KGEpOiIiKSsiKSJ9KGUsZS5zY29wZWRTbG90cyx0KSsiLCIpLGUubW9kZWwmJihuKz0ibW9kZWw6e3ZhbHVlOiIrZS5tb2RlbC52YWx1ZSsiLGNhbGxiYWNrOiIrZS5tb2RlbC5jYWxsYmFjaysiLGV4cHJlc3Npb246IitlLm1vZGVsLmV4cHJlc3Npb24rIn0sIiksZS5pbmxpbmVUZW1wbGF0ZSl7dmFyIG89ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNoaWxkcmVuWzBdO2lmKG4mJjE9PT1uLnR5cGUpe3ZhciByPVBhKG4sdC5vcHRpb25zKTtyZXR1cm4iaW5saW5lVGVtcGxhdGU6e3JlbmRlcjpmdW5jdGlvbigpeyIrci5yZW5kZXIrIn0sc3RhdGljUmVuZGVyRm5zOlsiK3Iuc3RhdGljUmVuZGVyRm5zLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24oKXsiK2UrIn0ifSkuam9pbigiLCIpKyJdfSJ9fShlLHQpO28mJihuKz1vKyIsIil9cmV0dXJuIG49bi5yZXBsYWNlKC8sJC8sIiIpKyJ9IixlLmR5bmFtaWNBdHRycyYmKG49Il9iKCIrbisnLCInK2UudGFnKyciLCcrR2EoZS5keW5hbWljQXR0cnMpKyIpIiksZS53cmFwRGF0YSYmKG49ZS53cmFwRGF0YShuKSksZS53cmFwTGlzdGVuZXJzJiYobj1lLndyYXBMaXN0ZW5lcnMobikpLG59ZnVuY3Rpb24gS2EoZSl7cmV0dXJuIDE9PT1lLnR5cGUmJigic2xvdCI9PT1lLnRhZ3x8ZS5jaGlsZHJlbi5zb21lKEthKSl9ZnVuY3Rpb24gSmEoZSx0KXt2YXIgbj1lLmF0dHJzTWFwWyJzbG90LXNjb3BlIl07aWYoZS5pZiYmIWUuaWZQcm9jZXNzZWQmJiFuKXJldHVybiBVYShlLHQsSmEsIm51bGwiKTtpZihlLmZvciYmIWUuZm9yUHJvY2Vzc2VkKXJldHVybiB6YShlLHQsSmEpO3ZhciByPWUuc2xvdFNjb3BlPT09Y2E/IiI6U3RyaW5nKGUuc2xvdFNjb3BlKSxpPSJmdW5jdGlvbigiK3IrIil7cmV0dXJuICIrKCJ0ZW1wbGF0ZSI9PT1lLnRhZz9lLmlmJiZuPyIoIitlLmlmKyIpPyIrKHFhKGUsdCl8fCJ1bmRlZmluZWQiKSsiOnVuZGVmaW5lZCI6cWEoZSx0KXx8InVuZGVmaW5lZCI6UmEoZSx0KSkrIn0iLG89cj8iIjoiLHByb3h5OnRydWUiO3JldHVybiJ7a2V5OiIrKGUuc2xvdFRhcmdldHx8JyJkZWZhdWx0IicpKyIsZm46IitpK28rIn0ifWZ1bmN0aW9uIHFhKGUsdCxuLHIsaSl7dmFyIG89ZS5jaGlsZHJlbjtpZihvLmxlbmd0aCl7dmFyIGE9b1swXTtpZigxPT09by5sZW5ndGgmJmEuZm9yJiYidGVtcGxhdGUiIT09YS50YWcmJiJzbG90IiE9PWEudGFnKXt2YXIgcz1uP3QubWF5YmVDb21wb25lbnQoYSk/IiwxIjoiLDAiOiIiO3JldHVybiIiKyhyfHxSYSkoYSx0KStzfXZhciBjPW4/ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBpPWVbcl07aWYoMT09PWkudHlwZSl7aWYoV2EoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiBXYShlLmJsb2NrKX0pKXtuPTI7YnJlYWt9KHQoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiB0KGUuYmxvY2spfSkpJiYobj0xKX19cmV0dXJuIG59KG8sdC5tYXliZUNvbXBvbmVudCk6MCx1PWl8fFphO3JldHVybiJbIitvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdShlLHQpfSkuam9pbigiLCIpKyJdIisoYz8iLCIrYzoiIil9fWZ1bmN0aW9uIFdhKGUpe3JldHVybiB2b2lkIDAhPT1lLmZvcnx8InRlbXBsYXRlIj09PWUudGFnfHwic2xvdCI9PT1lLnRhZ31mdW5jdGlvbiBaYShlLHQpe3JldHVybiAxPT09ZS50eXBlP1JhKGUsdCk6Mz09PWUudHlwZSYmZS5pc0NvbW1lbnQ/KHI9ZSwiX2UoIitKU09OLnN0cmluZ2lmeShyLnRleHQpKyIpIik6Il92KCIrKDI9PT0obj1lKS50eXBlP24uZXhwcmVzc2lvbjpYYShKU09OLnN0cmluZ2lmeShuLnRleHQpKSkrIikiO3ZhciBuLHJ9ZnVuY3Rpb24gR2EoZSl7Zm9yKHZhciB0PSIiLG49IiIscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT1lW3JdLG89WGEoaS52YWx1ZSk7aS5keW5hbWljP24rPWkubmFtZSsiLCIrbysiLCI6dCs9JyInK2kubmFtZSsnIjonK28rIiwifXJldHVybiB0PSJ7Iit0LnNsaWNlKDAsLTEpKyJ9IixuPyJfZCgiK3QrIixbIituLnNsaWNlKDAsLTEpKyJdKSI6dH1mdW5jdGlvbiBYYShlKXtyZXR1cm4gZS5yZXBsYWNlKC9cdTIwMjgvZywiXFx1MjAyOCIpLnJlcGxhY2UoL1x1MjAyOS9nLCJcXHUyMDI5Iil9bmV3IFJlZ0V4cCgiXFxiIisiZG8saWYsZm9yLGxldCxuZXcsdHJ5LHZhcixjYXNlLGVsc2Usd2l0aCxhd2FpdCxicmVhayxjYXRjaCxjbGFzcyxjb25zdCxzdXBlcix0aHJvdyx3aGlsZSx5aWVsZCxkZWxldGUsZXhwb3J0LGltcG9ydCxyZXR1cm4sc3dpdGNoLGRlZmF1bHQsZXh0ZW5kcyxmaW5hbGx5LGNvbnRpbnVlLGRlYnVnZ2VyLGZ1bmN0aW9uLGFyZ3VtZW50cyIuc3BsaXQoIiwiKS5qb2luKCJcXGJ8XFxiIikrIlxcYiIpO2Z1bmN0aW9uIFlhKGUsdCl7dHJ5e3JldHVybiBuZXcgRnVuY3Rpb24oZSl9Y2F0Y2gobil7cmV0dXJuIHQucHVzaCh7ZXJyOm4sY29kZTplfSksU319ZnVuY3Rpb24gUWEoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obixyLGkpeyhyPUEoe30scikpLndhcm47ZGVsZXRlIHIud2Fybjt2YXIgbz1yLmRlbGltaXRlcnM/U3RyaW5nKHIuZGVsaW1pdGVycykrbjpuO2lmKHRbb10pcmV0dXJuIHRbb107dmFyIGE9ZShuLHIpLHM9e30sYz1bXTtyZXR1cm4gcy5yZW5kZXI9WWEoYS5yZW5kZXIsYykscy5zdGF0aWNSZW5kZXJGbnM9YS5zdGF0aWNSZW5kZXJGbnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBZYShlLGMpfSksdFtvXT1zfX12YXIgZXMsdHMsbnM9KGVzPWZ1bmN0aW9uKGUsdCl7dmFyIG49bGEoZS50cmltKCksdCk7ITEhPT10Lm9wdGltaXplJiZrYShuLHQpO3ZhciByPVBhKG4sdCk7cmV0dXJue2FzdDpuLHJlbmRlcjpyLnJlbmRlcixzdGF0aWNSZW5kZXJGbnM6ci5zdGF0aWNSZW5kZXJGbnN9fSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIHI9T2JqZWN0LmNyZWF0ZShlKSxpPVtdLG89W107aWYobilmb3IodmFyIGEgaW4gbi5tb2R1bGVzJiYoci5tb2R1bGVzPShlLm1vZHVsZXN8fFtdKS5jb25jYXQobi5tb2R1bGVzKSksbi5kaXJlY3RpdmVzJiYoci5kaXJlY3RpdmVzPUEoT2JqZWN0LmNyZWF0ZShlLmRpcmVjdGl2ZXN8fG51bGwpLG4uZGlyZWN0aXZlcykpLG4pIm1vZHVsZXMiIT09YSYmImRpcmVjdGl2ZXMiIT09YSYmKHJbYV09blthXSk7ci53YXJuPWZ1bmN0aW9uKGUsdCxuKXsobj9vOmkpLnB1c2goZSl9O3ZhciBzPWVzKHQudHJpbSgpLHIpO3JldHVybiBzLmVycm9ycz1pLHMudGlwcz1vLHN9cmV0dXJue2NvbXBpbGU6dCxjb21waWxlVG9GdW5jdGlvbnM6UWEodCl9fSkoQ2EpLHJzPShucy5jb21waWxlLG5zLmNvbXBpbGVUb0Z1bmN0aW9ucyk7ZnVuY3Rpb24gaXMoZSl7cmV0dXJuKHRzPXRzfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWU/JzxhIGhyZWY9IlxuIi8+JzonPGRpdiBhPSJcbiIvPicsdHMuaW5uZXJIVE1MLmluZGV4T2YoIiYjMTA7Iik+MH12YXIgb3M9ISF6JiZpcyghMSksYXM9ISF6JiZpcyghMCksc3M9ZyhmdW5jdGlvbihlKXt2YXIgdD1ZbihlKTtyZXR1cm4gdCYmdC5pbm5lckhUTUx9KSxjcz13bi5wcm90b3R5cGUuJG1vdW50O3JldHVybiB3bi5wcm90b3R5cGUuJG1vdW50PWZ1bmN0aW9uKGUsdCl7aWYoKGU9ZSYmWW4oZSkpPT09ZG9jdW1lbnQuYm9keXx8ZT09PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudClyZXR1cm4gdGhpczt2YXIgbj10aGlzLiRvcHRpb25zO2lmKCFuLnJlbmRlcil7dmFyIHI9bi50ZW1wbGF0ZTtpZihyKWlmKCJzdHJpbmciPT10eXBlb2YgcikiIyI9PT1yLmNoYXJBdCgwKSYmKHI9c3MocikpO2Vsc2V7aWYoIXIubm9kZVR5cGUpcmV0dXJuIHRoaXM7cj1yLmlubmVySFRNTH1lbHNlIGUmJihyPWZ1bmN0aW9uKGUpe2lmKGUub3V0ZXJIVE1MKXJldHVybiBlLm91dGVySFRNTDt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gdC5hcHBlbmRDaGlsZChlLmNsb25lTm9kZSghMCkpLHQuaW5uZXJIVE1MfShlKSk7aWYocil7dmFyIGk9cnMocix7b3V0cHV0U291cmNlUmFuZ2U6ITEsc2hvdWxkRGVjb2RlTmV3bGluZXM6b3Msc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOmFzLGRlbGltaXRlcnM6bi5kZWxpbWl0ZXJzLGNvbW1lbnRzOm4uY29tbWVudHN9LHRoaXMpLG89aS5yZW5kZXIsYT1pLnN0YXRpY1JlbmRlckZucztuLnJlbmRlcj1vLG4uc3RhdGljUmVuZGVyRm5zPWF9fXJldHVybiBjcy5jYWxsKHRoaXMsZSx0KX0sd24uY29tcGlsZT1ycyx3bn0pOw=="}]},{"name":" CSDN CSDN","options":{"awareOfChrome":false,"check_for_updates":true,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["www.csdn.net"],"orig_excludes":[],"orig_includes":["*://*.csdn.net/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1595329171477,"data":{}},"enabled":true,"position":4,"file_url":"https://greasyfork.org/scripts/378351-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0-csdn%E5%B9%BF%E5%91%8A%E5%AE%8C%E5%85%A8%E8%BF%87%E6%BB%A4-%E4%BA%BA%E6%80%A7%E5%8C%96%E8%84%9A%E6%9C%AC%E4%BC%98%E5%8C%96-%E4%B8%8D%E7%94%A8%E5%86%8D%E7%99%BB%E5%BD%95%E4%BA%86-%E8%AE%A9%E4%BD%A0%E4%BD%93%E9%AA%8C%E4%BB%A4%E4%BA%BA%E6%83%8A%E5%96%9C%E7%9A%84%E5%B4%AD%E6%96%B0csdn/code/%F0%9F%94%A5%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%F0%9F%94%A5%20CSDN%E5%B9%BF%E5%91%8A%E5%AE%8C%E5%85%A8%E8%BF%87%E6%BB%A4%E3%80%81%E4%BA%BA%E6%80%A7%E5%8C%96%E8%84%9A%E6%9C%AC%E4%BC%98%E5%8C%96%EF%BC%9A%F0%9F%86%95%20%E4%B8%8D%E7%94%A8%E5%86%8D%E7%99%BB%E5%BD%95%E4%BA%86%EF%BC%81%E8%AE%A9%E4%BD%A0%E4%BD%93%E9%AA%8C%E4%BB%A4%E4%BA%BA%E6%83%8A%E5%96%9C%E7%9A%84%E5%B4%AD%E6%96%B0CSDN%E3%80%82.user.js","uuid":"a57fc874-3e8c-4fce-a59a-e3932a7d3676","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDwn5Sl5oyB57ut5pu05paw8J+UpSBDU0RO5bm/5ZGK5a6M5YWo6L+H5ruk44CB5Lq65oCn5YyW6ISa5pys5LyY5YyW77ya8J+GlSDkuI3nlKjlho3nmbvlvZXkuobvvIHorqnkvaDkvZPpqozku6Tkurrmg4rllpznmoTltK3mlrBDU0RO44CCCi8vIEBuYW1lc3BhY2UgICAgaHR0cHM6Ly9naXRodWIuY29tL2FkbGVyZWQKLy8gQHZlcnNpb24gICAgICAzLjUuMQovLyBAZGVzY3JpcHRpb24gIOKaoe+4j+aLpeacieaVsOmhueeLrOWutuWKn+iDveeahOacgOW8ukNTRE7ohJrmnKzvvIzkuI3mnI3mr5TkuIDmr5TimqHvuI988J+VtuaXoOmcgOeZu+W9lUNTRE7vvIzojrflvpfmr5TkvJrlkZjmm7TkvbPnmoTkvZPpqox88J+WpeWIhui+qOeOh+iHqumAgumFje+8jOWIhuWxj+S4jeeUqOa7muWKqHzwn5K+6LaF57qn6aKE5LyY5YyWfPCflJbni6zlrrbotoXnuqflhY3kvJrlkZh88J+Pt+eLrOWutuWOn+WIm+aWh+eroOWFjeeZu+W9leWxleW8gHzwn5SM54us5a625o6o6I2Q5YaF5a656Ieq55Sx5byA5YWzfPCfk6Dni6zlrrblhY3nmbvlvZXlpI3liLZ88J+Ul+eLrOWutumYsuWklumTvumHjeWumuWQkXzwn5Od54us5a626K665Z2b5pyq55m75b2V6Ieq5Yqo5bGV5byA5paH56ug44CB6K+E6K66fPCfjLXlhajpnaLlh4DljJZ88J+TiOayiea1uOmYheivu3zwn6e05YeA5YyW5Ymq6LS05p2/fPCfk5XkvZzogIXkv6Hmga/mlofnq6Dpobbpg6jlsZXnpLoKLy8gQGF1dGhvciAgICAgICBBZGxlcgovLyBAY29ubmVjdCAgICAgIHd3dy5jc2RuLm5ldAovLyBAaW5jbHVkZSAgICAgICo6Ly8qLmNzZG4ubmV0LyoKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2pxdWVyeS5jb29raWUvanF1ZXJ5LmNvb2tpZS5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbnByb2dyZXNzQDAuMi4wL25wcm9ncmVzcy5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vY2xpcGJvYXJkQDIuMC42L2Rpc3QvY2xpcGJvYXJkLm1pbi5qcwovLyBAc3VwcG9ydFVSTCAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hZGxlcmVkL0NTRE5HcmVlbmVyL2lzc3Vlcy9uZXc/YXNzaWduZWVzPWFkbGVyZWQmbGFiZWxzPWhlbHArd2FudGVkJnRlbXBsYXRlPUlTU1VFX1RFTVBMQVRFLm1kJnRpdGxlPQovLyBAY29udHJpYnV0aW9uVVJMIGh0dHBzOi8vZG9jLnN0YWNrb3ZlcmZsb3cud2lraS93ZWIvIy8yMT9wYWdlX2lkPTEzOAovLyBAZ3JhbnQgICAgICAgIEdNX2FkZFN0eWxlCi8vIEBub3RlICAgICAgICAgMjEtMDMtMDEgMy41LjEg5L+u5pS55paH5qGICi8vIEBub3RlICAgICAgICAgMjEtMDItMDYgMy41LjAg5L+u5aSN5LiK5Lyg6LWE5rqQ55WM6Z2i5qCH562+6YCJ5oup5raI5aSx55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMjEtMDEtMTcgMy40Ljkg5Yig6Zmk5paH56ug6aG15ZKM6K665Z2b5bm/5ZGK77yM5pqC5pe25YGc55So5Y+z5L6n5qCP5rua5Yqo5Yqf6IO977yIQ1NETumZkOWItu+8iQovLyBAbm90ZSAgICAgICAgIDIxLTAxLTE1IDMuNC44IOS/neWtmOaMiemSruS8mOWMlu+8jOS/ruWkjeaYvuekuuWIm+S9nOS4reW/g+aMiemSruWKn+iDveWkseaViOeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIxLTAxLTE1IDMuNC43IOaUuei/m+iEmuacrOe7huiKgu+8jOWinuWKoOW5v+WRiuWxj+iUveiDveWKm++8jOS/ruWkjee7v+WMluaMiemSrumUmeS9jeeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwLTEyLTI1IDMuNC42IOS4u+mhtemDqOWIhuW1jOWFpeW8j+W5v+WRiuWIoOmZpAovLyBAbm90ZSAgICAgICAgIDIwLTEyLTE4IDMuNC41IOS/ruWkjee7v+WMluiuvuWumuaMiemSruaOkueJiOS4jeato+ehrueahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwLTEyLTE1IDMuNC40IOS/ruWkjeS6huafkOS6m+WtkOmhteaYvuekuuS4jeato+W4uOeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwLTEwLTIzIDMuNC4zIOmAguW6lOaWsOeJiENTRE7vvIzljrvpmaTkuLvpobXlkoznmbvlvZXpobXlub/lkYrvvIzku6Xlj4rnmbvlvZXmj5DnpLrvvIzlubbnp7vpmaTlupXpg6jkv6Hmga8KLy8gQG5vdGUgICAgICAgICAyMC0xMC0yMCAzLjQuMiDliKDpmaTlj7Pkvqflub/lkYoKLy8gQG5vdGUgICAgICAgICAyMC0wOS0yNiAzLjQuMSDkv67mlLnmjpLniYjorr7lrprvvIzkv67lpI3nmbvlvZXmoYblvLnlh7rnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAyMC0wOS0yNCAzLjQuMCDntKfmgKXkv67lpI3nlLHkuo5DU0RO5YmN56uv5qC35byP5L+u5pS55a+86Ie06K6+5a6a5byA5YWz5Lii5aSx55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMjAtMDgtMjcgMy4zLjkg57Sn5oCl5L+u5aSN55Sx5LqOQ1NETuWJjeerr+agt+W8j+S/ruaUueWvvOiHtOiEmuacrOWkseaViOeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwLTA4LTI2IDMuMy44IOWQiOazleiEmuacrOaPkOekugovLyBAbm90ZSAgICAgICAgIDIwLTA3LTIwIDMuMy43IOS/ruWkjeiPnOWNleagj+WcqOWIm+S9nOS4reW/g+aYvuekuuW8guW4uOeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwLTA3LTE4IDMuMy42IOW3peWFt+euseaMiemSruS8mOWMlgovLyBAbm90ZSAgICAgICAgIDIwLTA3LTA1IDMuMy41IOivhOiuuuWkjeWItuWKn+iDveS6pOS6kuS8mOWMlgovLyBAbm90ZSAgICAgICAgIDIwLTA3LTA0IDMuMy40IOS/ruWkjeWPs+S+p+agj+a2iOWkseeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwLTA3LTAzIDMuMy4zIOaWsOWinuWkjeWItuivhOiuuuWKn+iDve+8geWIoOmZpOmhtumDqOW5v+WRigovLyBAbm90ZSAgICAgICAgIDIwLTA2LTI4IDMuMy4yIOaPkOekuuS/ruaUuQovLyBAbm90ZSAgICAgICAgIDIwLTA2LTI3IDMuMy4xIOW8ueeql+aPkOekuumAu+i+keS/ruaUueS4uuS7heaPkOekuuS4gOasoeOAggovLyBAbm90ZSAgICAgICAgIDIwLTA2LTI3IDMuMy4wIOe9keermeagh+mimOaWsOa2iOaBr+aPkOmGkuWOu+mZpAovLyBAbm90ZSAgICAgICAgIDIwLTA2LTI2IDMuMi45IOaBouWkjUdyZWFzeUZvcmvlubPlj7DohJrmnKzmlK/mjIEKLy8gQG5vdGUgICAgICAgICAyMC0wNi0yMSAzLjIuMCDohJrmnKzov4Hnp7vpgJrnn6UKLy8gQG5vdGUgICAgICAgICAyMC0wNi0yMSAzLjEuOSDlop7liqDoh6rliqjpmpDol4/lupXmoI/lip/og70KLy8gQG5vdGUgICAgICAgICAyMC0wNi0yMSAzLjEuOCDlop7liqDoh6rliqjpmpDol4/pobbmoI/lip/og73vvIzkv67lpI3pgInpobnnqpflj6PooqvngrnotZ7plb/mnaHmjKHkvY/nmoRCdWfvvIzpgInpobnnqpflj6PluIPlsYDkv67mlLkKLy8gQG5vdGUgICAgICAgICAyMC0wNi0yMCAzLjEuNyDorr7nva7nqpflj6PlpKflsI/lm7rlrprvvIzlop7liqDmiZPotY/lhaXlj6MKLy8gQG5vdGUgICAgICAgICAyMC0wNi0xOSAzLjEuNiDmmL7npLrmjqjojZDlhoXlrrnmjInpkq7lm57lvZLvvIzmlrDluIPlsYDntKfmgKXkv67lpI0KLy8gQG5vdGUgICAgICAgICAyMC0wNi0xOCAzLjEuNSDoh6rlrprkuYnlip/og73mm7TmlrAKLy8gQG5vdGUgICAgICAgICAyMC0wNi0xNiAzLjEuNCDmlK/mjIHlpKfpg6jliIblip/og73mqKHlnZfljJbmmL7npLoKLy8gQG5vdGUgICAgICAgICAyMC0wNi0xNCAzLjEuMyDnu7/ljJborr7lrprkvJjljJYKLy8gQG5vdGUgICAgICAgICAyMC0wNi0xNCAzLjEuMiBJU1NVReaooeadv+iwg+aVtFN1cHBvcnQgVVJMCi8vIEBub3RlICAgICAgICAgMjAtMDYtMTQgMy4xLjEg5aKe5Yqg5pCc5Y2a5Li75paH56ug5qih5Z2XCi8vIEBub3RlICAgICAgICAgMjAtMDYtMTMgMy4xLjAg5L+u5aSN6K6+572u6L+H5pyf55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMjAtMDYtMTIgMy4wLjkg5qCH6aKY5Zue5ruaCi8vIEBub3RlICAgICAgICAgMjAtMDYtMTIgMy4wLjgg5Li76aG15bm/5ZGK5Yig6Zmk77yM57u/5YyW6K6+572u5LuF5pi+56S65Zyo5paH56ug6aG16Z2i77yM5Yig6Zmk6aG16ISa77yM6aG26YOo5LyY5YyW77yM6Iul5bmy57uG6IqC5LyY5YyWCi8vIEBub3RlICAgICAgICAgMjAtMDYtMTEgMy4wLjcg5aKe5Yqg5a6Y5pa5UVHkuqTmtYHnvqTvvIzlop7liqDlhbPpl63lvLrliLbnmb3oibLkuLvpopjlip/og70KLy8gQG5vdGUgICAgICAgICAyMC0wNi0xMSAzLjAuNiDnlKjmiLflkI3niYflip/og73kvJjljJYKLy8gQG5vdGUgICAgICAgICAyMC0wNi0xMSAzLjAuNSDkvJjljJbliqDovb3pgJ/luqYKLy8gQG5vdGUgICAgICAgICAyMC0wNi0xMCAzLjAuNCDkv67lpI3orr7nva7nlYzpnaLpga7mjKHnmoTpl67popjvvIzmmL7npLrljZrkuLvlpLTlg48KLy8gQG5vdGUgICAgICAgICAyMC0wNi0wOSAzLjAuMyDpu5jorqTorr7lrprkv67mlLkKLy8gQG5vdGUgICAgICAgICAyMC0wNi0wOSAzLjAuMiDkv67lpI3mjqjojZDlhoXlrrnmjInpkq7liLfmlrDkuI3nlJ/mlYjnmoTpl67popjvvIzlop7liqDlt6XlhbfnrrHmj5DnpLrmoYYKLy8gQG5vdGUgICAgICAgICAyMC0wNi0wOCAzLjAuMSDorr7nva7kuK3lv4Pmjqjlh7rvvIHlop7liqDmtY/op4jmlYjmnpzpgInpobkgJiYgR3JlZW4gQm9vayBJY29uIFVwZGF0ZQovLyBAbm90ZSAgICAgICAgIDIwLTA2LTA4IDMuMC4wIOiuvue9ruS4reW/g+aOqOWHuu+8geWinuWKoOa1j+iniOaViOaenOmAiemhuQovLyBAbm90ZSAgICAgICAgIDIwLTA2LTA3IDIuNC4yIOiuvue9ruino+iApu+8jOS4i+S4queJiOacrOaQnumFjee9ruS4reW/gwovLyBAbm90ZSAgICAgICAgIDIwLTA2LTA2IDIuNC4xIOS/ruWkjeaWh+eroOWGheWuuea2iOWkseeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwLTA2LTA0IDIuNC4wIOS/ruWkjeaOqOiNkOaMiemSrumUmeS9jeeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDIwLTA2LTA0IDIuMy45IOeqhOWxj+mAgumFjeS8mOWMlgovLyBAbm90ZSAgICAgICAgIDIwLTA2LTA0IDIuMy44IOm7keWknOaooeW8j+WHuueOsOmXrumimO+8jOe0p+aApeWbnuaho+WIsCAyLjMuNgovLyBAbm90ZSAgICAgICAgIDIwLTA2LTAzIDIuMy43IOaEn+iwoiBAQWxleExXVCDlop7liqDpu5HmmpfmqKHlvI8KLy8gQG5vdGUgICAgICAgICAyMC0wNi0wMiAyLjMuNiBBZHNCeUdvb2dsZSDliKDpmaQKLy8gQG5vdGUgICAgICAgICAyMC0wNS0yNSAyLjMuNSDmhJ/osKIgQFJ5YW5JUE8g5L+u5aSNIENhbm5vdCByZWFkIHByb3BlcnR5ICdyZXBsYWNlJyBvZiB1bmRlZmluZWQg5oql6ZSZ55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMjAtMDUtMjQgMi4zLjQg5L+u5aSN5YWN55m75b2V5aSN5Yi25Yqf6IO9Ci8vIEBub3RlICAgICAgICAgMjAtMDUtMjIgMi4zLjMgTG9nb+S4juiDjOaZr+WQjOatpQovLyBAbm90ZSAgICAgICAgIDIwLTA1LTIyIDIuMy4yIOa3seW6puWIoOmZpOiDjOaZrwovLyBAbm90ZSAgICAgICAgIDIwLTA1LTIwIDIuMy4xIOmAmui/h3JlcXVpcmXkvb/nlKhOUHJvZ3Jlc3MKLy8gQG5vdGUgICAgICAgICAyMC0wNS0yMCAyLjMuMCDmmL7npLrmjqjojZDlhoXlrrnmjInpkq7moLflvI/lhoXnva7vvIzliZTpmaRDRE4KLy8gQG5vdGUgICAgICAgICAyMC0wNS0xNyAyLjIuOSDov5vluqbmnaHmoLflvI/mm7TmlrDvvIzml7bpl7Tlu7bml7bkvJjljJYKLy8gQG5vdGUgICAgICAgICAyMC0wNS0xNyAyLjIuOCDmm7TmlrDohJrmnKzmj4/ov7DvvIzlsZXlvIDor4TorrrnmoTmiYDmnInlm57lpI3vvIzliKDpmaTliJvkvZzkuK3lv4PmjInpkq7vvIzliqDovb3ov5vluqbmnaEKLy8gQG5vdGUgICAgICAgICAyMC0wNS0xNyAyLjIuNyDmm7TmlrDohJrmnKzmj4/ov7AKLy8gQG5vdGUgICAgICAgICAyMC0wNS0xNiAyLjIuNiDkv67lpI3nrKzkuIDmrKHngrnlh7vmmL7npLrmjqjojZDlhoXlrrnml6Dlj43lupTnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAyMC0wNS0xNiAyLjIuNSDliKDpmaTmiqLmspnlj5Hop5LmoIfvvIzkv67mlLnmmL7npLrmjqjojZDlhoXlrrnmjInpkq7moLflvI8KLy8gQG5vdGUgICAgICAgICAyMC0wNS0xNiAyLjIuNCDmhJ/osKLmnaXoh6pHaXRIdWLnmoTmnIvlj4vigJxIZXJvblpoYW5n4oCd55qESXNzdWXlu7rorq7vvIzliKDpmaTmiYDmnInljZrlrqLoirHph4zog6Hlk6jnmoTog4zmma/vvIzkuLvpobXliIbnsbvkuK3lub/lkYrmuIXpmaTvvIxDU1PmoLflvI/mjqfliLblrr3luqbpgILphY3ku6PnoIHkvJjljJYKLy8gQG5vdGUgICAgICAgICAyMC0wNS0xNiAyLjIuMyDmhJ/osKLmnaXoh6pHaXRIdWLnmoTmnIvlj4vigJxSZXRpcmVkV29ybGTigJ3nmoTku6PnoIHotKHnjK7vvIzkvb/nlKhDU1PmnaXmjqfliLbmoLflvI/vvIzogIzkuI3mmK9KU++8jOWinuWkp+eBtea0u+aAp+OAggovLyBAbm90ZSAgICAgICAgIDIwLTA1LTEzIDIuMi4yIOWxj+iUveaCqOeahOe8qeaUvuS4jeaYrzEwMCXnmoTmj5DnpLoKLy8gQG5vdGUgICAgICAgICAyMC0wNC0yOSAyLjIuMSDmhJ/osKLlpKflrrbnmoTmlK/mjIHvvIzlop7liqDnm67lvZXmmL7npLrvvIzoh6rliqjliKTmlq3mmK/lkKblrZjlnKjnm67lvZXosIPmlbTpobXpnaLlrr3luqbvvIzlsY/olL3mlrDlop7lub/lkYrvvIzmrKLov47lpKflrrbkvZPpqozlubbmj5Dlh7rmhI/op4HvvIEKLy8gQG5vdGUgICAgICAgICAyMC0wNC0xNSAyLjIuMCDkuIDkupvlub/lkYrooqvlhbbku5bmj5Lku7blsY/olL3lr7zoh7TnmoTlvILluLjml6Dop4bkuYsKLy8gQG5vdGUgICAgICAgICAyMC0wMy0zMCAyLjEuOSDlubLmjonigJzorrDlvZXkvaDnmoTliJvkvZzljobnqIvigJ3vvIzlubLmjonmnKrnmbvlvZXmg4XlhrXkuIvnmoTop5LmoIfmj5DphpIKLy8gQG5vdGUgICAgICAgICAyMC0wMy0xMyAyLjEuOCDnqoTlsY/pgILphY3liqDlvLoKLy8gQG5vdGUgICAgICAgICAyMC0wMy0xMyAyLjEuNyDmm7TmlrDnroDku4sKLy8gQG5vdGUgICAgICAgICAyMC0wMy0xMiAyLjEuNiDlrr3luqboh6rpgILlupTvvIjmhJ/osKLmnaXoh6pHaXRIdWLnmoTmnIvlj4tMZW9uRzfnmoTlu7rorq7vvInvvIHkv67lpI3liarotLTmnb/lh4DljJbml6DmlYjnmoTpl67popjjgIIKLy8gQG5vdGUgICAgICAgICAyMC0wMy0wNCAyLjEuNSDpgILphY1BZEd1YXJkCi8vIEBub3RlICAgICAgICAgMjAtMDItMjcgMi4xLjQg5LyY5YyW5YWN55m75b2V5aSN5Yi2Ci8vIEBub3RlICAgICAgICAgMjAtMDItMjUgMi4xLjMg5YWN55m75b2V5aSN5Yi25pu05paw77yM546w5bey5Y+v55SoCi8vIEBub3RlICAgICAgICAgMjAtMDItMjQgMi4xLjIgQnkgR2l0aHViQEphbGluV2FuZyDmm7TmlLnljrvpmaTliarotLTmnb/liqvmjIHnmoTmlrnlvI/vvIzkvb/lvpfljp/mlofmoLzlvI/lnKjlpI3liLbml7bog73lpJ/kv53nlZkKLy8gQG5vdGUgICAgICAgICAyMC0wMi0yMiAyLjEuMSDntKfmgKXkv67lpI3nlLHkuo4gQ1NETiDkv67mlLnliY3nq6/nu5PmnoTlr7zoh7TnmoTmlofnq6DplJnkvY0KLy8gQG5vdGUgICAgICAgICAyMC0wMi0xMSAyLjEuMCDoi6XlubLliqjnlLvkvJjljJbvvIzop4bop4nkvZPpqozmm7TmtYHnlYUKLy8gQG5vdGUgICAgICAgICAyMC0wMi0wNiAyLjAuOSDmrabmsYnliqDmsrnvvIHkv67mlLnmjqjojZDlhoXlrrnliIfmjaLlvIDlhbPkvY3nva7vvIzlh4/lsJHov53lkozmhJ8KLy8gQG5vdGUgICAgICAgICAyMC0wMS0xNyAyLjAuOCDljrvpmaTlj7Pkvqflub/lkYoKLy8gQG5vdGUgICAgICAgICAyMC0wMS0xNyAyLjAuNyDmhJ/osKLmnaXoh6pHaXRIdWLnmoTmnIvlj4vigJxnbGVhbnPigJ3nmoTlu7rorq7vvIzljrvmjonpobXlpLTlub/lkYoKLy8gQG5vdGUgICAgICAgICAxOS0xMi0xMiAyLjAuNiDmhJ/osKLmnaXoh6pHaXRIdWLnmoTmnIvlj4vigJx5ZXh1ZXNvbmfigJ3nmoTlu7rorq7vvIzlsIbkvZzogIXkv6Hmga/lnKjmlofnq6Dpobbpg6jlsZXnpLoKLy8gQG5vdGUgICAgICAgICAxOS0xMC0zMCAyLjAuNSDnvo7ljJbpmpDol4/mjInpkq7vvIzlop7liqDngrnlh7vliqjnlLsKLy8gQG5vdGUgICAgICAgICAxOS0xMC0zMCAyLjAuNCDliKDpmaRDU0RO5a6Y5pa55Zyo5Li76aG15o6o6YCB55qE5paH56ug77yI5aSn5aSa5piv5bm/5ZGK77yJCi8vIEBub3RlICAgICAgICAgMTktMTAtMzAgMi4wLjMg5re75Yqg5pu05aSa5bGP6JS96ISa5pysCi8vIEBub3RlICAgICAgICAgMTktMTAtMzAgMi4wLjAg56Wd6Ieq5bex55Sf5pel5b+r5LmQfuWujOWFqOmHjeWGmUNTRE5HcmVlbmVy77yM57uf5LiA5L2/55SoSlF1ZXJ577yM5pWI546H5pu06auYCi8vIEBub3RlICAgICAgICAgMTktMTAtMjcgMS41LjIg5Yig6Zmk5YiG5Lqr5rW35oql5o+Q56S6JibmhJ/osKJHaXRIdWLnmoTmnIvlj4vigJxDSE4tU1RVREVOVOKAneeahOWPjemmiO+8jOWOu+mZpOW6lemDqOivvueoi+aOqOiNkAovLyBAbm90ZSAgICAgICAgIDE5LTEwLTI3IDEuNS4xIOaEn+iwouadpeiHqkdpdEh1YueahOaci+WPi+KAnENITi1TVFVERU5U4oCd55qE57uG6Ie05aSN546w5Y+N6aaI77yM5Y676Zmk5LqG5bqV6YOo55qE6K++56iL5o6o6I2Q5bm/5ZGKCi8vIEBub3RlICAgICAgICAgMTktMTAtMDQgMS41LjAg56e76Zmk5LqG5bqV6YOo5Li76aKY5L+h5oGv5ZKM5omT6LWPCi8vIEBub3RlICAgICAgICAgMTktMDktMTAgMS40Ljkg5oSf6LCi5p2l6IeqR2l0SHVi55qE5pyL5Y+L4oCccHJvZ3JhbW1lclpl4oCd55qE57uG6Ie05aSN546w5Y+N6aaI77yM5L+u5aSN5LqG6K+E6K665Yy654K55Ye75p+l55yL5Zue5aSN5ZCO77yM5bey57uP5bGV5byA55qE6K+E6K665Lya5pS26LW355qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMTktMDktMDQgMS40Ljgg5oSf6LCi5p2l6IeqR2l0SHVi55qE5pyL5Y+L4oCcZHdkY3Ro4oCd55qE57uG6Ie05aSN546w5Y+N6aaI77yM546w5Zyo5p+l55yL5Y6f5Yib5paH56ug5LiN5Lya5peg6ZmQ5by555m75b2V56qX5Y+j5LqG77yM5LiU5Yqg5by65LqG6Ieq5Yqo5bGV5byA5Yqf6IO9Ci8vIEBub3RlICAgICAgICAgMTktMDgtMjAgMS40Ljcg5oSf6LCi5rK55Y+J55So5oi34oCcU3VwcmVtZVNpcuKAneeahOWPjemmiO+8jOS/ruWkjeS6huWPs+S+p+aCrOa1ruagj+mBruaMoeaWh+eroOeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDE5LTA4LTE0IDEuNC42IOaXoOivreOAguWImuabtOaWsOeahOWFjeeZu+W9leWkjeWItu+8jOWPiOaUueS6huOAguS/ruWkje+8gQovLyBAbm90ZSAgICAgICAgIDE5LTA4LTEzIDEuNC41IOabtOaWsOS6hueLrOWutuWKn+iDve+8muWFjeeZu+W9leWkjeWItgovLyBAbm90ZSAgICAgICAgIDE5LTA4LTEzIDEuNC40IOaEn+iwouadpeiHqkdpdEh1YueahOaci+WPi+KAnGlhbXN1bnhpbmfigJ3nmoTlj43ppojvvIzkv67lpI3kuobpobbpg6jkuI3otLTovrnnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAxOS0wOC0wMSAxLjQuMyDmhJ/osKLmsrnlj4nnlKjmiLfigJxkZGRkeeKAneeahOWPjemmiO+8jOWOu+mZpOS6huabtOWkmuaOqOW5v+W5v+WRigovLyBAbm90ZSAgICAgICAgIDE5LTA3LTMwIDEuNC4yIOaEn+iwouayueWPieeUqOaIt+KAnOWRqOS5ieadsOKAneeahOWPjemmiO+8jOWinuWKoOS6humYskNTRE7lpJbpk77ph43lrprlkJHnmoTlip/og73vvIhDU0RO6Iet5rWB5rCT77yJCi8vIEBub3RlICAgICAgICAgMTktMDctMjAgMS40LjEg5L+u5aSN5LqG5o6o6I2Q5YaF5a655byA5YWz6Leo5paH56ug5peg5pWI6Zeu6aKY77yI5b+Y5LqG6YWN572uQ29va2ll5L2c55So5Z+f77yJCi8vIEBub3RlICAgICAgICAgMTktMDctMTkgMS40LjAgMS4g5p6E5p625aSn5pu05pawIDIuIOaEn+iwouadpeiHqkdpdEh1YueahOaci+WPiyJsdWtlbWluIueahOWPjemmiO+8jOWKoOWFpeS6huS4i+aWueaOqOiNkOWGheWuueaYr+WQpumakOiXj+W8gOWFs++8iOWunueUqO+8iQovLyBAbm90ZSAgICAgICAgIDE5LTA3LTEzIDEuMy4wIOaEn+iwouadpeiHqkdpdEh1YueahOaci+WPi+KAnEhvbGFwbGFjZeKAneeahOWPjemmiO+8jOS/ruWkjeS6huaWh+eroOaXoOazleiHquWKqOWxleW8gOeahOmXrumimO+8iENTRE7mgLvmlLnov5nkuKrvvIzku6TkurrlpLTnlrzvvIkKLy8gQG5vdGUgICAgICAgICAxOS0wNi0wOCAxLjIuNiDmhJ/osKLmsrnlj4nnlKjmiLfigJxEZXNreUFraeKAneeahOWPjemmiO+8jOS/ruWkjeS6huaWh+eroOaXoOazleiHquWKqOWxleW8gOeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDE5LTA2LTA3IDEuMi40IOS/ruWkjeS6hueZu+W9leWQjuivhOiuuuaXoOazleato+W4uOaJk+W8gOeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDE5LTA2LTA3IDEuMi4zIOaEn+iwouayueWPieeUqOaItyLmsLjov5znmoTmrr/kuIsi55qE5Y+N6aaI77yM5Zyo5LiA5LiK5Y2I55qE5Yqq5Yqb5pS75YWL5LiL77yM57uI5LqO5a6e546w5LqG5pyq55m75b2V5bGV5byA6K+E6K6655qE6K+t5Y+lCi8vIEBub3RlICAgICAgICAgMTktMDYtMDUgMS4yLjAg5L+u5aSN5LqG6K+E6K665peg5rOV6Ieq5Yqo5bGV5byA55qEQlVHCi8vIEBub3RlICAgICAgICAgMTktMDYtMDQgMS4xLjkg5L+u5aSN5LqG5peg5rOV6Ieq5Yqo5bGV5byA55qEQlVH77yI6Ieq6Zet5LqG77yJCi8vIEBub3RlICAgICAgICAgMTktMDYtMDQgMS4xLjYgQ1NETuWkquWdj+S6hu+8jOaKiuKAnOa2iOaBr+KAneaMiemSrueahENsYXNz6K6+572u5oiQ5LqG4oCcR2l0Q2hhdOKAne+8jOaJgOS7peS/ruWkjeS6huKAnOa2iOaBr+KAneaMiemSrua2iOWkseeahOmXrumimAovLyBAbm90ZSAgICAgICAgIDE5LTA2LTA0IDEuMS41IDEuIOS8mOWMluS6huiuuuWdm+S9k+mqjCAyLue+juWMluOAgeS8mOWMluS7o+eggee7k+aehAovLyBAbm90ZSAgICAgICAgIDE5LTA2LTA0IDEuMS40IOaEn+iwouadpeiHqkdpdEh1YueahOaci+WPi+KAnGlhbXN1bnhpbmfigJ3nmoTlj43ppojvvIzlop7liqDkuoborrrlnZvlub/lkYrljLnphY3op4TliJkKLy8gQG5vdGUgICAgICAgICAxOS0wNi0wMyAxLjEuMyDmhJ/osKLmnaXoh6pHaXRIdWLnmoTmnIvlj4vigJx3YW5nd2VpMTM14oCd55qE5Y+N6aaI77yM5Y676Zmk5LqG6K+E6K665Yy65LiK5pa555qE5bm/5ZGKCi8vIEBub3RlICAgICAgICAgMTktMDUtMjcgMS4xLjIg5oSf6LCi5rK55Y+J55So5oi34oCc5aSP5Lyf5p2w4oCd55qE5Y+N6aaI77yM5L+u5aSN5LqG5a+M5paH5pys57yW6L6R5Zmo5peg5rOV5L2/55So55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgMTktMDUtMjUgMS4xLjAgMS4g5L+u5aSN5LqG5Li76aG15bm/5ZGK55qE6Zeu6aKYIDIuIOiuuuWdm+iHquWKqOWxleW8gCAzLiDorrrlnZvlub/lkYrmtojpmaQKLy8gQG5vdGUgICAgICAgICAxOS0wNS0yNSAxLjAuOSDmhJ/osKLmsrnlj4nnlKjmiLfigJzmuKPmuKPkuI3lh4bor7Tor53igJ3nmoTlj43ppojvvIzkv67lpI3kuobmlLbol4/mjInpkq7mtojlpLHnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAxOS0wMy0wMSAxLjAuMyDmt7vliqDpobXpnaLpgInmi6nmgKfov4fmu6Top4TliJkKLy8gQG5vdGUgICAgICAgICAxOS0wMy0wMSAxLjAuMiDlop7liqDkuoblh4DljJbliarotLTmnb/lip/og70KLy8gQG5vdGUgICAgICAgICAxOS0wMy0wMSAxLjAuMSDkv67lpI3kuobmjpLniYjpl67popgsIOS8mOWMluS6huS7o+eggee7k+aehAovLyBAbm90ZSAgICAgICAgIDE5LTAyLTI2IDEuMC4wIOWIneeJiOWPkeW4gwovLyA9PS9Vc2VyU2NyaXB0PT0KdmFyIHZlcnNpb24gPSAiMy41LjEiOwp2YXIgY3VycmVudFVSTCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwppZiAoY3VycmVudFVSTC5pbmRleE9mKCI/IikgIT09IC0xKSB7CmN1cnJlbnRVUkwgPSBjdXJyZW50VVJMLnN1YnN0cmluZygwLCBjdXJyZW50VVJMLmluZGV4T2YoIj8iKSk7Cn0KdmFyIGxpc3Q7CnZhciB3aW5kb3dUb3AgPSAwOwp2YXIgc3RhcnRUaW1lTWlsbGkgPSBEYXRlLm5vdygpOwp2YXIgc3RvcFRpbWVNaWxsaSA9IDA7CgovLyDoh6rlrprkuYkgQ1NTCi8vIOi/m+W6puadoQokKCdoZWFkJykuYXBwZW5kKCI8c3R5bGU+I25wcm9ncmVzc3twb2ludGVyLWV2ZW50czpub25lfSNucHJvZ3Jlc3MgLmJhcntiYWNrZ3JvdW5kOiNmNDQ0NDQ7cG9zaXRpb246Zml4ZWQ7ei1pbmRleDoxMDMxO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoycHh9I25wcm9ncmVzcyAucGVne2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MDt3aWR0aDoxMDBweDtoZWlnaHQ6MTAwJTtib3gtc2hhZG93OjAgMCAxMHB4ICNmNDQ0NDQsMCAwIDVweCAjZjQ0NDQ0O29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoM2RlZykgdHJhbnNsYXRlKDAsLTRweCk7LW1zLXRyYW5zZm9ybTpyb3RhdGUoM2RlZykgdHJhbnNsYXRlKDAsLTRweCk7dHJhbnNmb3JtOnJvdGF0ZSgzZGVnKSB0cmFuc2xhdGUoMCwtNHB4KX0jbnByb2dyZXNzIC5zcGlubmVye2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246Zml4ZWQ7ei1pbmRleDoxMDMxO3RvcDoxNXB4O3JpZ2h0OjE1cHh9I25wcm9ncmVzcyAuc3Bpbm5lci1pY29ue3dpZHRoOjE4cHg7aGVpZ2h0OjE4cHg7Ym94LXNpemluZzpib3JkZXItYm94O2JvcmRlcjpzb2xpZCAycHggdHJhbnNwYXJlbnQ7Ym9yZGVyLXRvcC1jb2xvcjojZjQ0NDQ0O2JvcmRlci1sZWZ0LWNvbG9yOiNmNDQ0NDQ7Ym9yZGVyLXJhZGl1czo1MCU7LXdlYmtpdC1hbmltYXRpb246bnByb2dyZXNzLXNwaW5uZXIgLjRzIGxpbmVhciBpbmZpbml0ZTthbmltYXRpb246bnByb2dyZXNzLXNwaW5uZXIgLjRzIGxpbmVhciBpbmZpbml0ZX0ubnByb2dyZXNzLWN1c3RvbS1wYXJlbnR7b3ZlcmZsb3c6aGlkZGVuO3Bvc2l0aW9uOnJlbGF0aXZlfS5ucHJvZ3Jlc3MtY3VzdG9tLXBhcmVudCAjbnByb2dyZXNzIC5iYXIsLm5wcm9ncmVzcy1jdXN0b20tcGFyZW50ICNucHJvZ3Jlc3MgLnNwaW5uZXJ7cG9zaXRpb246YWJzb2x1dGV9QC13ZWJraXQta2V5ZnJhbWVzIG5wcm9ncmVzcy1zcGlubmVyezAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgwKX0xMDAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpfX1Aa2V5ZnJhbWVzIG5wcm9ncmVzcy1zcGlubmVyezAle3RyYW5zZm9ybTpyb3RhdGUoMCl9MTAwJXt0cmFuc2Zvcm06cm90YXRlKDM2MGRlZyl9fTwvc3R5bGU+Iik7Ci8vIOW8ueWHuueql+WPowokKCdoZWFkJykuYXBwZW5kKCI8c3R5bGU+LmJsYWNrX292ZXJsYXl7dG9wOjAlO2xlZnQ6MCU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiMwMDA7ei1pbmRleDoxMDAxOy1tb3otb3BhY2l0eTowLjg7b3BhY2l0eTouMTA7ZmlsdGVyOmFscGhhKG9wYWNpdHk9ODgpfS5ibGFja19vdmVybGF5LC53aGl0ZV9jb250ZW50e2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZX0ud2hpdGVfY29udGVudHt6LWluZGV4Ojk5OTkhaW1wb3J0YW50O3RvcDoyNSU7bGVmdDoyNSU7d2lkdGg6NjUwcHg7aGVpZ2h0OjYwJTtwYWRkaW5nOjIwcHg7Ym9yZGVyOjBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7ei1pbmRleDoxMDAyO292ZXJmbG93OmF1dG99PC9zdHlsZT4iKTsKLy8g5o+Q56S65p2hCiQoJ2hlYWQnKS5hcHBlbmQoIjxzdHlsZT4udHJpcHNjb257cGFkZGluZzoxMHB4fTwvc3R5bGU+Iik7Ci8vIOaMiemSru+8iOaXp++8iQokKCdoZWFkJykuYXBwZW5kKCI8c3R5bGU+I3RvZ2dsZS1idXR0b257ZGlzcGxheTpub25lfS5idXR0b24tbGFiZWx7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTppbmxpbmUtYmxvY2s7d2lkdGg6ODJweDtiYWNrZ3JvdW5kLWNvbG9yOiNjY2M7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JvcmRlci1yYWRpdXM6MzBweDtjdXJzb3I6cG9pbnRlcn0uY2lyY2xle3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDozMHB4O2hlaWdodDozMHB4O2JvcmRlci1yYWRpdXM6NTAlO2JhY2tncm91bmQtY29sb3I6I2ZmZn0uYnV0dG9uLWxhYmVsIC50ZXh0e2xpbmUtaGVpZ2h0OjMwcHg7Zm9udC1zaXplOjE4cHg7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmV9Lm9ue2NvbG9yOiNmZmY7ZGlzcGxheTpub25lO3RleHQtaW5kZW50OjEwcHh9Lm9mZntjb2xvcjojZmZmO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3RleHQtaW5kZW50OjUzcHh9LmJ1dHRvbi1sYWJlbCAuY2lyY2xle2xlZnQ6MDt0cmFuc2l0aW9uOmFsbCAuM3N9I3RvZ2dsZS1idXR0b246Y2hlY2tlZCtsYWJlbC5idXR0b24tbGFiZWwgLmNpcmNsZXtsZWZ0OjUwcHh9I3RvZ2dsZS1idXR0b246Y2hlY2tlZCtsYWJlbC5idXR0b24tbGFiZWwgLm9ue2Rpc3BsYXk6aW5saW5lLWJsb2NrfSN0b2dnbGUtYnV0dG9uOmNoZWNrZWQrbGFiZWwuYnV0dG9uLWxhYmVsIC5vZmZ7ZGlzcGxheTpub25lfSN0b2dnbGUtYnV0dG9uOmNoZWNrZWQrbGFiZWwuYnV0dG9uLWxhYmVse2JhY2tncm91bmQtY29sb3I6Izc4ZDY5MH08L3N0eWxlPiIpOwovLyDkv53lrZjmjInpkq4KJCgnaGVhZCcpLmFwcGVuZCgiPHN0eWxlPiNzYXZlMSwjc2F2ZTJ7YmFja2dyb3VuZC1jb2xvcjojMTlhNGVkO2JvcmRlcjpub25lO2NvbG9yOiNmZmY7cGFkZGluZzo1cHggMTVweDt0ZXh0LWFsaWduOmNlbnRlcjt0ZXh0LWRlY29yYXRpb246bm9uZTtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MTRweDtjdXJzb3I6cG9pbnRlcn08L3N0eWxlPiIpOwovLyBTdGFyIOagt+W8jwokKCdoZWFkJykuYXBwZW5kKCI8c3R5bGU+LmdpdmVNZU9uZVN0YXI6aG92ZXJ7Y29sb3I6I0ZGNjlCNDt9PC9zdHlsZT4iKTsKCi8vIFNWRwovL3ZhciBzYXZlX3N2ZyA9ICc8c3ZnIHQ9IjE1OTUwODI2NTAxNzMiIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTA3NSAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMjA3OCIgd2lkdGg9IjE0MCIgaGVpZ2h0PSIxNDAiPjxwYXRoIGQ9Ik03NTMuNzYzOTAyIDY4NS44MzAyNDRhNDguOTUyMTk1IDQ4Ljk1MjE5NSAwIDAgMSA0OS4xNTItNDguNzAyNDM5YzgxLjQyMDQ4OCAwIDE0MS4xNjIxNDYtNjUuMzg2MTQ2IDE0MS4xNjIxNDctMTQ2LjA1NzM2NiAwLTQzLjUwNzUxMi0xMy4wMzcyNjgtODIuNDE5NTEyLTQzLjQ1NzU2MS0xMDkuMjQzMzE3YTE0Mi4zNjA5NzYgMTQyLjM2MDk3NiAwIDAgMC0yMC4yODAxOTUtMTQuOTM1NDE1IDE1OC4wNDU2NTkgMTU4LjA0NTY1OSAwIDAgMC0xMS4yMzkwMjUtNi4yNDM5MDJsLTIuNzQ3MzE3LTEuMjk4NzMyYTE1NS44NDc4MDUgMTU1Ljg0NzgwNSAwIDAgMC05LjE5MTAyNC0zLjk5NjA5N2MtMS4zNDg2ODMtMC41NDk0NjMtMi42OTczNjYtMC45OTkwMjQtNC4wOTYtMS40OTg1MzdhMTUyLjM1MTIyIDE1Mi4zNTEyMiAwIDAgMC04LjQ5MTcwNy0yLjg0NzIxOWMtMS45NDgwOTgtMC41OTk0MTUtMy44OTYxOTUtMC45OTkwMjQtNS44NDQyOTMtMS40OTg1MzctMi40OTc1NjEtMC41OTk0MTUtNC45NDUxNzEtMS4yNDg3OC03LjQ5MjY4My0xLjc0ODI5My0yLjU5NzQ2My0wLjQ5OTUxMi01LjM0NDc4LTAuODk5MTIyLTguMDQyMTQ2LTEuMjQ4NzgtMS45NDgwOTgtMC4yNDk3NTYtMy44NDYyNDQtMC41OTk0MTUtNS44NDQyOTMtMC43OTkyMmExNTMuMTUwNDM5IDE1My4xNTA0MzkgMCAwIDAtMTQuNDM1OTAzLTAuNzQ5MjY4Yy0xLjQ5ODUzNyAwLTIuOTk3MDczIDAuMTk5ODA1LTQuNTQ1NTYxIDAuMjQ5NzU2YTI2NS4zOTA4MjkgMjY1LjM5MDgyOSAwIDAgMC01LjU5NDUzNi0yNC41MjYwNDljLTAuNDk5NTEyLTEuOTk4MDQ5LTEuMjk4NzMyLTMuODQ2MjQ0LTEuODk4MTQ2LTUuODQ0MjkyYTI2Ny40Mzg4MjkgMjY3LjQzODgyOSAwIDAgMC01Ljk0NDE5Ni0xNy45ODI0MzljLTAuNjQ5MzY2LTEuNzk4MjQ0LTEuNDk4NTM3LTMuNDk2NTg1LTIuMTk3ODUzLTUuMjk0ODNhMjgzLjEyMzUxMiAyODMuMTIzNTEyIDAgMCAwLTcuNzQyNDM5LTE3LjczMjY4M0w3NzIuNzQ1MzY2IDI2OS43MzY1ODVhMjgyLjk3MzY1OSAyODIuOTczNjU5IDAgMCAwLTkuNzkwNDM5LTE3LjgzMjU4NUM3MTQuMzAyNDM5IDE3MS41ODI0MzkgNjI1Ljg4ODc4IDEyNC44NzgwNDkgNTI0LjQ4NzgwNSAxMjQuODc4MDQ5Yy0xMDEuNDAwOTc2IDAtMTg5LjkxNDUzNyA0Ni42NTQ0MzktMjM4LjUxNzA3MyAxMjYuOTc2LTMuNDk2NTg1IDUuNzk0MzQxLTYuNjkzNDYzIDExLjc4ODQ4OC05Ljc5MDQzOSAxNy44MzI1ODVsLTIuMTk3ODU0IDQuMDk2YTI4My41MjMxMjIgMjgzLjUyMzEyMiAwIDAgMC03Ljc0MjQzOSAxNy43MzI2ODNsLTIuMTk3ODU0IDUuMjQ0ODc4Yy0yLjI0NzgwNSA1Ljg5NDI0NC00LjE0NTk1MSAxMS45ODgyOTMtNS45OTQxNDYgMTguMDMyMzktMC41NDk0NjMgMS45OTgwNDktMS4yOTg3MzIgMy44NDYyNDQtMS44NDgxOTUgNS44NDQyOTNhMjY2LjczOTUxMiAyNjYuNzM5NTEyIDAgMCAwLTUuNTk0NTM3IDI0LjQ3NjA5OGMtMS40OTg1MzcgMC0yLjk5NzA3My0wLjE5OTgwNS00LjU0NTU2MS0wLjE5OTgwNS00Ljg5NTIyIDAtOS42OTA1MzcgMC4yOTk3MDctMTQuNDg1ODUzIDAuNzQ5MjY4LTEuOTk4MDQ5IDAuMTk5ODA1LTMuODQ2MjQ0IDAuNDk5NTEyLTUuNzk0MzQyIDAuNzk5MjItMi42OTczNjYgMC4zNDk2NTktNS40NDQ2ODMgMC42OTkzMTctOC4wOTIwOTcgMS4yNDg3OC0yLjQ5NzU2MSAwLjQ5OTUxMi00Ljk5NTEyMiAxLjE0ODg3OC03LjQ5MjY4MyAxLjc0ODI5My0xLjg5ODE0NiAwLjQ5OTUxMi0zLjg0NjI0NCAwLjg5OTEyMi01Ljc5NDM0MiAxLjQ5ODUzNmExNTMuNjQ5OTUxIDE1My42NDk5NTEgMCAwIDAtOC40OTE3MDcgMi43OTcyNjlsLTQuMDk2IDEuNDk4NTM2YTE2NC4yODk1NjEgMTY0LjI4OTU2MSAwIDAgMC05LjI0MDk3NiAzLjk5NjA5OGwtMi42OTczNjYgMS4zNDg2ODNhMTQ1LjU1Nzg1NCAxNDUuNTU3ODU0IDAgMCAwLTMxLjQ2OTI2OCAyMS4xNzkzMTdDMTE3Ljg4NDg3OCA0MDguNjAwOTc2IDEwNC44OTc1NjEgNDQ3LjU2MjkyNyAxMDQuODk3NTYxIDQ5MS4wNzA0MzljMCA4MC42NzEyMiA1OS43NDE2NTkgMTQ2LjA1NzM2NiAxNDEuMTYyMTQ2IDE0Ni4wNTczNjZhNDguOTUyMTk1IDQ4Ljk1MjE5NSAwIDAgMSA0OS4xNTIgNDguNzAyNDM5IDQ4Ljk1MjE5NSA0OC45NTIxOTUgMCAwIDEtNDkuMTUyIDQ4LjcwMjQzOWMtMTM1LjcxNzQ2MyAwLTI0NS43MTAwNDktMTA4Ljk5MzU2MS0yNDUuNzEwMDQ4LTI0My40NjIyNDQgMC0xMDkuNjkyODc4IDczLjIyODQ4OC0yMDIuNDAyMzQxIDE3My44MzAyNDMtMjMyLjg3MjU4NUEzNzUuODMyOTc2IDM3NS44MzI5NzYgMCAwIDEgNTI0LjQ4NzgwNSAyMC4zMzAxNDZhMzc1Ljg4MjkyNyAzNzUuODgyOTI3IDAgMCAxIDM1MC4zMDc5MDIgMjM3Ljg2NzcwOGMxMDAuNjAxNzU2IDMwLjQ3MDI0NCAxNzMuODMwMjQ0IDEyMy4xNzk3MDcgMTczLjgzMDI0NCAyMzIuODcyNTg1IDAgMTM0LjQ2ODY4My0xMDkuOTkyNTg1IDI0My40NjIyNDQtMjQ1LjcxMDA0OSAyNDMuNDYyMjQ0YTQ4Ljk1MjE5NSA0OC45NTIxOTUgMCAwIDEtNDkuMTAyMDQ4LTQ4LjcwMjQzOXoiIHAtaWQ9IjIwNzkiPjwvcGF0aD48cGF0aCBkPSJNNDg3Ljk3MzQ2MyAzODYuMTIyOTI3YTQ5LjEwMjA0OSA0OS4xMDIwNDkgMCAwIDEgNzIuOTI4NzgxIDAuMDk5OTAybDE0Ny4zNTYwOTcgMTYyLjA0MTc1NmM2Ljk5MzE3MSA3Ljc0MjQzOSAxMS40ODg3OCAxOS40MzEwMjQgMTIuNTM3NzU3IDMwLjEyMDU4NmwwLjI0OTc1NiAxMi45MzczNjZjMCAxOS40ODA5NzYtMjAuNDggMzkuNjYxMjY4LTM5LjIxMTcwOCAzOS42NjEyNjhoLTEwNC44OTc1NjF2MjYyLjk5MzE3MWE1Mi40NDg3OCA1Mi40NDg3OCAwIDEgMS0xMDQuODk3NTYxIDB2LTI2Mi45OTMxNzFoLTEwNC44OTc1NjFjLTEzLjg4NjQzOSAwLTM5LjIxMTcwNy0yMS43Mjg3OC0zOS4yMTE3MDctMzkuNjYxMjY4di0xMi45ODczMTdjMC0xMi40ODc4MDUgNC43OTUzMTctMjEuMjc5MjIgMTIuNjM3NjU5LTI5LjkyMDc4MWwxNDcuMzU2MDk3LTE2Mi4yOTE1MTJ6IiBwLWlkPSIyMDgwIj48L3BhdGg+PC9zdmc+JzsKdmFyIHN0YXJfc3ZnXzEgPSAnPHN2ZyB0PSIxNTk1MDgzNjMxNjg1IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwNTEgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIxNzMiIHdpZHRoPSIxNDAiIGhlaWdodD0iMTQwIj48cGF0aCBkPSJNNTI1LjgzNzgzOCA4NTIuNDEwODExTDE5OS4yNjQ4NjUgMTAwMS44NTk0NTlsNDEuNTEzNTEzLTM1Ny4wMTYyMTZMMCAzODEuOTI0MzI0bDM1MS40ODEwODEtNjkuMTg5MTg5TDUyNS44Mzc4MzggMGwxNzQuMzU2NzU3IDMxMi43MzUxMzVMMTA1MS42NzU2NzYgMzgxLjkyNDMyNGwtMjQwLjc3ODM3OSAyNjIuOTE4OTE5IDQxLjUxMzUxNCAzNTcuMDE2MjE2eiIgZmlsbD0iI0ZGRDU2NiIgcC1pZD0iMjE3NCI+PC9wYXRoPjwvc3ZnPic7CnZhciBzdGFyX3N2Z18yID0gJyA8c3ZnIHQ9IjE1OTUwODM3MTUzMTIiIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iNzg0OCIgd2lkdGg9IjE0MCIgaGVpZ2h0PSIxNDAiPjxwYXRoIGQ9Ik0xMDE0LjAwMTM0NyA4NjYuMDkwMjM2TDgxMC4yMzU2OSA2NjIuMzI0NTc5bDE0NS40OTc2NDMtODQuMTI2NTk5YzExLjM3Nzc3OC02LjU1MDg0MiAxNy45Mjg2Mi0xOC45NjI5NjMgMTYuODk0Mjc2LTMyLjA2NDY0Ny0xLjAzNDM0My0xMy4xMDE2ODQtOS4zMDkwOTEtMjQuNDc5NDYxLTIxLjM3NjQzMS0yOS4zMDYzOTdsLTY0OC4xODg1NTItMjU4LjU4NTg1OWMtMTIuNzU2OTAyLTUuMTcxNzE3LTI3LjIzNzcxLTIuMDY4Njg3LTM2Ljg5MTU4MiA3LjU4NTE4Ni05LjY1Mzg3MiA5LjY1Mzg3Mi0xMi43NTY5MDIgMjQuMTM0NjgtNy41ODUxODUgMzYuODkxNTgybDI1OC41ODU4NTggNjQ4LjUzMzMzM2M0LjgyNjkzNiAxMi4wNjczNCAxNi4yMDQ3MTQgMjAuNjg2ODY5IDI5LjMwNjM5NyAyMS4zNzY0MzEgMTMuMTAxNjg0IDEuMDM0MzQzIDI1LjUxMzgwNS01LjUxNjQ5OCAzMi4wNjQ2NDctMTYuODk0Mjc2bDg0LjEyNjU5OS0xNDUuNDk3NjQzIDIwMy43NjU2NTcgMjAzLjc2NTY1N2M2LjU1MDg0MiA2LjU1MDg0MiAxNS4xNzAzNyA5Ljk5ODY1MyAyNC4xMzQ2OCA5Ljk5ODY1MyA4Ljk2NDMxIDAgMTcuOTI4NjItMy40NDc4MTEgMjQuMTM0NjgtOS45OTg2NTNsOTkuMjk2OTctOTkuMjk2OTdjMTMuNDQ2NDY1LTEzLjQ0NjQ2NSAxMy40NDY0NjUtMzUuMTY3Njc3IDAtNDguNjE0MTQxek0xNTAuMzI0NTc5IDEwMi4wNTUyMTljLTEzLjQ0NjQ2NS0xMy40NDY0NjUtMzUuMTY3Njc3LTEzLjQ0NjQ2NS00OC4yNjkzNiAwLTEzLjQ0NjQ2NSAxMy40NDY0NjUtMTMuNDQ2NDY1IDM1LjE2NzY3NyAwIDQ4LjI2OTM2bDc2LjE5NjYzMyA3Ni4xOTY2MzNjNi41NTA4NDIgNi41NTA4NDIgMTUuNTE1MTUyIDkuOTk4NjUzIDI0LjEzNDY4IDkuOTk4NjUzczE3LjU4MzgzOC0zLjQ0NzgxMSAyNC4xMzQ2OC05Ljk5ODY1M2MxMy40NDY0NjUtMTMuNDQ2NDY1IDEzLjQ0NjQ2NS0zNS4xNjc2NzcgMC00OC4yNjkzNkwxNTAuMzI0NTc5IDEwMi4wNTUyMTl6TTE3Ni4xODMxNjUgMzM4LjU3NTA4NGMwLTE4Ljk2Mjk2My0xNS4xNzAzNy0zNC4xMzMzMzMtMzQuMTMzMzMzLTM0LjEzMzMzM0gzNC4xMzMzMzNjLTE4Ljk2Mjk2MyAwLTM0LjEzMzMzMyAxNS4xNzAzNy0zNC4xMzMzMzMgMzQuMTMzMzMzczE1LjE3MDM3IDM0LjEzMzMzMyAzNC4xMzMzMzMgMzQuMTMzMzM0aDEwNy41NzE3MThjMTguOTYyOTYzIDAgMzQuNDc4MTE0LTE1LjE3MDM3IDM0LjQ3ODExNC0zNC4xMzMzMzR6TTE2Mi4zOTE5MTkgNDQ0LjQyMjg5NmwtNzYuMTk2NjMzIDc1Ljg1MTg1MWMtMTMuNDQ2NDY1IDEzLjQ0NjQ2NS0xMy40NDY0NjUgMzUuMTY3Njc3IDAgNDguMjY5MzYxIDYuNTUwODQyIDYuNTUwODQyIDE1LjUxNTE1MiA5Ljk5ODY1MyAyNC4xMzQ2OCA5Ljk5ODY1M3MxNy41ODM4MzgtMy40NDc4MTEgMjQuMTM0NjgtOS45OTg2NTNsNzYuMTk2NjMzLTc2LjE5NjYzM2MxMy40NDY0NjUtMTMuNDQ2NDY1IDEzLjQ0NjQ2NS0zNS4xNjc2NzcgMC00OC4yNjkzNjEtMTMuNDQ2NDY1LTEzLjEwMTY4NC0zNS4xNjc2NzctMTMuMTAxNjg0LTQ4LjI2OTM2IDAuMzQ0Nzgyek0zMzguNTc1MDg0IDE3Ni4xODMxNjVjMTguOTYyOTYzIDAgMzQuMTMzMzMzLTE1LjE3MDM3IDM0LjEzMzMzNC0zNC4xMzMzMzNWMzQuMTMzMzMzYzAtMTguOTYyOTYzLTE1LjE3MDM3LTM0LjEzMzMzMy0zNC4xMzMzMzQtMzQuMTMzMzMzcy0zNC4xMzMzMzMgMTUuMTcwMzctMzQuMTMzMzMzIDM0LjEzMzMzM3YxMDcuNTcxNzE4YzAgMTguOTYyOTYzIDE1LjE3MDM3IDM0LjQ3ODExNCAzNC4xMzMzMzMgMzQuNDc4MTE0ek00NjguNTU3NTc2IDIyMC42NTk5MzNjOC42MTk1MjkgMCAxNy41ODM4MzgtMy40NDc4MTEgMjQuMTM0NjgtOS45OTg2NTRMNTY4Ljg4ODg4OSAxMzQuNDY0NjQ2YzEzLjQ0NjQ2NS0xMy40NDY0NjUgMTMuNDQ2NDY1LTM1LjE2NzY3NyAwLTQ4LjI2OTM2LTEzLjQ0NjQ2NS0xMy40NDY0NjUtMzUuMTY3Njc3LTEzLjQ0NjQ2NS00OC4yNjkzNiAwbC03Ni4xOTY2MzMgNzYuMTk2NjMzYy0xMy40NDY0NjUgMTMuNDQ2NDY1LTEzLjQ0NjQ2NSAzNS4xNjc2NzcgMCA0OC4yNjkzNiA2LjU1MDg0MiA2LjU1MDg0MiAxNS41MTUxNTIgOS45OTg2NTMgMjQuMTM0NjggOS45OTg2NTR6IiBmaWxsPSIjMmMyYzJjIiBwLWlkPSI3ODQ5Ij48L3BhdGg+PC9zdmc+JzsKdmFyIHN0YXJfc3ZnXzMgPSAnIDxzdmcgdD0iMTU5NTA4MzkyNTQzOCIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMjA0IDEwMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwLWlkPSI0ODA5IiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjE0MCI+PHBhdGggZD0iTTEwODguODY0MzQ4IDYxOC4xMzcwMWExNTU1LjAwOTM4NCAxNTU1LjAwOTM4NCAwIDAgMS0xNTAuMjczMDA0IDE2Ny4xMzczMDhjLTUyLjg4MTY0MiA1MS4xOTUyMTItMTA3LjkzMTU1MiAxMDEuMTg1ODMtMTYzLjY0Mzk4OSAxNDcuMjYxNTIxLTMzLjg0OTA2OSAyNy41MjQ5NTUtNjAuMjI5NjYxIDQ4LjY2NTU2Ni03Ni4xOTA1MjEgNjAuMjI5NjYxYTE2Mi45ODE0NjIgMTYyLjk4MTQ2MiAwIDAgMS0xOTEuODkxNjk5IDBjLTE1LjUzOTI1My0xMi4wNDU5MzItNDIuMTYwNzYzLTMyLjY0NDQ3Ni03Ni4xOTA1MjEtNjAuODMxOTU3YTI2MzguNDgwNzU0IDI2MzguNDgwNzU0IDAgMCAxLTE2NC4zNjY3NDUtMTQ3LjI2MTUyMSAxNTc5LjEwMTI0OSAxNTc5LjEwMTI0OSAwIDAgMS0xNTAuMjczMDA0LTE2NS44MTIyNTdBNDY4LjEwNDkyNCA0NjguMTA0OTI0IDAgMCAxIDAuMTUyOTk4IDM0NC43NTQ1NzkgMzE1LjU0MzE5MyAzMTUuNTQzMTkzIDAgMCAxIDEwOS4wNDgyMjUgOTYuMzY3NDU3YTM5OS40NDMxMTEgMzk5LjQ0MzExMSAwIDAgMSA0OTMuODgzMjE5LTIwLjQ3ODA4NCAzOTguNjYwMTI1IDM5OC42NjAxMjUgMCAwIDEgNDkzLjg4MzIxOSAyMC40NzgwODRBMzE1LjQ4Mjk2NCAzMTUuNDgyOTY0IDAgMCAxIDEyMDQuNzQ2MjE1IDM0My4zMDkwNjdhNDY2Ljg0MDEwMSA0NjYuODQwMTAxIDAgMCAxLTExNS43MDExNzggMjc0LjY0NzI1NHoiIGZpbGw9IiNGRTRCODMiIHAtaWQ9IjQ4MTAiPjwvcGF0aD48L3N2Zz4nOwp2YXIgc3Rhcl9zdmdfNCA9ICcgPHN2ZyB0PSIxNTk1MDg0MDg5MTE1IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjgwMDgiIHdpZHRoPSIxNDAiIGhlaWdodD0iMTQwIj48cGF0aCBkPSJNNTEyIDQ2LjU0NTQ1NUMyNTYgNDYuNTQ1NDU1IDQ2LjU0NTQ1NSAyNTYgNDYuNTQ1NDU1IDUxMnMyMDkuNDU0NTQ1IDQ2NS40NTQ1NDUgNDY1LjQ1NDU0NSA0NjUuNDU0NTQ1IDQ2NS40NTQ1NDUtMjA5LjQ1NDU0NSA0NjUuNDU0NTQ1LTQ2NS40NTQ1NDVTNzY4IDQ2LjU0NTQ1NSA1MTIgNDYuNTQ1NDU1eiBtMCA4MzcuODE4MTgxYy0yMDQuOCAwLTM3Mi4zNjM2MzYtMTY3LjU2MzYzNi0zNzIuMzYzNjM2LTM3Mi4zNjM2MzZzMTY3LjU2MzYzNi0zNzIuMzYzNjM2IDM3Mi4zNjM2MzYtMzcyLjM2MzYzNiAzNzIuMzYzNjM2IDE2Ny41NjM2MzYgMzcyLjM2MzYzNiAzNzIuMzYzNjM2LTE2Ny41NjM2MzYgMzcyLjM2MzYzNi0zNzIuMzYzNjM2IDM3Mi4zNjM2MzZ6IiBmaWxsPSIjMDBDNUM1IiBwLWlkPSI4MDA5Ij48L3BhdGg+PHBhdGggZD0iTTY1Ni4yOTA5MDkgNTg2LjQ3MjcyN2MtNzkuMTI3MjczIDY5LjgxODE4Mi0yMDkuNDU0NTQ1IDY5LjgxODE4Mi0yODguNTgxODE4IDAtMTguNjE4MTgyLTEzLjk2MzYzNi00MS44OTA5MDktMTMuOTYzNjM2LTYwLjUwOTA5MSA0LjY1NDU0Ni0xMy45NjM2MzYgMTMuOTYzNjM2LTEzLjk2MzYzNiA0MS44OTA5MDkgNC42NTQ1NDUgNjAuNTA5MDkxIDU1Ljg1NDU0NSA1MS4yIDEyNS42NzI3MjcgNzQuNDcyNzI3IDIwMC4xNDU0NTUgNzQuNDcyNzI3czE0NC4yOTA5MDktMjcuOTI3MjczIDIwMC4xNDU0NTUtNzQuNDcyNzI3YzE4LjYxODE4Mi0xMy45NjM2MzYgMTguNjE4MTgyLTQxLjg5MDkwOSA0LjY1NDU0NS02MC41MDkwOTFzLTQxLjg5MDkwOS0xOC42MTgxODItNjAuNTA5MDkxLTQuNjU0NTQ2ek0zNTguNCA0NjAuOGMyNy45MjcyNzMgMCA1MS4yLTIzLjI3MjcyNyA1MS4yLTUxLjJzLTIzLjI3MjcyNy01NS44NTQ1NDUtNTEuMi01NS44NTQ1NDVjLTI3LjkyNzI3MyAwLTUxLjIgMjMuMjcyNzI3LTUxLjIgNTEuMnMyMy4yNzI3MjcgNTUuODU0NTQ1IDUxLjIgNTUuODU0NTQ1ek02NjUuNiA0NjAuOGMyNy45MjcyNzMgMCA1MS4yLTIzLjI3MjcyNyA1MS4yLTUxLjJzLTIzLjI3MjcyNy01MS4yLTUxLjItNTEuMi01MS4yIDIzLjI3MjcyNy01MS4yIDUxLjIgMjMuMjcyNzI3IDUxLjIgNTEuMiA1MS4yeiIgZmlsbD0iIzAwQzVDNSIgcC1pZD0iODAxMCI+PC9wYXRoPjwvc3ZnPic7CnZhciBzdGFyX3N2ZyA9IHN0YXJfc3ZnXzEgKyBzdGFyX3N2Z18yICsgc3Rhcl9zdmdfMyArIHN0YXJfc3ZnXzQ7CnZhciBkb25hdGVfc3ZnID0gJzxzdmcgdD0iMTU5Mjk4MjUwODI1OCIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwLWlkPSI0MjA3IiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxwYXRoIGQ9Ik02NjQuNDggMjM0LjQzMmEzMiAzMiAwIDAgMC00NS4yNDgtMC44bC03Ni4yNTYgNzMuNi03My4zNDQtNzMuMjE2YTMyIDMyIDAgMSAwLTQ1LjI0OCA0NS4zMTJsNzIuMzg0IDcyLjI1NmgtNDkuMjhhMzIgMzIgMCAwIDAgMCA2NGg2My43NzZ2MzJoLTYzLjc3NmEzMiAzMiAwIDAgMCAwIDY0aDYzLjc3NnY2NS42NjRhMzIgMzIgMCAxIDAgNjQgMHYtNjUuNjY0aDY0LjI4OGEzMiAzMiAwIDEgMCAwLTY0aC02NC4yODh2LTMyaDY0LjI4OGEzMiAzMiAwIDEgMCAwLTY0aC01MC4zNjhsNzQuNDY0LTcxLjg3MmEzMi4wMzIgMzIuMDMyIDAgMCAwIDAuODMyLTQ1LjI4eiBtMjc1LjIgNTAzLjU1MmE5MDE3LjU2OCA5MDE3LjU2OCAwIDAgMC0xNDEuNjY0LTU2LjczNiAzNjguNTEyIDM2OC41MTIgMCAwIDAgOTcuNTY4LTI0OC42MDhjMC0yMDIuOTEyLTE2NS4xMi0zNjgtMzY4LjA2NC0zNjhzLTM2OCAxNjUuMDg4LTM2OCAzNjhjMCAxNi4yMjQgMS4wMjQgMzIuMzUyIDMuMDcyIDQ3Ljk2OCAyLjMwNCAxNy41MDQgMTguNDk2IDI5LjY2NCAzNS45MDQgMjcuNTg0YTMyIDMyIDAgMCAwIDI3LjU4NC0zNS45MDQgMzA0LjUxMiAzMDQuNTEyIDAgMCAxLTIuNTYtMzkuNjQ4YzAtMTY3LjYxNiAxMzYuMzg0LTMwNCAzMDQtMzA0IDE2Ny42NDggMCAzMDQuMDY0IDEzNi4zODQgMzA0LjA2NCAzMDRhMzAwLjU0NCAzMDAuNTQ0IDAgMCAxLTk2LjEyOCAyMjEuNDcyYy0wLjc2OCAwLjczNi0xLjA4OCAxLjc2LTEuODI0IDIuNTI4LTQyLjg0OC0xNS45MzYtNzkuMzI4LTI4LjQ4LTkzLjc2LTMwLjY1Ni0yNC44OTYtMy45MDQtNDguNjcyIDcuNjE2LTYzLjEwNCAyOC44OTYtMTIuMDMyIDE3Ljc5Mi0xNS4wNzIgMzguODE2LTguMDk2IDU2LjI1NiA0LjI4OCAxMC42NTYgMjAuNTEyIDMyLjg5NiAzOS43NzYgNTcuMjgtNDYuNDMyLTAuMDY0LTExNy4zMTItNi4zMzYtMTkyLjgzMi0zNS40ODgtMzEuMjY0LTEyLjA2NC02OS40NC01Mi42NC0xMDMuMTM2LTg4LjQxNi00Ny45NjgtNTAuOTc2LTkzLjI4LTk5LjEwNC0xNDIuNTYtOTkuMTA0LTE4LjMzNiAwLTM1Ljc0NCA2Ljg0OC01MC4zMzYgMTkuNzc2LTE4LjI0IDE2LjIyNC0zNS4xMzYgNDguMzItMTIgMTA5LjI0OCA0Mi42MjQgMTEyLjE2IDIwOC41NDQgMjg1LjEyIDM0MS43MjggMjg1LjEyaDQ3OC4xNDRhMzIgMzIgMCAwIDAgMzItMzJ2LTE2MGEzMS44NCAzMS44NCAwIDAgMC0xOS43NzYtMjkuNTY4eiBtLTQ0LjE2IDE1Ny42aC00NDUuMTJsLTEuMDI0IDMydi0zMmMtOTcuNiAwLTI0Ny4wNzItMTUyLjEyOC0yODEuOTItMjQzLjg3Mi0xMC4xMTItMjYuNjU2LTYuNzItMzcuNDA4LTUuMzQ0LTM4LjYyNCA0LjEyOC0zLjY0OCA2LjUyOC0zLjY0OCA3Ljg0LTMuNjQ4IDIxLjYzMiAwIDY0LjYwOCA0NS42MzIgOTUuOTY4IDc4Ljk0NCA0MC4yMjQgNDIuNzUyIDgxLjg1NiA4Ni45NDQgMTI2LjY1NiAxMDQuMjU2IDg1LjIxNiAzMi44OTYgMTY0Ljg5NiAzOS44MDggMjE2LjczNiAzOS44MDggNDEuMzc2IDAgNjcuNTg0LTQuMzUyIDY4LjY3Mi00LjU0NGEzMiAzMiAwIDAgMCAxOS4xMzYtNTIuMTZjLTI3LjAwOC0zMi4wOTYtNTguNTkyLTcxLjgwOC02Ny4yOTYtODUuMzQ0IDAuMjg4LTAuNTc2IDAuNTEyLTEuMDI0IDAuMzUyLTEuMTUyIDIyLjg0OCAzLjQ4OCAxNjIuNDMyIDU3Ljk1MiAyNjUuMjggOTkuODR2MTA2LjQ5NnoiIHAtaWQ9IjQyMDgiPjwvcGF0aD48L3N2Zz4nOwp2YXIgc2V0X3N2ZyA9ICc8c3ZnIHQ9IjE1OTI5ODI5NzAzNzUiIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMTAxMTIiIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCI+PHBhdGggZD0iTTI1NiAxMDIuNGg1MTJsMjU2IDI1Ni01MTIgNTYzLjJMMCAzNTguNHoiIGZpbGw9IiMyNkNENjMiIHAtaWQ9IjEwMTEzIj48L3BhdGg+PHBhdGggZD0iTTI1NiAxMDIuNGwyNTYgMjU2SDB6TTc2OCAxMDIuNGwyNTYgMjU2SDUxMnpNNTEyIDkyMS42bDIwNC44LTU2My4ySDMwNy4yeiIgZmlsbD0iIzE0QTM0NSIgcC1pZD0iMTAxMTQiPjwvcGF0aD48L3N2Zz4nOwp2YXIgc2F2ZV9zdmcgPSAnPHN2ZyB0PSIxNjEwNzE3NTAwMDMzIiBjbGFzcz0iaWNvbiIgc3R5bGU9IndpZHRoOiAxZW07IGhlaWdodDogMWVtO3ZlcnRpY2FsLWFsaWduOiBtaWRkbGU7ZmlsbDogY3VycmVudENvbG9yO292ZXJmbG93OiBoaWRkZW47IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iNDYyMSI+PHBhdGggZD0iTTk2MCAxNjYuNEw3OTguNCAxNy42bC00LjgtNC44Qzc4NS42IDQuOCA3NjggMCA3NTUuMiAwSDEwNy4yYy0zMy42IDAtNjQgMzAuNC02NCA2NHY4OTZjMCAzMy42IDMwLjQgNjQgNjQgNjRIOTE2LjhjMzMuNiAwIDY0LTMwLjQgNjQtNjRWMjEyLjhjMC0xNi04LTMzLjYtMjAuOC00Ni40ek02NDAgODQuOHY4NC44SDI5OS4yVjg0LjhINjQwek0zNDAuOCA5MzkuMlY2NDBoMzQwLjh2Mjk5LjJIMzQwLjh6IG01NTUuMiAwaC0xMjh2LTMyMGMwLTMzLjYtMzAuNC02NC02NC02NEgzMjBjLTMzLjYgMC02NCAzMC40LTY0IDY0djMyMEgxMjhWODQuOGg4NC44VjE5MmMwIDMzLjYgMzAuNCA2NCA2NCA2NGgzODRjMzMuNiAwIDY0LTMwLjQgNjQtNjRWODQuOGgyMC44bDE0OC44IDEzNnY3MTguNHoiIHAtaWQ9IjQ2MjIiIGRhdGEtc3BtLWFuY2hvci1pZD0iYTMxM3guNzc4MTA2OS4wLmk0Ij48L3BhdGg+PHBhdGggZD0iTTU5Ni44IDY4My4ySDQyNy4yYy0yNS42IDAtNDMuMiAxNy42LTQzLjIgNDMuMnMxNy42IDQzLjIgNDMuMiA0My4yaDE3MS4yYzI1LjYgMCA0My4yLTE3LjYgNDMuMi00My4yLTEuNi0yNy4yLTE5LjItNDMuMi00NC44LTQzLjJ6TTU5Ni44IDgxMS4ySDQyNy4yYy0yNS42IDAtNDMuMiAxNy42LTQzLjIgNDMuMnMxNy42IDQzLjIgNDMuMiA0My4yaDE3MS4yYzI1LjYgMCA0My4yLTE3LjYgNDMuMi00My4yLTEuNi0yNy4yLTE5LjItNDMuMi00NC44LTQzLjJ6IiBwLWlkPSI0NjIzIj48L3BhdGg+PC9zdmc+JzsKCi8vIGpxdWVyeS5zaG93dGlwcy5qcwooZnVuY3Rpb24oalF1ZXJ5KSB7CglqUXVlcnkuZm4uc2hvd1RpcHMgPSBmdW5jdGlvbihvcHRpb25zLGVsZW0pewoJCXZhciBjb25maWcgPSB7CgkJCXNraW46InRyaXBzIiwKCQkJY29udGVudDokKHRoaXMpLmF0dHIoInRpcHMiKXx8IuW8ueWHuuexu+Wei+eahOawlOazoeaPkOekuu+8gSIsICAvL+awlOazoeaPkOekuuWGheWuuemHjOmdouWPr+S7peaYr0hUTUzvvIzpu5jorqTmmL7npLroh6rlrprkuYnnmoTmj5DnpLrlhoXlrrkKCQkJd2lkdGg6ImF1dG8iLCAgLy/pu5jorqTkuLphdXRv77yM5Y+v5Lul5YaZ5YW35L2T5bC65a+45aaC77yaMjAwCgkJCWFsaWduVG86WyJyaWdodCIsImNlbnRlciJdLCAgLy/nrq3lpLTmlrnlkJEKCQkJY29sb3I6WyJyZ2IoMjQ3LCAyMDYsIDU3KSIsIiNGRkZFRjQiXSwgIC8v6L+Z6YeM5piv5o+Q56S65bGC55qE6aOO5qC877yM56ys5LiA5Liq5Y+C5pWw5Li65o+Q56S66L655qGG6aKc6Imy77yM56ys5LqM5Liq5Y+C5pWw5Li65o+Q56S66IOM5pmv6aKc6ImyCgkJCXR5cGU6Imh0bWwiLCAgIC8v5pi+56S65YaF5a6557G75Z6LCgkJCXRyaWdnZXI6ImNsaWNrIiwgICAgLy/pu5jorqTkuLrngrnlh7vmmL7npLrvvIxzaG935Li65Yid5aeL5YyW5bCx5pi+56S677yMaG92ZXLkuLrnu4/ov4fmmL7npLrvvIxmb2N1c+eEpueCueaYvuekuu+8jG1vdXNl6Lef6ZqP6byg5qCH5pi+56S66ZqQ6JePCgkJCXNwYWNpbmc6MTAsICAvL+m7mOiupOS4uueureWktOi3neemu+WvueixoeeahOWwuuWvuAoJCQljdXN0b21pZDoiIiwgIC8v6Ieq5a6a5LmJSUQKCQkJaXNjbG9zZTpmYWxzZSwgICAvL+aYr+WQpuaYvuekuuWFs+mXreaMiemSrgoJCQlzdWNjZXNzIDogbnVsbCAgICAvL+aIkOWKn+WQjueahOWbnuiwg+WHveaVsAoJCX07CgkJdmFyIG9wdHMgPSBqUXVlcnkuZXh0ZW5kKGNvbmZpZywgb3B0aW9ucyk7CgkJcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpewoJCQl2YXIgdGhhdCA9IGpRdWVyeSh0aGlzKSx0aXBCb3gsdGlwSWQsc2VsZkgsc2VsZlcsY29uSWQsZG9jVywgc3BhID0gb3B0cy5zcGFjaW5nLCBza2luPW9wdHMuc2tpbjsKCQkJdmFyIE1hdGhyYW5kb20gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA5OTk5OTk5KTsKICAgICAgICAgICAgdmFyIHBtciA9IChvcHRzLmN1c3RvbWlkPT0iIikgPyBNYXRocmFuZG9tIDpvcHRzLmN1c3RvbWlkLnJlcGxhY2UoL1sjLl0vLCAiIik7CgkJCXZhciBwb2ludGVyPW9wdHMuYWxpZ25Uby5sZW5ndGg9PT0xID8gJycrb3B0cy5hbGlnblRvWzBdKycnIDogJycrb3B0cy5hbGlnblRvWzBdKyctJytvcHRzLmFsaWduVG9bMV0rJyc7CgoJCQlpZih0eXBlb2YgZWxlbSA9PSAnc3RyaW5nJykgewoJCQkJaWYoZWxlbSA9PSJzaG93Iil7CgkJCQkJalF1ZXJ5KCcjdGlwJytwbXIpLnNob3coKTsgIGpRdWVyeSgiI2NvbiIrcG1yKS5odG1sKG9wdHMuY29udGVudCk7CgkJCQkJc2hvd1Bvc2l0aW9uKHBvaW50ZXIsalF1ZXJ5KCcjdGlwJytwbXIpKTsKCQkJCQl9OwoJCQkJaWYoZWxlbSA9PSJoaWRlIil7alF1ZXJ5KCcjdGlwJytwbXIpLmhpZGUoKX07CgkJCX07CgkJCWlmKHR5cGVvZiBlbGVtID09ICcnIHx8IHR5cGVvZiBlbGVtID09IHVuZGVmaW5lZCl7cmV0dXJuIHRydWV9OwoJCQlpZihqUXVlcnkoJyN0aXAnK3BtcikubGVuZ3RoPT0xKXtyZXR1cm4gZmFsc2U7fQoJCQl0aXBCb3g9alF1ZXJ5KCc8ZGl2IGNsYXNzPSInK3NraW4rJyAnK3NraW4rJy0nK3BvaW50ZXIrJyIgaWQ9InRpcCcrcG1yKyciPjxpPjwvaT48ZW0+PC9lbT48ZGl2IGNsYXNzPSInK3NraW4rJ2NvbiIgaWQ9ImNvbicrcG1yKyciPjwvZGl2PjwvZGl2PicpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpOwoJCQl0aXBJZCA9IGpRdWVyeSgiI3RpcCIrcG1yKTsKCQkJY29uSWQgPSBqUXVlcnkoIiNjb24iK3Btcik7CgoJCQl2YXIgZWRnZWNvbG9yPSdib3JkZXItJytvcHRzLmFsaWduVG9bMF0rJy1jb2xvcicsIHRmaT10aXBJZC5maW5kKCJpIiksIHRmZW09dGlwSWQuZmluZCgiZW0iKSwgdGZpZW09dGlwSWQuZmluZCgiaSxlbSIpOwoJCQl0aXBJZC5jc3Moeydwb3NpdGlvbic6J2Fic29sdXRlJyxib3JkZXI6JzFweCBzb2xpZCcsJ2JvcmRlci1jb2xvcic6b3B0cy5jb2xvclswXSwnYmFja2dyb3VuZC1jb2xvcic6b3B0cy5jb2xvclsxXX0pOwoJCQlpZihvcHRzLmFsaWduVG9bMV09PSdjZW50ZXInKXsgdmFyIG9mZnBvcz01MCxwZXJjZW49IiUiOyB9ZWxzZXsgdmFyIG9mZnBvcz01LHBlcmNlbj0icHgiOyB9OwoJCQl0ZmllbS5jc3Moe3dpZHRoOjAsaGVpZ2h0OjAsY29udGVudDonJywncG9zaXRpb24nOidhYnNvbHV0ZSd9KQoJCQl0ZmkuY3NzKHtib3JkZXI6JzhweCBzb2xpZCB0cmFuc3BhcmVudCcsJ3otaW5kZXgnOjV9KTsKCQkJdGZlbS5jc3Moe2JvcmRlcjonN3B4IHNvbGlkIHRyYW5zcGFyZW50Jywnei1pbmRleCc6MTB9KTsKCQkJc3dpdGNoIChwb2ludGVyKSB7CgkJCQljYXNlICd0b3AtY2VudGVyJzoKCQkJCWNhc2UgJ2JvdHRvbS1jZW50ZXInOgoJCQkJY2FzZSAndG9wLWxlZnQnOgoJCQkJY2FzZSAnYm90dG9tLWxlZnQnOgoJCQkJCXZhciBwb2k9ImxlZnQiOwoJCQkJCWlmKHBvaW50ZXI9PSd0b3AtY2VudGVyJyB8fCBwb2ludGVyPT0nYm90dG9tLWNlbnRlcicpewoJCQkJCQl0ZmkuY3NzKHsibWFyZ2luLWxlZnQiOiItOHB4In0pOwoJCQkJCQl0ZmVtLmNzcyh7Im1hcmdpbi1sZWZ0IjoiLTdweCJ9KTsKCQkJCQl9CgkJCQkgICAgYnJlYWs7CgkJCQljYXNlICdsZWZ0LWNlbnRlcic6CgkJCQljYXNlICdyaWdodC1jZW50ZXInOgoJCQkJY2FzZSAnbGVmdC10b3AnOgoJCQkJY2FzZSAncmlnaHQtdG9wJzoKCQkJCQl2YXIgcG9pPSJ0b3AiOwoJCQkJCWlmKHBvaW50ZXI9PSdsZWZ0LWNlbnRlcicgfHwgcG9pbnRlcj09J3JpZ2h0LWNlbnRlcicpewoJCQkJCQl0ZmkuY3NzKHsibWFyZ2luLXRvcCI6Ii04cHgifSk7CgkJCQkJCXRmZW0uY3NzKHsibWFyZ2luLXRvcCI6Ii03cHgifSk7CgkJCQkJfQoJCQkJICAgIGJyZWFrOwoJCQkJZGVmYXVsdDoKCQkJCQl2YXIgcG9pPSJyaWdodCI7CgkJCQkgICAgYnJlYWs7CgkJCX07CgoJCQlpZihwb2ludGVyPT0nZm9sbG93Jyl7CgkJCQl0ZmkuY3NzKHsnYm9yZGVyLWJvdHRvbS1jb2xvcic6b3B0cy5jb2xvclswXSxsZWZ0OicnK29mZnBvcytwZXJjZW4rJycsYm90dG9tOicxMDAlJ30pOwoJCQkJdGZlbS5jc3Moeydib3JkZXItYm90dG9tLWNvbG9yJzpvcHRzLmNvbG9yWzFdLGxlZnQ6JycrKG9mZnBvcysob3B0cy5hbGlnblRvWzFdPT0nY2VudGVyJz8wOjEpKStwZXJjZW4rJycsYm90dG9tOicxMDAlJ30pOwoJCQl9ZWxzZXsKCQkJCXRmaS5jc3MoZWRnZWNvbG9yLG9wdHMuY29sb3JbMF0pLmNzcyhwb2ksJycrb2ZmcG9zK3BlcmNlbisnJyk7CgkJCQl0ZmVtLmNzcyhlZGdlY29sb3Isb3B0cy5jb2xvclsxXSkuY3NzKHBvaSwnJysob2ZmcG9zKyhvcHRzLmFsaWduVG9bMV09PSdjZW50ZXInPzA6MSkpK3BlcmNlbisnJyk7CgkJCQl0ZmllbS5jc3Mob3B0cy5hbGlnblRvWzBdLCcxMDAlJyk7CgkJCX07CgoJCQlzd2l0Y2ggKG9wdHMudHlwZSkgewoJCQkJY2FzZSAnaHRtbCc6Y29uSWQuaHRtbChvcHRzLmNvbnRlbnQpOyBicmVhazsKCQkJCWNhc2UgJ2lkJyAgOgoJCQkJICAgIHZhciB0ZW1waWQ9alF1ZXJ5KG9wdHMuY29udGVudCkgLHdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQlpZih0ZW1waWQuY3NzKCJkaXNwbGF5IikgPT0gIm5vbmUiKXsgIHRlbXBpZC5jc3Moe2Rpc3BsYXk6ImJsb2NrIn0pOyB9CgkJCQkJY29uSWQuYXBwZW5kKHRlbXBpZCk7CgkJCQkgICAgYnJlYWs7CgkJCX07CgkJCWlmKG9wdHMuaXNjbG9zZSl7CgkJCQlqUXVlcnkoJzxzcGFuIGNsYXNzPSInK3NraW4rJ2Nsb3NlIiBpZD0iY2xvc2UnK3BtcisnIj4mdGltZXM7PC9zcGFuPicpLmFwcGVuZFRvKHRpcElkKTsKCQkJCXRpcElkLmZpbmQoIiNjbG9zZSIrcG1yKyIiKS5vbigiY2xpY2siLGZ1bmN0aW9uKCl7dGlwSWQuaGlkZSgpO30pOwoJCQl9CgoJCQlpZih0eXBlb2Ygb3B0cy53aWR0aCA9PT0gJ3N0cmluZycpewoJCQkJZG9jVyA9IHBhcnNlSW50KGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgqKG9wdHMud2lkdGgucmVwbGFjZSgnJScsJycpLzEwMCkpOwoJCQkJKHR5cGVvZiBvcHRzLndpZHRoID09ICdhdXRvJyB8fCB0eXBlb2Ygb3B0cy53aWR0aCA9PSAnJykgPyB0aXBCb3guY3NzKHt3aWR0aDonYXV0byd9KSA6IHRpcEJveC5jc3Moe3dpZHRoOmRvY1d9KTsKCQkJCXRpcEJveC5oZWlnaHQoKTsKCQkJfWVsc2V7CgkJCQl0aXBCb3gud2lkdGgob3B0cy53aWR0aCkuaGVpZ2h0KCk7CgkJCX0KICAgICAgICAgICAgZnVuY3Rpb24gc2hvd1Bvc2l0aW9uKHBvaW50ZXIsY2VsbCl7CgkJCQl2YXIgc2VsZkggPSB0aGF0Lm91dGVySGVpZ2h0KHRydWUpLCBzZWxmVyA9IHRoYXQub3V0ZXJXaWR0aCh0cnVlKTsKCQkJCXZhciBwb3N0PXRoYXQub2Zmc2V0KCkudG9wLCBwb3NsPXRoYXQub2Zmc2V0KCkubGVmdDsKCQkJCXZhciB0aXBDZWxsPShjZWxsPT0iIiB8fCBjZWxsPT11bmRlZmluZWQpID8gdGlwSWQgOiBjZWxsOwoJCQkgICAgdmFyIHRpcEg9dGlwQ2VsbC5vdXRlckhlaWdodCh0cnVlKSwgdGlwVz10aXBDZWxsLm91dGVyV2lkdGgodHJ1ZSk7CgoJCQkJc3dpdGNoIChwb2ludGVyKSB7CgkJCQkJY2FzZSAndG9wLWxlZnQnOiB0aXBDZWxsLmNzcyh7dG9wOnBvc3QtdGlwSC1zcGEsbGVmdDpwb3NsfSk7IGJyZWFrOwoJCQkJCWNhc2UgJ3RvcC1jZW50ZXInOiB0aXBDZWxsLmNzcyh7dG9wOnBvc3QtdGlwSC1zcGEsbGVmdDpwb3NsLSh0aXBXLzIpKyhzZWxmVy8yKX0pOyBicmVhazsKCQkJCQljYXNlICd0b3AtcmlnaHQnOiB0aXBDZWxsLmNzcyh7dG9wOnBvc3QtdGlwSC1zcGEsbGVmdDpwb3NsLSh0aXBXLXNlbGZXKX0pOyBicmVhazsKCQkJCQljYXNlICdib3R0b20tbGVmdCc6IHRpcENlbGwuY3NzKHt0b3A6cG9zdCtzZWxmSCtzcGEsbGVmdDpwb3NsfSk7IGJyZWFrOwoJCQkJCWNhc2UgJ2JvdHRvbS1jZW50ZXInOiB0aXBDZWxsLmNzcyh7dG9wOnBvc3Qrc2VsZkgrc3BhLGxlZnQ6cG9zbC0odGlwVy8yKSsoc2VsZlcvMil9KTsgYnJlYWs7CgkJCQkJY2FzZSAnYm90dG9tLXJpZ2h0JzogdGlwQ2VsbC5jc3Moe3RvcDpwb3N0K3NlbGZIK3NwYSxsZWZ0OnBvc2wtKHRpcFctc2VsZlcpfSk7IGJyZWFrOwoJCQkJCWNhc2UgJ2xlZnQtdG9wJzogdGlwQ2VsbC5jc3Moe3RvcDpwb3N0LGxlZnQ6cG9zbC10aXBXLXNwYX0pOyBicmVhazsKCQkJCQljYXNlICdsZWZ0LWNlbnRlcic6IHRpcENlbGwuY3NzKHt0b3A6cG9zdC0odGlwSC8yKSsoc2VsZkgvMiksbGVmdDpwb3NsLXRpcFctc3BhfSk7IGJyZWFrOwoJCQkJCWNhc2UgJ3JpZ2h0LXRvcCc6IHRpcENlbGwuY3NzKHt0b3A6cG9zdCxsZWZ0OnBvc2wrc2VsZlcrc3BhfSk7IGJyZWFrOwoJCQkJCWNhc2UgJ3JpZ2h0LWNlbnRlcic6IHRpcENlbGwuY3NzKHt0b3A6cG9zdC0odGlwSC8yKSsoc2VsZkgvMiksbGVmdDpwb3NsK3NlbGZXK3NwYX0pOyBicmVhazsKCQkJCQljYXNlICdmb2xsb3cnOiB0aGF0Lm1vdXNlbW92ZShmdW5jdGlvbihlKSB7IHRpcENlbGwuY3NzKHt0b3A6ZS5wYWdlWSArIDMwLGxlZnQ6ZS5wYWdlWCAtIDZ9KTsgfSk7IGJyZWFrOwoJCQkJfTsKCQkJfQoJCQl0aXBCb3guaGlkZSgpOwoJCQlzd2l0Y2ggKG9wdHMudHJpZ2dlcil7CgkJCQljYXNlICdzaG93JzpzaG93UG9zaXRpb24ocG9pbnRlcik7dGlwQm94LnNob3coKTticmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ2NsaWNrJzp0aGF0LmNsaWNrKGZ1bmN0aW9uKCl7c2hvd1Bvc2l0aW9uKHBvaW50ZXIpO3RpcEJveC5zaG93KCk7fSk7YnJlYWs7CgkJCQljYXNlICdob3Zlcic6dGhhdC5ob3ZlcihmdW5jdGlvbigpe3Nob3dQb3NpdGlvbihwb2ludGVyKTt0aXBCb3guc2hvdygpOyB0aXBCb3gub24oIm1vdXNlb3ZlciIsZnVuY3Rpb24oKXtqUXVlcnkodGhpcykuc2hvdygpfSkub24oIm1vdXNlb3V0IixmdW5jdGlvbigpe2pRdWVyeSh0aGlzKS5oaWRlKCl9KX0sZnVuY3Rpb24oKXt0aXBCb3guaGlkZSgpO30pO2JyZWFrOwoJCQkJY2FzZSAnZm9jdXMnOnRoYXQuZm9jdXMoZnVuY3Rpb24oKXtzaG93UG9zaXRpb24ocG9pbnRlcik7dGlwQm94LnNob3coKTt9KTsgIHRoYXQuYmx1cihmdW5jdGlvbigpe3RpcEJveC5oaWRlKCk7fSk7YnJlYWs7CgkJCQljYXNlICdtb3VzZSc6dGhhdC5ob3ZlcihmdW5jdGlvbigpe3Nob3dQb3NpdGlvbihwb2ludGVyKTt0aXBCb3guc2hvdygpO30sZnVuY3Rpb24oKXt0aXBCb3guaGlkZSgpO30pO2JyZWFrOwoJCQl9OwoJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7b3B0cy5zdWNjZXNzICYmIG9wdHMuc3VjY2VzcygpO30sIDEpOwoJCX0pOwoJfQp9KShqUXVlcnkpOwoKKGZ1bmN0aW9uICgpIHsKICAgICd1c2Ugc3RyaWN0JzsKCiAgICBsKCJDU0ROR3JlZW5lciBWIiArIHZlcnNpb24pOwogICAgTlByb2dyZXNzLnN0YXJ0KCk7CgogICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICB2YXIgYmxvY2tVUkwgPSBjdXJyZW50VVJMLnNwbGl0KCIvIikubGVuZ3RoOwogICAgICAgIHZhciBtYWluID0gLyh3d3dcLmNzZG5cLm5ldFwvKSQvOwogICAgICAgIHZhciBtYWluTmF2ID0gL25hdi87CiAgICAgICAgdmFyIGFydGljbGUgPSAvYXJ0aWNsZS87CiAgICAgICAgdmFyIGJicyA9IC9iYnNcLmNzZG5cLm5ldC87CiAgICAgICAgdmFyIGJsb2cgPSAvYmxvZ1wuY3NkblwubmV0LzsKICAgICAgICB2YXIgYmxvZzIgPSAvXC9hcnRpY2xlXC9saXN0XC8vOwogICAgICAgIHZhciBkb3dubG9hZCA9IC9kb3dubG9hZFwuY3NkblwubmV0LzsKICAgICAgICB2YXIgbG9naW4gPSAvcGFzc3BvcnRcLmNzZG5cLm5ldC87CiAgICAgICAgdmFyIHpvbmUgPSAvbWVcLmNzZG5cLm5ldC87CiAgICAgICAgdmFyIG90aGVyID0gLyh3d3dcLmNzZG5cLm5ldFwvKS87CiAgICAgICAgdmFyIG1wID0gL21wXC5jc2RuXC5uZXQvOwoKICAgICAgICAvLyDmlbDnu4TliJ3lp4vljJYKICAgICAgICBsaXN0ID0gW107CiAgICAgICAgLy8g5aS06YOo5YiGCiAgICAgICAgLy8gQVBQCiAgICAgICAgLy8gcHV0KCIuYXBwLWFwcCIpOwogICAgICAgIC8vIFZJUAogICAgICAgIHB1dCgiLnZpcC1jYWlzZSIpOwogICAgICAgIC8vIOiusOW9leS9oOeahOaIkOmVv+WOhueoi++8iOiusOS4quavm++8iQogICAgICAgIHB1dCgiI3dyaXRlR3VpZGUiKTsKICAgICAgICAvLyDmlrDpgJrnn6XlsI/lnIbngrnvvIjmnKrnmbvlvZXmiY3mtojmjonvvIkKICAgICAgICBpZiAoJCgiLnVzZXJpbmZvIGEiKS50ZXh0KCkgPT09ICfnmbvlvZUv5rOo5YaMJykgewogICAgICAgICAgICBwdXQoIiNtc2ctY2lyY2xlIik7CiAgICAgICAgfQogICAgICAgIC8vIOmhtumDqOiwt+atjOW5v+WRigogICAgICAgIHB1dCgiLmFkc2J5Z29vZ2xlIik7CiAgICAgICAgLy8g5oKs5rWu5Zyo6aG25qCP5oyJ6ZKu5LiK5Ye6546w55qE5LqM57u056CBCiAgICAgICAgcHV0KCIuYXBwQ29udHJvbCIpOwogICAgICAgIC8vIOmhtumDqOW5v+WRigogICAgICAgIHB1dCgiLmFkdmVydC1iZyIpOwoKICAgICAgICBpZiAobWFpbi50ZXN0KGN1cnJlbnRVUkwpIHx8IG1haW5OYXYudGVzdChjdXJyZW50VVJMKSkgewogICAgICAgICAgICBsKCLmraPlnKjkvJjljJbkuLvpobXkvZPpqowuLi4iKTsKICAgICAgICAgICAgLy8g5bi46KeECiAgICAgICAgICAgIC8vIOWktOmDqOW5v+WRigogICAgICAgICAgICBwdXQoIi5iYW5uZXItYWQtYm94Iik7CiAgICAgICAgICAgIC8vIOW1jOWFpeW5v+WRigogICAgICAgICAgICBwdXQoIiNrcF9ib3hfMjExIik7CiAgICAgICAgICAgIC8vIOWPs+S+p+W5v+WRigogICAgICAgICAgICBwdXQoIi5zbGlkZS1vdXRlciIpOwogICAgICAgICAgICAvLyDlj7Pkvqfor6bmg4UKICAgICAgICAgICAgcHV0KCIucGVyc2lvbl9hcnRpY2xlIik7CiAgICAgICAgICAgIC8vIOWPs+S+p+aOqOiNkAogICAgICAgICAgICAkKCIuZmVlZF9jb21wYW55IikucGFyZW50KCkucmVtb3ZlKCk7CiAgICAgICAgICAgIC8vIOW5v+WRiui9ruaSrQogICAgICAgICAgICBwdXQoIi5lbC1jYXJvdXNlbF9fY29udGFpbmVyIik7CiAgICAgICAgICAgIC8vIOmhtumDqOaoquW5hQogICAgICAgICAgICBwdXQoIi50b29sYmFyLWFkdmVydCIpOwogICAgICAgICAgICAvLyDpobbmoI9WSVDpgInpobkKICAgICAgICAgICAgJCgnLnRvb2xiYXItc3ViTWVudS1ib3gnKS5maW5kKCJbaHJlZj0naHR0cHM6Ly9tYWxsLmNzZG4ubmV0L3ZpcCddIikucGFyZW50KCkucmVtb3ZlKCk7CiAgICAgICAgICAgIGNsZWFuKDEwKTsKICAgICAgICAgICAgLy8gY29tbW9uKDUsIDEwKTsKICAgICAgICAgICAgLy8g5Y2a5a6i5Y+K5Li76aG15LyY5YyWCiAgICAgICAgICAgIGNvbW1vbig5LCAxMCk7CiAgICAgICAgICAgIGxvb3AoMyk7CiAgICAgICAgICAgIGxvb3AoMSk7CiAgICAgICAgfSBlbHNlIGlmICgoYmxvZy50ZXN0KGN1cnJlbnRVUkwpICYmIGJsb2NrVVJMID09PSA0KSB8fCBibG9nMi50ZXN0KGN1cnJlbnRVUkwpKSB7CiAgICAgICAgICAgIGwoIuato+WcqOS8mOWMluS4quS6uuWNmuWuouS4u+mhteS9k+mqjC4uLiIpOwogICAgICAgICAgICAvLyDluLjop4QKICAgICAgICAgICAgLy8g5aS06YOo5bm/5ZGKCiAgICAgICAgICAgIHB1dCgiLmJhbm5lci1hZC1ib3giKTsKICAgICAgICAgICAgLy8g5Y+z5L6n5bm/5ZGKCiAgICAgICAgICAgIHB1dCgiLnNsaWRlLW91dGVyIik7CiAgICAgICAgICAgIC8vIOWPs+S+p+ivpuaDhQogICAgICAgICAgICBwdXQoIi5wZXJzaW9uX2FydGljbGUiKTsKICAgICAgICAgICAgLy8g5bem5L6n5bm/5ZGKCiAgICAgICAgICAgIHB1dCgiLm1iOCIpOwogICAgICAgICAgICBwdXQoIiNrcF9ib3hfNTAzIik7CiAgICAgICAgICAgIHB1dCgiI2twX2JveF8yMTQiKTsKICAgICAgICAgICAgY2xlYW4oMTApOwogICAgICAgICAgICAvLyBjb21tb24oNSwgMTApOwogICAgICAgICAgICBsb29wKDMpOwogICAgICAgICAgICBsb29wKDEpOwogICAgICAgIH0gZWxzZSBpZiAoYXJ0aWNsZS50ZXN0KGN1cnJlbnRVUkwpICYmICFtcC50ZXN0KGN1cnJlbnRVUkwpKSB7CiAgICAgICAgICAgIGwoIuato+WcqOS8mOWMlumYheivu+S9k+mqjC4uLiIpOwogICAgICAgICAgICAvLyDluLjop4QKICAgICAgICAgICAgLy8g5Y+z5L6n5bm/5ZGK77yM5pS+5Yiw56ys5LiA5Liq5riF6ZmkCiAgICAgICAgICAgIC8vIHB1dCgiLnJlY29tbWVuZC1yaWdodCIpOwogICAgICAgICAgICBwdXQoIiNhZGRBZEJveCIpOwogICAgICAgICAgICAvLyBwdXQoIi5hc2lkZS1ib3gua2luZF9wZXJzb24uZC1mbGV4LmZsZXgtY29sdW1uIik7CiAgICAgICAgICAgIHB1dCgiLnJlY29tbWVuZC10b3AtYWRib3giKTsKICAgICAgICAgICAgLy8gcHV0KCIucmVjb21tZW5kLWxpc3QtYm94LmQtZmxleC5mbGV4LWNvbHVtbi5hc2lkZS1ib3giKTsKICAgICAgICAgICAgLy8g5bem5L6n5bm/5ZGKCiAgICAgICAgICAgIC8vIHB1dCgiI2NvbnRhaW5lciIpOwogICAgICAgICAgICAvLyDlv6vmnaXlhpnljZrlrqLlkKcKICAgICAgICAgICAgcHV0KCIuYmxvZ190aXBfYm94Iik7CiAgICAgICAgICAgIC8vIOaOqOiNkOWFs+azqOeUqOaItwogICAgICAgICAgICBwdXQoIi5ibG9nLWV4cGVydC1yZWNvbW1lbmQtYm94Iik7CiAgICAgICAgICAgIC8vIOWPs+S4i+inklZJUAogICAgICAgICAgICBwdXQoIi5tZWF1LWdvdG9wLWJveCIpOwogICAgICAgICAgICAvLyDlub/lkYoKICAgICAgICAgICAgcHV0KCIubWVkaWF2X2FkIik7CiAgICAgICAgICAgIHB1dCgiLnB1bGxsb2ctYm94Iik7CiAgICAgICAgICAgIHB1dCgiLnJlY29tbWVuZC1hZC1ib3giKTsKICAgICAgICAgICAgcHV0KCIuYm94LXNoYWRvdyIpOwogICAgICAgICAgICBwdXQoIi50eXBlX2hvdF93b3JkIik7CiAgICAgICAgICAgIHB1dCgiLmZvdXJ0aF9jb2x1bW4iKTsKICAgICAgICAgICAgLy8g6auY5YiG6L6o546H5pe25Y+z5L6n5paH56ug5o6o6I2QCiAgICAgICAgICAgIC8vIHB1dCgiLnJpZ2h0LWl0ZW0iKTsKICAgICAgICAgICAgLy8g5bm/5ZGKCiAgICAgICAgICAgIHB1dCgiI2FzaWRlRm9vdGVyIik7CiAgICAgICAgICAgIHB1dCgiI2FkLWRpdiIpOwogICAgICAgICAgICBwdXQoIiM0NzkiKTsKICAgICAgICAgICAgcHV0KCIjNDgwIik7CiAgICAgICAgICAgIC8vIOaJk+i1jwogICAgICAgICAgICBwdXQoIi5wb3N0VGltZSIpOwogICAgICAgICAgICAvLyDor77nqIvmjqjojZAKICAgICAgICAgICAgcHV0KCIudDAiKTsKICAgICAgICAgICAgLy8g5YiG5Lqr5rW35oqlCiAgICAgICAgICAgIHB1dCgiLnNoYXJlU3VnZ2VzdCIpOwogICAgICAgICAgICAvLyDlupXpg6jkuLvpopgKICAgICAgICAgICAgcHV0KCIudGVtcGxhdGUtYm94Iik7CiAgICAgICAgICAgIC8vIOivhOiuuuWMuuW5v+WRigogICAgICAgICAgICBwdXQoImRpdiNkbXBfYWRfNTgiKTsKICAgICAgICAgICAgLy8g5omT6LWPCiAgICAgICAgICAgIHB1dCgiLnJld2FyZC11c2VyLWJveCIpOwogICAgICAgICAgICAvLyDlj7PkvqfmiZPotY/mjInpkq4KICAgICAgICAgICAgcHV0KCIudG8tcmV3YXJkIik7CiAgICAgICAgICAgIC8vIOaOqOiNkOWGheWuueW5v+WRigogICAgICAgICAgICBwdXQoIi5yZWNvbW1lbmQtcmVjb21tZW5kLWJveCIpOwogICAgICAgICAgICAvLyDlj7Pkvqflub/lkYoKICAgICAgICAgICAgcHV0KCIuaW5kZXhTdXBlcmlzZSIpOwogICAgICAgICAgICAvLyDmiqLmspnlj5Hop5LmoIcKICAgICAgICAgICAgcHV0KCIuY29tbWVudC1zb2ZhLWZsYWciKTsKICAgICAgICAgICAgLy8g6aG1amlvCiAgICAgICAgICAgIHB1dCgiLmJvdHRvbS1wdWItZm9vdGVyIik7CiAgICAgICAgICAgIC8vIOeZu+W9leafpeeci+acquivu+a2iOaBrwogICAgICAgICAgICBwdXQoIi50b29sYmFyLW5vdGljZS1idWJibGUiKTsKICAgICAgICAgICAgLy8g5Y+z5L6n5bm/5ZGKCiAgICAgICAgICAgIHB1dCgiLnJlY29tbWVuZC10b3AtYWRib3giKTsKICAgICAgICAgICAgLy8g5Y+z5L6n5Zub5Liq5bm/5ZGKCiAgICAgICAgICAgIHB1dCgiLnByb2dyYW1tZXIxQm94Iik7CiAgICAgICAgICAgIHB1dCgiLnByb2dyYW1tZXIyQm94Iik7CiAgICAgICAgICAgIHB1dCgiLnByb2dyYW1tZXIzQm94Iik7CiAgICAgICAgICAgIHB1dCgiLnByb2dyYW1tZXI0Qm94Iik7CiAgICAgICAgICAgIC8vIOeCuei1nuawlOazoQogICAgICAgICAgICBwdXQoIi50cmlwbGV0LXByb21wdCIpOwogICAgICAgICAgICAvLyDpobbpg6jmqKrluYUKICAgICAgICAgICAgcHV0KCIudG9vbGJhci1hZHZlcnQiKTsKICAgICAgICAgICAgLy8g5bqV6YOo5L+h5oGvCiAgICAgICAgICAgIHB1dCgiLmJsb2ctZm9vdGVyLWJvdHRvbSIpOwogICAgICAgICAgICAvLyDlj7PkvqfmoI/lub/lkYoKICAgICAgICAgICAgcHV0KCIjNjUyNyIpOwogICAgICAgICAgICBwdXQoIiNyZWNvbW1lbmRBZEJveCIpOwogICAgICAgICAgICBjbGVhbigxMCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgIC8vIOWxleW8gOivhOiuuueahOaJgOacieWbnuWkjQogICAgICAgICAgICAgICAkKCcuYnRuLXJlYWQtcmVwbHknKS5jbGljaygpOwogICAgICAgICAgICB9LCAxNTAwKTsKICAgICAgICAgICAgLy8g5Li75Yqo5Yqg5YWl5Y+z5L6n5qCPCiAgICAgICAgICAgIGlmICgkKCIucmVjb21tZW5kLXJpZ2h0IikubGVuZ3RoID09PSAwKSB7JCgiI21haW5Cb3giKS5hZnRlcignPGRpdiBjbGFzcz0icmVjb21tZW5kLXJpZ2h0ICBhbGlnbi1pdGVtcy1zdHJldGNoIGNsZWFyZml4IiBpZD0icmlnaHRBc2lkZSI+PGFzaWRlIGNsYXNzPSJyZWNvbW1lbmQtcmlnaHRfYXNpZGUiPjxkaXYgaWQ9InJlY29tbWVuZC1yaWdodCIgc3R5bGU9ImhlaWdodDogMTAwJTsgcG9zaXRpb246IGZpeGVkOyB0b3A6IDUycHg7IG92ZXJmbG93OiBzY3JvbGw7Ij48L2Rpdj48L2FzaWRlPjwvZGl2PicpO30KICAgICAgICAgICAgLy8g5LiK5qCP5oyJ6ZKu5Yig6ZmkCiAgICAgICAgICAgICQoIi50b29sYmFyLW1lbnVzID4gbGkgPiBhW2hyZWY9J2h0dHBzOi8vZWR1LmNzZG4ubmV0LyddIikucGFyZW50KCkucmVtb3ZlKCk7CiAgICAgICAgICAgICQoIi50b29sYmFyLW1lbnVzID4gbGkgPiBhW2hyZWY9J2h0dHBzOi8vbGl2ZS5jc2RuLm5ldC8/dXRtX3NvdXJjZT1jc2RuX3Rvb2xiYXInXSIpLnBhcmVudCgpLnJlbW92ZSgpOwogICAgICAgICAgICAkKCIudG9vbGJhci1tZW51cyA+IGxpID4gYVtocmVmPSdodHRwczovL2Jvb2suY3Nkbi5uZXQvJ10iKS5wYXJlbnQoKS5yZW1vdmUoKTsKICAgICAgICAgICAgLy8g57u/5YyW6K6+572uCiAgICAgICAgICAgIGNvbW1vbig2LCAxKTsKICAgICAgICAgICAgLy8g5bGP5bmV6YCC6YWNCiAgICAgICAgICAgIGNvbW1vbig0LCAxKTsKICAgICAgICAgICAgLy8g6K+E6K66CiAgICAgICAgICAgIGNvbW1vbigxLCAzMCk7CiAgICAgICAgICAgIC8vIOWFtuWugwogICAgICAgICAgICBjb21tb24oMiwgMjApOwogICAgICAgICAgICAvLyDpobbpg6jmmL7npLrkvZzogIXkv6Hmga8KICAgICAgICAgICAgY29tbW9uKDgsIDEpOwogICAgICAgICAgICAvLyDljZrlrqLlj4rkuLvpobXkvJjljJYKICAgICAgICAgICAgY29tbW9uKDksIDEwKTsKICAgICAgICAgICAgLy8g5b6q546v57q/56iL5byA5aeLCiAgICAgICAgICAgIGxvb3AoMik7CiAgICAgICAgICAgIGxvb3AoMyk7CiAgICAgICAgfSBlbHNlIGlmIChiYnMudGVzdChjdXJyZW50VVJMKSkgewogICAgICAgICAgICBsKCLmraPlnKjkvJjljJborrrlnZvkvZPpqowuLi4iKTsKICAgICAgICAgICAgLy8g5bi46KeECiAgICAgICAgICAgIC8vIOivhOiuuuW1jOWFpeWwj+W5v+WRigogICAgICAgICAgICBwdXQoIi5wb3N0X3JlY29tbWVuZCIpOwogICAgICAgICAgICAvLyDlupXpg6jmjqjojZAKICAgICAgICAgICAgcHV0KCIjcG9zdF9mZWVkX3dyYXAiKTsKICAgICAgICAgICAgLy8g5bqV6YOo55u45YWz5paH56ug6YeM6Z2i55qE5bm/5ZGKCiAgICAgICAgICAgIHB1dCgiLmJic19mZWVkX2FkX2JveCIpOwogICAgICAgICAgICBwdXQoIi5yZWNvbW1lbmQtYWQtYm94Iik7CiAgICAgICAgICAgIC8vIOW6lemDqOebuOWFs+aWh+Wtl+mHjOmdoueahOeDreivjeaPkOekugogICAgICAgICAgICBwdXQoIi50eXBlX2hvdF93b3JkIik7CiAgICAgICAgICAgIC8vIOW6lemDqOiTneiJsmZsZXjlsZ7mgKfnmoTlub/lkYrmoI8r55m75b2V5rOo5YaM5qGGCiAgICAgICAgICAgIHB1dCgiLnB1bGxsb2ctYm94Iik7CiAgICAgICAgICAgIC8vIOeMnOS9oOWWnOasogogICAgICAgICAgICBwdXQoIi5wZXJzb25hbGl6ZWQtcmVjb21tZW5kLWJveCIpOwogICAgICAgICAgICAvLyDlj5HluJblh4/ljYrmj5DnpLoKICAgICAgICAgICAgcHV0KCIudG90YXN0LWJveCIpOwogICAgICAgICAgICAvLyDpobbpg6jlub/lkYoKICAgICAgICAgICAgcHV0KCIucmVjb21tZW5kLXJpZ2h0Iik7CiAgICAgICAgICAgIC8vIOmhtumDqOW5v+WRigogICAgICAgICAgICBwdXQoIi5hZF90b3AiKTsKICAgICAgICAgICAgLy8g5Y+z5L6n5bm/5ZGKCiAgICAgICAgICAgIHB1dCgiLmFkXzEiKTsKICAgICAgICAgICAgY2xlYW4oMTApOwogICAgICAgICAgICAvLyDlsZXlvIAKICAgICAgICAgICAgY29tbW9uKDMsIDUwKTsKICAgICAgICAgICAgLy8gY29tbW9uKDUsIDEwKTsKICAgICAgICAgICAgbG9vcCgzKTsKICAgICAgICB9IGVsc2UgaWYgKGRvd25sb2FkLnRlc3QoY3VycmVudFVSTCkpIHsKICAgICAgICAgICAgbCgi5q2j5Zyo5LyY5YyW5LiL6L296aG15L2T6aqMLi4uIik7CiAgICAgICAgICAgIC8vIOW4uOinhAogICAgICAgICAgICBwdXQoIi5maXhlZF9kbCIpOwogICAgICAgICAgICBwdXQoImluZGV4U3VwZXJpc2UiKTsKICAgICAgICAgICAgLy8g5Y+z5L6n5o6o6I2QCiAgICAgICAgICAgIHB1dCgiLmNvbnRlbnRfcmVjb20iKTsKICAgICAgICAgICAgY2xlYW4oMTApOwogICAgICAgICAgICAvLyBjb21tb24oNSwgMTApOwogICAgICAgICAgICBsb29wKDMpOwogICAgICAgIH0gZWxzZSBpZiAobG9naW4udGVzdChjdXJyZW50VVJMKSkgewogICAgICAgICAgICBsKCLmraPlnKjkvJjljJbnmbvlvZXpobXkvZPpqowuLi4iKTsKICAgICAgICAgICAgLy8g5bi46KeECiAgICAgICAgICAgIC8vIOeZu+W9leeVjOmdouWkp+WbvuW5v+WRigogICAgICAgICAgICBwdXQoIi5tYWluLXR1Iik7CiAgICAgICAgICAgIGNsZWFuKDEwKTsKICAgICAgICAgICAgLy8gY29tbW9uKDUsIDEwKTsKICAgICAgICAgICAgbG9vcCgzKTsKICAgICAgICB9IGVsc2UgaWYgKHpvbmUudGVzdChjdXJyZW50VVJMKSkgewogICAgICAgICAgICBsKCLmraPlnKjkvJjljJbkuKrkurrnqbrpl7TkvZPpqowuLi4iKTsKICAgICAgICAgICAgLy8g5bi46KeECiAgICAgICAgICAgIGNsZWFuKDEwKTsKICAgICAgICAgICAgY29tbW9uKDcsIDEwKTsKICAgICAgICAgICAgLy8gY29tbW9uKDUsIDEwKTsKICAgICAgICAgICAgbG9vcCgzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsKCLlk6bosYHvvIzlpb3lgY/pl6jnmoTpobXpnaLvvIzmiJHmnaXor5XnnYDkvJjljJbkuIDkuIvlk6YuLi4iKTsKICAgICAgICAgICAgLy8g5bi46KeECiAgICAgICAgICAgIC8vIOWxleW8gOWFqOaWhwogICAgICAgICAgICAkKCcucmVhZG1vcmVfYnRuJykuY2xpY2soKTsKICAgICAgICAgICAgLy8gKioqIGluZGV4ICoqKgogICAgICAgICAgICAvLyDlpLTpg6jlub/lkYoKICAgICAgICAgICAgcHV0KCIuYmFubmVyLWFkLWJveCIpOwogICAgICAgICAgICAvLyDltYzlhaXlub/lkYoKICAgICAgICAgICAgcHV0KCIja3BfYm94XzIxMSIpOwogICAgICAgICAgICAvLyDlj7Pkvqflub/lkYoKICAgICAgICAgICAgcHV0KCIuc2xpZGUtb3V0ZXIiKTsKICAgICAgICAgICAgLy8g5Y+z5L6n6K+m5oOFCiAgICAgICAgICAgIHB1dCgiLnBlcnNpb25fYXJ0aWNsZSIpOwogICAgICAgICAgICAvLyDlj7PkvqfmjqjojZAKICAgICAgICAgICAgJCgiLmZlZWRfY29tcGFueSIpLnBhcmVudCgpLnJlbW92ZSgpOwogICAgICAgICAgICAvLyAqKiogYXJ0aWNsZSAqKioKICAgICAgICAgICAgLy8g5bi46KeECiAgICAgICAgICAgIC8vIOWPs+S+p+W5v+WRiu+8jOaUvuWIsOesrOS4gOS4qua4hemZpAogICAgICAgICAgICBwdXQoIiNhZGRBZEJveCIpOwogICAgICAgICAgICBwdXQoIi5yZWNvbW1lbmQtdG9wLWFkYm94Iik7CiAgICAgICAgICAgIC8vIOW/q+adpeWGmeWNmuWuouWQpwogICAgICAgICAgICBwdXQoIi5ibG9nX3RpcF9ib3giKTsKICAgICAgICAgICAgLy8g5o6o6I2Q5YWz5rOo55So5oi3CiAgICAgICAgICAgIHB1dCgiLmJsb2ctZXhwZXJ0LXJlY29tbWVuZC1ib3giKTsKICAgICAgICAgICAgLy8g5Y+z5LiL6KeSVklQCiAgICAgICAgICAgIHB1dCgiLm1lYXUtZ290b3AtYm94Iik7CiAgICAgICAgICAgIC8vIOW5v+WRigogICAgICAgICAgICBwdXQoIi5tZWRpYXZfYWQiKTsKICAgICAgICAgICAgcHV0KCIucHVsbGxvZy1ib3giKTsKICAgICAgICAgICAgcHV0KCIucmVjb21tZW5kLWFkLWJveCIpOwogICAgICAgICAgICAvL3B1dCgiLmJveC1zaGFkb3ciKTsg5p+Q5Lqb6aG16Z2i5byC5bi477yM5L6L5aaCY2xvdWQuY3Nkbi5uZXQKICAgICAgICAgICAgcHV0KCIudHlwZV9ob3Rfd29yZCIpOwogICAgICAgICAgICBwdXQoIi5mb3VydGhfY29sdW1uIik7CiAgICAgICAgICAgIC8vIGNsb3VkLmNzZG4ubmV0IOWktOmDqOW5v+WRigogICAgICAgICAgICBwdXQoIiNrcF9ib3hfMTE4Iik7CiAgICAgICAgICAgIC8vIOW5v+WRigogICAgICAgICAgICBwdXQoIiNhc2lkZUZvb3RlciIpOwogICAgICAgICAgICBwdXQoIiNhZC1kaXYiKTsKICAgICAgICAgICAgcHV0KCIjNDc5Iik7CiAgICAgICAgICAgIHB1dCgiIzQ4MCIpOwogICAgICAgICAgICAvLyDmiZPotY8KICAgICAgICAgICAgcHV0KCIucG9zdFRpbWUiKTsKICAgICAgICAgICAgLy8g6K++56iL5o6o6I2QCiAgICAgICAgICAgIHB1dCgiLnQwIik7CiAgICAgICAgICAgIC8vIOWIhuS6q+a1t+aKpQogICAgICAgICAgICBwdXQoIi5zaGFyZVN1Z2dlc3QiKTsKICAgICAgICAgICAgLy8g5bqV6YOo5Li76aKYCiAgICAgICAgICAgIHB1dCgiLnRlbXBsYXRlLWJveCIpOwogICAgICAgICAgICAvLyDor4TorrrljLrlub/lkYoKICAgICAgICAgICAgcHV0KCJkaXYjZG1wX2FkXzU4Iik7CiAgICAgICAgICAgIC8vIOaJk+i1jwogICAgICAgICAgICBwdXQoIi5yZXdhcmQtdXNlci1ib3giKTsKICAgICAgICAgICAgLy8g5Y+z5L6n5omT6LWP5oyJ6ZKuCiAgICAgICAgICAgIHB1dCgiLnRvLXJld2FyZCIpOwogICAgICAgICAgICAvLyDmjqjojZDlhoXlrrnlub/lkYoKICAgICAgICAgICAgcHV0KCIucmVjb21tZW5kLXJlY29tbWVuZC1ib3giKTsKICAgICAgICAgICAgLy8g5Y+z5L6n5bm/5ZGKCiAgICAgICAgICAgIHB1dCgiLmluZGV4U3VwZXJpc2UiKTsKICAgICAgICAgICAgLy8g5oqi5rKZ5Y+R6KeS5qCHCiAgICAgICAgICAgIHB1dCgiLmNvbW1lbnQtc29mYS1mbGFnIik7CiAgICAgICAgICAgIC8vIOmhtWppbwogICAgICAgICAgICBwdXQoIi5ib3R0b20tcHViLWZvb3RlciIpOwogICAgICAgICAgICAvLyDnmbvlvZXmn6XnnIvmnKror7vmtojmga8KICAgICAgICAgICAgcHV0KCIudG9vbGJhci1ub3RpY2UtYnViYmxlIik7CiAgICAgICAgICAgIC8vIOWPs+S+p+W5v+WRigogICAgICAgICAgICBwdXQoIi5yZWNvbW1lbmQtdG9wLWFkYm94Iik7CiAgICAgICAgICAgIC8vIOWtpumZouW8ueWHuuW5v+WRigogICAgICAgICAgICAkKCIuZm91Y2VfY2xvc2VfYnRuIikuY2xpY2soKTsKICAgICAgICAgICAgLy8g5YW25a6DCiAgICAgICAgICAgIC8vIOWktOmDqOW5v+WRigogICAgICAgICAgICBwdXQoIi5iYW5uZXItYWQtYm94Iik7CiAgICAgICAgICAgIC8vIOWPs+S+p+W5v+WRigogICAgICAgICAgICBwdXQoIi5zbGlkZS1vdXRlciIpOwogICAgICAgICAgICAvLyDlj7Pkvqfor6bmg4UKICAgICAgICAgICAgcHV0KCIucGVyc2lvbl9hcnRpY2xlIik7CiAgICAgICAgICAgIC8vIOW3puS+p+W5v+WRigogICAgICAgICAgICBwdXQoIiNrcF9ib3hfNTAzIik7CiAgICAgICAgICAgIHB1dCgiI2twX2JveF8yMTQiKTsKICAgICAgICAgICAgLy8gKioqIGJicyAqKioKICAgICAgICAgICAgLy8g6K+E6K665bWM5YWl5bCP5bm/5ZGKCiAgICAgICAgICAgIHB1dCgiLnBvc3RfcmVjb21tZW5kIik7CiAgICAgICAgICAgIC8vIOW6lemDqOaOqOiNkAogICAgICAgICAgICBwdXQoIiNwb3N0X2ZlZWRfd3JhcCIpOwogICAgICAgICAgICAvLyDlupXpg6jnm7jlhbPmlofnq6Dph4zpnaLnmoTlub/lkYoKICAgICAgICAgICAgcHV0KCIuYmJzX2ZlZWRfYWRfYm94Iik7CiAgICAgICAgICAgIHB1dCgiLnJlY29tbWVuZC1hZC1ib3giKTsKICAgICAgICAgICAgLy8g5bqV6YOo55u45YWz5paH5a2X6YeM6Z2i55qE54Ot6K+N5o+Q56S6CiAgICAgICAgICAgIHB1dCgiLnR5cGVfaG90X3dvcmQiKTsKICAgICAgICAgICAgLy8g5bqV6YOo6JOd6ImyZmxleOWxnuaAp+eahOW5v+WRiuagjyvnmbvlvZXms6jlhozmoYYKICAgICAgICAgICAgcHV0KCIucHVsbGxvZy1ib3giKTsKICAgICAgICAgICAgLy8g54yc5L2g5Zac5qyiCiAgICAgICAgICAgIHB1dCgiLnBlcnNvbmFsaXplZC1yZWNvbW1lbmQtYm94Iik7CiAgICAgICAgICAgIC8vIOWPkeW4luWHj+WNiuaPkOekugogICAgICAgICAgICBwdXQoIi50b3Rhc3QtYm94Iik7CiAgICAgICAgICAgIC8vIOmhtumDqOW5v+WRigogICAgICAgICAgICBwdXQoIi5yZWNvbW1lbmQtcmlnaHQiKTsKICAgICAgICAgICAgLy8g6aG26YOo5bm/5ZGKCiAgICAgICAgICAgIHB1dCgiLmFkX3RvcCIpOwogICAgICAgICAgICAvLyAqKiogZG93bmxvYWQgKioqCiAgICAgICAgICAgIHB1dCgiLmZpeGVkX2RsIik7CiAgICAgICAgICAgIHB1dCgiaW5kZXhTdXBlcmlzZSIpOwogICAgICAgICAgICAvLyDlj7PkvqfmjqjojZAKICAgICAgICAgICAgcHV0KCIuY29udGVudF9yZWNvbSIpOwogICAgICAgICAgICBjbGVhbigxMCk7CiAgICAgICAgfQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CiAgICAgICAgfSwgMCk7CiAgICAgICAgc3RvcFRpbWVNaWxsaSA9IERhdGUubm93KCk7CiAgICAgICAgbCgi5LyY5YyW5a6M5q+VISDogJfml7YgIiArIChzdG9wVGltZU1pbGxpIC0gc3RhcnRUaW1lTWlsbGkpICsgIm1zIik7CiAgICB9LCAwKTsKfSkoKTsKCmZ1bmN0aW9uIGwobG9nKSB7CiAgICBjb25zb2xlLmxvZygiW0NTRE5HcmVlbmVyXSAiICsgbG9nKTsKfQoKZnVuY3Rpb24gZShlcnJvcikgewogICAgY29uc29sZS5lcnJvcigiW0NTRE5HcmVlbmVyXSAiICsgZXJyb3IpOwp9CgpmdW5jdGlvbiBjbGVhcigpIHsKICAgIGxpc3QgPSBbXTsKfQoKZnVuY3Rpb24gcHV0KHRhZykgewogICAgbGlzdC5wdXNoKHRhZyk7Cn0KCmZ1bmN0aW9uIGNsZWFuKHRpbWVzKSB7CiAgICB2YXIgbG9vcCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAtLXRpbWVzOwogICAgICAgIGlmICh0aW1lcyA8PSAwKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwobG9vcCk7CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbGlzdC5sZW5ndGg7IGsrKykgewogICAgICAgICAgICAkKGxpc3Rba10pLnJlbW92ZSgpOwogICAgICAgIH0KICAgIH0sIDEwMCk7CiAgICBOUHJvZ3Jlc3MuaW5jKCk7Cn0KCmZ1bmN0aW9uIGxvb3AobnVtKSB7CiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKG51bSA9PT0gMSkgewogICAgICAgICAgICAvLyDkuLvpobXkuK3pl7TnmoTlub/lkYoKICAgICAgICAgICAgJCgiLkpfYWR2IikucmVtb3ZlKCk7CiAgICAgICAgICAgIC8vIOS4u+mhteacieaWsOeahOWGheWuueaoquadoQogICAgICAgICAgICAkKCIuZmVlZC1maXgtYm94IikucmVtb3ZlKCk7CiAgICAgICAgICAgIC8vIOS4u+mhteW5v+WRiiBpZnJhbWUKICAgICAgICAgICAgaWYgKGN1cnJlbnRVUkwgPT0gImh0dHBzOi8vd3d3LmNzZG4ubmV0LyIpIHsKICAgICAgICAgICAgICAgICQoImlmcmFtZSIpLnJlbW92ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIOWIoOmZpCBDU0ROIOWumOaWueWcqOS4u+mhteeahOaWh+eroO+8iOWkp+WkmuaYr+W5v+WRiu+8iQogICAgICAgICAgICAkKCJsaS5jbGVhcmZpeCIpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZSkgewogICAgICAgICAgICAgICAgdmFyIGJhbm5lZCA9IC9jc2RuPFwvYT4vOwogICAgICAgICAgICAgICAgdmFyIGFNYXJrID0gJChlbGUpLmZpbmQoIi5uYW1lIikuaHRtbCgpOwogICAgICAgICAgICAgICAgaWYgKGJhbm5lZC50ZXN0KGFNYXJrKSkgewogICAgICAgICAgICAgICAgICAgICQoZWxlKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIOS4u+mhteW5v+WRigogICAgICAgICAgICAkKCJsaSIpLmVhY2goZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGxldCBzZWxmID0gJCh0aGlzKTsKICAgICAgICAgICAgICAgIGxldCBkYXRhVHlwZSA9IHNlbGYuYXR0cignZGF0YS10eXBlJyk7CiAgICAgICAgICAgICAgICBpZiAoZGF0YVR5cGUgPT09ICdhZCcpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8g5Li76aG15bm/5ZGKCiAgICAgICAgICAgICQoImxpID4gZGl2ID4gZGl2ID4gaDIgPiBhW2hyZWYqPSdodHRwczovL2VkdS5jc2RuLm5ldCddIikucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucmVtb3ZlKCk7CiAgICAgICAgICAgICQoImxpID4gZGl2ID4gZGl2ID4gaDIgPiBhW2hyZWYqPSdodHRwczovL21hcmtldGluZy5jc2RuLm5ldCddIikucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucmVtb3ZlKCk7CiAgICAgICAgICAgIC8vIOWumOaWueiEmuacrOaoquW5hQogICAgICAgICAgICAkKCIudG9vbGJhci1hZHZlcnQiKS5yZW1vdmUoKTsKICAgICAgICB9IGVsc2UgaWYgKG51bSA9PT0gMikgewogICAgICAgICAgICAvLyDor4Torrrmn6XnnIvmm7TlpJrlsZXlvIDnm5HlkKwKICAgICAgICAgICAgJCgiZGl2LmNvbW1lbnQtbGlzdC1ib3giKS5jc3MoIm1heC1oZWlnaHQiLCAibm9uZSIpOwogICAgICAgICAgICAvLyDlsY/olL3mgqjnmoTnvKnmlL7kuI3mmK8xMDAl55qE5o+Q56S6CiAgICAgICAgICAgICQoJy5sZWZ0UG9wJykucmVtb3ZlKCk7CiAgICAgICAgICAgIC8vIOWumOaWueiEmuacrOaoquW5hQogICAgICAgICAgICAkKCIudG9vbGJhci1hZHZlcnQiKS5yZW1vdmUoKTsKICAgICAgICB9IGVsc2UgaWYgKG51bSA9PSAzKSB7CiAgICAgICAgICAgIC8vIOW+queOr+WIoOmZpOeZu+W9leaPkOekuuahhgogICAgICAgICAgICAvLyDmlLnlm57og4zmma/popzoibIKICAgICAgICAgICAgJCgiLmxvZ2luLW1hcmsiKS5yZW1vdmUoKTsKICAgICAgICAgICAgLy8g5Yig6Zmk55m75b2V5qGGCiAgICAgICAgICAgICQoIi5sb2dpbi1ib3giKS5yZW1vdmUoKTsKICAgICAgICAgICAgJCgnI3Bhc3Nwb3J0Ym94JykucmVtb3ZlKCk7CiAgICAgICAgICAgICQoJy5sb2dpbi1tYXJrJykucmVtb3ZlKCk7CiAgICAgICAgfQogICAgfSwgNTAwKTsKfQoKZnVuY3Rpb24gY29tbW9uKG51bSwgdGltZXMpIHsKICAgIHZhciBsb29wID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIC0tdGltZXM7CiAgICAgICAgaWYgKHRpbWVzIDw9IDApIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChsb29wKTsKICAgICAgICB9CiAgICAgICAgaWYgKG51bSA9PT0gMSkgewogICAgICAgICAgICAvLyDmn6XnnIvmm7TlpJoKICAgICAgICAgICAgJCgiLmJ0bi1yZWFkbW9yZSIpLnJlbW92ZUNsYXNzKCJuby1sb2dpbiIpOwogICAgICAgICAgICAkKCIuYnRuLXJlYWRtb3JlIikuYWRkQ2xhc3MoImZhbnMtcmVhZC1tb3JlIik7CiAgICAgICAgICAgICQoIi5idG4tcmVhZG1vcmUiKS5yZW1vdmVBdHRyKCJocmVmIik7CiAgICAgICAgICAgICQoIi5idG4tcmVhZG1vcmUiKS5yZW1vdmVBdHRyKCJ0YXJnZXQiKTsKICAgICAgICAgICAgJCgiLmJ0bi1yZWFkbW9yZSIpLnJlbW92ZUF0dHIoInJlbCIpOwogICAgICAgICAgICAkKCIuYnRuLXJlYWRtb3JlIikuY2xpY2soKTsKICAgICAgICAgICAgLy8g5bey55m75b2V55So5oi35bGV5byA6K+E6K66CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYnRuTW9yZUNvbW1lbnQiKS5jbGljaygpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAvLyDliKDpmaTmn6XnnIvmm7TlpJrmjInpkq4KICAgICAgICAgICAgJCgiI2J0bk1vcmVDb21tZW50IikucGFyZW50KCJkaXYub3B0LWJveCIpLnJlbW92ZSgpOwogICAgICAgICAgICAvLyDlsZXlvIDlhoXlrrkKICAgICAgICAgICAgJCgiZGl2LmNvbW1lbnQtbGlzdC1ib3giKS5jc3MoIm1heC1oZWlnaHQiLCAibm9uZSIpOwogICAgICAgICAgICAvLyDmlLnlm57og4zmma/popzoibIKICAgICAgICAgICAgJCgiLmxvZ2luLW1hcmsiKS5yZW1vdmUoKTsKICAgICAgICAgICAgLy8g5Yig6Zmk55m75b2V5qGGCiAgICAgICAgICAgICQoIi5sb2dpbi1ib3giKS5yZW1vdmUoKTsKICAgICAgICB9IGVsc2UgaWYgKG51bSA9PT0gMikgewogICAgICAgICAgICAvLyDmjKHkvY/or4TorrrnmoTigJzlh7rlpLTmjqjojZDigJ0KICAgICAgICAgICAgaWYgKCQoIi5yZWNvbW1lbmQtYm94IikubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgJCgiLnJlY29tbWVuZC1ib3giKVswXS5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyDljrvlpJbpk74KICAgICAgICAgICAgJCgiI2NvbnRlbnRfdmlld3MiKS5vZmYoKTsKICAgICAgICAgICAgLy8g5Y676Zmk5o6o5bm/5bm/5ZGKCiAgICAgICAgICAgICQoImxpW2RhdGEtdHlwZT0nYWQnXSIpLnJlbW92ZSgpOwogICAgICAgICAgICAvLyDlhY3nmbvlvZXlpI3liLYKICAgICAgICAgICAgJCgiLmhsanMtYnV0dG9uIikucmVtb3ZlQ2xhc3MoInNpZ25pbiIpOwogICAgICAgICAgICAkKCIuaGxqcy1idXR0b24iKS5hZGRDbGFzcygiezJ9Iik7CiAgICAgICAgICAgICQoIi5obGpzLWJ1dHRvbiIpLmF0dHIoImRhdGEtdGl0bGUiLCAi5YWN55m75b2V5aSN5Yi2Iik7CiAgICAgICAgICAgICQoIi5obGpzLWJ1dHRvbiIpLmF0dHIoIm9uY2xpY2siLCAiaGxqcy5jb3B5Q29kZShldmVudCkiKTsKICAgICAgICAgICAgLy8g5Y676Zmk5Ymq6LS05p2/5Yqr5oyBCiAgICAgICAgICAgICQoImNvZGUiKS5hdHRyKCJvbmNsaWNrIiwgIm1kY3AuY29weUNvZGUoZXZlbnQpIik7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyDlpI3liLbml7bkv53nlZnljp/mlofmoLzlvI/vvIzlj4LogIMgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9lbi9zY3JpcHRzLzM5MDUwMi1jc2RucmVtb3ZlY29weXJpZ2h0L2NvZGUKICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICJhcnRpY2xlVHlwZSIsIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICB9CiAgICAgICAgICAgIGNzZG4uY29weXJpZ2h0LmluaXQoIiIsICIiLCAiIik7CiAgICAgICAgICAgIC8vIOmhteWktOW5v+WRigogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiY29sdW1uLWFkdmVydC1ib3giKVswXS5zdHlsZS5kaXNwbGF5PSJub25lIjsKICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgLy8g6Ieq5Yqo5qOA5rWL5piv5ZCm5pyJ55uu5b2V77yM5aaC5p6c5rKh5pyJ5YiZ5Yig6Zmk5Y+z6L655qCP77yM5paH56ug5bGF5LitCiAgICAgICAgICAgIGlmICgkKCIucmVjb21tZW5kLXJpZ2h0X2FzaWRlIikuaHRtbCgpICYmICQoIi5yZWNvbW1lbmQtcmlnaHRfYXNpZGUiKS5odG1sKCkucmVwbGFjZSgvW1xyXG5dL2csICIiKS5yZXBsYWNlKC8oXHMpL2csICIiKSA9PT0gIiIpIHsKICAgICAgICAgICAgICAgICQoIiNyaWdodEFzaWRlIikucmVtb3ZlKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCgiLnJlY29tbWVuZC1yaWdodF9hc2lkZSIpLmh0bWwoKSAmJiAkKCIjcmVjb21tZW5kLXJpZ2h0IikuaHRtbCgpLnJlcGxhY2UoL1tcclxuXS9nLCAiIikucmVwbGFjZSgvKFxzKS9nLCAiIikgPT09ICIiKSB7CiAgICAgICAgICAgICAgICAkKCIjcmlnaHRBc2lkZSIpLnJlbW92ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIOeZu+W9leaMiemSruaWh+Wtl+WkquWkmu+8jOS/ruaUuQogICAgICAgICAgICAkKCJhIikuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ2hyZWYnKSA9PT0gJ2h0dHBzOi8vcGFzc3BvcnQuY3Nkbi5uZXQvYWNjb3VudC9sb2dpbicpIHsKICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmh0bWwoJ+eZu+WFpScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8g6aG25qCP5bm/5ZGKCiAgICAgICAgICAgICQoImxpIikuZWFjaChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgbGV0IHNlbGYgPSAkKHRoaXMpOwogICAgICAgICAgICAgICAgbGV0IGRhdGFUeXBlID0gc2VsZi5hdHRyKCdkYXRhLXN1Yi1tZW51LXR5cGUnKTsKICAgICAgICAgICAgICAgIGlmIChkYXRhVHlwZSA9PT0gJ3ZpcCcpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8g6aG25qCPVklQ6YCJ6aG5CiAgICAgICAgICAgICQoJy50b29sYmFyLXN1Yk1lbnUtYm94JykuZmluZCgiW2hyZWY9J2h0dHBzOi8vbWFsbC5jc2RuLm5ldC92aXAnXSIpLnBhcmVudCgpLnJlbW92ZSgpOwogICAgICAgIH0gZWxzZSBpZiAobnVtID09IDMpIHsKICAgICAgICAgICAgLy/orrrlnZvoh6rliqjlsZXlvIAKICAgICAgICAgICAgJCgiLmpzX3Nob3dfdG9waWMiKS5jbGljaygpOwogICAgICAgIH0gZWxzZSBpZiAobnVtID09IDQpIHsKICAgICAgICAgICAgLyoqIOmFjee9ruaOp+WItiAqKi8KICAgICAgICAgICAgbGV0IGNvbmZpZyA9IG5ldyBDb25maWcoKTsKICAgICAgICAgICAgbGV0IHNtQ29va2llID0gY29uZmlnLmdldCgic2NyLXNtIiwgZmFsc2UpOwogICAgICAgICAgICBsZXQgbWRDb29raWUgPSBjb25maWcuZ2V0KCJzY3ItbWQiLCB0cnVlKTsKICAgICAgICAgICAgbGV0IGxnQ29va2llID0gY29uZmlnLmdldCgic2NyLWxnIiwgZmFsc2UpOwoKICAgICAgICAgICAgJCgiI3Njci1zbSIpLnByb3AoImNoZWNrZWQiLCBzbUNvb2tpZSk7CiAgICAgICAgICAgICQoIiNzY3ItbWQiKS5wcm9wKCJjaGVja2VkIiwgbWRDb29raWUpOwogICAgICAgICAgICAkKCIjc2NyLWxnIikucHJvcCgiY2hlY2tlZCIsIGxnQ29va2llKTsKCiAgICAgICAgICAgIGlmIChzbUNvb2tpZSkgewogICAgICAgICAgICAgICAgLy8gU21hbGwgU2NyZWVuIE1vZGUKICAgICAgICAgICAgICAgICQoIi5tYWluX2ZhdGhlciIpLnJlbW92ZUNsYXNzKCJqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIik7CiAgICAgICAgICAgICAgICAkKCJjc2RuLXNpZGUtdG9vbGJhciIpLmNzcygibGVmdCIsICJhdXRvIikKICAgICAgICAgICAgICAgIEdNX2FkZFN0eWxlKGAKICAgICAgICAgICAgICAgIG1haW57CiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGF1dG8haW1wb3J0YW50OwogICAgICAgICAgICAgICAgICAgIGZsb2F0OiBub25lIWltcG9ydGFudDsKICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDkwdnc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBtYWluIGFydGljbGUgaW1newogICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGApOwogICAgICAgICAgICB9IGVsc2UgaWYgKG1kQ29va2llKSB7CiAgICAgICAgICAgICAgICAvLyBNaWRkbGUgU2NyZWVuIE1vZGUKICAgICAgICAgICAgICAgICQoIi5tYWluX2ZhdGhlciIpLnJlbW92ZUNsYXNzKCJqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIik7CiAgICAgICAgICAgICAgICAkKCJjc2RuLXNpZGUtdG9vbGJhciIpLmNzcygibGVmdCIsICJhdXRvIikKICAgICAgICAgICAgfSBlbHNlIGlmIChsZ0Nvb2tpZSkgewogICAgICAgICAgICAgICAgLy8gTGFyZ2UgU2NyZWVuIE1vZGUKICAgICAgICAgICAgICAgICQoIi5jb250YWluZXIiKS5jc3MoIm1hcmdpbiIsICIwIGF1dG8iKQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDlsY/luZXlsLrlr7jljZXpgInnm5HlkKwKICAgICAgICAgICAgJCgiI3Njci1zbSIpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIG5ldyBDb25maWcoKS5zZXQoInNjci1zbSIsIHRydWUpOwogICAgICAgICAgICAgICAgbmV3IENvbmZpZygpLnNldCgic2NyLW1kIiwgZmFsc2UpOwogICAgICAgICAgICAgICAgbmV3IENvbmZpZygpLnNldCgic2NyLWxnIiwgZmFsc2UpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJCgiI3Njci1tZCIpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIG5ldyBDb25maWcoKS5zZXQoInNjci1tZCIsIHRydWUpOwogICAgICAgICAgICAgICAgbmV3IENvbmZpZygpLnNldCgic2NyLXNtIiwgZmFsc2UpOwogICAgICAgICAgICAgICAgbmV3IENvbmZpZygpLnNldCgic2NyLWxnIiwgZmFsc2UpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJCgiI3Njci1sZyIpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIG5ldyBDb25maWcoKS5zZXQoInNjci1sZyIsIHRydWUpOwogICAgICAgICAgICAgICAgbmV3IENvbmZpZygpLnNldCgic2NyLXNtIiwgZmFsc2UpOwogICAgICAgICAgICAgICAgbmV3IENvbmZpZygpLnNldCgic2NyLW1kIiwgZmFsc2UpOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKG51bSA9PSA1KSB7CiAgICAgICAgICAgIC8vIOaUueWbnuiDjOaZr+minOiJsgogICAgICAgICAgICAkKCIubG9naW4tbWFyayIpLnJlbW92ZSgpOwogICAgICAgICAgICAvLyDliKDpmaTnmbvlvZXmoYYKICAgICAgICAgICAgJCgiLmxvZ2luLWJveCIpLnJlbW92ZSgpOwogICAgICAgIH0gZWxzZSBpZiAobnVtID09IDYpIHsKICAgICAgICAgICAgbGV0IGRpZCA9IGZhbHNlOwogICAgICAgICAgICBsZXQgY29uZmlnSFRNTCA9ICcnOwogICAgICAgICAgICBjb25maWdIVE1MICs9ICc8ZGl2PjxhIHN0eWxlPSJmb250LXNpemU6IDIwcHg7IiBocmVmPSJodHRwczovL29wZW51c2VyanMub3JnL3NjcmlwdHMvQWRsZXJFRC8lRTYlOUMlODAlRTUlQkMlQkElRTclOUElODQlRTglODAlODElRTclODklOEMlRTglODQlOUElRTYlOUMlQUNDU0ROR3JlZW5lciVFRiVCQyU5QUNTRE4lRTUlQjklQkYlRTUlOTElOEElRTUlQUUlOEMlRTUlODUlQTglRTglQkYlODclRTYlQkIlQTQlRTMlODAlODElRTQlQkElQkElRTYlODAlQTclRTUlOEMlOTYlRTglODQlOUElRTYlOUMlQUMlRTQlQkMlOTglRTUlOEMlOTYiIHRhcmdldD0iX2JsYW5rIj5DU0ROR3JlZW5lcjwvYT4gPHN1cD5WJyArIHZlcnNpb24gKyAnPC9zdXA+PC9kaXY+5a6Y5pa5IFFRIOS6pOa1gee+pO+8mjEwNDIzNzA0NTMmbmJzcDsmbmJzcDsmbmJzcDs8YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iLy9zaGFuZy5xcS5jb20vd3BhL3F1bndwYT9pZGtleT1kN2FkNmVhZDNmNTc3MjJlN2YwMGE0MjgxYWU3NWRiYWMyMTMyYzVhOGNmMzIxOTkyZDU3MzA5MDM3ZmNhZjYzIj48aW1nIGJvcmRlcj0iMCIgc3JjPSIvL3B1Yi5pZHFxaW1nLmNvbS93cGEvaW1hZ2VzL2dyb3VwLnBuZyIgYWx0PSJDU0ROR3JlZW5lciDnlKjmiLfkuqTmtYHnvqQiIHRpdGxlPSJDU0ROR3JlZW5lciDnlKjmiLfkuqTmtYHnvqQiPjwvYT48YnI+PGJyPic7CgogICAgICAgICAgICAvLyDorr7lrprvvJrmjqjojZDlhoXlrrnmjInpkq4KICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPHAgc3R5bGU9Im1hcmdpbi1ib3R0b206IDVweCI+PGI+5qC55o2u5bGP5bmV5bC65a+477yM6YCC6YWN54mI5byPPC9iPjxicj48c3BhbiBzdHlsZT0iZm9udC1zaXplOiA1cHg7Ij7lu7rorq7pgJDkuKrlsJ3or5XlkI7pgInmi6npgILlkIjkvaDnmoTniYjlvI/vvIzlsY/luZXov4flsI/miJbogIXniYjlvI/pgInmi6nkuI3mraPnoa7lj7PkvqfmoI/lj6/og73msqHmnInnqbrpl7TmmL7npLrvvIjor7flsJ3or5XosIPoioLmtY/op4jlmajnvKnmlL7vvInjgII8L3NwYW4+PC9wPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxsYWJlbD48aW5wdXQgbmFtZT0iZGlzcGxheU1vZGUiIHR5cGU9InJhZGlvIiB2YWx1ZT0iIiBpZD0ic2NyLXNtIiAvPiDlubPpk7rmqKHlvI8gPC9sYWJlbD4nOwogICAgICAgICAgICBjb25maWdIVE1MICs9ICc8bGFiZWw+PGlucHV0IG5hbWU9ImRpc3BsYXlNb2RlIiB0eXBlPSJyYWRpbyIgdmFsdWU9IiIgaWQ9InNjci1tZCIgLz4g6YCC5bqU5qih5byPIDwvbGFiZWw+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGxhYmVsPjxpbnB1dCBuYW1lPSJkaXNwbGF5TW9kZSIgdHlwZT0icmFkaW8iIHZhbHVlPSIiIGlkPSJzY3ItbGciIC8+IOWxheS4reaooeW8jzwvbGFiZWw+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGhyIHN0eWxlPSJoZWlnaHQ6MXB4O2JvcmRlcjpub25lO2JvcmRlci10b3A6MXB4IHNvbGlkICNjY2NjY2M7bWFyZ2luOiA1cHggMHB4IDVweCAwcHg7IiAvPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxwIHN0eWxlPSJtYXJnaW4tYm90dG9tOiA1cHgiPjxiPumAmueUqOiuvuWumjwvYj48L3A+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0idG9nZ2xlLXJlY29tbWVuZC1idXR0b24iPiA8bGFiZWwgZm9yPSJ0b2dnbGUtcmVjb21tZW5kLWJ1dHRvbiIgY2xhc3M9Im1vZGVMYWJlbCI+5pi+56S65o6o6I2Q5YaF5a65PC9sYWJlbD4nOwogICAgICAgICAgICBjb25maWdIVE1MICs9ICc8YnI+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0idG9nZ2xlLXdoaXRldGhlbWUtYnV0dG9uIj4gPGxhYmVsIGZvcj0idG9nZ2xlLXdoaXRldGhlbWUtYnV0dG9uIiBjbGFzcz0ibW9kZUxhYmVsIj7nmb3oibLkuLvpopgmRGFyayBSZWFkZXLlhbzlrrnmqKHlvI88YnI+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTogOHB4O2NvbG9yOiAjODA4MDgwOyI+IyDpgInpobnkvZznlKjvvJrlvIDlkK/lkI7lj6/pgJrov4dEYXJrIFJlYWRlcuaPkuS7tueBtea0u+aOp+WItueZveiJsuS4jum7keaal+aooeW8j++8jDxhIHN0eWxlPSJjb2xvcjogZ3JlZW47IiBocmVmPSJodHRwczovL2Nocm9tZS56enptaC5jbi9pbmZvP3Rva2VuPWVpbWFkcGJjYmZubWJrb3Bvb2pmZWtobmtoZGJpZWVoIiB0YXJnZXQ9Il9ibGFuayI+5o+S5Lu25LiL6L295Zyw5Z2A54K55oiRPC9hPjwvc3Bhbj48L2xhYmVsPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxicj4nOwogICAgICAgICAgICBjb25maWdIVE1MICs9ICc8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJ0b2dnbGUtYXV0b3NpemUtYnV0dG9uIj4gPGxhYmVsIGZvcj0idG9nZ2xlLWF1dG9zaXplLWJ1dHRvbiIgY2xhc3M9Im1vZGVMYWJlbCI+5a695bqm6Ieq5Yqo6YCC5bqUPGJyPjxzcGFuIHN0eWxlPSJmb250LXNpemU6IDhweDtjb2xvcjogIzgwODA4MDsiPiMg6YCJ6aG55L2c55So77ya5byA5ZCv5q2k6YCJ6aG55Y+v5Lul5Zyo6aG16Z2i5a695bqm57yp5bCP5pe26Ieq5Yqo5YiH5o2i6Iez5bCP5bGP5qih5byPPC9zcGFuPjwvbGFiZWw+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGJyPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InRvZ2dsZS1hdXRvaGlkZXRvb2xiYXItYnV0dG9uIj4gPGxhYmVsIGZvcj0idG9nZ2xlLWF1dG9oaWRldG9vbGJhci1idXR0b24iIGNsYXNzPSJtb2RlTGFiZWwiPuWQkeS4i+a7muWKqOiHquWKqOmakOiXj+mhtuagjzwvbGFiZWw+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGJyPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InRvZ2dsZS1hdXRvaGlkZWJvdHRvbWJhci1idXR0b24iPiA8bGFiZWwgZm9yPSJ0b2dnbGUtYXV0b2hpZGVib3R0b21iYXItYnV0dG9uIiBjbGFzcz0ibW9kZUxhYmVsIj7oh6rliqjpmpDol4/lupXmoI88L2xhYmVsPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxicj4nOwogICAgICAgICAgICBjb25maWdIVE1MICs9ICc8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJ0b2dnbGUtd3JpdGVibG9nLWJ1dHRvbiI+IDxsYWJlbCBmb3I9InRvZ2dsZS13cml0ZWJsb2ctYnV0dG9uIiBjbGFzcz0ibW9kZUxhYmVsIj7mmL7npLrliJvkvZzkuK3lv4PmjInpkq48L2xhYmVsPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxicj4nOwogICAgICAgICAgICBjb25maWdIVE1MICs9ICc8aHIgc3R5bGU9ImhlaWdodDoxcHg7Ym9yZGVyOm5vbmU7Ym9yZGVyLXRvcDoxcHggc29saWQgI2NjY2NjYzttYXJnaW46IDVweCAwcHggNXB4IDBweDsiIC8+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPHAgc3R5bGU9Im1hcmdpbi1ib3R0b206IDVweCI+PGI+5Y+z5L6n5qCP5a6a5Yi2PC9iPjwvcD4nOwogICAgICAgICAgICBjb25maWdIVE1MICs9ICc8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJ0b2dnbGUtYXV0aG9yY2FyZC1idXR0b24iPiA8bGFiZWwgZm9yPSJ0b2dnbGUtYXV0aG9yY2FyZC1idXR0b24iIGNsYXNzPSJtb2RlTGFiZWwiPuaYvuekuuS9nOiAheWQjeeJhzwvbGFiZWw+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGJyPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InRvZ2dsZS1zZWFyY2hibG9nLWJ1dHRvbiI+IDxsYWJlbCBmb3I9InRvZ2dsZS1zZWFyY2hibG9nLWJ1dHRvbiIgY2xhc3M9Im1vZGVMYWJlbCI+5pi+56S65pCc5Y2a5Li75paH56ugPC9sYWJlbD4nOwogICAgICAgICAgICBjb25maWdIVE1MICs9ICc8YnI+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0idG9nZ2xlLW5ld2FydGljbGUtYnV0dG9uIj4gPGxhYmVsIGZvcj0idG9nZ2xlLW5ld2FydGljbGUtYnV0dG9uIiBjbGFzcz0ibW9kZUxhYmVsIj7mmL7npLrmnIDmlrDmlofnq6A8L2xhYmVsPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxicj4nOwogICAgICAgICAgICBjb25maWdIVE1MICs9ICc8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJ0b2dnbGUtaG90YXJ0aWNsZS1idXR0b24iPiA8bGFiZWwgZm9yPSJ0b2dnbGUtaG90YXJ0aWNsZS1idXR0b24iIGNsYXNzPSJtb2RlTGFiZWwiPuaYvuekuueDremXqOaWh+eroDwvbGFiZWw+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGJyPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InRvZ2dsZS1uZXdjb21tZW50cy1idXR0b24iPiA8bGFiZWwgZm9yPSJ0b2dnbGUtbmV3Y29tbWVudHMtYnV0dG9uIiBjbGFzcz0ibW9kZUxhYmVsIj7mmL7npLrmnIDmlrDor4Torro8L2xhYmVsPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxicj4nOwogICAgICAgICAgICBjb25maWdIVE1MICs9ICc8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJ0b2dnbGUta2luZHBlcnNvbi1idXR0b24iPiA8bGFiZWwgZm9yPSJ0b2dnbGUta2luZHBlcnNvbi1idXR0b24iIGNsYXNzPSJtb2RlTGFiZWwiPuaYvuekuuWIhuexu+S4k+agjzwvbGFiZWw+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGJyPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InRvZ2dsZS1yZWNvbW1lbmRhcnRpY2xlLWJ1dHRvbiI+IDxsYWJlbCBmb3I9InRvZ2dsZS1yZWNvbW1lbmRhcnRpY2xlLWJ1dHRvbiIgY2xhc3M9Im1vZGVMYWJlbCI+5pi+56S65o6o6I2Q5paH56ugPC9sYWJlbD4nOwogICAgICAgICAgICBjb25maWdIVE1MICs9ICc8YnI+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0idG9nZ2xlLWFyY2hpdmUtYnV0dG9uIj4gPGxhYmVsIGZvcj0idG9nZ2xlLWFyY2hpdmUtYnV0dG9uIiBjbGFzcz0ibW9kZUxhYmVsIj7mmL7npLrlvZLmoaM8L2xhYmVsPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxicj4nOwogICAgICAgICAgICBjb25maWdIVE1MICs9ICc8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJ0b2dnbGUtY29udGVudC1idXR0b24iPiA8bGFiZWwgZm9yPSJ0b2dnbGUtY29udGVudC1idXR0b24iIGNsYXNzPSJtb2RlTGFiZWwiPuaYvuekuuebruW9lTwvbGFiZWw+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGJyPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxidXR0b24gaWQ9InNhdmUxIiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyB0b3A6IDIwcHg7IHJpZ2h0OiAxNXB4OyIgb25jbGljaz0ibG9jYXRpb24ucmVsb2FkKCkiPicgKyBzYXZlX3N2ZyArICcg5L+d5a2Y5bm25bqU55SoPC9idXR0b24+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGJyPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxwIHN0eWxlPSJmb250LXNpemU6NXB4Ij7lsI/mj5DnpLrvvJpDU0ROR3JlZW5lciDohJrmnKzkuI3mj5Dkvpvku7vkvZXkvJrlkZjmlofnq6DnoLTop6PjgIHkvJrlkZjotYTmupDkuIvovb3lip/og73vvIzku4XpgILnlKjkuo7liY3nq6/kvJjljJbvvIzor7flnKhDU0RO5a6Y5pa55rig6YGT6LSt5LmwQ1NETuS8muWRmOS9k+mqjOS7mOi0ueWKn+iDveOAgjwvcD4nOwogICAgICAgICAgICBjb25maWdIVE1MICs9ICc8YnI+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL2FkbGVyZWQvQ1NETkdyZWVuZXIiIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0iZ2l2ZU1lT25lU3RhciI+JyArIHN0YXJfc3ZnICsgJyA8Yj7ngrnmiJF+PC9iPiDliqjliqjlsI/miYvlnKggR2l0SHViIOeCueS4qiBTdGFy77yM5pSv5oyB5oiR57un57ut57u05oqk6ISa5pysIDopPC9hPic7CiAgICAgICAgICAgIGNvbmZpZ0hUTUwgKz0gJzxidXR0b24gaWQ9InNhdmUyIiBzdHlsZT0iZmxvYXQ6IHJpZ2h0OyIgb25jbGljaz0ibG9jYXRpb24ucmVsb2FkKCkiPicgKyBzYXZlX3N2ZyArICcg5L+d5a2Y5bm25bqU55SoPC9idXR0b24+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPGJyPic7CgogICAgICAgICAgICAvLyBjb25maWdIVE1MICs9ICc8YSBocmVmPSJodHRwczovL2RvYy5zdGFja292ZXJmbG93Lndpa2kvd2ViLyMvMjE/cGFnZV9pZD0xMzgiIHRhcmdldD0iX2JsYW5rIiBzdHlsZT0ibWFyZ2luLXRvcDogNXB4OyBkaXNwbGF5OiBibG9jazsiPicgKyBkb25hdGVfc3ZnICsgJyDmiJHmmK/ogIHmnb/vvIzmipXluIHmiZPotY88L2E+JzsKICAgICAgICAgICAgY29uZmlnSFRNTCArPSAnPC9kaXY+PGRpdiBpZD0iZmFkZSIgY2xhc3M9ImJsYWNrX292ZXJsYXkiPjwvZGl2Pic7CiAgICAgICAgICAgIC8vIOe7v+WMluWZqOiuvuWumgogICAgICAgICAgICAkKCJib2R5IikucHJlcGVuZCgnPGRpdiBpZD0ibGlnaHQiIGNsYXNzPSJ3aGl0ZV9jb250ZW50Ij4nICsgY29uZmlnSFRNTCk7CiAgICAgICAgICAgIC8vIOe7v+WMluiuvuWumgogICAgICAgICAgICBsZXQgaHRtbE9mMCA9ICc8bGk+PGEgaWQ9ImdyZWVuZXJTZXR0aW5ncyIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBzdHlsZT0iIiBvbmNsaWNrPSIkKHdpbmRvdykuc2Nyb2xsVG9wKDApO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwnbGlnaHRcJykuc3R5bGUuZGlzcGxheT1cJ2Jsb2NrXCc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCdmYWRlXCcpLnN0eWxlLmRpc3BsYXk9XCdibG9ja1wnOyI+JyArIHNldF9zdmcgKyAnIOe7v+WMluiuvuWumjwvYT48L2xpPic7CiAgICAgICAgICAgICQoIi50b29sYmFyLW1lbnVzIikucHJlcGVuZChodG1sT2YwKTsKCiAgICAgICAgICAgIC8qKiDphY3nva7mjqfliLYgKiovCiAgICAgICAgICAgIGxldCBjb25maWcgPSBuZXcgQ29uZmlnKCk7CiAgICAgICAgICAgIC8vIOaOqOiNkOWGheWuuQogICAgICAgICAgICAkKCIuYmxvZy1jb250ZW50LWJveCIpLmFwcGVuZCgiPGJyPjxkaXYgY2xhc3M9J2Jsb2ctY29udGVudC1ib3gnIGlkPSdyZWNvbW1lbmRTd2l0Y2gnIHN0eWxlPSd0ZXh0LWFsaWduOiByaWdodDsnPjwvZGl2PiIpOwogICAgICAgICAgICAkKCIjcmVjb21tZW5kU3dpdGNoOmxhc3QiKS5hcHBlbmQoJzxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InRvZ2dsZS1idXR0b24iPiA8bGFiZWwgZm9yPSJ0b2dnbGUtYnV0dG9uIiBjbGFzcz0iYnV0dG9uLWxhYmVsIj4gPHNwYW4gY2xhc3M9ImNpcmNsZSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0idGV4dCBvbiI+Jm5ic3A7PC9zcGFuPiA8c3BhbiBjbGFzcz0idGV4dCBvZmYiPiZuYnNwOzwvc3Bhbj4gPC9sYWJlbD4nICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8cCBzdHlsZT0ibWFyZ2luLXRvcDogNXB4OyBmb250LXNpemU6IDEzcHg7Ij7mmL7npLrmjqjojZDlhoXlrrk8L3A+Jyk7CiAgICAgICAgICAgIGxldCByZWNvbW1lbmRDb29raWUgPSBjb25maWcuZ2V0KCJyZWNvbW1lbmQiLCBmYWxzZSk7CiAgICAgICAgICAgIGlmICghcmVjb21tZW5kQ29va2llKSB7CiAgICAgICAgICAgICAgICAkKCIucmVjb21tZW5kLWJveCIpLmhpZGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocmVjb21tZW5kQ29va2llKSB7CiAgICAgICAgICAgICAgICAkKCIjdG9nZ2xlLXJlY29tbWVuZC1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAkKCIjdG9nZ2xlLWJ1dHRvbiIpLnByb3AoImNoZWNrZWQiLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICQoIiN0b2dnbGUtcmVjb21tZW5kLWJ1dHRvbiIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAkKCIjdG9nZ2xlLWJ1dHRvbiIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uZmlnLmxpc3RlbkJ1dHRvbigiI3RvZ2dsZS1yZWNvbW1lbmQtYnV0dG9uIiwgInJlY29tbWVuZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHskKCIucmVjb21tZW5kLWJveCIpLnNsaWRlRG93bigyMDApO30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHskKCIucmVjb21tZW5kLWJveCIpLnNsaWRlVXAoMjAwKTt9KTsKICAgICAgICAgICAgY29uZmlnLmxpc3RlbkJ1dHRvbkFuZEFjdGlvbigiI3RvZ2dsZS1idXR0b24iLCAicmVjb21tZW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHskKCIucmVjb21tZW5kLWJveCIpLnNsaWRlRG93bigyMDApO30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHskKCIucmVjb21tZW5kLWJveCIpLnNsaWRlVXAoMjAwKTt9KTsKCiAgICAgICAgICAgIC8vIOaPkOekugogICAgICAgICAgICBsZXQgdGlwc0Nvb2tpZSA9IGNvbmZpZy5nZXQoInNob3dUaXAiLCB0cnVlKTsKICAgICAgICAgICAgaWYgKHRpcHNDb29raWUpIHsKICAgICAgICAgICAgICAgIHNob3dUaXBzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uZmlnLnNldCgic2hvd1RpcCIsIGZhbHNlKTsKCiAgICAgICAgICAgIC8vIOaYvuekuuS9nOiAheWQjeeJhwogICAgICAgICAgICBsZXQgYXV0aG9yQ2FyZENvb2tpZSA9IGNvbmZpZy5nZXQoImF1dGhvckNhcmQiLCBmYWxzZSk7CiAgICAgICAgICAgIGlmIChhdXRob3JDYXJkQ29va2llKSB7CiAgICAgICAgICAgICAgICAvLyDljZrkuLvkv6Hmga8KICAgICAgICAgICAgICAgICQoJyNyZWNvbW1lbmQtcmlnaHQnKS5hcHBlbmQoJCgnI2FzaWRlUHJvZmlsZScpLnByb3AoIm91dGVySFRNTCIpKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnI2FzaWRlUHJvZmlsZScpLmF0dHIoInN0eWxlIiwgIm1hcmdpbi10b3A6IDhweDsgd2lkdGg6IDMwMHB4OyIpOwogICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoYXV0aG9yQ2FyZENvb2tpZSkgewogICAgICAgICAgICAgICAgJCgiI3RvZ2dsZS1hdXRob3JjYXJkLWJ1dHRvbiIpLnByb3AoImNoZWNrZWQiLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICQoIiN0b2dnbGUtYXV0aG9yY2FyZC1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbmZpZy5saXN0ZW5CdXR0b24oIiN0b2dnbGUtYXV0aG9yY2FyZC1idXR0b24iLCAiYXV0aG9yQ2FyZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtsb2NhdGlvbi5yZWxvYWQoKTt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7bG9jYXRpb24ucmVsb2FkKCk7fSk7CgogICAgICAgICAgICAvLyDlvLrliLbnmb3oibLkuLvpopgKICAgICAgICAgICAgbGV0IHdoaXRlVGhlbWVDb29raWUgPSBjb25maWcuZ2V0KCJ3aGl0ZVRoZW1lIiwgdHJ1ZSk7CiAgICAgICAgICAgIGlmICh3aGl0ZVRoZW1lQ29va2llKSB7CiAgICAgICAgICAgICAgICAvLyDog4zmma/liKDpmaQKICAgICAgICAgICAgICAgICQoJy5tYWluX2ZhdGhlcicpLmF0dHIoJ3N0eWxlJywgJ2JhY2tncm91bmQtaW1hZ2U6IG5vbmUgIWltcG9ydGFudDsgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjZmNzsgYmFja2dyb3VuZDogI2Y1ZjZmNzsnKTsKICAgICAgICAgICAgICAgICQoJ1tocmVmXj0iaHR0cHM6Ly9jc2RuaW1nLmNuL3JlbGVhc2UvcGhvZW5peC90ZW1wbGF0ZS90aGVtZXNfc2tpbi8iXScpLmF0dHIoJ2hyZWYnLCAnaHR0cHM6Ly9jc2RuaW1nLmNuL3JlbGVhc2UvcGhvZW5peC90ZW1wbGF0ZS90aGVtZXNfc2tpbi9za2luLXRlY2hub2xvZ3kvc2tpbi10ZWNobm9sb2d5LTYzMzY1NDk1NTcubWluLmNzcycpOwogICAgICAgICAgICAgICAgJCgnI2NzZG4tdG9vbGJhcicpLnJlbW92ZUNsYXNzKCdjc2RuLXRvb2xiYXItc2tpbi1ibGFjaycpOwogICAgICAgICAgICAgICAgJCgnLmNzZG4tbG9nbycpLmF0dHIoJ3NyYycsICcvL2NzZG5pbWcuY24vY2RuL2NvbnRlbnQtdG9vbGJhci9jc2RuLWxvZ28ucG5nP3Y9MjAyMDA0MTYuMScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh3aGl0ZVRoZW1lQ29va2llKSB7CiAgICAgICAgICAgICAgICAkKCIjdG9nZ2xlLXdoaXRldGhlbWUtYnV0dG9uIikucHJvcCgiY2hlY2tlZCIsIHRydWUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCgiI3RvZ2dsZS13aGl0ZXRoZW1lLWJ1dHRvbiIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uZmlnLmxpc3RlbkJ1dHRvbigiI3RvZ2dsZS13aGl0ZXRoZW1lLWJ1dHRvbiIsICJ3aGl0ZVRoZW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge2xvY2F0aW9uLnJlbG9hZCgpO30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtsb2NhdGlvbi5yZWxvYWQoKTt9KTsKCiAgICAgICAgICAgIC8vIOaQnOWNmuS4u+aWh+eroAogICAgICAgICAgICBsZXQgc2VhcmNoQmxvZ0Nvb2tpZSA9IGNvbmZpZy5nZXQoInNlYXJjaEJsb2ciLCBmYWxzZSk7CiAgICAgICAgICAgIGlmKHNlYXJjaEJsb2dDb29raWUpIHsKICAgICAgICAgICAgICAgICQoJyNyZWNvbW1lbmQtcmlnaHQnKS5hcHBlbmQoJCgnI2FzaWRlU2VhcmNoQXJ0aWNsZScpLnByb3AoIm91dGVySFRNTCIpKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnI2FzaWRlU2VhcmNoQXJ0aWNsZScpLmF0dHIoInN0eWxlIiwgIm1hcmdpbi10b3A6IDhweDsgd2lkdGg6IDMwMHB4OyIpOwogICAgICAgICAgICAgICAgICAgIHZhciBpID0gJCgiI3NlYXJjaC1ibG9nLXdvcmRzIikKICAgICAgICAgICAgICAgICAgICAgICwgbiA9ICQoIi5idG4tc2VhcmNoLWJsb2ciKTsKICAgICAgICAgICAgICAgICAgICBpLmtleXVwKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0LmtleUNvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxMyA9PSBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGVuY29kZVVSSUNvbXBvbmVudChpLnZhbCgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSAiLy9zby5jc2RuLm5ldC9zby9zZWFyY2gvcy5kbz9xPSIgKyBlICsgIiZ0PWJsb2cmdT0iICsgdXNlcm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4ocykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIG4ub24oImNsaWNrIiwgZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGVuY29kZVVSSUNvbXBvbmVudChpLnZhbCgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gIi8vc28uY3Nkbi5uZXQvc28vc2VhcmNoL3MuZG8/cT0iICsgbiArICImdD1ibG9nJnU9IiArIHVzZXJuYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0LnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHNlYXJjaEJsb2dDb29raWUpIHsKICAgICAgICAgICAgICAgICQoIiN0b2dnbGUtc2VhcmNoYmxvZy1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkKCIjdG9nZ2xlLXNlYXJjaGJsb2ctYnV0dG9uIikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25maWcubGlzdGVuQnV0dG9uKCIjdG9nZ2xlLXNlYXJjaGJsb2ctYnV0dG9uIiwgInNlYXJjaEJsb2ciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7bG9jYXRpb24ucmVsb2FkKCk7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge2xvY2F0aW9uLnJlbG9hZCgpO30pOwoKICAgICAgICAgICAgLy8g5pyA5paw5paH56ugCiAgICAgICAgICAgIGxldCBuZXdBcnRpY2xlQ29va2llID0gY29uZmlnLmdldCgibmV3QXJ0aWNsZSIsIGZhbHNlKTsKICAgICAgICAgICAgaWYgKG5ld0FydGljbGVDb29raWUpIHsKICAgICAgICAgICAgICAgICQoJyNyZWNvbW1lbmQtcmlnaHQnKS5hcHBlbmQoJCgnI2FzaWRlTmV3QXJ0aWNsZScpLnByb3AoIm91dGVySFRNTCIpKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnI2FzaWRlTmV3QXJ0aWNsZScpLmF0dHIoInN0eWxlIiwgIm1hcmdpbi10b3A6IDhweDsgd2lkdGg6IDMwMHB4OyIpOwogICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG5ld0FydGljbGVDb29raWUpIHsKICAgICAgICAgICAgICAgICQoIiN0b2dnbGUtbmV3YXJ0aWNsZS1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkKCIjdG9nZ2xlLW5ld2FydGljbGUtYnV0dG9uIikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25maWcubGlzdGVuQnV0dG9uKCIjdG9nZ2xlLW5ld2FydGljbGUtYnV0dG9uIiwgIm5ld0FydGljbGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7bG9jYXRpb24ucmVsb2FkKCk7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge2xvY2F0aW9uLnJlbG9hZCgpO30pOwoKICAgICAgICAgICAgLy8g54Ot6Zeo5paH56ugCiAgICAgICAgICAgIGxldCBob3RBcnRpY2xlQ29va2llID0gY29uZmlnLmdldCgiaG90QXJ0aWNsZSIsIGZhbHNlKTsKICAgICAgICAgICAgaWYgKGhvdEFydGljbGVDb29raWUpIHsKICAgICAgICAgICAgICAgICQoJyNyZWNvbW1lbmQtcmlnaHQnKS5hcHBlbmQoJCgiI2FzaWRlSG90QXJ0aWNsZSIpLnByb3AoIm91dGVySFRNTCIpKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnI2FzaWRlSG90QXJ0aWNsZScpLmF0dHIoInN0eWxlIiwgIm1hcmdpbi10b3A6IDhweDsgd2lkdGg6IDMwMHB4OyIpOwogICAgICAgICAgICAgICAgICAgICQoJyNhc2lkZUhvdEFydGljbGUgaW1nJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaG90QXJ0aWNsZUNvb2tpZSkgewogICAgICAgICAgICAgICAgJCgiI3RvZ2dsZS1ob3RhcnRpY2xlLWJ1dHRvbiIpLnByb3AoImNoZWNrZWQiLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICQoIiN0b2dnbGUtaG90YXJ0aWNsZS1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbmZpZy5saXN0ZW5CdXR0b24oIiN0b2dnbGUtaG90YXJ0aWNsZS1idXR0b24iLCAiaG90QXJ0aWNsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtsb2NhdGlvbi5yZWxvYWQoKTt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7bG9jYXRpb24ucmVsb2FkKCk7fSk7CgogICAgICAgICAgICAvLyDmnIDmlrDor4TorroKICAgICAgICAgICAgbGV0IG5ld0NvbW1lbnRzQ29va2llID0gY29uZmlnLmdldCgibmV3Q29tbWVudHMiLCBmYWxzZSk7CiAgICAgICAgICAgIGlmIChuZXdDb21tZW50c0Nvb2tpZSkgewogICAgICAgICAgICAgICAgJCgnI3JlY29tbWVuZC1yaWdodCcpLmFwcGVuZCgkKCIjYXNpZGVOZXdDb21tZW50cyIpLnByb3AoIm91dGVySFRNTCIpKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnI2FzaWRlTmV3Q29tbWVudHMnKS5hdHRyKCJzdHlsZSIsICJtYXJnaW4tdG9wOiA4cHg7IHdpZHRoOiAzMDBweDsiKTsKICAgICAgICAgICAgICAgICAgICAkKCIuY29tbWVudC5lbGxpcHNpcyIpLmF0dHIoInN0eWxlIiwgIm1heC1oZWlnaHQ6IG5vbmU7Iik7CiAgICAgICAgICAgICAgICAgICAgJCgiLnRpdGxlLnRleHQtdHJ1bmNhdGUiKS5hdHRyKCJzdHlsZSIsICJwYWRkaW5nOiAwIik7CiAgICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobmV3Q29tbWVudHNDb29raWUpIHsKICAgICAgICAgICAgICAgICQoIiN0b2dnbGUtbmV3Y29tbWVudHMtYnV0dG9uIikucHJvcCgiY2hlY2tlZCIsIHRydWUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCgiI3RvZ2dsZS1uZXdjb21tZW50cy1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbmZpZy5saXN0ZW5CdXR0b24oIiN0b2dnbGUtbmV3Y29tbWVudHMtYnV0dG9uIiwgIm5ld0NvbW1lbnRzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge2xvY2F0aW9uLnJlbG9hZCgpO30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtsb2NhdGlvbi5yZWxvYWQoKTt9KTsKCiAgICAgICAgICAgIC8vIOWIhuexu+S4k+agjwogICAgICAgICAgICBsZXQga2luZFBlcnNvbkNvb2tpZSA9IGNvbmZpZy5nZXQoImtpbmRQZXJzb24iLCBmYWxzZSk7CiAgICAgICAgICAgIGlmICgha2luZFBlcnNvbkNvb2tpZSkgewogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAkKCcjYXNpZGVDYXRlZ29yeScpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICQoJy5raW5kX3BlcnNvbicpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkKCcjcmVjb21tZW5kLXJpZ2h0JykuYXBwZW5kKCQoIiNhc2lkZUNhdGVnb3J5IikucHJvcCgib3V0ZXJIVE1MIikpOwogICAgICAgICAgICAgICAgaWYgKCQoIiNhc2lkZUNhdGVnb3J5IikubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICQoJy5raW5kX3BlcnNvbicpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkKCcua2luZF9wZXJzb24nKS5hdHRyKCJzdHlsZSIsICJtYXJnaW4tdG9wOiA4cHg7IHdpZHRoOiAzMDBweDsgaGVpZ2h0OjI1NXB4OyIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAkKCcjYXNpZGVDYXRlZ29yeScpLmF0dHIoInN0eWxlIiwgIm1hcmdpbi10b3A6IDhweDsgd2lkdGg6IDMwMHB4OyBkaXNwbGF5OmJsb2NrICFpbXBvcnRhbnQ7Iik7CiAgICAgICAgICAgICAgICAgICAgJCgiYS5mbGV4aWJsZS1idG4iKS5jbGljayhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCdkaXYuYXNpZGUtYm94JykucmVtb3ZlQ2xhc3MoJ2ZsZXhpYmxlLWJveCcpOwogICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoInAudGV4dC1jZW50ZXIiKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoa2luZFBlcnNvbkNvb2tpZSkgewogICAgICAgICAgICAgICAgJCgiI3RvZ2dsZS1raW5kcGVyc29uLWJ1dHRvbiIpLnByb3AoImNoZWNrZWQiLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICQoIiN0b2dnbGUta2luZHBlcnNvbi1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbmZpZy5saXN0ZW5CdXR0b24oIiN0b2dnbGUta2luZHBlcnNvbi1idXR0b24iLCAia2luZFBlcnNvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtsb2NhdGlvbi5yZWxvYWQoKTt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7bG9jYXRpb24ucmVsb2FkKCk7fSk7CgogICAgICAgICAgICAvLyDnm67lvZUKICAgICAgICAgICAgbGV0IGNvbnRlbnRDb29raWUgPSBjb25maWcuZ2V0KCJjb250ZW50IiwgdHJ1ZSk7CiAgICAgICAgICAgIGlmICghY29udGVudENvb2tpZSkgewogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAkKCcuYWxpZ24taXRlbXMtc3RyZXRjaC5ncm91cF9pdGVtJykucGFyZW50KCkucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY29udGVudENvb2tpZSkgewogICAgICAgICAgICAgICAgJCgiI3RvZ2dsZS1jb250ZW50LWJ1dHRvbiIpLnByb3AoImNoZWNrZWQiLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICQoIiN0b2dnbGUtY29udGVudC1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbmZpZy5saXN0ZW5CdXR0b24oIiN0b2dnbGUtY29udGVudC1idXR0b24iLCAiY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtsb2NhdGlvbi5yZWxvYWQoKTt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7bG9jYXRpb24ucmVsb2FkKCk7fSk7CgogICAgICAgICAgICAvLyDmjqjojZDmlofnq6AKICAgICAgICAgICAgbGV0IHJlY29tbWVuZEFydGljbGVDb29raWUgPSBjb25maWcuZ2V0KCJyZWNvbW1lbmRBcnRpY2xlIiwgZmFsc2UpOwogICAgICAgICAgICBpZiAoIXJlY29tbWVuZEFydGljbGVDb29raWUpIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnLnJlY29tbWVuZC1saXN0LWJveCcpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICQoJy5yZWNvbW1lbmQtbGlzdC1ib3gnKS5hdHRyKCJzdHlsZSIsICJtYXJnaW4tdG9wOiA4cHg7IHdpZHRoOiAzMDBweDsgaGVpZ2h0OjI1NXB4OyIpOwogICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlY29tbWVuZEFydGljbGVDb29raWUpIHsKICAgICAgICAgICAgICAgICQoIiN0b2dnbGUtcmVjb21tZW5kYXJ0aWNsZS1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkKCIjdG9nZ2xlLXJlY29tbWVuZGFydGljbGUtYnV0dG9uIikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25maWcubGlzdGVuQnV0dG9uKCIjdG9nZ2xlLXJlY29tbWVuZGFydGljbGUtYnV0dG9uIiwgInJlY29tbWVuZEFydGljbGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7bG9jYXRpb24ucmVsb2FkKCk7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge2xvY2F0aW9uLnJlbG9hZCgpO30pOwoKICAgICAgICAgICAgLy8g5b2S5qGjCiAgICAgICAgICAgIGxldCBhcmNoaXZlQ29va2llID0gY29uZmlnLmdldCgiYXJjaGl2ZSIsIGZhbHNlKTsKICAgICAgICAgICAgaWYgKCFhcmNoaXZlQ29va2llKSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICQoJyNhc2lkZUFyY2hpdmUnKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCgnI3JlY29tbWVuZC1yaWdodCcpLmFwcGVuZCgkKCIjYXNpZGVBcmNoaXZlIikucHJvcCgib3V0ZXJIVE1MIikpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAkKCcjYXNpZGVBcmNoaXZlJykuYXR0cigic3R5bGUiLCAibWFyZ2luLXRvcDogOHB4OyB3aWR0aDogMzAwcHg7IGRpc3BsYXk6YmxvY2sgIWltcG9ydGFudDsiKTsKICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGFyY2hpdmVDb29raWUpIHsKICAgICAgICAgICAgICAgICQoIiN0b2dnbGUtYXJjaGl2ZS1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkKCIjdG9nZ2xlLWFyY2hpdmUtYnV0dG9uIikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25maWcubGlzdGVuQnV0dG9uKCIjdG9nZ2xlLWFyY2hpdmUtYnV0dG9uIiwgImFyY2hpdmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7bG9jYXRpb24ucmVsb2FkKCk7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge2xvY2F0aW9uLnJlbG9hZCgpO30pOwoKICAgICAgICAgICAgLy8g6Ieq5Yqo6Z2g5bem5bmz6ZO6CiAgICAgICAgICAgIGxldCBhdXRvU2l6ZUNvb2tpZSA9IGNvbmZpZy5nZXQoImF1dG9TaXplIiwgZmFsc2UpOwogICAgICAgICAgICBpZiAoYXV0b1NpemVDb29raWUpIHsKICAgICAgICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAvLyDmlofnq6Dlrr3luqboh6rpgILlupQKICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCAxMTAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIoOmZpOWOn+acieWTjeW6lOW8j+agt+W8jwogICAgICAgICAgICAgICAgICAgICAgICAkKCIubWFpbl9mYXRoZXIiKS5yZW1vdmVDbGFzcygianVzdGlmeS1jb250ZW50LWNlbnRlciIpOwogICAgICAgICAgICAgICAgICAgICAgICAkKCJjc2RuLXNpZGUtdG9vbGJhciIpLmNzcygibGVmdCIsICJhdXRvIikKICAgICAgICAgICAgICAgICAgICAgICAgJCgiYXJ0aWNsZSIpLndpZHRoKHdpbmRvdy5pbm5lcldpZHRoIC0gMTUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgR01fYWRkU3R5bGUoYAogICAgICAgICAgICAgICAgICAgICAgICBtYWluewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGF1dG8haW1wb3J0YW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IG5vbmUhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiA5MHZ3OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG1haW4gYXJ0aWNsZSBpbWd7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDAgYXV0bzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvdmVyOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGApOwogICAgICAgICAgICAgICAgICAgICAgICBkaWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaWQgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoImFydGljbGUiKS5yZW1vdmVBdHRyKCJzdHlsZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChhdXRvU2l6ZUNvb2tpZSkgewogICAgICAgICAgICAgICAgJCgiI3RvZ2dsZS1hdXRvc2l6ZS1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkKCIjdG9nZ2xlLWF1dG9zaXplLWJ1dHRvbiIpLnByb3AoImNoZWNrZWQiLCBmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uZmlnLmxpc3RlbkJ1dHRvbigiI3RvZ2dsZS1hdXRvc2l6ZS1idXR0b24iLCAiYXV0b1NpemUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7bG9jYXRpb24ucmVsb2FkKCk7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge2xvY2F0aW9uLnJlbG9hZCgpO30pOwoKICAgICAgICAgICAgLy8g6Ieq5Yqo6ZqQ6JeP6aG25qCPCiAgICAgICAgICAgIGxldCBhdXRvSGlkZVRvb2xiYXJDb29raWUgPSBjb25maWcuZ2V0KCJhdXRvSGlkZVRvb2xiYXIiLCB0cnVlKTsKICAgICAgICAgICAgaWYgKGF1dG9IaWRlVG9vbGJhckNvb2tpZSkgewogICAgICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA+IDEwMCkgewogICAgICAgICAgICAgICAgCSAgICBsZXQgc2Nyb2xsUyA9ICQodGhpcykuc2Nyb2xsVG9wKCk7CiAgICAgICAgICAgICAgICAJICAgIGlmIChzY3JvbGxTID49IHdpbmRvd1RvcCkgewogICAgICAgICAgICAgICAgCSAgICAJJCgnI2NzZG4tdG9vbGJhcicpLnNsaWRlVXAoMTAwKTsKICAgICAgICAgICAgICAgIAkgICAgCXdpbmRvd1RvcCA9IHNjcm9sbFM7CiAgICAgICAgICAgICAgICAJICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAJICAgIAkkKCcjY3Nkbi10b29sYmFyJykuc2xpZGVEb3duKDEwMCk7CiAgICAgICAgICAgICAgICAJICAgIAl3aW5kb3dUb3AgPSBzY3JvbGxTOwogICAgICAgICAgICAgICAgCSAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGF1dG9IaWRlVG9vbGJhckNvb2tpZSkgewogICAgICAgICAgICAgICAgJCgiI3RvZ2dsZS1hdXRvaGlkZXRvb2xiYXItYnV0dG9uIikucHJvcCgiY2hlY2tlZCIsIHRydWUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCgiI3RvZ2dsZS1hdXRvaGlkZXRvb2xiYXItYnV0dG9uIikucHJvcCgiY2hlY2tlZCIsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25maWcubGlzdGVuQnV0dG9uKCIjdG9nZ2xlLWF1dG9oaWRldG9vbGJhci1idXR0b24iLCAiYXV0b0hpZGVUb29sYmFyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge2xvY2F0aW9uLnJlbG9hZCgpO30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtsb2NhdGlvbi5yZWxvYWQoKTt9KTsKCiAgICAgICAgICAgIC8vIOiHquWKqOmakOiXj+W6leagjwogICAgICAgICAgICBsZXQgYXV0b0hpZGVCb3R0b21CYXJDb29raWUgPSBjb25maWcuZ2V0KCJhdXRvSGlkZUJvdHRvbUJhciIsIHRydWUpOwogICAgICAgICAgICBpZiAoYXV0b0hpZGVCb3R0b21CYXJDb29raWUpIHsKICAgICAgICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHskKCIjdG9vbEJhckJveCAubGVmdC10b29sYm94IikuY3NzKHsKICAgICAgICAgICAgICAgIAlwb3NpdGlvbjogInJlbGF0aXZlIiwKICAgICAgICAgICAgICAgIAlsZWZ0OiAiMHB4IiwKICAgICAgICAgICAgICAgIAlib3R0b206ICIwIiwKICAgICAgICAgICAgICAgIAl3aWR0aDogJCgiI3Rvb2xCYXJCb3giKS53aWR0aCgpICsgInB4IgogICAgICAgICAgICAgICAgfSl9LCAzMDAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoYXV0b0hpZGVCb3R0b21CYXJDb29raWUpIHsKICAgICAgICAgICAgICAgICQoIiN0b2dnbGUtYXV0b2hpZGVib3R0b21iYXItYnV0dG9uIikucHJvcCgiY2hlY2tlZCIsIHRydWUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCgiI3RvZ2dsZS1hdXRvaGlkZWJvdHRvbWJhci1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbmZpZy5saXN0ZW5CdXR0b24oIiN0b2dnbGUtYXV0b2hpZGVib3R0b21iYXItYnV0dG9uIiwgImF1dG9IaWRlQm90dG9tQmFyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge2xvY2F0aW9uLnJlbG9hZCgpO30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtsb2NhdGlvbi5yZWxvYWQoKTt9KTsKCiAgICAgICAgICAgIC8vIOWIm+S9nOS4reW/g+aMiemSrgogICAgICAgICAgICBsZXQgd3JpdGVCbG9nQ29va2llID0gY29uZmlnLmdldCgid3JpdGVCbG9nIiwgdHJ1ZSk7CiAgICAgICAgICAgIGlmICghd3JpdGVCbG9nQ29va2llKSB7CiAgICAgICAgICAgICAgICAkKCIudG9vbGJhci1idG4td3JpdGUiKS5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAod3JpdGVCbG9nQ29va2llKSB7CiAgICAgICAgICAgICAgICAkKCIjdG9nZ2xlLXdyaXRlYmxvZy1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkKCIjdG9nZ2xlLXdyaXRlYmxvZy1idXR0b24iKS5wcm9wKCJjaGVja2VkIiwgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbmZpZy5saXN0ZW5CdXR0b24oIiN0b2dnbGUtd3JpdGVibG9nLWJ1dHRvbiIsICJ3cml0ZUJsb2ciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7bG9jYXRpb24ucmVsb2FkKCk7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge2xvY2F0aW9uLnJlbG9hZCgpO30pOwoKICAgICAgICAgICAgLy8g5Y+z5L6n5rua5Yqo5p2hCiAgICAgICAgICAgIC8qKiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGxldCByaWdodFNpZGVIZWlnaHQgPSAwOwogICAgICAgICAgICAgICAgbGV0IHBhZ2VIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7CiAgICAgICAgICAgICAgICByaWdodFNpZGVIZWlnaHQgKz0gZ2V0SGVpZ2h0KCQoJy5hbGlnbi1pdGVtcy1zdHJldGNoLmdyb3VwX2l0ZW0nKS5wYXJlbnQoKSk7CiAgICAgICAgICAgICAgICByaWdodFNpZGVIZWlnaHQgKz0gZ2V0SGVpZ2h0KCQoIiNhc2lkZVByb2ZpbGUiKSk7CiAgICAgICAgICAgICAgICByaWdodFNpZGVIZWlnaHQgKz0gZ2V0SGVpZ2h0KCQoIiNhc2lkZVNlYXJjaEFydGljbGUiKSk7CiAgICAgICAgICAgICAgICByaWdodFNpZGVIZWlnaHQgKz0gZ2V0SGVpZ2h0KCQoIiNhc2lkZU5ld0FydGljbGUiKSk7CiAgICAgICAgICAgICAgICByaWdodFNpZGVIZWlnaHQgKz0gZ2V0SGVpZ2h0KCQoIiNhc2lkZUhvdEFydGljbGUiKSk7CiAgICAgICAgICAgICAgICByaWdodFNpZGVIZWlnaHQgKz0gZ2V0SGVpZ2h0KCQoIiNhc2lkZU5ld0NvbW1lbnRzIikpOwogICAgICAgICAgICAgICAgcmlnaHRTaWRlSGVpZ2h0ICs9IGdldEhlaWdodCgkKCIjYXNpZGVDYXRlZ29yeSIpKTsKICAgICAgICAgICAgICAgIHJpZ2h0U2lkZUhlaWdodCArPSBnZXRIZWlnaHQoJCgiI2FzaWRlQXJjaGl2ZSIpKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoIlJpZ2h0IHNpZGUgdG90YWwgaGVpZ2h0OiAiICsgcmlnaHRTaWRlSGVpZ2h0KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoIlBhZ2UgaGVpZ2h0OiAiICsgcGFnZUhlaWdodCk7CiAgICAgICAgICAgICAgICBpZiAocmlnaHRTaWRlSGVpZ2h0ID4gcGFnZUhlaWdodCkgewogICAgICAgICAgICAgICAgICAgICQoJyNyZWNvbW1lbmQtcmlnaHQnKS5jc3MoIm92ZXJmbG93IiwgInNjcm9sbCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAxNTAwKTsgKi8KICAgICAgICB9IGVsc2UgaWYgKG51bSA9PT0gNykgewogICAgICAgICAgICAkKCIubWVfciIpWzFdLnJlbW92ZSgpOwogICAgICAgIH0gZWxzZSBpZiAobnVtID09PSA4KSB7CiAgICAgICAgICAgIC8qICQoIi5hcnRpY2xlLWJhci10b3AiKS5hcHBlbmQoIjxicj4iKTsKICAgICAgICAgICAgJCgiLmFydGljbGUtYmFyLXRvcCIpLmFwcGVuZCgkKCIuYXNpZGUtYm94LWZvb3RlckNsYXNzaWZ5IikuY2hpbGRyZW4oImRkIikuaHRtbCgpKTsKICAgICAgICAgICAgJCgiZGwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkgewogICAgICAgICAgICAgICAgdmFyIGtleSA9ICQodGhpcykuY2hpbGRyZW4oImR0Iik7CiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSAkKHRoaXMpLmNoaWxkcmVuKCJkZCIpLmNoaWxkcmVuKCJzcGFuIik7CiAgICAgICAgICAgICAgICBpZiAoa2V5Lmh0bWwoKS5pbmRleE9mKCLljp/liJsiKSAhPSAtMSkgewogICAgICAgICAgICAgICAgICAgIGtleSA9ICQodGhpcykuY2hpbGRyZW4oImR0IikuY2hpbGRyZW4oImEiKQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gJCh0aGlzKS5jaGlsZHJlbigiZGQiKS5jaGlsZHJlbigiYSIpLmNoaWxkcmVuKCJzcGFuIik7CiAgICAgICAgICAgICAgICAgICAgYWRkSW5mbyhrZXksIHZhbHVlKTsKICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgaWYgKHZhbHVlLmh0bWwoKSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICBhZGRJbmZvKGtleSwgdmFsdWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ICk7CiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZEluZm8oa2V5LCB2YWx1ZSkgewogICAgICAgICAgICAgICAgdmFyIGJpbmQgPSBrZXkuaHRtbCgpICsgIiZuYnNwOyIgKyB2YWx1ZS5odG1sKCkgKyAiJm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICQoIi5hcnRpY2xlLWJhci10b3AiKS5hcHBlbmQoYmluZCArICIgIik7CiAgICAgICAgICAgIH0gKi8KICAgICAgICAgICAgJCgiLmJsb2dfY29udGFpbmVyX2FzaWRlIikucmVtb3ZlKCk7CgogICAgICAgICAgICAvLyDmoIfpopjmtojmga/mj5DphpLljrvpmaQKICAgICAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQudGl0bGUucmVwbGFjZSgvXlwoLio/XCkvZywgIiIpOwogICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRpdGxlOwogICAgICAgICAgICAvLyDor4TorrrlpI3liLbmjInpkq4KICAgICAgICAgICAgJCgnLmNvbW1lbnQtYm94JykucHJlcGVuZCgnPGJ1dHRvbiBjbGFzcz0iY29tbWVudC1oaWRkZW4tdGV4dCIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+Q09QWSBCVVRUT048L2J1dHRvbj4nKTsKICAgICAgICAgICAgJCgnLm5ldy1vcHQtYm94Lm5ldy1vcHQtYm94LWJnJykucHJlcGVuZCgnPGEgY2xhc3M9ImJ0biBidG4tcmVwb3J0IGJ0bi1jb3B5IiBvbmNsaWNrPSJqYXZhc2NyaXB0OiQoXCcuY29tbWVudC1oaWRkZW4tdGV4dFwnKS5hdHRyKFwnZGF0YS1jbGlwYm9hcmQtdGV4dFwnLCQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZChcJy5uZXctY29tbWVudFwnKS50ZXh0KCkpIj7lpI3liLbor4Torro8L2E+PHNwYW4gY2xhc3M9ImJ0bi1iYXIiPjwvc3Bhbj4nKTsKICAgICAgICAgICAgJCgnLmJ0bi1jb3B5JykuY2xpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgY2xpcGJvYXJkID0gbmV3IENsaXBib2FyZEpTKCcuY29tbWVudC1oaWRkZW4tdGV4dCcpOwogICAgICAgICAgICAgICAgY2xpcGJvYXJkLm9uKCdzdWNjZXNzJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnQWN0aW9uOicsIGUuYWN0aW9uKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ1RleHQ6JywgZS50ZXh0KTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ1RyaWdnZXI6JywgZS50cmlnZ2VyKTsKICAgICAgICAgICAgICAgICAgICBlLmNsZWFyU2VsZWN0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgJCgnLmJ0bi1jb3B5JykuaHRtbCgn5oiQ5YqfJyk7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmJ0bi1jb3B5JykuaHRtbCgn5aSN5Yi26K+E6K66Jyk7CiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNsaXBib2FyZC5vbignZXJyb3InLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQWN0aW9uOicsIGUuYWN0aW9uKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUcmlnZ2VyOicsIGUudHJpZ2dlcik7CiAgICAgICAgICAgICAgICAgICAgJCgnLmJ0bi1jb3B5JykuaHRtbCgn5aSx6LSl77yM6K+35omL5Yqo5aSN5Yi2Jyk7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmJ0bi1jb3B5JykuaHRtbCgn5aSN5Yi26K+E6K66Jyk7CiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICQoIi5jb21tZW50LWhpZGRlbi10ZXh0IikuY2xpY2soKTsKICAgICAgICAgICAgICAgIGNsaXBib2FyZC5kZXN0cm95KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAobnVtID09PSA5KSB7CiAgICAgICAgICAgIC8vIOWIoOmZpENTRE4gTE9HT+aCrOa1ruWQjueahOS6jOe7tOeggQogICAgICAgICAgICAkKCIudG9vbGJhci1zdWJNZW51ID4gaW1nIikucGFyZW50KCkucmVtb3ZlKCk7CiAgICAgICAgfQogICAgfSwgMTAwKTsKICAgIE5Qcm9ncmVzcy5pbmMoKTsKfQoKLy8g6YWN572u5o6n5Yi257G7CmNsYXNzIENvbmZpZyB7CiAgICBnZXQoa2V5LCB2YWx1ZSkgewogICAgICAgIHZhciBjb29raWUgPSAkLmNvb2tpZShrZXkpOwogICAgICAgIGlmIChjb29raWUgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIG5ldyBDb25maWcoKS5zZXQoa2V5LCB2YWx1ZSk7CiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoIlJlbmV3IGtleTogIiArIGtleSArICIgOiAiICsgdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUuZGVidWcoIlJlYWQga2V5OiAiICsga2V5ICsgIiA6ICIgKyBjb29raWUpOwogICAgICAgIGlmIChjb29raWUgPT09ICJ0cnVlIikgeyByZXR1cm4gdHJ1ZTsgfQogICAgICAgIGlmIChjb29raWUgPT09ICJmYWxzZSIpIHsgcmV0dXJuIGZhbHNlOyB9CiAgICAgICAgcmV0dXJuIGNvb2tpZTsKICAgIH0KCiAgICBzZXQoc2V0S2V5LCBzZXRWYWx1ZSkgewogICAgICAgICQuY29va2llKHNldEtleSwgc2V0VmFsdWUsIHsKICAgICAgICAgICAgcGF0aDogJy8nLAogICAgICAgICAgICBleHBpcmVzOiAzNjUKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmRlYnVnKCJLZXkgc2V0OiAiICsgc2V0S2V5ICsgIiA6ICIgKyBzZXRWYWx1ZSk7CiAgICB9CgogICAgbGlzdGVuQnV0dG9uKGVsZW1lbnQsIGxpc3RlbktleSwgdHJ1ZUFjdGlvbiwgZmFsc2VBY3Rpb24pIHsKICAgICAgICAkKGVsZW1lbnQpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IHN0YXR1cyA9IG5ldyBDb25maWcoKS5nZXQobGlzdGVuS2V5LCB0cnVlKTsKICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygiU3RhdHVzOiAiICsgc3RhdHVzKTsKICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gInRydWUiIHx8IHN0YXR1cykgewogICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygiS2V5IHNldDogIiArIGxpc3RlbktleSArICIgOjogIiArIGZhbHNlKTsKICAgICAgICAgICAgICAgIG5ldyBDb25maWcoKS5zZXQobGlzdGVuS2V5LCBmYWxzZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCJLZXkgc2V0OiAiICsgbGlzdGVuS2V5ICsgIiA6OiAiICsgdHJ1ZSk7CiAgICAgICAgICAgICAgICBuZXcgQ29uZmlnKCkuc2V0KGxpc3RlbktleSwgdHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KCiAgICBsaXN0ZW5CdXR0b25BbmRBY3Rpb24oZWxlbWVudCwgbGlzdGVuS2V5LCB0cnVlQWN0aW9uLCBmYWxzZUFjdGlvbikgewogICAgICAgICQoZWxlbWVudCkuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgc3RhdHVzID0gbmV3IENvbmZpZygpLmdldChsaXN0ZW5LZXksIHRydWUpOwogICAgICAgICAgICBjb25zb2xlLmRlYnVnKCJTdGF0dXM6ICIgKyBzdGF0dXMpOwogICAgICAgICAgICBpZiAoc3RhdHVzID09PSAidHJ1ZSIgfHwgc3RhdHVzKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCJLZXkgc2V0OiAiICsgbGlzdGVuS2V5ICsgIiA6OiAiICsgZmFsc2UpOwogICAgICAgICAgICAgICAgbmV3IENvbmZpZygpLnNldChsaXN0ZW5LZXksIGZhbHNlKTsKICAgICAgICAgICAgICAgIGZhbHNlQWN0aW9uKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCJLZXkgc2V0OiAiICsgbGlzdGVuS2V5ICsgIiA6OiAiICsgdHJ1ZSk7CiAgICAgICAgICAgICAgICBuZXcgQ29uZmlnKCkuc2V0KGxpc3RlbktleSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB0cnVlQWN0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KfQoKZnVuY3Rpb24gc2hvd1RpcHMoKSB7Cgl2YXIgY29uZmlnID0gewoJCWNvbnRlbnQ6ICLmrKLov47kvb/nlKggQ1NETkdyZWVuZXLvvIznu7/ljJborr7lrprmjInpkq7lnKjov5nph4zvvIE8YnI+PGEgaHJlZj0namF2YXNjcmlwdDokKFwiLnRyaXBzXCIpLnJlbW92ZSgpOyc+5aW955qE77yM5Lul5ZCO5LiN5YaN5o+Q56S65oiRPC9hPiIsCgkJdHlwZTogImh0bWwiLAoJCWFsaWduVG86IFsiYm90dG9tIiwgImxlZnQiXSwKCQl0cmlnZ2VyOiAic2hvdyIsCgkJaXNjbG9zZTogZmFsc2UsCgkJY29sb3I6IFsiI0IyRTI4MSIsICIjQjJFMjgxIl0KCX07CgkkKCIjZ3JlZW5lclNldHRpbmdzIikuc2hvd1RpcHMoY29uZmlnKTsKfQoKZnVuY3Rpb24gZ2V0SGVpZ2h0KGVsZW1lbnQpIHsKICAgIGxldCBvdXRlckhlaWdodCA9IGVsZW1lbnQub3V0ZXJIZWlnaHQoKTsKICAgIGlmIChvdXRlckhlaWdodCA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiAwOwogICAgfQogICAgcmV0dXJuIG91dGVySGVpZ2h0Owp9Cg==","requires":[{"meta":{"name":"jquery.cookie.js","url":"https://cdn.jsdelivr.net/npm/jquery.cookie/jquery.cookie.js","ts":1615031285408,"mimetype":"text/javascript"},"source":"LyohCiAqIGpRdWVyeSBDb29raWUgUGx1Z2luIHYxLjQuMQogKiBodHRwczovL2dpdGh1Yi5jb20vY2FyaGFydGwvanF1ZXJ5LWNvb2tpZQogKgogKiBDb3B5cmlnaHQgMjAxMyBLbGF1cyBIYXJ0bAogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKICovCihmdW5jdGlvbiAoZmFjdG9yeSkgewoJaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewoJCS8vIEFNRAoJCWRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTsKCX0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CgkJLy8gQ29tbW9uSlMKCQlmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTsKCX0gZWxzZSB7CgkJLy8gQnJvd3NlciBnbG9iYWxzCgkJZmFjdG9yeShqUXVlcnkpOwoJfQp9KGZ1bmN0aW9uICgkKSB7CgoJdmFyIHBsdXNlcyA9IC9cKy9nOwoKCWZ1bmN0aW9uIGVuY29kZShzKSB7CgkJcmV0dXJuIGNvbmZpZy5yYXcgPyBzIDogZW5jb2RlVVJJQ29tcG9uZW50KHMpOwoJfQoKCWZ1bmN0aW9uIGRlY29kZShzKSB7CgkJcmV0dXJuIGNvbmZpZy5yYXcgPyBzIDogZGVjb2RlVVJJQ29tcG9uZW50KHMpOwoJfQoKCWZ1bmN0aW9uIHN0cmluZ2lmeUNvb2tpZVZhbHVlKHZhbHVlKSB7CgkJcmV0dXJuIGVuY29kZShjb25maWcuanNvbiA/IEpTT04uc3RyaW5naWZ5KHZhbHVlKSA6IFN0cmluZyh2YWx1ZSkpOwoJfQoKCWZ1bmN0aW9uIHBhcnNlQ29va2llVmFsdWUocykgewoJCWlmIChzLmluZGV4T2YoJyInKSA9PT0gMCkgewoJCQkvLyBUaGlzIGlzIGEgcXVvdGVkIGNvb2tpZSBhcyBhY2NvcmRpbmcgdG8gUkZDMjA2OCwgdW5lc2NhcGUuLi4KCQkJcyA9IHMuc2xpY2UoMSwgLTEpLnJlcGxhY2UoL1xcIi9nLCAnIicpLnJlcGxhY2UoL1xcXFwvZywgJ1xcJyk7CgkJfQoKCQl0cnkgewoJCQkvLyBSZXBsYWNlIHNlcnZlci1zaWRlIHdyaXR0ZW4gcGx1c2VzIHdpdGggc3BhY2VzLgoJCQkvLyBJZiB3ZSBjYW4ndCBkZWNvZGUgdGhlIGNvb2tpZSwgaWdub3JlIGl0LCBpdCdzIHVudXNhYmxlLgoJCQkvLyBJZiB3ZSBjYW4ndCBwYXJzZSB0aGUgY29va2llLCBpZ25vcmUgaXQsIGl0J3MgdW51c2FibGUuCgkJCXMgPSBkZWNvZGVVUklDb21wb25lbnQocy5yZXBsYWNlKHBsdXNlcywgJyAnKSk7CgkJCXJldHVybiBjb25maWcuanNvbiA/IEpTT04ucGFyc2UocykgOiBzOwoJCX0gY2F0Y2goZSkge30KCX0KCglmdW5jdGlvbiByZWFkKHMsIGNvbnZlcnRlcikgewoJCXZhciB2YWx1ZSA9IGNvbmZpZy5yYXcgPyBzIDogcGFyc2VDb29raWVWYWx1ZShzKTsKCQlyZXR1cm4gJC5pc0Z1bmN0aW9uKGNvbnZlcnRlcikgPyBjb252ZXJ0ZXIodmFsdWUpIDogdmFsdWU7Cgl9CgoJdmFyIGNvbmZpZyA9ICQuY29va2llID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIG9wdGlvbnMpIHsKCgkJLy8gV3JpdGUKCgkJaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgISQuaXNGdW5jdGlvbih2YWx1ZSkpIHsKCQkJb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBjb25maWcuZGVmYXVsdHMsIG9wdGlvbnMpOwoKCQkJaWYgKHR5cGVvZiBvcHRpb25zLmV4cGlyZXMgPT09ICdudW1iZXInKSB7CgkJCQl2YXIgZGF5cyA9IG9wdGlvbnMuZXhwaXJlcywgdCA9IG9wdGlvbnMuZXhwaXJlcyA9IG5ldyBEYXRlKCk7CgkJCQl0LnNldFRpbWUoK3QgKyBkYXlzICogODY0ZSs1KTsKCQkJfQoKCQkJcmV0dXJuIChkb2N1bWVudC5jb29raWUgPSBbCgkJCQllbmNvZGUoa2V5KSwgJz0nLCBzdHJpbmdpZnlDb29raWVWYWx1ZSh2YWx1ZSksCgkJCQlvcHRpb25zLmV4cGlyZXMgPyAnOyBleHBpcmVzPScgKyBvcHRpb25zLmV4cGlyZXMudG9VVENTdHJpbmcoKSA6ICcnLCAvLyB1c2UgZXhwaXJlcyBhdHRyaWJ1dGUsIG1heC1hZ2UgaXMgbm90IHN1cHBvcnRlZCBieSBJRQoJCQkJb3B0aW9ucy5wYXRoICAgID8gJzsgcGF0aD0nICsgb3B0aW9ucy5wYXRoIDogJycsCgkJCQlvcHRpb25zLmRvbWFpbiAgPyAnOyBkb21haW49JyArIG9wdGlvbnMuZG9tYWluIDogJycsCgkJCQlvcHRpb25zLnNlY3VyZSAgPyAnOyBzZWN1cmUnIDogJycKCQkJXS5qb2luKCcnKSk7CgkJfQoKCQkvLyBSZWFkCgoJCXZhciByZXN1bHQgPSBrZXkgPyB1bmRlZmluZWQgOiB7fTsKCgkJLy8gVG8gcHJldmVudCB0aGUgZm9yIGxvb3AgaW4gdGhlIGZpcnN0IHBsYWNlIGFzc2lnbiBhbiBlbXB0eSBhcnJheQoJCS8vIGluIGNhc2UgdGhlcmUgYXJlIG5vIGNvb2tpZXMgYXQgYWxsLiBBbHNvIHByZXZlbnRzIG9kZCByZXN1bHQgd2hlbgoJCS8vIGNhbGxpbmcgJC5jb29raWUoKS4KCQl2YXIgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZSA/IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKSA6IFtdOwoKCQlmb3IgKHZhciBpID0gMCwgbCA9IGNvb2tpZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CgkJCXZhciBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTsKCQkJdmFyIG5hbWUgPSBkZWNvZGUocGFydHMuc2hpZnQoKSk7CgkJCXZhciBjb29raWUgPSBwYXJ0cy5qb2luKCc9Jyk7CgoJCQlpZiAoa2V5ICYmIGtleSA9PT0gbmFtZSkgewoJCQkJLy8gSWYgc2Vjb25kIGFyZ3VtZW50ICh2YWx1ZSkgaXMgYSBmdW5jdGlvbiBpdCdzIGEgY29udmVydGVyLi4uCgkJCQlyZXN1bHQgPSByZWFkKGNvb2tpZSwgdmFsdWUpOwoJCQkJYnJlYWs7CgkJCX0KCgkJCS8vIFByZXZlbnQgc3RvcmluZyBhIGNvb2tpZSB0aGF0IHdlIGNvdWxkbid0IGRlY29kZS4KCQkJaWYgKCFrZXkgJiYgKGNvb2tpZSA9IHJlYWQoY29va2llKSkgIT09IHVuZGVmaW5lZCkgewoJCQkJcmVzdWx0W25hbWVdID0gY29va2llOwoJCQl9CgkJfQoKCQlyZXR1cm4gcmVzdWx0OwoJfTsKCgljb25maWcuZGVmYXVsdHMgPSB7fTsKCgkkLnJlbW92ZUNvb2tpZSA9IGZ1bmN0aW9uIChrZXksIG9wdGlvbnMpIHsKCQlpZiAoJC5jb29raWUoa2V5KSA9PT0gdW5kZWZpbmVkKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCS8vIE11c3Qgbm90IGFsdGVyIG9wdGlvbnMsIHRodXMgZXh0ZW5kaW5nIGEgZnJlc2ggb2JqZWN0Li4uCgkJJC5jb29raWUoa2V5LCAnJywgJC5leHRlbmQoe30sIG9wdGlvbnMsIHsgZXhwaXJlczogLTEgfSkpOwoJCXJldHVybiAhJC5jb29raWUoa2V5KTsKCX07Cgp9KSk7Cg=="},{"meta":{"name":"nprogress.js","url":"https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js","ts":1615031285411,"mimetype":"text/javascript"},"source":"LyogTlByb2dyZXNzLCAoYykgMjAxMywgMjAxNCBSaWNvIFN0YS4gQ3J1eiAtIGh0dHA6Ly9yaWNvc3RhY3J1ei5jb20vbnByb2dyZXNzCiAqIEBsaWNlbnNlIE1JVCAqLwoKOyhmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7CgogIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHsKICAgIGRlZmluZShmYWN0b3J5KTsKICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykgewogICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7CiAgfSBlbHNlIHsKICAgIHJvb3QuTlByb2dyZXNzID0gZmFjdG9yeSgpOwogIH0KCn0pKHRoaXMsIGZ1bmN0aW9uKCkgewogIHZhciBOUHJvZ3Jlc3MgPSB7fTsKCiAgTlByb2dyZXNzLnZlcnNpb24gPSAnMC4yLjAnOwoKICB2YXIgU2V0dGluZ3MgPSBOUHJvZ3Jlc3Muc2V0dGluZ3MgPSB7CiAgICBtaW5pbXVtOiAwLjA4LAogICAgZWFzaW5nOiAnZWFzZScsCiAgICBwb3NpdGlvblVzaW5nOiAnJywKICAgIHNwZWVkOiAyMDAsCiAgICB0cmlja2xlOiB0cnVlLAogICAgdHJpY2tsZVJhdGU6IDAuMDIsCiAgICB0cmlja2xlU3BlZWQ6IDgwMCwKICAgIHNob3dTcGlubmVyOiB0cnVlLAogICAgYmFyU2VsZWN0b3I6ICdbcm9sZT0iYmFyIl0nLAogICAgc3Bpbm5lclNlbGVjdG9yOiAnW3JvbGU9InNwaW5uZXIiXScsCiAgICBwYXJlbnQ6ICdib2R5JywKICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz0iYmFyIiByb2xlPSJiYXIiPjxkaXYgY2xhc3M9InBlZyI+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0ic3Bpbm5lciIgcm9sZT0ic3Bpbm5lciI+PGRpdiBjbGFzcz0ic3Bpbm5lci1pY29uIj48L2Rpdj48L2Rpdj4nCiAgfTsKCiAgLyoqCiAgICogVXBkYXRlcyBjb25maWd1cmF0aW9uLgogICAqCiAgICogICAgIE5Qcm9ncmVzcy5jb25maWd1cmUoewogICAqICAgICAgIG1pbmltdW06IDAuMQogICAqICAgICB9KTsKICAgKi8KICBOUHJvZ3Jlc3MuY29uZmlndXJlID0gZnVuY3Rpb24ob3B0aW9ucykgewogICAgdmFyIGtleSwgdmFsdWU7CiAgICBmb3IgKGtleSBpbiBvcHRpb25zKSB7CiAgICAgIHZhbHVlID0gb3B0aW9uc1trZXldOwogICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmhhc093blByb3BlcnR5KGtleSkpIFNldHRpbmdzW2tleV0gPSB2YWx1ZTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwoKICAvKioKICAgKiBMYXN0IG51bWJlci4KICAgKi8KCiAgTlByb2dyZXNzLnN0YXR1cyA9IG51bGw7CgogIC8qKgogICAqIFNldHMgdGhlIHByb2dyZXNzIGJhciBzdGF0dXMsIHdoZXJlIGBuYCBpcyBhIG51bWJlciBmcm9tIGAwLjBgIHRvIGAxLjBgLgogICAqCiAgICogICAgIE5Qcm9ncmVzcy5zZXQoMC40KTsKICAgKiAgICAgTlByb2dyZXNzLnNldCgxLjApOwogICAqLwoKICBOUHJvZ3Jlc3Muc2V0ID0gZnVuY3Rpb24obikgewogICAgdmFyIHN0YXJ0ZWQgPSBOUHJvZ3Jlc3MuaXNTdGFydGVkKCk7CgogICAgbiA9IGNsYW1wKG4sIFNldHRpbmdzLm1pbmltdW0sIDEpOwogICAgTlByb2dyZXNzLnN0YXR1cyA9IChuID09PSAxID8gbnVsbCA6IG4pOwoKICAgIHZhciBwcm9ncmVzcyA9IE5Qcm9ncmVzcy5yZW5kZXIoIXN0YXJ0ZWQpLAogICAgICAgIGJhciAgICAgID0gcHJvZ3Jlc3MucXVlcnlTZWxlY3RvcihTZXR0aW5ncy5iYXJTZWxlY3RvciksCiAgICAgICAgc3BlZWQgICAgPSBTZXR0aW5ncy5zcGVlZCwKICAgICAgICBlYXNlICAgICA9IFNldHRpbmdzLmVhc2luZzsKCiAgICBwcm9ncmVzcy5vZmZzZXRXaWR0aDsgLyogUmVwYWludCAqLwoKICAgIHF1ZXVlKGZ1bmN0aW9uKG5leHQpIHsKICAgICAgLy8gU2V0IHBvc2l0aW9uVXNpbmcgaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBzZXQKICAgICAgaWYgKFNldHRpbmdzLnBvc2l0aW9uVXNpbmcgPT09ICcnKSBTZXR0aW5ncy5wb3NpdGlvblVzaW5nID0gTlByb2dyZXNzLmdldFBvc2l0aW9uaW5nQ1NTKCk7CgogICAgICAvLyBBZGQgdHJhbnNpdGlvbgogICAgICBjc3MoYmFyLCBiYXJQb3NpdGlvbkNTUyhuLCBzcGVlZCwgZWFzZSkpOwoKICAgICAgaWYgKG4gPT09IDEpIHsKICAgICAgICAvLyBGYWRlIG91dAogICAgICAgIGNzcyhwcm9ncmVzcywgeyAKICAgICAgICAgIHRyYW5zaXRpb246ICdub25lJywgCiAgICAgICAgICBvcGFjaXR5OiAxIAogICAgICAgIH0pOwogICAgICAgIHByb2dyZXNzLm9mZnNldFdpZHRoOyAvKiBSZXBhaW50ICovCgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBjc3MocHJvZ3Jlc3MsIHsgCiAgICAgICAgICAgIHRyYW5zaXRpb246ICdhbGwgJyArIHNwZWVkICsgJ21zIGxpbmVhcicsIAogICAgICAgICAgICBvcGFjaXR5OiAwIAogICAgICAgICAgfSk7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBOUHJvZ3Jlc3MucmVtb3ZlKCk7CiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgIH0sIHNwZWVkKTsKICAgICAgICB9LCBzcGVlZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VGltZW91dChuZXh0LCBzcGVlZCk7CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiB0aGlzOwogIH07CgogIE5Qcm9ncmVzcy5pc1N0YXJ0ZWQgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0eXBlb2YgTlByb2dyZXNzLnN0YXR1cyA9PT0gJ251bWJlcic7CiAgfTsKCiAgLyoqCiAgICogU2hvd3MgdGhlIHByb2dyZXNzIGJhci4KICAgKiBUaGlzIGlzIHRoZSBzYW1lIGFzIHNldHRpbmcgdGhlIHN0YXR1cyB0byAwJSwgZXhjZXB0IHRoYXQgaXQgZG9lc24ndCBnbyBiYWNrd2FyZHMuCiAgICoKICAgKiAgICAgTlByb2dyZXNzLnN0YXJ0KCk7CiAgICoKICAgKi8KICBOUHJvZ3Jlc3Muc3RhcnQgPSBmdW5jdGlvbigpIHsKICAgIGlmICghTlByb2dyZXNzLnN0YXR1cykgTlByb2dyZXNzLnNldCgwKTsKCiAgICB2YXIgd29yayA9IGZ1bmN0aW9uKCkgewogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGlmICghTlByb2dyZXNzLnN0YXR1cykgcmV0dXJuOwogICAgICAgIE5Qcm9ncmVzcy50cmlja2xlKCk7CiAgICAgICAgd29yaygpOwogICAgICB9LCBTZXR0aW5ncy50cmlja2xlU3BlZWQpOwogICAgfTsKCiAgICBpZiAoU2V0dGluZ3MudHJpY2tsZSkgd29yaygpOwoKICAgIHJldHVybiB0aGlzOwogIH07CgogIC8qKgogICAqIEhpZGVzIHRoZSBwcm9ncmVzcyBiYXIuCiAgICogVGhpcyBpcyB0aGUgKnNvcnQgb2YqIHRoZSBzYW1lIGFzIHNldHRpbmcgdGhlIHN0YXR1cyB0byAxMDAlLCB3aXRoIHRoZQogICAqIGRpZmZlcmVuY2UgYmVpbmcgYGRvbmUoKWAgbWFrZXMgc29tZSBwbGFjZWJvIGVmZmVjdCBvZiBzb21lIHJlYWxpc3RpYyBtb3Rpb24uCiAgICoKICAgKiAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgKgogICAqIElmIGB0cnVlYCBpcyBwYXNzZWQsIGl0IHdpbGwgc2hvdyB0aGUgcHJvZ3Jlc3MgYmFyIGV2ZW4gaWYgaXRzIGhpZGRlbi4KICAgKgogICAqICAgICBOUHJvZ3Jlc3MuZG9uZSh0cnVlKTsKICAgKi8KCiAgTlByb2dyZXNzLmRvbmUgPSBmdW5jdGlvbihmb3JjZSkgewogICAgaWYgKCFmb3JjZSAmJiAhTlByb2dyZXNzLnN0YXR1cykgcmV0dXJuIHRoaXM7CgogICAgcmV0dXJuIE5Qcm9ncmVzcy5pbmMoMC4zICsgMC41ICogTWF0aC5yYW5kb20oKSkuc2V0KDEpOwogIH07CgogIC8qKgogICAqIEluY3JlbWVudHMgYnkgYSByYW5kb20gYW1vdW50LgogICAqLwoKICBOUHJvZ3Jlc3MuaW5jID0gZnVuY3Rpb24oYW1vdW50KSB7CiAgICB2YXIgbiA9IE5Qcm9ncmVzcy5zdGF0dXM7CgogICAgaWYgKCFuKSB7CiAgICAgIHJldHVybiBOUHJvZ3Jlc3Muc3RhcnQoKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmICh0eXBlb2YgYW1vdW50ICE9PSAnbnVtYmVyJykgewogICAgICAgIGFtb3VudCA9ICgxIC0gbikgKiBjbGFtcChNYXRoLnJhbmRvbSgpICogbiwgMC4xLCAwLjk1KTsKICAgICAgfQoKICAgICAgbiA9IGNsYW1wKG4gKyBhbW91bnQsIDAsIDAuOTk0KTsKICAgICAgcmV0dXJuIE5Qcm9ncmVzcy5zZXQobik7CiAgICB9CiAgfTsKCiAgTlByb2dyZXNzLnRyaWNrbGUgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiBOUHJvZ3Jlc3MuaW5jKE1hdGgucmFuZG9tKCkgKiBTZXR0aW5ncy50cmlja2xlUmF0ZSk7CiAgfTsKCiAgLyoqCiAgICogV2FpdHMgZm9yIGFsbCBzdXBwbGllZCBqUXVlcnkgcHJvbWlzZXMgYW5kCiAgICogaW5jcmVhc2VzIHRoZSBwcm9ncmVzcyBhcyB0aGUgcHJvbWlzZXMgcmVzb2x2ZS4KICAgKgogICAqIEBwYXJhbSAkcHJvbWlzZSBqUVVlcnkgUHJvbWlzZQogICAqLwogIChmdW5jdGlvbigpIHsKICAgIHZhciBpbml0aWFsID0gMCwgY3VycmVudCA9IDA7CgogICAgTlByb2dyZXNzLnByb21pc2UgPSBmdW5jdGlvbigkcHJvbWlzZSkgewogICAgICBpZiAoISRwcm9taXNlIHx8ICRwcm9taXNlLnN0YXRlKCkgPT09ICJyZXNvbHZlZCIpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgaWYgKGN1cnJlbnQgPT09IDApIHsKICAgICAgICBOUHJvZ3Jlc3Muc3RhcnQoKTsKICAgICAgfQoKICAgICAgaW5pdGlhbCsrOwogICAgICBjdXJyZW50Kys7CgogICAgICAkcHJvbWlzZS5hbHdheXMoZnVuY3Rpb24oKSB7CiAgICAgICAgY3VycmVudC0tOwogICAgICAgIGlmIChjdXJyZW50ID09PSAwKSB7CiAgICAgICAgICAgIGluaXRpYWwgPSAwOwogICAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIE5Qcm9ncmVzcy5zZXQoKGluaXRpYWwgLSBjdXJyZW50KSAvIGluaXRpYWwpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogIH0pKCk7CgogIC8qKgogICAqIChJbnRlcm5hbCkgcmVuZGVycyB0aGUgcHJvZ3Jlc3MgYmFyIG1hcmt1cCBiYXNlZCBvbiB0aGUgYHRlbXBsYXRlYAogICAqIHNldHRpbmcuCiAgICovCgogIE5Qcm9ncmVzcy5yZW5kZXIgPSBmdW5jdGlvbihmcm9tU3RhcnQpIHsKICAgIGlmIChOUHJvZ3Jlc3MuaXNSZW5kZXJlZCgpKSByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25wcm9ncmVzcycpOwoKICAgIGFkZENsYXNzKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgJ25wcm9ncmVzcy1idXN5Jyk7CiAgICAKICAgIHZhciBwcm9ncmVzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgcHJvZ3Jlc3MuaWQgPSAnbnByb2dyZXNzJzsKICAgIHByb2dyZXNzLmlubmVySFRNTCA9IFNldHRpbmdzLnRlbXBsYXRlOwoKICAgIHZhciBiYXIgICAgICA9IHByb2dyZXNzLnF1ZXJ5U2VsZWN0b3IoU2V0dGluZ3MuYmFyU2VsZWN0b3IpLAogICAgICAgIHBlcmMgICAgID0gZnJvbVN0YXJ0ID8gJy0xMDAnIDogdG9CYXJQZXJjKE5Qcm9ncmVzcy5zdGF0dXMgfHwgMCksCiAgICAgICAgcGFyZW50ICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFNldHRpbmdzLnBhcmVudCksCiAgICAgICAgc3Bpbm5lcjsKICAgIAogICAgY3NzKGJhciwgewogICAgICB0cmFuc2l0aW9uOiAnYWxsIDAgbGluZWFyJywKICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoJyArIHBlcmMgKyAnJSwwLDApJwogICAgfSk7CgogICAgaWYgKCFTZXR0aW5ncy5zaG93U3Bpbm5lcikgewogICAgICBzcGlubmVyID0gcHJvZ3Jlc3MucXVlcnlTZWxlY3RvcihTZXR0aW5ncy5zcGlubmVyU2VsZWN0b3IpOwogICAgICBzcGlubmVyICYmIHJlbW92ZUVsZW1lbnQoc3Bpbm5lcik7CiAgICB9CgogICAgaWYgKHBhcmVudCAhPSBkb2N1bWVudC5ib2R5KSB7CiAgICAgIGFkZENsYXNzKHBhcmVudCwgJ25wcm9ncmVzcy1jdXN0b20tcGFyZW50Jyk7CiAgICB9CgogICAgcGFyZW50LmFwcGVuZENoaWxkKHByb2dyZXNzKTsKICAgIHJldHVybiBwcm9ncmVzczsKICB9OwoKICAvKioKICAgKiBSZW1vdmVzIHRoZSBlbGVtZW50LiBPcHBvc2l0ZSBvZiByZW5kZXIoKS4KICAgKi8KCiAgTlByb2dyZXNzLnJlbW92ZSA9IGZ1bmN0aW9uKCkgewogICAgcmVtb3ZlQ2xhc3MoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAnbnByb2dyZXNzLWJ1c3knKTsKICAgIHJlbW92ZUNsYXNzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoU2V0dGluZ3MucGFyZW50KSwgJ25wcm9ncmVzcy1jdXN0b20tcGFyZW50Jyk7CiAgICB2YXIgcHJvZ3Jlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbnByb2dyZXNzJyk7CiAgICBwcm9ncmVzcyAmJiByZW1vdmVFbGVtZW50KHByb2dyZXNzKTsKICB9OwoKICAvKioKICAgKiBDaGVja3MgaWYgdGhlIHByb2dyZXNzIGJhciBpcyByZW5kZXJlZC4KICAgKi8KCiAgTlByb2dyZXNzLmlzUmVuZGVyZWQgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiAhIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCducHJvZ3Jlc3MnKTsKICB9OwoKICAvKioKICAgKiBEZXRlcm1pbmUgd2hpY2ggcG9zaXRpb25pbmcgQ1NTIHJ1bGUgdG8gdXNlLgogICAqLwoKICBOUHJvZ3Jlc3MuZ2V0UG9zaXRpb25pbmdDU1MgPSBmdW5jdGlvbigpIHsKICAgIC8vIFNuaWZmIG9uIGRvY3VtZW50LmJvZHkuc3R5bGUKICAgIHZhciBib2R5U3R5bGUgPSBkb2N1bWVudC5ib2R5LnN0eWxlOwoKICAgIC8vIFNuaWZmIHByZWZpeGVzCiAgICB2YXIgdmVuZG9yUHJlZml4ID0gKCdXZWJraXRUcmFuc2Zvcm0nIGluIGJvZHlTdHlsZSkgPyAnV2Via2l0JyA6CiAgICAgICAgICAgICAgICAgICAgICAgKCdNb3pUcmFuc2Zvcm0nIGluIGJvZHlTdHlsZSkgPyAnTW96JyA6CiAgICAgICAgICAgICAgICAgICAgICAgKCdtc1RyYW5zZm9ybScgaW4gYm9keVN0eWxlKSA/ICdtcycgOgogICAgICAgICAgICAgICAgICAgICAgICgnT1RyYW5zZm9ybScgaW4gYm9keVN0eWxlKSA/ICdPJyA6ICcnOwoKICAgIGlmICh2ZW5kb3JQcmVmaXggKyAnUGVyc3BlY3RpdmUnIGluIGJvZHlTdHlsZSkgewogICAgICAvLyBNb2Rlcm4gYnJvd3NlcnMgd2l0aCAzRCBzdXBwb3J0LCBlLmcuIFdlYmtpdCwgSUUxMAogICAgICByZXR1cm4gJ3RyYW5zbGF0ZTNkJzsKICAgIH0gZWxzZSBpZiAodmVuZG9yUHJlZml4ICsgJ1RyYW5zZm9ybScgaW4gYm9keVN0eWxlKSB7CiAgICAgIC8vIEJyb3dzZXJzIHdpdGhvdXQgM0Qgc3VwcG9ydCwgZS5nLiBJRTkKICAgICAgcmV0dXJuICd0cmFuc2xhdGUnOwogICAgfSBlbHNlIHsKICAgICAgLy8gQnJvd3NlcnMgd2l0aG91dCB0cmFuc2xhdGUoKSBzdXBwb3J0LCBlLmcuIElFNy04CiAgICAgIHJldHVybiAnbWFyZ2luJzsKICAgIH0KICB9OwoKICAvKioKICAgKiBIZWxwZXJzCiAgICovCgogIGZ1bmN0aW9uIGNsYW1wKG4sIG1pbiwgbWF4KSB7CiAgICBpZiAobiA8IG1pbikgcmV0dXJuIG1pbjsKICAgIGlmIChuID4gbWF4KSByZXR1cm4gbWF4OwogICAgcmV0dXJuIG47CiAgfQoKICAvKioKICAgKiAoSW50ZXJuYWwpIGNvbnZlcnRzIGEgcGVyY2VudGFnZSAoYDAuLjFgKSB0byBhIGJhciB0cmFuc2xhdGVYCiAgICogcGVyY2VudGFnZSAoYC0xMDAlLi4wJWApLgogICAqLwoKICBmdW5jdGlvbiB0b0JhclBlcmMobikgewogICAgcmV0dXJuICgtMSArIG4pICogMTAwOwogIH0KCgogIC8qKgogICAqIChJbnRlcm5hbCkgcmV0dXJucyB0aGUgY29ycmVjdCBDU1MgZm9yIGNoYW5naW5nIHRoZSBiYXIncwogICAqIHBvc2l0aW9uIGdpdmVuIGFuIG4gcGVyY2VudGFnZSwgYW5kIHNwZWVkIGFuZCBlYXNlIGZyb20gU2V0dGluZ3MKICAgKi8KCiAgZnVuY3Rpb24gYmFyUG9zaXRpb25DU1Mobiwgc3BlZWQsIGVhc2UpIHsKICAgIHZhciBiYXJDU1M7CgogICAgaWYgKFNldHRpbmdzLnBvc2l0aW9uVXNpbmcgPT09ICd0cmFuc2xhdGUzZCcpIHsKICAgICAgYmFyQ1NTID0geyB0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgnK3RvQmFyUGVyYyhuKSsnJSwwLDApJyB9OwogICAgfSBlbHNlIGlmIChTZXR0aW5ncy5wb3NpdGlvblVzaW5nID09PSAndHJhbnNsYXRlJykgewogICAgICBiYXJDU1MgPSB7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgnK3RvQmFyUGVyYyhuKSsnJSwwKScgfTsKICAgIH0gZWxzZSB7CiAgICAgIGJhckNTUyA9IHsgJ21hcmdpbi1sZWZ0JzogdG9CYXJQZXJjKG4pKyclJyB9OwogICAgfQoKICAgIGJhckNTUy50cmFuc2l0aW9uID0gJ2FsbCAnK3NwZWVkKydtcyAnK2Vhc2U7CgogICAgcmV0dXJuIGJhckNTUzsKICB9CgogIC8qKgogICAqIChJbnRlcm5hbCkgUXVldWVzIGEgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQuCiAgICovCgogIHZhciBxdWV1ZSA9IChmdW5jdGlvbigpIHsKICAgIHZhciBwZW5kaW5nID0gW107CiAgICAKICAgIGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIHZhciBmbiA9IHBlbmRpbmcuc2hpZnQoKTsKICAgICAgaWYgKGZuKSB7CiAgICAgICAgZm4obmV4dCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZnVuY3Rpb24oZm4pIHsKICAgICAgcGVuZGluZy5wdXNoKGZuKTsKICAgICAgaWYgKHBlbmRpbmcubGVuZ3RoID09IDEpIG5leHQoKTsKICAgIH07CiAgfSkoKTsKCiAgLyoqCiAgICogKEludGVybmFsKSBBcHBsaWVzIGNzcyBwcm9wZXJ0aWVzIHRvIGFuIGVsZW1lbnQsIHNpbWlsYXIgdG8gdGhlIGpRdWVyeSAKICAgKiBjc3MgbWV0aG9kLgogICAqCiAgICogV2hpbGUgdGhpcyBoZWxwZXIgZG9lcyBhc3Npc3Qgd2l0aCB2ZW5kb3IgcHJlZml4ZWQgcHJvcGVydHkgbmFtZXMsIGl0IAogICAqIGRvZXMgbm90IHBlcmZvcm0gYW55IG1hbmlwdWxhdGlvbiBvZiB2YWx1ZXMgcHJpb3IgdG8gc2V0dGluZyBzdHlsZXMuCiAgICovCgogIHZhciBjc3MgPSAoZnVuY3Rpb24oKSB7CiAgICB2YXIgY3NzUHJlZml4ZXMgPSBbICdXZWJraXQnLCAnTycsICdNb3onLCAnbXMnIF0sCiAgICAgICAgY3NzUHJvcHMgICAgPSB7fTsKCiAgICBmdW5jdGlvbiBjYW1lbENhc2Uoc3RyaW5nKSB7CiAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXi1tcy0vLCAnbXMtJykucmVwbGFjZSgvLShbXGRhLXpdKS9naSwgZnVuY3Rpb24obWF0Y2gsIGxldHRlcikgewogICAgICAgIHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTsKICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VmVuZG9yUHJvcChuYW1lKSB7CiAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmJvZHkuc3R5bGU7CiAgICAgIGlmIChuYW1lIGluIHN0eWxlKSByZXR1cm4gbmFtZTsKCiAgICAgIHZhciBpID0gY3NzUHJlZml4ZXMubGVuZ3RoLAogICAgICAgICAgY2FwTmFtZSA9IG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpLAogICAgICAgICAgdmVuZG9yTmFtZTsKICAgICAgd2hpbGUgKGktLSkgewogICAgICAgIHZlbmRvck5hbWUgPSBjc3NQcmVmaXhlc1tpXSArIGNhcE5hbWU7CiAgICAgICAgaWYgKHZlbmRvck5hbWUgaW4gc3R5bGUpIHJldHVybiB2ZW5kb3JOYW1lOwogICAgICB9CgogICAgICByZXR1cm4gbmFtZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRTdHlsZVByb3AobmFtZSkgewogICAgICBuYW1lID0gY2FtZWxDYXNlKG5hbWUpOwogICAgICByZXR1cm4gY3NzUHJvcHNbbmFtZV0gfHwgKGNzc1Byb3BzW25hbWVdID0gZ2V0VmVuZG9yUHJvcChuYW1lKSk7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwbHlDc3MoZWxlbWVudCwgcHJvcCwgdmFsdWUpIHsKICAgICAgcHJvcCA9IGdldFN0eWxlUHJvcChwcm9wKTsKICAgICAgZWxlbWVudC5zdHlsZVtwcm9wXSA9IHZhbHVlOwogICAgfQoKICAgIHJldHVybiBmdW5jdGlvbihlbGVtZW50LCBwcm9wZXJ0aWVzKSB7CiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLAogICAgICAgICAgcHJvcCwgCiAgICAgICAgICB2YWx1ZTsKCiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PSAyKSB7CiAgICAgICAgZm9yIChwcm9wIGluIHByb3BlcnRpZXMpIHsKICAgICAgICAgIHZhbHVlID0gcHJvcGVydGllc1twcm9wXTsKICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcCkpIGFwcGx5Q3NzKGVsZW1lbnQsIHByb3AsIHZhbHVlKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXBwbHlDc3MoZWxlbWVudCwgYXJnc1sxXSwgYXJnc1syXSk7CiAgICAgIH0KICAgIH0KICB9KSgpOwoKICAvKioKICAgKiAoSW50ZXJuYWwpIERldGVybWluZXMgaWYgYW4gZWxlbWVudCBvciBzcGFjZSBzZXBhcmF0ZWQgbGlzdCBvZiBjbGFzcyBuYW1lcyBjb250YWlucyBhIGNsYXNzIG5hbWUuCiAgICovCgogIGZ1bmN0aW9uIGhhc0NsYXNzKGVsZW1lbnQsIG5hbWUpIHsKICAgIHZhciBsaXN0ID0gdHlwZW9mIGVsZW1lbnQgPT0gJ3N0cmluZycgPyBlbGVtZW50IDogY2xhc3NMaXN0KGVsZW1lbnQpOwogICAgcmV0dXJuIGxpc3QuaW5kZXhPZignICcgKyBuYW1lICsgJyAnKSA+PSAwOwogIH0KCiAgLyoqCiAgICogKEludGVybmFsKSBBZGRzIGEgY2xhc3MgdG8gYW4gZWxlbWVudC4KICAgKi8KCiAgZnVuY3Rpb24gYWRkQ2xhc3MoZWxlbWVudCwgbmFtZSkgewogICAgdmFyIG9sZExpc3QgPSBjbGFzc0xpc3QoZWxlbWVudCksCiAgICAgICAgbmV3TGlzdCA9IG9sZExpc3QgKyBuYW1lOwoKICAgIGlmIChoYXNDbGFzcyhvbGRMaXN0LCBuYW1lKSkgcmV0dXJuOyAKCiAgICAvLyBUcmltIHRoZSBvcGVuaW5nIHNwYWNlLgogICAgZWxlbWVudC5jbGFzc05hbWUgPSBuZXdMaXN0LnN1YnN0cmluZygxKTsKICB9CgogIC8qKgogICAqIChJbnRlcm5hbCkgUmVtb3ZlcyBhIGNsYXNzIGZyb20gYW4gZWxlbWVudC4KICAgKi8KCiAgZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbWVudCwgbmFtZSkgewogICAgdmFyIG9sZExpc3QgPSBjbGFzc0xpc3QoZWxlbWVudCksCiAgICAgICAgbmV3TGlzdDsKCiAgICBpZiAoIWhhc0NsYXNzKGVsZW1lbnQsIG5hbWUpKSByZXR1cm47CgogICAgLy8gUmVwbGFjZSB0aGUgY2xhc3MgbmFtZS4KICAgIG5ld0xpc3QgPSBvbGRMaXN0LnJlcGxhY2UoJyAnICsgbmFtZSArICcgJywgJyAnKTsKCiAgICAvLyBUcmltIHRoZSBvcGVuaW5nIGFuZCBjbG9zaW5nIHNwYWNlcy4KICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gbmV3TGlzdC5zdWJzdHJpbmcoMSwgbmV3TGlzdC5sZW5ndGggLSAxKTsKICB9CgogIC8qKgogICAqIChJbnRlcm5hbCkgR2V0cyBhIHNwYWNlIHNlcGFyYXRlZCBsaXN0IG9mIHRoZSBjbGFzcyBuYW1lcyBvbiB0aGUgZWxlbWVudC4gCiAgICogVGhlIGxpc3QgaXMgd3JhcHBlZCB3aXRoIGEgc2luZ2xlIHNwYWNlIG9uIGVhY2ggZW5kIHRvIGZhY2lsaXRhdGUgZmluZGluZyAKICAgKiBtYXRjaGVzIHdpdGhpbiB0aGUgbGlzdC4KICAgKi8KCiAgZnVuY3Rpb24gY2xhc3NMaXN0KGVsZW1lbnQpIHsKICAgIHJldHVybiAoJyAnICsgKGVsZW1lbnQuY2xhc3NOYW1lIHx8ICcnKSArICcgJykucmVwbGFjZSgvXHMrL2dpLCAnICcpOwogIH0KCiAgLyoqCiAgICogKEludGVybmFsKSBSZW1vdmVzIGFuIGVsZW1lbnQgZnJvbSB0aGUgRE9NLgogICAqLwoKICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgJiYgZWxlbWVudC5wYXJlbnROb2RlICYmIGVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50KTsKICB9CgogIHJldHVybiBOUHJvZ3Jlc3M7Cn0pOwoK"},{"meta":{"name":"clipboard.min.js","url":"https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js","ts":1615031285370,"mimetype":"text/javascript"},"source":"LyohCiAqIGNsaXBib2FyZC5qcyB2Mi4wLjYKICogaHR0cHM6Ly9jbGlwYm9hcmRqcy5jb20vCiAqIAogKiBMaWNlbnNlZCBNSVQgwqkgWmVubyBSb2NoYQogKi8KIWZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sZSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuQ2xpcGJvYXJkSlM9ZSgpOnQuQ2xpcGJvYXJkSlM9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIG89e30sci5tPW49W2Z1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlO2lmKCJTRUxFQ1QiPT09dC5ub2RlTmFtZSl0LmZvY3VzKCksZT10LnZhbHVlO2Vsc2UgaWYoIklOUFVUIj09PXQubm9kZU5hbWV8fCJURVhUQVJFQSI9PT10Lm5vZGVOYW1lKXt2YXIgbj10Lmhhc0F0dHJpYnV0ZSgicmVhZG9ubHkiKTtufHx0LnNldEF0dHJpYnV0ZSgicmVhZG9ubHkiLCIiKSx0LnNlbGVjdCgpLHQuc2V0U2VsZWN0aW9uUmFuZ2UoMCx0LnZhbHVlLmxlbmd0aCksbnx8dC5yZW1vdmVBdHRyaWJ1dGUoInJlYWRvbmx5IiksZT10LnZhbHVlfWVsc2V7dC5oYXNBdHRyaWJ1dGUoImNvbnRlbnRlZGl0YWJsZSIpJiZ0LmZvY3VzKCk7dmFyIG89d2luZG93LmdldFNlbGVjdGlvbigpLHI9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtyLnNlbGVjdE5vZGVDb250ZW50cyh0KSxvLnJlbW92ZUFsbFJhbmdlcygpLG8uYWRkUmFuZ2UociksZT1vLnRvU3RyaW5nKCl9cmV0dXJuIGV9fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt9bi5wcm90b3R5cGU9e29uOmZ1bmN0aW9uKHQsZSxuKXt2YXIgbz10aGlzLmV8fCh0aGlzLmU9e30pO3JldHVybihvW3RdfHwob1t0XT1bXSkpLnB1c2goe2ZuOmUsY3R4Om59KSx0aGlzfSxvbmNlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgbz10aGlzO2Z1bmN0aW9uIHIoKXtvLm9mZih0LHIpLGUuYXBwbHkobixhcmd1bWVudHMpfXJldHVybiByLl89ZSx0aGlzLm9uKHQscixuKX0sZW1pdDpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSksbj0oKHRoaXMuZXx8KHRoaXMuZT17fSkpW3RdfHxbXSkuc2xpY2UoKSxvPTAscj1uLmxlbmd0aDtvPHI7bysrKW5bb10uZm4uYXBwbHkobltvXS5jdHgsZSk7cmV0dXJuIHRoaXN9LG9mZjpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZXx8KHRoaXMuZT17fSksbz1uW3RdLHI9W107aWYobyYmZSlmb3IodmFyIGk9MCxhPW8ubGVuZ3RoO2k8YTtpKyspb1tpXS5mbiE9PWUmJm9baV0uZm4uXyE9PWUmJnIucHVzaChvW2ldKTtyZXR1cm4gci5sZW5ndGg/blt0XT1yOmRlbGV0ZSBuW3RdLHRoaXN9fSx0LmV4cG9ydHM9bix0LmV4cG9ydHMuVGlueUVtaXR0ZXI9bn0sZnVuY3Rpb24odCxlLG4pe3ZhciBkPW4oMyksaD1uKDQpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7aWYoIXQmJiFlJiYhbil0aHJvdyBuZXcgRXJyb3IoIk1pc3NpbmcgcmVxdWlyZWQgYXJndW1lbnRzIik7aWYoIWQuc3RyaW5nKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIlNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGEgU3RyaW5nIik7aWYoIWQuZm4obikpdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhpcmQgYXJndW1lbnQgbXVzdCBiZSBhIEZ1bmN0aW9uIik7aWYoZC5ub2RlKHQpKXJldHVybiBzPWUsZj1uLCh1PXQpLmFkZEV2ZW50TGlzdGVuZXIocyxmKSx7ZGVzdHJveTpmdW5jdGlvbigpe3UucmVtb3ZlRXZlbnRMaXN0ZW5lcihzLGYpfX07aWYoZC5ub2RlTGlzdCh0KSlyZXR1cm4gYT10LGM9ZSxsPW4sQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKHQpe3QuYWRkRXZlbnRMaXN0ZW5lcihjLGwpfSkse2Rlc3Ryb3k6ZnVuY3Rpb24oKXtBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24odCl7dC5yZW1vdmVFdmVudExpc3RlbmVyKGMsbCl9KX19O2lmKGQuc3RyaW5nKHQpKXJldHVybiBvPXQscj1lLGk9bixoKGRvY3VtZW50LmJvZHksbyxyLGkpO3Rocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBTdHJpbmcsIEhUTUxFbGVtZW50LCBIVE1MQ29sbGVjdGlvbiwgb3IgTm9kZUxpc3QiKTt2YXIgbyxyLGksYSxjLGwsdSxzLGZ9fSxmdW5jdGlvbih0LG4pe24ubm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dCYmdCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiYxPT09dC5ub2RlVHlwZX0sbi5ub2RlTGlzdD1mdW5jdGlvbih0KXt2YXIgZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCk7cmV0dXJuIHZvaWQgMCE9PXQmJigiW29iamVjdCBOb2RlTGlzdF0iPT09ZXx8IltvYmplY3QgSFRNTENvbGxlY3Rpb25dIj09PWUpJiYibGVuZ3RoImluIHQmJigwPT09dC5sZW5ndGh8fG4ubm9kZSh0WzBdKSl9LG4uc3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdHx8dCBpbnN0YW5jZW9mIFN0cmluZ30sbi5mbj1mdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBGdW5jdGlvbl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBhPW4oNSk7ZnVuY3Rpb24gaSh0LGUsbixvLHIpe3ZhciBpPWZ1bmN0aW9uKGUsbix0LG8pe3JldHVybiBmdW5jdGlvbih0KXt0LmRlbGVnYXRlVGFyZ2V0PWEodC50YXJnZXQsbiksdC5kZWxlZ2F0ZVRhcmdldCYmby5jYWxsKGUsdCl9fS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHQuYWRkRXZlbnRMaXN0ZW5lcihuLGkscikse2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIobixpLHIpfX19dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLG8scil7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQuYWRkRXZlbnRMaXN0ZW5lcj9pLmFwcGx5KG51bGwsYXJndW1lbnRzKToiZnVuY3Rpb24iPT10eXBlb2Ygbj9pLmJpbmQobnVsbCxkb2N1bWVudCkuYXBwbHkobnVsbCxhcmd1bWVudHMpOigic3RyaW5nIj09dHlwZW9mIHQmJih0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodCkpLEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0LGZ1bmN0aW9uKHQpe3JldHVybiBpKHQsZSxuLG8scil9KSl9fSxmdW5jdGlvbih0LGUpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgRWxlbWVudCYmIUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpe3ZhciBuPUVsZW1lbnQucHJvdG90eXBlO24ubWF0Y2hlcz1uLm1hdGNoZXNTZWxlY3Rvcnx8bi5tb3pNYXRjaGVzU2VsZWN0b3J8fG4ubXNNYXRjaGVzU2VsZWN0b3J8fG4ub01hdGNoZXNTZWxlY3Rvcnx8bi53ZWJraXRNYXRjaGVzU2VsZWN0b3J9dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7Zm9yKDt0JiY5IT09dC5ub2RlVHlwZTspe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0Lm1hdGNoZXMmJnQubWF0Y2hlcyhlKSlyZXR1cm4gdDt0PXQucGFyZW50Tm9kZX19fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24ucihlKTt2YXIgbz1uKDApLHI9bi5uKG8pLGk9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9O2Z1bmN0aW9uIGEodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIG89ZVtuXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbyYmKG8ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG8ua2V5LG8pfX1mdW5jdGlvbiBjKHQpeyFmdW5jdGlvbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfSh0aGlzLGMpLHRoaXMucmVzb2x2ZU9wdGlvbnModCksdGhpcy5pbml0U2VsZWN0aW9uKCl9dmFyIGw9KGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZSYmYSh0LnByb3RvdHlwZSxlKSxuJiZhKHQsbiksdH0oYyxbe2tleToicmVzb2x2ZU9wdGlvbnMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09dD90Ont9O3RoaXMuYWN0aW9uPWUuYWN0aW9uLHRoaXMuY29udGFpbmVyPWUuY29udGFpbmVyLHRoaXMuZW1pdHRlcj1lLmVtaXR0ZXIsdGhpcy50YXJnZXQ9ZS50YXJnZXQsdGhpcy50ZXh0PWUudGV4dCx0aGlzLnRyaWdnZXI9ZS50cmlnZ2VyLHRoaXMuc2VsZWN0ZWRUZXh0PSIifX0se2tleToiaW5pdFNlbGVjdGlvbiIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRleHQ/dGhpcy5zZWxlY3RGYWtlKCk6dGhpcy50YXJnZXQmJnRoaXMuc2VsZWN0VGFyZ2V0KCl9fSx7a2V5OiJzZWxlY3RGYWtlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT0icnRsIj09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgiZGlyIik7dGhpcy5yZW1vdmVGYWtlKCksdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHQucmVtb3ZlRmFrZSgpfSx0aGlzLmZha2VIYW5kbGVyPXRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIix0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2spfHwhMCx0aGlzLmZha2VFbGVtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIiksdGhpcy5mYWtlRWxlbS5zdHlsZS5mb250U2l6ZT0iMTJwdCIsdGhpcy5mYWtlRWxlbS5zdHlsZS5ib3JkZXI9IjAiLHRoaXMuZmFrZUVsZW0uc3R5bGUucGFkZGluZz0iMCIsdGhpcy5mYWtlRWxlbS5zdHlsZS5tYXJnaW49IjAiLHRoaXMuZmFrZUVsZW0uc3R5bGUucG9zaXRpb249ImFic29sdXRlIix0aGlzLmZha2VFbGVtLnN0eWxlW2U/InJpZ2h0IjoibGVmdCJdPSItOTk5OXB4Ijt2YXIgbj13aW5kb3cucGFnZVlPZmZzZXR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7dGhpcy5mYWtlRWxlbS5zdHlsZS50b3A9bisicHgiLHRoaXMuZmFrZUVsZW0uc2V0QXR0cmlidXRlKCJyZWFkb25seSIsIiIpLHRoaXMuZmFrZUVsZW0udmFsdWU9dGhpcy50ZXh0LHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZmFrZUVsZW0pLHRoaXMuc2VsZWN0ZWRUZXh0PXIoKSh0aGlzLmZha2VFbGVtKSx0aGlzLmNvcHlUZXh0KCl9fSx7a2V5OiJyZW1vdmVGYWtlIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZmFrZUhhbmRsZXImJih0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrKSx0aGlzLmZha2VIYW5kbGVyPW51bGwsdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrPW51bGwpLHRoaXMuZmFrZUVsZW0mJih0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLmZha2VFbGVtKSx0aGlzLmZha2VFbGVtPW51bGwpfX0se2tleToic2VsZWN0VGFyZ2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWRUZXh0PXIoKSh0aGlzLnRhcmdldCksdGhpcy5jb3B5VGV4dCgpfX0se2tleToiY29weVRleHQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dm9pZCAwO3RyeXtlPWRvY3VtZW50LmV4ZWNDb21tYW5kKHRoaXMuYWN0aW9uKX1jYXRjaCh0KXtlPSExfXRoaXMuaGFuZGxlUmVzdWx0KGUpfX0se2tleToiaGFuZGxlUmVzdWx0Iix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmVtaXR0ZXIuZW1pdCh0PyJzdWNjZXNzIjoiZXJyb3IiLHthY3Rpb246dGhpcy5hY3Rpb24sdGV4dDp0aGlzLnNlbGVjdGVkVGV4dCx0cmlnZ2VyOnRoaXMudHJpZ2dlcixjbGVhclNlbGVjdGlvbjp0aGlzLmNsZWFyU2VsZWN0aW9uLmJpbmQodGhpcyl9KX19LHtrZXk6ImNsZWFyU2VsZWN0aW9uIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudHJpZ2dlciYmdGhpcy50cmlnZ2VyLmZvY3VzKCksZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCksd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpfX0se2tleToiZGVzdHJveSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUZha2UoKX19LHtrZXk6ImFjdGlvbiIsc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09dD90OiJjb3B5IjtpZih0aGlzLl9hY3Rpb249ZSwiY29weSIhPT10aGlzLl9hY3Rpb24mJiJjdXQiIT09dGhpcy5fYWN0aW9uKXRocm93IG5ldyBFcnJvcignSW52YWxpZCAiYWN0aW9uIiB2YWx1ZSwgdXNlIGVpdGhlciAiY29weSIgb3IgImN1dCInKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGlvbn19LHtrZXk6InRhcmdldCIsc2V0OmZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9PXQpe2lmKCF0fHwib2JqZWN0IiE9PSh2b2lkIDA9PT10PyJ1bmRlZmluZWQiOmkodCkpfHwxIT09dC5ub2RlVHlwZSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgInRhcmdldCIgdmFsdWUsIHVzZSBhIHZhbGlkIEVsZW1lbnQnKTtpZigiY29weSI9PT10aGlzLmFjdGlvbiYmdC5oYXNBdHRyaWJ1dGUoImRpc2FibGVkIikpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJ0YXJnZXQiIGF0dHJpYnV0ZS4gUGxlYXNlIHVzZSAicmVhZG9ubHkiIGluc3RlYWQgb2YgImRpc2FibGVkIiBhdHRyaWJ1dGUnKTtpZigiY3V0Ij09PXRoaXMuYWN0aW9uJiYodC5oYXNBdHRyaWJ1dGUoInJlYWRvbmx5Iil8fHQuaGFzQXR0cmlidXRlKCJkaXNhYmxlZCIpKSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgInRhcmdldCIgYXR0cmlidXRlLiBZb3UgY2FuXCd0IGN1dCB0ZXh0IGZyb20gZWxlbWVudHMgd2l0aCAicmVhZG9ubHkiIG9yICJkaXNhYmxlZCIgYXR0cmlidXRlcycpO3RoaXMuX3RhcmdldD10fX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhcmdldH19XSksYyksdT1uKDEpLHM9bi5uKHUpLGY9bigyKSxkPW4ubihmKSxoPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiB0fSxwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZSYmeSh0LnByb3RvdHlwZSxlKSxuJiZ5KHQsbiksdH07ZnVuY3Rpb24geSh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgbz1lW25dO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsby5rZXksbyl9fXZhciBtPShmdW5jdGlvbih0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9KHYscy5hKSxwKHYsW3trZXk6InJlc29sdmVPcHRpb25zIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PXQ/dDp7fTt0aGlzLmFjdGlvbj0iZnVuY3Rpb24iPT10eXBlb2YgZS5hY3Rpb24/ZS5hY3Rpb246dGhpcy5kZWZhdWx0QWN0aW9uLHRoaXMudGFyZ2V0PSJmdW5jdGlvbiI9PXR5cGVvZiBlLnRhcmdldD9lLnRhcmdldDp0aGlzLmRlZmF1bHRUYXJnZXQsdGhpcy50ZXh0PSJmdW5jdGlvbiI9PXR5cGVvZiBlLnRleHQ/ZS50ZXh0OnRoaXMuZGVmYXVsdFRleHQsdGhpcy5jb250YWluZXI9Im9iamVjdCI9PT1oKGUuY29udGFpbmVyKT9lLmNvbnRhaW5lcjpkb2N1bWVudC5ib2R5fX0se2tleToibGlzdGVuQ2xpY2siLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5saXN0ZW5lcj1kKCkodCwiY2xpY2siLGZ1bmN0aW9uKHQpe3JldHVybiBlLm9uQ2xpY2sodCl9KX19LHtrZXk6Im9uQ2xpY2siLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZGVsZWdhdGVUYXJnZXR8fHQuY3VycmVudFRhcmdldDt0aGlzLmNsaXBib2FyZEFjdGlvbiYmKHRoaXMuY2xpcGJvYXJkQWN0aW9uPW51bGwpLHRoaXMuY2xpcGJvYXJkQWN0aW9uPW5ldyBsKHthY3Rpb246dGhpcy5hY3Rpb24oZSksdGFyZ2V0OnRoaXMudGFyZ2V0KGUpLHRleHQ6dGhpcy50ZXh0KGUpLGNvbnRhaW5lcjp0aGlzLmNvbnRhaW5lcix0cmlnZ2VyOmUsZW1pdHRlcjp0aGlzfSl9fSx7a2V5OiJkZWZhdWx0QWN0aW9uIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gYigiYWN0aW9uIix0KX19LHtrZXk6ImRlZmF1bHRUYXJnZXQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWIoInRhcmdldCIsdCk7aWYoZSlyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKX19LHtrZXk6ImRlZmF1bHRUZXh0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gYigidGV4dCIsdCl9fSx7a2V5OiJkZXN0cm95Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMubGlzdGVuZXIuZGVzdHJveSgpLHRoaXMuY2xpcGJvYXJkQWN0aW9uJiYodGhpcy5jbGlwYm9hcmRBY3Rpb24uZGVzdHJveSgpLHRoaXMuY2xpcGJvYXJkQWN0aW9uPW51bGwpfX1dLFt7a2V5OiJpc1N1cHBvcnRlZCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT10P3Q6WyJjb3B5IiwiY3V0Il0sbj0ic3RyaW5nIj09dHlwZW9mIGU/W2VdOmUsbz0hIWRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZDtyZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe289byYmISFkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQodCl9KSxvfX1dKSx2KTtmdW5jdGlvbiB2KHQsZSl7IWZ1bmN0aW9uKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9KHRoaXMsdik7dmFyIG49ZnVuY3Rpb24odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP3Q6ZX0odGhpcywodi5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih2KSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4ucmVzb2x2ZU9wdGlvbnMoZSksbi5saXN0ZW5DbGljayh0KSxufWZ1bmN0aW9uIGIodCxlKXt2YXIgbj0iZGF0YS1jbGlwYm9hcmQtIit0O2lmKGUuaGFzQXR0cmlidXRlKG4pKXJldHVybiBlLmdldEF0dHJpYnV0ZShuKX1lLmRlZmF1bHQ9bX1dLHIuYz1vLHIuZD1mdW5jdGlvbih0LGUsbil7ci5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2VudW1lcmFibGU6ITAsZ2V0Om59KX0sci5yPWZ1bmN0aW9uKHQpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LHIudD1mdW5jdGlvbihlLHQpe2lmKDEmdCYmKGU9cihlKSksOCZ0KXJldHVybiBlO2lmKDQmdCYmIm9iamVjdCI9PXR5cGVvZiBlJiZlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtpZihyLnIobiksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJnQmJiJzdHJpbmciIT10eXBlb2YgZSlmb3IodmFyIG8gaW4gZSlyLmQobixvLGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfS5iaW5kKG51bGwsbykpO3JldHVybiBufSxyLm49ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIHQuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gdH07cmV0dXJuIHIuZChlLCJhIixlKSxlfSxyLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LHIucD0iIixyKHIucz02KS5kZWZhdWx0O2Z1bmN0aW9uIHIodCl7aWYob1t0XSlyZXR1cm4gb1t0XS5leHBvcnRzO3ZhciBlPW9bdF09e2k6dCxsOiExLGV4cG9ydHM6e319O3JldHVybiBuW3RdLmNhbGwoZS5leHBvcnRzLGUsZS5leHBvcnRzLHIpLGUubD0hMCxlLmV4cG9ydHN9dmFyIG4sb30pOw=="}]},{"name":"Open the F**king URL Right Now","options":{"awareOfChrome":false,"check_for_updates":true,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["http://t.cn/*","https://weibo.cn/sinaurl?*","https://www.jianshu.com/go-wild?*","https://link.zhihu.com/?*","https://www.douban.com/link2/?url=*","https://link.ld246.com/forward?goto=*","https://mp.weixin.qq.com/*","http://redir.yy.duowan.com/warning.php?url=*","https://weixin110.qq.com/cgi-bin/mmspamsupport-bin/newredirectconfirmcgi*","https://link.csdn.net/?target=*","https://steamcommunity.com/linkfilter/?url=*","https://game.bilibili.com/linkfilter/?url=*","https://www.oschina.net/action/GoToLink?url=*","https://developers.weixin.qq.com/community/middlepage/href?href=*","https://docs.qq.com/scenario/link.html?url=*","https://www.pixiv.net/jump.php?url=*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1610619230140,"data":{}},"enabled":true,"position":5,"file_url":"https://greasyfork.org/scripts/412612-open-the-f-king-url-right-now/code/Open%20the%20F**king%20URL%20Right%20Now.user.js","uuid":"8356525a-c77b-4d3a-8f0c-80e424d221b7","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIE9wZW4gdGhlIEYqKmtpbmcgVVJMIFJpZ2h0IE5vdwovLyBAZGVzY3JpcHRpb24gICAg6Ieq5Yqo6Lez6L2s5p+Q5Lqb572R56uZ5LiN5biM5pyb55So5oi355u06L6+55qE5aSW6ZO+Ci8vIEBhdXRob3IgICAgICAgICBPbGRQYW5kYQovLyBAbWF0Y2ggICAgICAgICAgaHR0cDovL3QuY24vKgovLyBAbWF0Y2ggICAgICAgICAgaHR0cHM6Ly93ZWliby5jbi9zaW5hdXJsPyoKLy8gQG1hdGNoICAgICAgICAgIGh0dHBzOi8vd3d3LmppYW5zaHUuY29tL2dvLXdpbGQ/KgovLyBAbWF0Y2ggICAgICAgICAgaHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/KgovLyBAbWF0Y2ggICAgICAgICAgaHR0cHM6Ly93d3cuZG91YmFuLmNvbS9saW5rMi8/dXJsPSoKLy8gQG1hdGNoICAgICAgICAgIGh0dHBzOi8vbGluay5sZDI0Ni5jb20vZm9yd2FyZD9nb3RvPSoKLy8gQG1hdGNoICAgICAgICAgIGh0dHBzOi8vbXAud2VpeGluLnFxLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICBodHRwOi8vcmVkaXIueXkuZHVvd2FuLmNvbS93YXJuaW5nLnBocD91cmw9KgovLyBAbWF0Y2ggICAgICAgICAgaHR0cHM6Ly93ZWl4aW4xMTAucXEuY29tL2NnaS1iaW4vbW1zcGFtc3VwcG9ydC1iaW4vbmV3cmVkaXJlY3Rjb25maXJtY2dpKgovLyBAbWF0Y2ggICAgICAgICAgaHR0cHM6Ly9saW5rLmNzZG4ubmV0Lz90YXJnZXQ9KgovLyBAbWF0Y2ggICAgICAgICAgaHR0cHM6Ly9zdGVhbWNvbW11bml0eS5jb20vbGlua2ZpbHRlci8/dXJsPSoKLy8gQG1hdGNoICAgICAgICAgIGh0dHBzOi8vZ2FtZS5iaWxpYmlsaS5jb20vbGlua2ZpbHRlci8/dXJsPSoKLy8gQG1hdGNoICAgICAgICAgIGh0dHBzOi8vd3d3Lm9zY2hpbmEubmV0L2FjdGlvbi9Hb1RvTGluaz91cmw9KgovLyBAbWF0Y2ggICAgICAgICAgaHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vY29tbXVuaXR5L21pZGRsZXBhZ2UvaHJlZj9ocmVmPSoKLy8gQG1hdGNoICAgICAgICAgIGh0dHBzOi8vZG9jcy5xcS5jb20vc2NlbmFyaW8vbGluay5odG1sP3VybD0qCi8vIEBtYXRjaCAgICAgICAgICBodHRwczovL3d3dy5waXhpdi5uZXQvanVtcC5waHA/dXJsPSoKLy8gQHZlcnNpb24gICAgICAgIDAuNy45Ci8vIEBydW4tYXQgICAgICAgICBkb2N1bWVudC1pZGxlCi8vIEBuYW1lc3BhY2UgICAgICBodHRwczovL29sZC1wYW5kYS5jb20vCi8vIEByZXF1aXJlICAgICAgICBodHRwczovL2Nkbi5ib290Y2RuLm5ldC9hamF4L2xpYnMvanF1ZXJ5LzMuNS4xL2pxdWVyeS5taW4uanMKLy8gQGxpY2Vuc2UgICAgICAgIEdQTHYzIExpY2Vuc2UKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgY29uc3QgY3VyVVJMID0gd2luZG93LmxvY2F0aW9uLmhyZWYKCiAgZnVuY3Rpb24gcnN0cmlwKHN0ciwgcmVnZXgpIHsKICAgIGxldCBpID0gc3RyLmxlbmd0aCAtIDE7CiAgICB3aGlsZSAoaSA+PSAwKSB7CiAgICAgIGlmICghc3RyW2ldLm1hdGNoKHJlZ2V4KSkgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGktLTsKICAgIH0KICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDAsIGkgKyAxKTsKICB9CgogIC8qKgogICAqIFNwbGl0IGNvbmNhdGVuYXRlZCBVUkwgc3RyaW5nIGludG8gc2VwYXJhdGUgVVJMcy4KICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyCiAgICovCiAgZnVuY3Rpb24gc3BsaXRNdWx0aVVSTHMoc3RyKSB7CiAgICBsZXQgcmVzdWx0cyA9IG5ldyBBcnJheSgpOwogICAgbGV0IGVudHJ5ID0gIiI7CiAgICB3aGlsZSAoc3RyLmxlbmd0aCA+IDApIHsKICAgICAgaWYgKHN0ci5pbmRleE9mKCJodHRwOiIpID09PSAtMSAmJiBzdHIuaW5kZXhPZigiaHR0cHM6IikgPT09IC0xKSB7CiAgICAgICAgZW50cnkgKz0gc3RyOwogICAgICAgIHN0ciA9ICIiOwogICAgICAgIHJlc3VsdHMucHVzaChyc3RyaXAoZW50cnksIC9bQDolX1wrfiM/Jj0sJF5cKl0vZykpOwogICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICBpZiAoc3RyLnN0YXJ0c1dpdGgoImh0dHA6IikpIHsKICAgICAgICBlbnRyeSArPSAiaHR0cDoiOwogICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoImh0dHA6Ii5sZW5ndGgpOwogICAgICB9IGVsc2UgaWYgKHN0ci5zdGFydHNXaXRoKCJodHRwczoiKSkgewogICAgICAgIGVudHJ5ICs9ICJodHRwczoiOwogICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoImh0dHBzOiIubGVuZ3RoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcmVzdWx0czsKICAgICAgfQoKICAgICAgbGV0IG5leHRJbmRleCA9IE1hdGgubWluKAogICAgICAgIHN0ci5pbmRleE9mKCJodHRwczoiKSA9PT0gLTEgPyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiA6IHN0ci5pbmRleE9mKCJodHRwczoiKSwKICAgICAgICBzdHIuaW5kZXhPZigiaHR0cDoiKSA9PT0gLTEgPyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiA6IHN0ci5pbmRleE9mKCJodHRwOiIpCiAgICAgICk7CiAgICAgIGlmIChuZXh0SW5kZXggPiAwKSB7CiAgICAgICAgZW50cnkgKz0gc3RyLnN1YnN0cmluZygwLCBuZXh0SW5kZXgpOwogICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcobmV4dEluZGV4KTsKICAgICAgfQogICAgICByZXN1bHRzLnB1c2gocnN0cmlwKGVudHJ5LCAvW0A6JV9cK34jPyY9LCReXCpdL2cpKTsKICAgICAgZW50cnkgPSAiIjsKICAgIH0KICAgIHJldHVybiByZXN1bHRzOwogIH0KCiAgLyoqCiAgICogUmVwbGFjZSB1cmwgd2l0aCBjbGlja2FibGUgYDxhPmAgdGFnIGluIGh0bWwgY29udGVudC4KICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsCiAgICovCiAgZnVuY3Rpb24gcmVwbGFjZVNpbmdsZVVSTCh1cmwpIHsKICAgICQoIiNqc19jb250ZW50IikuaHRtbCgoXywgaHRtbCkgPT4gewogICAgICByZXR1cm4gaHRtbC5yZXBsYWNlKHVybCwgYDxhIHRhcmdldD0iX2JsYW5rIiByZWw9Im5vb3BlbmVyIG5vcmVmZXJyZXIiIGhyZWY9IiR7dXJsfSI+JHt1cmx9PC9hPmApOwogICAgfSk7CiAgfQoKICAvKioKICAgKiBNYWtlIHVybHMgY2xpY2thYmxlIGFnYWluIG9uIFdlaXhpbiBNZWRpYSBQbGF0Zm9ybS4KICAgKi8KICBmdW5jdGlvbiBlbmFibGVVUkxzKCkgewogICAgbGV0IGV4aXN0aW5nTGlua3MgPSBuZXcgU2V0KCk7CiAgICAkKCJhIikuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIGV4aXN0aW5nTGlua3MuYWRkKHRoaXMuaHJlZik7CiAgICB9KTsKCiAgICBsZXQgY29udGVudCA9ICQoIiNqc19jb250ZW50IikudGV4dCgpOwogICAgbGV0IHVybHMgPSBjb250ZW50Lm1hdGNoQWxsKC9odHRwcz86XC9cLyh3d3dcLik/Wy1hLXpBLVowLTlAOiUuX1wrfiM9XXsxLDI1Nn1cLlthLXpBLVowLTkoKV17MSw2fVxiKFstYS16QS1aMC05KClAOiVfXCsufiM/Ji8vPV0qKS9nKTsKICAgIGxldCByZXBsYWNlZCA9IG5ldyBTZXQoKTsKICAgIGZvciAobGV0IHZhbHVlIG9mIHVybHMpIHsKICAgICAgbGV0IHVybFN0ciA9ICQudHJpbSh2YWx1ZVswXSk7CiAgICAgIGZvciAobGV0IHVybCBvZiBzcGxpdE11bHRpVVJMcyh1cmxTdHIpKSB7CiAgICAgICAgaWYgKCF1cmwgfHwgcmVwbGFjZWQuaGFzKHVybCkgfHwgdXJsLmluY2x1ZGVzKCJsb2NhbGhvc3QiKSB8fCB1cmwuaW5jbHVkZXMoIjEyNy4wLjAuMSIpIHx8IGV4aXN0aW5nTGlua3MuaGFzKHVybCkpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICBpZiAodXJsLmVuZHNXaXRoKCIuIikgJiYgdXJsW3VybC5sZW5ndGggLSAyXS5tYXRjaCgvXGQvZykpIHsKICAgICAgICAgIHVybCA9IHVybC5zdWJzdHJpbmcoMCwgdXJsLmxlbmd0aCAtIDIpOwogICAgICAgIH0KICAgICAgICByZXBsYWNlU2luZ2xlVVJMKHVybCk7CiAgICAgICAgcmVwbGFjZWQuYWRkKHVybCk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlZGlyZWN0KGZha2VVUkxTdHIsIHRydWVVUkxQYXJhbSkgewogICAgbGV0IGZha2VVUkwgPSBuZXcgVVJMKGZha2VVUkxTdHIpOwogICAgbGV0IHRydWVVUkwgPSBmYWtlVVJMLnNlYXJjaFBhcmFtcy5nZXQodHJ1ZVVSTFBhcmFtKTsKICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHRydWVVUkwpOwogIH0KCiAgLyoqCiAgICogQGZ1bmN0aW9uCiAgICogQG5hbWUgbWF0Y2gKICAgKiBAcGFyYW0gey4uLnN0cmluZ30gcGF0dGVybnMKICAgKiBAZGVzY3JpcHRpb24gY2hlY2sgaWYgY3VycmVudCBVUkwgbWF0Y2hzIGdpdmVuIHBhdHRlcm5zCiAgICovCiAgY29uc3QgbWF0Y2ggPSAoLi4ucGF0dGVybnMpID0+IHBhdHRlcm5zLnNvbWUocCA9PiBjdXJVUkwuaW5jbHVkZXMocCkpCgogIC8qKgogICAqIEBlbnVtIHtzdHJpbmd9CiAgICogQG5hbWUgZnVja2VycwogICAqIEBkZXNjcmlwdGlvbiBhbGwgbGluayBwYXR0ZXJuIG5lZWRlZCBkZWFsIHdpdGgKICAgKi8KICBjb25zdCBmdWNrZXJzID0gewogICAgd2VpYm86ICdodHRwOi8vdC5jbi8nLCAvLyDlvq7ljZrnvZHpobXniYgKICAgIHdlaWJvMjogJ2h0dHBzOi8vd2VpYm8uY24vc2luYXVybD8nLAogICAgLy8gaHR0cDovL3QuY24vUmdBS29QRQogICAgLy8gaHR0cHM6Ly93ZWliby5jbi9zaW5hdXJsP3U9aHR0cHMlM0ElMkYlMkZ3d3cuZnJlZWJzZC5vcmclMkYKICAgIC8vIGh0dHBzOi8vd2VpYm8uY24vc2luYXVybD90b2FzdHVybD1odHRwcyUzQSUyRiUyRnRpbWUuZ2Vla2Jhbmcub3JnJTJGCiAgICAvLyBodHRwczovL3dlaWJvLmNuL3NpbmF1cmw/bHVpY29kZT0xMDAwMDAxMSZsZmlkPTIzMDI1OSZ1PWh0dHAlM0ElMkYlMkZ0LmNuJTJGQTZxSGVWbGYKICAgIGppYW5zaHU6ICdodHRwczovL3d3dy5qaWFuc2h1LmNvbS9nby13aWxkPycsCiAgICB6aGlodTogJ2h0dHBzOi8vbGluay56aGlodS5jb20vPycsCiAgICAvLyBodHRwczovL2xpbmsuemhpaHUuY29tLz90YXJnZXQ9aHR0cHMlM0ElMkYlMkZ0aW1lLmdlZWtiYW5nLm9yZyUyRgogICAgLy8gaHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHBzJTNBJTJGJTJGd3d3LmZyZWVic2Qub3JnJTJGCiAgICAvLyBodHRwczovL2xpbmsuemhpaHUuY29tLz91dG1fb2k9MzUyMjEwNDI4ODg3MDQmdGFyZ2V0PWh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL3poLUNOL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL1N0YXRlbWVudHMvaW1wb3J0CiAgICBkb3ViYW46ICdodHRwczovL3d3dy5kb3ViYW4uY29tL2xpbmsyLz91cmw9JywKICAgIGRpbGlhbjogJ2h0dHBzOi8vbGluay5sZDI0Ni5jb20vZm9yd2FyZD9nb3RvPScsCiAgICB0aGVXb3JzdDogJ2h0dHBzOi8vbXAud2VpeGluLnFxLmNvbS8nLAogICAgdGhlV29yc3QyOiAnaHR0cHM6Ly93ZWl4aW4xMTAucXEuY29tL2NnaS1iaW4vbW1zcGFtc3VwcG9ydC1iaW4vbmV3cmVkaXJlY3Rjb25maXJtY2dpJywKICAgIHl5OiAnaHR0cDovL3JlZGlyLnl5LmR1b3dhbi5jb20vd2FybmluZy5waHA/dXJsPScsCiAgICBjc2RuOiAnaHR0cHM6Ly9saW5rLmNzZG4ubmV0Lz90YXJnZXQ9JywKICAgIHN0ZWFtOiAnaHR0cHM6Ly9zdGVhbWNvbW11bml0eS5jb20vbGlua2ZpbHRlci8/dXJsPScsCiAgICBnYW1lYmlsaWJpbGk6J2dhbWUuYmlsaWJpbGkuY29tL2xpbmtmaWx0ZXIvP3VybD0nLAogICAgb3NjaGluYTogJ2h0dHBzOi8vd3d3Lm9zY2hpbmEubmV0L2FjdGlvbi9Hb1RvTGluaz91cmw9JywKICAgIHdlaXhpbmRldjonaHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vY29tbXVuaXR5L21pZGRsZXBhZ2UvaHJlZj9ocmVmPScsCiAgICBxcWRvY3M6ICdodHRwczovL2RvY3MucXEuY29tL3NjZW5hcmlvL2xpbmsuaHRtbD91cmw9JywKICAgIHBpeGl2OiAnaHR0cHM6Ly93d3cucGl4aXYubmV0L2p1bXAucGhwP3VybD0nCiAgfQoKICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7CiAgICBpZiAobWF0Y2goZnVja2Vycy53ZWlibywgZnVja2Vycy53ZWlibzIpKSB7CiAgICAgIGNvbnN0IGxpbmsgPSAkKCIud3JhcCAubGluayIpLmZpcnN0KCkudGV4dCgpIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcGVuLXVybCcpLmNoaWxkcmVuWzBdLmhyZWYKICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UobGluayk7CiAgICB9CiAgICBpZiAobWF0Y2goZnVja2Vycy5qaWFuc2h1KSkgewogICAgICByZWRpcmVjdChjdXJVUkwsICJ1cmwiKTsKICAgIH0KICAgIGlmIChtYXRjaChmdWNrZXJzLnpoaWh1LCBmdWNrZXJzLnpoaWh1MikpIHsKICAgICAgcmVkaXJlY3QoY3VyVVJMLCAidGFyZ2V0Iik7CiAgICB9CiAgICBpZiAobWF0Y2goZnVja2Vycy5kb3ViYW4pKSB7CiAgICAgIHJlZGlyZWN0KGN1clVSTCwgInVybCIpOwogICAgfQogICAgaWYgKG1hdGNoKGZ1Y2tlcnMuZGlsaWFuKSkgewogICAgICByZWRpcmVjdChjdXJVUkwsICJnb3RvIik7CiAgICB9CiAgICBpZiAobWF0Y2goZnVja2Vycy50aGVXb3JzdCkpIHsKICAgICAgZW5hYmxlVVJMcygpOwogICAgfQogICAgaWYgKG1hdGNoKGZ1Y2tlcnMueXkpKSB7CiAgICAgIHJlZGlyZWN0KGN1clVSTCwgInVybCIpOwogICAgfQogICAgaWYgKG1hdGNoKGZ1Y2tlcnMudGhlV29yc3QyKSkgewogICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgkKCIud2V1aS1tc2dfX2Rlc2MiKS5maXJzdCgpLnRleHQoKSk7CiAgICB9CiAgICBpZiAobWF0Y2goZnVja2Vycy5jc2RuKSkgewogICAgICByZWRpcmVjdChjdXJVUkwsICJ0YXJnZXQiKTsKICAgIH0KICAgIGlmIChtYXRjaChmdWNrZXJzLnN0ZWFtKSkgewogICAgICByZWRpcmVjdChjdXJVUkwsICJ1cmwiKTsKICAgIH0KICAgIGlmIChtYXRjaChmdWNrZXJzLmdhbWViaWxpYmlsaSkpIHsKICAgICAgcmVkaXJlY3QoY3VyVVJMLCAidXJsIik7CiAgICB9CiAgICBpZiAobWF0Y2goZnVja2Vycy5vc2NoaW5hKSkgewogICAgICByZWRpcmVjdChjdXJVUkwsICJ1cmwiKTsKICAgIH0KICAgIGlmIChtYXRjaChmdWNrZXJzLndlaXhpbmRldikpIHsKICAgICAgcmVkaXJlY3QoY3VyVVJMLCAiaHJlZiIpOwogICAgfQogICAgaWYgKG1hdGNoKGZ1Y2tlcnMucXFkb2NzKSl7CiAgICAgIHJlZGlyZWN0KGN1clVSTCwgInVybCIpCiAgICB9CiAgICBpZiAobWF0Y2goZnVja2Vycy5waXhpdikpewogICAgICByZWRpcmVjdChjdXJVUkwsICJ1cmwiKQogICAgfQogIH0pOwoKfSkoKTsK","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js","ts":1615031266366,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2My41LjEgfCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lLmRvY3VtZW50P3QoZSwhMCk6ZnVuY3Rpb24oZSl7aWYoIWUuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIHQoZSl9OnQoZSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKEMsZSl7InVzZSBzdHJpY3QiO3ZhciB0PVtdLHI9T2JqZWN0LmdldFByb3RvdHlwZU9mLHM9dC5zbGljZSxnPXQuZmxhdD9mdW5jdGlvbihlKXtyZXR1cm4gdC5mbGF0LmNhbGwoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiB0LmNvbmNhdC5hcHBseShbXSxlKX0sdT10LnB1c2gsaT10LmluZGV4T2Ysbj17fSxvPW4udG9TdHJpbmcsdj1uLmhhc093blByb3BlcnR5LGE9di50b1N0cmluZyxsPWEuY2FsbChPYmplY3QpLHk9e30sbT1mdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZSYmIm51bWJlciIhPXR5cGVvZiBlLm5vZGVUeXBlfSx4PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZlPT09ZS53aW5kb3d9LEU9Qy5kb2N1bWVudCxjPXt0eXBlOiEwLHNyYzohMCxub25jZTohMCxub01vZHVsZTohMH07ZnVuY3Rpb24gYihlLHQsbil7dmFyIHIsaSxvPShuPW58fEUpLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2lmKG8udGV4dD1lLHQpZm9yKHIgaW4gYykoaT10W3JdfHx0LmdldEF0dHJpYnV0ZSYmdC5nZXRBdHRyaWJ1dGUocikpJiZvLnNldEF0dHJpYnV0ZShyLGkpO24uaGVhZC5hcHBlbmRDaGlsZChvKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG8pfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIG51bGw9PWU/ZSsiIjoib2JqZWN0Ij09dHlwZW9mIGV8fCJmdW5jdGlvbiI9PXR5cGVvZiBlP25bby5jYWxsKGUpXXx8Im9iamVjdCI6dHlwZW9mIGV9dmFyIGY9IjMuNS4xIixTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBTLmZuLmluaXQoZSx0KX07ZnVuY3Rpb24gcChlKXt2YXIgdD0hIWUmJiJsZW5ndGgiaW4gZSYmZS5sZW5ndGgsbj13KGUpO3JldHVybiFtKGUpJiYheChlKSYmKCJhcnJheSI9PT1ufHwwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiYwPHQmJnQtMSBpbiBlKX1TLmZuPVMucHJvdG90eXBlPXtqcXVlcnk6Zixjb25zdHJ1Y3RvcjpTLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gcy5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/cy5jYWxsKHRoaXMpOmU8MD90aGlzW2UrdGhpcy5sZW5ndGhdOnRoaXNbZV19LHB1c2hTdGFjazpmdW5jdGlvbihlKXt2YXIgdD1TLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxlKTtyZXR1cm4gdC5wcmV2T2JqZWN0PXRoaXMsdH0sZWFjaDpmdW5jdGlvbihlKXtyZXR1cm4gUy5lYWNoKHRoaXMsZSl9LG1hcDpmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5tYXAodGhpcyxmdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0LGUpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhzLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGV2ZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5ncmVwKHRoaXMsZnVuY3Rpb24oZSx0KXtyZXR1cm4odCsxKSUyfSkpfSxvZGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5ncmVwKHRoaXMsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCUyfSkpfSxlcTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmxlbmd0aCxuPStlKyhlPDA/dDowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soMDw9biYmbjx0P1t0aGlzW25dXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDp1LHNvcnQ6dC5zb3J0LHNwbGljZTp0LnNwbGljZX0sUy5leHRlbmQ9Uy5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixpLG8sYT1hcmd1bWVudHNbMF18fHt9LHM9MSx1PWFyZ3VtZW50cy5sZW5ndGgsbD0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgYSYmKGw9YSxhPWFyZ3VtZW50c1tzXXx8e30scysrKSwib2JqZWN0Ij09dHlwZW9mIGF8fG0oYSl8fChhPXt9KSxzPT09dSYmKGE9dGhpcyxzLS0pO3M8dTtzKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW3NdKSlmb3IodCBpbiBlKXI9ZVt0XSwiX19wcm90b19fIiE9PXQmJmEhPT1yJiYobCYmciYmKFMuaXNQbGFpbk9iamVjdChyKXx8KGk9QXJyYXkuaXNBcnJheShyKSkpPyhuPWFbdF0sbz1pJiYhQXJyYXkuaXNBcnJheShuKT9bXTppfHxTLmlzUGxhaW5PYmplY3Qobik/bjp7fSxpPSExLGFbdF09Uy5leHRlbmQobCxvLHIpKTp2b2lkIDAhPT1yJiYoYVt0XT1yKSk7cmV0dXJuIGF9LFMuZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhmK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKGUpfSxub29wOmZ1bmN0aW9uKCl7fSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuISghZXx8IltvYmplY3QgT2JqZWN0XSIhPT1vLmNhbGwoZSkpJiYoISh0PXIoZSkpfHwiZnVuY3Rpb24iPT10eXBlb2Yobj12LmNhbGwodCwiY29uc3RydWN0b3IiKSYmdC5jb25zdHJ1Y3RvcikmJmEuY2FsbChuKT09PWwpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oZSx0LG4pe2IoZSx7bm9uY2U6dCYmdC5ub25jZX0sbil9LGVhY2g6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTA7aWYocChlKSl7Zm9yKG49ZS5sZW5ndGg7cjxuO3IrKylpZighMT09PXQuY2FsbChlW3JdLHIsZVtyXSkpYnJlYWt9ZWxzZSBmb3IociBpbiBlKWlmKCExPT09dC5jYWxsKGVbcl0scixlW3JdKSlicmVhaztyZXR1cm4gZX0sbWFrZUFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIG49dHx8W107cmV0dXJuIG51bGwhPWUmJihwKE9iamVjdChlKSk/Uy5tZXJnZShuLCJzdHJpbmciPT10eXBlb2YgZT9bZV06ZSk6dS5jYWxsKG4sZSkpLG59LGluQXJyYXk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT10Py0xOmkuY2FsbCh0LGUsbil9LG1lcmdlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPSt0Lmxlbmd0aCxyPTAsaT1lLmxlbmd0aDtyPG47cisrKWVbaSsrXT10W3JdO3JldHVybiBlLmxlbmd0aD1pLGV9LGdyZXA6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1bXSxpPTAsbz1lLmxlbmd0aCxhPSFuO2k8bztpKyspIXQoZVtpXSxpKSE9PWEmJnIucHVzaChlW2ldKTtyZXR1cm4gcn0sbWFwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89MCxhPVtdO2lmKHAoZSkpZm9yKHI9ZS5sZW5ndGg7bzxyO28rKyludWxsIT0oaT10KGVbb10sbyxuKSkmJmEucHVzaChpKTtlbHNlIGZvcihvIGluIGUpbnVsbCE9KGk9dChlW29dLG8sbikpJiZhLnB1c2goaSk7cmV0dXJuIGcoYSl9LGd1aWQ6MSxzdXBwb3J0Onl9KSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoUy5mbltTeW1ib2wuaXRlcmF0b3JdPXRbU3ltYm9sLml0ZXJhdG9yXSksUy5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe25bIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7dmFyIGQ9ZnVuY3Rpb24obil7dmFyIGUsZCxiLG8saSxoLGYsZyx3LHUsbCxULEMsYSxFLHYscyxjLHksUz0ic2l6emxlIisxKm5ldyBEYXRlLHA9bi5kb2N1bWVudCxrPTAscj0wLG09dWUoKSx4PXVlKCksQT11ZSgpLE49dWUoKSxEPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10JiYobD0hMCksMH0saj17fS5oYXNPd25Qcm9wZXJ0eSx0PVtdLHE9dC5wb3AsTD10LnB1c2gsSD10LnB1c2gsTz10LnNsaWNlLFA9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LFI9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixNPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixJPSIoPzpcXFxcW1xcZGEtZkEtRl17MSw2fSIrTSsiP3xcXFxcW15cXHJcXG5cXGZdfFtcXHctXXxbXlwwLVxceDdmXSkrIixXPSJcXFsiK00rIiooIitJKyIpKD86IitNKyIqKFsqXiR8IX5dPz0pIitNKyIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIrSSsiKSl8KSIrTSsiKlxcXSIsRj0iOigiK0krIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK1crIikqKXwuKilcXCl8KSIsQj1uZXcgUmVnRXhwKE0rIisiLCJnIiksJD1uZXcgUmVnRXhwKCJeIitNKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK00rIiskIiwiZyIpLF89bmV3IFJlZ0V4cCgiXiIrTSsiKiwiK00rIioiKSx6PW5ldyBSZWdFeHAoIl4iK00rIiooWz4rfl18IitNKyIpIitNKyIqIiksVT1uZXcgUmVnRXhwKE0rInw+IiksWD1uZXcgUmVnRXhwKEYpLFY9bmV3IFJlZ0V4cCgiXiIrSSsiJCIpLEc9e0lEOm5ldyBSZWdFeHAoIl4jKCIrSSsiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitJKyIpIiksVEFHOm5ldyBSZWdFeHAoIl4oIitJKyJ8WypdKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrVyksUFNFVURPOm5ldyBSZWdFeHAoIl4iK0YpLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTSsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTSsiKig/OihbKy1dfCkiK00rIiooXFxkKyl8KSkiK00rIipcXCl8KSIsImkiKSxib29sOm5ldyBSZWdFeHAoIl4oPzoiK1IrIikkIiwiaSIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKCJeIitNKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK00rIiooKD86LVxcZCk/XFxkKikiK00rIipcXCl8KSg/PVteLV18JCkiLCJpIil9LFk9L0hUTUwkL2ksUT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLEo9L15oXGQkL2ksSz0vXltee10rXHtccypcW25hdGl2ZSBcdy8sWj0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLGVlPS9bK35dLyx0ZT1uZXcgUmVnRXhwKCJcXFxcW1xcZGEtZkEtRl17MSw2fSIrTSsiP3xcXFxcKFteXFxyXFxuXFxmXSkiLCJnIiksbmU9ZnVuY3Rpb24oZSx0KXt2YXIgbj0iMHgiK2Uuc2xpY2UoMSktNjU1MzY7cmV0dXJuIHR8fChuPDA/U3RyaW5nLmZyb21DaGFyQ29kZShuKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKG4+PjEwfDU1Mjk2LDEwMjMmbnw1NjMyMCkpfSxyZT0vKFtcMC1ceDFmXHg3Zl18Xi0/XGQpfF4tJHxbXlwwLVx4MWZceDdmLVx1RkZGRlx3LV0vZyxpZT1mdW5jdGlvbihlLHQpe3JldHVybiB0PyJcMCI9PT1lPyJcdWZmZmQiOmUuc2xpY2UoMCwtMSkrIlxcIitlLmNoYXJDb2RlQXQoZS5sZW5ndGgtMSkudG9TdHJpbmcoMTYpKyIgIjoiXFwiK2V9LG9lPWZ1bmN0aW9uKCl7VCgpfSxhZT1iZShmdW5jdGlvbihlKXtyZXR1cm4hMD09PWUuZGlzYWJsZWQmJiJmaWVsZHNldCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCl9LHtkaXI6InBhcmVudE5vZGUiLG5leHQ6ImxlZ2VuZCJ9KTt0cnl7SC5hcHBseSh0PU8uY2FsbChwLmNoaWxkTm9kZXMpLHAuY2hpbGROb2RlcyksdFtwLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlKXtIPXthcHBseTp0Lmxlbmd0aD9mdW5jdGlvbihlLHQpe0wuYXBwbHkoZSxPLmNhbGwodCkpfTpmdW5jdGlvbihlLHQpe3ZhciBuPWUubGVuZ3RoLHI9MDt3aGlsZShlW24rK109dFtyKytdKTtlLmxlbmd0aD1uLTF9fX1mdW5jdGlvbiBzZSh0LGUsbixyKXt2YXIgaSxvLGEscyx1LGwsYyxmPWUmJmUub3duZXJEb2N1bWVudCxwPWU/ZS5ub2RlVHlwZTo5O2lmKG49bnx8W10sInN0cmluZyIhPXR5cGVvZiB0fHwhdHx8MSE9PXAmJjkhPT1wJiYxMSE9PXApcmV0dXJuIG47aWYoIXImJihUKGUpLGU9ZXx8QyxFKSl7aWYoMTEhPT1wJiYodT1aLmV4ZWModCkpKWlmKGk9dVsxXSl7aWYoOT09PXApe2lmKCEoYT1lLmdldEVsZW1lbnRCeUlkKGkpKSlyZXR1cm4gbjtpZihhLmlkPT09aSlyZXR1cm4gbi5wdXNoKGEpLG59ZWxzZSBpZihmJiYoYT1mLmdldEVsZW1lbnRCeUlkKGkpKSYmeShlLGEpJiZhLmlkPT09aSlyZXR1cm4gbi5wdXNoKGEpLG59ZWxzZXtpZih1WzJdKXJldHVybiBILmFwcGx5KG4sZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0KSksbjtpZigoaT11WzNdKSYmZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkobixlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaSkpLG59aWYoZC5xc2EmJiFOW3QrIiAiXSYmKCF2fHwhdi50ZXN0KHQpKSYmKDEhPT1wfHwib2JqZWN0IiE9PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkpe2lmKGM9dCxmPWUsMT09PXAmJihVLnRlc3QodCl8fHoudGVzdCh0KSkpeyhmPWVlLnRlc3QodCkmJnllKGUucGFyZW50Tm9kZSl8fGUpPT09ZSYmZC5zY29wZXx8KChzPWUuZ2V0QXR0cmlidXRlKCJpZCIpKT9zPXMucmVwbGFjZShyZSxpZSk6ZS5zZXRBdHRyaWJ1dGUoImlkIixzPVMpKSxvPShsPWgodCkpLmxlbmd0aDt3aGlsZShvLS0pbFtvXT0ocz8iIyIrczoiOnNjb3BlIikrIiAiK3hlKGxbb10pO2M9bC5qb2luKCIsIil9dHJ5e3JldHVybiBILmFwcGx5KG4sZi5xdWVyeVNlbGVjdG9yQWxsKGMpKSxufWNhdGNoKGUpe04odCwhMCl9ZmluYWxseXtzPT09UyYmZS5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gZyh0LnJlcGxhY2UoJCwiJDEiKSxlLG4scil9ZnVuY3Rpb24gdWUoKXt2YXIgcj1bXTtyZXR1cm4gZnVuY3Rpb24gZSh0LG4pe3JldHVybiByLnB1c2godCsiICIpPmIuY2FjaGVMZW5ndGgmJmRlbGV0ZSBlW3Iuc2hpZnQoKV0sZVt0KyIgIl09bn19ZnVuY3Rpb24gbGUoZSl7cmV0dXJuIGVbU109ITAsZX1mdW5jdGlvbiBjZShlKXt2YXIgdD1DLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0Iik7dHJ5e3JldHVybiEhZSh0KX1jYXRjaChlKXtyZXR1cm4hMX1maW5hbGx5e3QucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHQ9bnVsbH19ZnVuY3Rpb24gZmUoZSx0KXt2YXIgbj1lLnNwbGl0KCJ8Iikscj1uLmxlbmd0aDt3aGlsZShyLS0pYi5hdHRySGFuZGxlW25bcl1dPXR9ZnVuY3Rpb24gcGUoZSx0KXt2YXIgbj10JiZlLHI9biYmMT09PWUubm9kZVR5cGUmJjE9PT10Lm5vZGVUeXBlJiZlLnNvdXJjZUluZGV4LXQuc291cmNlSW5kZXg7aWYocilyZXR1cm4gcjtpZihuKXdoaWxlKG49bi5uZXh0U2libGluZylpZihuPT09dClyZXR1cm4tMTtyZXR1cm4gZT8xOi0xfWZ1bmN0aW9uIGRlKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZlLnR5cGU9PT10fX1mdW5jdGlvbiBoZShuKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09dHx8ImJ1dHRvbiI9PT10KSYmZS50eXBlPT09bn19ZnVuY3Rpb24gZ2UodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiJmb3JtImluIGU/ZS5wYXJlbnROb2RlJiYhMT09PWUuZGlzYWJsZWQ/ImxhYmVsImluIGU/ImxhYmVsImluIGUucGFyZW50Tm9kZT9lLnBhcmVudE5vZGUuZGlzYWJsZWQ9PT10OmUuZGlzYWJsZWQ9PT10OmUuaXNEaXNhYmxlZD09PXR8fGUuaXNEaXNhYmxlZCE9PSF0JiZhZShlKT09PXQ6ZS5kaXNhYmxlZD09PXQ6ImxhYmVsImluIGUmJmUuZGlzYWJsZWQ9PT10fX1mdW5jdGlvbiB2ZShhKXtyZXR1cm4gbGUoZnVuY3Rpb24obyl7cmV0dXJuIG89K28sbGUoZnVuY3Rpb24oZSx0KXt2YXIgbixyPWEoW10sZS5sZW5ndGgsbyksaT1yLmxlbmd0aDt3aGlsZShpLS0pZVtuPXJbaV1dJiYoZVtuXT0hKHRbbl09ZVtuXSkpfSl9KX1mdW5jdGlvbiB5ZShlKXtyZXR1cm4gZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lJiZlfWZvcihlIGluIGQ9c2Uuc3VwcG9ydD17fSxpPXNlLmlzWE1MPWZ1bmN0aW9uKGUpe3ZhciB0PWUubmFtZXNwYWNlVVJJLG49KGUub3duZXJEb2N1bWVudHx8ZSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiFZLnRlc3QodHx8biYmbi5ub2RlTmFtZXx8IkhUTUwiKX0sVD1zZS5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt2YXIgdCxuLHI9ZT9lLm93bmVyRG9jdW1lbnR8fGU6cDtyZXR1cm4gciE9QyYmOT09PXIubm9kZVR5cGUmJnIuZG9jdW1lbnRFbGVtZW50JiYoYT0oQz1yKS5kb2N1bWVudEVsZW1lbnQsRT0haShDKSxwIT1DJiYobj1DLmRlZmF1bHRWaWV3KSYmbi50b3AhPT1uJiYobi5hZGRFdmVudExpc3RlbmVyP24uYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIixvZSwhMSk6bi5hdHRhY2hFdmVudCYmbi5hdHRhY2hFdmVudCgib251bmxvYWQiLG9lKSksZC5zY29wZT1jZShmdW5jdGlvbihlKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZChDLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSwidW5kZWZpbmVkIiE9dHlwZW9mIGUucXVlcnlTZWxlY3RvckFsbCYmIWUucXVlcnlTZWxlY3RvckFsbCgiOnNjb3BlIGZpZWxkc2V0IGRpdiIpLmxlbmd0aH0pLGQuYXR0cmlidXRlcz1jZShmdW5jdGlvbihlKXtyZXR1cm4gZS5jbGFzc05hbWU9ImkiLCFlLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxkLmdldEVsZW1lbnRzQnlUYWdOYW1lPWNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKEMuY3JlYXRlQ29tbWVudCgiIikpLCFlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPUsudGVzdChDLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGQuZ2V0QnlJZD1jZShmdW5jdGlvbihlKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlKS5pZD1TLCFDLmdldEVsZW1lbnRzQnlOYW1lfHwhQy5nZXRFbGVtZW50c0J5TmFtZShTKS5sZW5ndGh9KSxkLmdldEJ5SWQ/KGIuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZSh0ZSxuZSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgiaWQiKT09PXR9fSxiLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQmJkUpe3ZhciBuPXQuZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIG4/W25dOltdfX0pOihiLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgbj1lLnJlcGxhY2UodGUsbmUpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD0idW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiB0JiZ0LnZhbHVlPT09bn19LGIuZmluZC5JRD1mdW5jdGlvbihlLHQpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgdC5nZXRFbGVtZW50QnlJZCYmRSl7dmFyIG4scixpLG89dC5nZXRFbGVtZW50QnlJZChlKTtpZihvKXtpZigobj1vLmdldEF0dHJpYnV0ZU5vZGUoImlkIikpJiZuLnZhbHVlPT09ZSlyZXR1cm5bb107aT10LmdldEVsZW1lbnRzQnlOYW1lKGUpLHI9MDt3aGlsZShvPWlbcisrXSlpZigobj1vLmdldEF0dHJpYnV0ZU5vZGUoImlkIikpJiZuLnZhbHVlPT09ZSlyZXR1cm5bb119cmV0dXJuW119fSksYi5maW5kLlRBRz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGUsdCl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiB0LmdldEVsZW1lbnRzQnlUYWdOYW1lP3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6ZC5xc2E/dC5xdWVyeVNlbGVjdG9yQWxsKGUpOnZvaWQgMH06ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9MCxvPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk7aWYoIioiPT09ZSl7d2hpbGUobj1vW2krK10pMT09PW4ubm9kZVR5cGUmJnIucHVzaChuKTtyZXR1cm4gcn1yZXR1cm4gb30sYi5maW5kLkNMQVNTPWQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmRSlyZXR1cm4gdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpfSxzPVtdLHY9W10sKGQucXNhPUsudGVzdChDLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGNlKGZ1bmN0aW9uKGUpe3ZhciB0O2EuYXBwZW5kQ2hpbGQoZSkuaW5uZXJIVE1MPSI8YSBpZD0nIitTKyInPjwvYT48c2VsZWN0IGlkPSciK1MrIi1cclxcJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsZS5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCYmdi5wdXNoKCJbKl4kXT0iK00rIiooPzonJ3xcIlwiKSIpLGUucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8di5wdXNoKCJcXFsiK00rIiooPzp2YWx1ZXwiK1IrIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZH49IitTKyItXSIpLmxlbmd0aHx8di5wdXNoKCJ+PSIpLCh0PUMuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSkuc2V0QXR0cmlidXRlKCJuYW1lIiwiIiksZS5hcHBlbmRDaGlsZCh0KSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPScnXSIpLmxlbmd0aHx8di5wdXNoKCJcXFsiK00rIipuYW1lIitNKyIqPSIrTSsiKig/OicnfFwiXCIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8di5wdXNoKCI6Y2hlY2tlZCIpLGUucXVlcnlTZWxlY3RvckFsbCgiYSMiK1MrIisqIikubGVuZ3RofHx2LnB1c2goIi4jLitbK35dIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJcXFxmIiksdi5wdXNoKCJbXFxyXFxuXFxmXSIpfSksY2UoZnVuY3Rpb24oZSl7ZS5pbm5lckhUTUw9IjxhIGhyZWY9JycgZGlzYWJsZWQ9J2Rpc2FibGVkJz48L2E+PHNlbGVjdCBkaXNhYmxlZD0nZGlzYWJsZWQnPjxvcHRpb24vPjwvc2VsZWN0PiI7dmFyIHQ9Qy5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO3Quc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksZS5hcHBlbmRDaGlsZCh0KS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCYmdi5wdXNoKCJuYW1lIitNKyIqWypeJHwhfl0/PSIpLDIhPT1lLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RoJiZ2LnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5hcHBlbmRDaGlsZChlKS5kaXNhYmxlZD0hMCwyIT09ZS5xdWVyeVNlbGVjdG9yQWxsKCI6ZGlzYWJsZWQiKS5sZW5ndGgmJnYucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSx2LnB1c2goIiwuKjoiKX0pKSwoZC5tYXRjaGVzU2VsZWN0b3I9Sy50ZXN0KGM9YS5tYXRjaGVzfHxhLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8YS5tb3pNYXRjaGVzU2VsZWN0b3J8fGEub01hdGNoZXNTZWxlY3Rvcnx8YS5tc01hdGNoZXNTZWxlY3RvcikpJiZjZShmdW5jdGlvbihlKXtkLmRpc2Nvbm5lY3RlZE1hdGNoPWMuY2FsbChlLCIqIiksYy5jYWxsKGUsIltzIT0nJ106eCIpLHMucHVzaCgiIT0iLEYpfSksdj12Lmxlbmd0aCYmbmV3IFJlZ0V4cCh2LmpvaW4oInwiKSkscz1zLmxlbmd0aCYmbmV3IFJlZ0V4cChzLmpvaW4oInwiKSksdD1LLnRlc3QoYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbikseT10fHxLLnRlc3QoYS5jb250YWlucyk/ZnVuY3Rpb24oZSx0KXt2YXIgbj05PT09ZS5ub2RlVHlwZT9lLmRvY3VtZW50RWxlbWVudDplLHI9dCYmdC5wYXJlbnROb2RlO3JldHVybiBlPT09cnx8ISghcnx8MSE9PXIubm9kZVR5cGV8fCEobi5jb250YWlucz9uLmNvbnRhaW5zKHIpOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24ocikpKX06ZnVuY3Rpb24oZSx0KXtpZih0KXdoaWxlKHQ9dC5wYXJlbnROb2RlKWlmKHQ9PT1lKXJldHVybiEwO3JldHVybiExfSxEPXQ/ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gbD0hMCwwO3ZhciBuPSFlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSF0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBufHwoMSYobj0oZS5vd25lckRvY3VtZW50fHxlKT09KHQub3duZXJEb2N1bWVudHx8dCk/ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KToxKXx8IWQuc29ydERldGFjaGVkJiZ0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGUpPT09bj9lPT1DfHxlLm93bmVyRG9jdW1lbnQ9PXAmJnkocCxlKT8tMTp0PT1DfHx0Lm93bmVyRG9jdW1lbnQ9PXAmJnkocCx0KT8xOnU/UCh1LGUpLVAodSx0KTowOjQmbj8tMToxKX06ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gbD0hMCwwO3ZhciBuLHI9MCxpPWUucGFyZW50Tm9kZSxvPXQucGFyZW50Tm9kZSxhPVtlXSxzPVt0XTtpZighaXx8IW8pcmV0dXJuIGU9PUM/LTE6dD09Qz8xOmk/LTE6bz8xOnU/UCh1LGUpLVAodSx0KTowO2lmKGk9PT1vKXJldHVybiBwZShlLHQpO249ZTt3aGlsZShuPW4ucGFyZW50Tm9kZSlhLnVuc2hpZnQobik7bj10O3doaWxlKG49bi5wYXJlbnROb2RlKXMudW5zaGlmdChuKTt3aGlsZShhW3JdPT09c1tyXSlyKys7cmV0dXJuIHI/cGUoYVtyXSxzW3JdKTphW3JdPT1wPy0xOnNbcl09PXA/MTowfSksQ30sc2UubWF0Y2hlcz1mdW5jdGlvbihlLHQpe3JldHVybiBzZShlLG51bGwsbnVsbCx0KX0sc2UubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGUsdCl7aWYoVChlKSxkLm1hdGNoZXNTZWxlY3RvciYmRSYmIU5bdCsiICJdJiYoIXN8fCFzLnRlc3QodCkpJiYoIXZ8fCF2LnRlc3QodCkpKXRyeXt2YXIgbj1jLmNhbGwoZSx0KTtpZihufHxkLmRpc2Nvbm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG59Y2F0Y2goZSl7Tih0LCEwKX1yZXR1cm4gMDxzZSh0LEMsbnVsbCxbZV0pLmxlbmd0aH0sc2UuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9QyYmVChlKSx5KGUsdCl9LHNlLmF0dHI9ZnVuY3Rpb24oZSx0KXsoZS5vd25lckRvY3VtZW50fHxlKSE9QyYmVChlKTt2YXIgbj1iLmF0dHJIYW5kbGVbdC50b0xvd2VyQ2FzZSgpXSxyPW4mJmouY2FsbChiLmF0dHJIYW5kbGUsdC50b0xvd2VyQ2FzZSgpKT9uKGUsdCwhRSk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1yP3I6ZC5hdHRyaWJ1dGVzfHwhRT9lLmdldEF0dHJpYnV0ZSh0KToocj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZyLnNwZWNpZmllZD9yLnZhbHVlOm51bGx9LHNlLmVzY2FwZT1mdW5jdGlvbihlKXtyZXR1cm4oZSsiIikucmVwbGFjZShyZSxpZSl9LHNlLmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitlKX0sc2UudW5pcXVlU29ydD1mdW5jdGlvbihlKXt2YXIgdCxuPVtdLHI9MCxpPTA7aWYobD0hZC5kZXRlY3REdXBsaWNhdGVzLHU9IWQuc29ydFN0YWJsZSYmZS5zbGljZSgwKSxlLnNvcnQoRCksbCl7d2hpbGUodD1lW2krK10pdD09PWVbaV0mJihyPW4ucHVzaChpKSk7d2hpbGUoci0tKWUuc3BsaWNlKG5bcl0sMSl9cmV0dXJuIHU9bnVsbCxlfSxvPXNlLmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixyPTAsaT1lLm5vZGVUeXBlO2lmKGkpe2lmKDE9PT1pfHw5PT09aXx8MTE9PT1pKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPW8oZSl9ZWxzZSBpZigzPT09aXx8ND09PWkpcmV0dXJuIGUubm9kZVZhbHVlfWVsc2Ugd2hpbGUodD1lW3IrK10pbis9byh0KTtyZXR1cm4gbn0sKGI9c2Uuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86bGUsbWF0Y2g6RyxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKHRlLG5lKSxlWzNdPShlWzNdfHxlWzRdfHxlWzVdfHwiIikucmVwbGFjZSh0ZSxuZSksIn49Ij09PWVbMl0mJihlWzNdPSIgIitlWzNdKyIgIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fHNlLmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJldmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVszXSkpOmVbM10mJnNlLmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzZdJiZlWzJdO3JldHVybiBHLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVszXT9lWzJdPWVbNF18fGVbNV18fCIiOm4mJlgudGVzdChuKSYmKHQ9aChuLCEwKSkmJih0PW4uaW5kZXhPZigiKSIsbi5sZW5ndGgtdCktbi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UodGUsbmUpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PW1bZSsiICJdO3JldHVybiB0fHwodD1uZXcgUmVnRXhwKCIoXnwiK00rIikiK2UrIigiK00rInwkKSIpKSYmbShlLGZ1bmN0aW9uKGUpe3JldHVybiB0LnRlc3QoInN0cmluZyI9PXR5cGVvZiBlLmNsYXNzTmFtZSYmZS5jbGFzc05hbWV8fCJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihuLHIsaSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXNlLmF0dHIoZSxuKTtyZXR1cm4gbnVsbD09dD8iIT0iPT09cjohcnx8KHQrPSIiLCI9Ij09PXI/dD09PWk6IiE9Ij09PXI/dCE9PWk6Il49Ij09PXI/aSYmMD09PXQuaW5kZXhPZihpKToiKj0iPT09cj9pJiYtMTx0LmluZGV4T2YoaSk6IiQ9Ij09PXI/aSYmdC5zbGljZSgtaS5sZW5ndGgpPT09aToifj0iPT09cj8tMTwoIiAiK3QucmVwbGFjZShCLCIgIikrIiAiKS5pbmRleE9mKGkpOiJ8PSI9PT1yJiYodD09PWl8fHQuc2xpY2UoMCxpLmxlbmd0aCsxKT09PWkrIi0iKSl9fSxDSElMRDpmdW5jdGlvbihoLGUsdCxnLHYpe3ZhciB5PSJudGgiIT09aC5zbGljZSgwLDMpLG09Imxhc3QiIT09aC5zbGljZSgtNCkseD0ib2YtdHlwZSI9PT1lO3JldHVybiAxPT09ZyYmMD09PXY/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbD15IT09bT8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLGM9ZS5wYXJlbnROb2RlLGY9eCYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHA9IW4mJiF4LGQ9ITE7aWYoYyl7aWYoeSl7d2hpbGUobCl7YT1lO3doaWxlKGE9YVtsXSlpZih4P2Eubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWY6MT09PWEubm9kZVR5cGUpcmV0dXJuITE7dT1sPSJvbmx5Ij09PWgmJiF1JiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKHU9W20/Yy5maXJzdENoaWxkOmMubGFzdENoaWxkXSxtJiZwKXtkPShzPShyPShpPShvPShhPWMpW1NdfHwoYVtTXT17fSkpW2EudW5pcXVlSURdfHwob1thLnVuaXF1ZUlEXT17fSkpW2hdfHxbXSlbMF09PT1rJiZyWzFdKSYmclsyXSxhPXMmJmMuY2hpbGROb2Rlc1tzXTt3aGlsZShhPSsrcyYmYSYmYVtsXXx8KGQ9cz0wKXx8dS5wb3AoKSlpZigxPT09YS5ub2RlVHlwZSYmKytkJiZhPT09ZSl7aVtoXT1bayxzLGRdO2JyZWFrfX1lbHNlIGlmKHAmJihkPXM9KHI9KGk9KG89KGE9ZSlbU118fChhW1NdPXt9KSlbYS51bmlxdWVJRF18fChvW2EudW5pcXVlSURdPXt9KSlbaF18fFtdKVswXT09PWsmJnJbMV0pLCExPT09ZCl3aGlsZShhPSsrcyYmYSYmYVtsXXx8KGQ9cz0wKXx8dS5wb3AoKSlpZigoeD9hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1mOjE9PT1hLm5vZGVUeXBlKSYmKytkJiYocCYmKChpPShvPWFbU118fChhW1NdPXt9KSlbYS51bmlxdWVJRF18fChvW2EudW5pcXVlSURdPXt9KSlbaF09W2ssZF0pLGE9PT1lKSlicmVhaztyZXR1cm4oZC09dik9PT1nfHxkJWc9PTAmJjA8PWQvZ319fSxQU0VVRE86ZnVuY3Rpb24oZSxvKXt2YXIgdCxhPWIucHNldWRvc1tlXXx8Yi5zZXRGaWx0ZXJzW2UudG9Mb3dlckNhc2UoKV18fHNlLmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrZSk7cmV0dXJuIGFbU10/YShvKToxPGEubGVuZ3RoPyh0PVtlLGUsIiIsb10sYi5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSk/bGUoZnVuY3Rpb24oZSx0KXt2YXIgbixyPWEoZSxvKSxpPXIubGVuZ3RoO3doaWxlKGktLSllW249UChlLHJbaV0pXT0hKHRbbl09cltpXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gYShlLDAsdCl9KTphfX0scHNldWRvczp7bm90OmxlKGZ1bmN0aW9uKGUpe3ZhciByPVtdLGk9W10scz1mKGUucmVwbGFjZSgkLCIkMSIpKTtyZXR1cm4gc1tTXT9sZShmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvPXMoZSxudWxsLHIsW10pLGE9ZS5sZW5ndGg7d2hpbGUoYS0tKShpPW9bYV0pJiYoZVthXT0hKHRbYV09aSkpfSk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByWzBdPWUscyhyLG51bGwsbixpKSxyWzBdPW51bGwsIWkucG9wKCl9fSksaGFzOmxlKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gMDxzZSh0LGUpLmxlbmd0aH19KSxjb250YWluczpsZShmdW5jdGlvbih0KXtyZXR1cm4gdD10LnJlcGxhY2UodGUsbmUpLGZ1bmN0aW9uKGUpe3JldHVybi0xPChlLnRleHRDb250ZW50fHxvKGUpKS5pbmRleE9mKHQpfX0pLGxhbmc6bGUoZnVuY3Rpb24obil7cmV0dXJuIFYudGVzdChufHwiIil8fHNlLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK24pLG49bi5yZXBsYWNlKHRlLG5lKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGUpe3ZhciB0O2Rve2lmKHQ9RT9lLmxhbmc6ZS5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIil8fGUuZ2V0QXR0cmlidXRlKCJsYW5nIikpcmV0dXJuKHQ9dC50b0xvd2VyQ2FzZSgpKT09PW58fDA9PT10LmluZGV4T2YobisiLSIpfXdoaWxlKChlPWUucGFyZW50Tm9kZSkmJjE9PT1lLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9bi5sb2NhdGlvbiYmbi5sb2NhdGlvbi5oYXNoO3JldHVybiB0JiZ0LnNsaWNlKDEpPT09ZS5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWF9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09Qy5hY3RpdmVFbGVtZW50JiYoIUMuaGFzRm9jdXN8fEMuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6Z2UoITEpLGRpc2FibGVkOmdlKCEwKSxjaGVja2VkOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmISFlLmNoZWNrZWR8fCJvcHRpb24iPT09dCYmISFlLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCwhMD09PWUuc2VsZWN0ZWR9LGVtcHR5OmZ1bmN0aW9uKGUpe2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylpZihlLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4hYi5wc2V1ZG9zLmVtcHR5KGUpfSxoZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIEoudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFEudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmImJ1dHRvbiI9PT1lLnR5cGV8fCJidXR0b24iPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1lLnR5cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09dC50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6dmUoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OnZlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuW3QtMV19KSxlcTp2ZShmdW5jdGlvbihlLHQsbil7cmV0dXJuW248MD9uK3Q6bl19KSxldmVuOnZlKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTA7bjx0O24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksb2RkOnZlKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTE7bjx0O24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksbHQ6dmUoZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1uPDA/bit0OnQ8bj90Om47MDw9LS1yOyllLnB1c2gocik7cmV0dXJuIGV9KSxndDp2ZShmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPW48MD9uK3Q6bjsrK3I8dDspZS5wdXNoKHIpO3JldHVybiBlfSl9fSkucHNldWRvcy5udGg9Yi5wc2V1ZG9zLmVxLHtyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSliLnBzZXVkb3NbZV09ZGUoZSk7Zm9yKGUgaW57c3VibWl0OiEwLHJlc2V0OiEwfSliLnBzZXVkb3NbZV09aGUoZSk7ZnVuY3Rpb24gbWUoKXt9ZnVuY3Rpb24geGUoZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aCxyPSIiO3Q8bjt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiBiZShzLGUsdCl7dmFyIHU9ZS5kaXIsbD1lLm5leHQsYz1sfHx1LGY9dCYmInBhcmVudE5vZGUiPT09YyxwPXIrKztyZXR1cm4gZS5maXJzdD9mdW5jdGlvbihlLHQsbil7d2hpbGUoZT1lW3VdKWlmKDE9PT1lLm5vZGVUeXBlfHxmKXJldHVybiBzKGUsdCxuKTtyZXR1cm4hMX06ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhPVtrLHBdO2lmKG4pe3doaWxlKGU9ZVt1XSlpZigoMT09PWUubm9kZVR5cGV8fGYpJiZzKGUsdCxuKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGU9ZVt1XSlpZigxPT09ZS5ub2RlVHlwZXx8ZilpZihpPShvPWVbU118fChlW1NdPXt9KSlbZS51bmlxdWVJRF18fChvW2UudW5pcXVlSURdPXt9KSxsJiZsPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKWU9ZVt1XXx8ZTtlbHNle2lmKChyPWlbY10pJiZyWzBdPT09ayYmclsxXT09PXApcmV0dXJuIGFbMl09clsyXTtpZigoaVtjXT1hKVsyXT1zKGUsdCxuKSlyZXR1cm4hMH1yZXR1cm4hMX19ZnVuY3Rpb24gd2UoaSl7cmV0dXJuIDE8aS5sZW5ndGg/ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWkubGVuZ3RoO3doaWxlKHItLSlpZighaVtyXShlLHQsbikpcmV0dXJuITE7cmV0dXJuITB9OmlbMF19ZnVuY3Rpb24gVGUoZSx0LG4scixpKXtmb3IodmFyIG8sYT1bXSxzPTAsdT1lLmxlbmd0aCxsPW51bGwhPXQ7czx1O3MrKykobz1lW3NdKSYmKG4mJiFuKG8scixpKXx8KGEucHVzaChvKSxsJiZ0LnB1c2gocykpKTtyZXR1cm4gYX1mdW5jdGlvbiBDZShkLGgsZyx2LHksZSl7cmV0dXJuIHYmJiF2W1NdJiYodj1DZSh2KSkseSYmIXlbU10mJih5PUNlKHksZSkpLGxlKGZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzPVtdLHU9W10sbD10Lmxlbmd0aCxjPWV8fGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPXQubGVuZ3RoO3I8aTtyKyspc2UoZSx0W3JdLG4pO3JldHVybiBufShofHwiKiIsbi5ub2RlVHlwZT9bbl06bixbXSksZj0hZHx8IWUmJmg/YzpUZShjLHMsZCxuLHIpLHA9Zz95fHwoZT9kOmx8fHYpP1tdOnQ6ZjtpZihnJiZnKGYscCxuLHIpLHYpe2k9VGUocCx1KSx2KGksW10sbixyKSxvPWkubGVuZ3RoO3doaWxlKG8tLSkoYT1pW29dKSYmKHBbdVtvXV09IShmW3Vbb11dPWEpKX1pZihlKXtpZih5fHxkKXtpZih5KXtpPVtdLG89cC5sZW5ndGg7d2hpbGUoby0tKShhPXBbb10pJiZpLnB1c2goZltvXT1hKTt5KG51bGwscD1bXSxpLHIpfW89cC5sZW5ndGg7d2hpbGUoby0tKShhPXBbb10pJiYtMTwoaT15P1AoZSxhKTpzW29dKSYmKGVbaV09ISh0W2ldPWEpKX19ZWxzZSBwPVRlKHA9PT10P3Auc3BsaWNlKGwscC5sZW5ndGgpOnApLHk/eShudWxsLHQscCxyKTpILmFwcGx5KHQscCl9KX1mdW5jdGlvbiBFZShlKXtmb3IodmFyIGksdCxuLHI9ZS5sZW5ndGgsbz1iLnJlbGF0aXZlW2VbMF0udHlwZV0sYT1vfHxiLnJlbGF0aXZlWyIgIl0scz1vPzE6MCx1PWJlKGZ1bmN0aW9uKGUpe3JldHVybiBlPT09aX0sYSwhMCksbD1iZShmdW5jdGlvbihlKXtyZXR1cm4tMTxQKGksZSl9LGEsITApLGM9W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj0hbyYmKG58fHQhPT13KXx8KChpPXQpLm5vZGVUeXBlP3UoZSx0LG4pOmwoZSx0LG4pKTtyZXR1cm4gaT1udWxsLHJ9XTtzPHI7cysrKWlmKHQ9Yi5yZWxhdGl2ZVtlW3NdLnR5cGVdKWM9W2JlKHdlKGMpLHQpXTtlbHNle2lmKCh0PWIuZmlsdGVyW2Vbc10udHlwZV0uYXBwbHkobnVsbCxlW3NdLm1hdGNoZXMpKVtTXSl7Zm9yKG49KytzO248cjtuKyspaWYoYi5yZWxhdGl2ZVtlW25dLnR5cGVdKWJyZWFrO3JldHVybiBDZSgxPHMmJndlKGMpLDE8cyYmeGUoZS5zbGljZSgwLHMtMSkuY29uY2F0KHt2YWx1ZToiICI9PT1lW3MtMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZSgkLCIkMSIpLHQsczxuJiZFZShlLnNsaWNlKHMsbikpLG48ciYmRWUoZT1lLnNsaWNlKG4pKSxuPHImJnhlKGUpKX1jLnB1c2godCl9cmV0dXJuIHdlKGMpfXJldHVybiBtZS5wcm90b3R5cGU9Yi5maWx0ZXJzPWIucHNldWRvcyxiLnNldEZpbHRlcnM9bmV3IG1lLGg9c2UudG9rZW5pemU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHMsdSxsPXhbZSsiICJdO2lmKGwpcmV0dXJuIHQ/MDpsLnNsaWNlKDApO2E9ZSxzPVtdLHU9Yi5wcmVGaWx0ZXI7d2hpbGUoYSl7Zm9yKG8gaW4gbiYmIShyPV8uZXhlYyhhKSl8fChyJiYoYT1hLnNsaWNlKHJbMF0ubGVuZ3RoKXx8YSkscy5wdXNoKGk9W10pKSxuPSExLChyPXouZXhlYyhhKSkmJihuPXIuc2hpZnQoKSxpLnB1c2goe3ZhbHVlOm4sdHlwZTpyWzBdLnJlcGxhY2UoJCwiICIpfSksYT1hLnNsaWNlKG4ubGVuZ3RoKSksYi5maWx0ZXIpIShyPUdbb10uZXhlYyhhKSl8fHVbb10mJiEocj11W29dKHIpKXx8KG49ci5zaGlmdCgpLGkucHVzaCh7dmFsdWU6bix0eXBlOm8sbWF0Y2hlczpyfSksYT1hLnNsaWNlKG4ubGVuZ3RoKSk7aWYoIW4pYnJlYWt9cmV0dXJuIHQ/YS5sZW5ndGg6YT9zZS5lcnJvcihlKTp4KGUscykuc2xpY2UoMCl9LGY9c2UuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHYseSxtLHgscixpPVtdLG89W10sYT1BW2UrIiAiXTtpZighYSl7dHx8KHQ9aChlKSksbj10Lmxlbmd0aDt3aGlsZShuLS0pKGE9RWUodFtuXSkpW1NdP2kucHVzaChhKTpvLnB1c2goYSk7KGE9QShlLCh2PW8sbT0wPCh5PWkpLmxlbmd0aCx4PTA8di5sZW5ndGgscj1mdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvLGEscyx1PTAsbD0iMCIsYz1lJiZbXSxmPVtdLHA9dyxkPWV8fHgmJmIuZmluZC5UQUcoIioiLGkpLGg9ays9bnVsbD09cD8xOk1hdGgucmFuZG9tKCl8fC4xLGc9ZC5sZW5ndGg7Zm9yKGkmJih3PXQ9PUN8fHR8fGkpO2whPT1nJiZudWxsIT0obz1kW2xdKTtsKyspe2lmKHgmJm8pe2E9MCx0fHxvLm93bmVyRG9jdW1lbnQ9PUN8fChUKG8pLG49IUUpO3doaWxlKHM9dlthKytdKWlmKHMobyx0fHxDLG4pKXtyLnB1c2gobyk7YnJlYWt9aSYmKGs9aCl9bSYmKChvPSFzJiZvKSYmdS0tLGUmJmMucHVzaChvKSl9aWYodSs9bCxtJiZsIT09dSl7YT0wO3doaWxlKHM9eVthKytdKXMoYyxmLHQsbik7aWYoZSl7aWYoMDx1KXdoaWxlKGwtLSljW2xdfHxmW2xdfHwoZltsXT1xLmNhbGwocikpO2Y9VGUoZil9SC5hcHBseShyLGYpLGkmJiFlJiYwPGYubGVuZ3RoJiYxPHUreS5sZW5ndGgmJnNlLnVuaXF1ZVNvcnQocil9cmV0dXJuIGkmJihrPWgsdz1wKSxjfSxtP2xlKHIpOnIpKSkuc2VsZWN0b3I9ZX1yZXR1cm4gYX0sZz1zZS5zZWxlY3Q9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMsdSxsPSJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLGM9IXImJmgoZT1sLnNlbGVjdG9yfHxlKTtpZihuPW58fFtdLDE9PT1jLmxlbmd0aCl7aWYoMjwobz1jWzBdPWNbMF0uc2xpY2UoMCkpLmxlbmd0aCYmIklEIj09PShhPW9bMF0pLnR5cGUmJjk9PT10Lm5vZGVUeXBlJiZFJiZiLnJlbGF0aXZlW29bMV0udHlwZV0pe2lmKCEodD0oYi5maW5kLklEKGEubWF0Y2hlc1swXS5yZXBsYWNlKHRlLG5lKSx0KXx8W10pWzBdKSlyZXR1cm4gbjtsJiYodD10LnBhcmVudE5vZGUpLGU9ZS5zbGljZShvLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPUcubmVlZHNDb250ZXh0LnRlc3QoZSk/MDpvLmxlbmd0aDt3aGlsZShpLS0pe2lmKGE9b1tpXSxiLnJlbGF0aXZlW3M9YS50eXBlXSlicmVhaztpZigodT1iLmZpbmRbc10pJiYocj11KGEubWF0Y2hlc1swXS5yZXBsYWNlKHRlLG5lKSxlZS50ZXN0KG9bMF0udHlwZSkmJnllKHQucGFyZW50Tm9kZSl8fHQpKSl7aWYoby5zcGxpY2UoaSwxKSwhKGU9ci5sZW5ndGgmJnhlKG8pKSlyZXR1cm4gSC5hcHBseShuLHIpLG47YnJlYWt9fX1yZXR1cm4obHx8ZihlLGMpKShyLHQsIUUsbiwhdHx8ZWUudGVzdChlKSYmeWUodC5wYXJlbnROb2RlKXx8dCksbn0sZC5zb3J0U3RhYmxlPVMuc3BsaXQoIiIpLnNvcnQoRCkuam9pbigiIik9PT1TLGQuZGV0ZWN0RHVwbGljYXRlcz0hIWwsVCgpLGQuc29ydERldGFjaGVkPWNlKGZ1bmN0aW9uKGUpe3JldHVybiAxJmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oQy5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIpKX0pLGNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGZlKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihlLHQsbil7aWYoIW4pcmV0dXJuIGUuZ2V0QXR0cmlidXRlKHQsInR5cGUiPT09dC50b0xvd2VyQ2FzZSgpPzE6Mil9KSxkLmF0dHJpYnV0ZXMmJmNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGlucHV0Lz4iLGUuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGZlKCJ2YWx1ZSIsZnVuY3Rpb24oZSx0LG4pe2lmKCFuJiYiaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiBlLmRlZmF1bHRWYWx1ZX0pLGNlKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxmZShSLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZighbilyZXR1cm4hMD09PWVbdF0/dC50b0xvd2VyQ2FzZSgpOihyPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJnIuc3BlY2lmaWVkP3IudmFsdWU6bnVsbH0pLHNlfShDKTtTLmZpbmQ9ZCxTLmV4cHI9ZC5zZWxlY3RvcnMsUy5leHByWyI6Il09Uy5leHByLnBzZXVkb3MsUy51bmlxdWVTb3J0PVMudW5pcXVlPWQudW5pcXVlU29ydCxTLnRleHQ9ZC5nZXRUZXh0LFMuaXNYTUxEb2M9ZC5pc1hNTCxTLmNvbnRhaW5zPWQuY29udGFpbnMsUy5lc2NhcGVTZWxlY3Rvcj1kLmVzY2FwZTt2YXIgaD1mdW5jdGlvbihlLHQsbil7dmFyIHI9W10saT12b2lkIDAhPT1uO3doaWxlKChlPWVbdF0pJiY5IT09ZS5ub2RlVHlwZSlpZigxPT09ZS5ub2RlVHlwZSl7aWYoaSYmUyhlKS5pcyhuKSlicmVhaztyLnB1c2goZSl9cmV0dXJuIHJ9LFQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W107ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59LGs9Uy5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBBKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX12YXIgTj0vXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaTtmdW5jdGlvbiBEKGUsbixyKXtyZXR1cm4gbShuKT9TLmdyZXAoZSxmdW5jdGlvbihlLHQpe3JldHVybiEhbi5jYWxsKGUsdCxlKSE9PXJ9KTpuLm5vZGVUeXBlP1MuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09biE9PXJ9KToic3RyaW5nIiE9dHlwZW9mIG4/Uy5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuLTE8aS5jYWxsKG4sZSkhPT1yfSk6Uy5maWx0ZXIobixlLHIpfVMuZmlsdGVyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10WzBdO3JldHVybiBuJiYoZT0iOm5vdCgiK2UrIikiKSwxPT09dC5sZW5ndGgmJjE9PT1yLm5vZGVUeXBlP1MuZmluZC5tYXRjaGVzU2VsZWN0b3IocixlKT9bcl06W106Uy5maW5kLm1hdGNoZXMoZSxTLmdyZXAodCxmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGV9KSl9LFMuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj10aGlzLmxlbmd0aCxpPXRoaXM7aWYoInN0cmluZyIhPXR5cGVvZiBlKXJldHVybiB0aGlzLnB1c2hTdGFjayhTKGUpLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7dDxyO3QrKylpZihTLmNvbnRhaW5zKGlbdF0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKG49dGhpcy5wdXNoU3RhY2soW10pLHQ9MDt0PHI7dCsrKVMuZmluZChlLGlbdF0sbik7cmV0dXJuIDE8cj9TLnVuaXF1ZVNvcnQobik6bn0sZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhEKHRoaXMsZXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhEKHRoaXMsZXx8W10sITApKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFEKHRoaXMsInN0cmluZyI9PXR5cGVvZiBlJiZrLnRlc3QoZSk/UyhlKTplfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBqLHE9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0rKSkkLzsoUy5mbi5pbml0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpO2lmKCFlKXJldHVybiB0aGlzO2lmKG49bnx8aiwic3RyaW5nIj09dHlwZW9mIGUpe2lmKCEocj0iPCI9PT1lWzBdJiYiPiI9PT1lW2UubGVuZ3RoLTFdJiYzPD1lLmxlbmd0aD9bbnVsbCxlLG51bGxdOnEuZXhlYyhlKSl8fCFyWzFdJiZ0KXJldHVybiF0fHx0LmpxdWVyeT8odHx8bikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKHQpLmZpbmQoZSk7aWYoclsxXSl7aWYodD10IGluc3RhbmNlb2YgUz90WzBdOnQsUy5tZXJnZSh0aGlzLFMucGFyc2VIVE1MKHJbMV0sdCYmdC5ub2RlVHlwZT90Lm93bmVyRG9jdW1lbnR8fHQ6RSwhMCkpLE4udGVzdChyWzFdKSYmUy5pc1BsYWluT2JqZWN0KHQpKWZvcihyIGluIHQpbSh0aGlzW3JdKT90aGlzW3JdKHRbcl0pOnRoaXMuYXR0cihyLHRbcl0pO3JldHVybiB0aGlzfXJldHVybihpPUUuZ2V0RWxlbWVudEJ5SWQoclsyXSkpJiYodGhpc1swXT1pLHRoaXMubGVuZ3RoPTEpLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXNbMF09ZSx0aGlzLmxlbmd0aD0xLHRoaXMpOm0oZSk/dm9pZCAwIT09bi5yZWFkeT9uLnJlYWR5KGUpOmUoUyk6Uy5tYWtlQXJyYXkoZSx0aGlzKX0pLnByb3RvdHlwZT1TLmZuLGo9UyhFKTt2YXIgTD0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxIPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O2Z1bmN0aW9uIE8oZSx0KXt3aGlsZSgoZT1lW3RdKSYmMSE9PWUubm9kZVR5cGUpO3JldHVybiBlfVMuZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oZSl7dmFyIHQ9UyhlLHRoaXMpLG49dC5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTxuO2UrKylpZihTLmNvbnRhaW5zKHRoaXMsdFtlXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXRoaXMubGVuZ3RoLG89W10sYT0ic3RyaW5nIiE9dHlwZW9mIGUmJlMoZSk7aWYoIWsudGVzdChlKSlmb3IoO3I8aTtyKyspZm9yKG49dGhpc1tyXTtuJiZuIT09dDtuPW4ucGFyZW50Tm9kZSlpZihuLm5vZGVUeXBlPDExJiYoYT8tMTxhLmluZGV4KG4pOjE9PT1uLm5vZGVUeXBlJiZTLmZpbmQubWF0Y2hlc1NlbGVjdG9yKG4sZSkpKXtvLnB1c2gobik7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKDE8by5sZW5ndGg/Uy51bmlxdWVTb3J0KG8pOm8pfSxpbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZT8ic3RyaW5nIj09dHlwZW9mIGU/aS5jYWxsKFMoZSksdGhpc1swXSk6aS5jYWxsKHRoaXMsZS5qcXVlcnk/ZVswXTplKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnB1c2hTdGFjayhTLnVuaXF1ZVNvcnQoUy5tZXJnZSh0aGlzLmdldCgpLFMoZSx0KSkpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09ZT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSksUy5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiYxMSE9PXQubm9kZVR5cGU/dDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiBoKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gaChlLCJwYXJlbnROb2RlIixuKX0sbmV4dDpmdW5jdGlvbihlKXtyZXR1cm4gTyhlLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGUpe3JldHVybiBPKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGUpe3JldHVybiBoKGUsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIGgoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGgoZSwibmV4dFNpYmxpbmciLG4pfSxwcmV2VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBoKGUsInByZXZpb3VzU2libGluZyIsbil9LHNpYmxpbmdzOmZ1bmN0aW9uKGUpe3JldHVybiBUKChlLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGUpfSxjaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4gVChlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZS5jb250ZW50RG9jdW1lbnQmJnIoZS5jb250ZW50RG9jdW1lbnQpP2UuY29udGVudERvY3VtZW50OihBKGUsInRlbXBsYXRlIikmJihlPWUuY29udGVudHx8ZSksUy5tZXJnZShbXSxlLmNoaWxkTm9kZXMpKX19LGZ1bmN0aW9uKHIsaSl7Uy5mbltyXT1mdW5jdGlvbihlLHQpe3ZhciBuPVMubWFwKHRoaXMsaSxlKTtyZXR1cm4iVW50aWwiIT09ci5zbGljZSgtNSkmJih0PWUpLHQmJiJzdHJpbmciPT10eXBlb2YgdCYmKG49Uy5maWx0ZXIodCxuKSksMTx0aGlzLmxlbmd0aCYmKEhbcl18fFMudW5pcXVlU29ydChuKSxMLnRlc3QocikmJm4ucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhuKX19KTt2YXIgUD0vW15ceDIwXHRcclxuXGZdKy9nO2Z1bmN0aW9uIFIoZSl7cmV0dXJuIGV9ZnVuY3Rpb24gTShlKXt0aHJvdyBlfWZ1bmN0aW9uIEkoZSx0LG4scil7dmFyIGk7dHJ5e2UmJm0oaT1lLnByb21pc2UpP2kuY2FsbChlKS5kb25lKHQpLmZhaWwobik6ZSYmbShpPWUudGhlbik/aS5jYWxsKGUsdCxuKTp0LmFwcGx5KHZvaWQgMCxbZV0uc2xpY2UocikpfWNhdGNoKGUpe24uYXBwbHkodm9pZCAwLFtlXSl9fVMuQ2FsbGJhY2tzPWZ1bmN0aW9uKHIpe3ZhciBlLG47cj0ic3RyaW5nIj09dHlwZW9mIHI/KGU9cixuPXt9LFMuZWFjaChlLm1hdGNoKFApfHxbXSxmdW5jdGlvbihlLHQpe25bdF09ITB9KSxuKTpTLmV4dGVuZCh7fSxyKTt2YXIgaSx0LG8sYSxzPVtdLHU9W10sbD0tMSxjPWZ1bmN0aW9uKCl7Zm9yKGE9YXx8ci5vbmNlLG89aT0hMDt1Lmxlbmd0aDtsPS0xKXt0PXUuc2hpZnQoKTt3aGlsZSgrK2w8cy5sZW5ndGgpITE9PT1zW2xdLmFwcGx5KHRbMF0sdFsxXSkmJnIuc3RvcE9uRmFsc2UmJihsPXMubGVuZ3RoLHQ9ITEpfXIubWVtb3J5fHwodD0hMSksaT0hMSxhJiYocz10P1tdOiIiKX0sZj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIHMmJih0JiYhaSYmKGw9cy5sZW5ndGgtMSx1LnB1c2godCkpLGZ1bmN0aW9uIG4oZSl7Uy5lYWNoKGUsZnVuY3Rpb24oZSx0KXttKHQpP3IudW5pcXVlJiZmLmhhcyh0KXx8cy5wdXNoKHQpOnQmJnQubGVuZ3RoJiYic3RyaW5nIiE9PXcodCkmJm4odCl9KX0oYXJndW1lbnRzKSx0JiYhaSYmYygpKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gUy5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKC0xPChuPVMuaW5BcnJheSh0LHMsbikpKXMuc3BsaWNlKG4sMSksbjw9bCYmbC0tfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlPy0xPFMuaW5BcnJheShlLHMpOjA8cy5sZW5ndGh9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHMmJihzPVtdKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGE9dT1bXSxzPXQ9IiIsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hc30sbG9jazpmdW5jdGlvbigpe3JldHVybiBhPXU9W10sdHx8aXx8KHM9dD0iIiksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuISFhfSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiBhfHwodD1bZSwodD10fHxbXSkuc2xpY2U/dC5zbGljZSgpOnRdLHUucHVzaCh0KSxpfHxjKCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gZi5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIW99fTtyZXR1cm4gZn0sUy5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGUpe3ZhciBvPVtbIm5vdGlmeSIsInByb2dyZXNzIixTLkNhbGxiYWNrcygibWVtb3J5IiksUy5DYWxsYmFja3MoIm1lbW9yeSIpLDJdLFsicmVzb2x2ZSIsImRvbmUiLFMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLFMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLDAsInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixTLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxTLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxpPSJwZW5kaW5nIixhPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBpfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGEudGhlbihudWxsLGUpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGk9YXJndW1lbnRzO3JldHVybiBTLkRlZmVycmVkKGZ1bmN0aW9uKHIpe1MuZWFjaChvLGZ1bmN0aW9uKGUsdCl7dmFyIG49bShpW3RbNF1dKSYmaVt0WzRdXTtzW3RbMV1dKGZ1bmN0aW9uKCl7dmFyIGU9biYmbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZSYmbShlLnByb21pc2UpP2UucHJvbWlzZSgpLnByb2dyZXNzKHIubm90aWZ5KS5kb25lKHIucmVzb2x2ZSkuZmFpbChyLnJlamVjdCk6clt0WzBdKyJXaXRoIl0odGhpcyxuP1tlXTphcmd1bWVudHMpfSl9KSxpPW51bGx9KS5wcm9taXNlKCl9LHRoZW46ZnVuY3Rpb24odCxuLHIpe3ZhciB1PTA7ZnVuY3Rpb24gbChpLG8sYSxzKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj10aGlzLHI9YXJndW1lbnRzLGU9ZnVuY3Rpb24oKXt2YXIgZSx0O2lmKCEoaTx1KSl7aWYoKGU9YS5hcHBseShuLHIpKT09PW8ucHJvbWlzZSgpKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvbiIpO3Q9ZSYmKCJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGUpJiZlLnRoZW4sbSh0KT9zP3QuY2FsbChlLGwodSxvLFIscyksbCh1LG8sTSxzKSk6KHUrKyx0LmNhbGwoZSxsKHUsbyxSLHMpLGwodSxvLE0scyksbCh1LG8sUixvLm5vdGlmeVdpdGgpKSk6KGEhPT1SJiYobj12b2lkIDAscj1bZV0pLChzfHxvLnJlc29sdmVXaXRoKShuLHIpKX19LHQ9cz9lOmZ1bmN0aW9uKCl7dHJ5e2UoKX1jYXRjaChlKXtTLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2smJlMuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhlLHQuc3RhY2tUcmFjZSksdTw9aSsxJiYoYSE9PU0mJihuPXZvaWQgMCxyPVtlXSksby5yZWplY3RXaXRoKG4scikpfX07aT90KCk6KFMuRGVmZXJyZWQuZ2V0U3RhY2tIb29rJiYodC5zdGFja1RyYWNlPVMuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCkpLEMuc2V0VGltZW91dCh0KSl9fXJldHVybiBTLkRlZmVycmVkKGZ1bmN0aW9uKGUpe29bMF1bM10uYWRkKGwoMCxlLG0ocik/cjpSLGUubm90aWZ5V2l0aCkpLG9bMV1bM10uYWRkKGwoMCxlLG0odCk/dDpSKSksb1syXVszXS5hZGQobCgwLGUsbShuKT9uOk0pKX0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9TLmV4dGVuZChlLGEpOmF9fSxzPXt9O3JldHVybiBTLmVhY2gobyxmdW5jdGlvbihlLHQpe3ZhciBuPXRbMl0scj10WzVdO2FbdFsxXV09bi5hZGQsciYmbi5hZGQoZnVuY3Rpb24oKXtpPXJ9LG9bMy1lXVsyXS5kaXNhYmxlLG9bMy1lXVszXS5kaXNhYmxlLG9bMF1bMl0ubG9jayxvWzBdWzNdLmxvY2spLG4uYWRkKHRbM10uZmlyZSksc1t0WzBdXT1mdW5jdGlvbigpe3JldHVybiBzW3RbMF0rIldpdGgiXSh0aGlzPT09cz92b2lkIDA6dGhpcyxhcmd1bWVudHMpLHRoaXN9LHNbdFswXSsiV2l0aCJdPW4uZmlyZVdpdGh9KSxhLnByb21pc2UocyksZSYmZS5jYWxsKHMscyksc30sd2hlbjpmdW5jdGlvbihlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHQ9bixyPUFycmF5KHQpLGk9cy5jYWxsKGFyZ3VtZW50cyksbz1TLkRlZmVycmVkKCksYT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7clt0XT10aGlzLGlbdF09MTxhcmd1bWVudHMubGVuZ3RoP3MuY2FsbChhcmd1bWVudHMpOmUsLS1ufHxvLnJlc29sdmVXaXRoKHIsaSl9fTtpZihuPD0xJiYoSShlLG8uZG9uZShhKHQpKS5yZXNvbHZlLG8ucmVqZWN0LCFuKSwicGVuZGluZyI9PT1vLnN0YXRlKCl8fG0oaVt0XSYmaVt0XS50aGVuKSkpcmV0dXJuIG8udGhlbigpO3doaWxlKHQtLSlJKGlbdF0sYSh0KSxvLnJlamVjdCk7cmV0dXJuIG8ucHJvbWlzZSgpfX0pO3ZhciBXPS9eKEV2YWx8SW50ZXJuYWx8UmFuZ2V8UmVmZXJlbmNlfFN5bnRheHxUeXBlfFVSSSlFcnJvciQvO1MuRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbihlLHQpe0MuY29uc29sZSYmQy5jb25zb2xlLndhcm4mJmUmJlcudGVzdChlLm5hbWUpJiZDLmNvbnNvbGUud2FybigialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogIitlLm1lc3NhZ2UsZS5zdGFjayx0KX0sUy5yZWFkeUV4Y2VwdGlvbj1mdW5jdGlvbihlKXtDLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlfSl9O3ZhciBGPVMuRGVmZXJyZWQoKTtmdW5jdGlvbiBCKCl7RS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixCKSxDLnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLEIpLFMucmVhZHkoKX1TLmZuLnJlYWR5PWZ1bmN0aW9uKGUpe3JldHVybiBGLnRoZW4oZSlbImNhdGNoIl0oZnVuY3Rpb24oZSl7Uy5yZWFkeUV4Y2VwdGlvbihlKX0pLHRoaXN9LFMuZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLHJlYWR5OmZ1bmN0aW9uKGUpeyghMD09PWU/LS1TLnJlYWR5V2FpdDpTLmlzUmVhZHkpfHwoUy5pc1JlYWR5PSEwKSE9PWUmJjA8LS1TLnJlYWR5V2FpdHx8Ri5yZXNvbHZlV2l0aChFLFtTXSl9fSksUy5yZWFkeS50aGVuPUYudGhlbiwiY29tcGxldGUiPT09RS5yZWFkeVN0YXRlfHwibG9hZGluZyIhPT1FLnJlYWR5U3RhdGUmJiFFLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbD9DLnNldFRpbWVvdXQoUy5yZWFkeSk6KEUuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsQiksQy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixCKSk7dmFyICQ9ZnVuY3Rpb24oZSx0LG4scixpLG8sYSl7dmFyIHM9MCx1PWUubGVuZ3RoLGw9bnVsbD09bjtpZigib2JqZWN0Ij09PXcobikpZm9yKHMgaW4gaT0hMCxuKSQoZSx0LHMsbltzXSwhMCxvLGEpO2Vsc2UgaWYodm9pZCAwIT09ciYmKGk9ITAsbShyKXx8KGE9ITApLGwmJihhPyh0LmNhbGwoZSxyKSx0PW51bGwpOihsPXQsdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGwuY2FsbChTKGUpLG4pfSkpLHQpKWZvcig7czx1O3MrKyl0KGVbc10sbixhP3I6ci5jYWxsKGVbc10scyx0KGVbc10sbikpKTtyZXR1cm4gaT9lOmw/dC5jYWxsKGUpOnU/dChlWzBdLG4pOm99LF89L14tbXMtLyx6PS8tKFthLXpdKS9nO2Z1bmN0aW9uIFUoZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfWZ1bmN0aW9uIFgoZSl7cmV0dXJuIGUucmVwbGFjZShfLCJtcy0iKS5yZXBsYWNlKHosVSl9dmFyIFY9ZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlfHw5PT09ZS5ub2RlVHlwZXx8IStlLm5vZGVUeXBlfTtmdW5jdGlvbiBHKCl7dGhpcy5leHBhbmRvPVMuZXhwYW5kbytHLnVpZCsrfUcudWlkPTEsRy5wcm90b3R5cGU9e2NhY2hlOmZ1bmN0aW9uKGUpe3ZhciB0PWVbdGhpcy5leHBhbmRvXTtyZXR1cm4gdHx8KHQ9e30sVihlKSYmKGUubm9kZVR5cGU/ZVt0aGlzLmV4cGFuZG9dPXQ6T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdGhpcy5leHBhbmRvLHt2YWx1ZTp0LGNvbmZpZ3VyYWJsZTohMH0pKSksdH0sc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPXRoaXMuY2FjaGUoZSk7aWYoInN0cmluZyI9PXR5cGVvZiB0KWlbWCh0KV09bjtlbHNlIGZvcihyIGluIHQpaVtYKHIpXT10W3JdO3JldHVybiBpfSxnZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD90aGlzLmNhY2hlKGUpOmVbdGhpcy5leHBhbmRvXSYmZVt0aGlzLmV4cGFuZG9dW1godCldfSxhY2Nlc3M6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT10fHx0JiYic3RyaW5nIj09dHlwZW9mIHQmJnZvaWQgMD09PW4/dGhpcy5nZXQoZSx0KToodGhpcy5zZXQoZSx0LG4pLHZvaWQgMCE9PW4/bjp0KX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1lW3RoaXMuZXhwYW5kb107aWYodm9pZCAwIT09cil7aWYodm9pZCAwIT09dCl7bj0odD1BcnJheS5pc0FycmF5KHQpP3QubWFwKFgpOih0PVgodCkpaW4gcj9bdF06dC5tYXRjaChQKXx8W10pLmxlbmd0aDt3aGlsZShuLS0pZGVsZXRlIHJbdFtuXV19KHZvaWQgMD09PXR8fFMuaXNFbXB0eU9iamVjdChyKSkmJihlLm5vZGVUeXBlP2VbdGhpcy5leHBhbmRvXT12b2lkIDA6ZGVsZXRlIGVbdGhpcy5leHBhbmRvXSl9fSxoYXNEYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PWVbdGhpcy5leHBhbmRvXTtyZXR1cm4gdm9pZCAwIT09dCYmIVMuaXNFbXB0eU9iamVjdCh0KX19O3ZhciBZPW5ldyBHLFE9bmV3IEcsSj0vXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLEs9L1tBLVpdL2c7ZnVuY3Rpb24gWihlLHQsbil7dmFyIHIsaTtpZih2b2lkIDA9PT1uJiYxPT09ZS5ub2RlVHlwZSlpZihyPSJkYXRhLSIrdC5yZXBsYWNlKEssIi0kJiIpLnRvTG93ZXJDYXNlKCksInN0cmluZyI9PXR5cGVvZihuPWUuZ2V0QXR0cmlidXRlKHIpKSl7dHJ5e249InRydWUiPT09KGk9bil8fCJmYWxzZSIhPT1pJiYoIm51bGwiPT09aT9udWxsOmk9PT0raSsiIj8raTpKLnRlc3QoaSk/SlNPTi5wYXJzZShpKTppKX1jYXRjaChlKXt9US5zZXQoZSx0LG4pfWVsc2Ugbj12b2lkIDA7cmV0dXJuIG59Uy5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIFEuaGFzRGF0YShlKXx8WS5oYXNEYXRhKGUpfSxkYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gUS5hY2Nlc3MoZSx0LG4pfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCl7US5yZW1vdmUoZSx0KX0sX2RhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBZLmFjY2VzcyhlLHQsbil9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCl7WS5yZW1vdmUoZSx0KX19KSxTLmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihuLGUpe3ZhciB0LHIsaSxvPXRoaXNbMF0sYT1vJiZvLmF0dHJpYnV0ZXM7aWYodm9pZCAwPT09bil7aWYodGhpcy5sZW5ndGgmJihpPVEuZ2V0KG8pLDE9PT1vLm5vZGVUeXBlJiYhWS5nZXQobywiaGFzRGF0YUF0dHJzIikpKXt0PWEubGVuZ3RoO3doaWxlKHQtLSlhW3RdJiYwPT09KHI9YVt0XS5uYW1lKS5pbmRleE9mKCJkYXRhLSIpJiYocj1YKHIuc2xpY2UoNSkpLFoobyxyLGlbcl0pKTtZLnNldChvLCJoYXNEYXRhQXR0cnMiLCEwKX1yZXR1cm4gaX1yZXR1cm4ib2JqZWN0Ij09dHlwZW9mIG4/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5zZXQodGhpcyxuKX0pOiQodGhpcyxmdW5jdGlvbihlKXt2YXIgdDtpZihvJiZ2b2lkIDA9PT1lKXJldHVybiB2b2lkIDAhPT0odD1RLmdldChvLG4pKT90OnZvaWQgMCE9PSh0PVoobyxuKSk/dDp2b2lkIDA7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5zZXQodGhpcyxuLGUpfSl9LG51bGwsZSwxPGFyZ3VtZW50cy5sZW5ndGgsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1EucmVtb3ZlKHRoaXMsZSl9KX19KSxTLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKGUpcmV0dXJuIHQ9KHR8fCJmeCIpKyJxdWV1ZSIscj1ZLmdldChlLHQpLG4mJighcnx8QXJyYXkuaXNBcnJheShuKT9yPVkuYWNjZXNzKGUsdCxTLm1ha2VBcnJheShuKSk6ci5wdXNoKG4pKSxyfHxbXX0sZGVxdWV1ZTpmdW5jdGlvbihlLHQpe3Q9dHx8ImZ4Ijt2YXIgbj1TLnF1ZXVlKGUsdCkscj1uLmxlbmd0aCxpPW4uc2hpZnQoKSxvPVMuX3F1ZXVlSG9va3MoZSx0KTsiaW5wcm9ncmVzcyI9PT1pJiYoaT1uLnNoaWZ0KCksci0tKSxpJiYoImZ4Ij09PXQmJm4udW5zaGlmdCgiaW5wcm9ncmVzcyIpLGRlbGV0ZSBvLnN0b3AsaS5jYWxsKGUsZnVuY3Rpb24oKXtTLmRlcXVldWUoZSx0KX0sbykpLCFyJiZvJiZvLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10KyJxdWV1ZUhvb2tzIjtyZXR1cm4gWS5nZXQoZSxuKXx8WS5hY2Nlc3MoZSxuLHtlbXB0eTpTLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKS5hZGQoZnVuY3Rpb24oKXtZLnJlbW92ZShlLFt0KyJxdWV1ZSIsbl0pfSl9KX19KSxTLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24odCxuKXt2YXIgZT0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgdCYmKG49dCx0PSJmeCIsZS0tKSxhcmd1bWVudHMubGVuZ3RoPGU/Uy5xdWV1ZSh0aGlzWzBdLHQpOnZvaWQgMD09PW4/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1TLnF1ZXVlKHRoaXMsdCxuKTtTLl9xdWV1ZUhvb2tzKHRoaXMsdCksImZ4Ij09PXQmJiJpbnByb2dyZXNzIiE9PWVbMF0mJlMuZGVxdWV1ZSh0aGlzLHQpfSl9LGRlcXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1MuZGVxdWV1ZSh0aGlzLGUpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucXVldWUoZXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTEsaT1TLkRlZmVycmVkKCksbz10aGlzLGE9dGhpcy5sZW5ndGgscz1mdW5jdGlvbigpey0tcnx8aS5yZXNvbHZlV2l0aChvLFtvXSl9OyJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPXZvaWQgMCksZT1lfHwiZngiO3doaWxlKGEtLSkobj1ZLmdldChvW2FdLGUrInF1ZXVlSG9va3MiKSkmJm4uZW1wdHkmJihyKyssbi5lbXB0eS5hZGQocykpO3JldHVybiBzKCksaS5wcm9taXNlKHQpfX0pO3ZhciBlZT0vWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvLnNvdXJjZSx0ZT1uZXcgUmVnRXhwKCJeKD86KFsrLV0pPXwpKCIrZWUrIikoW2EteiVdKikkIiwiaSIpLG5lPVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0scmU9RS5kb2N1bWVudEVsZW1lbnQsaWU9ZnVuY3Rpb24oZSl7cmV0dXJuIFMuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfSxvZT17Y29tcG9zZWQ6ITB9O3JlLmdldFJvb3ROb2RlJiYoaWU9ZnVuY3Rpb24oZSl7cmV0dXJuIFMuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfHxlLmdldFJvb3ROb2RlKG9lKT09PWUub3duZXJEb2N1bWVudH0pO3ZhciBhZT1mdW5jdGlvbihlLHQpe3JldHVybiJub25lIj09PShlPXR8fGUpLnN0eWxlLmRpc3BsYXl8fCIiPT09ZS5zdHlsZS5kaXNwbGF5JiZpZShlKSYmIm5vbmUiPT09Uy5jc3MoZSwiZGlzcGxheSIpfTtmdW5jdGlvbiBzZShlLHQsbixyKXt2YXIgaSxvLGE9MjAscz1yP2Z1bmN0aW9uKCl7cmV0dXJuIHIuY3VyKCl9OmZ1bmN0aW9uKCl7cmV0dXJuIFMuY3NzKGUsdCwiIil9LHU9cygpLGw9biYmblszXXx8KFMuY3NzTnVtYmVyW3RdPyIiOiJweCIpLGM9ZS5ub2RlVHlwZSYmKFMuY3NzTnVtYmVyW3RdfHwicHgiIT09bCYmK3UpJiZ0ZS5leGVjKFMuY3NzKGUsdCkpO2lmKGMmJmNbM10hPT1sKXt1Lz0yLGw9bHx8Y1szXSxjPSt1fHwxO3doaWxlKGEtLSlTLnN0eWxlKGUsdCxjK2wpLCgxLW8pKigxLShvPXMoKS91fHwuNSkpPD0wJiYoYT0wKSxjLz1vO2MqPTIsUy5zdHlsZShlLHQsYytsKSxuPW58fFtdfXJldHVybiBuJiYoYz0rY3x8K3V8fDAsaT1uWzFdP2MrKG5bMV0rMSkqblsyXTorblsyXSxyJiYoci51bml0PWwsci5zdGFydD1jLHIuZW5kPWkpKSxpfXZhciB1ZT17fTtmdW5jdGlvbiBsZShlLHQpe2Zvcih2YXIgbixyLGksbyxhLHMsdSxsPVtdLGM9MCxmPWUubGVuZ3RoO2M8ZjtjKyspKHI9ZVtjXSkuc3R5bGUmJihuPXIuc3R5bGUuZGlzcGxheSx0Pygibm9uZSI9PT1uJiYobFtjXT1ZLmdldChyLCJkaXNwbGF5Iil8fG51bGwsbFtjXXx8KHIuc3R5bGUuZGlzcGxheT0iIikpLCIiPT09ci5zdHlsZS5kaXNwbGF5JiZhZShyKSYmKGxbY109KHU9YT1vPXZvaWQgMCxhPShpPXIpLm93bmVyRG9jdW1lbnQscz1pLm5vZGVOYW1lLCh1PXVlW3NdKXx8KG89YS5ib2R5LmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudChzKSksdT1TLmNzcyhvLCJkaXNwbGF5Iiksby5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG8pLCJub25lIj09PXUmJih1PSJibG9jayIpLHVlW3NdPXUpKSkpOiJub25lIiE9PW4mJihsW2NdPSJub25lIixZLnNldChyLCJkaXNwbGF5IixuKSkpO2ZvcihjPTA7YzxmO2MrKyludWxsIT1sW2NdJiYoZVtjXS5zdHlsZS5kaXNwbGF5PWxbY10pO3JldHVybiBlfVMuZm4uZXh0ZW5kKHtzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIGxlKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIGxlKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgZT9lP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnRoaXMuZWFjaChmdW5jdGlvbigpe2FlKHRoaXMpP1ModGhpcykuc2hvdygpOlModGhpcykuaGlkZSgpfSl9fSk7dmFyIGNlLGZlLHBlPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pLGRlPS88KFthLXpdW15cL1wwPlx4MjBcdFxyXG5cZl0qKS9pLGhlPS9eJHxebW9kdWxlJHxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaTtjZT1FLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKS5hcHBlbmRDaGlsZChFLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSwoZmU9RS5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKS5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLGZlLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSxmZS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0IiksY2UuYXBwZW5kQ2hpbGQoZmUpLHkuY2hlY2tDbG9uZT1jZS5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsY2UuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+Iix5Lm5vQ2xvbmVDaGVja2VkPSEhY2UuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlLGNlLmlubmVySFRNTD0iPG9wdGlvbj48L29wdGlvbj4iLHkub3B0aW9uPSEhY2UubGFzdENoaWxkO3ZhciBnZT17dGhlYWQ6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLGNvbDpbMiwiPHRhYmxlPjxjb2xncm91cD4iLCI8L2NvbGdyb3VwPjwvdGFibGU+Il0sdHI6WzIsIjx0YWJsZT48dGJvZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLHRkOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXSxfZGVmYXVsdDpbMCwiIiwiIl19O2Z1bmN0aW9uIHZlKGUsdCl7dmFyIG47cmV0dXJuIG49InVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lP2UuZ2V0RWxlbWVudHNCeVRhZ05hbWUodHx8IioiKToidW5kZWZpbmVkIiE9dHlwZW9mIGUucXVlcnlTZWxlY3RvckFsbD9lLnF1ZXJ5U2VsZWN0b3JBbGwodHx8IioiKTpbXSx2b2lkIDA9PT10fHx0JiZBKGUsdCk/Uy5tZXJnZShbZV0sbik6bn1mdW5jdGlvbiB5ZShlLHQpe2Zvcih2YXIgbj0wLHI9ZS5sZW5ndGg7bjxyO24rKylZLnNldChlW25dLCJnbG9iYWxFdmFsIiwhdHx8WS5nZXQodFtuXSwiZ2xvYmFsRXZhbCIpKX1nZS50Ym9keT1nZS50Zm9vdD1nZS5jb2xncm91cD1nZS5jYXB0aW9uPWdlLnRoZWFkLGdlLnRoPWdlLnRkLHkub3B0aW9ufHwoZ2Uub3B0Z3JvdXA9Z2Uub3B0aW9uPVsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0pO3ZhciBtZT0vPHwmIz9cdys7LztmdW5jdGlvbiB4ZShlLHQsbixyLGkpe2Zvcih2YXIgbyxhLHMsdSxsLGMsZj10LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxwPVtdLGQ9MCxoPWUubGVuZ3RoO2Q8aDtkKyspaWYoKG89ZVtkXSl8fDA9PT1vKWlmKCJvYmplY3QiPT09dyhvKSlTLm1lcmdlKHAsby5ub2RlVHlwZT9bb106byk7ZWxzZSBpZihtZS50ZXN0KG8pKXthPWF8fGYuYXBwZW5kQ2hpbGQodC5jcmVhdGVFbGVtZW50KCJkaXYiKSkscz0oZGUuZXhlYyhvKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKSx1PWdlW3NdfHxnZS5fZGVmYXVsdCxhLmlubmVySFRNTD11WzFdK1MuaHRtbFByZWZpbHRlcihvKSt1WzJdLGM9dVswXTt3aGlsZShjLS0pYT1hLmxhc3RDaGlsZDtTLm1lcmdlKHAsYS5jaGlsZE5vZGVzKSwoYT1mLmZpcnN0Q2hpbGQpLnRleHRDb250ZW50PSIifWVsc2UgcC5wdXNoKHQuY3JlYXRlVGV4dE5vZGUobykpO2YudGV4dENvbnRlbnQ9IiIsZD0wO3doaWxlKG89cFtkKytdKWlmKHImJi0xPFMuaW5BcnJheShvLHIpKWkmJmkucHVzaChvKTtlbHNlIGlmKGw9aWUobyksYT12ZShmLmFwcGVuZENoaWxkKG8pLCJzY3JpcHQiKSxsJiZ5ZShhKSxuKXtjPTA7d2hpbGUobz1hW2MrK10paGUudGVzdChvLnR5cGV8fCIiKSYmbi5wdXNoKG8pfXJldHVybiBmfXZhciBiZT0vXmtleS8sd2U9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLFRlPS9eKFteLl0qKSg/OlwuKC4rKXwpLztmdW5jdGlvbiBDZSgpe3JldHVybiEwfWZ1bmN0aW9uIEVlKCl7cmV0dXJuITF9ZnVuY3Rpb24gU2UoZSx0KXtyZXR1cm4gZT09PWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBFLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goZSl7fX0oKT09KCJmb2N1cyI9PT10KX1mdW5jdGlvbiBrZShlLHQsbixyLGksbyl7dmFyIGEscztpZigib2JqZWN0Ij09dHlwZW9mIHQpe2ZvcihzIGluInN0cmluZyIhPXR5cGVvZiBuJiYocj1yfHxuLG49dm9pZCAwKSx0KWtlKGUscyxuLHIsdFtzXSxvKTtyZXR1cm4gZX1pZihudWxsPT1yJiZudWxsPT1pPyhpPW4scj1uPXZvaWQgMCk6bnVsbD09aSYmKCJzdHJpbmciPT10eXBlb2Ygbj8oaT1yLHI9dm9pZCAwKTooaT1yLHI9bixuPXZvaWQgMCkpLCExPT09aSlpPUVlO2Vsc2UgaWYoIWkpcmV0dXJuIGU7cmV0dXJuIDE9PT1vJiYoYT1pLChpPWZ1bmN0aW9uKGUpe3JldHVybiBTKCkub2ZmKGUpLGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfSkuZ3VpZD1hLmd1aWR8fChhLmd1aWQ9Uy5ndWlkKyspKSxlLmVhY2goZnVuY3Rpb24oKXtTLmV2ZW50LmFkZCh0aGlzLHQsaSxyLG4pfSl9ZnVuY3Rpb24gQWUoZSxpLG8pe28/KFkuc2V0KGUsaSwhMSksUy5ldmVudC5hZGQoZSxpLHtuYW1lc3BhY2U6ITEsaGFuZGxlcjpmdW5jdGlvbihlKXt2YXIgdCxuLHI9WS5nZXQodGhpcyxpKTtpZigxJmUuaXNUcmlnZ2VyJiZ0aGlzW2ldKXtpZihyLmxlbmd0aCkoUy5ldmVudC5zcGVjaWFsW2ldfHx7fSkuZGVsZWdhdGVUeXBlJiZlLnN0b3BQcm9wYWdhdGlvbigpO2Vsc2UgaWYocj1zLmNhbGwoYXJndW1lbnRzKSxZLnNldCh0aGlzLGksciksdD1vKHRoaXMsaSksdGhpc1tpXSgpLHIhPT0obj1ZLmdldCh0aGlzLGkpKXx8dD9ZLnNldCh0aGlzLGksITEpOm49e30sciE9PW4pcmV0dXJuIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpLG4udmFsdWV9ZWxzZSByLmxlbmd0aCYmKFkuc2V0KHRoaXMsaSx7dmFsdWU6Uy5ldmVudC50cmlnZ2VyKFMuZXh0ZW5kKHJbMF0sUy5FdmVudC5wcm90b3R5cGUpLHIuc2xpY2UoMSksdGhpcyl9KSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKX19KSk6dm9pZCAwPT09WS5nZXQoZSxpKSYmUy5ldmVudC5hZGQoZSxpLENlKX1TLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKHQsZSxuLHIsaSl7dmFyIG8sYSxzLHUsbCxjLGYscCxkLGgsZyx2PVkuZ2V0KHQpO2lmKFYodCkpe24uaGFuZGxlciYmKG49KG89bikuaGFuZGxlcixpPW8uc2VsZWN0b3IpLGkmJlMuZmluZC5tYXRjaGVzU2VsZWN0b3IocmUsaSksbi5ndWlkfHwobi5ndWlkPVMuZ3VpZCsrKSwodT12LmV2ZW50cyl8fCh1PXYuZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCkpLChhPXYuaGFuZGxlKXx8KGE9di5oYW5kbGU9ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBTJiZTLmV2ZW50LnRyaWdnZXJlZCE9PWUudHlwZT9TLmV2ZW50LmRpc3BhdGNoLmFwcGx5KHQsYXJndW1lbnRzKTp2b2lkIDB9KSxsPShlPShlfHwiIikubWF0Y2goUCl8fFsiIl0pLmxlbmd0aDt3aGlsZShsLS0pZD1nPShzPVRlLmV4ZWMoZVtsXSl8fFtdKVsxXSxoPShzWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZCYmKGY9Uy5ldmVudC5zcGVjaWFsW2RdfHx7fSxkPShpP2YuZGVsZWdhdGVUeXBlOmYuYmluZFR5cGUpfHxkLGY9Uy5ldmVudC5zcGVjaWFsW2RdfHx7fSxjPVMuZXh0ZW5kKHt0eXBlOmQsb3JpZ1R5cGU6ZyxkYXRhOnIsaGFuZGxlcjpuLGd1aWQ6bi5ndWlkLHNlbGVjdG9yOmksbmVlZHNDb250ZXh0OmkmJlMuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChpKSxuYW1lc3BhY2U6aC5qb2luKCIuIil9LG8pLChwPXVbZF0pfHwoKHA9dVtkXT1bXSkuZGVsZWdhdGVDb3VudD0wLGYuc2V0dXAmJiExIT09Zi5zZXR1cC5jYWxsKHQscixoLGEpfHx0LmFkZEV2ZW50TGlzdGVuZXImJnQuYWRkRXZlbnRMaXN0ZW5lcihkLGEpKSxmLmFkZCYmKGYuYWRkLmNhbGwodCxjKSxjLmhhbmRsZXIuZ3VpZHx8KGMuaGFuZGxlci5ndWlkPW4uZ3VpZCkpLGk/cC5zcGxpY2UocC5kZWxlZ2F0ZUNvdW50KyssMCxjKTpwLnB1c2goYyksUy5ldmVudC5nbG9iYWxbZF09ITApfX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8sYSxzLHUsbCxjLGYscCxkLGgsZyx2PVkuaGFzRGF0YShlKSYmWS5nZXQoZSk7aWYodiYmKHU9di5ldmVudHMpKXtsPSh0PSh0fHwiIikubWF0Y2goUCl8fFsiIl0pLmxlbmd0aDt3aGlsZShsLS0paWYoZD1nPShzPVRlLmV4ZWModFtsXSl8fFtdKVsxXSxoPShzWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZCl7Zj1TLmV2ZW50LnNwZWNpYWxbZF18fHt9LHA9dVtkPShyP2YuZGVsZWdhdGVUeXBlOmYuYmluZFR5cGUpfHxkXXx8W10scz1zWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIitoLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLGE9bz1wLmxlbmd0aDt3aGlsZShvLS0pYz1wW29dLCFpJiZnIT09Yy5vcmlnVHlwZXx8biYmbi5ndWlkIT09Yy5ndWlkfHxzJiYhcy50ZXN0KGMubmFtZXNwYWNlKXx8ciYmciE9PWMuc2VsZWN0b3ImJigiKioiIT09cnx8IWMuc2VsZWN0b3IpfHwocC5zcGxpY2UobywxKSxjLnNlbGVjdG9yJiZwLmRlbGVnYXRlQ291bnQtLSxmLnJlbW92ZSYmZi5yZW1vdmUuY2FsbChlLGMpKTthJiYhcC5sZW5ndGgmJihmLnRlYXJkb3duJiYhMSE9PWYudGVhcmRvd24uY2FsbChlLGgsdi5oYW5kbGUpfHxTLnJlbW92ZUV2ZW50KGUsZCx2LmhhbmRsZSksZGVsZXRlIHVbZF0pfWVsc2UgZm9yKGQgaW4gdSlTLmV2ZW50LnJlbW92ZShlLGQrdFtsXSxuLHIsITApO1MuaXNFbXB0eU9iamVjdCh1KSYmWS5yZW1vdmUoZSwiaGFuZGxlIGV2ZW50cyIpfX0sZGlzcGF0Y2g6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxhLHM9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLHU9Uy5ldmVudC5maXgoZSksbD0oWS5nZXQodGhpcywiZXZlbnRzIil8fE9iamVjdC5jcmVhdGUobnVsbCkpW3UudHlwZV18fFtdLGM9Uy5ldmVudC5zcGVjaWFsW3UudHlwZV18fHt9O2ZvcihzWzBdPXUsdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspc1t0XT1hcmd1bWVudHNbdF07aWYodS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFjLnByZURpc3BhdGNofHwhMSE9PWMucHJlRGlzcGF0Y2guY2FsbCh0aGlzLHUpKXthPVMuZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLHUsbCksdD0wO3doaWxlKChpPWFbdCsrXSkmJiF1LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe3UuY3VycmVudFRhcmdldD1pLmVsZW0sbj0wO3doaWxlKChvPWkuaGFuZGxlcnNbbisrXSkmJiF1LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpdS5ybmFtZXNwYWNlJiYhMSE9PW8ubmFtZXNwYWNlJiYhdS5ybmFtZXNwYWNlLnRlc3Qoby5uYW1lc3BhY2UpfHwodS5oYW5kbGVPYmo9byx1LmRhdGE9by5kYXRhLHZvaWQgMCE9PShyPSgoUy5ldmVudC5zcGVjaWFsW28ub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxvLmhhbmRsZXIpLmFwcGx5KGkuZWxlbSxzKSkmJiExPT09KHUucmVzdWx0PXIpJiYodS5wcmV2ZW50RGVmYXVsdCgpLHUuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gYy5wb3N0RGlzcGF0Y2gmJmMucG9zdERpc3BhdGNoLmNhbGwodGhpcyx1KSx1LnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG8sYSxzPVtdLHU9dC5kZWxlZ2F0ZUNvdW50LGw9ZS50YXJnZXQ7aWYodSYmbC5ub2RlVHlwZSYmISgiY2xpY2siPT09ZS50eXBlJiYxPD1lLmJ1dHRvbikpZm9yKDtsIT09dGhpcztsPWwucGFyZW50Tm9kZXx8dGhpcylpZigxPT09bC5ub2RlVHlwZSYmKCJjbGljayIhPT1lLnR5cGV8fCEwIT09bC5kaXNhYmxlZCkpe2ZvcihvPVtdLGE9e30sbj0wO248dTtuKyspdm9pZCAwPT09YVtpPShyPXRbbl0pLnNlbGVjdG9yKyIgIl0mJihhW2ldPXIubmVlZHNDb250ZXh0Py0xPFMoaSx0aGlzKS5pbmRleChsKTpTLmZpbmQoaSx0aGlzLG51bGwsW2xdKS5sZW5ndGgpLGFbaV0mJm8ucHVzaChyKTtvLmxlbmd0aCYmcy5wdXNoKHtlbGVtOmwsaGFuZGxlcnM6b30pfXJldHVybiBsPXRoaXMsdTx0Lmxlbmd0aCYmcy5wdXNoKHtlbGVtOmwsaGFuZGxlcnM6dC5zbGljZSh1KX0pLHN9LGFkZFByb3A6ZnVuY3Rpb24odCxlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoUy5FdmVudC5wcm90b3R5cGUsdCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0Om0oZSk/ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIGUodGhpcy5vcmlnaW5hbEV2ZW50KX06ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFt0XX0sc2V0OmZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLHQse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmV9KX19KX0sZml4OmZ1bmN0aW9uKGUpe3JldHVybiBlW1MuZXhwYW5kb10/ZTpuZXcgUy5FdmVudChlKX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGNsaWNrOntzZXR1cDpmdW5jdGlvbihlKXt2YXIgdD10aGlzfHxlO3JldHVybiBwZS50ZXN0KHQudHlwZSkmJnQuY2xpY2smJkEodCwiaW5wdXQiKSYmQWUodCwiY2xpY2siLENlKSwhMX0sdHJpZ2dlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzfHxlO3JldHVybiBwZS50ZXN0KHQudHlwZSkmJnQuY2xpY2smJkEodCwiaW5wdXQiKSYmQWUodCwiY2xpY2siKSwhMH0sX2RlZmF1bHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQ7cmV0dXJuIHBlLnRlc3QodC50eXBlKSYmdC5jbGljayYmQSh0LCJpbnB1dCIpJiZZLmdldCh0LCJjbGljayIpfHxBKHQsImEiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUucmVzdWx0JiZlLm9yaWdpbmFsRXZlbnQmJihlLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9ZS5yZXN1bHQpfX19fSxTLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGUsdCxuKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXImJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LG4pfSxTLkV2ZW50PWZ1bmN0aW9uKGUsdCl7aWYoISh0aGlzIGluc3RhbmNlb2YgUy5FdmVudCkpcmV0dXJuIG5ldyBTLkV2ZW50KGUsdCk7ZSYmZS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9ZSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWUuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09ZS5kZWZhdWx0UHJldmVudGVkJiYhMT09PWUucmV0dXJuVmFsdWU/Q2U6RWUsdGhpcy50YXJnZXQ9ZS50YXJnZXQmJjM9PT1lLnRhcmdldC5ub2RlVHlwZT9lLnRhcmdldC5wYXJlbnROb2RlOmUudGFyZ2V0LHRoaXMuY3VycmVudFRhcmdldD1lLmN1cnJlbnRUYXJnZXQsdGhpcy5yZWxhdGVkVGFyZ2V0PWUucmVsYXRlZFRhcmdldCk6dGhpcy50eXBlPWUsdCYmUy5leHRlbmQodGhpcyx0KSx0aGlzLnRpbWVTdGFtcD1lJiZlLnRpbWVTdGFtcHx8RGF0ZS5ub3coKSx0aGlzW1MuZXhwYW5kb109ITB9LFMuRXZlbnQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpTLkV2ZW50LGlzRGVmYXVsdFByZXZlbnRlZDpFZSxpc1Byb3BhZ2F0aW9uU3RvcHBlZDpFZSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpFZSxpc1NpbXVsYXRlZDohMSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1DZSxlJiYhdGhpcy5pc1NpbXVsYXRlZCYmZS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1DZSxlJiYhdGhpcy5pc1NpbXVsYXRlZCYmZS5zdG9wUHJvcGFnYXRpb24oKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9Q2UsZSYmIXRoaXMuaXNTaW11bGF0ZWQmJmUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LFMuZWFjaCh7YWx0S2V5OiEwLGJ1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCxjaGFuZ2VkVG91Y2hlczohMCxjdHJsS2V5OiEwLGRldGFpbDohMCxldmVudFBoYXNlOiEwLG1ldGFLZXk6ITAscGFnZVg6ITAscGFnZVk6ITAsc2hpZnRLZXk6ITAsdmlldzohMCwiY2hhciI6ITAsY29kZTohMCxjaGFyQ29kZTohMCxrZXk6ITAsa2V5Q29kZTohMCxidXR0b246ITAsYnV0dG9uczohMCxjbGllbnRYOiEwLGNsaWVudFk6ITAsb2Zmc2V0WDohMCxvZmZzZXRZOiEwLHBvaW50ZXJJZDohMCxwb2ludGVyVHlwZTohMCxzY3JlZW5YOiEwLHNjcmVlblk6ITAsdGFyZ2V0VG91Y2hlczohMCx0b0VsZW1lbnQ6ITAsdG91Y2hlczohMCx3aGljaDpmdW5jdGlvbihlKXt2YXIgdD1lLmJ1dHRvbjtyZXR1cm4gbnVsbD09ZS53aGljaCYmYmUudGVzdChlLnR5cGUpP251bGwhPWUuY2hhckNvZGU/ZS5jaGFyQ29kZTplLmtleUNvZGU6IWUud2hpY2gmJnZvaWQgMCE9PXQmJndlLnRlc3QoZS50eXBlKT8xJnQ/MToyJnQ/Mzo0JnQ/MjowOmUud2hpY2h9fSxTLmV2ZW50LmFkZFByb3ApLFMuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24oZSx0KXtTLmV2ZW50LnNwZWNpYWxbZV09e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIEFlKHRoaXMsZSxTZSksITF9LHRyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gQWUodGhpcyxlKSwhMH0sZGVsZWdhdGVUeXBlOnR9fSksUy5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0Iixwb2ludGVyZW50ZXI6InBvaW50ZXJvdmVyIixwb2ludGVybGVhdmU6InBvaW50ZXJvdXQifSxmdW5jdGlvbihlLGkpe1MuZXZlbnQuc3BlY2lhbFtlXT17ZGVsZWdhdGVUeXBlOmksYmluZFR5cGU6aSxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLnJlbGF0ZWRUYXJnZXQscj1lLmhhbmRsZU9iajtyZXR1cm4gbiYmKG49PT10aGlzfHxTLmNvbnRhaW5zKHRoaXMsbikpfHwoZS50eXBlPXIub3JpZ1R5cGUsdD1yLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUudHlwZT1pKSx0fX19KSxTLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIGtlKHRoaXMsZSx0LG4scil9LG9uZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4ga2UodGhpcyxlLHQsbixyLDEpfSxvZmY6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5oYW5kbGVPYmopcmV0dXJuIHI9ZS5oYW5kbGVPYmosUyhlLmRlbGVnYXRlVGFyZ2V0KS5vZmYoci5uYW1lc3BhY2U/ci5vcmlnVHlwZSsiLiIrci5uYW1lc3BhY2U6ci5vcmlnVHlwZSxyLnNlbGVjdG9yLHIuaGFuZGxlciksdGhpcztpZigib2JqZWN0Ij09dHlwZW9mIGUpe2ZvcihpIGluIGUpdGhpcy5vZmYoaSx0LGVbaV0pO3JldHVybiB0aGlzfXJldHVybiExIT09dCYmImZ1bmN0aW9uIiE9dHlwZW9mIHR8fChuPXQsdD12b2lkIDApLCExPT09biYmKG49RWUpLHRoaXMuZWFjaChmdW5jdGlvbigpe1MuZXZlbnQucmVtb3ZlKHRoaXMsZSxuLHQpfSl9fSk7dmFyIE5lPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLERlPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLGplPS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZztmdW5jdGlvbiBxZShlLHQpe3JldHVybiBBKGUsInRhYmxlIikmJkEoMTEhPT10Lm5vZGVUeXBlP3Q6dC5maXJzdENoaWxkLCJ0ciIpJiZTKGUpLmNoaWxkcmVuKCJ0Ym9keSIpWzBdfHxlfWZ1bmN0aW9uIExlKGUpe3JldHVybiBlLnR5cGU9KG51bGwhPT1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKSsiLyIrZS50eXBlLGV9ZnVuY3Rpb24gSGUoZSl7cmV0dXJuInRydWUvIj09PShlLnR5cGV8fCIiKS5zbGljZSgwLDUpP2UudHlwZT1lLnR5cGUuc2xpY2UoNSk6ZS5yZW1vdmVBdHRyaWJ1dGUoInR5cGUiKSxlfWZ1bmN0aW9uIE9lKGUsdCl7dmFyIG4scixpLG8sYSxzO2lmKDE9PT10Lm5vZGVUeXBlKXtpZihZLmhhc0RhdGEoZSkmJihzPVkuZ2V0KGUpLmV2ZW50cykpZm9yKGkgaW4gWS5yZW1vdmUodCwiaGFuZGxlIGV2ZW50cyIpLHMpZm9yKG49MCxyPXNbaV0ubGVuZ3RoO248cjtuKyspUy5ldmVudC5hZGQodCxpLHNbaV1bbl0pO1EuaGFzRGF0YShlKSYmKG89US5hY2Nlc3MoZSksYT1TLmV4dGVuZCh7fSxvKSxRLnNldCh0LGEpKX19ZnVuY3Rpb24gUGUobixyLGksbyl7cj1nKHIpO3ZhciBlLHQsYSxzLHUsbCxjPTAsZj1uLmxlbmd0aCxwPWYtMSxkPXJbMF0saD1tKGQpO2lmKGh8fDE8ZiYmInN0cmluZyI9PXR5cGVvZiBkJiYheS5jaGVja0Nsb25lJiZEZS50ZXN0KGQpKXJldHVybiBuLmVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9bi5lcShlKTtoJiYoclswXT1kLmNhbGwodGhpcyxlLHQuaHRtbCgpKSksUGUodCxyLGksbyl9KTtpZihmJiYodD0oZT14ZShyLG5bMF0ub3duZXJEb2N1bWVudCwhMSxuLG8pKS5maXJzdENoaWxkLDE9PT1lLmNoaWxkTm9kZXMubGVuZ3RoJiYoZT10KSx0fHxvKSl7Zm9yKHM9KGE9Uy5tYXAodmUoZSwic2NyaXB0IiksTGUpKS5sZW5ndGg7YzxmO2MrKyl1PWUsYyE9PXAmJih1PVMuY2xvbmUodSwhMCwhMCkscyYmUy5tZXJnZShhLHZlKHUsInNjcmlwdCIpKSksaS5jYWxsKG5bY10sdSxjKTtpZihzKWZvcihsPWFbYS5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxTLm1hcChhLEhlKSxjPTA7YzxzO2MrKyl1PWFbY10saGUudGVzdCh1LnR5cGV8fCIiKSYmIVkuYWNjZXNzKHUsImdsb2JhbEV2YWwiKSYmUy5jb250YWlucyhsLHUpJiYodS5zcmMmJiJtb2R1bGUiIT09KHUudHlwZXx8IiIpLnRvTG93ZXJDYXNlKCk/Uy5fZXZhbFVybCYmIXUubm9Nb2R1bGUmJlMuX2V2YWxVcmwodS5zcmMse25vbmNlOnUubm9uY2V8fHUuZ2V0QXR0cmlidXRlKCJub25jZSIpfSxsKTpiKHUudGV4dENvbnRlbnQucmVwbGFjZShqZSwiIiksdSxsKSl9cmV0dXJuIG59ZnVuY3Rpb24gUmUoZSx0LG4pe2Zvcih2YXIgcixpPXQ/Uy5maWx0ZXIodCxlKTplLG89MDtudWxsIT0ocj1pW29dKTtvKyspbnx8MSE9PXIubm9kZVR5cGV8fFMuY2xlYW5EYXRhKHZlKHIpKSxyLnBhcmVudE5vZGUmJihuJiZpZShyKSYmeWUodmUociwic2NyaXB0IikpLHIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChyKSk7cmV0dXJuIGV9Uy5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGNsb25lOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbCxjPWUuY2xvbmVOb2RlKCEwKSxmPWllKGUpO2lmKCEoeS5ub0Nsb25lQ2hlY2tlZHx8MSE9PWUubm9kZVR5cGUmJjExIT09ZS5ub2RlVHlwZXx8Uy5pc1hNTERvYyhlKSkpZm9yKGE9dmUoYykscj0wLGk9KG89dmUoZSkpLmxlbmd0aDtyPGk7cisrKXM9b1tyXSx1PWFbcl0sdm9pZCAwLCJpbnB1dCI9PT0obD11Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZwZS50ZXN0KHMudHlwZSk/dS5jaGVja2VkPXMuY2hlY2tlZDoiaW5wdXQiIT09bCYmInRleHRhcmVhIiE9PWx8fCh1LmRlZmF1bHRWYWx1ZT1zLmRlZmF1bHRWYWx1ZSk7aWYodClpZihuKWZvcihvPW98fHZlKGUpLGE9YXx8dmUoYykscj0wLGk9by5sZW5ndGg7cjxpO3IrKylPZShvW3JdLGFbcl0pO2Vsc2UgT2UoZSxjKTtyZXR1cm4gMDwoYT12ZShjLCJzY3JpcHQiKSkubGVuZ3RoJiZ5ZShhLCFmJiZ2ZShlLCJzY3JpcHQiKSksY30sY2xlYW5EYXRhOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLHIsaT1TLmV2ZW50LnNwZWNpYWwsbz0wO3ZvaWQgMCE9PShuPWVbb10pO28rKylpZihWKG4pKXtpZih0PW5bWS5leHBhbmRvXSl7aWYodC5ldmVudHMpZm9yKHIgaW4gdC5ldmVudHMpaVtyXT9TLmV2ZW50LnJlbW92ZShuLHIpOlMucmVtb3ZlRXZlbnQobixyLHQuaGFuZGxlKTtuW1kuZXhwYW5kb109dm9pZCAwfW5bUS5leHBhbmRvXSYmKG5bUS5leHBhbmRvXT12b2lkIDApfX19KSxTLmZuLmV4dGVuZCh7ZGV0YWNoOmZ1bmN0aW9uKGUpe3JldHVybiBSZSh0aGlzLGUsITApfSxyZW1vdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIFJlKHRoaXMsZSl9LHRleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuICQodGhpcyxmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT9TLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8KHRoaXMudGV4dENvbnRlbnQ9ZSl9KX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gUGUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7MSE9PXRoaXMubm9kZVR5cGUmJjExIT09dGhpcy5ub2RlVHlwZSYmOSE9PXRoaXMubm9kZVR5cGV8fHFlKHRoaXMsZSkuYXBwZW5kQ2hpbGQoZSl9KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiBQZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIHQ9cWUodGhpcyxlKTt0Lmluc2VydEJlZm9yZShlLHQuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiBQZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiBQZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzLm5leHRTaWJsaW5nKX0pfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgZSx0PTA7bnVsbCE9KGU9dGhpc1t0XSk7dCsrKTE9PT1lLm5vZGVUeXBlJiYoUy5jbGVhbkRhdGEodmUoZSwhMSkpLGUudGV4dENvbnRlbnQ9IiIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPW51bGwhPWUmJmUsdD1udWxsPT10P2U6dCx0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBTLmNsb25lKHRoaXMsZSx0KX0pfSxodG1sOmZ1bmN0aW9uKGUpe3JldHVybiAkKHRoaXMsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpc1swXXx8e30sbj0wLHI9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09ZSYmMT09PXQubm9kZVR5cGUpcmV0dXJuIHQuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgZSYmIU5lLnRlc3QoZSkmJiFnZVsoZGUuZXhlYyhlKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2U9Uy5odG1sUHJlZmlsdGVyKGUpO3RyeXtmb3IoO248cjtuKyspMT09PSh0PXRoaXNbbl18fHt9KS5ub2RlVHlwZSYmKFMuY2xlYW5EYXRhKHZlKHQsITEpKSx0LmlubmVySFRNTD1lKTt0PTB9Y2F0Y2goZSl7fX10JiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGUpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIG49W107cmV0dXJuIFBlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGFyZW50Tm9kZTtTLmluQXJyYXkodGhpcyxuKTwwJiYoUy5jbGVhbkRhdGEodmUodGhpcykpLHQmJnQucmVwbGFjZUNoaWxkKGUsdGhpcykpfSxuKX19KSxTLmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihlLGEpe1MuZm5bZV09ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49W10scj1TKGUpLGk9ci5sZW5ndGgtMSxvPTA7bzw9aTtvKyspdD1vPT09aT90aGlzOnRoaXMuY2xvbmUoITApLFMocltvXSlbYV0odCksdS5hcHBseShuLHQuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhuKX19KTt2YXIgTWU9bmV3IFJlZ0V4cCgiXigiK2VlKyIpKD8hcHgpW2EteiVdKyQiLCJpIiksSWU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O3JldHVybiB0JiZ0Lm9wZW5lcnx8KHQ9QyksdC5nZXRDb21wdXRlZFN0eWxlKGUpfSxXZT1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvPXt9O2ZvcihpIGluIHQpb1tpXT1lLnN0eWxlW2ldLGUuc3R5bGVbaV09dFtpXTtmb3IoaSBpbiByPW4uY2FsbChlKSx0KWUuc3R5bGVbaV09b1tpXTtyZXR1cm4gcn0sRmU9bmV3IFJlZ0V4cChuZS5qb2luKCJ8IiksImkiKTtmdW5jdGlvbiBCZShlLHQsbil7dmFyIHIsaSxvLGEscz1lLnN0eWxlO3JldHVybihuPW58fEllKGUpKSYmKCIiIT09KGE9bi5nZXRQcm9wZXJ0eVZhbHVlKHQpfHxuW3RdKXx8aWUoZSl8fChhPVMuc3R5bGUoZSx0KSksIXkucGl4ZWxCb3hTdHlsZXMoKSYmTWUudGVzdChhKSYmRmUudGVzdCh0KSYmKHI9cy53aWR0aCxpPXMubWluV2lkdGgsbz1zLm1heFdpZHRoLHMubWluV2lkdGg9cy5tYXhXaWR0aD1zLndpZHRoPWEsYT1uLndpZHRoLHMud2lkdGg9cixzLm1pbldpZHRoPWkscy5tYXhXaWR0aD1vKSksdm9pZCAwIT09YT9hKyIiOmF9ZnVuY3Rpb24gJGUoZSx0KXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7aWYoIWUoKSlyZXR1cm4odGhpcy5nZXQ9dCkuYXBwbHkodGhpcyxhcmd1bWVudHMpO2RlbGV0ZSB0aGlzLmdldH19fSFmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtpZihsKXt1LnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTExMTExcHg7d2lkdGg6NjBweDttYXJnaW4tdG9wOjFweDtwYWRkaW5nOjA7Ym9yZGVyOjAiLGwuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpibG9jaztib3gtc2l6aW5nOmJvcmRlci1ib3g7b3ZlcmZsb3c6c2Nyb2xsO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NjAlO3RvcDoxJSIscmUuYXBwZW5kQ2hpbGQodSkuYXBwZW5kQ2hpbGQobCk7dmFyIGU9Qy5nZXRDb21wdXRlZFN0eWxlKGwpO249IjElIiE9PWUudG9wLHM9MTI9PT10KGUubWFyZ2luTGVmdCksbC5zdHlsZS5yaWdodD0iNjAlIixvPTM2PT09dChlLnJpZ2h0KSxyPTM2PT09dChlLndpZHRoKSxsLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIsaT0xMj09PXQobC5vZmZzZXRXaWR0aC8zKSxyZS5yZW1vdmVDaGlsZCh1KSxsPW51bGx9fWZ1bmN0aW9uIHQoZSl7cmV0dXJuIE1hdGgucm91bmQocGFyc2VGbG9hdChlKSl9dmFyIG4scixpLG8sYSxzLHU9RS5jcmVhdGVFbGVtZW50KCJkaXYiKSxsPUUuY3JlYXRlRWxlbWVudCgiZGl2Iik7bC5zdHlsZSYmKGwuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IixsLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9IiIseS5jbGVhckNsb25lU3R5bGU9ImNvbnRlbnQtYm94Ij09PWwuc3R5bGUuYmFja2dyb3VuZENsaXAsUy5leHRlbmQoeSx7Ym94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLHJ9LHBpeGVsQm94U3R5bGVzOmZ1bmN0aW9uKCl7cmV0dXJuIGUoKSxvfSxwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGUoKSxufSxyZWxpYWJsZU1hcmdpbkxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLHN9LHNjcm9sbGJveFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLGl9LHJlbGlhYmxlVHJEaW1lbnNpb25zOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLHI7cmV0dXJuIG51bGw9PWEmJihlPUUuY3JlYXRlRWxlbWVudCgidGFibGUiKSx0PUUuY3JlYXRlRWxlbWVudCgidHIiKSxuPUUuY3JlYXRlRWxlbWVudCgiZGl2IiksZS5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMTExMXB4Iix0LnN0eWxlLmhlaWdodD0iMXB4IixuLnN0eWxlLmhlaWdodD0iOXB4IixyZS5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZCh0KS5hcHBlbmRDaGlsZChuKSxyPUMuZ2V0Q29tcHV0ZWRTdHlsZSh0KSxhPTM8cGFyc2VJbnQoci5oZWlnaHQpLHJlLnJlbW92ZUNoaWxkKGUpKSxhfX0pKX0oKTt2YXIgX2U9WyJXZWJraXQiLCJNb3oiLCJtcyJdLHplPUUuY3JlYXRlRWxlbWVudCgiZGl2Iikuc3R5bGUsVWU9e307ZnVuY3Rpb24gWGUoZSl7dmFyIHQ9Uy5jc3NQcm9wc1tlXXx8VWVbZV07cmV0dXJuIHR8fChlIGluIHplP2U6VWVbZV09ZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSksbj1fZS5sZW5ndGg7d2hpbGUobi0tKWlmKChlPV9lW25dK3QpaW4gemUpcmV0dXJuIGV9KGUpfHxlKX12YXIgVmU9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLEdlPS9eLS0vLFllPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxRZT17bGV0dGVyU3BhY2luZzoiMCIsZm9udFdlaWdodDoiNDAwIn07ZnVuY3Rpb24gSmUoZSx0LG4pe3ZhciByPXRlLmV4ZWModCk7cmV0dXJuIHI/TWF0aC5tYXgoMCxyWzJdLShufHwwKSkrKHJbM118fCJweCIpOnR9ZnVuY3Rpb24gS2UoZSx0LG4scixpLG8pe3ZhciBhPSJ3aWR0aCI9PT10PzE6MCxzPTAsdT0wO2lmKG49PT0ocj8iYm9yZGVyIjoiY29udGVudCIpKXJldHVybiAwO2Zvcig7YTw0O2ErPTIpIm1hcmdpbiI9PT1uJiYodSs9Uy5jc3MoZSxuK25lW2FdLCEwLGkpKSxyPygiY29udGVudCI9PT1uJiYodS09Uy5jc3MoZSwicGFkZGluZyIrbmVbYV0sITAsaSkpLCJtYXJnaW4iIT09biYmKHUtPVMuY3NzKGUsImJvcmRlciIrbmVbYV0rIldpZHRoIiwhMCxpKSkpOih1Kz1TLmNzcyhlLCJwYWRkaW5nIituZVthXSwhMCxpKSwicGFkZGluZyIhPT1uP3UrPVMuY3NzKGUsImJvcmRlciIrbmVbYV0rIldpZHRoIiwhMCxpKTpzKz1TLmNzcyhlLCJib3JkZXIiK25lW2FdKyJXaWR0aCIsITAsaSkpO3JldHVybiFyJiYwPD1vJiYodSs9TWF0aC5tYXgoMCxNYXRoLmNlaWwoZVsib2Zmc2V0Iit0WzBdLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKV0tby11LXMtLjUpKXx8MCksdX1mdW5jdGlvbiBaZShlLHQsbil7dmFyIHI9SWUoZSksaT0oIXkuYm94U2l6aW5nUmVsaWFibGUoKXx8bikmJiJib3JkZXItYm94Ij09PVMuY3NzKGUsImJveFNpemluZyIsITEsciksbz1pLGE9QmUoZSx0LHIpLHM9Im9mZnNldCIrdFswXS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSk7aWYoTWUudGVzdChhKSl7aWYoIW4pcmV0dXJuIGE7YT0iYXV0byJ9cmV0dXJuKCF5LmJveFNpemluZ1JlbGlhYmxlKCkmJml8fCF5LnJlbGlhYmxlVHJEaW1lbnNpb25zKCkmJkEoZSwidHIiKXx8ImF1dG8iPT09YXx8IXBhcnNlRmxvYXQoYSkmJiJpbmxpbmUiPT09Uy5jc3MoZSwiZGlzcGxheSIsITEscikpJiZlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoJiYoaT0iYm9yZGVyLWJveCI9PT1TLmNzcyhlLCJib3hTaXppbmciLCExLHIpLChvPXMgaW4gZSkmJihhPWVbc10pKSwoYT1wYXJzZUZsb2F0KGEpfHwwKStLZShlLHQsbnx8KGk/ImJvcmRlciI6ImNvbnRlbnQiKSxvLHIsYSkrInB4In1mdW5jdGlvbiBldChlLHQsbixyLGkpe3JldHVybiBuZXcgZXQucHJvdG90eXBlLmluaXQoZSx0LG4scixpKX1TLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPUJlKGUsIm9wYWNpdHkiKTtyZXR1cm4iIj09PW4/IjEiOm59fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGdyaWRBcmVhOiEwLGdyaWRDb2x1bW46ITAsZ3JpZENvbHVtbkVuZDohMCxncmlkQ29sdW1uU3RhcnQ6ITAsZ3JpZFJvdzohMCxncmlkUm93RW5kOiEwLGdyaWRSb3dTdGFydDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnt9LHN0eWxlOmZ1bmN0aW9uKGUsdCxuLHIpe2lmKGUmJjMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmZS5zdHlsZSl7dmFyIGksbyxhLHM9WCh0KSx1PUdlLnRlc3QodCksbD1lLnN0eWxlO2lmKHV8fCh0PVhlKHMpKSxhPVMuY3NzSG9va3NbdF18fFMuY3NzSG9va3Nbc10sdm9pZCAwPT09bilyZXR1cm4gYSYmImdldCJpbiBhJiZ2b2lkIDAhPT0oaT1hLmdldChlLCExLHIpKT9pOmxbdF07InN0cmluZyI9PT0obz10eXBlb2YgbikmJihpPXRlLmV4ZWMobikpJiZpWzFdJiYobj1zZShlLHQsaSksbz0ibnVtYmVyIiksbnVsbCE9biYmbj09biYmKCJudW1iZXIiIT09b3x8dXx8KG4rPWkmJmlbM118fChTLmNzc051bWJlcltzXT8iIjoicHgiKSkseS5jbGVhckNsb25lU3R5bGV8fCIiIT09bnx8MCE9PXQuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwobFt0XT0iaW5oZXJpdCIpLGEmJiJzZXQiaW4gYSYmdm9pZCAwPT09KG49YS5zZXQoZSxuLHIpKXx8KHU/bC5zZXRQcm9wZXJ0eSh0LG4pOmxbdF09bikpfX0sY3NzOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzPVgodCk7cmV0dXJuIEdlLnRlc3QodCl8fCh0PVhlKHMpKSwoYT1TLmNzc0hvb2tzW3RdfHxTLmNzc0hvb2tzW3NdKSYmImdldCJpbiBhJiYoaT1hLmdldChlLCEwLG4pKSx2b2lkIDA9PT1pJiYoaT1CZShlLHQscikpLCJub3JtYWwiPT09aSYmdCBpbiBRZSYmKGk9UWVbdF0pLCIiPT09bnx8bj8obz1wYXJzZUZsb2F0KGkpLCEwPT09bnx8aXNGaW5pdGUobyk/b3x8MDppKTppfX0pLFMuZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oZSx1KXtTLmNzc0hvb2tzW3VdPXtnZXQ6ZnVuY3Rpb24oZSx0LG4pe2lmKHQpcmV0dXJuIVZlLnRlc3QoUy5jc3MoZSwiZGlzcGxheSIpKXx8ZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCYmZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aD9aZShlLHUsbik6V2UoZSxZZSxmdW5jdGlvbigpe3JldHVybiBaZShlLHUsbil9KX0sc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPUllKGUpLG89IXkuc2Nyb2xsYm94U2l6ZSgpJiYiYWJzb2x1dGUiPT09aS5wb3NpdGlvbixhPShvfHxuKSYmImJvcmRlci1ib3giPT09Uy5jc3MoZSwiYm94U2l6aW5nIiwhMSxpKSxzPW4/S2UoZSx1LG4sYSxpKTowO3JldHVybiBhJiZvJiYocy09TWF0aC5jZWlsKGVbIm9mZnNldCIrdVswXS50b1VwcGVyQ2FzZSgpK3Uuc2xpY2UoMSldLXBhcnNlRmxvYXQoaVt1XSktS2UoZSx1LCJib3JkZXIiLCExLGkpLS41KSkscyYmKHI9dGUuZXhlYyh0KSkmJiJweCIhPT0oclszXXx8InB4IikmJihlLnN0eWxlW3VdPXQsdD1TLmNzcyhlLHUpKSxKZSgwLHQscyl9fX0pLFMuY3NzSG9va3MubWFyZ2luTGVmdD0kZSh5LnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihlLHQpe2lmKHQpcmV0dXJuKHBhcnNlRmxvYXQoQmUoZSwibWFyZ2luTGVmdCIpKXx8ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LVdlKGUse21hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSkpKyJweCJ9KSxTLmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihpLG8pe1MuY3NzSG9va3NbaStvXT17ZXhwYW5kOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49e30scj0ic3RyaW5nIj09dHlwZW9mIGU/ZS5zcGxpdCgiICIpOltlXTt0PDQ7dCsrKW5baStuZVt0XStvXT1yW3RdfHxyW3QtMl18fHJbMF07cmV0dXJuIG59fSwibWFyZ2luIiE9PWkmJihTLmNzc0hvb2tzW2krb10uc2V0PUplKX0pLFMuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gJCh0aGlzLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89e30sYT0wO2lmKEFycmF5LmlzQXJyYXkodCkpe2ZvcihyPUllKGUpLGk9dC5sZW5ndGg7YTxpO2ErKylvW3RbYV1dPVMuY3NzKGUsdFthXSwhMSxyKTtyZXR1cm4gb31yZXR1cm4gdm9pZCAwIT09bj9TLnN0eWxlKGUsdCxuKTpTLmNzcyhlLHQpfSxlLHQsMTxhcmd1bWVudHMubGVuZ3RoKX19KSwoKFMuVHdlZW49ZXQpLnByb3RvdHlwZT17Y29uc3RydWN0b3I6ZXQsaW5pdDpmdW5jdGlvbihlLHQsbixyLGksbyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9aXx8Uy5lYXNpbmcuX2RlZmF1bHQsdGhpcy5vcHRpb25zPXQsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPXIsdGhpcy51bml0PW98fChTLmNzc051bWJlcltuXT8iIjoicHgiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGU9ZXQucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGUmJmUuZ2V0P2UuZ2V0KHRoaXMpOmV0LnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihlKXt2YXIgdCxuPWV0LnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLm9wdGlvbnMuZHVyYXRpb24/dGhpcy5wb3M9dD1TLmVhc2luZ1t0aGlzLmVhc2luZ10oZSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qZSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTp0aGlzLnBvcz10PWUsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKnQrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksbiYmbi5zZXQ/bi5zZXQodGhpcyk6ZXQucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0pLmluaXQucHJvdG90eXBlPWV0LnByb3RvdHlwZSwoZXQucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiAxIT09ZS5lbGVtLm5vZGVUeXBlfHxudWxsIT1lLmVsZW1bZS5wcm9wXSYmbnVsbD09ZS5lbGVtLnN0eWxlW2UucHJvcF0/ZS5lbGVtW2UucHJvcF06KHQ9Uy5jc3MoZS5lbGVtLGUucHJvcCwiIikpJiYiYXV0byIhPT10P3Q6MH0sc2V0OmZ1bmN0aW9uKGUpe1MuZnguc3RlcFtlLnByb3BdP1MuZnguc3RlcFtlLnByb3BdKGUpOjEhPT1lLmVsZW0ubm9kZVR5cGV8fCFTLmNzc0hvb2tzW2UucHJvcF0mJm51bGw9PWUuZWxlbS5zdHlsZVtYZShlLnByb3ApXT9lLmVsZW1bZS5wcm9wXT1lLm5vdzpTLnN0eWxlKGUuZWxlbSxlLnByb3AsZS5ub3crZS51bml0KX19fSkuc2Nyb2xsVG9wPWV0LnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oZSl7ZS5lbGVtLm5vZGVUeXBlJiZlLmVsZW0ucGFyZW50Tm9kZSYmKGUuZWxlbVtlLnByb3BdPWUubm93KX19LFMuZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn0sX2RlZmF1bHQ6InN3aW5nIn0sUy5meD1ldC5wcm90b3R5cGUuaW5pdCxTLmZ4LnN0ZXA9e307dmFyIHR0LG50LHJ0LGl0LG90PS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxhdD0vcXVldWVIb29rcyQvO2Z1bmN0aW9uIHN0KCl7bnQmJighMT09PUUuaGlkZGVuJiZDLnJlcXVlc3RBbmltYXRpb25GcmFtZT9DLnJlcXVlc3RBbmltYXRpb25GcmFtZShzdCk6Qy5zZXRUaW1lb3V0KHN0LFMuZnguaW50ZXJ2YWwpLFMuZngudGljaygpKX1mdW5jdGlvbiB1dCgpe3JldHVybiBDLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0dD12b2lkIDB9KSx0dD1EYXRlLm5vdygpfWZ1bmN0aW9uIGx0KGUsdCl7dmFyIG4scj0wLGk9e2hlaWdodDplfTtmb3IodD10PzE6MDtyPDQ7cis9Mi10KWlbIm1hcmdpbiIrKG49bmVbcl0pXT1pWyJwYWRkaW5nIituXT1lO3JldHVybiB0JiYoaS5vcGFjaXR5PWkud2lkdGg9ZSksaX1mdW5jdGlvbiBjdChlLHQsbil7Zm9yKHZhciByLGk9KGZ0LnR3ZWVuZXJzW3RdfHxbXSkuY29uY2F0KGZ0LnR3ZWVuZXJzWyIqIl0pLG89MCxhPWkubGVuZ3RoO288YTtvKyspaWYocj1pW29dLmNhbGwobix0LGUpKXJldHVybiByfWZ1bmN0aW9uIGZ0KG8sZSx0KXt2YXIgbixhLHI9MCxpPWZ0LnByZWZpbHRlcnMubGVuZ3RoLHM9Uy5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB1LmVsZW19KSx1PWZ1bmN0aW9uKCl7aWYoYSlyZXR1cm4hMTtmb3IodmFyIGU9dHR8fHV0KCksdD1NYXRoLm1heCgwLGwuc3RhcnRUaW1lK2wuZHVyYXRpb24tZSksbj0xLSh0L2wuZHVyYXRpb258fDApLHI9MCxpPWwudHdlZW5zLmxlbmd0aDtyPGk7cisrKWwudHdlZW5zW3JdLnJ1bihuKTtyZXR1cm4gcy5ub3RpZnlXaXRoKG8sW2wsbix0XSksbjwxJiZpP3Q6KGl8fHMubm90aWZ5V2l0aChvLFtsLDEsMF0pLHMucmVzb2x2ZVdpdGgobyxbbF0pLCExKX0sbD1zLnByb21pc2Uoe2VsZW06byxwcm9wczpTLmV4dGVuZCh7fSxlKSxvcHRzOlMuZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpTLmVhc2luZy5fZGVmYXVsdH0sdCksb3JpZ2luYWxQcm9wZXJ0aWVzOmUsb3JpZ2luYWxPcHRpb25zOnQsc3RhcnRUaW1lOnR0fHx1dCgpLGR1cmF0aW9uOnQuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGUsdCl7dmFyIG49Uy5Ud2VlbihvLGwub3B0cyxlLHQsbC5vcHRzLnNwZWNpYWxFYXNpbmdbZV18fGwub3B0cy5lYXNpbmcpO3JldHVybiBsLnR3ZWVucy5wdXNoKG4pLG59LHN0b3A6ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPWU/bC50d2VlbnMubGVuZ3RoOjA7aWYoYSlyZXR1cm4gdGhpcztmb3IoYT0hMDt0PG47dCsrKWwudHdlZW5zW3RdLnJ1bigxKTtyZXR1cm4gZT8ocy5ub3RpZnlXaXRoKG8sW2wsMSwwXSkscy5yZXNvbHZlV2l0aChvLFtsLGVdKSk6cy5yZWplY3RXaXRoKG8sW2wsZV0pLHRoaXN9fSksYz1sLnByb3BzO2ZvcighZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhO2ZvcihuIGluIGUpaWYoaT10W3I9WChuKV0sbz1lW25dLEFycmF5LmlzQXJyYXkobykmJihpPW9bMV0sbz1lW25dPW9bMF0pLG4hPT1yJiYoZVtyXT1vLGRlbGV0ZSBlW25dKSwoYT1TLmNzc0hvb2tzW3JdKSYmImV4cGFuZCJpbiBhKWZvcihuIGluIG89YS5leHBhbmQobyksZGVsZXRlIGVbcl0sbyluIGluIGV8fChlW25dPW9bbl0sdFtuXT1pKTtlbHNlIHRbcl09aX0oYyxsLm9wdHMuc3BlY2lhbEVhc2luZyk7cjxpO3IrKylpZihuPWZ0LnByZWZpbHRlcnNbcl0uY2FsbChsLG8sYyxsLm9wdHMpKXJldHVybiBtKG4uc3RvcCkmJihTLl9xdWV1ZUhvb2tzKGwuZWxlbSxsLm9wdHMucXVldWUpLnN0b3A9bi5zdG9wLmJpbmQobikpLG47cmV0dXJuIFMubWFwKGMsY3QsbCksbShsLm9wdHMuc3RhcnQpJiZsLm9wdHMuc3RhcnQuY2FsbChvLGwpLGwucHJvZ3Jlc3MobC5vcHRzLnByb2dyZXNzKS5kb25lKGwub3B0cy5kb25lLGwub3B0cy5jb21wbGV0ZSkuZmFpbChsLm9wdHMuZmFpbCkuYWx3YXlzKGwub3B0cy5hbHdheXMpLFMuZngudGltZXIoUy5leHRlbmQodSx7ZWxlbTpvLGFuaW06bCxxdWV1ZTpsLm9wdHMucXVldWV9KSksbH1TLkFuaW1hdGlvbj1TLmV4dGVuZChmdCx7dHdlZW5lcnM6eyIqIjpbZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmNyZWF0ZVR3ZWVuKGUsdCk7cmV0dXJuIHNlKG4uZWxlbSxlLHRlLmV4ZWModCksbiksbn1dfSx0d2VlbmVyOmZ1bmN0aW9uKGUsdCl7bShlKT8odD1lLGU9WyIqIl0pOmU9ZS5tYXRjaChQKTtmb3IodmFyIG4scj0wLGk9ZS5sZW5ndGg7cjxpO3IrKyluPWVbcl0sZnQudHdlZW5lcnNbbl09ZnQudHdlZW5lcnNbbl18fFtdLGZ0LnR3ZWVuZXJzW25dLnVuc2hpZnQodCl9LHByZWZpbHRlcnM6W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbCxjLGY9IndpZHRoImluIHR8fCJoZWlnaHQiaW4gdCxwPXRoaXMsZD17fSxoPWUuc3R5bGUsZz1lLm5vZGVUeXBlJiZhZShlKSx2PVkuZ2V0KGUsImZ4c2hvdyIpO2ZvcihyIGluIG4ucXVldWV8fChudWxsPT0oYT1TLl9xdWV1ZUhvb2tzKGUsImZ4IikpLnVucXVldWVkJiYoYS51bnF1ZXVlZD0wLHM9YS5lbXB0eS5maXJlLGEuZW1wdHkuZmlyZT1mdW5jdGlvbigpe2EudW5xdWV1ZWR8fHMoKX0pLGEudW5xdWV1ZWQrKyxwLmFsd2F5cyhmdW5jdGlvbigpe3AuYWx3YXlzKGZ1bmN0aW9uKCl7YS51bnF1ZXVlZC0tLFMucXVldWUoZSwiZngiKS5sZW5ndGh8fGEuZW1wdHkuZmlyZSgpfSl9KSksdClpZihpPXRbcl0sb3QudGVzdChpKSl7aWYoZGVsZXRlIHRbcl0sbz1vfHwidG9nZ2xlIj09PWksaT09PShnPyJoaWRlIjoic2hvdyIpKXtpZigic2hvdyIhPT1pfHwhdnx8dm9pZCAwPT09dltyXSljb250aW51ZTtnPSEwfWRbcl09diYmdltyXXx8Uy5zdHlsZShlLHIpfWlmKCh1PSFTLmlzRW1wdHlPYmplY3QodCkpfHwhUy5pc0VtcHR5T2JqZWN0KGQpKWZvcihyIGluIGYmJjE9PT1lLm5vZGVUeXBlJiYobi5vdmVyZmxvdz1baC5vdmVyZmxvdyxoLm92ZXJmbG93WCxoLm92ZXJmbG93WV0sbnVsbD09KGw9diYmdi5kaXNwbGF5KSYmKGw9WS5nZXQoZSwiZGlzcGxheSIpKSwibm9uZSI9PT0oYz1TLmNzcyhlLCJkaXNwbGF5IikpJiYobD9jPWw6KGxlKFtlXSwhMCksbD1lLnN0eWxlLmRpc3BsYXl8fGwsYz1TLmNzcyhlLCJkaXNwbGF5IiksbGUoW2VdKSkpLCgiaW5saW5lIj09PWN8fCJpbmxpbmUtYmxvY2siPT09YyYmbnVsbCE9bCkmJiJub25lIj09PVMuY3NzKGUsImZsb2F0IikmJih1fHwocC5kb25lKGZ1bmN0aW9uKCl7aC5kaXNwbGF5PWx9KSxudWxsPT1sJiYoYz1oLmRpc3BsYXksbD0ibm9uZSI9PT1jPyIiOmMpKSxoLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxuLm92ZXJmbG93JiYoaC5vdmVyZmxvdz0iaGlkZGVuIixwLmFsd2F5cyhmdW5jdGlvbigpe2gub3ZlcmZsb3c9bi5vdmVyZmxvd1swXSxoLm92ZXJmbG93WD1uLm92ZXJmbG93WzFdLGgub3ZlcmZsb3dZPW4ub3ZlcmZsb3dbMl19KSksdT0hMSxkKXV8fCh2PyJoaWRkZW4iaW4gdiYmKGc9di5oaWRkZW4pOnY9WS5hY2Nlc3MoZSwiZnhzaG93Iix7ZGlzcGxheTpsfSksbyYmKHYuaGlkZGVuPSFnKSxnJiZsZShbZV0sITApLHAuZG9uZShmdW5jdGlvbigpe2ZvcihyIGluIGd8fGxlKFtlXSksWS5yZW1vdmUoZSwiZnhzaG93IiksZClTLnN0eWxlKGUscixkW3JdKX0pKSx1PWN0KGc/dltyXTowLHIscCksciBpbiB2fHwodltyXT11LnN0YXJ0LGcmJih1LmVuZD11LnN0YXJ0LHUuc3RhcnQ9MCkpfV0scHJlZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dD9mdC5wcmVmaWx0ZXJzLnVuc2hpZnQoZSk6ZnQucHJlZmlsdGVycy5wdXNoKGUpfX0pLFMuc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJiJvYmplY3QiPT10eXBlb2YgZT9TLmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fG0oZSkmJmUsZHVyYXRpb246ZSxlYXNpbmc6biYmdHx8dCYmIW0odCkmJnR9O3JldHVybiBTLmZ4Lm9mZj9yLmR1cmF0aW9uPTA6Im51bWJlciIhPXR5cGVvZiByLmR1cmF0aW9uJiYoci5kdXJhdGlvbiBpbiBTLmZ4LnNwZWVkcz9yLmR1cmF0aW9uPVMuZnguc3BlZWRzW3IuZHVyYXRpb25dOnIuZHVyYXRpb249Uy5meC5zcGVlZHMuX2RlZmF1bHQpLG51bGwhPXIucXVldWUmJiEwIT09ci5xdWV1ZXx8KHIucXVldWU9ImZ4Iiksci5vbGQ9ci5jb21wbGV0ZSxyLmNvbXBsZXRlPWZ1bmN0aW9uKCl7bShyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmUy5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LFMuZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMuZmlsdGVyKGFlKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbih0LGUsbixyKXt2YXIgaT1TLmlzRW1wdHlPYmplY3QodCksbz1TLnNwZWVkKGUsbixyKSxhPWZ1bmN0aW9uKCl7dmFyIGU9ZnQodGhpcyxTLmV4dGVuZCh7fSx0KSxvKTsoaXx8WS5nZXQodGhpcywiZmluaXNoIikpJiZlLnN0b3AoITApfTtyZXR1cm4gYS5maW5pc2g9YSxpfHwhMT09PW8ucXVldWU/dGhpcy5lYWNoKGEpOnRoaXMucXVldWUoby5xdWV1ZSxhKX0sc3RvcDpmdW5jdGlvbihpLGUsbyl7dmFyIGE9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdG9wO2RlbGV0ZSBlLnN0b3AsdChvKX07cmV0dXJuInN0cmluZyIhPXR5cGVvZiBpJiYobz1lLGU9aSxpPXZvaWQgMCksZSYmdGhpcy5xdWV1ZShpfHwiZngiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT0hMCx0PW51bGwhPWkmJmkrInF1ZXVlSG9va3MiLG49Uy50aW1lcnMscj1ZLmdldCh0aGlzKTtpZih0KXJbdF0mJnJbdF0uc3RvcCYmYShyW3RdKTtlbHNlIGZvcih0IGluIHIpclt0XSYmclt0XS5zdG9wJiZhdC50ZXN0KHQpJiZhKHJbdF0pO2Zvcih0PW4ubGVuZ3RoO3QtLTspblt0XS5lbGVtIT09dGhpc3x8bnVsbCE9aSYmblt0XS5xdWV1ZSE9PWl8fChuW3RdLmFuaW0uc3RvcChvKSxlPSExLG4uc3BsaWNlKHQsMSkpOyFlJiZvfHxTLmRlcXVldWUodGhpcyxpKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuITEhPT1hJiYoYT1hfHwiZngiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZSx0PVkuZ2V0KHRoaXMpLG49dFthKyJxdWV1ZSJdLHI9dFthKyJxdWV1ZUhvb2tzIl0saT1TLnRpbWVycyxvPW4/bi5sZW5ndGg6MDtmb3IodC5maW5pc2g9ITAsUy5xdWV1ZSh0aGlzLGEsW10pLHImJnIuc3RvcCYmci5zdG9wLmNhbGwodGhpcywhMCksZT1pLmxlbmd0aDtlLS07KWlbZV0uZWxlbT09PXRoaXMmJmlbZV0ucXVldWU9PT1hJiYoaVtlXS5hbmltLnN0b3AoITApLGkuc3BsaWNlKGUsMSkpO2ZvcihlPTA7ZTxvO2UrKyluW2VdJiZuW2VdLmZpbmlzaCYmbltlXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgdC5maW5pc2h9KX19KSxTLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGUscil7dmFyIGk9Uy5mbltyXTtTLmZuW3JdPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbnVsbD09ZXx8ImJvb2xlYW4iPT10eXBlb2YgZT9pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUobHQociwhMCksZSx0LG4pfX0pLFMuZWFjaCh7c2xpZGVEb3duOmx0KCJzaG93Iiksc2xpZGVVcDpsdCgiaGlkZSIpLHNsaWRlVG9nZ2xlOmx0KCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGUscil7Uy5mbltlXT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuYW5pbWF0ZShyLGUsdCxuKX19KSxTLnRpbWVycz1bXSxTLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgZSx0PTAsbj1TLnRpbWVycztmb3IodHQ9RGF0ZS5ub3coKTt0PG4ubGVuZ3RoO3QrKykoZT1uW3RdKSgpfHxuW3RdIT09ZXx8bi5zcGxpY2UodC0tLDEpO24ubGVuZ3RofHxTLmZ4LnN0b3AoKSx0dD12b2lkIDB9LFMuZngudGltZXI9ZnVuY3Rpb24oZSl7Uy50aW1lcnMucHVzaChlKSxTLmZ4LnN0YXJ0KCl9LFMuZnguaW50ZXJ2YWw9MTMsUy5meC5zdGFydD1mdW5jdGlvbigpe250fHwobnQ9ITAsc3QoKSl9LFMuZnguc3RvcD1mdW5jdGlvbigpe250PW51bGx9LFMuZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LFMuZm4uZGVsYXk9ZnVuY3Rpb24ocixlKXtyZXR1cm4gcj1TLmZ4JiZTLmZ4LnNwZWVkc1tyXXx8cixlPWV8fCJmeCIsdGhpcy5xdWV1ZShlLGZ1bmN0aW9uKGUsdCl7dmFyIG49Qy5zZXRUaW1lb3V0KGUscik7dC5zdG9wPWZ1bmN0aW9uKCl7Qy5jbGVhclRpbWVvdXQobil9fSl9LHJ0PUUuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxpdD1FLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLmFwcGVuZENoaWxkKEUuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpLHJ0LnR5cGU9ImNoZWNrYm94Iix5LmNoZWNrT249IiIhPT1ydC52YWx1ZSx5Lm9wdFNlbGVjdGVkPWl0LnNlbGVjdGVkLChydD1FLmNyZWF0ZUVsZW1lbnQoImlucHV0IikpLnZhbHVlPSJ0IixydC50eXBlPSJyYWRpbyIseS5yYWRpb1ZhbHVlPSJ0Ij09PXJ0LnZhbHVlO3ZhciBwdCxkdD1TLmV4cHIuYXR0ckhhbmRsZTtTLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlLHQpe3JldHVybiAkKHRoaXMsUy5hdHRyLGUsdCwxPGFyZ3VtZW50cy5sZW5ndGgpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtTLnJlbW92ZUF0dHIodGhpcyxlKX0pfX0pLFMuZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89ZS5ub2RlVHlwZTtpZigzIT09byYmOCE9PW8mJjIhPT1vKXJldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgZS5nZXRBdHRyaWJ1dGU/Uy5wcm9wKGUsdCxuKTooMT09PW8mJlMuaXNYTUxEb2MoZSl8fChpPVMuYXR0ckhvb2tzW3QudG9Mb3dlckNhc2UoKV18fChTLmV4cHIubWF0Y2guYm9vbC50ZXN0KHQpP3B0OnZvaWQgMCkpLHZvaWQgMCE9PW4/bnVsbD09PW4/dm9pZCBTLnJlbW92ZUF0dHIoZSx0KTppJiYic2V0ImluIGkmJnZvaWQgMCE9PShyPWkuc2V0KGUsbix0KSk/cjooZS5zZXRBdHRyaWJ1dGUodCxuKyIiKSxuKTppJiYiZ2V0ImluIGkmJm51bGwhPT0ocj1pLmdldChlLHQpKT9yOm51bGw9PShyPVMuZmluZC5hdHRyKGUsdCkpP3ZvaWQgMDpyKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oZSx0KXtpZigheS5yYWRpb1ZhbHVlJiYicmFkaW8iPT09dCYmQShlLCJpbnB1dCIpKXt2YXIgbj1lLnZhbHVlO3JldHVybiBlLnNldEF0dHJpYnV0ZSgidHlwZSIsdCksbiYmKGUudmFsdWU9biksdH19fX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXQmJnQubWF0Y2goUCk7aWYoaSYmMT09PWUubm9kZVR5cGUpd2hpbGUobj1pW3IrK10pZS5yZW1vdmVBdHRyaWJ1dGUobil9fSkscHQ9e3NldDpmdW5jdGlvbihlLHQsbil7cmV0dXJuITE9PT10P1MucmVtb3ZlQXR0cihlLG4pOmUuc2V0QXR0cmlidXRlKG4sbiksbn19LFMuZWFjaChTLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihlLHQpe3ZhciBhPWR0W3RdfHxTLmZpbmQuYXR0cjtkdFt0XT1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvPXQudG9Mb3dlckNhc2UoKTtyZXR1cm4gbnx8KGk9ZHRbb10sZHRbb109cixyPW51bGwhPWEoZSx0LG4pP286bnVsbCxkdFtvXT1pKSxyfX0pO3ZhciBodD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLGd0PS9eKD86YXxhcmVhKSQvaTtmdW5jdGlvbiB2dChlKXtyZXR1cm4oZS5tYXRjaChQKXx8W10pLmpvaW4oIiAiKX1mdW5jdGlvbiB5dChlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIn1mdW5jdGlvbiBtdChlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lOiJzdHJpbmciPT10eXBlb2YgZSYmZS5tYXRjaChQKXx8W119Uy5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gJCh0aGlzLFMucHJvcCxlLHQsMTxhcmd1bWVudHMubGVuZ3RoKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbUy5wcm9wRml4W2VdfHxlXX0pfX0pLFMuZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89ZS5ub2RlVHlwZTtpZigzIT09byYmOCE9PW8mJjIhPT1vKXJldHVybiAxPT09byYmUy5pc1hNTERvYyhlKXx8KHQ9Uy5wcm9wRml4W3RdfHx0LGk9Uy5wcm9wSG9va3NbdF0pLHZvaWQgMCE9PW4/aSYmInNldCJpbiBpJiZ2b2lkIDAhPT0ocj1pLnNldChlLG4sdCkpP3I6ZVt0XT1uOmkmJiJnZXQiaW4gaSYmbnVsbCE9PShyPWkuZ2V0KGUsdCkpP3I6ZVt0XX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PVMuZmluZC5hdHRyKGUsInRhYmluZGV4Iik7cmV0dXJuIHQ/cGFyc2VJbnQodCwxMCk6aHQudGVzdChlLm5vZGVOYW1lKXx8Z3QudGVzdChlLm5vZGVOYW1lKSYmZS5ocmVmPzA6LTF9fX0scHJvcEZpeDp7ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSJ9fSkseS5vcHRTZWxlY3RlZHx8KFMucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiZ0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LG51bGx9LHNldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7dCYmKHQuc2VsZWN0ZWRJbmRleCx0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4KX19KSxTLmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe1MucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KSxTLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24odCl7dmFyIGUsbixyLGksbyxhLHMsdT0wO2lmKG0odCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlKXtTKHRoaXMpLmFkZENsYXNzKHQuY2FsbCh0aGlzLGUseXQodGhpcykpKX0pO2lmKChlPW10KHQpKS5sZW5ndGgpd2hpbGUobj10aGlzW3UrK10paWYoaT15dChuKSxyPTE9PT1uLm5vZGVUeXBlJiYiICIrdnQoaSkrIiAiKXthPTA7d2hpbGUobz1lW2ErK10pci5pbmRleE9mKCIgIitvKyIgIik8MCYmKHIrPW8rIiAiKTtpIT09KHM9dnQocikpJiZuLnNldEF0dHJpYnV0ZSgiY2xhc3MiLHMpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbih0KXt2YXIgZSxuLHIsaSxvLGEscyx1PTA7aWYobSh0KSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykucmVtb3ZlQ2xhc3ModC5jYWxsKHRoaXMsZSx5dCh0aGlzKSkpfSk7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuYXR0cigiY2xhc3MiLCIiKTtpZigoZT1tdCh0KSkubGVuZ3RoKXdoaWxlKG49dGhpc1t1KytdKWlmKGk9eXQobikscj0xPT09bi5ub2RlVHlwZSYmIiAiK3Z0KGkpKyIgIil7YT0wO3doaWxlKG89ZVthKytdKXdoaWxlKC0xPHIuaW5kZXhPZigiICIrbysiICIpKXI9ci5yZXBsYWNlKCIgIitvKyIgIiwiICIpO2khPT0ocz12dChyKSkmJm4uc2V0QXR0cmlidXRlKCJjbGFzcyIscyl9cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGksdCl7dmFyIG89dHlwZW9mIGksYT0ic3RyaW5nIj09PW98fEFycmF5LmlzQXJyYXkoaSk7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgdCYmYT90P3RoaXMuYWRkQ2xhc3MoaSk6dGhpcy5yZW1vdmVDbGFzcyhpKTptKGkpP3RoaXMuZWFjaChmdW5jdGlvbihlKXtTKHRoaXMpLnRvZ2dsZUNsYXNzKGkuY2FsbCh0aGlzLGUseXQodGhpcyksdCksdCl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZSx0LG4scjtpZihhKXt0PTAsbj1TKHRoaXMpLHI9bXQoaSk7d2hpbGUoZT1yW3QrK10pbi5oYXNDbGFzcyhlKT9uLnJlbW92ZUNsYXNzKGUpOm4uYWRkQ2xhc3MoZSl9ZWxzZSB2b2lkIDAhPT1pJiYiYm9vbGVhbiIhPT1vfHwoKGU9eXQodGhpcykpJiZZLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIixlKSx0aGlzLnNldEF0dHJpYnV0ZSYmdGhpcy5zZXRBdHRyaWJ1dGUoImNsYXNzIixlfHwhMT09PWk/IiI6WS5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj0wO3Q9IiAiK2UrIiAiO3doaWxlKG49dGhpc1tyKytdKWlmKDE9PT1uLm5vZGVUeXBlJiYtMTwoIiAiK3Z0KHl0KG4pKSsiICIpLmluZGV4T2YodCkpcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIHh0PS9cci9nO1MuZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24obil7dmFyIHIsZSxpLHQ9dGhpc1swXTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT1tKG4pLHRoaXMuZWFjaChmdW5jdGlvbihlKXt2YXIgdDsxPT09dGhpcy5ub2RlVHlwZSYmKG51bGw9PSh0PWk/bi5jYWxsKHRoaXMsZSxTKHRoaXMpLnZhbCgpKTpuKT90PSIiOiJudW1iZXIiPT10eXBlb2YgdD90Kz0iIjpBcnJheS5pc0FycmF5KHQpJiYodD1TLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOmUrIiJ9KSksKHI9Uy52YWxIb29rc1t0aGlzLnR5cGVdfHxTLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pJiYic2V0ImluIHImJnZvaWQgMCE9PXIuc2V0KHRoaXMsdCwidmFsdWUiKXx8KHRoaXMudmFsdWU9dCkpfSkpOnQ/KHI9Uy52YWxIb29rc1t0LnR5cGVdfHxTLnZhbEhvb2tzW3Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pJiYiZ2V0ImluIHImJnZvaWQgMCE9PShlPXIuZ2V0KHQsInZhbHVlIikpP2U6InN0cmluZyI9PXR5cGVvZihlPXQudmFsdWUpP2UucmVwbGFjZSh4dCwiIik6bnVsbD09ZT8iIjplOnZvaWQgMH19KSxTLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PVMuZmluZC5hdHRyKGUsInZhbHVlIik7cmV0dXJuIG51bGwhPXQ/dDp2dChTLnRleHQoZSkpfX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGk9ZS5vcHRpb25zLG89ZS5zZWxlY3RlZEluZGV4LGE9InNlbGVjdC1vbmUiPT09ZS50eXBlLHM9YT9udWxsOltdLHU9YT9vKzE6aS5sZW5ndGg7Zm9yKHI9bzwwP3U6YT9vOjA7cjx1O3IrKylpZigoKG49aVtyXSkuc2VsZWN0ZWR8fHI9PT1vKSYmIW4uZGlzYWJsZWQmJighbi5wYXJlbnROb2RlLmRpc2FibGVkfHwhQShuLnBhcmVudE5vZGUsIm9wdGdyb3VwIikpKXtpZih0PVMobikudmFsKCksYSlyZXR1cm4gdDtzLnB1c2godCl9cmV0dXJuIHN9LHNldDpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT1lLm9wdGlvbnMsbz1TLm1ha2VBcnJheSh0KSxhPWkubGVuZ3RoO3doaWxlKGEtLSkoKHI9aVthXSkuc2VsZWN0ZWQ9LTE8Uy5pbkFycmF5KFMudmFsSG9va3Mub3B0aW9uLmdldChyKSxvKSkmJihuPSEwKTtyZXR1cm4gbnx8KGUuc2VsZWN0ZWRJbmRleD0tMSksb319fX0pLFMuZWFjaChbInJhZGlvIiwiY2hlY2tib3giXSxmdW5jdGlvbigpe1MudmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihlLHQpe2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIGUuY2hlY2tlZD0tMTxTLmluQXJyYXkoUyhlKS52YWwoKSx0KX19LHkuY2hlY2tPbnx8KFMudmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZS5nZXRBdHRyaWJ1dGUoInZhbHVlIik/Im9uIjplLnZhbHVlfSl9KSx5LmZvY3VzaW49Im9uZm9jdXNpbiJpbiBDO3ZhciBidD0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sd3Q9ZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKX07Uy5leHRlbmQoUy5ldmVudCx7dHJpZ2dlcjpmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLGEscyx1LGwsYyxmLHA9W258fEVdLGQ9di5jYWxsKGUsInR5cGUiKT9lLnR5cGU6ZSxoPXYuY2FsbChlLCJuYW1lc3BhY2UiKT9lLm5hbWVzcGFjZS5zcGxpdCgiLiIpOltdO2lmKG89Zj1hPW49bnx8RSwzIT09bi5ub2RlVHlwZSYmOCE9PW4ubm9kZVR5cGUmJiFidC50ZXN0KGQrUy5ldmVudC50cmlnZ2VyZWQpJiYoLTE8ZC5pbmRleE9mKCIuIikmJihkPShoPWQuc3BsaXQoIi4iKSkuc2hpZnQoKSxoLnNvcnQoKSksdT1kLmluZGV4T2YoIjoiKTwwJiYib24iK2QsKGU9ZVtTLmV4cGFuZG9dP2U6bmV3IFMuRXZlbnQoZCwib2JqZWN0Ij09dHlwZW9mIGUmJmUpKS5pc1RyaWdnZXI9cj8yOjMsZS5uYW1lc3BhY2U9aC5qb2luKCIuIiksZS5ybmFtZXNwYWNlPWUubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK2guam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxlLnJlc3VsdD12b2lkIDAsZS50YXJnZXR8fChlLnRhcmdldD1uKSx0PW51bGw9PXQ/W2VdOlMubWFrZUFycmF5KHQsW2VdKSxjPVMuZXZlbnQuc3BlY2lhbFtkXXx8e30scnx8IWMudHJpZ2dlcnx8ITEhPT1jLnRyaWdnZXIuYXBwbHkobix0KSkpe2lmKCFyJiYhYy5ub0J1YmJsZSYmIXgobikpe2ZvcihzPWMuZGVsZWdhdGVUeXBlfHxkLGJ0LnRlc3QocytkKXx8KG89by5wYXJlbnROb2RlKTtvO289by5wYXJlbnROb2RlKXAucHVzaChvKSxhPW87YT09PShuLm93bmVyRG9jdW1lbnR8fEUpJiZwLnB1c2goYS5kZWZhdWx0Vmlld3x8YS5wYXJlbnRXaW5kb3d8fEMpfWk9MDt3aGlsZSgobz1wW2krK10pJiYhZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWY9byxlLnR5cGU9MTxpP3M6Yy5iaW5kVHlwZXx8ZCwobD0oWS5nZXQobywiZXZlbnRzIil8fE9iamVjdC5jcmVhdGUobnVsbCkpW2UudHlwZV0mJlkuZ2V0KG8sImhhbmRsZSIpKSYmbC5hcHBseShvLHQpLChsPXUmJm9bdV0pJiZsLmFwcGx5JiZWKG8pJiYoZS5yZXN1bHQ9bC5hcHBseShvLHQpLCExPT09ZS5yZXN1bHQmJmUucHJldmVudERlZmF1bHQoKSk7cmV0dXJuIGUudHlwZT1kLHJ8fGUuaXNEZWZhdWx0UHJldmVudGVkKCl8fGMuX2RlZmF1bHQmJiExIT09Yy5fZGVmYXVsdC5hcHBseShwLnBvcCgpLHQpfHwhVihuKXx8dSYmbShuW2RdKSYmIXgobikmJigoYT1uW3VdKSYmKG5bdV09bnVsbCksUy5ldmVudC50cmlnZ2VyZWQ9ZCxlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkmJmYuYWRkRXZlbnRMaXN0ZW5lcihkLHd0KSxuW2RdKCksZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpJiZmLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCx3dCksUy5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGEmJihuW3VdPWEpKSxlLnJlc3VsdH19LHNpbXVsYXRlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1TLmV4dGVuZChuZXcgUy5FdmVudCxuLHt0eXBlOmUsaXNTaW11bGF0ZWQ6ITB9KTtTLmV2ZW50LnRyaWdnZXIocixudWxsLHQpfX0pLFMuZm4uZXh0ZW5kKHt0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1MuZXZlbnQudHJpZ2dlcihlLHQsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzWzBdO2lmKG4pcmV0dXJuIFMuZXZlbnQudHJpZ2dlcihlLHQsbiwhMCl9fSkseS5mb2N1c2lufHxTLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKG4scil7dmFyIGk9ZnVuY3Rpb24oZSl7Uy5ldmVudC5zaW11bGF0ZShyLGUudGFyZ2V0LFMuZXZlbnQuZml4KGUpKX07Uy5ldmVudC5zcGVjaWFsW3JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcy5kb2N1bWVudHx8dGhpcyx0PVkuYWNjZXNzKGUscik7dHx8ZS5hZGRFdmVudExpc3RlbmVyKG4saSwhMCksWS5hY2Nlc3MoZSxyLCh0fHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMuZG9jdW1lbnR8fHRoaXMsdD1ZLmFjY2VzcyhlLHIpLTE7dD9ZLmFjY2VzcyhlLHIsdCk6KGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihuLGksITApLFkucmVtb3ZlKGUscikpfX19KTt2YXIgVHQ9Qy5sb2NhdGlvbixDdD17Z3VpZDpEYXRlLm5vdygpfSxFdD0vXD8vO1MucGFyc2VYTUw9ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoIWV8fCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gbnVsbDt0cnl7dD0obmV3IEMuRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoZSwidGV4dC94bWwiKX1jYXRjaChlKXt0PXZvaWQgMH1yZXR1cm4gdCYmIXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RofHxTLmVycm9yKCJJbnZhbGlkIFhNTDogIitlKSx0fTt2YXIgU3Q9L1xbXF0kLyxrdD0vXHI/XG4vZyxBdD0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksTnQ9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIER0KG4sZSxyLGkpe3ZhciB0O2lmKEFycmF5LmlzQXJyYXkoZSkpUy5lYWNoKGUsZnVuY3Rpb24oZSx0KXtyfHxTdC50ZXN0KG4pP2kobix0KTpEdChuKyJbIisoIm9iamVjdCI9PXR5cGVvZiB0JiZudWxsIT10P2U6IiIpKyJdIix0LHIsaSl9KTtlbHNlIGlmKHJ8fCJvYmplY3QiIT09dyhlKSlpKG4sZSk7ZWxzZSBmb3IodCBpbiBlKUR0KG4rIlsiK3QrIl0iLGVbdF0scixpKX1TLnBhcmFtPWZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPWZ1bmN0aW9uKGUsdCl7dmFyIG49bSh0KT90KCk6dDtyW3IubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoZSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChudWxsPT1uPyIiOm4pfTtpZihudWxsPT1lKXJldHVybiIiO2lmKEFycmF5LmlzQXJyYXkoZSl8fGUuanF1ZXJ5JiYhUy5pc1BsYWluT2JqZWN0KGUpKVMuZWFjaChlLGZ1bmN0aW9uKCl7aSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihuIGluIGUpRHQobixlW25dLHQsaSk7cmV0dXJuIHIuam9pbigiJiIpfSxTLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIFMucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT1TLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gZT9TLm1ha2VBcnJheShlKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFTKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmTnQudGVzdCh0aGlzLm5vZGVOYW1lKSYmIUF0LnRlc3QoZSkmJih0aGlzLmNoZWNrZWR8fCFwZS50ZXN0KGUpKX0pLm1hcChmdW5jdGlvbihlLHQpe3ZhciBuPVModGhpcykudmFsKCk7cmV0dXJuIG51bGw9PW4/bnVsbDpBcnJheS5pc0FycmF5KG4pP1MubWFwKG4sZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6dC5uYW1lLHZhbHVlOmUucmVwbGFjZShrdCwiXHJcbiIpfX0pOntuYW1lOnQubmFtZSx2YWx1ZTpuLnJlcGxhY2Uoa3QsIlxyXG4iKX19KS5nZXQoKX19KTt2YXIganQ9LyUyMC9nLHF0PS8jLiokLyxMdD0vKFs/Jl0pXz1bXiZdKi8sSHQ9L14oLio/KTpbIFx0XSooW15cclxuXSopJC9nbSxPdD0vXig/OkdFVHxIRUFEKSQvLFB0PS9eXC9cLy8sUnQ9e30sTXQ9e30sSXQ9IiovIi5jb25jYXQoIioiKSxXdD1FLmNyZWF0ZUVsZW1lbnQoImEiKTtmdW5jdGlvbiBGdChvKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXsic3RyaW5nIiE9dHlwZW9mIGUmJih0PWUsZT0iKiIpO3ZhciBuLHI9MCxpPWUudG9Mb3dlckNhc2UoKS5tYXRjaChQKXx8W107aWYobSh0KSl3aGlsZShuPWlbcisrXSkiKyI9PT1uWzBdPyhuPW4uc2xpY2UoMSl8fCIqIiwob1tuXT1vW25dfHxbXSkudW5zaGlmdCh0KSk6KG9bbl09b1tuXXx8W10pLnB1c2godCl9fWZ1bmN0aW9uIEJ0KHQsaSxvLGEpe3ZhciBzPXt9LHU9dD09PU10O2Z1bmN0aW9uIGwoZSl7dmFyIHI7cmV0dXJuIHNbZV09ITAsUy5lYWNoKHRbZV18fFtdLGZ1bmN0aW9uKGUsdCl7dmFyIG49dChpLG8sYSk7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBufHx1fHxzW25dP3U/IShyPW4pOnZvaWQgMDooaS5kYXRhVHlwZXMudW5zaGlmdChuKSxsKG4pLCExKX0pLHJ9cmV0dXJuIGwoaS5kYXRhVHlwZXNbMF0pfHwhc1siKiJdJiZsKCIqIil9ZnVuY3Rpb24gJHQoZSx0KXt2YXIgbixyLGk9Uy5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihuIGluIHQpdm9pZCAwIT09dFtuXSYmKChpW25dP2U6cnx8KHI9e30pKVtuXT10W25dKTtyZXR1cm4gciYmUy5leHRlbmQoITAsZSxyKSxlfVd0LmhyZWY9VHQuaHJlZixTLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6VHQuaHJlZix0eXBlOiJHRVQiLGlzTG9jYWw6L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8udGVzdChUdC5wcm90b2NvbCksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjpJdCx0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDovXGJ4bWxcYi8saHRtbDovXGJodG1sLyxqc29uOi9cYmpzb25cYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjpKU09OLnBhcnNlLCJ0ZXh0IHhtbCI6Uy5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/JHQoJHQoZSxTLmFqYXhTZXR0aW5ncyksdCk6JHQoUy5hamF4U2V0dGluZ3MsZSl9LGFqYXhQcmVmaWx0ZXI6RnQoUnQpLGFqYXhUcmFuc3BvcnQ6RnQoTXQpLGFqYXg6ZnVuY3Rpb24oZSx0KXsib2JqZWN0Ij09dHlwZW9mIGUmJih0PWUsZT12b2lkIDApLHQ9dHx8e307dmFyIGMsZixwLG4sZCxyLGgsZyxpLG8sdj1TLmFqYXhTZXR1cCh7fSx0KSx5PXYuY29udGV4dHx8dixtPXYuY29udGV4dCYmKHkubm9kZVR5cGV8fHkuanF1ZXJ5KT9TKHkpOlMuZXZlbnQseD1TLkRlZmVycmVkKCksYj1TLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSx3PXYuc3RhdHVzQ29kZXx8e30sYT17fSxzPXt9LHU9ImNhbmNlbGVkIixUPXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoaCl7aWYoIW4pe249e307d2hpbGUodD1IdC5leGVjKHApKW5bdFsxXS50b0xvd2VyQ2FzZSgpKyIgIl09KG5bdFsxXS50b0xvd2VyQ2FzZSgpKyIgIl18fFtdKS5jb25jYXQodFsyXSl9dD1uW2UudG9Mb3dlckNhc2UoKSsiICJdfXJldHVybiBudWxsPT10P251bGw6dC5qb2luKCIsICIpfSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gaD9wOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbD09aCYmKGU9c1tlLnRvTG93ZXJDYXNlKCldPXNbZS50b0xvd2VyQ2FzZSgpXXx8ZSxhW2VdPXQpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWgmJih2Lm1pbWVUeXBlPWUpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZSlpZihoKVQuYWx3YXlzKGVbVC5zdGF0dXNdKTtlbHNlIGZvcih0IGluIGUpd1t0XT1bd1t0XSxlW3RdXTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZXx8dTtyZXR1cm4gYyYmYy5hYm9ydCh0KSxsKDAsdCksdGhpc319O2lmKHgucHJvbWlzZShUKSx2LnVybD0oKGV8fHYudXJsfHxUdC5ocmVmKSsiIikucmVwbGFjZShQdCxUdC5wcm90b2NvbCsiLy8iKSx2LnR5cGU9dC5tZXRob2R8fHQudHlwZXx8di5tZXRob2R8fHYudHlwZSx2LmRhdGFUeXBlcz0odi5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKFApfHxbIiJdLG51bGw9PXYuY3Jvc3NEb21haW4pe3I9RS5jcmVhdGVFbGVtZW50KCJhIik7dHJ5e3IuaHJlZj12LnVybCxyLmhyZWY9ci5ocmVmLHYuY3Jvc3NEb21haW49V3QucHJvdG9jb2wrIi8vIitXdC5ob3N0IT1yLnByb3RvY29sKyIvLyIrci5ob3N0fWNhdGNoKGUpe3YuY3Jvc3NEb21haW49ITB9fWlmKHYuZGF0YSYmdi5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiB2LmRhdGEmJih2LmRhdGE9Uy5wYXJhbSh2LmRhdGEsdi50cmFkaXRpb25hbCkpLEJ0KFJ0LHYsdCxUKSxoKXJldHVybiBUO2ZvcihpIGluKGc9Uy5ldmVudCYmdi5nbG9iYWwpJiYwPT1TLmFjdGl2ZSsrJiZTLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLHYudHlwZT12LnR5cGUudG9VcHBlckNhc2UoKSx2Lmhhc0NvbnRlbnQ9IU90LnRlc3Qodi50eXBlKSxmPXYudXJsLnJlcGxhY2UocXQsIiIpLHYuaGFzQ29udGVudD92LmRhdGEmJnYucHJvY2Vzc0RhdGEmJjA9PT0odi5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiYodi5kYXRhPXYuZGF0YS5yZXBsYWNlKGp0LCIrIikpOihvPXYudXJsLnNsaWNlKGYubGVuZ3RoKSx2LmRhdGEmJih2LnByb2Nlc3NEYXRhfHwic3RyaW5nIj09dHlwZW9mIHYuZGF0YSkmJihmKz0oRXQudGVzdChmKT8iJiI6Ij8iKSt2LmRhdGEsZGVsZXRlIHYuZGF0YSksITE9PT12LmNhY2hlJiYoZj1mLnJlcGxhY2UoTHQsIiQxIiksbz0oRXQudGVzdChmKT8iJiI6Ij8iKSsiXz0iK0N0Lmd1aWQrKytvKSx2LnVybD1mK28pLHYuaWZNb2RpZmllZCYmKFMubGFzdE1vZGlmaWVkW2ZdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIixTLmxhc3RNb2RpZmllZFtmXSksUy5ldGFnW2ZdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLFMuZXRhZ1tmXSkpLCh2LmRhdGEmJnYuaGFzQ29udGVudCYmITEhPT12LmNvbnRlbnRUeXBlfHx0LmNvbnRlbnRUeXBlKSYmVC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLHYuY29udGVudFR5cGUpLFQuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0Iix2LmRhdGFUeXBlc1swXSYmdi5hY2NlcHRzW3YuZGF0YVR5cGVzWzBdXT92LmFjY2VwdHNbdi5kYXRhVHlwZXNbMF1dKygiKiIhPT12LmRhdGFUeXBlc1swXT8iLCAiK0l0KyI7IHE9MC4wMSI6IiIpOnYuYWNjZXB0c1siKiJdKSx2LmhlYWRlcnMpVC5zZXRSZXF1ZXN0SGVhZGVyKGksdi5oZWFkZXJzW2ldKTtpZih2LmJlZm9yZVNlbmQmJighMT09PXYuYmVmb3JlU2VuZC5jYWxsKHksVCx2KXx8aCkpcmV0dXJuIFQuYWJvcnQoKTtpZih1PSJhYm9ydCIsYi5hZGQodi5jb21wbGV0ZSksVC5kb25lKHYuc3VjY2VzcyksVC5mYWlsKHYuZXJyb3IpLGM9QnQoTXQsdix0LFQpKXtpZihULnJlYWR5U3RhdGU9MSxnJiZtLnRyaWdnZXIoImFqYXhTZW5kIixbVCx2XSksaClyZXR1cm4gVDt2LmFzeW5jJiYwPHYudGltZW91dCYmKGQ9Qy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7VC5hYm9ydCgidGltZW91dCIpfSx2LnRpbWVvdXQpKTt0cnl7aD0hMSxjLnNlbmQoYSxsKX1jYXRjaChlKXtpZihoKXRocm93IGU7bCgtMSxlKX19ZWxzZSBsKC0xLCJObyBUcmFuc3BvcnQiKTtmdW5jdGlvbiBsKGUsdCxuLHIpe3ZhciBpLG8sYSxzLHUsbD10O2h8fChoPSEwLGQmJkMuY2xlYXJUaW1lb3V0KGQpLGM9dm9pZCAwLHA9cnx8IiIsVC5yZWFkeVN0YXRlPTA8ZT80OjAsaT0yMDA8PWUmJmU8MzAwfHwzMDQ9PT1lLG4mJihzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzPWUuY29udGVudHMsdT1lLmRhdGFUeXBlczt3aGlsZSgiKiI9PT11WzBdKXUuc2hpZnQoKSx2b2lkIDA9PT1yJiYocj1lLm1pbWVUeXBlfHx0LmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKSk7aWYocilmb3IoaSBpbiBzKWlmKHNbaV0mJnNbaV0udGVzdChyKSl7dS51bnNoaWZ0KGkpO2JyZWFrfWlmKHVbMF1pbiBuKW89dVswXTtlbHNle2ZvcihpIGluIG4pe2lmKCF1WzBdfHxlLmNvbnZlcnRlcnNbaSsiICIrdVswXV0pe289aTticmVha31hfHwoYT1pKX1vPW98fGF9aWYobylyZXR1cm4gbyE9PXVbMF0mJnUudW5zaGlmdChvKSxuW29dfSh2LFQsbikpLCFpJiYtMTxTLmluQXJyYXkoInNjcmlwdCIsdi5kYXRhVHlwZXMpJiYodi5jb252ZXJ0ZXJzWyJ0ZXh0IHNjcmlwdCJdPWZ1bmN0aW9uKCl7fSkscz1mdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLGEscyx1LGw9e30sYz1lLmRhdGFUeXBlcy5zbGljZSgpO2lmKGNbMV0pZm9yKGEgaW4gZS5jb252ZXJ0ZXJzKWxbYS50b0xvd2VyQ2FzZSgpXT1lLmNvbnZlcnRlcnNbYV07bz1jLnNoaWZ0KCk7d2hpbGUobylpZihlLnJlc3BvbnNlRmllbGRzW29dJiYobltlLnJlc3BvbnNlRmllbGRzW29dXT10KSwhdSYmciYmZS5kYXRhRmlsdGVyJiYodD1lLmRhdGFGaWx0ZXIodCxlLmRhdGFUeXBlKSksdT1vLG89Yy5zaGlmdCgpKWlmKCIqIj09PW8pbz11O2Vsc2UgaWYoIioiIT09dSYmdSE9PW8pe2lmKCEoYT1sW3UrIiAiK29dfHxsWyIqICIrb10pKWZvcihpIGluIGwpaWYoKHM9aS5zcGxpdCgiICIpKVsxXT09PW8mJihhPWxbdSsiICIrc1swXV18fGxbIiogIitzWzBdXSkpeyEwPT09YT9hPWxbaV06ITAhPT1sW2ldJiYobz1zWzBdLGMudW5zaGlmdChzWzFdKSk7YnJlYWt9aWYoITAhPT1hKWlmKGEmJmVbInRocm93cyJdKXQ9YSh0KTtlbHNlIHRyeXt0PWEodCl9Y2F0Y2goZSl7cmV0dXJue3N0YXRlOiJwYXJzZXJlcnJvciIsZXJyb3I6YT9lOiJObyBjb252ZXJzaW9uIGZyb20gIit1KyIgdG8gIitvfX19cmV0dXJue3N0YXRlOiJzdWNjZXNzIixkYXRhOnR9fSh2LHMsVCxpKSxpPyh2LmlmTW9kaWZpZWQmJigodT1ULmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIikpJiYoUy5sYXN0TW9kaWZpZWRbZl09dSksKHU9VC5nZXRSZXNwb25zZUhlYWRlcigiZXRhZyIpKSYmKFMuZXRhZ1tmXT11KSksMjA0PT09ZXx8IkhFQUQiPT09di50eXBlP2w9Im5vY29udGVudCI6MzA0PT09ZT9sPSJub3Rtb2RpZmllZCI6KGw9cy5zdGF0ZSxvPXMuZGF0YSxpPSEoYT1zLmVycm9yKSkpOihhPWwsIWUmJmx8fChsPSJlcnJvciIsZTwwJiYoZT0wKSkpLFQuc3RhdHVzPWUsVC5zdGF0dXNUZXh0PSh0fHxsKSsiIixpP3gucmVzb2x2ZVdpdGgoeSxbbyxsLFRdKTp4LnJlamVjdFdpdGgoeSxbVCxsLGFdKSxULnN0YXR1c0NvZGUodyksdz12b2lkIDAsZyYmbS50cmlnZ2VyKGk/ImFqYXhTdWNjZXNzIjoiYWpheEVycm9yIixbVCx2LGk/bzphXSksYi5maXJlV2l0aCh5LFtULGxdKSxnJiYobS50cmlnZ2VyKCJhamF4Q29tcGxldGUiLFtULHZdKSwtLVMuYWN0aXZlfHxTLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIikpKX1yZXR1cm4gVH0sZ2V0SlNPTjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFMuZ2V0KGUsdCxuLCJqc29uIil9LGdldFNjcmlwdDpmdW5jdGlvbihlLHQpe3JldHVybiBTLmdldChlLHZvaWQgMCx0LCJzY3JpcHQiKX19KSxTLmVhY2goWyJnZXQiLCJwb3N0Il0sZnVuY3Rpb24oZSxpKXtTW2ldPWZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBtKHQpJiYocj1yfHxuLG49dCx0PXZvaWQgMCksUy5hamF4KFMuZXh0ZW5kKHt1cmw6ZSx0eXBlOmksZGF0YVR5cGU6cixkYXRhOnQsc3VjY2VzczpufSxTLmlzUGxhaW5PYmplY3QoZSkmJmUpKX19KSxTLmFqYXhQcmVmaWx0ZXIoZnVuY3Rpb24oZSl7dmFyIHQ7Zm9yKHQgaW4gZS5oZWFkZXJzKSJjb250ZW50LXR5cGUiPT09dC50b0xvd2VyQ2FzZSgpJiYoZS5jb250ZW50VHlwZT1lLmhlYWRlcnNbdF18fCIiKX0pLFMuX2V2YWxVcmw9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBTLmFqYXgoe3VybDplLHR5cGU6IkdFVCIsZGF0YVR5cGU6InNjcmlwdCIsY2FjaGU6ITAsYXN5bmM6ITEsZ2xvYmFsOiExLGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oKXt9fSxkYXRhRmlsdGVyOmZ1bmN0aW9uKGUpe1MuZ2xvYmFsRXZhbChlLHQsbil9fSl9LFMuZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB0aGlzWzBdJiYobShlKSYmKGU9ZS5jYWxsKHRoaXNbMF0pKSx0PVMoZSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJnQuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLHQubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpczt3aGlsZShlLmZpcnN0RWxlbWVudENoaWxkKWU9ZS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gZX0pLmFwcGVuZCh0aGlzKSksdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKG4pe3JldHVybiBtKG4pP3RoaXMuZWFjaChmdW5jdGlvbihlKXtTKHRoaXMpLndyYXBJbm5lcihuLmNhbGwodGhpcyxlKSl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1TKHRoaXMpLHQ9ZS5jb250ZW50cygpO3QubGVuZ3RoP3Qud3JhcEFsbChuKTplLmFwcGVuZChuKX0pfSx3cmFwOmZ1bmN0aW9uKHQpe3ZhciBuPW0odCk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlKXtTKHRoaXMpLndyYXBBbGwobj90LmNhbGwodGhpcyxlKTp0KX0pfSx1bndyYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucGFyZW50KGUpLm5vdCgiYm9keSIpLmVhY2goZnVuY3Rpb24oKXtTKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KSx0aGlzfX0pLFMuZXhwci5wc2V1ZG9zLmhpZGRlbj1mdW5jdGlvbihlKXtyZXR1cm4hUy5leHByLnBzZXVkb3MudmlzaWJsZShlKX0sUy5leHByLnBzZXVkb3MudmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4hIShlLm9mZnNldFdpZHRofHxlLm9mZnNldEhlaWdodHx8ZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCl9LFMuYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IEMuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goZSl7fX07dmFyIF90PXswOjIwMCwxMjIzOjIwNH0senQ9Uy5hamF4U2V0dGluZ3MueGhyKCk7eS5jb3JzPSEhenQmJiJ3aXRoQ3JlZGVudGlhbHMiaW4genQseS5hamF4PXp0PSEhenQsUy5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGkpe3ZhciBvLGE7aWYoeS5jb3JzfHx6dCYmIWkuY3Jvc3NEb21haW4pcmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPWkueGhyKCk7aWYoci5vcGVuKGkudHlwZSxpLnVybCxpLmFzeW5jLGkudXNlcm5hbWUsaS5wYXNzd29yZCksaS54aHJGaWVsZHMpZm9yKG4gaW4gaS54aHJGaWVsZHMpcltuXT1pLnhockZpZWxkc1tuXTtmb3IobiBpbiBpLm1pbWVUeXBlJiZyLm92ZXJyaWRlTWltZVR5cGUmJnIub3ZlcnJpZGVNaW1lVHlwZShpLm1pbWVUeXBlKSxpLmNyb3NzRG9tYWlufHxlWyJYLVJlcXVlc3RlZC1XaXRoIl18fChlWyJYLVJlcXVlc3RlZC1XaXRoIl09IlhNTEh0dHBSZXF1ZXN0IiksZSlyLnNldFJlcXVlc3RIZWFkZXIobixlW25dKTtvPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe28mJihvPWE9ci5vbmxvYWQ9ci5vbmVycm9yPXIub25hYm9ydD1yLm9udGltZW91dD1yLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLCJhYm9ydCI9PT1lP3IuYWJvcnQoKToiZXJyb3IiPT09ZT8ibnVtYmVyIiE9dHlwZW9mIHIuc3RhdHVzP3QoMCwiZXJyb3IiKTp0KHIuc3RhdHVzLHIuc3RhdHVzVGV4dCk6dChfdFtyLnN0YXR1c118fHIuc3RhdHVzLHIuc3RhdHVzVGV4dCwidGV4dCIhPT0oci5yZXNwb25zZVR5cGV8fCJ0ZXh0Iil8fCJzdHJpbmciIT10eXBlb2Ygci5yZXNwb25zZVRleHQ/e2JpbmFyeTpyLnJlc3BvbnNlfTp7dGV4dDpyLnJlc3BvbnNlVGV4dH0sci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0sci5vbmxvYWQ9bygpLGE9ci5vbmVycm9yPXIub250aW1lb3V0PW8oImVycm9yIiksdm9pZCAwIT09ci5vbmFib3J0P3Iub25hYm9ydD1hOnIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PXIucmVhZHlTdGF0ZSYmQy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7byYmYSgpfSl9LG89bygiYWJvcnQiKTt0cnl7ci5zZW5kKGkuaGFzQ29udGVudCYmaS5kYXRhfHxudWxsKX1jYXRjaChlKXtpZihvKXRocm93IGV9fSxhYm9ydDpmdW5jdGlvbigpe28mJm8oKX19fSksUy5hamF4UHJlZmlsdGVyKGZ1bmN0aW9uKGUpe2UuY3Jvc3NEb21haW4mJihlLmNvbnRlbnRzLnNjcmlwdD0hMSl9KSxTLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6L1xiKD86amF2YXxlY21hKXNjcmlwdFxiL30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbihlKXtyZXR1cm4gUy5nbG9iYWxFdmFsKGUpLGV9fX0pLFMuYWpheFByZWZpbHRlcigic2NyaXB0IixmdW5jdGlvbihlKXt2b2lkIDA9PT1lLmNhY2hlJiYoZS5jYWNoZT0hMSksZS5jcm9zc0RvbWFpbiYmKGUudHlwZT0iR0VUIil9KSxTLmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24obil7dmFyIHIsaTtpZihuLmNyb3NzRG9tYWlufHxuLnNjcmlwdEF0dHJzKXJldHVybntzZW5kOmZ1bmN0aW9uKGUsdCl7cj1TKCI8c2NyaXB0PiIpLmF0dHIobi5zY3JpcHRBdHRyc3x8e30pLnByb3Aoe2NoYXJzZXQ6bi5zY3JpcHRDaGFyc2V0LHNyYzpuLnVybH0pLm9uKCJsb2FkIGVycm9yIixpPWZ1bmN0aW9uKGUpe3IucmVtb3ZlKCksaT1udWxsLGUmJnQoImVycm9yIj09PWUudHlwZT80MDQ6MjAwLGUudHlwZSl9KSxFLmhlYWQuYXBwZW5kQ2hpbGQoclswXSl9LGFib3J0OmZ1bmN0aW9uKCl7aSYmaSgpfX19KTt2YXIgVXQsWHQ9W10sVnQ9Lyg9KVw/KD89JnwkKXxcP1w/LztTLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGU9WHQucG9wKCl8fFMuZXhwYW5kbysiXyIrQ3QuZ3VpZCsrO3JldHVybiB0aGlzW2VdPSEwLGV9fSksUy5hamF4UHJlZmlsdGVyKCJqc29uIGpzb25wIixmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLGE9ITEhPT1lLmpzb25wJiYoVnQudGVzdChlLnVybCk/InVybCI6InN0cmluZyI9PXR5cGVvZiBlLmRhdGEmJjA9PT0oZS5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiZWdC50ZXN0KGUuZGF0YSkmJiJkYXRhIik7aWYoYXx8Impzb25wIj09PWUuZGF0YVR5cGVzWzBdKXJldHVybiByPWUuanNvbnBDYWxsYmFjaz1tKGUuanNvbnBDYWxsYmFjayk/ZS5qc29ucENhbGxiYWNrKCk6ZS5qc29ucENhbGxiYWNrLGE/ZVthXT1lW2FdLnJlcGxhY2UoVnQsIiQxIityKTohMSE9PWUuanNvbnAmJihlLnVybCs9KEV0LnRlc3QoZS51cmwpPyImIjoiPyIpK2UuanNvbnArIj0iK3IpLGUuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBvfHxTLmVycm9yKHIrIiB3YXMgbm90IGNhbGxlZCIpLG9bMF19LGUuZGF0YVR5cGVzWzBdPSJqc29uIixpPUNbcl0sQ1tyXT1mdW5jdGlvbigpe289YXJndW1lbnRzfSxuLmFsd2F5cyhmdW5jdGlvbigpe3ZvaWQgMD09PWk/UyhDKS5yZW1vdmVQcm9wKHIpOkNbcl09aSxlW3JdJiYoZS5qc29ucENhbGxiYWNrPXQuanNvbnBDYWxsYmFjayxYdC5wdXNoKHIpKSxvJiZtKGkpJiZpKG9bMF0pLG89aT12b2lkIDB9KSwic2NyaXB0In0pLHkuY3JlYXRlSFRNTERvY3VtZW50PSgoVXQ9RS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpLmJvZHkpLmlubmVySFRNTD0iPGZvcm0+PC9mb3JtPjxmb3JtPjwvZm9ybT4iLDI9PT1VdC5jaGlsZE5vZGVzLmxlbmd0aCksUy5wYXJzZUhUTUw9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiJzdHJpbmciIT10eXBlb2YgZT9bXTooImJvb2xlYW4iPT10eXBlb2YgdCYmKG49dCx0PSExKSx0fHwoeS5jcmVhdGVIVE1MRG9jdW1lbnQ/KChyPSh0PUUuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSkuY3JlYXRlRWxlbWVudCgiYmFzZSIpKS5ocmVmPUUubG9jYXRpb24uaHJlZix0LmhlYWQuYXBwZW5kQ2hpbGQocikpOnQ9RSksbz0hbiYmW10sKGk9Ti5leGVjKGUpKT9bdC5jcmVhdGVFbGVtZW50KGlbMV0pXTooaT14ZShbZV0sdCxvKSxvJiZvLmxlbmd0aCYmUyhvKS5yZW1vdmUoKSxTLm1lcmdlKFtdLGkuY2hpbGROb2RlcykpKTt2YXIgcixpLG99LFMuZm4ubG9hZD1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLGE9dGhpcyxzPWUuaW5kZXhPZigiICIpO3JldHVybi0xPHMmJihyPXZ0KGUuc2xpY2UocykpLGU9ZS5zbGljZSgwLHMpKSxtKHQpPyhuPXQsdD12b2lkIDApOnQmJiJvYmplY3QiPT10eXBlb2YgdCYmKGk9IlBPU1QiKSwwPGEubGVuZ3RoJiZTLmFqYXgoe3VybDplLHR5cGU6aXx8IkdFVCIsZGF0YVR5cGU6Imh0bWwiLGRhdGE6dH0pLmRvbmUoZnVuY3Rpb24oZSl7bz1hcmd1bWVudHMsYS5odG1sKHI/UygiPGRpdj4iKS5hcHBlbmQoUy5wYXJzZUhUTUwoZSkpLmZpbmQocik6ZSl9KS5hbHdheXMobiYmZnVuY3Rpb24oZSx0KXthLmVhY2goZnVuY3Rpb24oKXtuLmFwcGx5KHRoaXMsb3x8W2UucmVzcG9uc2VUZXh0LHQsZV0pfSl9KSx0aGlzfSxTLmV4cHIucHNldWRvcy5hbmltYXRlZD1mdW5jdGlvbih0KXtyZXR1cm4gUy5ncmVwKFMudGltZXJzLGZ1bmN0aW9uKGUpe3JldHVybiB0PT09ZS5lbGVtfSkubGVuZ3RofSxTLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbD1TLmNzcyhlLCJwb3NpdGlvbiIpLGM9UyhlKSxmPXt9OyJzdGF0aWMiPT09bCYmKGUuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIikscz1jLm9mZnNldCgpLG89Uy5jc3MoZSwidG9wIiksdT1TLmNzcyhlLCJsZWZ0IiksKCJhYnNvbHV0ZSI9PT1sfHwiZml4ZWQiPT09bCkmJi0xPChvK3UpLmluZGV4T2YoImF1dG8iKT8oYT0ocj1jLnBvc2l0aW9uKCkpLnRvcCxpPXIubGVmdCk6KGE9cGFyc2VGbG9hdChvKXx8MCxpPXBhcnNlRmxvYXQodSl8fDApLG0odCkmJih0PXQuY2FsbChlLG4sUy5leHRlbmQoe30scykpKSxudWxsIT10LnRvcCYmKGYudG9wPXQudG9wLXMudG9wK2EpLG51bGwhPXQubGVmdCYmKGYubGVmdD10LmxlZnQtcy5sZWZ0K2kpLCJ1c2luZyJpbiB0P3QudXNpbmcuY2FsbChlLGYpOigibnVtYmVyIj09dHlwZW9mIGYudG9wJiYoZi50b3ArPSJweCIpLCJudW1iZXIiPT10eXBlb2YgZi5sZWZ0JiYoZi5sZWZ0Kz0icHgiKSxjLmNzcyhmKSl9fSxTLmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKHQpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PXQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oZSl7Uy5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsdCxlKX0pO3ZhciBlLG4scj10aGlzWzBdO3JldHVybiByP3IuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGg/KGU9ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPXIub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyx7dG9wOmUudG9wK24ucGFnZVlPZmZzZXQsbGVmdDplLmxlZnQrbi5wYWdlWE9mZnNldH0pOnt0b3A6MCxsZWZ0OjB9OnZvaWQgMH0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgZSx0LG4scj10aGlzWzBdLGk9e3RvcDowLGxlZnQ6MH07aWYoImZpeGVkIj09PVMuY3NzKHIsInBvc2l0aW9uIikpdD1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2Vsc2V7dD10aGlzLm9mZnNldCgpLG49ci5vd25lckRvY3VtZW50LGU9ci5vZmZzZXRQYXJlbnR8fG4uZG9jdW1lbnRFbGVtZW50O3doaWxlKGUmJihlPT09bi5ib2R5fHxlPT09bi5kb2N1bWVudEVsZW1lbnQpJiYic3RhdGljIj09PVMuY3NzKGUsInBvc2l0aW9uIikpZT1lLnBhcmVudE5vZGU7ZSYmZSE9PXImJjE9PT1lLm5vZGVUeXBlJiYoKGk9UyhlKS5vZmZzZXQoKSkudG9wKz1TLmNzcyhlLCJib3JkZXJUb3BXaWR0aCIsITApLGkubGVmdCs9Uy5jc3MoZSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpfXJldHVybnt0b3A6dC50b3AtaS50b3AtUy5jc3MociwibWFyZ2luVG9wIiwhMCksbGVmdDp0LmxlZnQtaS5sZWZ0LVMuY3NzKHIsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShlJiYic3RhdGljIj09PVMuY3NzKGUsInBvc2l0aW9uIikpZT1lLm9mZnNldFBhcmVudDtyZXR1cm4gZXx8cmV9KX19KSxTLmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24odCxpKXt2YXIgbz0icGFnZVlPZmZzZXQiPT09aTtTLmZuW3RdPWZ1bmN0aW9uKGUpe3JldHVybiAkKHRoaXMsZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKHgoZSk/cj1lOjk9PT1lLm5vZGVUeXBlJiYocj1lLmRlZmF1bHRWaWV3KSx2b2lkIDA9PT1uKXJldHVybiByP3JbaV06ZVt0XTtyP3Iuc2Nyb2xsVG8obz9yLnBhZ2VYT2Zmc2V0Om4sbz9uOnIucGFnZVlPZmZzZXQpOmVbdF09bn0sdCxlLGFyZ3VtZW50cy5sZW5ndGgpfX0pLFMuZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihlLG4pe1MuY3NzSG9va3Nbbl09JGUoeS5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGUsdCl7aWYodClyZXR1cm4gdD1CZShlLG4pLE1lLnRlc3QodCk/UyhlKS5wb3NpdGlvbigpW25dKyJweCI6dH0pfSksUy5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oYSxzKXtTLmVhY2goe3BhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6cywiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKHIsbyl7Uy5mbltvXT1mdW5jdGlvbihlLHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGgmJihyfHwiYm9vbGVhbiIhPXR5cGVvZiBlKSxpPXJ8fCghMD09PWV8fCEwPT09dD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuICQodGhpcyxmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIHgoZSk/MD09PW8uaW5kZXhPZigib3V0ZXIiKT9lWyJpbm5lciIrYV06ZS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWUubm9kZVR5cGU/KHI9ZS5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoZS5ib2R5WyJzY3JvbGwiK2FdLHJbInNjcm9sbCIrYV0sZS5ib2R5WyJvZmZzZXQiK2FdLHJbIm9mZnNldCIrYV0sclsiY2xpZW50IithXSkpOnZvaWQgMD09PW4/Uy5jc3MoZSx0LGkpOlMuc3R5bGUoZSx0LG4saSl9LHMsbj9lOnZvaWQgMCxuKX19KX0pLFMuZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGUsdCl7Uy5mblt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLFMuZm4uZXh0ZW5kKHtiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5vbihlLG51bGwsdCxuKX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub2ZmKGUsbnVsbCx0KX0sZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24odCxlLG4scil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihlLCIqKiIpOnRoaXMub2ZmKHQsZXx8IioqIixuKX0saG92ZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGUpLm1vdXNlbGVhdmUodHx8ZSl9fSksUy5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsbil7Uy5mbltuXT1mdW5jdGlvbihlLHQpe3JldHVybiAwPGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vbihuLG51bGwsZSx0KTp0aGlzLnRyaWdnZXIobil9fSk7dmFyIEd0PS9eW1xzXHVGRUZGXHhBMF0rfFtcc1x1RkVGRlx4QTBdKyQvZztTLnByb3h5PWZ1bmN0aW9uKGUsdCl7dmFyIG4scixpO2lmKCJzdHJpbmciPT10eXBlb2YgdCYmKG49ZVt0XSx0PWUsZT1uKSxtKGUpKXJldHVybiByPXMuY2FsbChhcmd1bWVudHMsMiksKGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0fHx0aGlzLHIuY29uY2F0KHMuY2FsbChhcmd1bWVudHMpKSl9KS5ndWlkPWUuZ3VpZD1lLmd1aWR8fFMuZ3VpZCsrLGl9LFMuaG9sZFJlYWR5PWZ1bmN0aW9uKGUpe2U/Uy5yZWFkeVdhaXQrKzpTLnJlYWR5KCEwKX0sUy5pc0FycmF5PUFycmF5LmlzQXJyYXksUy5wYXJzZUpTT049SlNPTi5wYXJzZSxTLm5vZGVOYW1lPUEsUy5pc0Z1bmN0aW9uPW0sUy5pc1dpbmRvdz14LFMuY2FtZWxDYXNlPVgsUy50eXBlPXcsUy5ub3c9RGF0ZS5ub3csUy5pc051bWVyaWM9ZnVuY3Rpb24oZSl7dmFyIHQ9Uy50eXBlKGUpO3JldHVybigibnVtYmVyIj09PXR8fCJzdHJpbmciPT09dCkmJiFpc05hTihlLXBhcnNlRmxvYXQoZSkpfSxTLnRyaW09ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6KGUrIiIpLnJlcGxhY2UoR3QsIiIpfSwiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gU30pO3ZhciBZdD1DLmpRdWVyeSxRdD1DLiQ7cmV0dXJuIFMubm9Db25mbGljdD1mdW5jdGlvbihlKXtyZXR1cm4gQy4kPT09UyYmKEMuJD1RdCksZSYmQy5qUXVlcnk9PT1TJiYoQy5qUXVlcnk9WXQpLFN9LCJ1bmRlZmluZWQiPT10eXBlb2YgZSYmKEMualF1ZXJ5PUMuJD1TKSxTfSk7Cg=="}]},{"name":"Notion Fixed TOC","options":{"awareOfChrome":false,"check_for_updates":false,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["https://www.notion.so/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1614661610765,"data":{}},"enabled":true,"position":6,"file_url":"https://greasyfork.org/scripts/406498-notion-fixed-toc/code/Notion%20Fixed%20TOC.user.js","uuid":"f398822d-ef69-49af-bb82-d6d9fe2f5f94","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBOb3Rpb24gRml4ZWQgVE9DCi8vIEBuYW1lOnpoLUNOICAgTm90aW9uIOa1ruWKqCBUT0MKLy8gQG5hbWVzcGFjZSAgICBodHRwczovL25vdGlvbi5jeC8KLy8gQHZlcnNpb24gICAgICAwLjIuMAovLyBAZGVzY3JpcHRpb24gIE1ha2UgTm90aW9uIFRPQyBGaXhlZC4KLy8gQGRlc2NyaXB0aW9uOnpoLWNuIOiuqSBOb3Rpb24g55qEIFRPQyDmta7liqjmmL7npLrjgIIKLy8gQGF1dGhvciAgICAgICBSdXRlciBMw7wKLy8gQG1hdGNoICAgICAgICBodHRwczovL3d3dy5ub3Rpb24uc28vKgovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgLyogSGVscGVyIGZ1bmN0aW9uIHRvIHdhaXQgZm9yIHRoZSBlbGVtZW50IHJlYWR5ICovCiAgICBjb25zdCB3YWl0Rm9yID0gKC4uLnNlbGVjdG9ycykgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgY29uc3QgZGVsYXkgPSA1MDA7CiAgICAgICAgY29uc3QgZiA9ICgpID0+IHsKICAgICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBzZWxlY3RvcnMubWFwKHNlbGVjdG9yID0+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpKTsKICAgICAgICAgICAgaWYgKGVsZW1lbnRzLmV2ZXJ5KGVsZW1lbnQgPT4gZWxlbWVudCAhPSBudWxsKSkgewogICAgICAgICAgICAgICAgcmVzb2x2ZShlbGVtZW50cyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGYsIGRlbGF5KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmKCk7CiAgICB9KTsKICAgIC8qIEhlbHBlciBmdW5jdGlvbiB0byB3YWl0IGZvciB0aGUgZWxlbWVudCByZWFkeSAqLwoKICAgIGxldCBjYWxsYmFjayA9IGZ1bmN0aW9uKG11dGF0aW9ucykgewogICAgICAgIHdhaXRGb3IoJy5ub3Rpb24tdGFibGVfb2ZfY29udGVudHMtYmxvY2snKS50aGVuKChbZWxdKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHRvYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3Rpb24tdGFibGVfb2ZfY29udGVudHMtYmxvY2snKTsKICAgICAgICAgICAgaWYgKHRvYykgewogICAgICAgICAgICAgICAgY29uc3QgdG9jX3AgPSB0b2MucGFyZW50RWxlbWVudDsKICAgICAgICAgICAgICAgIGlmICghdG9jX3AuY2xhc3NMaXN0LmNvbnRhaW5zKCdub3Rpb24tY29sdW1uLWJsb2NrJykpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0b2NfcC5zdHlsZS5wb3NpdGlvbiA9ICdzdGlja3knOwogICAgICAgICAgICAgICAgdG9jX3Auc3R5bGUudG9wID0gJzAnOwogICAgICAgICAgICAgICAgdG9jX3Auc3R5bGUub3ZlcmZsb3dZID0gJ2F1dG8nOwogICAgICAgICAgICAgICAgdG9jX3Auc3R5bGUubWF4SGVpZ2h0ID0gJzUwdmgnOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9OwogICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjayk7CiAgICBsZXQgbm90aW9uQXBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vdGlvbi1hcHAnKTsKICAgIGNvbnN0IGNvbmZpZyA9IHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH07CiAgICBvYnNlcnZlci5vYnNlcnZlKG5vdGlvbkFwcCwgY29uZmlnKTsKfSkoKTs="}],"settings":{"autoReload":true,"configMode":100,"i18n":"zh_CN","notification_silentScriptUpdate":false,"reset_sync":null,"script_blacklist_server":[{"rules":["/https?:\\/\\/userscripts\\.org\\/scripts\\/(source|version)/(102614).*\\.user\\.js/"],"severity":"2"},{"name":"SaveFrom.net helper","reason":"Shows advertisements","rules":["/https?:\\/\\/sf-addon\\.com\\/.*\\/.*\\.user\\.js/","/https?:\\/\\/.*\\.sf-helper\\.com\\/.*\\.user\\.js/"],"severity":"3"},{"reasons":{"en":"Used for a phishing compain to compromise users of baon-nutrition.com"},"rules":["/https?:\\/\\/files\\.ulysse\\.travel\\/.*\\.user\\.js/"],"severity":"8"}],"statistics_enabled":false,"sync_enabled":true,"sync_type":"6"}}